<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hello World</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I’ve been QA Engineer for the last nine years, from Jun 2018 I am a Software Engineer.">
<meta property="og:type" content="website">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="https://shenxianpeng.github.io/page/3/index.html">
<meta property="og:site_name" content="Hello World">
<meta property="og:description" content="I’ve been QA Engineer for the last nine years, from Jun 2018 I am a Software Engineer.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Xianpeng Shen">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hello World" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '[object Object]', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hello World</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">非著名程序员的网络日志，把分享变成一种习惯。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://shenxianpeng.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2020/01/git-stats-jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/git-stats-jenkins/" class="article-date">
  <time datetime="2020-01-21T14:06:53.000Z" itemprop="datePublished">2020-01-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/git-stats-jenkins/">通过 Jenkins 定期自动给老板提供 Git 仓库的多维度代码分析报告</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上一篇（GitStats - Git 历史统计信息工具），我已经给老板提供了他想看的所有仓库的 Git 提交历史分析报告了，并且把报告都部署到了一台虚拟机的 tomcat 上了，老板可以通过网址访问直接查看每个仓库的分析报告了，看看谁的贡献大，谁活跃，谁偷懒了，谁周末写代码了（这里不鼓励 996）。</p>
<p>最近老板提需求了。</p>
<p><em>老板：你弄个这个网址的数据咋不更新呢？报告上咋没见你们提交代码呢？</em><br><em>小开：老板儿，您看到这些一个个仓库的数据都是小开我人肉手动生成的，要不您给我点时间，我来做个自动化任务吧。</em></p>
<p>我这么积极主动，不是我奉承老板，我心里也知道老板如果觉得 Git Stats 这个工具好用，肯定希望看到的分析报告是最新的。既然老板先提了，那我就别磨蹭了，赶紧干吧。</p>
<p>不过用啥实现呢？肯定是 Jenkins 了。一来我已经在 Jenkins 上做了很多的自动化任务了，轻车熟路；二来使用同一套系统不但可以减少繁多的系统入口，降低学习成本，也提高 Jenkins 服务器的利用率。</p>
<p>设身处地的考虑了下老板的使用需求，他肯定不希望自己去 Jenkins 服务器上去运行 Job 来生成这个Git 仓库的多维度代码分析报告，那么，如果我是老板，我希望：</p>
<ol>
<li>这个 Jenkins 任务要定期执行，不需要太频繁，一周更新一次就行；</li>
<li>另外还要支持对单独仓库的单独执行，一旦老板要立即马上查看某个仓库的的分析报告呢。</li>
</ol>
<p>最后实现的效果如下：</p>
<h2 id="手动执行"><a href="#手动执行" class="headerlink" title="手动执行"></a>手动执行</h2><p>老板可以勾选他最关心的代码仓库进行更新</p>
<h2 id="每周末定时执行"><a href="#每周末定时执行" class="headerlink" title="每周末定时执行"></a>每周末定时执行</h2><p>老板在周一上班就能看到最新的分析数据了，可以看到这个任务 Started by timer</p>
<h2 id="最终的-Jenkinsfile-是这样的"><a href="#最终的-Jenkinsfile-是这样的" class="headerlink" title="最终的 Jenkinsfile 是这样的"></a>最终的 Jenkinsfile 是这样的</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">pipeline&#123;</span><br><span class="line">  agent&#123;</span><br><span class="line">    node &#123;</span><br><span class="line">      label <span class="string">'main-slave'</span></span><br><span class="line">      customWorkspace <span class="string">"/workspace/gitstats"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  environment &#123;</span><br><span class="line">    USER_CRE = credentials(<span class="string">"d1cbab74-823d-41aa-abb7"</span>)</span><br><span class="line">    webapproot = <span class="string">"/workspace/apache-tomcat-7.0.99/webapps/gitstats"</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  parameters &#123;</span><br><span class="line">    booleanParam(defaultValue: <span class="literal">true</span>, name: <span class="string">'repo1'</span>, description: <span class="string">'uncheck to disable [repo1]'</span>)</span><br><span class="line">    booleanParam(defaultValue: <span class="literal">true</span>, name: <span class="string">'repo2'</span>, description: <span class="string">'uncheck to disable [repo2]'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  triggers &#123;</span><br><span class="line">    cron <span class="string">'0 3 * * 7'</span>    <span class="comment"># 每周日早上进行定时运行，因此此时机器是空闲的。</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  options &#123;</span><br><span class="line">    buildDiscarder(logRotator(numToKeepStr:<span class="string">'10'</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stages&#123;</span><br><span class="line">    stage(<span class="string">"Checkout gitstats"</span>)&#123;</span><br><span class="line">      steps&#123;</span><br><span class="line">        <span class="comment"># 准备存放 html 报告目录</span></span><br><span class="line">        sh <span class="string">"mkdir -p html"</span></span><br><span class="line">        <span class="comment"># 下载 gitstats 代码</span></span><br><span class="line">        sh <span class="string">"rm -rf gitstats &amp;&amp; git clone https://github.com/hoxu/gitstats.git"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    stage(<span class="string">"Under statistics"</span>) &#123;</span><br><span class="line">      parallel &#123;</span><br><span class="line">        stage(<span class="string">"reop1"</span>) &#123;</span><br><span class="line">          when &#123;</span><br><span class="line">            expression &#123; <span class="built_in">return</span> params.repo1 &#125;  <span class="comment"># 判断是否勾选了</span></span><br><span class="line">          &#125;</span><br><span class="line">          steps &#123;</span><br><span class="line">            <span class="comment"># 下载要进行分析的仓库 repo1</span></span><br><span class="line">            sh <span class="string">'git clone -b master https://$USER_CRE_USR:"$USER_CRE_PSW"@git.software.com/scm/repo1.git'</span></span><br><span class="line">            <span class="comment"># 进行仓库 repo1 的历史记录分析</span></span><br><span class="line">            sh <span class="string">"cd gitstats &amp;&amp; ./gitstats ../repo1 ../html/repo1"</span></span><br><span class="line">          &#125;</span><br><span class="line">          post &#123;</span><br><span class="line">            success &#123;</span><br><span class="line">              <span class="comment"># 如果分析成功，则将分析结果放到 apache-tomcat-7.0.99/webapps/gitstats 目录下</span></span><br><span class="line">              sh <span class="string">'rm -rf $&#123;webapproot&#125;/repo1 &amp;&amp; mv html/repo1 $&#123;webapproot&#125;'</span></span><br><span class="line">              <span class="comment"># 然后删掉 repo1 的代码和 html 报告，以免不及时清理造成磁盘空间的过度占用</span></span><br><span class="line">              sh <span class="string">"rm -rf repo1"</span></span><br><span class="line">              sh <span class="string">"rm -rf html/repo1"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      stage(<span class="string">"repo2"</span>) &#123;</span><br><span class="line">          when &#123;</span><br><span class="line">            expression &#123; <span class="built_in">return</span> params.repo2 &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          steps &#123;</span><br><span class="line">            sh <span class="string">'git clone -b master https://$USER_CRE_USR:"$USER_CRE_PSW"@git.software.com/scm/repo2.git'</span></span><br><span class="line">            sh <span class="string">"cd gitstats &amp;&amp; ./gitstats ../repo2 ../html/repo2"</span></span><br><span class="line">          &#125;</span><br><span class="line">          post &#123;</span><br><span class="line">            success &#123;</span><br><span class="line">              sh <span class="string">'rm -rf $&#123;webapproot&#125;/repo2 &amp;&amp; mv html/repo2 $&#123;webapproot&#125;'</span></span><br><span class="line">              sh <span class="string">"rm -rf repo2"</span></span><br><span class="line">              sh <span class="string">"rm -rf html/repo2"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  post&#123;</span><br><span class="line">    always&#123;</span><br><span class="line">      <span class="comment"># 总是给执行者分送邮件通知，不论是否成功都会对工作空间进行清理</span></span><br><span class="line">      script &#123;</span><br><span class="line">        def email = load <span class="string">"vars/email.groovy"</span></span><br><span class="line">        email.build(currentBuild.result, <span class="string">''</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      cleanWs()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>如果你是测试、DevOps或是从事研发效能方面的工作，那么利用好开源工具，比如 Jenkins 和 Git Stats 就可以快速帮助老板或是你自己提供一个 Git 仓库的多维度代码分析报告，有助于更加了解产品的代码情况。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/01/git-stats-jenkins/" data-id="ckc5mu1wu007aswfo1jkv48gi" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/01/git-stats-jenkins/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stats/" rel="tag">Stats</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/01/aix-tips" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/aix-tips/" class="article-date">
  <time datetime="2020-01-09T01:55:26.000Z" itemprop="datePublished">2020-01-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxunix/">LinuxUnix</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/aix-tips/">AIX 上安装工具以及一些使用总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>记录在使用 AIX 时所遇到的问题和解决办法，以备以后遇到同样问题不要再因为这些再浪费时间，希望也能帮助到你。</p>
<h2 id="在-AIX-上无法解压超一个大约-600-MB-文件"><a href="#在-AIX-上无法解压超一个大约-600-MB-文件" class="headerlink" title="在 AIX 上无法解压超一个大约 600 MB 文件"></a>在 AIX 上无法解压超一个大约 600 MB 文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">bash-4.3$ ls</span><br><span class="line">data_cdrom_debug_AIX_05949fb.tar.Z</span><br><span class="line">bash-4.3$ gzip -d data_cdrom_debug_AIX_05949fb.tar.Z</span><br><span class="line"><span class="comment"># 错误信息</span></span><br><span class="line">gzip: data_cdrom_debug_AIX_05949fb.tar: File too large</span><br><span class="line"><span class="comment"># 解决办法</span></span><br><span class="line">bash-4.3$ sudo vi /etc/security/limits</span><br><span class="line"></span><br><span class="line">default:</span><br><span class="line">        fsize = -1 <span class="comment"># 修改为 -1</span></span><br><span class="line">        core = 2097151</span><br><span class="line">        cpu = -1</span><br><span class="line">        data = -1</span><br><span class="line">        rss = 65536</span><br><span class="line">        stack = 65536</span><br><span class="line">        nofiles = 2000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要重启</span></span><br><span class="line">bash-4.3$ sudo reboot</span><br><span class="line"></span><br><span class="line">Rebooting . . .</span><br></pre></td></tr></table></figure>

<p>修改之后，重启，再解压就没有问题了。</p>
<h2 id="安装-Java-Standard-Edition-on-AIX"><a href="#安装-Java-Standard-Edition-on-AIX" class="headerlink" title="安装 Java Standard Edition on AIX"></a>安装 Java Standard Edition on AIX</h2><p>下载地址 <a href="https://developer.ibm.com/javasdk/support/aix-download-service/" target="_blank" rel="noopener">https://developer.ibm.com/javasdk/support/aix-download-service/</a></p>
<ol>
<li>download Java8_64.sdk.8.0.0.600.tar.gz Java8_64.jre.8.0.0.600.tar.gz</li>
<li>gzip -d Java8_64.sdk.8.0.0.600.tar.gz and Java8_64.jre.8.0.0.600.tar.gz</li>
<li>tar -xvf Java8_64.sdk.8.0.0.600.tar  and Java8_64.jre.8.0.0.600.tar</li>
<li>installp -agXYd .  Java8_64.jre Java8_64.sdk 2&gt;&amp;1 | tee installp.log</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install output</span></span><br><span class="line">Installation Summary</span><br><span class="line">--------------------</span><br><span class="line">Name                        Level           Part        Event       Result</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Java8_64.sdk                8.0.0.600       USR         APPLY       SUCCESS</span><br><span class="line">Java8_64.jre                8.0.0.600       USR         APPLY       SUCCESS</span><br><span class="line">Java8_64.jre                8.0.0.600       ROOT        APPLY       SUCCESS</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>smitty install_all</li>
<li>Input: Type “./“ in the field</li>
<li>Acceptance Install the Agreement, then start install.</li>
</ol>
<p>Troubleshooting</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash-4.4<span class="comment"># ./java -version</span></span><br><span class="line">Error: Port Library failed to initialize: -70</span><br><span class="line">Error: Could not create the Java Virtual Machine.</span><br><span class="line">Error: A fatal exception has occurred. Program will <span class="built_in">exit</span>.</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/01/aix-tips/" data-id="ckc5mu1wv007eswfodgbv2zl9" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/01/aix-tips/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aix/" rel="tag">AIX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/unix/" rel="tag">UNIX</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/01/solaris-tips" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/solaris-tips/" class="article-date">
  <time datetime="2020-01-07T14:55:05.000Z" itemprop="datePublished">2020-01-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxunix/">LinuxUnix</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/solaris-tips/">Solaris 安装工具以及一些使用总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>记录在使用 Solaris 时所遇到的问题和解决办法，以备以后遇到同样问题不要再因为这些再浪费时间，希望也能帮助到你。</p>
<h2 id="install-packages-on-solaris"><a href="#install-packages-on-solaris" class="headerlink" title="install packages on solaris"></a>install packages on solaris</h2><p><a href="https://www.opencsw.org/get-it/packages/" target="_blank" rel="noopener">https://www.opencsw.org/get-it/packages/</a></p>
<h3 id="Install-Git"><a href="#Install-Git" class="headerlink" title="Install Git"></a>Install Git</h3><p><a href="https://www.opencsw.org/packages/git/" target="_blank" rel="noopener">https://www.opencsw.org/packages/git/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/01/solaris-tips/" data-id="ckc5mu1wx007lswfo9ywq3qec" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/01/solaris-tips/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/solaris/" rel="tag">Solaris</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/unix/" rel="tag">UNIX</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2019/12/Jenkins-Warnings-Next-Generation-Plugin" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/" class="article-date">
  <time datetime="2019-12-28T15:16:30.000Z" itemprop="datePublished">2019-12-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/">Jenkins Warnings Next Generation 插件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Jenkins-Warnings-Next-Generation-插件"><a href="#Jenkins-Warnings-Next-Generation-插件" class="headerlink" title="Jenkins Warnings Next Generation 插件"></a>Jenkins Warnings Next Generation 插件</h2><p>Jenkins Warnings Next Generation 插件可收集编译器警告或静态分析工具报告的问题并可视化结果，它内置了对众多静态分析工具（包括多个编译器）的支持，更多<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/SUPPORTED-FORMATS.md" target="_blank" rel="noopener">支持的报告格式</a>。</p>
<h3 id="支持的项目类型"><a href="#支持的项目类型" class="headerlink" title="支持的项目类型"></a>支持的项目类型</h3><p>Warnings Next Generation 插件支持以下 Jenkins 项目类型：</p>
<ul>
<li>自由式项目</li>
<li>Maven 项目</li>
<li>矩阵项目</li>
<li>脚本化管道（顺序和并行步骤）</li>
<li>声明式管道（顺序步骤和并行步骤）</li>
<li>多分支管道</li>
</ul>
<h3 id="功能概述"><a href="#功能概述" class="headerlink" title="功能概述"></a>功能概述</h3><p>当作为后续构建任务操作（或步骤）添加时，Warnings Next Generation 插件提供以下功能：</p>
<ol>
<li><p>该插件会扫描 Jenkins 版本的控制台日志或你工作区中的文件中是否存在任何问题。支持一百多种<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/SUPPORTED-FORMATS.md" target="_blank" rel="noopener">报告格式</a>，它可以检测到的问题包括：</p>
<ul>
<li>来自编译器的错误（C，C＃，Java等）</li>
<li>来自静态分析工具（CheckStyle，StyleCop，SpotBugs 等）的警告</li>
<li>来自复制粘贴检测器（CPD, Simian 等）的重复</li>
<li>漏洞</li>
<li>在源文件的注释中打开任务</li>
</ul>
</li>
<li><p>该插件会发布有关在构建中发现的问题的报告，因此可以从以下位置导航到摘要报告，主构建页面。你还可以从那里深入了解细节：</p>
<ul>
<li>发行新的，固定的和未解决的问题</li>
<li>按严重性，类别，类型，模块或程序包分发问题</li>
<li>所有问题的列表，包括来自报告工具的有用评论</li>
<li>受影响文件的带注释的源代码</li>
<li>问题趋势图</li>
</ul>
</li>
</ol>
<p>该插件不会运行静态分析，它只是可视化此类工具报告的结果。你仍然需要在构建文件或 Jenkinsfile 中启用和配置静态分析工具。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>你可以在 Jenkins 作业配置用户界面中配置插件的每个选项（在自由式，maven 或矩阵作业中）。在这里你需要在工作中添加并启用生成后操作“记录编译器警告和静态分析结果”。</p>
<p>在管道中，将通过添加 recordIssues 激活插件。也可以使用相同的用户界面来配置此步骤（通过使用 Snippet 编辑器）。请注意，对于脚本化管道，一些其他功能可用于汇总和分组问题，有关详细信息，请参阅“高级管道配置”部分。</p>
<p>在以下各节中，将同时显示图形配置和管道配置。</p>
<h3 id="工具选择"><a href="#工具选择" class="headerlink" title="工具选择"></a>工具选择</h3><p>下图显示了插件的基本配置：</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/01.png" alt="静态分析工具"></p>
<p>首先，你需要指定用于创建问题的工具，根据所选工具，你可能还会配置一些其他参数。</p>
<p>对于所有读取报告文件的解析器，你需要指定应分析和扫描问题的报告文件的模式。如果未指定模式，则将扫描构建的控制台日志。对于几种流行的工具，提供了默认模式，在这种情况下，如果模式为空，则将使用默认模式。</p>
<p>为了让扫描程序正确解析你的报告，需要设置文件的编码，否则将使用平台编码，这可能不正确。</p>
<p>每个工具都由一个 ID 标识，该 ID 用作分析结果的 URL。对于每个工具，都提供了一个默认 URL（和名称），可以根据需要进行更改。例如，如果你打算多次使用解析器，则需要为每个调用指定不同的 ID。</p>
<p>你可以指定将用于同一配置的多个工具（和模式），由于 Jenkins 的技术（或市场）限制，无法通过使用多个后期构建操作来选择不同的配置。</p>
<p>通过使用“汇总结果”复选框，可以使用一项新功能。如果选中此选项，则将创建一个结果，其中包含所选工具的所有问题的汇总。这是之前静态分析收集器插件提供的。激活此选项后，你将获得所有问题的唯一入口点。以下屏幕截图显示了此新行为：</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/02.png" alt="汇总结果"></p>
<p>如果未启用此选项，则将为每个工具创建单独的结果。此结果具有唯一的 URL 和图标，因此你可以快速查看创建的报告之间的区别：</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/03.png" alt="分开的结果"></p>
<p>在基本配置部分中，你还可以选择是否针对失败的构建也运行该步骤。默认情况下禁用此选项，因为如果构建失败，分析结果可能会不准确。</p>
<p>以下代码段显示了具有这些选项的示例管道：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">recordIssues(</span><br><span class="line">    enabledForFailure: <span class="keyword">true</span>, aggregatingResults: <span class="keyword">true</span>, </span><br><span class="line">    tools: [java(), checkStyle(pattern: <span class="string">'checkstyle-result.xml'</span>, reportEncoding: <span class="string">'UTF-8'</span>)]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>如果使用单个工具，则可以使用属性工具代替工具：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues enabledForFailure: <span class="literal">true</span>, aggregatingResults: <span class="literal">true</span>, tool: checkStyle(pattern: <span class="string">'checkstyle-result.xml'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="创建对自定义工具的支持"><a href="#创建对自定义工具的支持" class="headerlink" title="创建对自定义工具的支持"></a>创建对自定义工具的支持</h3><p>如果你的项目中没有内置工具，则可以通过多种方式添加其他工具。</p>
<h4 id="将问题导出为受支持的格式"><a href="#将问题导出为受支持的格式" class="headerlink" title="将问题导出为受支持的格式"></a>将问题导出为受支持的格式</h4><p>将工具的分析结果获取到 Warnings 插件中的一种简单方法是将信息导出为一种已经支持的格式。例如，几种工具将其问题导出为 CheckStyle 或 PMD 格式。如果要使用警告插件的所有功能，则最好将信息导出为本机 XML 或 JSON 格式（此解析器使用 ID 问题）。<br>这些格式已经在用户界面中注册，你可以直接使用它们。你甚至可以在包含单行 JSON 问题的简单日志文件中提供问题，请参见示例。</p>
<p>这是一个示例步骤，可用于解析本机 JSON（或 XML）格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues(tool: issues())</span><br></pre></td></tr></table></figure>

<h4 id="使用自定义插件部署新工具"><a href="#使用自定义插件部署新工具" class="headerlink" title="使用自定义插件部署新工具"></a>使用自定义插件部署新工具</h4><p>最灵活的方法是通过编写将在你自己的小型 Jenkins 插件中部署的 Java 类来定义新工具，有关详细信息，请参见文档“为自定义静态分析工具提供支持”。</p>
<h4 id="使用Groovy解析器创建新工具"><a href="#使用Groovy解析器创建新工具" class="headerlink" title="使用Groovy解析器创建新工具"></a>使用Groovy解析器创建新工具</h4><p>如果日志消息的格式非常简单，则可以通过在 Jenkins 的用户界面中创建简单的工具配置来定义对工具的支持。 出于安全原因（Groovy 脚本可能会危害你的主服务器），此配置仅在系统配置中可用。 新解析器的配置采用正则表达式，该正则表达式将用于匹配报告格式。 如果表达式匹配，则将调用 Groovy 脚本，该脚本将匹配的文本转换为问题实例。 这是基于 Groovy 的解析器的示例：</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/04.png" alt="Groovy 解析器"></p>
<h4 id="以编程方式创建-Groovy-解析器"><a href="#以编程方式创建-Groovy-解析器" class="headerlink" title="以编程方式创建 Groovy 解析器"></a>以编程方式创建 Groovy 解析器</h4><p>还可以使用 Groovy 脚本从管道，Jenkins 启动脚本或脚本控制台中创建基于 Groovy 的解析器，请参见以下示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def config = io.jenkins.plugins.analysis.warnings.groovy.ParserConfiguration.getInstance()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!config.contains(<span class="string">'pep8-groovy'</span>))&#123;</span><br><span class="line">  def newParser = new io.jenkins.plugins.analysis.warnings.groovy.GroovyParser(</span><br><span class="line">    <span class="string">'pep8-groovy'</span>, </span><br><span class="line">    <span class="string">'Pep8 Groovy Parser'</span>, </span><br><span class="line">    <span class="string">'(.*):(\\d+):(\\d+): (\\D\\d*) (.*)'</span>, </span><br><span class="line">    <span class="string">'return builder.setFileName(matcher.group(1)).setCategory(matcher.group(4)).setMessage(matcher.group(5)).buildOptional()'</span>, </span><br><span class="line">    <span class="string">"optparse.py:69:11: E401 multiple imports on one line"</span></span><br><span class="line">  )</span><br><span class="line">  config.setParsers(config.getParsers().plus(newParser))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用配置作为代码导入解析器（JCasC）"><a href="#使用配置作为代码导入解析器（JCasC）" class="headerlink" title="使用配置作为代码导入解析器（JCasC）"></a>使用配置作为代码导入解析器（JCasC）</h4><p>还可以使用 JCasC yaml 文件中的部分来指定基于 Groovy 的解析器。这是一个小示例，展示了如何添加这样的解析器：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">unclassified:</span></span><br><span class="line">  <span class="attr">warningsParsers:</span></span><br><span class="line">    <span class="attr">parsers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">"Example parser"</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">example-id</span></span><br><span class="line">        <span class="attr">regexp:</span> <span class="string">"^\\s*(.*):(\\d+):(.*):\\s*(.*)$"</span></span><br><span class="line">        <span class="attr">script:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">import</span> <span class="string">edu.hm.hafner.analysis.Severity</span></span><br><span class="line">          <span class="string">builder.setFileName(matcher.group(1))</span></span><br><span class="line">                  <span class="string">.setLineStart(Integer.parseInt(matcher.group(2)))</span></span><br><span class="line">                  <span class="string">.setSeverity(Severity.WARNING_NORMAL)</span></span><br><span class="line">                  <span class="string">.setCategory(matcher.group(3))</span></span><br><span class="line">                  <span class="string">.setMessage(matcher.group(4))</span></span><br><span class="line">          <span class="string">return</span> <span class="string">builder.buildOptional();</span></span><br><span class="line">        <span class="attr">example:</span> <span class="string">"somefile.txt:2:SeriousWarnings:SomethingWentWrong"</span></span><br></pre></td></tr></table></figure>

<h4 id="使用定义的工具"><a href="#使用定义的工具" class="headerlink" title="使用定义的工具"></a>使用定义的工具</h4><p>一旦注册了 Groovy 解析器，就可以在作业的工具配置部分中使用它：</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/05.png" alt="Groovy 配置"></p>
<p>首先，你需要选择工具 “Groovy Parser” 以获取 Groovy 解析器的配置屏幕。 然后，你可以从可用解析器列表中选择解析器。 该列表是根据 Jenkins 的“系统配置”部分中定义的解析器动态创建的。可以使用与其他工具相同的方式来设置自定义 ID 和名称属性。</p>
<p>为了在管道中使用 Groovy 解析器，你需要使用以下形式的脚本语句：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">recordIssues sourceCodeEncoding: <span class="string">'UTF-8'</span>, </span><br><span class="line">    tool: groovyScript(parserId: <span class="string">'groovy-id-in-system-config'</span>, pattern:<span class="string">'**/*report.log'</span>, reportEncoding:<span class="string">'UTF-8'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="处理受影响的源代码文件的属性"><a href="#处理受影响的源代码文件的属性" class="headerlink" title="处理受影响的源代码文件的属性"></a>处理受影响的源代码文件的属性</h3><p>为了让插件解析并显示你的源代码文件，需要为这些文件设置正确的编码。 此外，如果你的源代码不在工作区中（例如，它已签出到共享代理文件夹中），则该插件将不会自动找到你的源文件。 为了让插件显示这些文件，你可以添加一个附加的源目录：</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/06.png" alt="受影响文件"></p>
<p>以下代码段显示了带有这些选项的示例管道，请注意，如果需要，可以不同地设置报告文件的编码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues sourceCodeEncoding: <span class="string">'ISO-8859-1'</span>, sourceDirectory: <span class="string">'/path/to/sources'</span>, tool: java(reportEncoding: <span class="string">'UTF-8'</span>)</span><br></pre></td></tr></table></figure>

<p>请注意，工作区外部的文件内容可能很敏感。 为了防止意外显示此类文件，你需要在 Jenkins 系统配置屏幕中提供允许的源代码目录的白名单：</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/07.png" alt="源代码目录的白名单"></p>
<p>另外，此配置设置可以由 JCasC yaml 文件中的以下子节提供</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">unclassified:</span></span><br><span class="line">  <span class="attr">warningsPlugin:</span></span><br><span class="line">    <span class="attr">sourceDirectories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">"C:\\Temp"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">"/mnt/sources"</span></span><br></pre></td></tr></table></figure>

<h3 id="控制参考构建的选择（基准）"><a href="#控制参考构建的选择（基准）" class="headerlink" title="控制参考构建的选择（基准）"></a>控制参考构建的选择（基准）</h3><p>警告下一代插件的一项重要功能是将问题分类为新问题，未解决问题和已解决问题：</p>
<ul>
<li>新增：所有问题，属于当前报告的一部分，但未在参考报告中显示</li>
<li>已修复：所有问题，属于参考报告的一部分，但不再存在于当前报告中</li>
<li>未解决：所有问题，是当前报告和参考报告的一部分</li>
</ul>
<p>为了计算此分类，插件需要参考构建（基准）。 然后，通过比较当前版本和基准中的问题来计算新的，已修复的和未解决的问题。 有三个选项可控制参考构建的选择。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/08.png" alt="参考"></p>
<p>以下代码段显示了具有这些选项的示例管道：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues tool: java(), ignoreQualityGate: <span class="literal">false</span>, ignoreFailedBuilds: <span class="literal">true</span>, referenceJobName: <span class="string">'my-project/master'</span></span><br></pre></td></tr></table></figure>

<h3 id="筛选问题"><a href="#筛选问题" class="headerlink" title="筛选问题"></a>筛选问题</h3><p>创建的问题报告可以随后进行过滤。 你可以指定任意数量的包含或排除过滤器。 当前，支持按模块名称，程序包或名称空间名称，文件名，类别或类型过滤问题。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/09.png" alt="筛选"></p>
<p>以下代码段显示了具有这些选项的示例管道：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues tool: java(pattern: <span class="string">'*.log'</span>), filters: [includeFile(<span class="string">'MyFile.*.java'</span>), excludeCategory(<span class="string">'WHITESPACE'</span>)]</span><br></pre></td></tr></table></figure>

<h3 id="Quality-gate-配置"><a href="#Quality-gate-配置" class="headerlink" title="Quality gate 配置"></a>Quality gate 配置</h3><p>你可以定义几个 Quality gate (质量门)，在报告问题后将对其进行检查。这些质量门使你可以修改詹金斯的生产状态，以便立即查看是否满足所需的产品质量。对于这些质量门中的每一个，都可以将构建设置为不稳定或失败。所有质量门都使用一个简单的度量标准：给定质量门将失败的问题数量。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/10.png" alt="质量门"></p>
<p>以下代码段显示了具有这些选项的示例管道：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues tool: java(pattern: <span class="string">'*.log'</span>), qualityGates: [[threshold: 1, <span class="built_in">type</span>: <span class="string">'TOTAL'</span>, unstable: <span class="literal">true</span>]]</span><br></pre></td></tr></table></figure>

<p>类型确定将用来评估质量门的属性。请参阅枚举 QualityGateType 以查看支持哪些不同类型。</p>
<h3 id="健康报告配置"><a href="#健康报告配置" class="headerlink" title="健康报告配置"></a>健康报告配置</h3><p>该插件可以参与你项目的运行状况报告。你可以更改将运行状况更改为 0％ 和 100％ 的问题数。此外，可以选择在创建运行状况报告时应考虑的严重性。</p>
<p><a href="Jenkins-Warnings-Next-Generation-Plugin/11.png">健康报告配置!</a></p>
<p>以下代码段显示了具有这些选项的示例管道：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues tool: java(pattern: <span class="string">'*.log'</span>), healthy: 10, unhealthy: 100, minimumSeverity: <span class="string">'HIGH'</span></span><br></pre></td></tr></table></figure>

<p>该作业根据严重性为 HIGH 和错误的所有警告来调整构建运行状况。如果内部版本包含 10 条或更少的警告，则运行状况为 100％。如果内部版本有 100 个以上的警告，则运行状况为 0％。</p>
<h3 id="管道配置"><a href="#管道配置" class="headerlink" title="管道配置"></a>管道配置</h3><p>在 Jenkins Pipeline 中使用 Warnings 插件的要求可能很复杂，有时会引起争议。为了尽可能灵活，我决定将主要步骤分为两个独立的部分，然后可以彼此独立使用。</p>
<h4 id="简单的管道配置"><a href="#简单的管道配置" class="headerlink" title="简单的管道配置"></a>简单的管道配置</h4><p>步骤 recordIssues 提供了简单的管道配置，它提供了与构建后操作相同的属性（请参见上文）。此步骤扫描给定文件集（或控制台日志）中的问题，并在构建中报告这些问题。你可以使用代码片段生成器来创建一个有效的代码片段，以调用此步骤。以下示例显示了此步骤的典型示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">recordIssues(</span><br><span class="line">    enabledForFailure: <span class="literal">true</span>, </span><br><span class="line">    tool: java(pattern: <span class="string">'*.log'</span>), </span><br><span class="line">    filters: [includeFile(<span class="string">'MyFile.*.java'</span>), excludeCategory(<span class="string">'WHITESPACE'</span>)]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>在此示例中，将扫描文件 <code>* .log</code> 中的 Java 问题。仅包括文件名与模式 <code>MyFile.*.java</code> 匹配的问题。类别 <code>WHITESPACE</code> 的问题将被排除，即使构建失败，也会执行该步骤。</p>
<p>为了查看所有配置选项，你可以研究<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesRecorder.java" target="_blank" rel="noopener">步骤实现</a>。</p>
<h4 id="声明式管道配置"><a href="#声明式管道配置" class="headerlink" title="声明式管道配置"></a>声明式管道配置</h4><p>声明性管道作业中的插件配置与脚本管道中的配置相同，请参见以下示例，该示例在 Jenkins 上构建分析模型库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent <span class="string">'any'</span></span><br><span class="line">    tools &#123;</span><br><span class="line">        maven <span class="string">'mvn-default'</span></span><br><span class="line">        jdk <span class="string">'jdk-default'</span></span><br><span class="line">    &#125;</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage (<span class="string">'Build'</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">'$&#123;M2_HOME&#125;/bin/mvn --batch-mode -V -U -e clean verify -Dsurefire.useFile=false -Dmaven.test.failure.ignore'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage (<span class="string">'Analysis'</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">'$&#123;M2_HOME&#125;/bin/mvn --batch-mode -V -U -e checkstyle:checkstyle pmd:pmd pmd:cpd findbugs:findbugs spotbugs:spotbugs'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    post &#123;</span><br><span class="line">        always &#123;</span><br><span class="line">            junit testResults: <span class="string">'**/target/surefire-reports/TEST-*.xml'</span></span><br><span class="line"></span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tools: [mavenConsole(), java(), javaDoc()]</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: checkStyle()</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: spotBugs()</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: cpd(pattern: <span class="string">'**/target/cpd.xml'</span>)</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: pmdParser(pattern: <span class="string">'**/target/pmd.xml'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="高级管道配置"><a href="#高级管道配置" class="headerlink" title="高级管道配置"></a>高级管道配置</h4><p>有时仅使用一个步骤发布和报告问题是不够的。例如，如果你使用多个并行步骤来构建产品，并且想要将所有这些步骤中的问题合并为一个结果。然后，你需要拆分扫描和聚合。该插件提供以下两个步骤：</p>
<ul>
<li>scanForIssues 此步骤使用特定的解析器扫描报告文件或控制台日志，并创建一个包含报告的中 间 AnnotatedReport 对象。有关详细信息，请参见步骤实现。</li>
<li>publishIssues：此步骤在你的构建中发布一个新报告，其中包含几个 scanForIssues 步骤的汇总结果。有关详细信息，请参见步骤实现。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">node &#123;</span><br><span class="line">  stage (<span class="string">'Checkout'</span>) &#123;</span><br><span class="line">      git branch:<span class="string">'5.0'</span>, url: <span class="string">'git@github.com:jenkinsci/warnings-plugin.git'</span></span><br><span class="line">  &#125;</span><br><span class="line">  stage (<span class="string">'Build'</span>) &#123;</span><br><span class="line">    def mvnHome = tool <span class="string">'mvn-default'</span></span><br><span class="line"></span><br><span class="line">    sh <span class="string">"<span class="variable">$&#123;mvnHome&#125;</span>/bin/mvn --batch-mode -V -U -e clean verify -Dsurefire.useFile=false"</span></span><br><span class="line"></span><br><span class="line">    junit testResults: <span class="string">'**/target/*-reports/TEST-*.xml'</span></span><br><span class="line"></span><br><span class="line">    def java = scanForIssues tool: java()</span><br><span class="line">    def javadoc = scanForIssues tool: javaDoc()</span><br><span class="line">    </span><br><span class="line">    publishIssues issues: [java, javadoc], filters: [includePackage(<span class="string">'io.jenkins.plugins.analysis.*'</span>)]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stage (<span class="string">'Analysis'</span>) &#123;</span><br><span class="line">    def mvnHome = tool <span class="string">'mvn-default'</span></span><br><span class="line"></span><br><span class="line">    sh <span class="string">"<span class="variable">$&#123;mvnHome&#125;</span>/bin/mvn --batch-mode -V -U -e checkstyle:checkstyle pmd:pmd pmd:cpd findbugs:findbugs"</span></span><br><span class="line"></span><br><span class="line">    def checkstyle = scanForIssues tool: checkStyle(pattern: <span class="string">'**/target/checkstyle-result.xml'</span>)</span><br><span class="line">    publishIssues issues: [checkstyle]</span><br><span class="line"></span><br><span class="line">    def pmd = scanForIssues tool: pmdParser(pattern: <span class="string">'**/target/pmd.xml'</span>)</span><br><span class="line">    publishIssues issues: [pmd]</span><br><span class="line">    </span><br><span class="line">    def cpd = scanForIssues tool: cpd(pattern: <span class="string">'**/target/cpd.xml'</span>)</span><br><span class="line">    publishIssues issues: [cpd]</span><br><span class="line">    </span><br><span class="line">    def spotbugs = scanForIssues tool: spotBugs(pattern: <span class="string">'**/target/findbugsXml.xml'</span>)</span><br><span class="line">    publishIssues issues: [spotbugs]</span><br><span class="line"></span><br><span class="line">    def maven = scanForIssues tool: mavenConsole()</span><br><span class="line">    publishIssues issues: [maven]</span><br><span class="line">    </span><br><span class="line">    publishIssues id: <span class="string">'analysis'</span>, name: <span class="string">'All Issues'</span>, issues: [checkstyle, pmd, spotbugs], filters: [includePackage(<span class="string">'io.jenkins.plugins.analysis.*'</span>)]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="新功能"><a href="#新功能" class="headerlink" title="新功能"></a>新功能</h2><p>以下各节介绍了最重要的新功能。</p>
<h3 id="发行记录：New-Fixed-Outstanding-问题"><a href="#发行记录：New-Fixed-Outstanding-问题" class="headerlink" title="发行记录：New, Fixed, Outstanding 问题"></a>发行记录：New, Fixed, Outstanding 问题</h3><p>该插件的一大亮点是能够将后续版本的问题分类为 New, Fixed, Outstanding。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/12.png" alt="趋势"></p>
<p>使用此功能可以更轻松地控制项目的质量：你只能专注于最近引入的警告。</p>
<p>注意：新警告的检测基于复杂的算法，该算法试图在源代码的两个不同版本中跟踪同一警告。根据源代码的修改程度，它可能会产生一些误报，即，即使应该没有警告也可能会收到一些新的固定警告。该算法的准确性仍在研究中，并将在接下来的几个月中进行完善。</p>
<h3 id="Severities-严重程度"><a href="#Severities-严重程度" class="headerlink" title="Severities 严重程度"></a>Severities 严重程度</h3><p>该插件在图表中显示问题严重性的分布，它定义了以下默认严重级别，但是扩展警告插件的插件可能会添加其他默认级别。</p>
<ul>
<li><strong>Error</strong>：表示通常会导致构建失败的错误</li>
<li><strong>Warning</strong> (High, Normal, Low)：指示给定优先级的警告。映射到优先级取决于各个解析器。</li>
</ul>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/13.png" alt="严重程度"></p>
<p>请注意，并非每个解析器都能产生不同严重性的警告。某些解析器仅对所有问题使用相同的严重性。</p>
<h3 id="Build-trend-构建趋势"><a href="#Build-trend-构建趋势" class="headerlink" title="Build trend 构建趋势"></a>Build trend 构建趋势</h3><p>为了查看分析结果的趋势，几个图表显示了每个构建的问题数量。这些图表用于详细信息页面和作业概述中。当前提供以下不同的趋势图类型：</p>
<h4 id="问题的严重程度分布"><a href="#问题的严重程度分布" class="headerlink" title="问题的严重程度分布"></a>问题的严重程度分布</h4><p>默认趋势图显示问题总数，按严重性堆叠。使用此图表，你可以查看哪种严重程度对问题总数贡献最大。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/14.png" alt="严重度趋势图"></p>
<h4 id="每种静态分析类型的问题"><a href="#每种静态分析类型的问题" class="headerlink" title="每种静态分析类型的问题"></a>每种静态分析类型的问题</h4><p>如果你要汇总几个静态分析结果，则类型图将使用单独的一行显示每个工具的问题数量。你可以通过单击相应的图例符号暂时隐藏工具。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/15.png" alt="工具趋势图"></p>
<h4 id="新问题与已修复问题"><a href="#新问题与已修复问题" class="headerlink" title="新问题与已修复问题"></a>新问题与已修复问题</h4><p>如果你对积压的问题感兴趣，可以打开新的与固定的图表。它映射了引入的问题与通过一系列构建解决的问题。这可以帮助你了解整个待办事项列表是在增加还是在减少。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/16.png" alt="新修复趋势图"></p>
<h4 id="项目健康"><a href="#项目健康" class="headerlink" title="项目健康"></a>项目健康</h4><p>仅当启用了运行状况报告后，运行状况图表才可用。在这种情况下，趋势图将显示健康和不健康区域中的警告数量。你的项目目标应该是使警告数量不逃避图表的绿色部分。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/17.png" alt="健康趋势图"></p>
<h4 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h4><p>细节视图中的所有趋势图都支持使用图表底部的范围滑块缩放构建轴。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/18.png" alt="放大"></p>
<h4 id="构建与日期轴"><a href="#构建与日期轴" class="headerlink" title="构建与日期轴"></a>构建与日期轴</h4><p>详细信息视图中的所有趋势图都可以显示每个构建或每天的警告数量。你可以通过选择右上角的相应图标在X轴变体之间切换，每天显示平均警告数。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/19.png" alt="构建与日期"></p>
<h3 id="问题概述"><a href="#问题概述" class="headerlink" title="问题概述"></a>问题概述</h3><p>你可以在几个聚合视图中快速，高效地查看报告的问题集。根据问题的数量或类型，你将看到问题的分布</p>
<ul>
<li>Static Analysis Tool（静态分析工具）</li>
<li>Module（模组）</li>
<li>Package or Namespace（包或命名空间）</li>
<li>Severity（严重程度）</li>
<li>Category（类别）</li>
<li>Type（类型）</li>
</ul>
<p>这些详细信息视图中的每一个都是交互式的，即，你可以导航到已分类问题的子集。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/20.png" alt="软件包"></p>
<h3 id="问题详情"><a href="#问题详情" class="headerlink" title="问题详情"></a>问题详情</h3><p>一组已报告的问题显示在一个现代化的响应表中。该表使用 Ajax 调用按需加载，它提供以下功能：</p>
<ul>
<li><strong>Pagination</strong>（分页）：问题的数量分为几个页面，可以使用提供的页面链接进行选择。请注意，目前分页是在客户端进行的，即从服务器获取整个问题表可能要花费一些时间。</li>
<li><strong>Sorting</strong>（排序）：可以通过单击表列中的仅一个来对表内容进行排序。</li>
<li><strong>Filtering, Searching</strong>（过滤，搜索）：你可以通过在搜索框中输入一些文本来过滤显示的问题。</li>
<li><strong>Content Aware</strong>（内容感知）：仅当有必要显示的内容时才显示列。也就是说，如果工具未报告问题类别，则该类别将被自动隐藏。</li>
<li><strong>Responsive</strong>（响应式）：布局应适应实际的屏幕阈值。</li>
<li><strong>Details</strong>（详细信息）：问题的详细信息消息（如果由相应的静态分析工具提供）在表中显示为子行。</li>
</ul>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/20.png" alt="详情"></p>
<h3 id="源代码-Blame（归咎于）"><a href="#源代码-Blame（归咎于）" class="headerlink" title="源代码 Blame（归咎于）"></a>源代码 Blame（归咎于）</h3><p>这个功能需要安装其他插件：<a href="https://github.com/jenkinsci/git-forensics-plugin" target="_blank" rel="noopener">Git Forensics 插件</a></p>
<p>如果未在作业配置中禁用，则插件将执行 <code>git blame</code> 以确定谁是问题的负责 <code>author</code>。在相应的 SCM Blames 视图中，所有问题将与 <code>auther name</code>, <code>email</code>, 和 <code>commit ID</code> 一起列出。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/22.png" alt="Git"></p>
<p>为了禁用 <code>git blame</code> 功能，请将属性 <code>blameDisabled</code> 设置为 <code>true</code>，请参见以下示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues blameDisabled: <span class="literal">true</span>, tool: java(pattern: <span class="string">'*.log'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Git-仓库取证"><a href="#Git-仓库取证" class="headerlink" title="Git 仓库取证"></a>Git 仓库取证</h3><p>此功能需要安装其他插件：<a href="https://github.com/jenkinsci/git-forensics-plugin" target="_blank" rel="noopener">Git Forensics 插件</a></p>
<p>如果未在作业配置中禁用，则该插件将以“犯罪现场代码”的样式（Adam Tornhill，2013年11月）挖掘源代码存储库，以确定受影响文件的统计信息。在相应的 “SCM 取证” 视图中，将列出所有问题以及受影响文件的以下属性：</p>
<ul>
<li>提交总数</li>
<li>不同作者总数</li>
<li>创作时间</li>
<li>最后修改时间</li>
<li>源代码控制概述</li>
</ul>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/23.png" alt="取证视图"></p>
<p>为了禁用 Git 取证功能，请将属性 <code>forensicsDisabled</code>设置为 <code>true</code>，请参见以下示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recordIssues forensicsDisabled: <span class="literal">true</span>, tool: java(pattern: <span class="string">'*.log'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="源代码视图"><a href="#源代码视图" class="headerlink" title="源代码视图"></a>源代码视图</h3><p>现在，源代码视图使用 JS 库 Prism 在受影响的文件中显示警告。该库为最流行的语言提供语法高亮显示，并在客户端呈现所有内容。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/24.png" alt="源视图"></p>
<h3 id="发行总数栏"><a href="#发行总数栏" class="headerlink" title="发行总数栏"></a>发行总数栏</h3><p>你可以在 Jenkins 作业表的单独列中显示作业的总数。 默认情况下，Jenkins 主列表视图将显示一个新列，该列计算所有工具的发行总数。 你可以添加可以配置的其他列</p>
<ul>
<li>列名</li>
<li>应考虑的实际工具</li>
<li>要显示的总计类型（总体警告，新警告，特定严重性等），请参阅 “token宏支持” 部分。</li>
</ul>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/25.png" alt="问题列"></p>
<h3 id="仪表板视图支持"><a href="#仪表板视图支持" class="headerlink" title="仪表板视图支持"></a>仪表板视图支持</h3><p>还提供对 Jenkins 仪表板视图的支持。当前，以下 portlet 可用：</p>
<h4 id="每个工具和作业表的问题"><a href="#每个工具和作业表的问题" class="headerlink" title="每个工具和作业表的问题"></a>每个工具和作业表的问题</h4><p>问题表显示了作业的问题总数（由每个工具分开）。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/26.png" alt="问题 portlet"></p>
<h4 id="问题趋势"><a href="#问题趋势" class="headerlink" title="问题趋势"></a>问题趋势</h4><p>可以将趋势图添加为 portlet，该趋势图显示所有作业的发行总数。</p>
<p><img src="/2019/12/Jenkins-Warnings-Next-Generation-Plugin/27.png" alt="图表 portlet"></p>
<h3 id="远程API"><a href="#远程API" class="headerlink" title="远程API"></a>远程API</h3><p>该插件提供以下 REST API 端点。</p>
<h4 id="所有分析结果的汇总摘要"><a href="#所有分析结果的汇总摘要" class="headerlink" title="所有分析结果的汇总摘要"></a>所有分析结果的汇总摘要</h4><p>可以使用 URL <code>[build-url]/warnings-ng/api/json</code>（或 <code>[build-url]/warnings-ng/api/xml</code>）查询构建中已配置的所有静态分析工具。此汇总显示每个工具的 ID，名称，URL 和问题总数。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"_class"</span>: <span class="string">"io.jenkins.plugins.analysis.core.restapi.AggregationApi"</span>,</span><br><span class="line">  <span class="attr">"tools"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"maven"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/maven"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"Maven Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"java"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/java"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"Java Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"javadoc"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/javadoc"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"JavaDoc Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"checkstyle"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/checkstyle"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"CheckStyle Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"pmd"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/pmd"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"PMD Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">671</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"spotbugs"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/spotbugs"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"SpotBugs Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"cpd"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/cpd"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"CPD Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">123</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"open-tasks"</span>,</span><br><span class="line">      <span class="attr">"latestUrl"</span>: <span class="string">"http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/open-tasks"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"Open Tasks Scanner Warnings"</span>,</span><br><span class="line">      <span class="attr">"size"</span>: <span class="number">11</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="分析结果汇总"><a href="#分析结果汇总" class="headerlink" title="分析结果汇总"></a>分析结果汇总</h4><p>你可以使用 URL <code>[build-url]/[tool-id]/api/xml</code>（或 <code>[build-url]/[tool-id]/api/json</code>）获得特定分析报告的摘要。摘要包含问题数量，质量门状态以及所有信息和错误消息。</p>
<p>这是一个示例 XML 报告：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">analysisResultApi</span> <span class="attr">_class</span>=<span class="string">'io.jenkins.plugins.analysis.core.restapi.AnalysisResultApi'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">totalSize</span>&gt;</span>3<span class="tag">&lt;/<span class="name">totalSize</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fixedSize</span>&gt;</span>0<span class="tag">&lt;/<span class="name">fixedSize</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">newSize</span>&gt;</span>0<span class="tag">&lt;/<span class="name">newSize</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">noIssuesSinceBuild</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">noIssuesSinceBuild</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">successfulSinceBuild</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">successfulSinceBuild</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qualityGateStatus</span>&gt;</span>WARNING<span class="tag">&lt;/<span class="name">qualityGateStatus</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">owner</span> <span class="attr">_class</span>=<span class="string">'org.jenkinsci.plugins.workflow.job.WorkflowRun'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>46<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/view/White%20Mountains/job/Full%20Analysis%20-%20Model/46/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">owner</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Searching for all files in '/tmp/node1/workspace/Full Analysis - Model' that match the pattern</span><br><span class="line">    '**/target/spotbugsXml.xml'</span><br><span class="line">  <span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; found 1 file<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Successfully parsed file /tmp/node1/workspace/Full Analysis - Model/target/spotbugsXml.xml<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; found 3 issues (skipped 0 duplicates)<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Post processing issues on 'node1' with encoding 'UTF-8'<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Resolving absolute file names for all issues<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; affected files for all issues already have absolute paths<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Copying affected files to Jenkins' build folder /Users/hafner/Development/jenkins/jobs/Full Analysis -</span><br><span class="line">    Model/builds/46</span><br><span class="line">  <span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; 2 copied, 0 not in workspace, 0 not-found, 0 with I/O error<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Resolving module names from module definitions (build.xml, pom.xml, or Manifest.mf files)<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; all issues already have a valid module name<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Resolving package names (or namespaces) by parsing the affected files<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; all affected files already have a valid package name<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Creating fingerprints for all affected code blocks to track issues over different builds<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>No filter has been set, publishing all 3 issues<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>No valid reference build found - all reported issues will be considered outstanding<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Evaluating quality qualityGates<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; WARNING - Total number of issues: 3 - Quality Gate: 1<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; Some quality qualityGates have been missed: overall result is WARNING<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Health report is disabled - skipping<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">analysisResultApi</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Token-宏支持"><a href="#Token-宏支持" class="headerlink" title="Token 宏支持"></a>Token 宏支持</h3><p>Warnings 插件提供了 token <code>ANALYSIS_ISSUES_COUNT</code>，可用于其他后期构建处理步骤，例如在邮件中。为了使用此 token，你需要安装 token 宏插件。token 具有以下可选参数：</p>
<ul>
<li><code>tool</code>：选择特定的分析结果，如果未定义，则将所有结果相加</li>
<li><code>type</code>：选择要使用的计数器的类型，请选择以下之一<ul>
<li>Total（任何严重性）</li>
<li>Total（仅错误）</li>
<li>Total（仅严重度高）</li>
<li>Total（仅严重级别正常）</li>
<li>Total（仅限严重性低）</li>
<li>New  （任何严重程度）</li>
<li>New  （仅限错误）</li>
<li>New  （仅限严重性高）</li>
<li>New  （仅严重性为正常）</li>
<li>New  （仅限严重性低）</li>
<li>Delta（任何严重程度）</li>
<li>Delta（仅错误）</li>
<li>Delta（仅严重度高）</li>
<li>Delta（仅严重等级正常）</li>
<li>Delta（仅严重度低）</li>
<li>Fixed（任何严重性）</li>
</ul>
</li>
</ul>
<p>例子：</p>
<p><code>${ANALYSIS_ISSUES_COUNT}</code>：扩展到所有分析工具的合计数量</p>
<p><code>${ANALYSIS_ISSUES_COUNT, tool=&quot;checkstyle&quot;}</code>：扩展到CheckStyle问题的总数</p>
<p><code>${ANALYSIS_ISSUES_COUNT, tool=&quot;checkstyle&quot;, type: &quot;NEW&quot;}</code>：扩展到新的 CheckStyle 问题数</p>
<h2 id="从静态分析套件过渡"><a href="#从静态分析套件过渡" class="headerlink" title="从静态分析套件过渡"></a>从静态分析套件过渡</h2><p>以前，静态分析套件的插件提供了相同的功能集（CheckStyle，PMD，FindBugs，静态分析实用工具，Analysis Collector，任务扫描器，Warnings 等）。为了简化用户体验和开发过程，这些插件和核心功能已合并到Warnings Next Generation 插件中。这些旧的静态分析插件不再需要，现在已经停产。如果当前使用这些旧插件之一，则应尽快迁移到新的记录器和步骤。我仍然会保留旧代码一段时间，但是主要的开发工作将花在新的代码库中。</p>
<ul>
<li>迁移 Pipelines</li>
</ul>
<p>调用旧的静态分析步骤（例如，findbug，checkstyle 等）的管道需要立即调用新的 recordIssues 步骤。所有静态分析工具都使用相同的步骤，使用 step 属性工具选择实际的解析器。有关可用参数集的更多详细信息，请参见“<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/doc/Documentation.md#configuration" target="_blank" rel="noopener">配置</a>”部分。</p>
<ul>
<li>迁移其他所有工作</li>
</ul>
<p>使用旧版 API 的 Freestyle，Matrix 或 Maven Jobs 使用了由每个插件提供的所谓的 Post Build Action。例如，FindBugs 插件确实提供了构建后操作“发布 FindBugs 分析结果”。这些旧的插件特定操作不再受支持，它们现在在用户界面中标记为 [Deprecated]。现在，你需要添加一个新的后期构建步骤-对于所有静态分析工具，此步骤现在称为“记录编译器警告和静态分析结果”。工具的选择是此后期构建步骤配置的一部分。注意：新的后期制作操作无法读取使用旧 API 的后期制作步骤所产生的警告。也就是说，你看不到新旧结果的合并历史记录-你仅看到两个不相关的结果。也不会自动转换以旧格式存储的结果。</p>
<ul>
<li>插件的迁移取决于分析核心</li>
</ul>
<p>以下插件已集成到此警告插件的新版本中：</p>
<ul>
<li>Android-Lint 插件</li>
<li>Analysis Collector 插件</li>
<li>CheckStyle 插件</li>
<li>CCM 插件</li>
<li>Dry 插件</li>
<li>PMD 插件</li>
<li>FindBugs 插件</li>
<li>Tasks Scanner 插件</li>
<li>Warnings 插件</li>
</ul>
<p>所有其他插件仍需要集成或需要重构以使用新的 API</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2019/12/Jenkins-Warnings-Next-Generation-Plugin/" data-id="ckc5mu1wb0058swfoga232w6b" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2019/12/Jenkins-Warnings-Next-Generation-Plugin/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/" rel="tag">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/translate/" rel="tag">Translate</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2019/12/my-2019-summary" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/my-2019-summary/" class="article-date">
  <time datetime="2019-12-28T12:04:50.000Z" itemprop="datePublished">2019-12-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mynotes/">MyNotes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/my-2019-summary/">2019 年终总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>时间过得飞快，转眼已经是 2020 年的第三天了，回顾 2019 年，我给自己的年终关键词是：尽力。</p>
<p>这是我作为开发工程师的第二年，虽然 Title 是 SE (Software Engnieer)，但主要的工作内容是产品的构建和发布以及 CI/CD/DevOps 的落地（自称打杂）。流水的记录一下 2019 年发生在工作上的“成绩”。</p>
<p>2019 年在工作中除了完成日常产品构建、发布、Git 管理、VM 管理等，尝试在构建和发布自动化上做大的调整，将手工构建和部分自动构建从 Bamboo 迁移到 Jenkins，通过 Jenkins 的 multi-branch pipeline、Shared Libraries 与 Artifactory 做持续集成。</p>
<p>2019 年在公司内部提交了一个创新项目，有幸拿到了第一名和首席产品奖。</p>
<p>因此有机会再去美国，参加了公司的开发者大会。很开心这个项目最终进入到了产品的 Roadmap 里。</p>
<p>2019 年底 12 月去北京参加了一次两天的《JFrog Jenkins，Artifactory &amp; Kubernetes》训练营，跟 DevOps 行业工具里最有影响力（之一）的公司的工程师学习最佳实践。</p>
<p>这一年关于持续集成和持续交付收获不少新的知识，但只更新了 11 篇公众号相关原创文章，33 篇 Blog。这差别是因为 Blog 更像笔记，随时记录修改不怕错；公众号更像报纸，发出去的内容无法修改和补充，每次更新都需要一字一句反复修改和阅览确认，最终输出一篇完整的原创内容需要花费比写 Blog 多几倍的时间。</p>
<p>希望 2020 年能完成更多有价值的内容输出，有机会的话用 8 到 10 个月的业余时间完成一件以前一直不敢想的事（如果完成就写下来，没成就烂在肚子里）。</p>
<p>分享在 2019 年最后一天收到的一封邮件：</p>
<p>前段时间大家都做了年末总结。试问，有多少人对自己一年的表现满意？你是否在工作中体现出你的价值？你提交了多少次代码？提交的代码质量怎么样？你解决了多少个客户问题？你发现了多少 bug？<br>你是否在技术和业务知识有所提高？和你的同事比较，你的进步速度你自己是否满意？又有多少人把时间都花在了微信和聊天上？有没有人是待着混日子，或者应付公事的思路在这里工作。<br>我们年龄都差不多，多半是三四十岁。这个年龄被认为是最好的工作年龄。希望你不要在这里浪费你最好的时光。<br>有人可能说，我已经实现或者接近时间财务自由了，我对工作没有大的要求。首先我恭喜你实现财务自由，但同时我想说的是工作绝不只是一份收入来源这么简单。你是否能在工作中得到同事和领导的认可，是否能体现自己的价值。<br>我喜欢和有求知欲，有责任感，有上进心的人一起工作。我同时不喜欢工作时间，整天拿着手机不离手的， 工作上没有上进心的人。如果确实有事情，可以离开作为去打个电话，迅速解决一下。没有事情的闲看，是不赞成的。<br>还有人，到点就准时下班，很像多干几分钟自己就吃亏了一样，这种心态千万不可取。试问，如果你的能力水平不及你的同事，你每天还不比别人多努力，你怎么才能接近或者超过别人？难道永远都想落后？每天多走一里路，每天多做一些吧。</p>
<p>我读了好几遍，感谢上面的话，从个人角度非常认同以上观点，尤其是说工作绝不是一份收入来源这么简单，它是一个人的价值体现。如果喜欢这份工作，尽力去做到最好吧；如果不喜欢，还是趁早找到自己的乐趣所在。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2019/12/my-2019-summary/" data-id="ckc5mu1wf005oswfoedgi9gxi" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2019/12/my-2019-summary/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/summary/" rel="tag">Summary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thought/" rel="tag">Thought</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2019/12/git-stats" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/git-stats/" class="article-date">
  <time datetime="2019-12-17T14:43:04.000Z" itemprop="datePublished">2019-12-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/git/">Git</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/git-stats/">Git 历史统计信息生成器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如果你是研发效能组的一员或者在从事 CI/CD 或 DevOps，除了提供基础设施，指标和数据是也是一个很重要的一环，比如需要分析下某个 Git 仓库代码提交情况：</p>
<ul>
<li>这个仓库的代码谁提交的代码最多</li>
<li>这个仓库的活跃度是什么样子的</li>
<li>各个时段的提交分析数据</li>
<li>每个版本的贡献排名</li>
<li>每周/每月/每年的贡献排名等等</li>
</ul>
<p>几天前发现一个 Git 历史统计信息生成工具叫 GitStats ( <a href="http://gitstats.sourceforge.net/" target="_blank" rel="noopener">http://gitstats.sourceforge.net/</a> )</p>
<p>这是一个用 python 写的，代码量很少，功能却非常强大的分析工具，也是我目前发现为数不多的可以生成漂亮的报告并且使用很方便的开源项目。</p>
<p>gitstats 的报告也很强大 (<a href="https://github.com/tomgi/gitstats" target="_blank" rel="noopener">https://github.com/tomgi/gitstats</a>) 感兴趣的可以试试</p>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>安装依赖：Git，Python，Gnuplot。</p>
<p>如果有 Linux，推荐在 Linux 上下载和安装。我曾尝试用 Windows 来准备环境，要下载 Python2，配置 Cygwin，还要手动配置 Gnuplot （Gnuplot 是一个可移植的命令行驱动的图形工具），挺麻烦的。以下是我在 Linux 上来的安装和使用步骤。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载 Python 2</span></span><br><span class="line">sudo yum -y install python27</span><br><span class="line"><span class="comment"># 安装 Gnuplot</span></span><br><span class="line">sudo yum -y install gnuplot</span><br><span class="line"><span class="comment"># 下载 gitstats</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/hoxu/gitstats.git</span><br><span class="line"><span class="comment"># 下载你要分析的代码仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/alibaba/fastjson.git</span><br><span class="line"><span class="comment"># 执行命令，生产报告</span></span><br><span class="line"><span class="built_in">cd</span> gitstats</span><br><span class="line">./gitstats ../fastjson ../html/fastjson</span><br><span class="line"><span class="comment"># 经过 15 秒钟的执行，生成报告</span></span><br><span class="line">Generating report...</span><br><span class="line">[0.00393] &gt;&gt; git --git-dir=/workspace/gitstats/.git --work-tree=/workspace/gitstats rev-parse --short HEAD</span><br><span class="line">[0.00236] &gt;&gt; git --version</span><br><span class="line">[0.00716] &gt;&gt; gnuplot --version</span><br><span class="line">Generating graphs...</span><br><span class="line">[0.01676] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/day_of_week.plot"</span></span><br><span class="line">[0.01571] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/files_by_date.plot"</span></span><br><span class="line">[0.01281] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/month_of_year.plot"</span></span><br><span class="line">[0.09293] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/lines_of_code_by_author.plot"</span></span><br><span class="line">[0.01340] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/commits_by_year.plot"</span></span><br><span class="line">[0.01799] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/hour_of_day.plot"</span></span><br><span class="line">[0.01627] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/domains.plot"</span></span><br><span class="line">[0.01268] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/commits_by_year_month.plot"</span></span><br><span class="line">[0.09435] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/commits_by_author.plot"</span></span><br><span class="line">[0.01522] &gt;&gt; gnuplot <span class="string">"/workspace/html/fastjson/lines_of_code.plot"</span></span><br><span class="line">Execution time 15.16208 secs, 4.58247 secs (30.22 %) <span class="keyword">in</span> external commands)</span><br><span class="line">You may now run:</span><br><span class="line"></span><br><span class="line">   sensible-browser <span class="string">'/workspace/html/fastjson/index.html'</span></span><br></pre></td></tr></table></figure>

<h2 id="报告分析"><a href="#报告分析" class="headerlink" title="报告分析"></a>报告分析</h2><h3 id="常规统计"><a href="#常规统计" class="headerlink" title="常规统计"></a>常规统计</h3><p>可以看到这个项目叫 fastjson，从 2011 年 7 月 31 日开始提交第一次代码，距离当前已经 3060 天了，893 个活跃天。总共文件是 2960 个，一共的代码行数是 25 万行。</p>
<p><img src="/2019/12/git-stats/git-stats-index.png" alt="常规统计"></p>
<h3 id="活跃度"><a href="#活跃度" class="headerlink" title="活跃度"></a>活跃度</h3><p>每天中的每小时的、每周中的每天、每周中的每小时，每年中的每月的、每年的提交数量。</p>
<p>在过去的 32 周里，其中前 12 周到 17 周这段时间很活跃，提交很多。另外可以看到在白天 12 点到晚上 20 点这段时间提交很少，大部分程序员在这段时间都在应对公司里的工作，无法贡献开源项目。</p>
<p>晚上 20 点之后提交开始增多，看来是一个非常努力的开发者。另外可以看到周一到周日都有提交，周六相对最少，应该是周六休息和放松一下。周日提交明显比周六多，看来还是花费了不少的个人宝贵周末时间。</p>
<p><img src="/2019/12/git-stats/git-stats-activity-1.png" alt="活跃度-1"></p>
<p>还能看到该项目主要完成时间在 2016 年到 2017 年，完成的时区是在东八区，这个维度可对不同区域的开发者贡献数量进行分析。</p>
<p><img src="/2019/12/git-stats/git-stats-activity-2.png" alt="活跃度-2"></p>
<h3 id="贡献者"><a href="#贡献者" class="headerlink" title="贡献者"></a>贡献者</h3><p>列举了所有的作者，提交数，第一次提交及最近一次提交。</p>
<p><img src="/2019/12/git-stats/git-stats-authors-1.png" alt="贡献者-1"></p>
<p>这张图也是可以看到谁是该项目的创建者，以及这几年以来每年的谁的贡献最大。还有可以看到提交者所用的邮箱账户。</p>
<p><img src="/2019/12/git-stats/git-stats-authors-2.png" alt="贡献者-2"></p>
<h3 id="文件及行数"><a href="#文件及行数" class="headerlink" title="文件及行数"></a>文件及行数</h3><p>文件总数是 2960 个，代码行数是 25 万行。</p>
<p>另外还可以看到每年的文件增加趋势图以及这些文件类型数量的排名，可以看到 java 文件占了 96.08%，其次是 json。</p>
<p><img src="/2019/12/git-stats/git-stats-files.png" alt="文件"></p>
<h3 id="Tags"><a href="#Tags" class="headerlink" title="Tags"></a>Tags</h3><p>Tags 对于团队是一个很重要分析指标（前提是所要分析的仓库在版本发布后创建了 Tag）可以看到每个版本的贡献度排名。</p>
<p><img src="/2019/12/git-stats/git-stats-tags.png" alt="Tags"></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>如果感兴趣可以分析一下自己的项目或是去 GitHub 上找一个有意思、有影响力的项目拿来分析一下，比如 996.ICU 以及 vue 等，玩的开心。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2019/12/git-stats/" data-id="ckc5mu1wd005iswfo5ki09sb9" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2019/12/git-stats/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stats/" rel="tag">Stats</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2019/12/JFrog-CLI" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/JFrog-CLI/" class="article-date">
  <time datetime="2019-12-09T07:41:43.000Z" itemprop="datePublished">2019-12-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/devops/">DevOps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/JFrog-CLI/">JFrog CLI 安装和使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安装-JFrog-CLI"><a href="#安装-JFrog-CLI" class="headerlink" title="安装 JFrog CLI"></a>安装 JFrog CLI</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ON MAC</span></span><br><span class="line">brew install jfrog-cli-go</span><br><span class="line"><span class="comment"># WITH CURL</span></span><br><span class="line">curl -fL https://getcli.jfrog.io | sh</span><br><span class="line"><span class="comment"># WITH NPM</span></span><br><span class="line">npm install -g jfrog-cli-go</span><br><span class="line"><span class="comment"># WITH DOCKER</span></span><br><span class="line">docker run docker.bintray.io/jfrog/jfrog-cli-go:latest jfrog -v</span><br></pre></td></tr></table></figure>

<h2 id="CLI-for-JFrog-Aritifactory"><a href="#CLI-for-JFrog-Aritifactory" class="headerlink" title="CLI for JFrog Aritifactory"></a>CLI for JFrog Aritifactory</h2><p><a href="https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory" target="_blank" rel="noopener">如何在 Artifactory 上使用 JFrog CLI</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2019/12/JFrog-CLI/" data-id="ckc5mu1wc005fswfofo199bor" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2019/12/JFrog-CLI/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/artifactory/" rel="tag">Artifactory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jfrog/" rel="tag">JFrog</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2019/12/Blackduck-interation-into-Jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/Blackduck-interation-into-Jenkins/" class="article-date">
  <time datetime="2019-12-08T06:48:02.000Z" itemprop="datePublished">2019-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/Blackduck-interation-into-Jenkins/">Blackduck 与 Jenkins 集成</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近做了 Black Duck 与 Jenkins 的集成，目标是给测试和开发提供定制化、定时的对各个开发代码仓库的进行源码扫描。</p>
<h2 id="为什么要做源码扫描"><a href="#为什么要做源码扫描" class="headerlink" title="为什么要做源码扫描"></a>为什么要做源码扫描</h2><p>在产品开发中经常需要引入一些开源组件，但这些开源的代码会给产品风险。因此我们在发布自己产品的时候需要对这些开源组件的漏洞和许可信息进行评估。<br><img src="/2019/12/Blackduck-interation-into-Jenkins/open-source.png" alt="开源不等于安全"></p>
<p>Black Duck（黑鸭）是一款对源代码进行扫描、审计和代码管理的软件工具（同类型的工具还有 JFrog Xray）。能够搜索安全的开源代码，检测产品的开源代码使用情况，以检查外来代码的开源代码使用情况和风险情况。</p>
<p>如果不能及时的进行代码扫描，在产品发布快要发布才进行扫描，如果发现问题这时候再去解决就会变得非常被动，因此团队需要尽早发现并解决问题，将 CI 工具进行集成，进行每日、每周、每月扫描就变得十分重要。</p>
<h2 id="Black-Duck-手动执行一般步骤"><a href="#Black-Duck-手动执行一般步骤" class="headerlink" title="Black Duck 手动执行一般步骤"></a>Black Duck 手动执行一般步骤</h2><ol>
<li>手动下载指定 Git 仓库及分支代码</li>
<li>去掉不相关的代码（也可以通过 Black Duck 参数去指定要扫描的特定文件或文件夹）</li>
<li>手动执行 Black Duck 扫描命令​</li>
<li>扫描成功后，结果传到内部 Black Duck 网站供相关人员进行审查</li>
</ol>
<h2 id="Black-Duck-与-Jenkins-的集成目标"><a href="#Black-Duck-与-Jenkins-的集成目标" class="headerlink" title="Black Duck 与 Jenkins 的集成目标"></a>Black Duck 与 Jenkins 的集成目标</h2><ol>
<li>一个流水线支持定制化仓库的代码下载</li>
<li>给开发和测试提供简单的、可随时可以执行源码扫描的界面</li>
<li>支持定期自动扫描，以及与其他 Jenkins 任务联动执行​</li>
</ol>
<h2 id="Black-Duck-参数介绍"><a href="#Black-Duck-参数介绍" class="headerlink" title="Black Duck 参数介绍"></a>Black Duck 参数介绍</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--blackduck.url                                       <span class="comment"># 你的 Black Duck 网址</span></span><br><span class="line">--blackduck.username                                  <span class="comment"># 你的登录用户</span></span><br><span class="line">--blackduck.api.token                                 <span class="comment"># 你的登录用户 Token</span></span><br><span class="line">--detect.project.name                                 <span class="comment"># Black Duck 下面的项目</span></span><br><span class="line">--detect.project.version.name                         <span class="comment"># 项目版本号</span></span><br><span class="line">--detect.source.path                                  <span class="comment"># 要扫描的代码目录</span></span><br><span class="line">--logging.level.com.synopsys.integration              <span class="comment"># 扫描日志级别</span></span><br><span class="line">--blackduck.trust.cert=TRUE                           <span class="comment"># 是否信任 socket (SSL)</span></span><br><span class="line">--detect.blackduck.signature.scanner.snippet.matching <span class="comment"># 扫描片段模式</span></span><br></pre></td></tr></table></figure>

<p>更多其他参数可以参照官方的 CI 集成文档 <a href="https://synopsys.atlassian.net/wiki/spaces/INTDOCS/pages/71106939/Synopsys+Detect+for+Jenkins" target="_blank" rel="noopener">Synopsys Detect for Jenkins</a></p>
<h2 id="Black-Duck-配置"><a href="#Black-Duck-配置" class="headerlink" title="Black Duck 配置"></a>Black Duck 配置</h2><p>首先，安装 Black Duck 插件 <a href="https://wiki.jenkins.io/display/JENKINS/Synopsys+Detect+Plugin" target="_blank" rel="noopener">Synopsys Detect</a> 到 Jenkins</p>
<p>然后，配置 Synopsys Detect 插件</p>
<ul>
<li>Jenkins -&gt; Confiruration（系统配置）</li>
<li>Black Duck URL： 公司内部的 Black Duck 网址，例如 <a href="https://yourcompany.blackducksoftware.com" target="_blank" rel="noopener">https://yourcompany.blackducksoftware.com</a></li>
<li>Black Duck credentials： 注意要选择 credentials 类型为 Secret text, Secret 填写你用户的 Token<br><img src="/2019/12/Blackduck-interation-into-Jenkins/blackduck-credentials.png" alt="Secret text 配置"></li>
<li>配置完成后点击 Test connections to Black Duck，显示 Connection successful 表示配置成功。<br><img src="/2019/12/Blackduck-interation-into-Jenkins/blackduck-config.png" alt="Connection successful"></li>
</ul>
<h2 id="Black-Duck-流水线任务效果"><a href="#Black-Duck-流水线任务效果" class="headerlink" title="Black Duck 流水线任务效果"></a>Black Duck 流水线任务效果</h2><p><img src="/2019/12/Blackduck-interation-into-Jenkins/blackduck-Jenkins-job.png" alt="Build with Parameters"></p>
<h2 id="Black-Duck-流水线代码"><a href="#Black-Duck-流水线代码" class="headerlink" title="Black Duck 流水线代码"></a>Black Duck 流水线代码</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">pipeline&#123;</span><br><span class="line">  agent &#123;</span><br><span class="line">    node &#123;</span><br><span class="line">      label <span class="string">'black-duck'</span></span><br><span class="line">      customWorkspace <span class="string">"/agent/workspace/blackduck"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  parameters &#123;</span><br><span class="line">    choice(</span><br><span class="line">      name: <span class="string">'VERSION'</span>,</span><br><span class="line">      choices: [<span class="string">'MVSURE_v1.1'</span>, <span class="string">'MVSURE_v1.2'</span>, <span class="string">'MVSURE_v2.2'</span>],</span><br><span class="line">      description: <span class="string">'Which version do you want scan on black duck? MVSURE_v1.1, MVSURE_v1.2 or others?'</span>)</span><br><span class="line">    choice(</span><br><span class="line">      name: <span class="string">'REPO'</span>,</span><br><span class="line">      choices: [<span class="string">'blog-server'</span>, <span class="string">'blog-client'</span>, <span class="string">'blog-docker'</span>],</span><br><span class="line">      description: <span class="string">'Which repository code does above VERSION belong to?'</span>)</span><br><span class="line">    string(</span><br><span class="line">      name: <span class="string">'BRANCH'</span>,</span><br><span class="line">      defaultValue: <span class="string">'develop'</span>,</span><br><span class="line">      description: <span class="string">'Which branch does above VERSION belong to?'</span>)</span><br><span class="line">    choice(</span><br><span class="line">      name: <span class="string">'SNIPPET-MODES'</span>,</span><br><span class="line">      choices: [<span class="string">'SNIPPET_MATCHING'</span>, <span class="string">'SNIPPET_MATCHING_ONLY'</span>, <span class="string">'FULL_SNIPPET_MATCHING'</span>, <span class="string">'FULL_SNIPPET_MATCHING_ONLY'</span>, <span class="string">'NONE'</span>],</span><br><span class="line">      description: <span class="string">'What snippet scan mode do you want to choose?'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  environment &#123;</span><br><span class="line">    ROBOT                  = credentials(<span class="string">"d1cbab74-823d-41aa-abb7-858485121212"</span>)</span><br><span class="line">    hub_detect             = <span class="string">'https://blackducksoftware.github.io/hub-detect/hub-detect.sh'</span></span><br><span class="line">    blackduck_url          = <span class="string">'https://yourcompany.blackducksoftware.com'</span></span><br><span class="line">    blackduck_user         = <span class="string">'robot@yourcompany.com'</span></span><br><span class="line">    detect_project         = <span class="string">'GITHUB'</span></span><br><span class="line">    detect_project_version = <span class="string">'$&#123;VERSION&#125;'</span></span><br><span class="line">    detect_source_path     = <span class="string">'$&#123;WORKSPACE&#125;/$&#123;REPO&#125;/src'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 只保留最近十次 Jenkins 执行结果</span></span><br><span class="line">  options &#123;buildDiscarder(logRotator(numToKeepStr:<span class="string">'10'</span>))&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 定时触发可以在这里添加</span></span><br><span class="line"></span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(<span class="string">"git clone"</span>)&#123; <span class="comment"># 参数化 git clone 代码过程</span></span><br><span class="line">      steps&#123;</span><br><span class="line">        sh <span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">        if [ -d $&#123;REPO&#125; ]; then</span></span><br><span class="line"><span class="string">            rm -rf $&#123;REPO&#125;</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">        git clone -b $&#123;BRANCH&#125; --depth 1 https://$ROBOT_USR:"$ROBOT_PSW"@git.yourcompany.com/scm/github/$&#123;REPO&#125;.git</span></span><br><span class="line"><span class="string">        '</span><span class="string">''</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    stage(<span class="string">"black duck scan"</span>)&#123; <span class="comment"># 参数化 Black Duck 所用到的参数值</span></span><br><span class="line">      steps &#123;</span><br><span class="line">        withCredentials([string(credentialsId: <span class="string">'robot-black-duck-scan'</span>, variable: <span class="string">'TOKEN'</span>)]) &#123; <span class="comment"># 用 withCredentials 来获得 Token</span></span><br><span class="line">          synopsys_detect <span class="string">'bash &lt;(curl -s $&#123;hub_detect&#125;) --blackduck.url=$&#123;blackduck_url&#125; --blackduck.username=$&#123;blackduck_user&#125; --blackduck.api.token=$&#123;TOKEN&#125; --detect.project.name=$&#123;detect_project&#125; --detect.project.version.name=$&#123;detect_project_version&#125; --detect.source.path=$&#123;detect_source_path&#125; --logging.level.com.synopsys.integration=debug --blackduck.trust.cert=TRUE --detect.blackduck.signature.scanner.snippet.matching=$&#123;SNIPPET-MODES&#125;'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  post &#123;</span><br><span class="line">    <span class="comment"># 不论结果任何都给执行者发送邮件通知</span></span><br><span class="line">    always &#123;</span><br><span class="line">      script &#123;</span><br><span class="line">        def email = load <span class="string">"vars/email.groovy"</span></span><br><span class="line">        wrap([<span class="variable">$class</span>: <span class="string">'BuildUser'</span>]) &#123;</span><br><span class="line">            def user = env.BUILD_USER_ID</span><br><span class="line">            email.build(currentBuild.result, <span class="string">"<span class="variable">$&#123;user&#125;</span>"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    success &#123;</span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"success, cleanup blackduck workspace"</span></span><br><span class="line">      cleanWs()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2019/12/Blackduck-interation-into-Jenkins/" data-id="ckc5mu1w90053swfobzcz8pqk" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2019/12/Blackduck-interation-into-Jenkins/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blackduck/" rel="tag">Blackduck</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/detect/" rel="tag">Detect</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/" rel="tag">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/synopsys/" rel="tag">Synopsys</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2019/12/Docker-commands" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/Docker-commands/" class="article-date">
  <time datetime="2019-12-02T06:30:41.000Z" itemprop="datePublished">2019-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/devops/">DevOps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/Docker-commands/">Docker 常用命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Docker-start-stop-restart"><a href="#Docker-start-stop-restart" class="headerlink" title="Docker start|stop|restart"></a>Docker start|stop|restart</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 Docker 版本</span></span><br><span class="line">docker -v <span class="comment"># or docker --version</span></span><br><span class="line"><span class="comment"># 重启 docker</span></span><br><span class="line">sudo systemctl restart docker.service</span><br><span class="line"><span class="comment"># 停止 docker</span></span><br><span class="line">sudo systemctl stop docker.service</span><br><span class="line"><span class="comment"># 启动 docker</span></span><br><span class="line">sudo systemctl start docker.service</span><br></pre></td></tr></table></figure>

<h2 id="Docker-run"><a href="#Docker-run" class="headerlink" title="Docker run"></a>Docker run</h2><p>我们通过 docker 的两个参数 -i -t，让 docker 运行的容器实现”对话”的能力：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t ubuntu:15.10 /bin/bash</span><br></pre></td></tr></table></figure>

<h2 id="Login-Artifactory"><a href="#Login-Artifactory" class="headerlink" title="Login Artifactory"></a>Login Artifactory</h2><p>注意：Open Source 版本 Artifactory 不支持 Docker，需要下载 <a href="https://jfrog.com/container-registry/" target="_blank" rel="noopener">JFrog Container Registry</a> 或是 Artifactory 企业版。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u &lt;USER_NAME&gt; -p &lt;USER_PASSWORD&gt; dendevmvasvm01.dev.rocketsoftware.com:&lt;REPOSITORY_PORT&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-sh-4.2$ sudo docker login dendevmvasvm03.dev.rocketsoftware.com:8040</span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">WARNING! Your password will be stored unencrypted <span class="keyword">in</span> /root/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/<span class="comment">#credentials-store</span></span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure>

<p>把 Docker image 推送到仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// docker tag SOURCE_IMAGE[:TAG] dendevmvasvm03.dev.rocketsoftware.com:8040/docker-local/IMAGE[:TAG]</span><br><span class="line">-sh-4.2$ sudo docker tag ubuntu:15.10 dendevmvasvm03.dev.rocketsoftware.com:8040/docker-local/ubuntu:15.10</span><br><span class="line"></span><br><span class="line">// docker push dendevmvasvm03.dev.rocketsoftware.com:8040/docker-local/IMAGE[:TAG]</span><br><span class="line">-sh-4.2$ sudo docker push dendevmvasvm03.dev.rocketsoftware.com:8040/docker-local/ubuntu:15.10</span><br><span class="line">The push refers to repository [dendevmvasvm03.dev.rocketsoftware.com:8040/docker-local/ubuntu]</span><br><span class="line">98d59071f692: Pushed</span><br><span class="line">af288f00b8a7: Pushed</span><br><span class="line">4b955941a4d0: Pushed</span><br><span class="line">f121afdbbd5d: Pushed</span><br><span class="line">15.10: digest: sha256:a3f5e428c0cfbfd55cffb32d30b1d78fedb8a9faaf08efdd9c5208c94dc66614 size: 1150</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>之后会更新更多的常用的 Docker 命令到这篇文章。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2019/12/Docker-commands/" data-id="ckc5mu1wa0055swfo697ma4pw" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2019/12/Docker-commands/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/devops/" rel="tag">DevOps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">Docker</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2019/12/48h-in-Beijing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/48h-in-Beijing/" class="article-date">
  <time datetime="2019-12-01T15:55:00.000Z" itemprop="datePublished">2019-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/devops/">DevOps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/48h-in-Beijing/">北京48小时：记一次参加 DevOps 训练营</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本周二下班我没有像往常一样加会班（我一般都会赶在晚6点后下班来躲过晚高峰期），而是直接挤地铁奔向机场，准备坐八点半去往北京的一班飞机，因为第二天要参加 JFrog 中国在北京望京举办的 Jenkins, Artifactory &amp; Kubernetes 实战训练营。</p>
<p>一是由于公司每人每年都有两天带薪培训假期，如果有特别适合我的，我会自费前往。二是培训内容本身也十分贴近我目前的工作内容，想了解下行业最佳实践与相关同行交流。</p>
<p>在出行前，跟领导请了假说明意向，顺便问了下去参加类似培训是否会有预算，领导让我报一下，我大概算了车票和酒店的钱，领导就跟公司申请，并且还附带帮我申请了饭钱。公司同意，前提只有一个就是回来要做好分享。就这样我就带着任务去参加这次 JFrog DevOps 训练营了，这里我特别感谢我的领导以及公司。</p>
<h2 id="再次见北京"><a href="#再次见北京" class="headerlink" title="再次见北京"></a>再次见北京</h2><p>想想离开北京已经5年多了，这是唯一一次在北京停留时间最长的 48 小时，之前有过出差路过北京。以前虽然在北京工作，但那时候我还没有太多关注过生活，这次有意的注意了下，脑子里一直思考一个问题，如果再让我回到北京我还会像当初的执念仅仅想着北京工作几年而已吗？</p>
<p>下了飞机已经十点半了，从机场到望京这段的机场高速车流量还是很大的，北京的夜生活跟以前的感觉一样，比起二三线城市足足晚了两个多小时。五年前在北我京通常都是九点后从公司走，赶上上线的时候后半夜才到家，第二天中午到公司，每天的时间比二三线城市现在我足足延后了五六个小时。</p>
<p>我现在的生活是早九晚六，不推崇加班，上班期间也是很忙，但绝大多数人也不会加班，加不加班是自愿。期间去过美国出差，美国的同事很多是早上七八点上班，他们一般中午吃的很简单也很快，吃完饭如果工作忙，他们会立马投入工作，下午三四点钟就离开办公室了，待到五六点钟的极少数，但工作效率其实感觉不差。这让我想起了今年轰轰烈烈的讨论过的996，可能归根到底是我们的社会发展阶段所造成的，年轻人压力很大需要努力赚钱买房，有娃的人有自己的父母来帮忙照顾孩子，年老的人也不考虑自己的退休生活，更多的是希望能帮忙自己的孩子解决一些后顾之忧，就这样年轻人就可以安心的的996了。但是美国人他们不行，很现实的他们如果不三四点钟下班，他们的孩子就没人接，他们需要自己的家庭生活。因此，我们本应该由企业甚至是社会来承担事情，被全社会的来承担了，996就自然而然不可避免的发生了。</p>
<p>早高峰时段，望京有的路口有年长的大爷大妈在指挥交通，每当绿灯时，大量的电动车和自行车与行人一同穿行，我总担心会被刮到。晚上下班吃完饭回去的时候，路口没有指挥了，行人、自行车以及电动车在红灯时过马路的情况还是挺普遍的，造成了绿灯时机动车通行效率很低。另外，就是走在路上，后面不时的有自行车、电动车骑过，我总是挺担心被撞到，这种走路时候担心的感觉其实是不太舒服的。</p>
<p>中午跟朋友约了吃饭，听他聊起过去五年多的工作情况，期间他换了好几个公司，有勾心斗角的，有 P2P 黄的（工资还欠着的，还在仲裁中），谈起最近一年北京大厂裁员以及网易最近的裁员风波，都让我感受在哪混着都挺不容易的。随着他要当爸爸了，从没有考虑过要离开北京的他也有了离开的念头，如果不能在将来在北京购买个小房子，他可能就回到家乡，住他自己已经购买房子里生活。</p>
<p>随着企业成本控制，不少企业已经去二三线城市发展，那里的租金甚至比北京便宜四五倍，如果能招到人的话，他们就可以落地二三线了。当初我在北京的时候，我的室友就在中国移动研究院，后来中国移动研究院搬到了苏州，他和几个小伙伴也都去了苏州，现在已经早早在那里买房了，那边环境很好，有自己的房子，工资也不低，其实生活挺舒服的。尤其是软件行业，有的公司允许远程办公，那只要能满足岗位要求，其他也挺好的。身边就有朋友他们的公司在北京撤除了办公室，他们现在就在家办公，隔一段时间可以去出差去二三线城市的办公室与同事工作交流。</p>
<p>此时，脑海中的问题一直缠绕，再给你一次机会你还想在留在北京生活吗？我的决定和当初一样回到现在的城市。</p>
<p>我喜欢这里的工作生活的平衡，加班也都是主动加班学习，没有被迫的加班给领导看；我喜欢这里的海，中午吃完饭就可以跟同事一起散步走到海边看海；我喜欢这里离父母很近，开车半个小时就能到，可以经常与他们相聚照顾他们；我喜欢住在自己的房子，不用担心搬家了，可以不断的改善生活环境；我喜欢这里人不太多、该有的专卖店和商城都有、有地铁，去哪里都不算太远。</p>
<p>周四下午 5 点培训完，吃了个饭就直奔机场连夜回到家，第二天回来继续上班了。这短短的两天，往返两座城市之间工作和培训，飞机上只需要40分钟，就像没有离开过一样，让人感叹交通的便利。</p>
<p>祝愿每个人都收获自己享受的生活。</p>
<p align="right">2019 年 12 月 1 日 23 : 55 : 00</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2019/12/48h-in-Beijing/" data-id="ckc5mu1w80050swfo32aq8e9z" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2019/12/48h-in-Beijing/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/devops/" rel="tag">DevOps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/" rel="tag">Jenkins</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/4/">next</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">Automation</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/devops/">DevOps</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">Git</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">Hexo</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jenkins/">Jenkins</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linuxunix/">LinuxUnix</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mynotes/">MyNotes</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/snippet/">Snippet</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/aix/" style="font-size: 10px;">AIX</a> <a href="/tags/ansicolor/" style="font-size: 10px;">AnsiColor</a> <a href="/tags/artifactory/" style="font-size: 13.33px;">Artifactory</a> <a href="/tags/authorization/" style="font-size: 10px;">Authorization</a> <a href="/tags/automation/" style="font-size: 17.78px;">Automation</a> <a href="/tags/azure/" style="font-size: 10px;">Azure</a> <a href="/tags/batch/" style="font-size: 10px;">Batch</a> <a href="/tags/bitbucket/" style="font-size: 12.22px;">Bitbucket</a> <a href="/tags/blackduck/" style="font-size: 10px;">Blackduck</a> <a href="/tags/blog/" style="font-size: 12.22px;">Blog</a> <a href="/tags/branch/" style="font-size: 10px;">Branch</a> <a href="/tags/c/" style="font-size: 14.44px;">C</a> <a href="/tags/cd/" style="font-size: 10px;">CD</a> <a href="/tags/ci/" style="font-size: 10px;">CI</a> <a href="/tags/cleanup/" style="font-size: 10px;">Cleanup</a> <a href="/tags/codecoverage/" style="font-size: 11.11px;">CodeCoverage</a> <a href="/tags/detect/" style="font-size: 10px;">Detect</a> <a href="/tags/devops/" style="font-size: 12.22px;">DevOps</a> <a href="/tags/docker/" style="font-size: 12.22px;">Docker</a> <a href="/tags/flask/" style="font-size: 10px;">Flask</a> <a href="/tags/framework/" style="font-size: 10px;">Framework</a> <a href="/tags/git/" style="font-size: 16.67px;">Git</a> <a href="/tags/github/" style="font-size: 10px;">GitHub</a> <a href="/tags/hp-ux/" style="font-size: 10px;">HP-UX</a> <a href="/tags/hexo/" style="font-size: 15.56px;">Hexo</a> <a href="/tags/interview/" style="font-size: 10px;">Interview</a> <a href="/tags/jfrog/" style="font-size: 12.22px;">JFrog</a> <a href="/tags/jmeter/" style="font-size: 10px;">JMeter</a> <a href="/tags/java/" style="font-size: 10px;">Java</a> <a href="/tags/javascript/" style="font-size: 12.22px;">Javascript</a> <a href="/tags/jenkins/" style="font-size: 20px;">Jenkins</a> <a href="/tags/linux/" style="font-size: 11.11px;">Linux</a> <a href="/tags/nfs/" style="font-size: 10px;">NFS</a> <a href="/tags/nightwatch/" style="font-size: 18.89px;">Nightwatch</a> <a href="/tags/pipeline/" style="font-size: 16.67px;">Pipeline</a> <a href="/tags/python/" style="font-size: 11.11px;">Python</a> <a href="/tags/release/" style="font-size: 10px;">Release</a> <a href="/tags/selenium/" style="font-size: 10px;">Selenium</a> <a href="/tags/shell/" style="font-size: 12.22px;">Shell</a> <a href="/tags/solaris/" style="font-size: 10px;">Solaris</a> <a href="/tags/squash/" style="font-size: 10px;">Squash</a> <a href="/tags/squishcoco/" style="font-size: 10px;">Squishcoco</a> <a href="/tags/stats/" style="font-size: 11.11px;">Stats</a> <a href="/tags/summary/" style="font-size: 10px;">Summary</a> <a href="/tags/synopsys/" style="font-size: 10px;">Synopsys</a> <a href="/tags/test/" style="font-size: 10px;">Test</a> <a href="/tags/testng/" style="font-size: 10px;">TestNG</a> <a href="/tags/thought/" style="font-size: 12.22px;">Thought</a> <a href="/tags/tips/" style="font-size: 11.11px;">Tips</a> <a href="/tags/translate/" style="font-size: 10px;">Translate</a> <a href="/tags/troubleshooting/" style="font-size: 13.33px;">Troubleshooting</a> <a href="/tags/unix/" style="font-size: 12.22px;">UNIX</a> <a href="/tags/ubuntu/" style="font-size: 12.22px;">Ubuntu</a> <a href="/tags/vpn/" style="font-size: 10px;">VPN</a> <a href="/tags/virtualbox/" style="font-size: 10px;">VirtualBox</a> <a href="/tags/webhooks/" style="font-size: 11.11px;">Webhooks</a> <a href="/tags/work/" style="font-size: 14.44px;">Work</a> <a href="/tags/cppcheck/" style="font-size: 10px;">cppcheck</a> <a href="/tags/multi-branch/" style="font-size: 10px;">multi-branch</a> <a href="/tags/performance/" style="font-size: 10px;">performance</a> <a href="/tags/vscode/" style="font-size: 11.11px;">vscode</a> <a href="/tags/write/" style="font-size: 10px;">write</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/about-my-wechat-official-account/">一名软件测试工程师的成长之路</a>
          </li>
        
          <li>
            <a href="/2020/06/Jenkins-tips-2/">《Jenkins Tips 002》 处理 Shell 返回的字符串成字符数组</a>
          </li>
        
          <li>
            <a href="/2020/06/Jenkins-tips-1/">《Jenkins Tips 001》 忽略 Shell 步骤中的故障</a>
          </li>
        
          <li>
            <a href="/2020/06/vm-status-check-via-jenkins/">这也能用Jenkins？快速实现一个定期批量登录远程虚拟机并支持添加新的主机名称的Job</a>
          </li>
        
          <li>
            <a href="/2020/06/Java-net-SocketException-on-AIX/">解决 Jenkins Artifactory Plugin 仅在 AIX 上传制品到 https 协议的 Artifactory 失败的问题</a>
          </li>
        
          <li>
            <a href="/2020/05/programmers-read-and-write/">从 “会写程序的干不过会写PPT的” —— 聊程序员写作</a>
          </li>
        
          <li>
            <a href="/2020/05/jenkins-pipeline-linter-connector/">如何确保提交 Jenkins Pipeline 前没有语法错误</a>
          </li>
        
          <li>
            <a href="/2020/05/nightwatch-v1-3/">Nightwarch v1.3 介绍</a>
          </li>
        
          <li>
            <a href="/2020/05/jmeter-performance-testing/">How to use JMeter to do Performance Testing</a>
          </li>
        
          <li>
            <a href="/2020/05/sync-from-bitbucket-to-github/">Synchronize from Bitbucket to GitHub via Jenkins</a>
          </li>
        
          <li>
            <a href="/2020/04/Bitbucket-webhooks-cn/">Jenkins 与 Bitbucket Webhooks 的配置和使用</a>
          </li>
        
          <li>
            <a href="/2020/04/Bitbucket-webhooks/">Bitbucket Webhooks Configuration</a>
          </li>
        
          <li>
            <a href="/2020/04/Jenkins-troubleshooting-1/">三种方法解决 Jenkins 声明式流水线 Exception Method code too large !</a>
          </li>
        
          <li>
            <a href="/2020/04/Top-30-DevOps-Interview-Questions/">DevOps Top 30+ 面试问题</a>
          </li>
        
          <li>
            <a href="/2020/03/Best-14-CI-CD-Tools-in-2020/">2020年务必知道的最好用的14款CI/CD工具</a>
          </li>
        
          <li>
            <a href="/2020/03/maintaining-a-git-gepository/">如何给你的 Git 仓库“瘦身”</a>
          </li>
        
          <li>
            <a href="/2020/02/cppcheck/">一款免费的 C/C++ 静态代码分析工具 Cppcheck 与 Jenkins 集成</a>
          </li>
        
          <li>
            <a href="/2020/02/Setup-Linux-in-VirtualBox/">用 VirtualBox 配置一台 Linux 虚拟机</a>
          </li>
        
          <li>
            <a href="/2020/02/linux-tips/">最有用的 Linux 命令行技巧</a>
          </li>
        
          <li>
            <a href="/2020/02/hpxu-tips/">HP-UX 安装工具以及一些使用总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
</aside>
<script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        
      </div>
      

<!-- 
  <script>
    var disqus_shortname = 'shenxianpeng';
    
    var disqus_url = 'https://shenxianpeng.github.io/about/index.html';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//go.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
 -->

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Xianpeng Shen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

<div id="disqus_thread"></div>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
  <script>
    var disqus_shortname = 'shenxianpeng';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>