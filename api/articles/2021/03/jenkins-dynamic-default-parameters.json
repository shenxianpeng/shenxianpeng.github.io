{"title":"Different branches have different default parameters in Jenkins","slug":"2021/03/jenkins-dynamic-default-parameters","date":"2021-03-24T02:50:53.000Z","updated":"2021-07-15T16:00:42.926Z","comments":true,"path":"api/articles/2021/03/jenkins-dynamic-default-parameters.json","excerpt":null,"covers":null,"content":"<h2 id=\"Problem\"><a href=\"#Problem\" class=\"headerlink\" title=\"Problem\"></a>Problem</h2><p>When you use Jenkins multibranch pipeline, you may want to have different default parameters settings for defferent branches build.</p>\n<p>For example:</p>\n<p>For develop/hotfix/release branches, except regular build, you also want to do some code analyzes, like code scanning, etc.<br>For other branches, like feature/bugfix or Pull Request that you just want to do a regular build.</p>\n<p>So you need to have dynamic parameter settings for your multibranch pipeline job.</p>\n<h2 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h2><p>So for these cases, how to deal with Jenkins multibranch pipeline. Here are some code snippet that is works well in my Jenkinsfile.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">def polarisValue = <span class=\"literal\">false</span></span><br><span class=\"line\">def blackduckValue = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (env.BRANCH_NAME.startsWith(<span class=\"string\">\"develop\"</span>) || env.BRANCH_NAME.startsWith(<span class=\"string\">\"hotfix\"</span>)</span><br><span class=\"line\"> || env.BRANCH_NAME.startsWith(<span class=\"string\">\"release\"</span>)) &#123;</span><br><span class=\"line\">\tpolarisValue = <span class=\"literal\">true</span></span><br><span class=\"line\">\tblackduckValue = <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> pipeline &#123;</span><br><span class=\"line\">   agent &#123; node &#123; label <span class=\"string\">'gradle'</span> &#125; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   parameters &#123;</span><br><span class=\"line\">       booleanParam defaultValue: polarisValue, name: <span class=\"string\">'Polaris'</span>,  description: <span class=\"string\">'Uncheck to disable Polaris'</span></span><br><span class=\"line\">       booleanParam defaultValue: blackduckValue, name: <span class=\"string\">'BlackDuck'</span>, description: <span class=\"string\">'Uncheck to disable BD scan'</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   stages &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n","more":"<h2 id=\"Problem\"><a href=\"#Problem\" class=\"headerlink\" title=\"Problem\"></a>Problem</h2><p>When you use Jenkins multibranch pipeline, you may want to have different default parameters settings for defferent branches build.</p>\n<p>For example:</p>\n<p>For develop/hotfix/release branches, except regular build, you also want to do some code analyzes, like code scanning, etc.<br>For other branches, like feature/bugfix or Pull Request that you just want to do a regular build.</p>\n<p>So you need to have dynamic parameter settings for your multibranch pipeline job.</p>\n<h2 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h2><p>So for these cases, how to deal with Jenkins multibranch pipeline. Here are some code snippet that is works well in my Jenkinsfile.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">def polarisValue = <span class=\"literal\">false</span></span><br><span class=\"line\">def blackduckValue = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (env.BRANCH_NAME.startsWith(<span class=\"string\">\"develop\"</span>) || env.BRANCH_NAME.startsWith(<span class=\"string\">\"hotfix\"</span>)</span><br><span class=\"line\"> || env.BRANCH_NAME.startsWith(<span class=\"string\">\"release\"</span>)) &#123;</span><br><span class=\"line\">\tpolarisValue = <span class=\"literal\">true</span></span><br><span class=\"line\">\tblackduckValue = <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> pipeline &#123;</span><br><span class=\"line\">   agent &#123; node &#123; label <span class=\"string\">'gradle'</span> &#125; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   parameters &#123;</span><br><span class=\"line\">       booleanParam defaultValue: polarisValue, name: <span class=\"string\">'Polaris'</span>,  description: <span class=\"string\">'Uncheck to disable Polaris'</span></span><br><span class=\"line\">       booleanParam defaultValue: blackduckValue, name: <span class=\"string\">'BlackDuck'</span>, description: <span class=\"string\">'Uncheck to disable BD scan'</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   stages &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"Jenkins","path":"api/categories/Jenkins.json"}],"tags":[{"name":"Jenkins","path":"api/tags/Jenkins.json"}]}