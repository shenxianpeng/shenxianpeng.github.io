{"title":"Polaris - 静态代码分析","slug":"2021/10/what-is-polaris","date":"2021-10-24T13:33:53.000Z","updated":"2023-06-12T14:33:47.116Z","comments":true,"path":"api/articles/2021/10/what-is-polaris.json","excerpt":"这可能是中文网里介绍Polaris最详细的文章了什么是 Polaris？Polaris - 托管静态应用程序软件测试(SAST)工具的 SaaS 平台，它是用于分类和修复漏洞并运行报告的 Web 站点。<br>SAST - 一种对源代码分析或构建过程中去寻找安全漏洞的工具，是一种在软件开发的生命周期(SDLC)中确保安全的重要步骤。<br>Coverity - Coverity 是 Synopsys 公司提供的原始静态应用软件测试 (SAST) 工具。Polaris 是 Coverity 的 SaaS 版本。<br>Synopsys - 是开发 Polaris 和其他软件扫描工具的公司，比如 BlackDuck 也是他们的产品。Polaris 支持哪些语言？C/C++<br>C#<br>Java<br>JavaScript<br>TypeScript<br>PHP<br>Python<br>Fortran<br>Swift<br>...and more<br>Polaris SaaS 平台通常如果你的组织引入了 Polaris 的 SaaS 服务，你将会有如下网址可供访问 URL: https://organization.polaris.synopsys.com然后登录，你就可以给自己的 Git Repository 创建对应的项目了。建议：创建的项目名称与 Git Repository 的名称一致。Polaris 如何进行漏洞扫描？Polaris 安装在进行 Polaris 扫描之前，你需要先下载并安装 polaris。如果你的 Polaris server URL 为：POLARIS_SERVER_URL=https://organization.polaris.synopsys.com下载连接为：$POLARIS_SERVER_URL/api/tools/polaris_cli-linux64.zip然后将下载到本地的 polaris_cli-linux64.zip 进行解压，将其 bin 目录添加到 PATH 中。Polaris YAML 文件配置在进行扫描之前，你需要为你的项目创建 YAML 文件。默认配置文件名为 polaris.yml，位于项目根目录。如果你希望指定不同的配置文件名，你可以在 polaris 命令中使用 -c 选项。在项目根目录运行 polaris setup 以生成通用的 polaris.yml 文件。运行 polaris configure 以确认你的文件在语法上是正确的并且 polaris 没有任何问题。Capture - 捕获YAML 配置文件可以包含三种类型的 Capture：Build(构建) - 运行构建命令，然后分析结果Filesystem(文件系统) - 对于解释型语言，提供项目类型和要分析的扩展列表Buildless - 对于一些可以使用依赖管理器的语言，比如 mavenLanguagesBuild OptionsC, C++, ObjectiveC, Objective C++,Go, Scala, Swift使用 Build 捕获PHP, Python, Ruby使用 Buildless 或 Filesystem 捕获C#, Visual Basic.如果想获得更准确的结果使用 Build 捕获；如果寻求简单使用 Buildless 捕获Java如果想获得更准确的结果使用 Build 捕获；如果寻求简单使用 Buildless 捕获JavaScript,TypeScript使用 Filesystem 捕获；如果寻求简单使用 Buildless 捕获Analyze - 分析如果你正在扫描 C&#x2F;C++ 代码，则应包括此分析部分以充分利用 Polaris 的扫描功能：analyze:<br>  mode: central<br>  coverity:<br>    cov-analyze: [&quot;--security&quot;,&quot;--concurrency&quot;]<br>Polaris YAML 示例文件","covers":["/2021/10/what-is-polaris/summary.png","/2021/10/what-is-polaris/issues.png"],"content":"<blockquote>\n<p>这可能是中文网里介绍Polaris最详细的文章了</p>\n</blockquote>\n<h2 id=\"什么是-Polaris？\"><a href=\"#什么是-Polaris？\" class=\"headerlink\" title=\"什么是 Polaris？\"></a>什么是 Polaris？</h2><p><strong>Polaris</strong> - 托管静态应用程序软件测试(SAST)工具的 SaaS 平台，它是用于分类和修复漏洞并运行报告的 Web 站点。<br><strong>SAST</strong> - 一种对源代码分析或构建过程中去寻找安全漏洞的工具，是一种在软件开发的生命周期(SDLC)中确保安全的重要步骤。<br><strong>Coverity</strong> - Coverity 是 Synopsys 公司提供的原始静态应用软件测试 (SAST) 工具。Polaris 是 Coverity 的 SaaS 版本。<br><strong>Synopsys</strong> - 是开发 Polaris 和其他软件扫描工具的公司，比如 BlackDuck 也是他们的产品。</p>\n<h2 id=\"Polaris-支持哪些语言？\"><a href=\"#Polaris-支持哪些语言？\" class=\"headerlink\" title=\"Polaris 支持哪些语言？\"></a>Polaris 支持哪些语言？</h2><figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">C/C++</span><br><span class=\"line\">C#</span><br><span class=\"line\">Java</span><br><span class=\"line\">JavaScript</span><br><span class=\"line\">TypeScript</span><br><span class=\"line\">PHP</span><br><span class=\"line\">Python</span><br><span class=\"line\">Fortran</span><br><span class=\"line\">Swift</span><br><span class=\"line\">...and more</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Polaris-SaaS-平台\"><a href=\"#Polaris-SaaS-平台\" class=\"headerlink\" title=\"Polaris SaaS 平台\"></a>Polaris SaaS 平台</h2><p>通常如果你的组织引入了 Polaris 的 SaaS 服务，你将会有如下网址可供访问 URL: <a href=\"https://organization.polaris.synopsys.com/\">https://organization.polaris.synopsys.com</a></p>\n<p>然后登录，你就可以给自己的 Git Repository 创建对应的项目了。</p>\n<blockquote>\n<p>建议：创建的项目名称与 Git Repository 的名称一致。</p>\n</blockquote>\n<h2 id=\"Polaris-如何进行漏洞扫描？\"><a href=\"#Polaris-如何进行漏洞扫描？\" class=\"headerlink\" title=\"Polaris 如何进行漏洞扫描？\"></a>Polaris 如何进行漏洞扫描？</h2><h3 id=\"Polaris-安装\"><a href=\"#Polaris-安装\" class=\"headerlink\" title=\"Polaris 安装\"></a>Polaris 安装</h3><p>在进行 Polaris 扫描之前，你需要先下载并安装 polaris。</p>\n<p>如果你的 Polaris server URL 为：<code>POLARIS_SERVER_URL=https://organization.polaris.synopsys.com</code></p>\n<p>下载连接为：<code>$POLARIS_SERVER_URL/api/tools/polaris_cli-linux64.zip</code></p>\n<p>然后将下载到本地的 <code>polaris_cli-linux64.zip</code> 进行解压，将其 bin 目录添加到 PATH 中。</p>\n<h3 id=\"Polaris-YAML-文件配置\"><a href=\"#Polaris-YAML-文件配置\" class=\"headerlink\" title=\"Polaris YAML 文件配置\"></a>Polaris YAML 文件配置</h3><p>在进行扫描之前，你需要为你的项目创建 YAML 文件。默认配置文件名为 <code>polaris.yml</code>，位于项目根目录。如果你希望指定不同的配置文件名，你可以在 <code>polaris</code> 命令中使用 <code>-c</code> 选项。</p>\n<p>在项目根目录运行 <code>polaris setup</code> 以生成通用的 <code>polaris.yml</code> 文件。</p>\n<p>运行 <code>polaris configure</code> 以确认你的文件在语法上是正确的并且 <code>polaris</code> 没有任何问题。</p>\n<h4 id=\"Capture-捕获\"><a href=\"#Capture-捕获\" class=\"headerlink\" title=\"Capture - 捕获\"></a>Capture - 捕获</h4><p>YAML 配置文件可以包含三种类型的 Capture：</p>\n<ul>\n<li>Build(构建) - 运行构建命令，然后分析结果</li>\n<li>Filesystem(文件系统) - 对于解释型语言，提供项目类型和要分析的扩展列表</li>\n<li>Buildless - 对于一些可以使用依赖管理器的语言，比如 maven</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Languages</th>\n<th>Build Options</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>C, C++, ObjectiveC, Objective C++,Go, Scala, Swift</td>\n<td>使用 Build 捕获</td>\n</tr>\n<tr>\n<td>PHP, Python, Ruby</td>\n<td>使用 Buildless 或 Filesystem 捕获</td>\n</tr>\n<tr>\n<td>C#, Visual Basic.</td>\n<td>如果想获得更准确的结果使用 Build 捕获；如果寻求简单使用 Buildless 捕获</td>\n</tr>\n<tr>\n<td>Java</td>\n<td>如果想获得更准确的结果使用 Build 捕获；如果寻求简单使用 Buildless 捕获</td>\n</tr>\n<tr>\n<td>JavaScript,TypeScript</td>\n<td>使用 Filesystem 捕获；如果寻求简单使用 Buildless 捕获</td>\n</tr>\n</tbody></table>\n<h4 id=\"Analyze-分析\"><a href=\"#Analyze-分析\" class=\"headerlink\" title=\"Analyze - 分析\"></a>Analyze - 分析</h4><p>如果你正在扫描 C&#x2F;C++ 代码，则应包括此分析部分以充分利用 Polaris 的扫描功能：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">analyze:</span></span><br><span class=\"line\">  <span class=\"attr\">mode:</span> <span class=\"string\">central</span></span><br><span class=\"line\">  <span class=\"attr\">coverity:</span></span><br><span class=\"line\">    <span class=\"attr\">cov-analyze:</span> [<span class=\"string\">&quot;--security&quot;</span>,<span class=\"string\">&quot;--concurrency&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Polaris-YAML-示例文件\"><a href=\"#Polaris-YAML-示例文件\" class=\"headerlink\" title=\"Polaris YAML 示例文件\"></a>Polaris YAML 示例文件</h4><span id=\"more\"></span>\n\n<p>示例1：一个C&#x2F;C++ 项目</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">project:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">test-cplus-demo</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">$&#123;scm.git.branch&#125;</span></span><br><span class=\"line\">  <span class=\"attr\">revision:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">$&#123;scm.git.commit&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">date:</span> <span class=\"string\">$&#123;scm.git.commit.date&#125;</span></span><br><span class=\"line\"><span class=\"attr\">capture:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">cleanCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">make</span>, <span class=\"string\">-f</span>, <span class=\"string\">GNUmakefile</span>, <span class=\"string\">clean</span>]</span><br><span class=\"line\">    <span class=\"attr\">buildCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">make</span>, <span class=\"string\">-f</span>, <span class=\"string\">GNUmakefile</span>]</span><br><span class=\"line\"><span class=\"attr\">analyze:</span></span><br><span class=\"line\">  <span class=\"attr\">mode:</span> <span class=\"string\">central</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\">  <span class=\"attr\">coverity:</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">serverUrl:</span> <span class=\"string\">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure>\n\n<p>示例2：一个 Java 项目</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">project:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">test-java-demo</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">$&#123;scm.git.branch&#125;</span></span><br><span class=\"line\">  <span class=\"attr\">revision:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">$&#123;scm.git.commit&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">date:</span> <span class=\"string\">$&#123;scm.git.commit.date&#125;</span></span><br><span class=\"line\"><span class=\"attr\">capture:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">cleanCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">gradle</span>, <span class=\"string\">-b</span>, <span class=\"string\">build.gradle</span>, <span class=\"string\">--no-daemon</span>, <span class=\"string\">clean</span>]</span><br><span class=\"line\">    <span class=\"attr\">buildCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">gradle</span>, <span class=\"string\">-b</span>, <span class=\"string\">build.gradle</span>, <span class=\"string\">--no-daemon</span>, <span class=\"string\">shadowJar</span>]</span><br><span class=\"line\">  <span class=\"attr\">fileSystem:</span></span><br><span class=\"line\">    <span class=\"attr\">ears:</span></span><br><span class=\"line\">      <span class=\"attr\">extensions:</span> [<span class=\"string\">ear</span>]</span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">java:</span></span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">javascript:</span></span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">client-vscode</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">excludeRegex:</span> <span class=\"string\">node_modules|bower_components|vendor</span></span><br><span class=\"line\">    <span class=\"attr\">python:</span></span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">wars:</span></span><br><span class=\"line\">      <span class=\"attr\">extensions:</span> [<span class=\"string\">war</span>]</span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\"><span class=\"attr\">analyze:</span></span><br><span class=\"line\">  <span class=\"attr\">mode:</span> <span class=\"string\">central</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\">  <span class=\"attr\">coverity:</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">serverUrl:</span> <span class=\"string\">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure>\n\n<p>示例3：一个 CSharp 项目</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">project:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">test-ssharp-demo</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">$&#123;scm.git.branch&#125;</span></span><br><span class=\"line\">  <span class=\"attr\">revision:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">$&#123;scm.git.commit&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">date:</span> <span class=\"string\">$&#123;scm.git.commit.date&#125;</span></span><br><span class=\"line\"><span class=\"attr\">capture:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">buildCommands:</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果构建过程很复杂，你可以写一个脚本，然后调用它</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">&#x27;script\\polaris.bat&#x27;</span>]</span><br><span class=\"line\">    <span class=\"comment\"># 跳过一些你不想扫描的文件</span></span><br><span class=\"line\">    <span class=\"attr\">skipFiles:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&quot;*.java&quot;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&quot;*.text&quot;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&quot;*.js&quot;</span></span><br><span class=\"line\"><span class=\"attr\">analyze:</span></span><br><span class=\"line\">  <span class=\"attr\">mode:</span> <span class=\"string\">central</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\">  <span class=\"attr\">coverity:</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">serverUrl:</span> <span class=\"string\">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure>\n\n<p>更多关于如何编写 <code>polaris.yml</code> 就不一一罗列了，详细请参考 Polaris 的官方文档：<a href=\"https://sig-docs.synopsys.com/polaris/topics/c_conf-overview.html\">https://sig-docs.synopsys.com/polaris/topics/c_conf-overview.html</a></p>\n<h3 id=\"执行分析\"><a href=\"#执行分析\" class=\"headerlink\" title=\"执行分析\"></a>执行分析</h3><p>可以使用如下命令进行 Polaris 分析：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">polaris -c polaris.yml analyze -w --coverity-ignore-capture-failure</span><br></pre></td></tr></table></figure>\n\n<p><code>--coverity-ignore-capture-failure</code> - 忽略 Coverity 捕获失败。运行 <code>polaris help analyze</code> 可以查看更多分析命令的介绍。</p>\n<h3 id=\"Polaris-分析结果\"><a href=\"#Polaris-分析结果\" class=\"headerlink\" title=\"Polaris 分析结果\"></a>Polaris 分析结果</h3><p>如果 Polaris 分析成功，将会在控制台看到一条成功信息如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[INFO] [1zb99xsu] Coverity job completed successfully!</span><br><span class=\"line\"></span><br><span class=\"line\">[INFO] [1zb99xsu] Coverity - analyze phase took 4m 36.526s.</span><br><span class=\"line\">Analysis Completed.</span><br><span class=\"line\">Coverity analysis</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"string\">&quot;JobId&quot;</span>: <span class=\"string\">&quot;mlkik4esb961p0dtq8i6m7pm14&quot;</span>,</span><br><span class=\"line\"> <span class=\"string\">&quot;Status&quot;</span>: <span class=\"string\">&quot;Success&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Job issue summary</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"string\">&quot;IssuesBySeverity&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;Critical&quot;</span>: 0,</span><br><span class=\"line\">  <span class=\"string\">&quot;High&quot;</span>: 250,</span><br><span class=\"line\">  <span class=\"string\">&quot;Medium&quot;</span>: 359,</span><br><span class=\"line\">  <span class=\"string\">&quot;Low&quot;</span>: 81</span><br><span class=\"line\"> &#125;,</span><br><span class=\"line\"> <span class=\"string\">&quot;Total&quot;</span>: 690,</span><br><span class=\"line\"> <span class=\"string\">&quot;NewIssues&quot;</span>: 0,</span><br><span class=\"line\"> <span class=\"string\">&quot;ClosedIssues&quot;</span>: 0,</span><br><span class=\"line\"> <span class=\"string\">&quot;SummaryUrl&quot;</span>: <span class=\"string\">&quot;https://organization.polaris.synopsys.com/projects/bb079756-194e-4645-9121-5131493a0c93/branches/d567c376-4d5d-4941-8733-aa27bb2f5f5b&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里显示了一共发现了多少 690 个漏洞，以及每种不同严重程度各占多少个。具体的漏洞信息需要登录到 Polaris SaaS 平台进行查看。</p>\n<p>点击 <code>SummaryUrl</code> 中的链接将会直接跳转到该项目的 Polaris 扫描结果。</p>\n<p><img src=\"/2021/10/what-is-polaris/summary.png\" alt=\"Summary\"></p>\n<p><img src=\"/2021/10/what-is-polaris/issues.png\" alt=\"Issues\"></p>\n","more":"<p>示例1：一个C&#x2F;C++ 项目</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">project:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">test-cplus-demo</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">$&#123;scm.git.branch&#125;</span></span><br><span class=\"line\">  <span class=\"attr\">revision:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">$&#123;scm.git.commit&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">date:</span> <span class=\"string\">$&#123;scm.git.commit.date&#125;</span></span><br><span class=\"line\"><span class=\"attr\">capture:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">cleanCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">make</span>, <span class=\"string\">-f</span>, <span class=\"string\">GNUmakefile</span>, <span class=\"string\">clean</span>]</span><br><span class=\"line\">    <span class=\"attr\">buildCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">make</span>, <span class=\"string\">-f</span>, <span class=\"string\">GNUmakefile</span>]</span><br><span class=\"line\"><span class=\"attr\">analyze:</span></span><br><span class=\"line\">  <span class=\"attr\">mode:</span> <span class=\"string\">central</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\">  <span class=\"attr\">coverity:</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">serverUrl:</span> <span class=\"string\">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure>\n\n<p>示例2：一个 Java 项目</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">project:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">test-java-demo</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">$&#123;scm.git.branch&#125;</span></span><br><span class=\"line\">  <span class=\"attr\">revision:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">$&#123;scm.git.commit&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">date:</span> <span class=\"string\">$&#123;scm.git.commit.date&#125;</span></span><br><span class=\"line\"><span class=\"attr\">capture:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">cleanCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">gradle</span>, <span class=\"string\">-b</span>, <span class=\"string\">build.gradle</span>, <span class=\"string\">--no-daemon</span>, <span class=\"string\">clean</span>]</span><br><span class=\"line\">    <span class=\"attr\">buildCommands:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">gradle</span>, <span class=\"string\">-b</span>, <span class=\"string\">build.gradle</span>, <span class=\"string\">--no-daemon</span>, <span class=\"string\">shadowJar</span>]</span><br><span class=\"line\">  <span class=\"attr\">fileSystem:</span></span><br><span class=\"line\">    <span class=\"attr\">ears:</span></span><br><span class=\"line\">      <span class=\"attr\">extensions:</span> [<span class=\"string\">ear</span>]</span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">java:</span></span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">javascript:</span></span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">client-vscode</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">excludeRegex:</span> <span class=\"string\">node_modules|bower_components|vendor</span></span><br><span class=\"line\">    <span class=\"attr\">python:</span></span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">wars:</span></span><br><span class=\"line\">      <span class=\"attr\">extensions:</span> [<span class=\"string\">war</span>]</span><br><span class=\"line\">      <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">directory:</span> <span class=\"string\">$&#123;project.projectDir&#125;</span></span><br><span class=\"line\"><span class=\"attr\">analyze:</span></span><br><span class=\"line\">  <span class=\"attr\">mode:</span> <span class=\"string\">central</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\">  <span class=\"attr\">coverity:</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">serverUrl:</span> <span class=\"string\">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure>\n\n<p>示例3：一个 CSharp 项目</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">project:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">test-ssharp-demo</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">$&#123;scm.git.branch&#125;</span></span><br><span class=\"line\">  <span class=\"attr\">revision:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">$&#123;scm.git.commit&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">date:</span> <span class=\"string\">$&#123;scm.git.commit.date&#125;</span></span><br><span class=\"line\"><span class=\"attr\">capture:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">buildCommands:</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果构建过程很复杂，你可以写一个脚本，然后调用它</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">shell:</span> [<span class=\"string\">&#x27;script\\polaris.bat&#x27;</span>]</span><br><span class=\"line\">    <span class=\"comment\"># 跳过一些你不想扫描的文件</span></span><br><span class=\"line\">    <span class=\"attr\">skipFiles:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&quot;*.java&quot;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&quot;*.text&quot;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&quot;*.js&quot;</span></span><br><span class=\"line\"><span class=\"attr\">analyze:</span></span><br><span class=\"line\">  <span class=\"attr\">mode:</span> <span class=\"string\">central</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\">  <span class=\"attr\">coverity:</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">serverUrl:</span> <span class=\"string\">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure>\n\n<p>更多关于如何编写 <code>polaris.yml</code> 就不一一罗列了，详细请参考 Polaris 的官方文档：<a href=\"https://sig-docs.synopsys.com/polaris/topics/c_conf-overview.html\">https://sig-docs.synopsys.com/polaris/topics/c_conf-overview.html</a></p>\n<h3 id=\"执行分析\"><a href=\"#执行分析\" class=\"headerlink\" title=\"执行分析\"></a>执行分析</h3><p>可以使用如下命令进行 Polaris 分析：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">polaris -c polaris.yml analyze -w --coverity-ignore-capture-failure</span><br></pre></td></tr></table></figure>\n\n<p><code>--coverity-ignore-capture-failure</code> - 忽略 Coverity 捕获失败。运行 <code>polaris help analyze</code> 可以查看更多分析命令的介绍。</p>\n<h3 id=\"Polaris-分析结果\"><a href=\"#Polaris-分析结果\" class=\"headerlink\" title=\"Polaris 分析结果\"></a>Polaris 分析结果</h3><p>如果 Polaris 分析成功，将会在控制台看到一条成功信息如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[INFO] [1zb99xsu] Coverity job completed successfully!</span><br><span class=\"line\"></span><br><span class=\"line\">[INFO] [1zb99xsu] Coverity - analyze phase took 4m 36.526s.</span><br><span class=\"line\">Analysis Completed.</span><br><span class=\"line\">Coverity analysis</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"string\">&quot;JobId&quot;</span>: <span class=\"string\">&quot;mlkik4esb961p0dtq8i6m7pm14&quot;</span>,</span><br><span class=\"line\"> <span class=\"string\">&quot;Status&quot;</span>: <span class=\"string\">&quot;Success&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Job issue summary</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"string\">&quot;IssuesBySeverity&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;Critical&quot;</span>: 0,</span><br><span class=\"line\">  <span class=\"string\">&quot;High&quot;</span>: 250,</span><br><span class=\"line\">  <span class=\"string\">&quot;Medium&quot;</span>: 359,</span><br><span class=\"line\">  <span class=\"string\">&quot;Low&quot;</span>: 81</span><br><span class=\"line\"> &#125;,</span><br><span class=\"line\"> <span class=\"string\">&quot;Total&quot;</span>: 690,</span><br><span class=\"line\"> <span class=\"string\">&quot;NewIssues&quot;</span>: 0,</span><br><span class=\"line\"> <span class=\"string\">&quot;ClosedIssues&quot;</span>: 0,</span><br><span class=\"line\"> <span class=\"string\">&quot;SummaryUrl&quot;</span>: <span class=\"string\">&quot;https://organization.polaris.synopsys.com/projects/bb079756-194e-4645-9121-5131493a0c93/branches/d567c376-4d5d-4941-8733-aa27bb2f5f5b&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里显示了一共发现了多少 690 个漏洞，以及每种不同严重程度各占多少个。具体的漏洞信息需要登录到 Polaris SaaS 平台进行查看。</p>\n<p>点击 <code>SummaryUrl</code> 中的链接将会直接跳转到该项目的 Polaris 扫描结果。</p>\n<p><img src=\"/2021/10/what-is-polaris/summary.png\" alt=\"Summary\"></p>\n<p><img src=\"/2021/10/what-is-polaris/issues.png\" alt=\"Issues\"></p>","categories":[{"name":"Polaris","path":"api/categories/Polaris.json"}],"tags":[{"name":"Polaris","path":"api/tags/Polaris.json"},{"name":"Static","path":"api/tags/Static.json"},{"name":"Coverity","path":"api/tags/Coverity.json"},{"name":"Security","path":"api/tags/Security.json"}]}