{"title":"Resolved - The Pip Inspector tree parse failed to produce output","slug":"2022/03/blackduck-troubleshooting","date":"2022-03-02T06:54:11.000Z","updated":"2024-09-27T12:50:58.861Z","comments":true,"path":"api/articles/2022/03/blackduck-troubleshooting.json","excerpt":"DetailsFailure: PIP - Pip Inspector<br>  The Pip Inspector tree parse failed to produce output.<br><br>Overall Status: FAILURE_DETECTOR - Detect had one or more detector failures while extracting dependencies.<br>For more output please click to expand.üëâ Click to see more output üëà[main] --- ======== Detect Issues ========<br>[main] ---<br>[main] --- DETECTORS:<br>[main] --- \tDetector Issue<br>[main] --- \t\t/workdir/test<br>[main] --- \t\tFailure: PIP - Pip Inspector<br>[main] --- \t\t\tThe Pip Inspector tree parse failed to produce output.<br>[main] ---<br>[main] --- ======== Detect Result ========<br>[main] ---<br>[main] --- Black Duck Project BOM: https://org.blackducksoftware.com/api/projects/246c8952-7cb8-40e9-9987-35f7d4602ae1/versions/e1cb4204-42d0-4445-8675-978df62b150d/components<br>[main] ---<br>[main] --- ======== Detect Status ========<br>[main] ---<br>[main] --- GIT: SUCCESS<br>[main] --- PIP: FAILURE<br>[main] ---<br>[main] --- Signature scan / Snippet scan on /workdir/test: SUCCESS<br>[main] --- Overall Status: FAILURE_DETECTOR - Detect had one or more detector failures while extracting dependencies. Check that all projects build and your environment is configured correctly.<br>[main] ---<br>[main] --- If you need help troubleshooting this problem, generate a diagnostic zip file by adding &#x27;-d&#x27; to the command line, and provide it to Synopsys Technical Support. See &#x27;Diagnostic Mode&#x27; in the Detect documentation for more information.<br>[main] ---<br>[main] --- ===============================<br>[main] ---<br>[main] --- Detect duration: 00h 00m 54s 951ms<br>[main] --- Exiting with code 5 - FAILURE_DETECTOR<br>ENVIRONMENT:Product: synopsys-detect-7.11.1.jarOthers: OpenJDK 11, Python 3.6 and Python 2.7.5Root cause","covers":null,"content":"<h2 id=\"Details\"><a href=\"#Details\" class=\"headerlink\" title=\"Details\"></a>Details</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Failure: PIP - Pip Inspector</span><br><span class=\"line\">  The Pip Inspector tree parse failed to produce output.</span><br><span class=\"line\"></span><br><span class=\"line\">Overall Status: FAILURE_DETECTOR - Detect had one or more detector failures <span class=\"keyword\">while</span> extracting dependencies.</span><br></pre></td></tr></table></figure>\n\n<p>For more output please click to expand.</p>\n<details>\n<summary>üëâ Click to see more output üëà</summary>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] --- ======== Detect Issues ========</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- DETECTORS:</span><br><span class=\"line\">[main] --- \tDetector Issue</span><br><span class=\"line\">[main] --- \t\t/workdir/test</span><br><span class=\"line\">[main] --- \t\tFailure: PIP - Pip Inspector</span><br><span class=\"line\">[main] --- \t\t\tThe Pip Inspector tree parse failed to produce output.</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- ======== Detect Result ========</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- Black Duck Project BOM: https://org.blackducksoftware.com/api/projects/246c8952-7cb8-40e9-9987-35f7d4602ae1/versions/e1cb4204-42d0-4445-8675-978df62b150d/components</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- ======== Detect Status ========</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- GIT: SUCCESS</span><br><span class=\"line\">[main] --- PIP: FAILURE</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- Signature scan / Snippet scan on /workdir/test: SUCCESS</span><br><span class=\"line\">[main] --- Overall Status: FAILURE_DETECTOR - Detect had one or more detector failures <span class=\"keyword\">while</span> extracting dependencies. Check that all projects build and your environment is configured correctly.</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- If you need <span class=\"built_in\">help</span> troubleshooting this problem, generate a diagnostic zip file by adding <span class=\"string\">&#x27;-d&#x27;</span> to the <span class=\"built_in\">command</span> line, and provide it to Synopsys Technical Support. See <span class=\"string\">&#x27;Diagnostic Mode&#x27;</span> <span class=\"keyword\">in</span> the Detect documentation <span class=\"keyword\">for</span> more information.</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- ===============================</span><br><span class=\"line\">[main] ---</span><br><span class=\"line\">[main] --- Detect duration: 00h 00m 54s 951ms</span><br><span class=\"line\">[main] --- Exiting with code 5 - FAILURE_DETECTOR</span><br></pre></td></tr></table></figure>\n\n</details>\n\n<p>ENVIRONMENT:</p>\n<ul>\n<li>Product: synopsys-detect-7.11.1.jar</li>\n<li>Others: OpenJDK 11, Python 3.6 and Python 2.7.5</li>\n</ul>\n<h2 id=\"Root-cause\"><a href=\"#Root-cause\" class=\"headerlink\" title=\"Root cause\"></a>Root cause</h2><span id=\"more\"></span>\n\n<p>More output of this run, I see it used <code>python</code> (which is python2) not <code>python3</code>,<br>so run <a href=\"https://github.com/blackducksoftware/synopsys-detect/blob/master/src/main/resources/pip-inspector.py\">pip-inspector.py</a> failed.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">DEBUG [main-Executable_Stream_Thread] --- Python 2.7.5</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">[main] --- Running executable &gt;/usr/bin/python /home/****/blackduck/runs/2022-03-01-07-45-05-986/shared/pip/pip-inspector.py --projectname=<span class=\"built_in\">test</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h2><p>Link python to python3, it works in my case.</p>\n<p>For example</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># save python to other name</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mv</span> /usr/bin/python /usr/bin/python.old</span><br><span class=\"line\"><span class=\"comment\"># link python3 to python</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">ln</span> -s /usr/bin/python3 /usr/bin/python</span><br></pre></td></tr></table></figure>\n\n<p>Then try to run <code>bash &lt;(curl -s -L https://detect.synopsys.com/detect7.sh)</code> again, my test commands:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">bash &lt;(curl -s -L https://detect.synopsys.com/detect7.sh) --blackduck.url=https://org.blackducksoftware.com --blackduck.api.token=MmMwMjdlOTctMT --detect.project.name=HUB --detect.project.version.name=TEST_v1.1.1 --detect.source.path=/workdir/test --logging.level.com.synopsys.integration=DEBUG --blackduck.trust.cert=TRUE --detect.tools.excluded=POLARIS --detect.blackduck.signature.scanner.snippet.matching=SNIPPET_MATCHING</span><br></pre></td></tr></table></figure>\n\n<p>If you want to use Docker to do Blackduck scan, you can create a Docker image. like this</p>\n<!-- more -->\n\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> openjdk:<span class=\"number\">11</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set DETECT version you need, if it&#x27;s empty download the latest version.</span></span><br><span class=\"line\"><span class=\"comment\"># https://sig-repo.synopsys.com/artifactory/bds-integrations-release/com/synopsys/integration/synopsys-detect</span></span><br><span class=\"line\"><span class=\"keyword\">ENV</span> DETECT_LATEST_RELEASE_VERSION=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> apt-get update \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get upgrade -y \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get install -y \\</span></span><br><span class=\"line\"><span class=\"language-bash\">        git \\</span></span><br><span class=\"line\"><span class=\"language-bash\">        python \\</span></span><br><span class=\"line\"><span class=\"language-bash\">        pip \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get autoremove \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get clean</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> curl -sSOL https://detect.synopsys.com/detect7.sh &amp;&amp; bash detect7.sh --<span class=\"built_in\">help</span> \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; <span class=\"built_in\">rm</span> -rf /usr/bin/python \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; <span class=\"built_in\">ln</span> -s /usr/bin/python3 /usr/bin/python</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> /src</span></span><br></pre></td></tr></table></figure>\n\n<p>Hope this help.</p>\n<hr>\n<p>ËΩ¨ËΩΩÊú¨Á´ôÊñáÁ´†ËØ∑Ê≥®Êòé‰ΩúËÄÖÂíåÂá∫Â§ÑÔºåËØ∑ÂãøÁî®‰∫é‰ªª‰ΩïÂïÜ‰∏öÁî®ÈÄî„ÄÇÊ¨¢ËøéÂÖ≥Ê≥®ÂÖ¨‰ºóÂè∑„ÄåDevOpsÊîªÂüéÁãÆ„Äç</p>\n","more":"<p>More output of this run, I see it used <code>python</code> (which is python2) not <code>python3</code>,<br>so run <a href=\"https://github.com/blackducksoftware/synopsys-detect/blob/master/src/main/resources/pip-inspector.py\">pip-inspector.py</a> failed.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">DEBUG [main-Executable_Stream_Thread] --- Python 2.7.5</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">[main] --- Running executable &gt;/usr/bin/python /home/****/blackduck/runs/2022-03-01-07-45-05-986/shared/pip/pip-inspector.py --projectname=<span class=\"built_in\">test</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h2><p>Link python to python3, it works in my case.</p>\n<p>For example</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># save python to other name</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mv</span> /usr/bin/python /usr/bin/python.old</span><br><span class=\"line\"><span class=\"comment\"># link python3 to python</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">ln</span> -s /usr/bin/python3 /usr/bin/python</span><br></pre></td></tr></table></figure>\n\n<p>Then try to run <code>bash &lt;(curl -s -L https://detect.synopsys.com/detect7.sh)</code> again, my test commands:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">bash &lt;(curl -s -L https://detect.synopsys.com/detect7.sh) --blackduck.url=https://org.blackducksoftware.com --blackduck.api.token=MmMwMjdlOTctMT --detect.project.name=HUB --detect.project.version.name=TEST_v1.1.1 --detect.source.path=/workdir/test --logging.level.com.synopsys.integration=DEBUG --blackduck.trust.cert=TRUE --detect.tools.excluded=POLARIS --detect.blackduck.signature.scanner.snippet.matching=SNIPPET_MATCHING</span><br></pre></td></tr></table></figure>\n\n<p>If you want to use Docker to do Blackduck scan, you can create a Docker image. like this</p>\n<!-- more -->\n\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> openjdk:<span class=\"number\">11</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set DETECT version you need, if it&#x27;s empty download the latest version.</span></span><br><span class=\"line\"><span class=\"comment\"># https://sig-repo.synopsys.com/artifactory/bds-integrations-release/com/synopsys/integration/synopsys-detect</span></span><br><span class=\"line\"><span class=\"keyword\">ENV</span> DETECT_LATEST_RELEASE_VERSION=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> apt-get update \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get upgrade -y \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get install -y \\</span></span><br><span class=\"line\"><span class=\"language-bash\">        git \\</span></span><br><span class=\"line\"><span class=\"language-bash\">        python \\</span></span><br><span class=\"line\"><span class=\"language-bash\">        pip \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get autoremove \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; apt-get clean</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> curl -sSOL https://detect.synopsys.com/detect7.sh &amp;&amp; bash detect7.sh --<span class=\"built_in\">help</span> \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; <span class=\"built_in\">rm</span> -rf /usr/bin/python \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; <span class=\"built_in\">ln</span> -s /usr/bin/python3 /usr/bin/python</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> /src</span></span><br></pre></td></tr></table></figure>\n\n<p>Hope this help.</p>\n<hr>\n<p>ËΩ¨ËΩΩÊú¨Á´ôÊñáÁ´†ËØ∑Ê≥®Êòé‰ΩúËÄÖÂíåÂá∫Â§ÑÔºåËØ∑ÂãøÁî®‰∫é‰ªª‰ΩïÂïÜ‰∏öÁî®ÈÄî„ÄÇÊ¨¢ËøéÂÖ≥Ê≥®ÂÖ¨‰ºóÂè∑„ÄåDevOpsÊîªÂüéÁãÆ„Äç</p>","categories":[{"name":"BlackDuck","path":"api/categories/BlackDuck.json"}],"tags":[{"name":"Troubleshooting","path":"api/tags/Troubleshooting.json"},{"name":"BlackDuck","path":"api/tags/BlackDuck.json"}]}