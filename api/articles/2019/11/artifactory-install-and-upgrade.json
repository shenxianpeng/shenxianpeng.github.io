{"title":"初识 JFrog Artifactory","slug":"2019/11/artifactory-install-and-upgrade","date":"2019-11-10T09:52:58.000Z","updated":"2024-09-18T09:12:20.194Z","comments":true,"path":"api/articles/2019/11/artifactory-install-and-upgrade.json","excerpt":"什么是 ArtifactoryArtifactory 是 JFrog 的一个产品，用作二进制存储库管理器。二进制存储库可以将所有这些二进制统一托管，从而使团队的管理更加高效和简单。就跟你用 Git 一样，Git 是用来管理代码的，Artifactory 是用来管理二进制文件的，通常是指 jar, war, pypi, DLL, EXE 等 build 文件。我觉得使用 Artifactory 的最大优势是创造了更好的持续集成环境，有助于其他持续集成任务去 Artifactory 里调用，再部署到不同的测试或开发环境，这对于实施 DevOps 至关重要。","covers":["/2019/11/artifactory-install-and-upgrade/homepage.png"],"content":"<h2 id=\"什么是-Artifactory\"><a href=\"#什么是-Artifactory\" class=\"headerlink\" title=\"什么是 Artifactory\"></a>什么是 Artifactory</h2><p>Artifactory 是 JFrog 的一个产品，用作二进制存储库管理器。二进制存储库可以将所有这些二进制统一托管，从而使团队的管理更加高效和简单。</p>\n<p>就跟你用 Git 一样，Git 是用来管理代码的，Artifactory 是用来管理二进制文件的，通常是指 jar, war, pypi, DLL, EXE 等 build 文件。</p>\n<p>我觉得使用 Artifactory 的最大优势是创造了更好的持续集成环境，有助于其他持续集成任务去 Artifactory 里调用，再部署到不同的测试或开发环境，这对于实施 DevOps 至关重要。</p>\n<span id=\"more\"></span>\n\n<p>如果想了解更多有关 Artifactory，请参看 <a href=\"https://www.jfrogchina.com/\">中文官网</a> 以及 <a href=\"https://jfrog.com/artifactory/\">English Website</a>。</p>\n<h2 id=\"安装-Artifactory\"><a href=\"#安装-Artifactory\" class=\"headerlink\" title=\"安装 Artifactory\"></a>安装 Artifactory</h2><ol>\n<li>从官网下载 Open Source <a href=\"https://jfrog.com/open-source/#artifactory\">Artifactory</a>，这里演示的是安装到 Linux，所以点击 Download RPM 下载</li>\n<li>将下载好的 jfrog-artifactory-oss-6.14.0.rpm 上传到 Linux 上</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在根目录创建一个文件，你也可以在任何目录创建文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mkdir</span> /artifactory</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /artifactory</span><br><span class=\"line\"><span class=\"comment\"># 将下载好的 jfrog-artifactory-oss-6.15.0.rpm 上传到你的 Linux 上</span></span><br><span class=\"line\">$ <span class=\"built_in\">ls</span></span><br><span class=\"line\">jfrog-artifactory-oss-6.14.0.rpm</span><br><span class=\"line\"><span class=\"comment\"># 安装 artifactory</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> rpm -ivh jfrog-artifactory-oss-6.14.0.rpm</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Artifactory-服务启动和关闭\"><a href=\"#Artifactory-服务启动和关闭\" class=\"headerlink\" title=\"Artifactory 服务启动和关闭\"></a>Artifactory 服务启动和关闭</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl start artifactory.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在使用上面的命令启动服务的时候遇到如下错误：</span></span><br><span class=\"line\"><span class=\"comment\"># Job for artifactory.service failed because a configured resource limit was exceeded. See &quot;systemctl status artifactory.service&quot; and &quot;journalctl -xe&quot; for details.</span></span><br><span class=\"line\"><span class=\"comment\"># 详情：https://www.jfrog.com/jira/browse/RTFACT-19988</span></span><br><span class=\"line\"><span class=\"comment\"># 可尝试如下命令启动</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/jfrog/artifactory/app/bin &amp;&amp; ./artifactory.sh start &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 停止服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl stop artifactory.service</span><br><span class=\"line\"><span class=\"comment\"># 查看服务状态</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl status artifactory.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"访问-Artifactory\"><a href=\"#访问-Artifactory\" class=\"headerlink\" title=\"访问 Artifactory\"></a>访问 Artifactory</h2><p>Artifactory 默认端口是8040，安装成功后访问：<code>http://hostname:8040</code> 即可登录（默认用户名 admin 密码 password）<br><img src=\"/2019/11/artifactory-install-and-upgrade/homepage.png\" alt=\"Artifactory 首页\"></p>\n<h2 id=\"Artifactory-升级\"><a href=\"#Artifactory-升级\" class=\"headerlink\" title=\"Artifactory 升级\"></a>Artifactory 升级</h2><ol>\n<li><p>从官网下载最新的 <a href=\"https://jfrog.com/open-source/#artifactory\">Artifactory</a></p>\n</li>\n<li><p>将下载好的 jfrog-artifactory-oss-6.15.0.rpm（目前最新）上传到你的 Linux 上</p>\n</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /artifactory</span><br><span class=\"line\"><span class=\"built_in\">ls</span></span><br><span class=\"line\">jfrog-artifactory-oss-6.14.0.rpm  jfrog-artifactory-oss-6.15.0.rpm</span><br><span class=\"line\"><span class=\"comment\"># 停止服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl stop artifactory.service</span><br><span class=\"line\"><span class=\"comment\"># 进行升级</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> rpm -U jfrog-artifactory-oss-6.15.0.rpm</span><br><span class=\"line\"><span class=\"comment\"># 输出日志，显示升级成功</span></span><br><span class=\"line\">warning: jfrog-artifactory-oss-6.15.0.rpm: Header V4 DSA/SHA1 Signature, key ID d7639232: NOKEY</span><br><span class=\"line\">Checking <span class=\"keyword\">if</span> ARTIFACTORY_HOME exists</span><br><span class=\"line\">Removing tomcat work directory</span><br><span class=\"line\">Removing Artifactory<span class=\"string\">&#x27;s exploded WAR directory</span></span><br><span class=\"line\"><span class=\"string\">Initializing artifactory service with systemctl...</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">************ SUCCESS ****************</span></span><br><span class=\"line\"><span class=\"string\">The upgrade of Artifactory has completed successfully.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Start Artifactory with:</span></span><br><span class=\"line\"><span class=\"string\">&gt; systemctl start artifactory.service</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Check Artifactory status with:</span></span><br><span class=\"line\"><span class=\"string\">&gt; systemctl status artifactory.service</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">NOTE: Updating the ownership of files and directories. This may take several minutes. Do not stop the installation/upgrade process.</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Artifactory-卸载\"><a href=\"#Artifactory-卸载\" class=\"headerlink\" title=\"Artifactory 卸载\"></a>Artifactory 卸载</h2><ol>\n<li>停止 Artifactory 服务</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl stop artifactory.service</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>使用 root 用户执行 RPM uninstall 命令</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># remove OSS version</span></span><br><span class=\"line\">yum erase jfrog-artifactory-oss</span><br><span class=\"line\"><span class=\"comment\"># remove PRO version, etc.</span></span><br><span class=\"line\">yum erase jfrog-artifactory-pro</span><br></pre></td></tr></table></figure>\n\n<p>更多关于 JFrog 产品的卸载，请看：<a href=\"https://www.jfrog.com/confluence/display/JFROG/Uninstalling+JFrog+Products\">https://www.jfrog.com/confluence/display/JFROG/Uninstalling+JFrog+Products</a></p>\n<h2 id=\"安装-JFrog-CLI\"><a href=\"#安装-JFrog-CLI\" class=\"headerlink\" title=\"安装 JFrog CLI\"></a>安装 JFrog CLI</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ON MAC</span></span><br><span class=\"line\">brew install jfrog-cli-go</span><br><span class=\"line\"><span class=\"comment\"># WITH CURL</span></span><br><span class=\"line\">curl -fL https://getcli.jfrog.io | sh</span><br><span class=\"line\"><span class=\"comment\"># WITH NPM</span></span><br><span class=\"line\">npm install -g jfrog-cli-go</span><br><span class=\"line\"><span class=\"comment\"># WITH DOCKER</span></span><br><span class=\"line\">docker run docker.bintray.io/jfrog/jfrog-cli-go:latest jfrog -v</span><br></pre></td></tr></table></figure>\n\n<p>CLI for JFrog Artifactory</p>\n<p><a href=\"https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory\">如何在 Artifactory 上使用 JFrog CLI</a></p>\n","more":"<p>如果想了解更多有关 Artifactory，请参看 <a href=\"https://www.jfrogchina.com/\">中文官网</a> 以及 <a href=\"https://jfrog.com/artifactory/\">English Website</a>。</p>\n<h2 id=\"安装-Artifactory\"><a href=\"#安装-Artifactory\" class=\"headerlink\" title=\"安装 Artifactory\"></a>安装 Artifactory</h2><ol>\n<li>从官网下载 Open Source <a href=\"https://jfrog.com/open-source/#artifactory\">Artifactory</a>，这里演示的是安装到 Linux，所以点击 Download RPM 下载</li>\n<li>将下载好的 jfrog-artifactory-oss-6.14.0.rpm 上传到 Linux 上</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在根目录创建一个文件，你也可以在任何目录创建文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mkdir</span> /artifactory</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /artifactory</span><br><span class=\"line\"><span class=\"comment\"># 将下载好的 jfrog-artifactory-oss-6.15.0.rpm 上传到你的 Linux 上</span></span><br><span class=\"line\">$ <span class=\"built_in\">ls</span></span><br><span class=\"line\">jfrog-artifactory-oss-6.14.0.rpm</span><br><span class=\"line\"><span class=\"comment\"># 安装 artifactory</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> rpm -ivh jfrog-artifactory-oss-6.14.0.rpm</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Artifactory-服务启动和关闭\"><a href=\"#Artifactory-服务启动和关闭\" class=\"headerlink\" title=\"Artifactory 服务启动和关闭\"></a>Artifactory 服务启动和关闭</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl start artifactory.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在使用上面的命令启动服务的时候遇到如下错误：</span></span><br><span class=\"line\"><span class=\"comment\"># Job for artifactory.service failed because a configured resource limit was exceeded. See &quot;systemctl status artifactory.service&quot; and &quot;journalctl -xe&quot; for details.</span></span><br><span class=\"line\"><span class=\"comment\"># 详情：https://www.jfrog.com/jira/browse/RTFACT-19988</span></span><br><span class=\"line\"><span class=\"comment\"># 可尝试如下命令启动</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/jfrog/artifactory/app/bin &amp;&amp; ./artifactory.sh start &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 停止服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl stop artifactory.service</span><br><span class=\"line\"><span class=\"comment\"># 查看服务状态</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl status artifactory.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"访问-Artifactory\"><a href=\"#访问-Artifactory\" class=\"headerlink\" title=\"访问 Artifactory\"></a>访问 Artifactory</h2><p>Artifactory 默认端口是8040，安装成功后访问：<code>http://hostname:8040</code> 即可登录（默认用户名 admin 密码 password）<br><img src=\"/2019/11/artifactory-install-and-upgrade/homepage.png\" alt=\"Artifactory 首页\"></p>\n<h2 id=\"Artifactory-升级\"><a href=\"#Artifactory-升级\" class=\"headerlink\" title=\"Artifactory 升级\"></a>Artifactory 升级</h2><ol>\n<li><p>从官网下载最新的 <a href=\"https://jfrog.com/open-source/#artifactory\">Artifactory</a></p>\n</li>\n<li><p>将下载好的 jfrog-artifactory-oss-6.15.0.rpm（目前最新）上传到你的 Linux 上</p>\n</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /artifactory</span><br><span class=\"line\"><span class=\"built_in\">ls</span></span><br><span class=\"line\">jfrog-artifactory-oss-6.14.0.rpm  jfrog-artifactory-oss-6.15.0.rpm</span><br><span class=\"line\"><span class=\"comment\"># 停止服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl stop artifactory.service</span><br><span class=\"line\"><span class=\"comment\"># 进行升级</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> rpm -U jfrog-artifactory-oss-6.15.0.rpm</span><br><span class=\"line\"><span class=\"comment\"># 输出日志，显示升级成功</span></span><br><span class=\"line\">warning: jfrog-artifactory-oss-6.15.0.rpm: Header V4 DSA/SHA1 Signature, key ID d7639232: NOKEY</span><br><span class=\"line\">Checking <span class=\"keyword\">if</span> ARTIFACTORY_HOME exists</span><br><span class=\"line\">Removing tomcat work directory</span><br><span class=\"line\">Removing Artifactory<span class=\"string\">&#x27;s exploded WAR directory</span></span><br><span class=\"line\"><span class=\"string\">Initializing artifactory service with systemctl...</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">************ SUCCESS ****************</span></span><br><span class=\"line\"><span class=\"string\">The upgrade of Artifactory has completed successfully.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Start Artifactory with:</span></span><br><span class=\"line\"><span class=\"string\">&gt; systemctl start artifactory.service</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Check Artifactory status with:</span></span><br><span class=\"line\"><span class=\"string\">&gt; systemctl status artifactory.service</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">NOTE: Updating the ownership of files and directories. This may take several minutes. Do not stop the installation/upgrade process.</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Artifactory-卸载\"><a href=\"#Artifactory-卸载\" class=\"headerlink\" title=\"Artifactory 卸载\"></a>Artifactory 卸载</h2><ol>\n<li>停止 Artifactory 服务</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl stop artifactory.service</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>使用 root 用户执行 RPM uninstall 命令</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># remove OSS version</span></span><br><span class=\"line\">yum erase jfrog-artifactory-oss</span><br><span class=\"line\"><span class=\"comment\"># remove PRO version, etc.</span></span><br><span class=\"line\">yum erase jfrog-artifactory-pro</span><br></pre></td></tr></table></figure>\n\n<p>更多关于 JFrog 产品的卸载，请看：<a href=\"https://www.jfrog.com/confluence/display/JFROG/Uninstalling+JFrog+Products\">https://www.jfrog.com/confluence/display/JFROG/Uninstalling+JFrog+Products</a></p>\n<h2 id=\"安装-JFrog-CLI\"><a href=\"#安装-JFrog-CLI\" class=\"headerlink\" title=\"安装 JFrog CLI\"></a>安装 JFrog CLI</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ON MAC</span></span><br><span class=\"line\">brew install jfrog-cli-go</span><br><span class=\"line\"><span class=\"comment\"># WITH CURL</span></span><br><span class=\"line\">curl -fL https://getcli.jfrog.io | sh</span><br><span class=\"line\"><span class=\"comment\"># WITH NPM</span></span><br><span class=\"line\">npm install -g jfrog-cli-go</span><br><span class=\"line\"><span class=\"comment\"># WITH DOCKER</span></span><br><span class=\"line\">docker run docker.bintray.io/jfrog/jfrog-cli-go:latest jfrog -v</span><br></pre></td></tr></table></figure>\n\n<p>CLI for JFrog Artifactory</p>\n<p><a href=\"https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory\">如何在 Artifactory 上使用 JFrog CLI</a></p>","categories":[{"name":"JFrog","path":"api/categories/JFrog.json"}],"tags":[{"name":"Artifactory","path":"api/tags/Artifactory.json"},{"name":"JFrog","path":"api/tags/JFrog.json"}]}