{"title":"Nightwatch 模拟键盘操作","slug":"2017/10/nightwatch-keyboard","date":"2017-10-19T08:56:20.000Z","updated":"2024-09-09T09:02:28.807Z","comments":true,"path":"api/articles/2017/10/nightwatch-keyboard.json","excerpt":"在自动化测试中有这样一个场景，在一个输入框中输入一串字符，然后执行敲回车键，验证搜索结果，以 Google 搜索为例，代码如下：&#x27;search nightwatch and click ENTER key&#x27;: function(client) &#123;<br> client<br>    .url(&#x27;http://google.com&#x27;)<br>    .expect.element(&#x27;body&#x27;).to.be.present.before(1000);<br> client.setValue(&#x27;input[type=text]&#x27;, [&#x27;nightwatch&#x27;, client.Keys.ENTER])<br>    .pause(1000)<br>    .assert.containsText(&#x27;#main&#x27;, &#x27;Night Watch&#x27;);<br>&#125;<br>","covers":null,"content":"<p>在自动化测试中有这样一个场景，在一个输入框中输入一串字符，然后执行敲回车键，验证搜索结果，以 Google 搜索为例，代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&#x27;search nightwatch and click ENTER key&#x27;</span>: <span class=\"keyword\">function</span>(<span class=\"params\">client</span>) &#123;</span><br><span class=\"line\"> client</span><br><span class=\"line\">    .<span class=\"title function_\">url</span>(<span class=\"string\">&#x27;http://google.com&#x27;</span>)</span><br><span class=\"line\">    .<span class=\"property\">expect</span>.<span class=\"title function_\">element</span>(<span class=\"string\">&#x27;body&#x27;</span>).<span class=\"property\">to</span>.<span class=\"property\">be</span>.<span class=\"property\">present</span>.<span class=\"title function_\">before</span>(<span class=\"number\">1000</span>);</span><br><span class=\"line\"> client.<span class=\"title function_\">setValue</span>(<span class=\"string\">&#x27;input[type=text]&#x27;</span>, [<span class=\"string\">&#x27;nightwatch&#x27;</span>, client.<span class=\"property\">Keys</span>.<span class=\"property\">ENTER</span>])</span><br><span class=\"line\">    .<span class=\"title function_\">pause</span>(<span class=\"number\">1000</span>)</span><br><span class=\"line\">    .<span class=\"property\">assert</span>.<span class=\"title function_\">containsText</span>(<span class=\"string\">&#x27;#main&#x27;</span>, <span class=\"string\">&#x27;Night Watch&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p>不能翻墙的可换成 baidu，相应的 element 需要改一下否则以上代码会报错。<br>上面的代码是执行一个按键操作，如果想做组合键操作怎么办呢？比如在 Google 搜索框中输入 nightwatch，然后按 ctrl+a 组合键来进行全选操作。还是以 Google 搜索为例，代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">client.<span class=\"title function_\">setValue</span>(<span class=\"string\">&#x27;input[type=text]&#x27;</span>,[<span class=\"string\">&#x27;nightwatch&#x27;</span>, [client.<span class=\"property\">Keys</span>.<span class=\"property\">CONTROL</span>, <span class=\"string\">&#x27;a&#x27;</span>]])</span><br></pre></td></tr></table></figure>\n\n<p>其他的组合键操作以此类推。</p>\n<p>其他按键 Keys 如下：<br>Keys:<br>{ NULL,<br>  CANCEL,<br>  HELP,<br>  BACK_SPACE,<br>  TAB,<br>  CLEAR,<br>  RETURN,<br>  ENTER,<br>  SHIFT,<br>  CONTROL,<br>  ALT,<br>  PAUSE,<br>  ESCAPE,<br>  SPACE,<br>  PAGEUP,<br>  PAGEDOWN,<br>  END,<br>  HOME,<br>  LEFT_ARROW,<br>  UP_ARROW,<br>  RIGHT_ARROW,<br>  DOWN_ARROW,<br>  ARROW_LEFT,<br>  ARROW_UP,<br>  ARROW_RIGHT,<br>  ARROW_DOWN,<br>  INSERT,<br>  DELETE,<br>  SEMICOLON,<br>  EQUALS,<br>  NUMPAD0,<br>  NUMPAD1,<br>  NUMPAD2,<br>  NUMPAD3,<br>  NUMPAD4,<br>  NUMPAD5,<br>  NUMPAD6,<br>  NUMPAD7,<br>  NUMPAD8,<br>  NUMPAD9,<br>  MULTIPLY,<br>  ADD,<br>  SEPARATOR,<br>  SUBTRACT,<br>  DECIMAL,<br>  DIVIDE,<br>  F1,<br>  F2,<br>  F3,<br>  F4,<br>  F5,<br>  F6,<br>  F7,<br>  F8,<br>  F9,<br>  F10,<br>  F11,<br>  F12,<br>  COMMAND,<br>  META<br>},</p>\n","more":"<p>不能翻墙的可换成 baidu，相应的 element 需要改一下否则以上代码会报错。<br>上面的代码是执行一个按键操作，如果想做组合键操作怎么办呢？比如在 Google 搜索框中输入 nightwatch，然后按 ctrl+a 组合键来进行全选操作。还是以 Google 搜索为例，代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">client.<span class=\"title function_\">setValue</span>(<span class=\"string\">&#x27;input[type=text]&#x27;</span>,[<span class=\"string\">&#x27;nightwatch&#x27;</span>, [client.<span class=\"property\">Keys</span>.<span class=\"property\">CONTROL</span>, <span class=\"string\">&#x27;a&#x27;</span>]])</span><br></pre></td></tr></table></figure>\n\n<p>其他的组合键操作以此类推。</p>\n<p>其他按键 Keys 如下：<br>Keys:<br>{ NULL,<br>  CANCEL,<br>  HELP,<br>  BACK_SPACE,<br>  TAB,<br>  CLEAR,<br>  RETURN,<br>  ENTER,<br>  SHIFT,<br>  CONTROL,<br>  ALT,<br>  PAUSE,<br>  ESCAPE,<br>  SPACE,<br>  PAGEUP,<br>  PAGEDOWN,<br>  END,<br>  HOME,<br>  LEFT_ARROW,<br>  UP_ARROW,<br>  RIGHT_ARROW,<br>  DOWN_ARROW,<br>  ARROW_LEFT,<br>  ARROW_UP,<br>  ARROW_RIGHT,<br>  ARROW_DOWN,<br>  INSERT,<br>  DELETE,<br>  SEMICOLON,<br>  EQUALS,<br>  NUMPAD0,<br>  NUMPAD1,<br>  NUMPAD2,<br>  NUMPAD3,<br>  NUMPAD4,<br>  NUMPAD5,<br>  NUMPAD6,<br>  NUMPAD7,<br>  NUMPAD8,<br>  NUMPAD9,<br>  MULTIPLY,<br>  ADD,<br>  SEPARATOR,<br>  SUBTRACT,<br>  DECIMAL,<br>  DIVIDE,<br>  F1,<br>  F2,<br>  F3,<br>  F4,<br>  F5,<br>  F6,<br>  F7,<br>  F8,<br>  F9,<br>  F10,<br>  F11,<br>  F12,<br>  COMMAND,<br>  META<br>},</p>","categories":[{"name":"Automation","path":"api/categories/Automation.json"}],"tags":[{"name":"Nightwatch","path":"api/tags/Nightwatch.json"},{"name":"Automation","path":"api/tags/Automation.json"}]}