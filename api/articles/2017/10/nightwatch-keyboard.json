{"title":"Nightwatch 模拟键盘操作","slug":"2017/10/nightwatch-keyboard","date":"2017-10-19T08:56:20.000Z","updated":"2020-07-03T08:47:41.331Z","comments":true,"path":"api/articles/2017/10/nightwatch-keyboard.json","excerpt":"在自动化测试中有这样一个场景，在一个输入框中输入一串字符，然后执行敲回车键，验证搜索结果，以 Google 搜索为例，代码如下：1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>'search nightwatch and click ENTER key': function(client) &#123;<br> client<br>    .url('http://google.com')<br>    .expect.element('body').to.be.present.before(1000);<br> client.setValue('input[type=text]', ['nightwatch', client.Keys.ENTER])<br>    .pause(1000)<br>    .assert.containsText('#main', 'Night Watch');<br>&#125;<br>","covers":null,"content":"<p>在自动化测试中有这样一个场景，在一个输入框中输入一串字符，然后执行敲回车键，验证搜索结果，以 Google 搜索为例，代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'search nightwatch and click ENTER key'</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">client</span>) </span>&#123;</span><br><span class=\"line\"> client</span><br><span class=\"line\">    .url(<span class=\"string\">'http://google.com'</span>)</span><br><span class=\"line\">    .expect.element(<span class=\"string\">'body'</span>).to.be.present.before(<span class=\"number\">1000</span>);</span><br><span class=\"line\"> client.setValue(<span class=\"string\">'input[type=text]'</span>, [<span class=\"string\">'nightwatch'</span>, client.Keys.ENTER])</span><br><span class=\"line\">    .pause(<span class=\"number\">1000</span>)</span><br><span class=\"line\">    .assert.containsText(<span class=\"string\">'#main'</span>, <span class=\"string\">'Night Watch'</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<p>不能翻墙的可换成 baidu，相应的 element 需要改一下否则以上代码会报错。<br>上面的代码是执行一个按键操作，如果想做组合键操作怎么办呢？比如在 Google 搜索框中输入 nightwatch，然后按 ctrl+a 组合键来进行全选操作。还是以 Google 搜索为例，代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client.setValue(<span class=\"string\">'input[type=text]'</span>,[<span class=\"string\">'nightwatch'</span>, [client.Keys.CONTROL, <span class=\"string\">'a'</span>]])</span><br></pre></td></tr></table></figure>\n\n<p>其他的组合键操作以此类推。</p>\n<p>其他按键 Keys 如下：<br>Keys:<br>{ NULL,<br>  CANCEL,<br>  HELP,<br>  BACK_SPACE,<br>  TAB,<br>  CLEAR,<br>  RETURN,<br>  ENTER,<br>  SHIFT,<br>  CONTROL,<br>  ALT,<br>  PAUSE,<br>  ESCAPE,<br>  SPACE,<br>  PAGEUP,<br>  PAGEDOWN,<br>  END,<br>  HOME,<br>  LEFT_ARROW,<br>  UP_ARROW,<br>  RIGHT_ARROW,<br>  DOWN_ARROW,<br>  ARROW_LEFT,<br>  ARROW_UP,<br>  ARROW_RIGHT,<br>  ARROW_DOWN,<br>  INSERT,<br>  DELETE,<br>  SEMICOLON,<br>  EQUALS,<br>  NUMPAD0,<br>  NUMPAD1,<br>  NUMPAD2,<br>  NUMPAD3,<br>  NUMPAD4,<br>  NUMPAD5,<br>  NUMPAD6,<br>  NUMPAD7,<br>  NUMPAD8,<br>  NUMPAD9,<br>  MULTIPLY,<br>  ADD,<br>  SEPARATOR,<br>  SUBTRACT,<br>  DECIMAL,<br>  DIVIDE,<br>  F1,<br>  F2,<br>  F3,<br>  F4,<br>  F5,<br>  F6,<br>  F7,<br>  F8,<br>  F9,<br>  F10,<br>  F11,<br>  F12,<br>  COMMAND,<br>  META<br>},</p>\n","more":"<p>不能翻墙的可换成 baidu，相应的 element 需要改一下否则以上代码会报错。<br>上面的代码是执行一个按键操作，如果想做组合键操作怎么办呢？比如在 Google 搜索框中输入 nightwatch，然后按 ctrl+a 组合键来进行全选操作。还是以 Google 搜索为例，代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client.setValue(<span class=\"string\">'input[type=text]'</span>,[<span class=\"string\">'nightwatch'</span>, [client.Keys.CONTROL, <span class=\"string\">'a'</span>]])</span><br></pre></td></tr></table></figure>\n\n<p>其他的组合键操作以此类推。</p>\n<p>其他按键 Keys 如下：<br>Keys:<br>{ NULL,<br>  CANCEL,<br>  HELP,<br>  BACK_SPACE,<br>  TAB,<br>  CLEAR,<br>  RETURN,<br>  ENTER,<br>  SHIFT,<br>  CONTROL,<br>  ALT,<br>  PAUSE,<br>  ESCAPE,<br>  SPACE,<br>  PAGEUP,<br>  PAGEDOWN,<br>  END,<br>  HOME,<br>  LEFT_ARROW,<br>  UP_ARROW,<br>  RIGHT_ARROW,<br>  DOWN_ARROW,<br>  ARROW_LEFT,<br>  ARROW_UP,<br>  ARROW_RIGHT,<br>  ARROW_DOWN,<br>  INSERT,<br>  DELETE,<br>  SEMICOLON,<br>  EQUALS,<br>  NUMPAD0,<br>  NUMPAD1,<br>  NUMPAD2,<br>  NUMPAD3,<br>  NUMPAD4,<br>  NUMPAD5,<br>  NUMPAD6,<br>  NUMPAD7,<br>  NUMPAD8,<br>  NUMPAD9,<br>  MULTIPLY,<br>  ADD,<br>  SEPARATOR,<br>  SUBTRACT,<br>  DECIMAL,<br>  DIVIDE,<br>  F1,<br>  F2,<br>  F3,<br>  F4,<br>  F5,<br>  F6,<br>  F7,<br>  F8,<br>  F9,<br>  F10,<br>  F11,<br>  F12,<br>  COMMAND,<br>  META<br>},</p>","categories":[{"name":"Automation","path":"api/categories/Automation.json"}],"tags":[{"name":"Automation","path":"api/tags/Automation.json"},{"name":"Nightwatch","path":"api/tags/Nightwatch.json"}]}