{"title":"Nightwatch 测试用例失败继续执行","slug":"2017/10/test-case-fails-to-continue-execution","date":"2017-10-27T09:04:49.000Z","updated":"2023-06-12T05:08:18.263Z","comments":true,"path":"api/articles/2017/10/test-case-fails-to-continue-execution.json","excerpt":null,"covers":null,"content":"<p>自动化测试中，有一个验证点，当测试通过时，后面的测试脚本继续执行；<br>当出现异常时，你希望标记出来这个错误，但不影响后面的测试脚本执行，在 Nightwatch 中如何做？</p>\n<p>下面的一段代码验证 home 页面的 body 是否显示。这里如果显示则将验证点置为 false，如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">home.<span class=\"title function_\">waitForElementVisible</span>(<span class=\"string\">&#x27;@body&#x27;</span>, <span class=\"number\">3000</span>, <span class=\"literal\">true</span>, <span class=\"keyword\">function</span>(<span class=\"params\">result</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result.<span class=\"property\">value</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试报告中会显示失败，但是会继续执行后面的测试脚本</span></span><br><span class=\"line\">        client.<span class=\"property\">verify</span>.<span class=\"title function_\">equal</span>(result.<span class=\"property\">value</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 验证点通过</span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Pass&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>注意：这里如果用 assert，程序就会中断执行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 中断执行</span></span><br><span class=\"line\">client.<span class=\"property\">assert</span>.<span class=\"title function_\">equal</span>(result.<span class=\"property\">value</span>, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n","more":"<p>自动化测试中，有一个验证点，当测试通过时，后面的测试脚本继续执行；<br>当出现异常时，你希望标记出来这个错误，但不影响后面的测试脚本执行，在 Nightwatch 中如何做？</p>\n<p>下面的一段代码验证 home 页面的 body 是否显示。这里如果显示则将验证点置为 false，如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">home.<span class=\"title function_\">waitForElementVisible</span>(<span class=\"string\">&#x27;@body&#x27;</span>, <span class=\"number\">3000</span>, <span class=\"literal\">true</span>, <span class=\"keyword\">function</span>(<span class=\"params\">result</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result.<span class=\"property\">value</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试报告中会显示失败，但是会继续执行后面的测试脚本</span></span><br><span class=\"line\">        client.<span class=\"property\">verify</span>.<span class=\"title function_\">equal</span>(result.<span class=\"property\">value</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 验证点通过</span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Pass&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>注意：这里如果用 assert，程序就会中断执行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 中断执行</span></span><br><span class=\"line\">client.<span class=\"property\">assert</span>.<span class=\"title function_\">equal</span>(result.<span class=\"property\">value</span>, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"Automation","path":"api/categories/Automation.json"}],"tags":[{"name":"Nightwatch","path":"api/tags/Nightwatch.json"},{"name":"Automation","path":"api/tags/Automation.json"}]}