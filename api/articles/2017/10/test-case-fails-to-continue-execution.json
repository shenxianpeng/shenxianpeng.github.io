{"title":"Nightwatch 测试用例失败继续执行","slug":"2017/10/test-case-fails-to-continue-execution","date":"2017-10-27T09:04:49.000Z","updated":"2020-07-03T08:47:47.912Z","comments":true,"path":"api/articles/2017/10/test-case-fails-to-continue-execution.json","excerpt":null,"covers":null,"content":"<p>自动化测试中，有一个验证点，当测试通过时，后面的测试脚本继续执行；<br>当出现异常时，你希望标记出来这个错误，但不影响后面的测试脚本执行，在 Nightwatch 中如何做？</p>\n<p>下面的一段代码验证 home 页面的 body 是否显示。这里如果显示则将验证点置为 false，如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">home.waitForElementVisible(<span class=\"string\">'@body'</span>, <span class=\"number\">3000</span>, <span class=\"literal\">true</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result.value) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试报告中会显示失败，但是会继续执行后面的测试脚本</span></span><br><span class=\"line\">        client.verify.equal(result.value, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 验证点通过</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Pass'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>注意：这里如果用 assert，程序就会中断执行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 中断执行</span></span><br><span class=\"line\">client.assert.equal(result.value, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n","more":"<p>自动化测试中，有一个验证点，当测试通过时，后面的测试脚本继续执行；<br>当出现异常时，你希望标记出来这个错误，但不影响后面的测试脚本执行，在 Nightwatch 中如何做？</p>\n<p>下面的一段代码验证 home 页面的 body 是否显示。这里如果显示则将验证点置为 false，如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">home.waitForElementVisible(<span class=\"string\">'@body'</span>, <span class=\"number\">3000</span>, <span class=\"literal\">true</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result.value) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试报告中会显示失败，但是会继续执行后面的测试脚本</span></span><br><span class=\"line\">        client.verify.equal(result.value, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 验证点通过</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Pass'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>注意：这里如果用 assert，程序就会中断执行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 中断执行</span></span><br><span class=\"line\">client.assert.equal(result.value, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"Automation","path":"api/categories/Automation.json"}],"tags":[{"name":"Automation","path":"api/tags/Automation.json"},{"name":"Nightwatch","path":"api/tags/Nightwatch.json"}]}