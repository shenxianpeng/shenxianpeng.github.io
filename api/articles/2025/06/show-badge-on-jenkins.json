{"title":"How to Fix Shields.io Badges Not Displaying in Jenkins","slug":"2025/06/show-badge-on-jenkins","date":"2025-06-23T15:41:00.000Z","updated":"2025-07-29T19:02:31.091Z","comments":true,"path":"api/articles/2025/06/show-badge-on-jenkins.json","excerpt":"IssueI have set up documentation publishing on Jenkins using the following Groovy code:publishHTML([<br>    allowMissing: false,<br>    alwaysLinkToLastBuild: false,<br>    keepAll: false,<br>    reportDir: &quot;docs/build/html/&quot;,<br>    reportFiles: &#x27;index.html&#x27;,<br>    reportName: &quot;Documentation&quot;,<br>    useWrapperFileDirectly: true<br>])<br>However, some badges from Shields.io do not display properly within the published documentation. [Figure] ","covers":["/2025/06/show-badge-on-jenkins/issue.png","/2025/06/show-badge-on-jenkins/resolve.png"],"content":"<h2 id=\"Issue\"><a href=\"#Issue\" class=\"headerlink\" title=\"Issue\"></a>Issue</h2><p>I have set up documentation publishing on Jenkins using the following Groovy code:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">publishHTML([</span><br><span class=\"line\">    <span class=\"symbol\">allowMissing:</span> <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"symbol\">alwaysLinkToLastBuild:</span> <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"symbol\">keepAll:</span> <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"symbol\">reportDir:</span> <span class=\"string\">&quot;docs/build/html/&quot;</span>,</span><br><span class=\"line\">    <span class=\"symbol\">reportFiles:</span> <span class=\"string\">&#x27;index.html&#x27;</span>,</span><br><span class=\"line\">    <span class=\"symbol\">reportName:</span> <span class=\"string\">&quot;Documentation&quot;</span>,</span><br><span class=\"line\">    <span class=\"symbol\">useWrapperFileDirectly:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">])</span><br></pre></td></tr></table></figure>\n\n<p>However, some badges from Shields.io do not display properly within the published documentation.</p>\n<p><img src=\"/2025/06/show-badge-on-jenkins/issue.png\" alt=\"Can not display badge on Jenkins\"></p>\n<h1 id=\"How-to-fix-it\"><a href=\"#How-to-fix-it\" class=\"headerlink\" title=\"How to fix it\"></a>How to fix it</h1><p>âœ… Working Script to Update Jenkins CSP in Script Console</p>\n<p>Hereâ€™s the correct and minimal Groovy script you should run in Manage Jenkins â†’ Script Console:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">System.setProperty(</span><br><span class=\"line\">  <span class=\"string\">&quot;hudson.model.DirectoryBrowserSupport.CSP&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;default-src &#x27;self&#x27;; img-src * data:;&quot;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p>This allows images from any domain (img-src *), which includes Shields.io. If you want to restrict it more safely:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">System.setProperty(</span><br><span class=\"line\">  <span class=\"string\">&quot;hudson.model.DirectoryBrowserSupport.CSP&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;default-src &#x27;self&#x27;; img-src &#x27;self&#x27; https://img.shields.io data:;&quot;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ðŸŸ¡ Note: This change is temporary (in-memory only). It will reset if Jenkins restarts.</p>\n</blockquote>\n<p>âœ… To Make It Permanent</p>\n<ol>\n<li>Modify Jenkins startup arguments (depends on how you run Jenkins):</li>\n</ol>\n<p>If using <code>/etc/default/jenkins</code> (Debian&#x2F;Ubuntu):</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">JENKINS_JAVA_OPTIONS=<span class=\"string\">&quot;-Dhudson.model.DirectoryBrowserSupport.CSP=\\&quot;default-src &#x27;self&#x27;; img-src &#x27;self&#x27; https://img.shields.io data:;\\&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>If using systemd service unit (CentOS&#x2F;Red Hat-based or modern setups):</p>\n<p>Edit or override your jenkins.service file:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Environment=<span class=\"string\">&quot;JAVA_OPTS=-Dhudson.model.DirectoryBrowserSupport.CSP=default-src &#x27;self&#x27;; img-src &#x27;self&#x27; https://img.shields.io data:;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Then restart Jenkins:</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl restart jenkins</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Results\"><a href=\"#Results\" class=\"headerlink\" title=\"Results\"></a>Results</h2><p>The issue with Shields.io badges not displaying on Jenkins has now been resolved.</p>\n<p><img src=\"/2025/06/show-badge-on-jenkins/resolve.png\" alt=\"Can display badge on Jenkins\"></p>\n<hr>\n<p>Please credit the author and source when reposing this article. Commercial use is not permitted. Youâ€™re welcome to subscribe to my blog via RSS.</p>\n","more":"<p>This allows images from any domain (img-src *), which includes Shields.io. If you want to restrict it more safely:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">System.setProperty(</span><br><span class=\"line\">  <span class=\"string\">&quot;hudson.model.DirectoryBrowserSupport.CSP&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;default-src &#x27;self&#x27;; img-src &#x27;self&#x27; https://img.shields.io data:;&quot;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ðŸŸ¡ Note: This change is temporary (in-memory only). It will reset if Jenkins restarts.</p>\n</blockquote>\n<p>âœ… To Make It Permanent</p>\n<ol>\n<li>Modify Jenkins startup arguments (depends on how you run Jenkins):</li>\n</ol>\n<p>If using <code>/etc/default/jenkins</code> (Debian&#x2F;Ubuntu):</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">JENKINS_JAVA_OPTIONS=<span class=\"string\">&quot;-Dhudson.model.DirectoryBrowserSupport.CSP=\\&quot;default-src &#x27;self&#x27;; img-src &#x27;self&#x27; https://img.shields.io data:;\\&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>If using systemd service unit (CentOS&#x2F;Red Hat-based or modern setups):</p>\n<p>Edit or override your jenkins.service file:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Environment=<span class=\"string\">&quot;JAVA_OPTS=-Dhudson.model.DirectoryBrowserSupport.CSP=default-src &#x27;self&#x27;; img-src &#x27;self&#x27; https://img.shields.io data:;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Then restart Jenkins:</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl restart jenkins</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Results\"><a href=\"#Results\" class=\"headerlink\" title=\"Results\"></a>Results</h2><p>The issue with Shields.io badges not displaying on Jenkins has now been resolved.</p>\n<p><img src=\"/2025/06/show-badge-on-jenkins/resolve.png\" alt=\"Can display badge on Jenkins\"></p>\n<hr>\n<p>Please credit the author and source when reposing this article. Commercial use is not permitted. Youâ€™re welcome to subscribe to my blog via RSS.</p>","categories":[{"name":"Jenkins","path":"api/categories/Jenkins.json"}],"tags":[{"name":"Jenkins","path":"api/tags/Jenkins.json"}]}