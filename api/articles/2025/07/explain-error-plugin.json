{"title":"Jenkins 插件中心居然还没有 AI 插件？我写了一个！🤖","slug":"2025/07/explain-error-plugin","date":"2025-07-29T14:41:00.000Z","updated":"2025-08-03T18:49:10.976Z","comments":true,"path":"api/articles/2025/07/explain-error-plugin.json","excerpt":"正如标题所说，我最近上线了我的第一个 Jenkins 插件！🎉这个插件的主要功能，是让 Jenkins 构建过程中遇到的错误不再需要复制错误信息到 ChatGPT 等 AI 工具中进行分析，而是直接在 Jenkins 的构建日志中提供一个按钮，点击后可以自动将错误信息发送到 OpenAI 进行分析。你也可以在 pipeline 中添加 explainError() 步骤来对错误进行解释，从而帮助开发者更快地定位和解决问题。这是我在 Jenkins 社区的第一个插件项目。之前之所以没有尝试，是因为我认为很多功能完全可以通过 pipeline 脚本来实现，没必要单独开发插件。但随着 AI 的使用越来越普及，我发现 Jenkins 插件中心居然还没有类似的插件，于是决定自己动手实现这个功能。在 AI 的加持下，利用晚上时间断断续续地开发与测试，以及 Jenkins Hoster 多轮认真细致的 Code Review，终于在上周末提交到了 Jenkins 插件中心，正式上线。插件介绍Explain Error Plugin 是一个基于 OpenAI 的 Jenkins 插件，它可以自动解析构建失败的日志信息，并生成可读性强的错误解释，适用于流水线（Pipeline）和自由风格（Freestyle）等常见的 Jenkins 作业类型。🔍 一键分析控制台输出中的错误⚙️ 可在 Pipeline 中使用，只需一个简单的 explainError() 步骤💡 基于 OpenAI GPT 模型的 AI 智能解释🌐 提供两种 Web UI 展示 AI 生成的分析结果🎯 可定制：支持设置模型、API 地址、日志过滤器等配置插件亮点功能","covers":["/2025/07/explain-error-plugin/1.png","/2025/07/explain-error-plugin/2.png","/2025/07/explain-error-plugin/3.png"],"content":"<p>正如标题所说，我最近上线了我的第一个 Jenkins 插件！🎉</p>\n<p>这个插件的主要功能，是让 Jenkins 构建过程中遇到的错误不再需要复制错误信息到 ChatGPT 等 AI 工具中进行分析，而是<strong>直接在 Jenkins 的构建日志中提供一个按钮</strong>，点击后可以自动将错误信息发送到 OpenAI 进行分析。你也可以在 pipeline 中添加 <code>explainError()</code> 步骤来对错误进行解释，从而帮助开发者更快地定位和解决问题。</p>\n<p>这是我在 Jenkins 社区的第一个插件项目。之前之所以没有尝试，是因为我认为很多功能完全可以通过 pipeline 脚本来实现，没必要单独开发插件。</p>\n<p>但随着 AI 的使用越来越普及，我发现 Jenkins 插件中心居然还没有类似的插件，于是决定自己动手实现这个功能。在 AI 的加持下，利用晚上时间断断续续地开发与测试，以及 Jenkins Hoster 多轮认真细致的 Code Review，终于在上周末提交到了 Jenkins 插件中心，<strong>正式上线</strong>。</p>\n<h2 id=\"插件介绍\"><a href=\"#插件介绍\" class=\"headerlink\" title=\"插件介绍\"></a>插件介绍</h2><p><strong>Explain Error Plugin</strong> 是一个基于 OpenAI 的 Jenkins 插件，它可以自动解析构建失败的日志信息，并生成可读性强的错误解释，适用于流水线（Pipeline）和自由风格（Freestyle）等常见的 Jenkins 作业类型。</p>\n<ul>\n<li>🔍 一键分析控制台输出中的错误</li>\n<li>⚙️ 可在 Pipeline 中使用，只需一个简单的 <code>explainError()</code> 步骤</li>\n<li>💡 基于 OpenAI GPT 模型的 AI 智能解释</li>\n<li>🌐 提供两种 Web UI 展示 AI 生成的分析结果</li>\n<li>🎯 可定制：支持设置模型、API 地址、日志过滤器等配置</li>\n</ul>\n<h2 id=\"插件亮点功能\"><a href=\"#插件亮点功能\" class=\"headerlink\" title=\"插件亮点功能\"></a>插件亮点功能</h2><span id=\"more\"></span>\n\n<table>\n<thead>\n<tr>\n<th>功能</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>✅ 控制台一键分析</td>\n<td>控制台页面顶部新增 “Explain Error” 按钮</td>\n</tr>\n<tr>\n<td>✅ 流水线支持</td>\n<td>提供 <code>explainError()</code> 步骤，可自动在失败时触发</td>\n</tr>\n<tr>\n<td>✅ 支持模型配置</td>\n<td>自定义使用 GPT-3.5 或其他模型</td>\n</tr>\n<tr>\n<td>✅ 支持 Jenkins CasC</td>\n<td>支持配置即代码（Configuration as Code）</td>\n</tr>\n<tr>\n<td>✅ 日志筛选</td>\n<td>支持正则过滤日志，聚焦报错内容</td>\n</tr>\n</tbody></table>\n<h2 id=\"使用前提\"><a href=\"#使用前提\" class=\"headerlink\" title=\"使用前提\"></a>使用前提</h2><ul>\n<li>Jenkins 版本 ≥ <strong>2.479.3</strong></li>\n<li>Java 版本 ≥ <strong>17</strong></li>\n<li>拥有一个 <strong>OpenAI API Key</strong>（可在 <a href=\"https://platform.openai.com/account/api-keys\">OpenAI官网</a> 申请）</li>\n</ul>\n<h2 id=\"快速安装\"><a href=\"#快速安装\" class=\"headerlink\" title=\"快速安装\"></a>快速安装</h2><p>你可以通过 Jenkins 插件管理器安装：</p>\n<p>Manage Jenkins → Manage Plugins → Available → 搜索 “Explain Error Plugin”</p>\n<h2 id=\"插件配置\"><a href=\"#插件配置\" class=\"headerlink\" title=\"插件配置\"></a>插件配置</h2><p>安装后，在 <code>Manage Jenkins → Configure System</code> 页面下找到 <strong>Explain Error Plugin Configuration</strong>，配置你的 OpenAI API key 和模型即可：</p>\n<table>\n<thead>\n<tr>\n<th>设置项</th>\n<th>描述</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Enable Explanation</td>\n<td>是否启用 AI 解析功能</td>\n<td>✅ 启用</td>\n</tr>\n<tr>\n<td>API Key</td>\n<td>你的 OpenAI Key</td>\n<td>必填</td>\n</tr>\n<tr>\n<td>API URL</td>\n<td>OpenAI 接口地址</td>\n<td><code>https://api.openai.com/v1/chat/completions</code></td>\n</tr>\n<tr>\n<td>AI Model</td>\n<td>使用的模型</td>\n<td><code>gpt-3.5-turbo</code></td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/07/explain-error-plugin/1.png\" alt=\"Explain Error Plugin Configuration\"></p>\n<p>也可以通过 Jenkins Configuration as Code 管理这部分配置，例如：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">unclassified:</span></span><br><span class=\"line\">  <span class=\"attr\">explainError:</span></span><br><span class=\"line\">    <span class=\"attr\">enableExplanation:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">apiKey:</span> <span class=\"string\">&quot;$&#123;AI_API_KEY&#125;&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">apiUrl:</span> <span class=\"string\">&quot;https://api.openai.com/v1/chat/completions&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">model:</span> <span class=\"string\">&quot;gpt-3.5-turbo&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"如何使用\"><a href=\"#如何使用\" class=\"headerlink\" title=\"如何使用\"></a>如何使用</h2><h3 id=\"在流水线中使用\"><a href=\"#在流水线中使用\" class=\"headerlink\" title=\"在流水线中使用\"></a>在流水线中使用</h3><p>推荐在 <code>post &#123; failure &#123; ... &#125; &#125;</code> 语句中调用 <code>explainError()</code>，在构建失败时自动分析错误：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">post &#123;</span><br><span class=\"line\">  failure &#123;</span><br><span class=\"line\">    explainError()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>也支持设置日志长度和匹配关键词：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">explainError(</span><br><span class=\"line\">  <span class=\"symbol\">maxLines:</span> <span class=\"number\">500</span>,</span><br><span class=\"line\">  <span class=\"symbol\">logPattern:</span> <span class=\"string\">&#x27;(?i)(error|failed|exception)&#x27;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"在控制台中使用\"><a href=\"#在控制台中使用\" class=\"headerlink\" title=\"在控制台中使用\"></a>在控制台中使用</h3><p>适用于任意类型的 Jenkins 作业：</p>\n<ol>\n<li>打开失败构建的控制台输出页面</li>\n<li>点击顶部的 “Explain Error” 按钮</li>\n<li>AI 分析结果会展示在按钮下方</li>\n</ol>\n<h2 id=\"效果预览\"><a href=\"#效果预览\" class=\"headerlink\" title=\"效果预览\"></a>效果预览</h2><p>构建失败后，在作业页面会出现一个侧边栏入口，点击即可查看 AI 分析结果：</p>\n<p><img src=\"/2025/07/explain-error-plugin/2.png\" alt=\"Explain Error Plugin\"></p>\n<p>或者直接在控制台页面中点击“Explain Error”来查看分析内容：</p>\n<p><img src=\"/2025/07/explain-error-plugin/3.png\" alt=\"Explain Error Plugin Console\"></p>\n<h2 id=\"未来计划\"><a href=\"#未来计划\" class=\"headerlink\" title=\"未来计划\"></a>未来计划</h2><ul>\n<li><strong>错误缓存</strong>：同一个错误多次分析时避免重复调用 OpenAI，节省调用次数。（已经实现，等待合并）</li>\n<li><strong>多模型支持</strong>：支持其他 AI 平台，例如 Google Gemini、Claude、DeepSeek 等</li>\n</ul>\n<p>这些功能仍在开发、构思和完善中，也非常欢迎你的反馈和建议。</p>\n<h2 id=\"写在最后\"><a href=\"#写在最后\" class=\"headerlink\" title=\"写在最后\"></a>写在最后</h2><p>插件是完全开源的，欢迎试用和贡献代码！</p>\n<p>如果你在使用过程中遇到任何问题，或者有好的建议，欢迎在 GitHub 上提交 issue 或 pull request：</p>\n<p>GitHub 地址：<a href=\"https://github.com/jenkinsci/explain-error-plugin\">https://github.com/jenkinsci/explain-error-plugin</a></p>\n<p>如果你觉得这个插件对你有帮助，欢迎转发文章；也可以在 GitHub 上点个 Star ⭐ 支持一下！</p>\n<p><strong>这是对开源项目最直接的支持</strong> 🙌</p>\n<!--如果你觉得这篇文章对你有帮助，记得【点赞】【在看】支持一下我 🙌～-->\n\n<hr>\n<p>转载本站文章请注明作者和出处，请勿用于任何商业用途。欢迎关注公众号「DevOps攻城狮」</p>\n","more":"<table>\n<thead>\n<tr>\n<th>功能</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>✅ 控制台一键分析</td>\n<td>控制台页面顶部新增 “Explain Error” 按钮</td>\n</tr>\n<tr>\n<td>✅ 流水线支持</td>\n<td>提供 <code>explainError()</code> 步骤，可自动在失败时触发</td>\n</tr>\n<tr>\n<td>✅ 支持模型配置</td>\n<td>自定义使用 GPT-3.5 或其他模型</td>\n</tr>\n<tr>\n<td>✅ 支持 Jenkins CasC</td>\n<td>支持配置即代码（Configuration as Code）</td>\n</tr>\n<tr>\n<td>✅ 日志筛选</td>\n<td>支持正则过滤日志，聚焦报错内容</td>\n</tr>\n</tbody></table>\n<h2 id=\"使用前提\"><a href=\"#使用前提\" class=\"headerlink\" title=\"使用前提\"></a>使用前提</h2><ul>\n<li>Jenkins 版本 ≥ <strong>2.479.3</strong></li>\n<li>Java 版本 ≥ <strong>17</strong></li>\n<li>拥有一个 <strong>OpenAI API Key</strong>（可在 <a href=\"https://platform.openai.com/account/api-keys\">OpenAI官网</a> 申请）</li>\n</ul>\n<h2 id=\"快速安装\"><a href=\"#快速安装\" class=\"headerlink\" title=\"快速安装\"></a>快速安装</h2><p>你可以通过 Jenkins 插件管理器安装：</p>\n<p>Manage Jenkins → Manage Plugins → Available → 搜索 “Explain Error Plugin”</p>\n<h2 id=\"插件配置\"><a href=\"#插件配置\" class=\"headerlink\" title=\"插件配置\"></a>插件配置</h2><p>安装后，在 <code>Manage Jenkins → Configure System</code> 页面下找到 <strong>Explain Error Plugin Configuration</strong>，配置你的 OpenAI API key 和模型即可：</p>\n<table>\n<thead>\n<tr>\n<th>设置项</th>\n<th>描述</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Enable Explanation</td>\n<td>是否启用 AI 解析功能</td>\n<td>✅ 启用</td>\n</tr>\n<tr>\n<td>API Key</td>\n<td>你的 OpenAI Key</td>\n<td>必填</td>\n</tr>\n<tr>\n<td>API URL</td>\n<td>OpenAI 接口地址</td>\n<td><code>https://api.openai.com/v1/chat/completions</code></td>\n</tr>\n<tr>\n<td>AI Model</td>\n<td>使用的模型</td>\n<td><code>gpt-3.5-turbo</code></td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/07/explain-error-plugin/1.png\" alt=\"Explain Error Plugin Configuration\"></p>\n<p>也可以通过 Jenkins Configuration as Code 管理这部分配置，例如：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">unclassified:</span></span><br><span class=\"line\">  <span class=\"attr\">explainError:</span></span><br><span class=\"line\">    <span class=\"attr\">enableExplanation:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">apiKey:</span> <span class=\"string\">&quot;$&#123;AI_API_KEY&#125;&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">apiUrl:</span> <span class=\"string\">&quot;https://api.openai.com/v1/chat/completions&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">model:</span> <span class=\"string\">&quot;gpt-3.5-turbo&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"如何使用\"><a href=\"#如何使用\" class=\"headerlink\" title=\"如何使用\"></a>如何使用</h2><h3 id=\"在流水线中使用\"><a href=\"#在流水线中使用\" class=\"headerlink\" title=\"在流水线中使用\"></a>在流水线中使用</h3><p>推荐在 <code>post &#123; failure &#123; ... &#125; &#125;</code> 语句中调用 <code>explainError()</code>，在构建失败时自动分析错误：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">post &#123;</span><br><span class=\"line\">  failure &#123;</span><br><span class=\"line\">    explainError()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>也支持设置日志长度和匹配关键词：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">explainError(</span><br><span class=\"line\">  <span class=\"symbol\">maxLines:</span> <span class=\"number\">500</span>,</span><br><span class=\"line\">  <span class=\"symbol\">logPattern:</span> <span class=\"string\">&#x27;(?i)(error|failed|exception)&#x27;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"在控制台中使用\"><a href=\"#在控制台中使用\" class=\"headerlink\" title=\"在控制台中使用\"></a>在控制台中使用</h3><p>适用于任意类型的 Jenkins 作业：</p>\n<ol>\n<li>打开失败构建的控制台输出页面</li>\n<li>点击顶部的 “Explain Error” 按钮</li>\n<li>AI 分析结果会展示在按钮下方</li>\n</ol>\n<h2 id=\"效果预览\"><a href=\"#效果预览\" class=\"headerlink\" title=\"效果预览\"></a>效果预览</h2><p>构建失败后，在作业页面会出现一个侧边栏入口，点击即可查看 AI 分析结果：</p>\n<p><img src=\"/2025/07/explain-error-plugin/2.png\" alt=\"Explain Error Plugin\"></p>\n<p>或者直接在控制台页面中点击“Explain Error”来查看分析内容：</p>\n<p><img src=\"/2025/07/explain-error-plugin/3.png\" alt=\"Explain Error Plugin Console\"></p>\n<h2 id=\"未来计划\"><a href=\"#未来计划\" class=\"headerlink\" title=\"未来计划\"></a>未来计划</h2><ul>\n<li><strong>错误缓存</strong>：同一个错误多次分析时避免重复调用 OpenAI，节省调用次数。（已经实现，等待合并）</li>\n<li><strong>多模型支持</strong>：支持其他 AI 平台，例如 Google Gemini、Claude、DeepSeek 等</li>\n</ul>\n<p>这些功能仍在开发、构思和完善中，也非常欢迎你的反馈和建议。</p>\n<h2 id=\"写在最后\"><a href=\"#写在最后\" class=\"headerlink\" title=\"写在最后\"></a>写在最后</h2><p>插件是完全开源的，欢迎试用和贡献代码！</p>\n<p>如果你在使用过程中遇到任何问题，或者有好的建议，欢迎在 GitHub 上提交 issue 或 pull request：</p>\n<p>GitHub 地址：<a href=\"https://github.com/jenkinsci/explain-error-plugin\">https://github.com/jenkinsci/explain-error-plugin</a></p>\n<p>如果你觉得这个插件对你有帮助，欢迎转发文章；也可以在 GitHub 上点个 Star ⭐ 支持一下！</p>\n<p><strong>这是对开源项目最直接的支持</strong> 🙌</p>\n<!--如果你觉得这篇文章对你有帮助，记得【点赞】【在看】支持一下我 🙌～-->\n\n<hr>\n<p>转载本站文章请注明作者和出处，请勿用于任何商业用途。欢迎关注公众号「DevOps攻城狮」</p>","categories":[{"name":"Jenkins","path":"api/categories/Jenkins.json"}],"tags":[{"name":"Jenkins","path":"api/tags/Jenkins.json"},{"name":"AI","path":"api/tags/AI.json"}]}