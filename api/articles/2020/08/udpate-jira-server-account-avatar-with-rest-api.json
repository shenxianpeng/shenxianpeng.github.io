{"title":"Update Jira server account avatar with rest api","slug":"2020/08/udpate-jira-server-account-avatar-with-rest-api","date":"2020-08-17T06:17:10.000Z","updated":"2020-08-18T11:14:21.771Z","comments":true,"path":"api/articles/2020/08/udpate-jira-server-account-avatar-with-rest-api.json","excerpt":"BackgroudWhen you are using server account in CI/CD, if you want to updat the server account avatar to looks professional on Jira but you can’t login with server account to update the avatar. you could use Jira REST API to do this.I assume you have an account called robot. here are the examples of how to update.Example in Python1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>import http.client<br><br>conn = http.client.HTTPSConnection(\"jira.your-company.com\")<br><br>payload = \"&#123;\\r\\n\\t\\\"id\\\": \\\"24880\\\",\\r\\n\\t\\\"isSelected\\\": false,\\r\\n\\t\\\"isSystemAvatar\\\": true,\\r\\n\\t\\\"urls\\\": &#123;\\r\\n\\t\\t\\\"16x16\\\": \\\"https://jira.your-company.com/secure/useravatar?size=xsmall&amp;avatarId=24880\\\",\\r\\n\\t\\t\\\"24x24\\\": \\\"https://jira.your-company.com/secure/useravatar?size=small&amp;avatarId=24880\\\",\\r\\n\\t\\t\\\"32x32\\\": \\\"https://jira.your-company.com/secure/useravatar?size=medium&amp;avatarId=24880\\\",\\r\\n\\t\\t\\\"48x48\\\": \\\"https://jira.your-company.com/secure/useravatar?avatarId=24880\\\"&#125;\\r\\n&#125;\"<br><br>headers = &#123;<br>    'content-type': \"application/json\",<br>    'authorization': \"Basic Ymx3bXY6SzhNcnk5ZGI=\",<br>    'cache-control': \"no-cache\",<br>    'postman-token': \"ecfc3260-9c9f-e80c-e3e8-d413f48dfbf4\"<br>    &#125;<br><br>conn.request(\"PUT\", \"/rest/api/latest/user/avatar?username=robot\", payload, headers)<br><br>res = conn.getresponse()<br>data = res.read()<br><br>print(data.decode(\"utf-8\"))<br>Example in Postman","covers":["/2020/08/udpate-jira-server-account-avatar-with-rest-api/find-avatar-id.png"],"content":"<h2 id=\"Backgroud\"><a href=\"#Backgroud\" class=\"headerlink\" title=\"Backgroud\"></a>Backgroud</h2><p>When you are using server account in CI/CD, if you want to updat the server account avatar to looks professional on Jira but you can’t login with server account to update the avatar. you could use Jira REST API to do this.</p>\n<p>I assume you have an account called robot. here are the examples of how to update.</p>\n<h2 id=\"Example-in-Python\"><a href=\"#Example-in-Python\" class=\"headerlink\" title=\"Example in Python\"></a>Example in Python</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> http.client</span><br><span class=\"line\"></span><br><span class=\"line\">conn = http.client.HTTPSConnection(<span class=\"string\">\"jira.your-company.com\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">payload = <span class=\"string\">\"&#123;\\r\\n\\t\\\"id\\\": \\\"24880\\\",\\r\\n\\t\\\"isSelected\\\": false,\\r\\n\\t\\\"isSystemAvatar\\\": true,\\r\\n\\t\\\"urls\\\": &#123;\\r\\n\\t\\t\\\"16x16\\\": \\\"https://jira.your-company.com/secure/useravatar?size=xsmall&amp;avatarId=24880\\\",\\r\\n\\t\\t\\\"24x24\\\": \\\"https://jira.your-company.com/secure/useravatar?size=small&amp;avatarId=24880\\\",\\r\\n\\t\\t\\\"32x32\\\": \\\"https://jira.your-company.com/secure/useravatar?size=medium&amp;avatarId=24880\\\",\\r\\n\\t\\t\\\"48x48\\\": \\\"https://jira.your-company.com/secure/useravatar?avatarId=24880\\\"&#125;\\r\\n&#125;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">'content-type'</span>: <span class=\"string\">\"application/json\"</span>,</span><br><span class=\"line\">    <span class=\"string\">'authorization'</span>: <span class=\"string\">\"Basic Ymx3bXY6SzhNcnk5ZGI=\"</span>,</span><br><span class=\"line\">    <span class=\"string\">'cache-control'</span>: <span class=\"string\">\"no-cache\"</span>,</span><br><span class=\"line\">    <span class=\"string\">'postman-token'</span>: <span class=\"string\">\"ecfc3260-9c9f-e80c-e3e8-d413f48dfbf4\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">conn.request(<span class=\"string\">\"PUT\"</span>, <span class=\"string\">\"/rest/api/latest/user/avatar?username=robot\"</span>, payload, headers)</span><br><span class=\"line\"></span><br><span class=\"line\">res = conn.getresponse()</span><br><span class=\"line\">data = res.read()</span><br><span class=\"line\"></span><br><span class=\"line\">print(data.decode(<span class=\"string\">\"utf-8\"</span>))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Example-in-Postman\"><a href=\"#Example-in-Postman\" class=\"headerlink\" title=\"Example in Postman\"></a>Example in Postman</h2><a id=\"more\"></a>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Method PUT</span></span><br><span class=\"line\">https://jira.your-company.com/rest/api/latest/user/avatar?username=robot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># json</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">\"id\"</span>: <span class=\"string\">\"24880\"</span>,</span><br><span class=\"line\">\t<span class=\"string\">\"isSelected\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t<span class=\"string\">\"isSystemAvatar\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t<span class=\"string\">\"urls\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"string\">\"16x16\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?size=xsmall&amp;avatarId=24880\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"24x24\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?size=small&amp;avatarId=24880\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"32x32\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?size=medium&amp;avatarId=24880\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"48x48\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?avatarId=24880\"</span>&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"How-to-find-avator-id\"><a href=\"#How-to-find-avator-id\" class=\"headerlink\" title=\"How to find avator id\"></a>How to find avator id</h2><p>You replace other avator ids you like. Here is how to find you avator id you want <img src=\"/2020/08/udpate-jira-server-account-avatar-with-rest-api/find-avatar-id.png\" alt=\"find avator id\"></p>\n","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Method PUT</span></span><br><span class=\"line\">https://jira.your-company.com/rest/api/latest/user/avatar?username=robot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># json</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">\"id\"</span>: <span class=\"string\">\"24880\"</span>,</span><br><span class=\"line\">\t<span class=\"string\">\"isSelected\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t<span class=\"string\">\"isSystemAvatar\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t<span class=\"string\">\"urls\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"string\">\"16x16\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?size=xsmall&amp;avatarId=24880\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"24x24\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?size=small&amp;avatarId=24880\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"32x32\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?size=medium&amp;avatarId=24880\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"48x48\"</span>: <span class=\"string\">\"https://jira.your-company.com/secure/useravatar?avatarId=24880\"</span>&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"How-to-find-avator-id\"><a href=\"#How-to-find-avator-id\" class=\"headerlink\" title=\"How to find avator id\"></a>How to find avator id</h2><p>You replace other avator ids you like. Here is how to find you avator id you want <img src=\"/2020/08/udpate-jira-server-account-avatar-with-rest-api/find-avatar-id.png\" alt=\"find avator id\"></p>","categories":[{"name":"DevOps","path":"api/categories/DevOps.json"}],"tags":[{"name":"Jira","path":"api/tags/Jira.json"},{"name":"REST-API","path":"api/tags/REST-API.json"}]}