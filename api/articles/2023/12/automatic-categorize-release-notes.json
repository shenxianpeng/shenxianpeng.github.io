{"title":"如何把 GitHub Release Notes 按照 New features、Bug Fixes ... 进行自动分类","slug":"2023/12/automatic-categorize-release-notes","date":"2023-12-27T10:25:39.000Z","updated":"2024-11-13T19:38:01.086Z","comments":true,"path":"api/articles/2023/12/automatic-categorize-release-notes.json","excerpt":null,"covers":["/2023/12/automatic-categorize-release-notes/example-1.png","/2023/12/automatic-categorize-release-notes/example-2.png","/2023/12/automatic-categorize-release-notes/example-3.png"],"content":"<p>如果你使用过 GitHub 发布过项目，你会知道 GitHub 可以<a href=\"https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes#creating-automatically-generated-release-notes-for-a-new-release\">自动生成 Release Notes</a>。</p>\n<p>就像这样 GitHub 自动生成的 Release Notes。</p>\n<p><img src=\"/2023/12/automatic-categorize-release-notes/example-1.png\" alt=\"Example 1\"></p>\n<p>这个截图里的 Release Notes 内容很少，看起来还很清晰。但如果内容很多，以 Jenkinsci 组织下的 <a href=\"https://github.com/jenkinsci/configuration-as-code-plugin\">configuration-as-code-plugin</a> 项目为例，可以看出来这里的 Release Notes 中的内容是按照标题进行分类的，假如这些内容混在一起将会非常糟糕的体验。(不要误以为这是手动进行分类的，程序员才不愿意干这种事😅)</p>\n<p><img src=\"/2023/12/automatic-categorize-release-notes/example-2.png\" alt=\"Example 2\"></p>\n<p><strong>本文将分享针对需要对 GitHub Release Notes 的内容按照标题进行自动分类的两种方式。</strong></p>\n<h2 id=\"方式一：使用-GitHub-官方提供的功能\"><a href=\"#方式一：使用-GitHub-官方提供的功能\" class=\"headerlink\" title=\"方式一：使用 GitHub 官方提供的功能\"></a>方式一：使用 GitHub 官方提供的功能</h2><p>方式一是通过 GitHub 提供的功能对 Release Notes 进行自动分类，即在仓库下面创建配置文件 <code>.github/release.yml</code>。这个功能与 GitHub 的 Issue Template 和 Pull Request Template 类似。具体的配置选项可以参考<a href=\"https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes#configuration-options\">官方文档</a></p>\n<p>以下我是在 commit-check-action 项目的<a href=\"https://github.com/commit-check/commit-check-action/blob/main/.github/release.yml\">配置</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">changelog:</span></span><br><span class=\"line\">  <span class=\"attr\">exclude:</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ignore-for-release</span></span><br><span class=\"line\">  <span class=\"attr\">categories:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">&#x27;🔥 Breaking Changes&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;breaking&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🏕</span> <span class=\"string\">Features</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;enhancement&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">&#x27;🐛 Bug Fixes&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;bug&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">&#x27;👋 Deprecated&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;deprecation&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">📦</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">Other</span> <span class=\"string\">Changes</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>针对上面的示例，在添加了 <code>.github/release.yml</code> 配置文件之后，当再次生成 Release Notes 时就会自动将其内容进行自动归类（下图中的标题 📦 Dependencies 是自动添加的）</p>\n<p><img src=\"/2023/12/automatic-categorize-release-notes/example-3.png\" alt=\"Example 3\"></p>\n<h2 id=\"方式二：使用-Release-Drafter\"><a href=\"#方式二：使用-Release-Drafter\" class=\"headerlink\" title=\"方式二：使用 Release Drafter\"></a>方式二：使用 Release Drafter</h2><p>方式二是使用 <a href=\"https://github.com/release-drafter/release-drafter\">Release Drafter</a>，即在仓库创建配置文件 <code>.github/release-drafter.yml</code>。</p>\n<p>从 Release Drafter 项目提供的<a href=\"https://github.com/release-drafter/release-drafter?tab=readme-ov-file#configuration-options\">配置参数</a>可以看出来它提供的功能更多，使用也更加复杂。另外它还支持将配置文件放到组织下的中央仓库 <code>.github</code> 来实现统一的配置、并将其共享给其他仓库。</p>\n<blockquote>\n<p>目前方式一 <code>.github/release.yml</code> 不支持通过中央仓库 <code>.github</code> 来实现统一的配置，详见这个<a href=\"https://github.com/orgs/community/discussions/7926\">讨论</a>。</p>\n</blockquote>\n<p>这里还以 <a href=\"https://github.com/jenkinsci/configuration-as-code-plugin\">jenkinsci&#x2F;configuration-as-code-plugin</a> 为例看到它的 <code>.github/release-drafter.yml</code> 的配置。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">_extends:</span> <span class=\"string\">.github</span></span><br></pre></td></tr></table></figure>\n\n<p>这个配置的 <code>_extends: .github</code> 表示从中央仓库 <a href=\"https://github.com/jenkinsci/.github/blob/master/.github/release-drafter.yml\"><code>.github/.github/release-drafter.yml</code></a> 继承过来的配置。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Configuration for Release Drafter: https://github.com/toolmantim/release-drafter</span></span><br><span class=\"line\"><span class=\"attr\">name-template:</span> <span class=\"string\">$NEXT_MINOR_VERSION</span></span><br><span class=\"line\"><span class=\"attr\">tag-template:</span> <span class=\"string\">$NEXT_MINOR_VERSION</span></span><br><span class=\"line\"><span class=\"comment\"># Uses a more common 2-digit versioning in Jenkins plugins. Can be replaced by semver: $MAJOR.$MINOR.$PATCH</span></span><br><span class=\"line\"><span class=\"attr\">version-template:</span> <span class=\"string\">$MAJOR.$MINOR</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Emoji reference: https://gitmoji.carloscuesta.me/</span></span><br><span class=\"line\"><span class=\"comment\"># If adding categories, please also update: https://github.com/jenkins-infra/jenkins-maven-cd-action/blob/master/action.yaml#L16</span></span><br><span class=\"line\"><span class=\"attr\">categories:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">💥</span> <span class=\"string\">Breaking</span> <span class=\"string\">changes</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">breaking</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🚨</span> <span class=\"string\">Removed</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">removed</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🎉</span> <span class=\"string\">Major</span> <span class=\"string\">features</span> <span class=\"string\">and</span> <span class=\"string\">improvements</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">major-enhancement</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">major-rfe</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🐛</span> <span class=\"string\">Major</span> <span class=\"string\">bug</span> <span class=\"string\">fixes</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">major-bug</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">⚠️</span> <span class=\"string\">Deprecated</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">deprecated</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🚀</span> <span class=\"string\">New</span> <span class=\"string\">features</span> <span class=\"string\">and</span> <span class=\"string\">improvements</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">enhancement</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">feature</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">rfe</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🐛</span> <span class=\"string\">Bug</span> <span class=\"string\">fixes</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">bug</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">fix</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">bugfix</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">regression</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">regression-fix</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🌐</span> <span class=\"string\">Localization</span> <span class=\"string\">and</span> <span class=\"string\">translation</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">localization</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">👷</span> <span class=\"string\">Changes</span> <span class=\"string\">for</span> <span class=\"string\">plugin</span> <span class=\"string\">developers</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">developer</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">📝</span> <span class=\"string\">Documentation</span> <span class=\"string\">updates</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">documentation</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">👻</span> <span class=\"string\">Maintenance</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">chore</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">internal</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">maintenance</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🚦</span> <span class=\"string\">Tests</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">test</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">tests</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">✍</span> <span class=\"string\">Other</span> <span class=\"string\">changes</span></span><br><span class=\"line\">  <span class=\"comment\"># Default label used by Dependabot</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">📦</span> <span class=\"string\">Dependency</span> <span class=\"string\">updates</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">    <span class=\"attr\">collapse-after:</span> <span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"attr\">exclude-labels:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">reverted</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"literal\">no</span><span class=\"string\">-changelog</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">skip-changelog</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">invalid</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">  &lt;!-- Optional: add a release summary here --&gt;</span></span><br><span class=\"line\"><span class=\"string\">  $CHANGES</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">replacers:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*JENKINS-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[JENKINS-$1](https://issues.jenkins.io/browse/JENKINS-$1) - &#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*HELPDESK-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[HELPDESK-$1](https://github.com/jenkins-infra/helpdesk/issues/$1) - &#x27;</span></span><br><span class=\"line\">  <span class=\"comment\"># TODO(oleg_nenashev): Find a better way to reference issues</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*SECURITY-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[SECURITY-$1](https://jenkins.io/security/advisories/) - &#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*JEP-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[JEP-$1](https://github.com/jenkinsci/jep/tree/master/jep/$1) - &#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/CVE-(\\d&#123;4&#125;)-(\\d+)/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-$1-$2&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;JFR&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;Jenkinsfile Runner&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;CWP&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;Custom WAR Packager&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;@dependabot-preview&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;@dependabot&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">autolabeler:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">label:</span> <span class=\"string\">&#x27;documentation&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;*.md&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/docs&#123;0,1&#125;\\/.+/&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">label:</span> <span class=\"string\">&#x27;bug&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/fix\\/.+/&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">title:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/fix/i&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">label:</span> <span class=\"string\">&#x27;enhancement&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/feature\\/.+/&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">body:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/JENKINS-[0-9]&#123;1,4&#125;/&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>以上是中央仓库的 <code>.github/.github/release-drafter.yml</code> 配置，可以看到 Jenkins 官方使用了很多特性，比如模板、替换、自动加 label 等，需要在通读 <a href=\"https://github.com/release-drafter/release-drafter?tab=readme-ov-file#configuration-options\">Release Drafter 的文档</a>之后能更好的理解和使用。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>以上两种方式都可以帮助你在自动生成 Release Notes 的时候自动进行标题分类，但两者有一些如下差别，了解它们可以帮助你更好的进行选择。</p>\n<ol>\n<li>GitHub 官方提供的方式更容易理解和配置，可以满足绝大多数的项目需求。主要的不足是不支持从中央仓库 <code>.github</code> 中读取 <code>.github/release.yml</code>。</li>\n<li>Release Drafter 提供了更为强大的功能，比如模板、排序、替换、自动对 pull request 加 label 等等，尤其是可以通过中央仓库来设置一个模板，其他项目来继承其配置。</li>\n</ol>\n<p>如果是大型的开源组织，Release Drafter 是更好的选择，因为它提供了强大的功能以及支持继承中央仓库配置。如果是个人项目，GitHub 官方提供的方式基本满足需求。</p>\n<p>以上就是我对两个生成 GitHub Release Notes 并进行自动分类的分享。</p>\n<p>如果有任何疑问或建议欢迎在评论区留言。</p>\n<hr>\n<p>转载本站文章请注明作者和出处，请勿用于任何商业用途。欢迎关注公众号「DevOps攻城狮」</p>\n","more":"<p>如果你使用过 GitHub 发布过项目，你会知道 GitHub 可以<a href=\"https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes#creating-automatically-generated-release-notes-for-a-new-release\">自动生成 Release Notes</a>。</p>\n<p>就像这样 GitHub 自动生成的 Release Notes。</p>\n<p><img src=\"/2023/12/automatic-categorize-release-notes/example-1.png\" alt=\"Example 1\"></p>\n<p>这个截图里的 Release Notes 内容很少，看起来还很清晰。但如果内容很多，以 Jenkinsci 组织下的 <a href=\"https://github.com/jenkinsci/configuration-as-code-plugin\">configuration-as-code-plugin</a> 项目为例，可以看出来这里的 Release Notes 中的内容是按照标题进行分类的，假如这些内容混在一起将会非常糟糕的体验。(不要误以为这是手动进行分类的，程序员才不愿意干这种事😅)</p>\n<p><img src=\"/2023/12/automatic-categorize-release-notes/example-2.png\" alt=\"Example 2\"></p>\n<p><strong>本文将分享针对需要对 GitHub Release Notes 的内容按照标题进行自动分类的两种方式。</strong></p>\n<h2 id=\"方式一：使用-GitHub-官方提供的功能\"><a href=\"#方式一：使用-GitHub-官方提供的功能\" class=\"headerlink\" title=\"方式一：使用 GitHub 官方提供的功能\"></a>方式一：使用 GitHub 官方提供的功能</h2><p>方式一是通过 GitHub 提供的功能对 Release Notes 进行自动分类，即在仓库下面创建配置文件 <code>.github/release.yml</code>。这个功能与 GitHub 的 Issue Template 和 Pull Request Template 类似。具体的配置选项可以参考<a href=\"https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes#configuration-options\">官方文档</a></p>\n<p>以下我是在 commit-check-action 项目的<a href=\"https://github.com/commit-check/commit-check-action/blob/main/.github/release.yml\">配置</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">changelog:</span></span><br><span class=\"line\">  <span class=\"attr\">exclude:</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ignore-for-release</span></span><br><span class=\"line\">  <span class=\"attr\">categories:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">&#x27;🔥 Breaking Changes&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;breaking&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🏕</span> <span class=\"string\">Features</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;enhancement&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">&#x27;🐛 Bug Fixes&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;bug&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">&#x27;👋 Deprecated&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;deprecation&#x27;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">📦</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">Other</span> <span class=\"string\">Changes</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>针对上面的示例，在添加了 <code>.github/release.yml</code> 配置文件之后，当再次生成 Release Notes 时就会自动将其内容进行自动归类（下图中的标题 📦 Dependencies 是自动添加的）</p>\n<p><img src=\"/2023/12/automatic-categorize-release-notes/example-3.png\" alt=\"Example 3\"></p>\n<h2 id=\"方式二：使用-Release-Drafter\"><a href=\"#方式二：使用-Release-Drafter\" class=\"headerlink\" title=\"方式二：使用 Release Drafter\"></a>方式二：使用 Release Drafter</h2><p>方式二是使用 <a href=\"https://github.com/release-drafter/release-drafter\">Release Drafter</a>，即在仓库创建配置文件 <code>.github/release-drafter.yml</code>。</p>\n<p>从 Release Drafter 项目提供的<a href=\"https://github.com/release-drafter/release-drafter?tab=readme-ov-file#configuration-options\">配置参数</a>可以看出来它提供的功能更多，使用也更加复杂。另外它还支持将配置文件放到组织下的中央仓库 <code>.github</code> 来实现统一的配置、并将其共享给其他仓库。</p>\n<blockquote>\n<p>目前方式一 <code>.github/release.yml</code> 不支持通过中央仓库 <code>.github</code> 来实现统一的配置，详见这个<a href=\"https://github.com/orgs/community/discussions/7926\">讨论</a>。</p>\n</blockquote>\n<p>这里还以 <a href=\"https://github.com/jenkinsci/configuration-as-code-plugin\">jenkinsci&#x2F;configuration-as-code-plugin</a> 为例看到它的 <code>.github/release-drafter.yml</code> 的配置。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">_extends:</span> <span class=\"string\">.github</span></span><br></pre></td></tr></table></figure>\n\n<p>这个配置的 <code>_extends: .github</code> 表示从中央仓库 <a href=\"https://github.com/jenkinsci/.github/blob/master/.github/release-drafter.yml\"><code>.github/.github/release-drafter.yml</code></a> 继承过来的配置。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Configuration for Release Drafter: https://github.com/toolmantim/release-drafter</span></span><br><span class=\"line\"><span class=\"attr\">name-template:</span> <span class=\"string\">$NEXT_MINOR_VERSION</span></span><br><span class=\"line\"><span class=\"attr\">tag-template:</span> <span class=\"string\">$NEXT_MINOR_VERSION</span></span><br><span class=\"line\"><span class=\"comment\"># Uses a more common 2-digit versioning in Jenkins plugins. Can be replaced by semver: $MAJOR.$MINOR.$PATCH</span></span><br><span class=\"line\"><span class=\"attr\">version-template:</span> <span class=\"string\">$MAJOR.$MINOR</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Emoji reference: https://gitmoji.carloscuesta.me/</span></span><br><span class=\"line\"><span class=\"comment\"># If adding categories, please also update: https://github.com/jenkins-infra/jenkins-maven-cd-action/blob/master/action.yaml#L16</span></span><br><span class=\"line\"><span class=\"attr\">categories:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">💥</span> <span class=\"string\">Breaking</span> <span class=\"string\">changes</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">breaking</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🚨</span> <span class=\"string\">Removed</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">removed</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🎉</span> <span class=\"string\">Major</span> <span class=\"string\">features</span> <span class=\"string\">and</span> <span class=\"string\">improvements</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">major-enhancement</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">major-rfe</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🐛</span> <span class=\"string\">Major</span> <span class=\"string\">bug</span> <span class=\"string\">fixes</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">major-bug</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">⚠️</span> <span class=\"string\">Deprecated</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">deprecated</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🚀</span> <span class=\"string\">New</span> <span class=\"string\">features</span> <span class=\"string\">and</span> <span class=\"string\">improvements</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">enhancement</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">feature</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">rfe</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🐛</span> <span class=\"string\">Bug</span> <span class=\"string\">fixes</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">bug</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">fix</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">bugfix</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">regression</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">regression-fix</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🌐</span> <span class=\"string\">Localization</span> <span class=\"string\">and</span> <span class=\"string\">translation</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">localization</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">👷</span> <span class=\"string\">Changes</span> <span class=\"string\">for</span> <span class=\"string\">plugin</span> <span class=\"string\">developers</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">developer</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">📝</span> <span class=\"string\">Documentation</span> <span class=\"string\">updates</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">documentation</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">👻</span> <span class=\"string\">Maintenance</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">chore</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">internal</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">maintenance</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">🚦</span> <span class=\"string\">Tests</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">test</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">tests</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">✍</span> <span class=\"string\">Other</span> <span class=\"string\">changes</span></span><br><span class=\"line\">  <span class=\"comment\"># Default label used by Dependabot</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">title:</span> <span class=\"string\">📦</span> <span class=\"string\">Dependency</span> <span class=\"string\">updates</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">    <span class=\"attr\">collapse-after:</span> <span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"attr\">exclude-labels:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">reverted</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"literal\">no</span><span class=\"string\">-changelog</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">skip-changelog</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">invalid</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">  &lt;!-- Optional: add a release summary here --&gt;</span></span><br><span class=\"line\"><span class=\"string\">  $CHANGES</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">replacers:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*JENKINS-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[JENKINS-$1](https://issues.jenkins.io/browse/JENKINS-$1) - &#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*HELPDESK-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[HELPDESK-$1](https://github.com/jenkins-infra/helpdesk/issues/$1) - &#x27;</span></span><br><span class=\"line\">  <span class=\"comment\"># TODO(oleg_nenashev): Find a better way to reference issues</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*SECURITY-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[SECURITY-$1](https://jenkins.io/security/advisories/) - &#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/\\[*JEP-(\\d+)\\]*\\s*-*\\s*/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;[JEP-$1](https://github.com/jenkinsci/jep/tree/master/jep/$1) - &#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;/CVE-(\\d&#123;4&#125;)-(\\d+)/g&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-$1-$2&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;JFR&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;Jenkinsfile Runner&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;CWP&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;Custom WAR Packager&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">search:</span> <span class=\"string\">&#x27;@dependabot-preview&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">replace:</span> <span class=\"string\">&#x27;@dependabot&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">autolabeler:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">label:</span> <span class=\"string\">&#x27;documentation&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">files:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;*.md&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/docs&#123;0,1&#125;\\/.+/&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">label:</span> <span class=\"string\">&#x27;bug&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/fix\\/.+/&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">title:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/fix/i&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">label:</span> <span class=\"string\">&#x27;enhancement&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/feature\\/.+/&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">body:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/JENKINS-[0-9]&#123;1,4&#125;/&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>以上是中央仓库的 <code>.github/.github/release-drafter.yml</code> 配置，可以看到 Jenkins 官方使用了很多特性，比如模板、替换、自动加 label 等，需要在通读 <a href=\"https://github.com/release-drafter/release-drafter?tab=readme-ov-file#configuration-options\">Release Drafter 的文档</a>之后能更好的理解和使用。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>以上两种方式都可以帮助你在自动生成 Release Notes 的时候自动进行标题分类，但两者有一些如下差别，了解它们可以帮助你更好的进行选择。</p>\n<ol>\n<li>GitHub 官方提供的方式更容易理解和配置，可以满足绝大多数的项目需求。主要的不足是不支持从中央仓库 <code>.github</code> 中读取 <code>.github/release.yml</code>。</li>\n<li>Release Drafter 提供了更为强大的功能，比如模板、排序、替换、自动对 pull request 加 label 等等，尤其是可以通过中央仓库来设置一个模板，其他项目来继承其配置。</li>\n</ol>\n<p>如果是大型的开源组织，Release Drafter 是更好的选择，因为它提供了强大的功能以及支持继承中央仓库配置。如果是个人项目，GitHub 官方提供的方式基本满足需求。</p>\n<p>以上就是我对两个生成 GitHub Release Notes 并进行自动分类的分享。</p>\n<p>如果有任何疑问或建议欢迎在评论区留言。</p>\n<hr>\n<p>转载本站文章请注明作者和出处，请勿用于任何商业用途。欢迎关注公众号「DevOps攻城狮」</p>\n","categories":[{"name":"DevOps","path":"api/categories/DevOps.json"}],"tags":[{"name":"DevOps","path":"api/tags/DevOps.json"},{"name":"GitHub","path":"api/tags/GitHub.json"}]}