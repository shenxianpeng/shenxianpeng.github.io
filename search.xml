<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>How to adopt Supply Chain Security for GitHub and Non-GitHub projects</title>
      <link href="/2023/12/supply-chain-security/"/>
      <url>/2023/12/supply-chain-security/</url>
      
        <content type="html"><![CDATA[<h2 id="Why-Software-Supply-Chain-Security-is-important"><a href="#Why-Software-Supply-Chain-Security-is-important" class="headerlink" title="Why Software Supply Chain Security is important?"></a>Why Software Supply Chain Security is important?</h2><p>Software supply chain security is the act of securing the components, activities, and practices involved in creating software.</p><p>Attacks in the software supply chain have become more and more frequent in recent years, SonaType reported more than 700% of attacks in open-source software from 2019 to 2022.</p><p><img src="/2023/12/supply-chain-security/sonatype.png" alt="SonaType reported"> </p><p>In this <a href="https://security.googleblog.com/2021/06/introducing-slsa-end-to-end-framework.html">Google Security Blog</a>, there are many real examples of software supply chain attacks that pose growing threats to users and Google proposed a solution called SLSA in 2021.</p><p>Also, some well-known organizations such as Linux Foundation and CNCF have created standards and tools to address the issue of how to produce trusted software and attestations.</p><p><img src="/2023/12/supply-chain-security/lf-cncf.png" alt="LF &amp; CNCF"></p><p>Based on this background, many organizations want to incorporate best practices from the open-source community into our CICD pipeline. </p><h2 id="How-to-adopt-Supply-Chain-Security-for-GitHub-and-Non-GitHub-projects"><a href="#How-to-adopt-Supply-Chain-Security-for-GitHub-and-Non-GitHub-projects" class="headerlink" title="How to adopt Supply Chain Security for GitHub and Non-GitHub projects"></a>How to adopt Supply Chain Security for GitHub and Non-GitHub projects</h2><p>Next, I will show you how to adopt on both GitHub and Rocket Bitbucket as an example to show you how we integrate software supply chain security</p><h3 id="GitHub-projects"><a href="#GitHub-projects" class="headerlink" title="GitHub projects"></a>GitHub projects</h3><p>On GitHub, the easiest and most popular option is to use slsa-github-generator, a tool provided by the official slsa-framework for native GitHub projects to create attestations during the build process and upload signed attestations to Rekor a transparency log system created by Sigstore. Here is the <a href="https://github.com/shenxianpeng/slsa-provenance-demo">demo reposistory</a> for reference.</p><p>Before installing your product package, the user can download the package and verify the provenance file at the end of .intoto.jsonl first, then run the following command manually or in their CI pipeline to verify whether the artifact is tampered with or not</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bash-4.4$ slsa-verifier verify-artifact test-1.0.0-py3-none-any.whl --provenance-path test-1.0.0-py3-none-any.whl.intoto.jsonl --source-uri github.com/shenxianpeng/slsa-provenance-demo</span><br><span class="line">Verified signature against tlog entry index 49728014 at URL: https://rekor.sigstore.dev/api/v1/log/entries/24296fb24b8ad77af7063689e8760fd7134f37e17251ec1d5adc16af64cb5cb579493278f7686e77</span><br><span class="line">Verified build using builder &quot;https://github.com/slsa-framework/slsa-github-generator/.github/workflows/generator_generic_slsa3.yml@refs/tags/v1.9.0&quot; at commit fb7f6df9f8565ed6fa01591df2af0c41e5573798</span><br><span class="line">Verifying artifact test-1.0.0-py3-none-any.whl: PASSED</span><br><span class="line"></span><br><span class="line">PASSED: Verified SLSA provenance</span><br></pre></td></tr></table></figure><h3 id="Non-GitHub-projects"><a href="#Non-GitHub-projects" class="headerlink" title="Non-GitHub projects"></a>Non-GitHub projects</h3><p>However, there are many organizationsâ€™ codes are hosted on Non-GitHub SCM, so you can use the Witness, a tool from CNCF in-toto, which can help us generate and verify attestations. </p><p>Itâ€™s easy to scale Witness to your products, just integrate witness command into the existing build command it will generate proof of the software build and release execution process and can be verified. </p><p>You can follow <a href="https://github.com/shenxianpeng/witness-demo">this demo to integrate with witness</a>, then will generate the build package along with attestations file, policy-signed.json file, and a public key.</p><p>Before user installing your product package, they can run the following command manually or in their CI pipeline to verify whether the artifact is tampered or not.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">witness verify -f dist/witness_demo-1.0.0-py3-none-any.whl -a witness-demo-att.json -p policy-signed.json -k witness-demo-pub.pem </span><br><span class="line">INFO    Using config file: .witness.yaml             </span><br><span class="line">INFO    Verification succeeded                       </span><br><span class="line">INFO    Evidence:                                    </span><br><span class="line">INFO    0: witness-demo-att.json </span><br></pre></td></tr></table></figure><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> DevSecOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SLSA </tag>
            
            <tag> Witness </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Witness å’Œ SLSA ğŸ’ƒ</title>
      <link href="/2023/11/witness-and-slsa/"/>
      <url>/2023/11/witness-and-slsa/</url>
      
        <content type="html"><![CDATA[<p>Witness æ˜¯ä¸€ä¸ªå¯æ’æ‹”çš„è½¯ä»¶ä¾›åº”é“¾é£é™©ç®¡ç†æ¡†æ¶ï¼Œå®ƒèƒ½è‡ªåŠ¨ã€è§„èŒƒå’ŒéªŒè¯è½¯ä»¶å·¥ä»¶å‡ºå¤„ã€‚</p><p>å®ƒæ˜¯ in-toto æ˜¯ <a href="https://www.cncf.io/projects/in-toto/">CNCF</a> ä¸‹çš„é¡¹ç›®ä¹‹ä¸€ã€‚å®ƒçš„æœ€åˆä½œè€…æ˜¯ Testifysecï¼Œåæ¥æèµ ç»™äº† <a href="https://in-toto.io/">in-toto</a>ã€‚å› æ­¤ä½ ä¼šå‘ç° Witness çš„ç›¸å…³ä»£ç åŒæ—¶å­˜åœ¨äº in-toto å’Œ Testifysecã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Witness"><a href="#ä»€ä¹ˆæ˜¯-Witness" class="headerlink" title="ä»€ä¹ˆæ˜¯ Witness"></a>ä»€ä¹ˆæ˜¯ Witness</h2><p>Witness æ˜¯ä¸€ä¸ªå¯æ’æ‹”çš„ä¾›åº”é“¾å®‰å…¨æ¡†æ¶ï¼Œå¯åˆ›å»ºæ•´ä¸ªè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸï¼ˆSDLCï¼‰çš„è¯æ®ï¼ˆProvenanceï¼‰è·Ÿè¸ªï¼Œç¡®ä¿è½¯ä»¶ä»æºä»£ç åˆ°ç›®æ ‡çš„å®Œæ•´æ€§ã€‚å®ƒæ”¯æŒå¤§å¤šæ•°ä¸»è¦çš„ CI å’ŒåŸºç¡€æ¶æ„æä¾›å•†ï¼Œå¹¶ä½¿ç”¨å®‰å…¨çš„ PKI åˆ†å‘ç³»ç»Ÿæ¥å¢å¼ºå®‰å…¨æ€§ï¼Œå‡å°‘è½¯ä»¶ä¾›åº”é“¾æ”»å‡»å‘é‡ã€‚</p><p>Witness çš„å·¥ä½œåŸç†æ˜¯å°è£…åœ¨æŒç»­é›†æˆæµç¨‹ä¸­æ‰§è¡Œçš„å‘½ä»¤ï¼Œä¸ºè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸï¼ˆSDLCï¼‰ä¸­çš„æ¯ä¸ªæ“ä½œæä¾›è¯æ®è·Ÿè¸ªã€‚è¿™æ ·å°±å¯ä»¥è¯¦ç»†ã€å¯éªŒè¯åœ°è®°å½•è½¯ä»¶æ˜¯å¦‚ä½•æ„å»ºçš„ã€ç”±è°æ„å»ºä»¥åŠä½¿ç”¨äº†å“ªäº›å·¥å…·ã€‚</p><p>è¿™äº›è¯æ®å¯ç”¨äºè¯„ä¼°æ”¿ç­–åˆè§„æ€§ï¼Œæ£€æµ‹ä»»ä½•æ½œåœ¨çš„ç¯¡æ”¹æˆ–æ¶æ„æ´»åŠ¨ï¼Œå¹¶ç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·æˆ–æœºå™¨æ‰èƒ½å®Œæˆæµç¨‹ä¸­çš„æŸä¸€æ­¥éª¤ã€‚</p><p>æ­¤å¤–ï¼ŒWitness çš„è¯æ˜ç³»ç»Ÿæ˜¯å¯æ’æ‹”çš„ï¼Œå¯æ”¯æŒå¤§å¤šæ•°ä¸»è¦çš„ CI å’ŒåŸºç¡€è®¾æ–½æä¾›å•†ï¼Œæ˜¯ç¡®ä¿è½¯ä»¶ä¾›åº”é“¾å®‰å…¨çš„å¤šåŠŸèƒ½ã€çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚å®‰å…¨ PKI (Public Key Infrastructure) åˆ†å‘ç³»ç»Ÿçš„ä½¿ç”¨å’ŒéªŒè¯ Witness å…ƒæ•°æ®çš„èƒ½åŠ›è¿›ä¸€æ­¥å¢å¼ºäº†æµç¨‹çš„å®‰å…¨æ€§ï¼Œå¹¶æœ‰åŠ©äºå‡å°‘è®¸å¤šè½¯ä»¶ä¾›åº”é“¾æ”»å‡»å‘é‡ã€‚</p><p>æ³¨ï¼šéªŒè¯å™¨ä»£ç å·²è¢«æ‹†åˆ†ä¸º <a href="https://github.com/in-toto/go-witness">https://github.com/in-toto/go-witness</a></p><p>æ€»ç»“ - Witness å¯ä»¥åšä»€ä¹ˆ</p><ul><li>éªŒè¯è½¯ä»¶ç”±è°æ„å»ºã€å¦‚ä½•æ„å»ºä»¥åŠä½¿ç”¨äº†å“ªäº›å·¥å…·</li><li>æ£€æµ‹ä»»ä½•æ½œåœ¨çš„ç¯¡æ”¹æˆ–æ¶æ„æ´»åŠ¨</li><li>ç¡®ä¿åªæœ‰ç»æˆæƒçš„ç”¨æˆ·æˆ–æœºå™¨æ‰èƒ½å®Œæˆæµç¨‹çš„æ¯ä¸€æ­¥</li><li>åˆ†å‘è¯æ˜ï¼ˆattestationsï¼‰å’Œç­–ç•¥ï¼ˆpolicyï¼‰</li></ul><h2 id="å¦‚ä½•ä½¿ç”¨-Witness"><a href="#å¦‚ä½•ä½¿ç”¨-Witness" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ Witness"></a>å¦‚ä½•ä½¿ç”¨ Witness</h2><p>ä¸»è¦åˆ†ä¸‰æ­¥ï¼š</p><ol><li><code>witness run</code> - è¿è¡Œæä¾›çš„å‘½ä»¤å¹¶è®°å½•æœ‰å…³æ‰§è¡Œçš„è¯æ˜ã€‚</li><li><code>witness sign</code> - ä½¿ç”¨æä¾›çš„å¯†é’¥ç­¾ç½²æä¾›çš„æ–‡ä»¶ã€‚</li><li><code>witness verify</code> - éªŒè¯ witness ç­–ç•¥ã€‚</li></ol><h3 id="å¿«é€Ÿå¼€å§‹"><a href="#å¿«é€Ÿå¼€å§‹" class="headerlink" title="å¿«é€Ÿå¼€å§‹"></a>å¿«é€Ÿå¼€å§‹</h3><p>è¿™æ˜¯æˆ‘åˆ›å»ºçš„ <a href="https://github.com/shenxianpeng/witness-demo">demo ä»“åº“</a>ç”¨äºæ¼”ç¤º witness çš„å·¥ä½œæµç¨‹ï¼Œå…·ä½“å¯ä»¥æ ¹æ®å¦‚ä¸‹æ­¥éª¤è¿›è¡Œã€‚</p><span id="more"></span><h4 id="å‡†å¤‡ç¯å¢ƒ"><a href="#å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡ç¯å¢ƒ"></a>å‡†å¤‡ç¯å¢ƒ</h4><p>ä¸‹è½½ demo é¡¹ç›®å¹¶å‡†å¤‡ witnesss å¯æ‰§è¡Œæ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/shenxianpeng/witness-demo.git</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -s https://raw.githubusercontent.com/in-toto/witness/main/install-witness.sh)</span><br><span class="line">Latest version of Witness is 0.1.14</span><br><span class="line">Downloading <span class="keyword">for</span> linux amd64 from https://github.com/in-toto/witness/releases/download/v0.1.14/witness_0.1.14_linux_amd64.tar.gz</span><br><span class="line">expected checksum: f9b67ca04cb391cd854aec3397eb904392ff689dcd3c38305d38c444781a5a67</span><br><span class="line">file checksum:     f9b67ca04cb391cd854aec3397eb904392ff689dcd3c38305d38c444781a5a67</span><br><span class="line">witness v0.1.14-aa35c1f</span><br><span class="line">Witness v0.1.14 has been installed at /usr/local/bin/witness</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»º-Key"><a href="#åˆ›å»º-Key" class="headerlink" title="åˆ›å»º Key"></a>åˆ›å»º Key</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl genpkey -algorithm ed25519 -outform PEM -out witness-demo-key.pem</span><br><span class="line">openssl pkey -<span class="keyword">in</span> witness-demo-key.pem -pubout &gt; witness-demo-pub.pem</span><br></pre></td></tr></table></figure><h3 id="å‡†å¤‡-Witness-é…ç½®æ–‡ä»¶-witness-yaml"><a href="#å‡†å¤‡-Witness-é…ç½®æ–‡ä»¶-witness-yaml" class="headerlink" title="å‡†å¤‡ Witness é…ç½®æ–‡ä»¶ .witness.yaml"></a>å‡†å¤‡ Witness é…ç½®æ–‡ä»¶ <code>.witness.yaml</code></h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">run:</span></span><br><span class="line">    <span class="attr">signer-file-key-path:</span> <span class="string">witness-demo-key.pem</span></span><br><span class="line">    <span class="attr">trace:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">verify:</span></span><br><span class="line">    <span class="attr">attestations:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;witness-demo-att.json&quot;</span></span><br><span class="line">    <span class="attr">policy:</span> <span class="string">policy-signed.json</span></span><br><span class="line">    <span class="attr">publickey:</span> <span class="string">witness-demo-pub.pem</span></span><br></pre></td></tr></table></figure><h3 id="å°†æ„å»ºæ­¥éª¤è¿›å…¥åˆ°è¯è¯ï¼ˆattestationï¼‰ä¸­"><a href="#å°†æ„å»ºæ­¥éª¤è¿›å…¥åˆ°è¯è¯ï¼ˆattestationï¼‰ä¸­" class="headerlink" title="å°†æ„å»ºæ­¥éª¤è¿›å…¥åˆ°è¯è¯ï¼ˆattestationï¼‰ä¸­"></a>å°†æ„å»ºæ­¥éª¤è¿›å…¥åˆ°è¯è¯ï¼ˆattestationï¼‰ä¸­</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">witness run --step build -o witness-demo-att.json -- python3 -m pip wheel --no-deps -w dist .</span><br><span class="line">INFO    Using config file: .witness.yaml</span><br><span class="line">INFO    Starting environment attestor...</span><br><span class="line">INFO    Starting git attestor...</span><br><span class="line">INFO    Starting material attestor...</span><br><span class="line">INFO    Starting command-run attestor...</span><br><span class="line">Processing /tmp/witness-demo</span><br><span class="line">Building wheels for collected packages: witness-demo</span><br><span class="line">  Running setup.py bdist_wheel for witness-demo: started</span><br><span class="line">  Running setup.py bdist_wheel for witness-demo: finished with status &#x27;done&#x27;</span><br><span class="line">  Stored in directory: /tmp/witness-demo/dist</span><br><span class="line">Successfully built witness-demo</span><br><span class="line">INFO    Starting product attestor...</span><br></pre></td></tr></table></figure><p>å³åœ¨ä¹‹å‰çš„ build command ä¸­åŠ å…¥ <code>witness run</code> çš„ç›¸å…³å‘½ä»¤ã€‚</p><h4 id="æŸ¥çœ‹å·²ç­¾åçš„-attestation-çš„éªŒè¯æ•°æ®"><a href="#æŸ¥çœ‹å·²ç­¾åçš„-attestation-çš„éªŒè¯æ•°æ®" class="headerlink" title="æŸ¥çœ‹å·²ç­¾åçš„ attestation çš„éªŒè¯æ•°æ®"></a>æŸ¥çœ‹å·²ç­¾åçš„ attestation çš„éªŒè¯æ•°æ®</h4><p>å› ä¸º attestation æ•°æ®æ˜¯è¿›è¡Œçš„ base64 ç¼–ç ï¼Œå› æ­¤éœ€è¦è§£ç è¿›è¡ŒæŸ¥çœ‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> witness-demo-att.json | jq -r .payload | <span class="built_in">base64</span> -d | jq</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯éƒ¨åˆ†è¾“å‡º</span></span><br><span class="line"> &#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;https://witness.dev/attestations/command-run/v0.1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;attestation&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;cmd&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;python3&quot;</span>,</span><br><span class="line">      <span class="string">&quot;-m&quot;</span>,</span><br><span class="line">      <span class="string">&quot;pip&quot;</span>,</span><br><span class="line">      <span class="string">&quot;wheel&quot;</span>,</span><br><span class="line">      <span class="string">&quot;--no-deps&quot;</span>,</span><br><span class="line">      <span class="string">&quot;-w&quot;</span>,</span><br><span class="line">      <span class="string">&quot;dist&quot;</span>,</span><br><span class="line">      <span class="string">&quot;.&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;stdout&quot;</span>: <span class="string">&quot;Processing /tmp/witness-demo\nBuilding wheels for collected packages: witness-demo\n  Running setup.py bdist_wheel for witness-demo: started\n  Running setup.py bdist_wheel for witness-demo: finished with status &#x27;done&#x27;\n  Stored in directory: /tmp/witness-demo/dist\nSuccessfully built witness-demo\n&quot;</span>,</span><br><span class="line">    <span class="string">&quot;exitcode&quot;</span>: 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;starttime&quot;</span>: <span class="string">&quot;2023-11-29T05:15:19.227943473-05:00&quot;</span>,</span><br><span class="line">  <span class="string">&quot;endtime&quot;</span>: <span class="string">&quot;2023-11-29T05:15:20.078517025-05:00&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;https://witness.dev/attestations/product/v0.1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;attestation&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dist/witness_demo-1.0.0-py3-none-any.whl&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;mime_type&quot;</span>: <span class="string">&quot;application/zip&quot;</span>,</span><br><span class="line">      <span class="string">&quot;digest&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;gitoid:sha1&quot;</span>: <span class="string">&quot;gitoid:blob:sha1:b4b7210729998829c82208685837058f5ad614ab&quot;</span>,</span><br><span class="line">        <span class="string">&quot;gitoid:sha256&quot;</span>: <span class="string">&quot;gitoid:blob:sha256:473a0f4c3be8a93681a267e3b1e9a7dcda1185436fe141f7749120a303721813&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sha256&quot;</span>: <span class="string">&quot;471985cd3b0d3e0101a1cbba8840819bfdc8d8f8cc19bd08add1e04be25b51ec&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;starttime&quot;</span>: <span class="string">&quot;2023-11-29T05:15:20.078579187-05:00&quot;</span>,</span><br><span class="line">  <span class="string">&quot;endtime&quot;</span>: <span class="string">&quot;2023-11-29T05:15:20.081170078-05:00&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»º-Policy-æ–‡ä»¶"><a href="#åˆ›å»º-Policy-æ–‡ä»¶" class="headerlink" title="åˆ›å»º Policy æ–‡ä»¶"></a>åˆ›å»º Policy æ–‡ä»¶</h4><p><code>policy.json</code> ç”¨æ¥å®šä¹‰æˆ–è¦æ±‚ä¸€ä¸ªæ­¥éª¤ç”±å…·æœ‰ç‰¹å®šå±æ€§æˆ–æ»¡è¶³ä¸€äº›ç‰¹æ®Šçš„å€¼ï¼Œä»è€Œè¦æ±‚éªŒè¯ attestation æ‰èƒ½æˆåŠŸã€‚æ¯”å¦‚è¿™é‡Œçš„ <code>expires</code> å­—æ®µè¿‡æœŸäº†å³å°äºå½“å‰çš„æ—¶é—´ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ <code>witness verify</code> çš„æ—¶å€™å°±ä¼šå¤±è´¥ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;expires&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2033-12-17T23:57:40-05:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;steps&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;attestations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://witness.dev/attestations/material/v0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;regopolicies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://witness.dev/attestations/command-run/v0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;regopolicies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://witness.dev/attestations/product/v0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;regopolicies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;functionaries&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;publickeyid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;&#123;PUBLIC_KEY_ID&#125;&#125;&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;publickeys&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;&#123;&#123;PUBLIC_KEY_ID&#125;&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;keyid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;&#123;PUBLIC_KEY_ID&#125;&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;&#123;B64_PUBLIC_KEY&#125;&#125;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šå…³äº policy çš„å±æ€§å’Œè®¾ç½®å¯ä»¥å‚è€ƒè¿™é‡Œï¼š<a href="https://github.com/in-toto/witness/blob/main/docs/policy.md">https://github.com/in-toto/witness/blob/main/docs/policy.md</a></p><h3 id="ç»™-Policy-æ–‡ä»¶åšç­¾å"><a href="#ç»™-Policy-æ–‡ä»¶åšç­¾å" class="headerlink" title="ç»™ Policy æ–‡ä»¶åšç­¾å"></a>ç»™ Policy æ–‡ä»¶åšç­¾å</h3><p>åœ¨ç­¾åä¹‹å‰éœ€è¦å…ˆæ›¿æ¢åˆ° Policy æ–‡ä»¶çš„å˜é‡</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">id</span>=`<span class="built_in">sha256sum</span> witness-demo-pub.pem | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>` &amp;&amp; sed -i <span class="string">&quot;s/&#123;&#123;PUBLIC_KEY_ID&#125;&#125;/<span class="variable">$id</span>/g&quot;</span> policy.json</span><br><span class="line"></span><br><span class="line">pubb64=`<span class="built_in">cat</span> witness-demo-pub.pem | <span class="built_in">base64</span> -w 0` &amp;&amp; sed -i <span class="string">&quot;s/&#123;&#123;B64_PUBLIC_KEY&#125;&#125;/<span class="variable">$pubb64</span>/g&quot;</span> policy.json</span><br></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨ <code>witness sign</code> æ¥åšç­¾å</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">witness sign -f policy.json --signer-file-key-path witness-demo-key.pem --outfile policy-signed.json</span><br><span class="line">INFO    Using config file: .witness.yaml</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦ç¬¦åˆæ”¿ç­–è¦æ±‚"><a href="#éªŒè¯äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦ç¬¦åˆæ”¿ç­–è¦æ±‚" class="headerlink" title="éªŒè¯äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦ç¬¦åˆæ”¿ç­–è¦æ±‚"></a>éªŒè¯äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦ç¬¦åˆæ”¿ç­–è¦æ±‚</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">witness verify -f dist/witness_demo-1.0.0-py3-none-any.whl -a witness-demo-att.json -p policy-signed.json -k witness-demo-pub.pem </span><br><span class="line">INFO    Using config file: .witness.yaml             </span><br><span class="line">INFO    Verification succeeded                       </span><br><span class="line">INFO    Evidence:                                    </span><br><span class="line">INFO    0: witness-demo-att.json </span><br></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ witness é’ˆå¯¹ No-GitHub é¡¹ç›®çš„æ¼”ç¤ºã€‚</p><p>å¦‚æœä½ çš„é¡¹ç›®ä»£ç æ˜¯æ”¾åœ¨ GitHub ä¸Šçš„ï¼Œç›®å‰æœ€å®¹æ˜“ã€æœ€æµè¡Œçš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ <a href="https://github.com/slsa-framework/slsa-github-generator">slsa-github-generator</a> ä¸€ä¸ªç”± <a href="https://github.com/slsa-framework">SLSA Framework</a> æä¾›çš„å·¥å…·ï¼Œç„¶åä½¿ç”¨ <a href="https://github.com/slsa-framework/slsa-verifier">slsa-verifier</a> æ¥éªŒè¯ provenanceã€‚å…·ä½“å¯ä»¥å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç«  <a href="https://shenxianpeng.github.io/2023/11/python-and-slsa/">Python å’Œ SLSA ğŸ’ƒ</a></p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> DevSecOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SLSA </tag>
            
            <tag> Witness </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å’Œ SLSA ğŸ’ƒ</title>
      <link href="/2023/11/python-and-slsa/"/>
      <url>/2023/11/python-and-slsa/</url>
      
        <content type="html"><![CDATA[<p>è½¯ä»¶å·¥ä»¶çš„ä¾›åº”é“¾å±‚ (SLSA) æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆå’ŒéªŒè¯è½¯ä»¶å·¥ä»¶æ¥æºçš„å·¥å…·æ¡†æ¶ã€‚åœ¨ Python ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦ç±»å‹çš„è½¯ä»¶å·¥ä»¶ï¼šè½®å­ï¼ˆwheelsï¼‰å’Œæºä»£ç åˆ†å‘ï¼ˆdistributionsï¼‰ã€‚</p><p>æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ SLSA æ¡†æ¶æ¥ç”Ÿæˆå’ŒéªŒè¯ Python å·¥ä»¶çš„æ¥æºå‘¢ï¼Ÿ</p><h2 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h2><ol><li><a href="#%E6%9E%84%E5%BB%BA%E7%BA%AF%E5%87%80%E7%9A%84Python%E5%8C%85">æ„å»ºçº¯å‡€çš„PythonåŒ…</a></li><li><a href="#%E7%94%9F%E6%88%90%E5%87%BA%E5%A4%84%E8%AF%81%E6%98%8E">ç”Ÿæˆå‡ºå¤„è¯æ˜</a></li><li><a href="#%E4%B8%8A%E4%BC%A0%E5%88%B0PyPI">ä¸Šä¼ åˆ°PyPI</a></li><li><a href="#%E9%AA%8C%E8%AF%81Python%E5%8C%85%E7%9A%84%E6%9D%A5%E6%BA%90">éªŒè¯PythonåŒ…çš„æ¥æº</a></li><li><a href="#%E4%BA%8C%E8%BF%9B%E5%88%B6Python%E5%8C%85">äºŒè¿›åˆ¶PythonåŒ…</a></li><li><a href="#%E6%96%87%E4%B8%AD%E7%94%A8%E5%88%B0%E7%9A%84%E9%A1%B9%E7%9B%AE">æ–‡ä¸­ç”¨åˆ°çš„é¡¹ç›®</a></li></ol><p>æ³¨æ„ï¼šæœ¬æ–‡ä»‹ç»çš„æ˜¯é’ˆå¯¹<strong>æ‰˜ç®¡åœ¨ GitHub ä¸Šçš„ Python é¡¹ç›®</strong>ã€‚SLSA æ¡†æ¶å¯é€šè¿‡ GitHub Actions æ¥å®ç°å¼€ç®±å³ç”¨ï¼Œåªéœ€è¾ƒå°‘çš„é…ç½®å³å¯å®Œæˆã€‚</p><p>å¯¹äºæ‰˜ç®¡åœ¨é GitHub ä¸Šçš„é¡¹ç›®ï¼ˆä¾‹å¦‚ Bitbucketï¼‰å¯ä»¥å°è¯• <a href="https://witness.dev/">Witness</a>ï¼Œä¸‹ä¸€ç¯‡æˆ‘å°†æ›´æ–°å…³äºå¦‚ä½•ä½¿ç”¨ Witnessã€‚</p><p>å¦‚æœä½ æƒ³äº†è§£ Python æ‰“åŒ…çš„æµç¨‹æˆ–æ˜¯æœ¯è¯­å¯ä»¥å‚è§<a href="https://packaging.python.org/en/latest/overview/#packaging-python-libraries-and-tools">Python æ‰“åŒ…ç”¨æˆ·æŒ‡å—</a>ã€‚</p><p>ä¸‹é¢æ˜¯ä»ç»´æŠ¤äººå‘˜åˆ°ç”¨æˆ·çš„ç«¯åˆ°ç«¯å·¥ä½œæµç¨‹ï¼šä»æ„å»º Wheel package -&gt; ç”Ÿæˆå‡ºå¤„ -&gt; éªŒè¯å‡ºå¤„ -&gt; å‘å¸ƒåˆ° PyPI -&gt; ä»¥åŠç”¨æˆ·éªŒè¯å‡ºå¤„ -&gt; å®‰è£… wheelã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€èµ·æ¥å®Œæˆè¿™å…¶ä¸­çš„æ¯ä¸€æ­¥ã€‚</p><p><img src="/2023/11/python-and-slsa/workflows.svg" alt="ç«¯åˆ°ç«¯æµç¨‹"></p><span id="more"></span><h2 id="æ„å»ºçº¯å‡€çš„PythonåŒ…"><a href="#æ„å»ºçº¯å‡€çš„PythonåŒ…" class="headerlink" title="æ„å»ºçº¯å‡€çš„PythonåŒ…"></a>æ„å»ºçº¯å‡€çš„PythonåŒ…</h2><p>æ„å»ºçº¯ Python åŒ…é€šå¸¸åªæœ‰ä¸¤ä¸ªå·¥ä»¶ï¼šå³çº¯ Python Wheel Package å’Œæºä»£ç  distributionã€‚å¯ä»¥ä½¿ç”¨å‘½ä»¤ <a href="https://pypi.org/project/build/"><code>python3 -m build</code></a> ä»æºä»£ç æ„å»ºã€‚</p><p>ä¸‹é¢æ˜¯ GitHub Actions job å®šä¹‰æ¥æ„å»º Wheel Package å’Œæºä»£ç  distributionï¼Œå¹¶ä¸ºæ¯ä¸ªå·¥ä»¶åˆ›å»º SHA-256 å“ˆå¸Œå€¼ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@...</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-python@...</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">python-version:</span> <span class="number">3.</span><span class="string">x</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          # å®‰è£… buildï¼Œåˆ›å»º sdist å’Œ wheel</span></span><br><span class="line"><span class="string">          python -m pip install build</span></span><br><span class="line"><span class="string">          python -m build</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">          <span class="comment"># æ”¶é›†æ‰€æœ‰æ–‡ä»¶çš„å“ˆå¸Œå€¼</span></span><br><span class="line">          <span class="string">cd</span> <span class="string">dist</span> <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">&quot;hashes=$(sha256sum * | base64 -w0)&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_OUTPUT</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/upload-artifacts@...</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">./dist</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°† build å®Œçš„ wheel package ä¸Šä¼ åˆ° GitHub Artifacts å­˜èµ·æ¥ï¼Œç”¨ä½œåç»­åœ¨ â€œä¸Šä¼ åˆ°PyPIâ€ job ä¸­ä½¿ç”¨ã€‚å¦å¤–è¿˜å°† <code>dist</code> ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å“ˆå¸Œå€¼å­˜å‚¨åœ¨ <code>hashes</code> ç”¨ä½œåç»­ job <code>provenance</code> çš„è¾“å…¥ã€‚</p><blockquote><p>æ³¨æ„ï¼š SLSA ä½¿ç”¨ <code>sha265sum</code> çš„è¾“å‡ºä½œä¸ºå‡ºå¤„è¯æ˜ä¸­ <code>subject-base64</code> å­—æ®µçš„è¾“å…¥ã€‚<code>sha256sum</code> çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹æ•£åˆ— + åç§°ã€‚</p></blockquote><h2 id="ç”Ÿæˆå‡ºå¤„è¯æ˜"><a href="#ç”Ÿæˆå‡ºå¤„è¯æ˜" class="headerlink" title="ç”Ÿæˆå‡ºå¤„è¯æ˜"></a>ç”Ÿæˆå‡ºå¤„è¯æ˜</h2><p>ç°åœ¨æˆ‘ä»¬å·²ç»æ„å»ºäº† sdist å’Œ wheelï¼Œæˆ‘ä»¬å¯ä»¥ä»æ–‡ä»¶å“ˆå¸Œç”Ÿæˆæ¥æºè¯æ˜ã€‚</p><p>å› ä¸ºæˆ‘ä»¬éœ€è¦å°† Build é˜¶æ®µçš„çš„è¾“å‡ºä½œä¸ºè¿™é‡Œç”Ÿæˆå‡ºå¤„çš„è¾“å…¥ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨äº† <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idneeds">needs</a> é€‰é¡¹æ¥ä½œä¸º job <code>provenance</code> æ‰§è¡Œçš„å‰ææ¡ä»¶ã€‚å¯ä»¥çœ‹åˆ°ä¸Šé¢ç”Ÿæˆçš„å“ˆå¸Œå€¼åœ¨è¿™é‡Œè¢« <code>subject-base64</code> æ‰€ä½¿ç”¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">provenance:</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">build</span>]</span><br><span class="line">    <span class="attr">uses:</span> <span class="string">slsa-framework/slsa-github-builder/.github/workflows/generator_generic_slsa3.yml@v1.9.0</span></span><br><span class="line">    <span class="attr">permissions:</span></span><br><span class="line">      <span class="comment"># éœ€è¦æ£€æµ‹ GitHub æ“ä½œç¯å¢ƒ</span></span><br><span class="line">      <span class="attr">actions:</span> <span class="string">read</span></span><br><span class="line">      <span class="comment"># éœ€è¦é€šè¿‡ GitHub OIDC åˆ›å»ºå‡ºå¤„</span></span><br><span class="line">      <span class="attr">id-token:</span> <span class="string">write</span></span><br><span class="line">      <span class="comment"># éœ€è¦åˆ›å»ºå¹¶ä¸Šä¼ åˆ° GitHub Releases</span></span><br><span class="line">      <span class="attr">contents:</span> <span class="string">write</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="comment"># ç”Ÿæˆçš„ package SHA-256 å“ˆå¸Œå€¼</span></span><br><span class="line">      <span class="attr">subject-base64:</span> <span class="string">$&#123;&#123;</span> <span class="string">provenance.needs.build.output.hashes</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="comment"># å°†å‡ºå¤„æ–‡ä»¶ä¸Šä¼ åˆ° GitHub Release</span></span><br><span class="line">      <span class="attr">upload-assets:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>ä½ ä¼šæ³¨æ„åˆ°ï¼Œè¿™å¹¶æ²¡æœ‰åƒ GitHub å·¥ä½œæµé‚£æ ·å®šä¹‰ä»»ä½•å•ç‹¬çš„æ­¥éª¤ã€‚ç›¸å SLSA builders ä½¿ç”¨<a href="https://docs.github.com/en/actions/using-workflows/reusing-workflows">å¯é‡ç”¨å·¥ä½œæµ</a>åŠŸèƒ½æ¥è¯æ˜ç»™å®šçš„ builders è¡Œä¸ºä¸èƒ½è¢«ç”¨æˆ·æˆ–å…¶ä»–è¿›ç¨‹ä¿®æ”¹ã€‚</p><p>å‡ºå¤„è¯æ˜æ–‡ä»¶æ˜¯ <a href="https://jsonlines.org/">JSON lines</a>ï¼Œä»¥ <code>.intoto.jsonl</code> ç»“å°¾ã€‚<code>*.intoto.jsonl</code> æ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªå·¥ä»¶çš„è¯æ˜ï¼Œä¹Ÿå¯ä»¥åœ¨åŒä¸€æ–‡ä»¶ä¸­åŒ…å«å¤šä¸ªå‡ºå¤„è¯æ˜ã€‚è¯¥ <code>.jsonl</code> æ ¼å¼æ„å‘³ç€è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ª â€œJSON linesâ€ æ–‡ä»¶ï¼Œå³æ¯è¡Œä¸€ä¸ª JSON æ–‡æ¡£ã€‚</p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œæœ‰ä¸€ç‚¹ä»¤äººå›°æƒ‘çš„æ˜¯ GitHub job ä¸­çš„ <code>id-token</code> éœ€è¦ <code>write</code> æƒé™æ‰èƒ½è¯»å– GitHub OIDC ä»¤ç‰Œã€‚<code>read</code> ä¸å…è®¸ä½ è¯»å– OIDCâ€¦ğŸ¤·ã€‚æœ‰å…³ <code>id-token</code> æƒé™çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect#adding-permissions-settings">GitHub æ–‡æ¡£</a>ã€‚</p></blockquote><h2 id="ä¸Šä¼ åˆ°PyPI"><a href="#ä¸Šä¼ åˆ°PyPI" class="headerlink" title="ä¸Šä¼ åˆ°PyPI"></a>ä¸Šä¼ åˆ°PyPI</h2><p>æˆ‘ä»¬ä½¿ç”¨å®˜æ–¹ <a href="https://github.com/pypa/gh-action-pypi-publish">pypa&#x2F;gh-action-pypi-publish</a> GitHub Action å°† wheel åŒ…ä¸Šä¼ åˆ° PyPIã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™ä¸ª <code>publish</code> job éœ€è¦åœ¨ <code>build</code> å’Œ <code>provenance</code> éƒ½å®Œæˆåå¼€å§‹æ‰§è¡Œï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å‡è®¾  <code>provenance</code> job å·²ç»ä¸ºæˆ‘ä»¬èµ·è‰äº† GitHub Releaseï¼ˆå› ä¸º <code>upload-assets: true</code> çš„è®¾ç½®ï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å‡è®¾è¯¥ job å·²æˆåŠŸã€‚å¦‚æœä¸å…ˆåˆ›å»ºæ¥ provenance æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸æƒ³å°†è¿™äº› wheel åŒ…ä¸Šä¼ åˆ° PyPIï¼Œå› æ­¤æˆ‘ä»¬æœ€åä¸Šä¼ åˆ° PyPIã€‚</p><p><img src="/2023/11/python-and-slsa/publish.svg" alt="å‘å¸ƒ"></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">publish:</span></span><br><span class="line">  <span class="attr">needs:</span> [<span class="string">&quot;build&quot;</span>, <span class="string">&quot;provenance&quot;</span>]</span><br><span class="line">  <span class="attr">permissions:</span></span><br><span class="line">    <span class="attr">contents:</span> <span class="string">write</span></span><br><span class="line">  <span class="attr">runs-on:</span> <span class="string">&quot;ubuntu-latest&quot;</span></span><br><span class="line">  <span class="attr">steps:</span></span><br><span class="line">  <span class="comment"># ä¸‹è½½å·²æ„å»ºçš„ distributions</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">&quot;actions/download-artifact@...&quot;</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&quot;dist&quot;</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">&quot;dist/&quot;</span></span><br><span class="line">  <span class="comment"># ä¸Šä¼  distributions åˆ° GitHub Release</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">env:</span></span><br><span class="line">      <span class="attr">GITHUB_TOKEN:</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      gh release upload $&#123;&#123; github.ref_name &#125;&#125; \</span></span><br><span class="line"><span class="string">        dist/* --repo $&#123;&#123; github.repository &#125;&#125;</span></span><br><span class="line"><span class="string"></span>  <span class="comment"># å‘å¸ƒ distributions åˆ° PyPI</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">&quot;pypa/gh-action-pypi-publish@...&quot;</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="attr">user:</span> <span class="string">__token__</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PYPI_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œè¯¥ <code>publish</code> job éœ€è¦åœ¨å¼€å§‹ä¹‹å‰å®Œæˆ <code>build</code> å’Œä½œä¸šã€‚<code>provenance</code> è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å‡è®¾å‡ºå¤„ä½œä¸šå·²ç»ä¸ºæˆ‘ä»¬åˆ›å»ºäº† GitHub å‘å¸ƒè‰æ¡ˆï¼ˆæ„Ÿè°¢è¯¥ <code>upload-assets: true</code> è®¾ç½®ï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å‡è®¾è¯¥ä½œä¸šå·²æˆåŠŸã€‚å¦‚æœä¸å…ˆåˆ›å»ºæ¥æºæ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸æƒ³å°†è¿™äº›å‘è¡Œç‰ˆä¸Šä¼ åˆ° PyPIï¼Œå› æ­¤æˆ‘ä»¬æœ€åä¸Šä¼ åˆ° PyPIã€‚</p><h2 id="éªŒè¯PythonåŒ…çš„æ¥æº"><a href="#éªŒè¯PythonåŒ…çš„æ¥æº" class="headerlink" title="éªŒè¯PythonåŒ…çš„æ¥æº"></a>éªŒè¯PythonåŒ…çš„æ¥æº</h2><p>è®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçœŸæ­£çš„ Python é¡¹ç›®æ¥éªŒè¯å®ƒçš„å‡ºå¤„ã€‚ä»¥ urllib3 é¡¹ç›®ä¸ºä¾‹ï¼Œå®ƒåœ¨ GitHub Releases å‘å¸ƒäº†ç‰ˆæœ¬ä¸­åŒ…å«å‡ºå¤„è¯æ˜ï¼Œè¿™é‡Œæ¼”ç¤ºçš„æ˜¯ä½¿ç”¨å®ƒçš„æœ€æ–°ç‰ˆæœ¬ <a href="https://github.com/urllib3/urllib3/releases/tag/2.1.0"><code>2.1.0</code></a> ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸‹è½½ <a href="https://github.com/slsa-framework/slsa-verifier/releases">slsa-verifier</a> ç”¨æ¥éªŒè¯å‡ºå¤„ã€‚ä¸‹è½½å®Œè¯¥ <code>slsa-verifier</code> å·¥å…·åï¼Œè®©æˆ‘ä»¬ä» PyPI è·å– urllib3 wheel åŒ…ï¼Œè€Œä¸ä½¿ç”¨ <a href="https://pip.pypa.io/en/stable/cli/pip_download/">pip download</a>. æˆ‘ä»¬ä½¿ç”¨è¯¥ <a href="https://pip.pypa.io/en/stable/cli/pip_install/#cmdoption-only-binary"><code>--only-binary</code></a> é€‰é¡¹å¼ºåˆ¶ pip ä¸‹è½½ wheelã€‚</p><p><img src="/2023/11/python-and-slsa/install.svg" alt="å®‰è£…"></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python3 -m pip download --only-binary=:all: urllib3</span><br><span class="line">Collecting urllib3</span><br><span class="line">  Downloading urllib3-2.1.0-py3-none-any.whl.metadata (6.4 kB)</span><br><span class="line">Downloading urllib3-2.1.0-py3-none-any.whl (104 kB)</span><br><span class="line">   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 104.6/104.6 kB 761.0 kB/s eta 0:00:00</span><br><span class="line">Saved ./urllib3-2.1.0-py3-none-any.whl</span><br><span class="line">Successfully downloaded urllib3</span><br></pre></td></tr></table></figure><p>ä¸‹è½½è½¯ä»¶åŒ…åï¼Œæˆ‘ä»¬éœ€è¦ä» GitHub ç‰ˆæœ¬ä¸‹è½½å‡ºå¤„è¯æ˜ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒ…ç‰ˆæœ¬ç›¸åŒçš„ GitHub Release æ¥ç¡®ä¿è·å¾—æ­£ç¡®çš„å‡ºå¤„è¯æ˜ï¼Œå› æ­¤ tag ä¹Ÿæ˜¯ 2.1.0ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl --location -O https://github.com/urllib3/urllib3/releases/download/2.1.0/multiple.intoto.jsonl</span><br></pre></td></tr></table></figure><p>è¯¥å‡ºå¤„æ–‡ä»¶çš„åç§°ä¸º <code>multiple.intoto.jsonl</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå·¥ä»¶è¯æ˜çš„å‡ºå¤„è¯æ˜çš„æ ‡å‡†åç§°ã€‚å¯¹äº Python é¡¹ç›®æ¥è¯´å‡ ä¹æ€»æ˜¯å¦‚æ­¤ï¼Œå› ä¸ºå‡ ä¹æ€»æ˜¯æœ‰ä¸€ä¸ªæºä»£ç  distribution å’Œè‡³å°‘ä¸€ä¸ª wheelã€‚</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å½“å‰çš„å·¥ä½œç›®å½•ä¸­åº”è¯¥æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼šwheel å’Œå‡ºå¤„è¯æ˜ï¼Œ<code>ls</code> æµè§ˆä¸€ä¸‹ç¡®ä¿å·²ç»å‡†å¤‡å¥½äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span></span><br><span class="line">multiple.intoto.jsonl  urllib3-2.1.0-py3-none-any.whl</span><br></pre></td></tr></table></figure><p>ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>slsa-verifier</code> æ¥éªŒè¯å‡ºå¤„ã€‚æˆ‘ä»¬å¯ä»¥éªŒè¯æœ€é‡è¦çš„äº‹æƒ…ï¼Œå³å“ªä¸ª GitHub ä»“åº“å®é™…æ„å»ºäº† wheelï¼Œä»¥åŠå…¶ä»–ä¿¡æ¯ï¼Œä¾‹å¦‚ git æ ‡ç­¾ã€åˆ†æ”¯å’Œå»ºé€ è€… IDï¼š</p><p>æºå­˜å‚¨åº“ (<code>--source-uri</code>)<br>å»ºé€ è€… ID (<code>--builder-id</code>)<br>Git åˆ†æ”¯ (<code>--source-branch</code>)<br>git æ ‡ç­¾ (<code>--source-tag</code>)</p><p>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³éªŒè¯è½®å­çš„æºå­˜å‚¨åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>--source-uri</code>ã€‚å½“ç„¶è¿˜å¯ä»¥éªŒè¯ <code>--builder-id</code>ï¼Œ<code>--source-branch</code> å’Œ <code>--source-tag</code>ã€‚å…·ä½“æˆ‘çš„æµ‹è¯•ç›®å‰ <code>--builder-id</code>ï¼Œ<code>--source-branch</code> ä¼¼ä¹æœ‰é—®é¢˜ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œä»…éªŒè¯ GitHub ä»“åº“</span></span><br><span class="line">slsa-verifier verify-artifact --provenance-path multiple.intoto.jsonl --source-uri github.com/urllib3/urllib3 urllib3-2.1.0-py3-none-any.whl </span><br><span class="line">Verified signature against tlog entry index 49513169 at URL: https://rekor.sigstore.dev/api/v1/log/entries/24296fb24b8ad77a08c2f012d69948ed5d12e8e020852bb7936ea9208d684688e5108cca859a3302</span><br><span class="line">Verified build using builder <span class="string">&quot;https://github.com/slsa-framework/slsa-github-generator/.github/workflows/generator_generic_slsa3.yml@refs/tags/v1.9.0&quot;</span> at commit 69be2992f8a25a1f27e49f339e4d5b98dec07462</span><br><span class="line">Verifying artifact urllib3-2.1.0-py3-none-any.whl: PASSED</span><br><span class="line"></span><br><span class="line">PASSED: Verified SLSA provenance</span><br></pre></td></tr></table></figure><p><strong>æˆåŠŸäº†</strong>ï¼ğŸ¥³ æˆ‘ä»¬å·²ç»éªŒè¯äº†è¿™ä¸ª wheel çš„å‡ºå¤„ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒçš„å®‰è£…å®ƒï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“å®ƒæ˜¯æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸæ„å»ºçš„ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python3 -m pip install urllib3-2.1.0-py3-none-any.whl </span><br><span class="line">Defaulting to user installation because normal site-packages is not writeable</span><br><span class="line">Processing ./urllib3-2.1.0-py3-none-any.whl</span><br><span class="line">Installing collected packages: urllib3</span><br><span class="line">  Attempting uninstall: urllib3</span><br><span class="line">    Found existing installation: urllib3 2.0.5</span><br><span class="line">    Uninstalling urllib3-2.0.5:</span><br><span class="line">      Successfully uninstalled urllib3-2.0.5</span><br><span class="line">Successfully installed urllib3-2.1.0</span><br></pre></td></tr></table></figure><h2 id="äºŒè¿›åˆ¶PythonåŒ…"><a href="#äºŒè¿›åˆ¶PythonåŒ…" class="headerlink" title="äºŒè¿›åˆ¶PythonåŒ…"></a>äºŒè¿›åˆ¶PythonåŒ…</h2><p>Python wheel å¹¶ä¸å…¨æ˜¯çº¯ Pythonï¼Python çš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€æ˜¯ä½œä¸º Cã€C++ã€Fortranã€Rustã€Goï¼ˆç­‰ï¼‰çš„ç²˜åˆè¯­è¨€ï¼Œä¸å…¶ä»–ä¸€äº›ç¼–ç¨‹è¯­è¨€ç›¸æ¯”ï¼ŒPython çš„æ‰“åŒ…å’Œèµ·æºæ•…äº‹å˜å¾—æ›´åŠ å¤æ‚ã€‚</p><p>éœ€è¦ä¸ºå¤šä¸ªå¹³å°ã€æ¶æ„æ„å»ºäºŒè¿›åˆ¶ wheelï¼Œå¦‚æœé¡¹ç›®æ— æ³•ä½¿ç”¨ç¨³å®šçš„ <a href="https://docs.python.org/3/c-api/stable.html#stable-application-binary-interface">ABI</a> ï¼Œåˆ™éœ€è¦ä¸ºæ¯ä¸ªæ–°çš„ Python ç‰ˆæœ¬ç¼–è¯‘æ–°çš„ wheelã€‚è¦äº†è§£åœ¨è¿™ç§æƒ…å†µä¸‹é¡¹ç›®éœ€è¦å¤šå°‘ä¸ª wheelï¼Œä½ å¯ä»¥æŸ¥çœ‹ MarkupSafeï¼Œå®ƒåœ¨ <a href="https://pypi.org/project/MarkupSafe/#files">v2.1.3 ä¸­æä¾›äº†è¿‘ 60 ä¸ªwheel</a>ã€‚å½“æ–°çš„ Python ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œè‡³å°‘è¿˜ä¼šæœ‰ 10 ä¸ªç‰ˆæœ¬æ¥è¦†ç›– Python 3.12 çš„æ‰€æœ‰å¹³å°ã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨åˆå§‹ç‰ˆæœ¬å‘å¸ƒåçš„æŸä¸ªæ—¶é—´åˆ›å»ºæ–°çš„å·¥ä»¶ï¼Œè€Œ SLSA ä¸­æ²¡æœ‰ä¸€ä¸ªç®€å•çš„åŠæ³•ã€‚è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ä¸ºåŒ…åˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–° wheelsã€‚</li><li>æ„å»ºæ–°çš„ wheels å¹¶åˆ›å»ºæ–°çš„å‡ºå¤„è¯æ˜ã€‚</li></ul><h3 id="åˆ›å»ºæ–°ç‰ˆæœ¬"><a href="#åˆ›å»ºæ–°ç‰ˆæœ¬" class="headerlink" title="åˆ›å»ºæ–°ç‰ˆæœ¬"></a>åˆ›å»ºæ–°ç‰ˆæœ¬</h3><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨å°† <code>cibuildwheel</code> GitHub Action æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬åä¸ºåŒ…åˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬ä»¥æ”¯æŒæ‰€æœ‰æ–°çš„ Wheel ç›®æ ‡ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æ¥æºè¯æ˜ã€sdist å’Œ wheelã€‚ç„¶è€Œï¼Œå¦‚æœé¡¹ç›®çš„æºä»£ç æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œè¿™æ„Ÿè§‰åƒæ˜¯ä¸€ä¸ªä¸å¹¸çš„ç»“æœã€‚</p><p><img src="/2023/11/python-and-slsa/cibuildwheel.svg" alt="cibuildwheel"></p><p>ä¸æ–°è½®å­ç›¸æ¯”ï¼Œæ–°ç‰ˆæœ¬ä¼šå¼•èµ·æ›´å¤šçš„æµå¤±ï¼š</p><ul><li>ç»´æŠ¤äººå‘˜çš„é¢å¤–å·¥ä½œ</li><li>å­˜å‚¨å’Œè®¡ç®—èµ„æºï¼ˆPyTorch çš„æ¯ä¸ªç‰ˆæœ¬<a href="https://pypi.org/project/torch/#files">å¤§çº¦æœ‰ 6GB çš„ wheels</a>ï¼‰</li><li>ä¾èµ–è€…éœ€è¦æ›´æ–°é”å®šæ–‡ä»¶ï¼ˆä¾èµ–æœºå™¨äººç–²åŠ³ï¼Œæœ‰äººå—ï¼Ÿï¼‰</li><li>ä¸‹æ¸¸é‡æ–°æ‰“åŒ…å’Œåˆ†å‘</li></ul><h3 id="å‘å¸ƒåwheelsçš„å‡ºå¤„"><a href="#å‘å¸ƒåwheelsçš„å‡ºå¤„" class="headerlink" title="å‘å¸ƒåwheelsçš„å‡ºå¤„"></a>å‘å¸ƒåwheelsçš„å‡ºå¤„</h3><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³ä»…ä»…ä¸ºäº†æ–°è½®å­çš„å‡ºå¤„è€Œåˆ›å»ºæ–°ç‰ˆæœ¬ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>Markupsafe çš„è§£å†³æ–¹æ¡ˆæ˜¯æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¨ <a href="https://docs.github.com/en/actions/using-workflows/manually-running-a-workflow">workflow_dispatch</a> è§¦å‘å™¨æ¥è¿è¡Œå…¸å‹çš„ wheel æ„å»ºå·¥ä½œæµç¨‹ï¼Œä½†é…ç½®ä¸ºä»…ä¸ºç»™å®šçš„ Python ç‰ˆæœ¬ï¼ˆå³ <code>cp312</code> CPython 3.12ï¼‰æ„å»ºæ–°çš„ wheelsã€‚ç„¶åè¿™äº› wheels ä¼šåƒå¹³å¸¸ä¸€æ ·é€šè¿‡ SLSA è¿›è¡Œè¯æ˜å¹¶ä¸Šä¼ åˆ° PyPIï¼Œä½†æ–°çš„å‡ºå¤„è¯æ˜æ–‡ä»¶ä¼šæ·»åŠ åˆ°ç°æœ‰çš„ GitHub å‘å¸ƒå·¥ä»¶ä¸­ã€‚</p><p>è¿™æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸º PyPI ä¸Šçš„æ‰€æœ‰å·¥ä»¶éƒ½æœ‰å‡ºå¤„è¯æ˜ã€‚æœ‰ä¸€äº›ç¼ºç‚¹ï¼š</p><ul><li>æ–°çš„å‡ºå¤„è¯æ˜ä½äº GitHub Release çš„å•ç‹¬å·¥ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ç°æœ‰çš„å‡ºå¤„è¯æ˜ä¸­ã€‚è¿™æ„å‘³ç€æƒ³è¦éªŒè¯æ–°è½¦è½®æ¥æºçš„ç”¨æˆ·å¯èƒ½éœ€è¦ä¸€äº›æ‰‹åŠ¨å‘ç°å’Œæ­¥éª¤æ¥ä¸‹è½½æ­£ç¡®çš„æ¥æºè¯æ˜æ–‡ä»¶ã€‚</li><li>é€šå¸¸æ–°çš„æ¶æ„æˆ–å¹³å°éœ€è¦æ–°ç‰ˆæœ¬çš„ <code>cibuildwheel</code>ã€‚ç”±äºéœ€è¦æ›´æ–°æºä»£ç æ‰èƒ½å‡çº§æ­£åœ¨ <code>cibuildwheel</code> ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œå› æ­¤è¿‡å»ç‰ˆæœ¬çš„ git æ ‡ç­¾å°†ä¸æ„å»ºæ–°è½®å­æ‰€éœ€çš„ç¡®åˆ‡ git æäº¤ä¸åŒ¹é…ã€‚è¿™æ„å‘³ç€å‡ºå¤„è¯æ˜ä¸ä¼šåŒ…å«æœ‰å…³ git æ ‡ç­¾çš„ä¿¡æ¯ï¼Œå› æ­¤ä½¿ç”¨è¯¥ <code>--source-tag</code> é€‰é¡¹è¿›è¡ŒéªŒè¯å°†æ— æ³•æŒ‰é¢„æœŸè¿›è¡Œã€‚</li></ul><p>ä¸Šè¿°ç¬¬ä¸€ç‚¹çš„å¦ä¸€ä¸ªæ½œåœ¨è§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ¥æºè¯æ˜ï¼Œå…¶ä¸­åŒ…å«æ–°æ—§å·¥ä»¶çš„å“ˆå¸Œå€¼ã€‚</p><h2 id="æ–‡ä¸­ç”¨åˆ°çš„é¡¹ç›®"><a href="#æ–‡ä¸­ç”¨åˆ°çš„é¡¹ç›®" class="headerlink" title="æ–‡ä¸­ç”¨åˆ°çš„é¡¹ç›®"></a>æ–‡ä¸­ç”¨åˆ°çš„é¡¹ç›®</h2><p>ä»¥ä¸‹è¿™äº›æ˜¯æœ¬æ–‡ä½¿ç”¨çš„æ‰€æœ‰é¡¹ç›®å’Œå·¥å…·ï¼š</p><ul><li><a href="https://github.com/slsa-framework/slsa-github-generator/blob/main/internal/builders/generic/README.md">SLSA GitHub Builder</a></li><li><a href="https://github.com/slsa-framework/slsa-verifier">slsa-framework&#x2F;slsa-verifier</a></li><li><a href="https://github.com/pypa/gh-action-pypi-publish">pypa&#x2F;gha-action-pypi-publish</a></li><li><a href="https://github.com/pypa/build">pypa&#x2F;build</a></li><li><a href="https://github.com/pypa/cibuildwheel">pypa&#x2F;cibuildwheel</a></li></ul><p>ä»¥ä¸‹é¡¹ç›®æ˜¯ç”¨æ¥å±•ç¤ºå¦‚ä½•åœ¨ GitHub Actions ä¸­é’ˆå¯¹ Python é¡¹ç›®é…ç½® SLSAï¼š</p><ul><li><a href="https://github.com/urllib3/urllib3/blob/main/.github/workflows/publish.yml">urllib3&#x2F;urllib3</a></li><li><a href="https://github.com/pallets/markupsafe/blob/main/.github/workflows/publish.yaml">pallets&#x2F;markupsafe</a></li></ul><blockquote><p>è‹±æ–‡åŸæ–‡ï¼š<a href="https://sethmlarson.dev/python-and-slsa">https://sethmlarson.dev/python-and-slsa</a> </p></blockquote><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> DevSecOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> SLSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Problems and solutions when upgrading XLC from 10.1 to IBM Open XL C/C++ for AIX 17.1.0</title>
      <link href="/2023/10/upgrade-xlc-10-to-xlc-17.1/"/>
      <url>/2023/10/upgrade-xlc-10-to-xlc-17.1/</url>
      
        <content type="html"><![CDATA[<p>In this article, I would like to document the problems encountered when upgrading from IBM XLC 10.1 to XLC 17.1 (IBM Open XL C&#x2F;C++ for AIX 17.1.0) and how to fix the following 12 errors.</p><p>If youâ€™ve encountered any other errors, feel free to share your comments with or without a solution.</p><h2 id="1-Change-cc-to-ibm-clang"><a href="#1-Change-cc-to-ibm-clang" class="headerlink" title="1. Change cc to ibm-clang"></a>1. Change cc to ibm-clang</h2><p>First you need to change all the related <code>cc</code> to <code>ibm-clang</code> in the the global Makefile. for example:</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- CC=cc</span></span><br><span class="line"><span class="deletion">- CXX=xlC_r</span></span><br><span class="line"><span class="deletion">- XCC=xlC_r</span></span><br><span class="line"><span class="deletion">- MAKE_SHARED=xlC_r</span></span><br><span class="line"><span class="addition">+ CC=ibm-clang</span></span><br><span class="line"><span class="addition">+ CXX=ibm-clang_r</span></span><br><span class="line"><span class="addition">+ XCC=ibm-clang_r</span></span><br><span class="line"><span class="addition">+ MAKE_SHARED=ibm-clang_r</span></span><br></pre></td></tr></table></figure><p>And check following link of <a href="https://www.ibm.com/docs/en/openxl-c-and-cpp-aix/17.1.0?topic=options-mapping">Mapping of options</a> to map new Clang options if any.</p><h2 id="2-error-unknown-argument-â€˜-qmakedep-gccâ€™"><a href="#2-error-unknown-argument-â€˜-qmakedep-gccâ€™" class="headerlink" title="2. error: unknown argument: â€˜-qmakedep&#x3D;gccâ€™"></a>2. error: unknown argument: â€˜-qmakedep&#x3D;gccâ€™</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- GEN_DEPENDENTS_OPTIONS=-qmakedep=gcc  -E -MF $@.1 &gt; /dev/null</span></span><br><span class="line"><span class="addition">+ GEN_DEPENDENTS_OPTIONS= -E -MF $@.1 &gt; /dev/null</span></span><br></pre></td></tr></table></figure><h2 id="3-should-not-return-a-value-Wreturn-type"><a href="#3-should-not-return-a-value-Wreturn-type" class="headerlink" title="3. should not return a value [-Wreturn-type]"></a>3. should not return a value [-Wreturn-type]</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- return -1;</span></span><br><span class="line"><span class="addition">+ return;</span></span><br></pre></td></tr></table></figure><h2 id="4-error-non-void-function-â€˜mainâ€™-should-return-a-value-Wreturn-type"><a href="#4-error-non-void-function-â€˜mainâ€™-should-return-a-value-Wreturn-type" class="headerlink" title="4. error: non-void function â€˜mainâ€™ should return a value [-Wreturn-type]"></a>4. error: non-void function â€˜mainâ€™ should return a value [-Wreturn-type]</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- return;</span></span><br><span class="line"><span class="addition">+ return 0;</span></span><br></pre></td></tr></table></figure><h2 id="5-error-unsupported-option-â€˜-Gâ€™-for-target-â€˜powerpc64-ibm-aix7-3-0-0â€™"><a href="#5-error-unsupported-option-â€˜-Gâ€™-for-target-â€˜powerpc64-ibm-aix7-3-0-0â€™" class="headerlink" title="5. error: unsupported option â€˜-Gâ€™ for target â€˜powerpc64-ibm-aix7.3.0.0â€™"></a>5. error: unsupported option â€˜-Gâ€™ for target â€˜powerpc64-ibm-aix7.3.0.0â€™</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- LIB_101_FLAGS := -G </span></span><br><span class="line"><span class="addition">+ LIB_101_FLAGS := -shared -Wl,-G</span></span><br></pre></td></tr></table></figure><h2 id="6-Undefined-symbol-libxxxx-so"><a href="#6-Undefined-symbol-libxxxx-so" class="headerlink" title="6. Undefined symbol (libxxxx.so)"></a>6. Undefined symbol (libxxxx.so)</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- LIB_10_FLAGS := -bexport:$(SRC)/makefiles/xxxx.def</span></span><br><span class="line"><span class="addition">+ LIB_10_FLAGS := -lstdc++ -lm -bexport:$(SRC)/makefiles/xxxx.def</span></span><br></pre></td></tr></table></figure><h2 id="7-unsupported-option-qlongdouble"><a href="#7-unsupported-option-qlongdouble" class="headerlink" title="7. unsupported option -qlongdouble"></a>7. unsupported option -qlongdouble</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- drv_connect.c.CC_OPTIONS=$(CFLAGS) -qlongdouble -brtl</span></span><br><span class="line"><span class="addition">+ drv_loadfunc.c.CC_OPTIONS=$(CFLAGS) $(IDIR) -brtl</span></span><br></pre></td></tr></table></figure><h2 id="8-Undefined-symbol-Z8u9-closei"><a href="#8-Undefined-symbol-Z8u9-closei" class="headerlink" title="8. Undefined symbol: ._Z8u9_closei"></a>8. Undefined symbol: ._Z8u9_closei</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- extern int u9_close(int fd) ;</span></span><br><span class="line"><span class="addition">+ extern &quot;C&quot; int u9_close(int fd) ;</span></span><br></pre></td></tr></table></figure><h2 id="9-ERROR-Undefined-symbol-pow"><a href="#9-ERROR-Undefined-symbol-pow" class="headerlink" title="9. ERROR: Undefined symbol: .pow"></a>9. ERROR: Undefined symbol: .pow</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- CXXLIBES = -lpthread -lC -lstdc++</span></span><br><span class="line"><span class="addition">+ CXXLIBES = -lpthread -lC -lstdc++ -lm</span></span><br></pre></td></tr></table></figure><h2 id="10-â€˜mainâ€™-argument-array-must-be-of-type-â€˜char-â€™"><a href="#10-â€˜mainâ€™-argument-array-must-be-of-type-â€˜char-â€™" class="headerlink" title="10. â€˜mainâ€™ (argument array) must be of type â€˜char **â€™"></a>10. â€˜mainâ€™ (argument array) must be of type â€˜char **â€™</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- d_char *argv[];</span></span><br><span class="line"><span class="addition">+ char *argv[];</span></span><br></pre></td></tr></table></figure><h2 id="11-first-parameter-of-â€˜mainâ€™-argument-count-must-be-of-type-â€˜intâ€™"><a href="#11-first-parameter-of-â€˜mainâ€™-argument-count-must-be-of-type-â€˜intâ€™" class="headerlink" title="11. first parameter of â€˜mainâ€™ (argument count) must be of type â€˜intâ€™"></a>11. first parameter of â€˜mainâ€™ (argument count) must be of type â€˜intâ€™</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- int main(char *argc, char *argv[])</span></span><br><span class="line"><span class="addition">+ int main(int argc, char *argv[])</span></span><br></pre></td></tr></table></figure><h2 id="12-ERROR-Undefined-symbol-ZdaPv"><a href="#12-ERROR-Undefined-symbol-ZdaPv" class="headerlink" title="12. ERROR: Undefined symbol: ._ZdaPv"></a>12. ERROR: Undefined symbol: ._ZdaPv</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- LIB_3_LIBS:= -lverse -llog_nosig</span></span><br><span class="line"><span class="addition">+ LIB_3_LIBS:= -lverse -llog_nosig -lstdc++</span></span><br></pre></td></tr></table></figure><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> AIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AIX </tag>
            
            <tag> Clang </tag>
            
            <tag> XLC </tag>
            
            <tag> IBM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022-23 ä¸–ç•Œè´¨é‡æŠ¥å‘Šï¼ˆWorld Quality Reportï¼‰</title>
      <link href="/2023/10/world-quality-report/"/>
      <url>/2023/10/world-quality-report/</url>
      
        <content type="html"><![CDATA[<p>2202-23 ä¸–ç•Œè´¨é‡æŠ¥å‘Šï¼ˆWorld Quality Report ç®€ç§° WQRï¼‰æ˜¯ä¸€é¡¹å…¨çƒç ”ç©¶ï¼Œä¸è®ºæ˜¯ä½œä¸ºè½¯ä»¶æµ‹è¯•ã€å¼€å‘å·¥ç¨‹å¸ˆï¼Œå…³æ³¨è¿™ç±»è½¯ä»¶è´¨é‡æŠ¥å‘Šå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿäº†è§£è½¯ä»¶è¡Œä¸šçš„ç°çŠ¶å’Œè¶‹åŠ¿ã€‚</p><h2 id="ä¸ƒä¸ªä¸»é¢˜"><a href="#ä¸ƒä¸ªä¸»é¢˜" class="headerlink" title="ä¸ƒä¸ªä¸»é¢˜"></a>ä¸ƒä¸ªä¸»é¢˜</h2><p>ä»Šå¹´çš„ WQR çš„å…³é”®è¶‹åŠ¿å’Œæ¨èåŒ…æ‹¬åŒ…æ‹¬ä»¥ä¸‹ä¸ƒä¸ªå…³é”®å»ºè®®ï¼š</p><ul><li>æ•æ·è´¨é‡è°ƒé… (DONE)</li><li>è´¨é‡è‡ªåŠ¨åŒ– (DONE)</li><li>æµ‹è¯•åŸºç¡€è®¾æ–½æµ‹è¯•å’Œé…ç½® (DONE)</li><li>æµ‹è¯•æ•°æ®æä¾›å’Œæ•°æ®éªŒè¯ (WIP)</li><li>è´¨é‡å’Œå¯æŒç»­çš„ IT (NOT START)</li><li>æ–°å…´æŠ€æœ¯è¶‹åŠ¿çš„è´¨é‡å·¥ç¨‹ (NOT START)</li><li>ä»·å€¼æµç®¡ç† (NOT START)</li></ul><span id="more"></span><h2 id="æ•æ·åœ¨ç»„ç»‡ä¸­çš„è´¨é‡è°ƒé…"><a href="#æ•æ·åœ¨ç»„ç»‡ä¸­çš„è´¨é‡è°ƒé…" class="headerlink" title="æ•æ·åœ¨ç»„ç»‡ä¸­çš„è´¨é‡è°ƒé…"></a>æ•æ·åœ¨ç»„ç»‡ä¸­çš„è´¨é‡è°ƒé…</h2><p>æ•æ·å’Œ DevOps å·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´ï¼Œå®ƒä»¬ä»åœ¨ä¸æ–­å‘å±•ã€‚å®ƒä»¬çš„é‡‡ç”¨ç‡æ¯å¹´éƒ½åœ¨å¢é•¿ï¼Œæ¨åŠ¨äº†é«˜è´¨é‡è½¯ä»¶çš„äº¤ä»˜æ–¹å¼ã€‚åœ¨åœ¨è¿‡å»çš„åå¹´ä¸­ï¼Œéšç€æ•æ·å®è·µï¼Œå¹¶å°†é‡ç‚¹è½¬å‘æ›´æ–°çš„å®è·µã€æŠ€æœ¯å’Œè¶‹åŠ¿ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨æ‰€æœ‰è¿™äº›è¶‹åŠ¿ã€‚</p><h3 id="è‡ªä»ä½ çš„ç»„ç»‡é‡‡ç”¨-Agile-DevOps-ä»¥æ¥ï¼Œä»¥ä¸‹æ¯ä¸ªé¢†åŸŸæœ‰å¤šå°‘æ”¹è¿›"><a href="#è‡ªä»ä½ çš„ç»„ç»‡é‡‡ç”¨-Agile-DevOps-ä»¥æ¥ï¼Œä»¥ä¸‹æ¯ä¸ªé¢†åŸŸæœ‰å¤šå°‘æ”¹è¿›" class="headerlink" title="è‡ªä»ä½ çš„ç»„ç»‡é‡‡ç”¨ Agile&#x2F;DevOps ä»¥æ¥ï¼Œä»¥ä¸‹æ¯ä¸ªé¢†åŸŸæœ‰å¤šå°‘æ”¹è¿›"></a>è‡ªä»ä½ çš„ç»„ç»‡é‡‡ç”¨ Agile&#x2F;DevOps ä»¥æ¥ï¼Œä»¥ä¸‹æ¯ä¸ªé¢†åŸŸæœ‰å¤šå°‘æ”¹è¿›</h3><p>æ•æ·ç¼©çŸ­äº†äº¤ä»˜å‘¨æœŸã€ å®ç°é«˜è´¨é‡è½¯ä»¶ä¸”å…è®¸é¢‘ç¹éƒ¨ç½²ã€‚</p><p><img src="/2023/10/world-quality-report/1.png" alt="1"></p><p>æ•æ·å’Œ DevOps æ­£åœ¨ä»¥å¤šç§æ–¹å¼å½±å“ç»„ç»‡ã€‚ä»è°ƒæŸ¥ç»“æœå¯ä»¥æ¸…æ¥šåœ°çœ‹å‡ºï¼Œæ•æ·æ–¹æ³•å¯¼è‡´ä¸Šå¸‚æ—¶é—´æ˜¾ç€æ”¹å–„ï¼Œå¹¶ä¸”æé«˜é©¾é©¶æ—¶çš„è½¯ä»¶è´¨é‡å’Œå¯é¢„æµ‹æ€§ï¼ŒåŒæ—¶æ”¹å–„å®¢æˆ·ä½“éªŒã€‚ä¸Šå›¾æ˜¾ç¤ºäº†ç»„ç»‡çš„ç™¾åˆ†æ¯”ç»å†äº†è¶…è¿‡ 20% çš„æ”¹å–„è‡ªä»ä»–ä»¬é‡‡ç”¨ä»¥æ¥æåˆ°çš„æ”¹è¿›é¢†åŸŸæ•æ·&#x2F;å¼€å‘è¿è¥ã€‚</p><p>å‡†æ—¶äº¤è´§ã€å¯é¢„æµ‹æ€§ã€æ”¹è¿›å®¢æˆ·ä½“éªŒå’Œç”Ÿäº§åŠ›æå‡æ˜¯å…³é”®æ•æ·å®è·µå®æ–½çš„ç»“æœã€‚è¿™ä½¿æ›´å¥½çš„å®¢æˆ·ä½“éªŒï¼ŒåŒæ—¶éƒ¨ç½²æ›´å¿«çš„ç‰ˆæœ¬ã€‚æœ‰è¶£çš„æ˜¯ï¼Œåªæœ‰ 54% çš„å—è®¿è€…å®ç°äº†ä¸šåŠ¡é©±åŠ¨çš„æ›´å¿«å‘å¸ƒç›®æ ‡ï¼Œè¿™æ„å‘³ç€å®ƒåº”è¯¥è·å¾—æ›´å¤šå…³æ³¨ã€‚</p><h3 id="ä½ çš„å›¢é˜Ÿåœ¨ä¼ä¸šç³»ç»Ÿæµ‹è¯•ä¸­ä½¿ç”¨ä¸‹åˆ—è´¨é‡å’Œæµ‹è¯•æ–¹æ³•çš„é¢‘ç‡å¦‚ä½•ï¼Ÿ"><a href="#ä½ çš„å›¢é˜Ÿåœ¨ä¼ä¸šç³»ç»Ÿæµ‹è¯•ä¸­ä½¿ç”¨ä¸‹åˆ—è´¨é‡å’Œæµ‹è¯•æ–¹æ³•çš„é¢‘ç‡å¦‚ä½•ï¼Ÿ" class="headerlink" title="ä½ çš„å›¢é˜Ÿåœ¨ä¼ä¸šç³»ç»Ÿæµ‹è¯•ä¸­ä½¿ç”¨ä¸‹åˆ—è´¨é‡å’Œæµ‹è¯•æ–¹æ³•çš„é¢‘ç‡å¦‚ä½•ï¼Ÿ"></a>ä½ çš„å›¢é˜Ÿåœ¨ä¼ä¸šç³»ç»Ÿæµ‹è¯•ä¸­ä½¿ç”¨ä¸‹åˆ—è´¨é‡å’Œæµ‹è¯•æ–¹æ³•çš„é¢‘ç‡å¦‚ä½•ï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/2.png" alt="2"></p><p>ä¼ä¸šç³»ç»Ÿçš„ â€œç¨³å¦¥ â€œé€‰æ‹©</p><p>åœ¨ä¼ä¸šç³»ç»Ÿé¢†åŸŸï¼Œæ•æ·æµç¨‹çš„é‡‡ç”¨æœ€è¿‘æ‰åˆšåˆšå¼€å§‹ã€‚ä¼ä¸šç³»ç»Ÿéå¸¸å¤æ‚ï¼Œè¿è¡Œç€å…³é”®çš„ä¸šåŠ¡æµç¨‹ï¼Œå› æ­¤åœ¨é‡‡ç”¨æ•æ·æµç¨‹æ–¹é¢èµ·æ­¥è¾ƒæ™šã€‚ä¼ä¸šç³»ç»Ÿè¾ƒæ™šé‡‡ç”¨æ•æ·æµç¨‹çš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œå¾ˆéš¾å°†ç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹é€šå¸¸éå¸¸åºå¤§çš„å·¥ä½œæµç¨‹æ‹†åˆ†æˆè¾ƒå°çš„å—ï¼Œä»¥ä¾¿åœ¨è¾ƒçŸ­çš„å¼€å‘å†²åˆºé˜¶æ®µç‹¬ç«‹å¤„ç†ã€‚</p><p>ç„¶è€Œï¼Œåœ¨è¿‡å»å‡ å¹´ä¸­ï¼Œä¼ä¸šç³»ç»Ÿé‡‡ç”¨æ•æ·æ–¹æ³•çš„æƒ…å†µå‡ºç°äº†ç§¯æçš„è½¬å˜ï¼Œæˆ‘ä»¬é¢„è®¡è¿™ç§æƒ…å†µå°†ç»§ç»­ä¸‹å»ã€‚ä»Šå¹´ï¼Œæˆ‘ä»¬è°ƒæŸ¥äº†ä¼ä¸šç³»ç»Ÿæœ€ä¸»è¦çš„è´¨é‡å’Œæµ‹è¯•æ–¹æ³•ã€‚</p><p>ä»Šå¹´ï¼Œæˆ‘ä»¬è°ƒæŸ¥äº†ä¼ä¸šç³»ç»Ÿé‡‡ç”¨çš„æœ€ä¸»è¦çš„è´¨é‡å’Œæµ‹è¯•æ–¹æ³•ã€‚å¤§å¤šæ•°å›¢é˜Ÿï¼ˆ65%ï¼‰ä½¿ç”¨ç‰¹å®šè½¯ä»¶åŒ…å·¥å…·æ¥å®ç°è‡ªåŠ¨åŒ–ï¼Œ63% çš„å›¢é˜Ÿä½¿ç”¨é¢„å»ºæµ‹è¯•ç”¨ä¾‹åº“æ¥è®¤è¯å†²åˆºï¼Œ61% çš„å›¢é˜Ÿå°†æµ‹è¯•é›†æˆä¸º CI&#x2F;CD ç®¡é“ä¸­çš„è‡ªåŠ¨è´¨é‡å…³ã€‚</p><h3 id="åœ¨æˆåŠŸæ‰§è¡Œæ•æ·å¼€å‘é¡¹ç›®æ—¶ï¼Œä»¥ä¸‹è´¨é‡ä¿è¯æŠ€èƒ½æœ‰å¤šé‡è¦ï¼Ÿ"><a href="#åœ¨æˆåŠŸæ‰§è¡Œæ•æ·å¼€å‘é¡¹ç›®æ—¶ï¼Œä»¥ä¸‹è´¨é‡ä¿è¯æŠ€èƒ½æœ‰å¤šé‡è¦ï¼Ÿ" class="headerlink" title="åœ¨æˆåŠŸæ‰§è¡Œæ•æ·å¼€å‘é¡¹ç›®æ—¶ï¼Œä»¥ä¸‹è´¨é‡ä¿è¯æŠ€èƒ½æœ‰å¤šé‡è¦ï¼Ÿ"></a>åœ¨æˆåŠŸæ‰§è¡Œæ•æ·å¼€å‘é¡¹ç›®æ—¶ï¼Œä»¥ä¸‹è´¨é‡ä¿è¯æŠ€èƒ½æœ‰å¤šé‡è¦ï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/3.png" alt="3"></p><h4 id="å…¨æ ˆè´¨é‡å·¥ç¨‹å¸ˆçš„æ¦‚å¿µæ­£åœ¨æ¼”å˜"><a href="#å…¨æ ˆè´¨é‡å·¥ç¨‹å¸ˆçš„æ¦‚å¿µæ­£åœ¨æ¼”å˜" class="headerlink" title="å…¨æ ˆè´¨é‡å·¥ç¨‹å¸ˆçš„æ¦‚å¿µæ­£åœ¨æ¼”å˜"></a>å…¨æ ˆè´¨é‡å·¥ç¨‹å¸ˆçš„æ¦‚å¿µæ­£åœ¨æ¼”å˜</h4><p>ä»Šå¹´çš„æ•°æ®æ˜¾ç¤ºï¼Œæ•æ· Scrum å›¢é˜Ÿä¸­è´¨é‡å·¥ç¨‹å¸ˆçš„æŠ€æœ¯å’Œè·¨èŒèƒ½æŠ€èƒ½èåˆç¨‹åº¦æœ‰æ‰€æé«˜ã€‚</p><p>ä¸Šå›¾æ˜¾ç¤ºï¼Œâ€é‡‡ç”¨å·¥ç¨‹æ€ç»´â€ï¼ŒåŒæ—¶ â€œæŒæ¡å¤šç§æŠ€èƒ½å’Œæé«˜æŠ€èƒ½ â€œæ­£åœ¨æˆä¸ºæ–°çš„è§„èŒƒã€‚</p><p>ä¸šåŠ¡é¢†åŸŸçŸ¥è¯†å’Œè·¨èŒèƒ½æŠ€èƒ½æ˜¯ä»Šå¹´è¶…è¿‡ 60% çš„å—è®¿è€…è®¤ä¸ºæœ€é‡è¦çš„ä¸¤ä¸ªé¡¹ç›®ã€‚</p><h4 id="è´¨é‡å·¥ç¨‹å¸ˆæ˜¯æ•æ·å›¢é˜Ÿçš„ç»„æˆéƒ¨åˆ†"><a href="#è´¨é‡å·¥ç¨‹å¸ˆæ˜¯æ•æ·å›¢é˜Ÿçš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="è´¨é‡å·¥ç¨‹å¸ˆæ˜¯æ•æ·å›¢é˜Ÿçš„ç»„æˆéƒ¨åˆ†"></a>è´¨é‡å·¥ç¨‹å¸ˆæ˜¯æ•æ·å›¢é˜Ÿçš„ç»„æˆéƒ¨åˆ†</h4><p>ä»Šå¹´çš„æ•°æ®æ˜¾ç¤ºï¼Œæ•æ·Scrumå›¢é˜Ÿä¸­è´¨é‡å·¥ç¨‹å¸ˆçš„äººæ•°æœ‰æ‰€å¢åŠ ã€‚</p><h3 id="ä½ ä»¬å›¢é˜Ÿä¸­ä¸“ä¸šè´¨é‡å·¥ç¨‹å¸ˆçš„æ¯”ä¾‹æ˜¯å¤šå°‘ï¼Ÿ"><a href="#ä½ ä»¬å›¢é˜Ÿä¸­ä¸“ä¸šè´¨é‡å·¥ç¨‹å¸ˆçš„æ¯”ä¾‹æ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="ä½ ä»¬å›¢é˜Ÿä¸­ä¸“ä¸šè´¨é‡å·¥ç¨‹å¸ˆçš„æ¯”ä¾‹æ˜¯å¤šå°‘ï¼Ÿ"></a>ä½ ä»¬å›¢é˜Ÿä¸­ä¸“ä¸šè´¨é‡å·¥ç¨‹å¸ˆçš„æ¯”ä¾‹æ˜¯å¤šå°‘ï¼Ÿ</h3><p>ä¸Šå›¾æ˜¾ç¤ºï¼Œå¹³å‡è€Œè¨€ï¼Œå¤§å¤šæ•° IT ç»„ç»‡çš„æ•æ·å›¢é˜Ÿä¸­è´¨é‡å·¥ç¨‹å¸ˆçš„æ¯”ä¾‹ä½äº 30%ã€‚æœ‰ 28% çš„ç»„ç»‡çš„è´¨é‡å·¥ç¨‹å¸ˆæ¯”ä¾‹é«˜è¾¾ 36-45%ï¼Œæœ‰ 20% çš„ç»„ç»‡çš„æ•æ·å›¢é˜Ÿä¸­è´¨é‡å·¥ç¨‹å¸ˆæ¯”ä¾‹ä¸º 16-25%ã€‚</p><h4 id="åœ¨æ•æ·ä¼ä¸šä¸­åè°ƒè´¨é‡çš„å…³é”®å»ºè®®"><a href="#åœ¨æ•æ·ä¼ä¸šä¸­åè°ƒè´¨é‡çš„å…³é”®å»ºè®®" class="headerlink" title="åœ¨æ•æ·ä¼ä¸šä¸­åè°ƒè´¨é‡çš„å…³é”®å»ºè®®"></a>åœ¨æ•æ·ä¼ä¸šä¸­åè°ƒè´¨é‡çš„å…³é”®å»ºè®®</h4><p>æ•æ·å›¢é˜Ÿåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºå›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„æœ‰æ•ˆåä½œå’Œé«˜æ•ˆæ²Ÿé€šã€‚ç”±äºéœ€æ±‚å˜åŒ–é¢‘ç¹ï¼Œäº¤ä»˜å‘¨æœŸçŸ­ï¼Œå¼€å‘äººå‘˜ã€ä¸šåŠ¡åˆ†æå¸ˆå’Œè´¨é‡å·¥ç¨‹å¸ˆéœ€è¦æºæ‰‹åˆä½œï¼Œå…±åŒå®Œæˆå‘å¸ƒä»»åŠ¡ã€‚ä»–ä»¬éœ€è¦åä½œã€æ¥å— å˜åŒ–å¹¶å¿«é€Ÿé€‚åº”ã€‚</p><p>åœ¨ä»Šå¹´çš„è°ƒæŸ¥ä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†ä»¥ä¸‹ä¸æ•æ·è´¨é‡åè°ƒç›¸å…³çš„ä¸»è¦å‘ç°å’Œæœ€ä½³å®è·µï¼š</p><ul><li>çµæ´»æ€§ã€è‡ªä¸»æ€§å’Œé€‚åº”æ€§æ˜¯æ•æ·é¡¹ç›®çš„å…³é”®å›¢é˜Ÿç‰¹è´¨ã€‚</li><li>è·¨èŒèƒ½æŠ€èƒ½å’Œä¸šåŠ¡çŸ¥è¯†å¯¹æ•æ·é¡¹ç›®çš„æˆåŠŸè‡³å…³é‡è¦ã€‚</li><li>æŒç»­äº¤ä»˜çš„é€Ÿåº¦è¦æ±‚æ›´é«˜æ°´å¹³çš„è‡ªåŠ¨åŒ–å’Œè´¨é‡æµç¨‹ã€‚</li><li>æ•æ·&#x2F;DevOps éœ€è¦æ›´å¹¿æ³›çš„è´¨é‡è§‚ï¼ŒåŒ…æ‹¬å·¦ç§»å’Œå³ç§»ã€‚</li><li>æ•æ·å›¢é˜Ÿä¸­çš„è´¨é‡å·¥ç¨‹å¸ˆæ­£è¿›ä¸€æ­¥å‘å…¨æ ˆè´¨é‡å·¥ç¨‹å¸ˆå‘å±•ã€‚è¿™äº›å·¥ç¨‹å¸ˆèåˆäº†ä¸°å¯Œçš„æŠ€æœ¯å’Œä¸šåŠ¡æŠ€èƒ½ã€‚è¿™å°†ç»§ç»­å‘å±•ï¼Œä»¥æ»¡è¶³æ•æ·ç¯å¢ƒæ‰€éœ€çš„çµæ´»æ€§ã€‚</li></ul><h4 id="å„ç»„ç»‡åº”å…³æ³¨ä»€ä¹ˆï¼Ÿ"><a href="#å„ç»„ç»‡åº”å…³æ³¨ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å„ç»„ç»‡åº”å…³æ³¨ä»€ä¹ˆï¼Ÿ"></a>å„ç»„ç»‡åº”å…³æ³¨ä»€ä¹ˆï¼Ÿ</h4><p><img src="/2023/10/world-quality-report/4.png" alt="4"></p><p>å…³äºæ•æ·è´¨é‡æ–¹æ³•ã€æµç¨‹å’Œåè°ƒï¼Œæˆ‘ä»¬æœ‰å…­é¡¹å»ºè®®ï¼š</p><ul><li>è®©è´¨é‡å·¥ç¨‹å¸ˆæˆä¸ºæ•æ·å¼€å‘é¡¹ç›®ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚åˆé€‚çš„äººæ‰ä»¥åŠæŠ€æœ¯ä¸ä¸šåŠ¡æŠ€èƒ½çš„èåˆå¯¹äºæ•æ·å¼€å‘ä¸­çš„è´¨é‡å·¥ç¨‹å¸ˆè‡³å…³é‡è¦ã€‚è™½ç„¶ SDET è§’è‰²å·²æˆä¸ºå¸¸æ€ï¼Œä½†ä¸šåŠ¡é¢†åŸŸçŸ¥è¯†ä¹Ÿæ˜¯ä¸€é¡¹åŸºæœ¬æŠ€èƒ½ã€‚</li><li>å‘å±•ç«¯åˆ°ç«¯æµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æŒç»­æµ‹è¯•æé«˜æ•´ä¸ª CI&#x2F;CD æµç¨‹çš„æµ‹è¯•è‡ªåŠ¨åŒ–æ°´å¹³ï¼Œä»è€Œæé«˜ä»£ç è´¨é‡ã€‚è¿™å°†æé«˜äº§å“è´¨é‡ï¼ŒåŒæ—¶é™ä½è´¨é‡æˆæœ¬ã€‚</li><li>ç¡®ä¿è‡ªåŠ¨åŒ–æµ‹è¯•ä½œä¸ºå¸¸è§„ CI ç®¡é“çš„ä¸€éƒ¨åˆ†è¿è¡Œï¼Œè¿™æ ·å®ƒä»¬å°±èƒ½å¾ˆå®¹æ˜“åœ°ä¸æ—¥å¸¸å·¥ä½œé›†æˆã€‚</li><li>éšç€ä¼ä¸šä¸»è¶Šæ¥è¶Šå¤šåœ°å‚ä¸æµ‹è¯•æ´»åŠ¨ï¼Œåº”ç¡®ä¿ä»–ä»¬æ‹¥æœ‰æ­£ç¡®çš„å·¥å…·å’Œæµç¨‹ï¼Œä»¥ä¾¿æœ‰æ•ˆåœ°è¿›è¡Œæµ‹è¯•ã€‚</li><li>é’ˆå¯¹ä¼ä¸šç³»ç»Ÿä½¿ç”¨ç‰¹å®šçš„è½¯ä»¶åŒ…å·¥å…·ï¼Œå¹¶åˆ©ç”¨é€‚åˆæ•æ·æ–¹æ³•ä½¿ç”¨çš„é¢„å»ºåº“æé«˜è‡ªåŠ¨åŒ–æ°´å¹³ã€‚</li><li>è·Ÿè¸ªå’Œç›‘æ§è´¯ç©¿æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ•´ä½“è´¨é‡æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼šéƒ¨ç½²å¤±è´¥æŒ‡æ ‡å¯å…¨é¢åæ˜ å„å›¢é˜Ÿçš„è´¨é‡ã€‚</li></ul><h2 id="è´¨é‡è‡ªåŠ¨åŒ–"><a href="#è´¨é‡è‡ªåŠ¨åŒ–" class="headerlink" title="è´¨é‡è‡ªåŠ¨åŒ–"></a>è´¨é‡è‡ªåŠ¨åŒ–</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>æµ‹è¯•è‡ªåŠ¨åŒ–å·²æœ‰å‡ åå¹´çš„å†å²ï¼Œå…¶å·¥å…·ä¹Ÿæœ‰äº†é•¿è¶³çš„å‘å±•ã€‚å½“æˆ‘ä»¬ä»ã€Šä¸–ç•Œè´¨é‡æŠ¥å‘Šã€‹çš„è§’åº¦æ¥çœ‹å¾…æµ‹è¯•è‡ªåŠ¨åŒ–æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒå¤§æœ‰å¯ä¸ºçš„å‰æ™¯ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œä¼ä¸šä»åœ¨åœ¨åŠªåŠ›å®ç°è‡ªåŠ¨åŒ–ã€‚</p><p>ä¼ä¸šåœ¨æµ‹è¯•è‡ªåŠ¨åŒ–æ–¹é¢é¢ä¸´çš„ä¸¤ä¸ªéå¸¸æ™®éçš„æŒ‘æˆ˜ï¼š</p><ul><li>æµ‹è¯•è‡ªåŠ¨åŒ–å¹¶ä¸æ€»æ˜¯è‡ªç„¶è€Œç„¶åœ°èå…¥å¼€å‘æµç¨‹ï¼Œè€Œæ˜¯ä½œä¸ºä¸€é¡¹ç‹¬ç«‹çš„æ´»åŠ¨ç»„ç»‡èµ·æ¥ã€ç‹¬ç«‹äºå¼€å‘å’Œæµ‹è¯•æœ¬èº«ã€‚</li><li>å›¢é˜Ÿä¼˜å…ˆé€‰æ‹©æµ‹è¯•è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå´å¿˜è®°åˆ¶å®šé€‚å½“çš„æµ‹è¯•è‡ªåŠ¨åŒ–è®¡åˆ’å’Œç­–ç•¥ã€‚</li></ul><p>è¦ä½¿æµ‹è¯•è‡ªåŠ¨åŒ–å–å¾—æˆåŠŸï¼Œè‡³å°‘éœ€è¦è‰¯å¥½çš„éœ€æ±‚ã€åˆé€‚çš„ä¸“å®¶ã€åˆé€‚çš„å·¥å…·ï¼ˆé€šå¸¸ä¸æ­¢ä¸€ç§å·¥å…·å·¥å…·ï¼‰ã€ç¨³å®šçš„æµ‹è¯•ç¯å¢ƒå’Œè¶³å¤Ÿè´¨é‡çš„æµ‹è¯•æ•°æ®ã€‚</p><p>å¦‚ä»Šï¼Œæ‰€æœ‰ç»„ç»‡éƒ½éœ€è¦é€‚å½“æ°´å¹³çš„æµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œå› ä¸ºæ•æ·æ–¹æ³•æ­£åœ¨åŠ å¿«å¼€å‘é€Ÿåº¦ã€‚<br>å› æ­¤ï¼Œæµ‹è¯•éœ€è¦æ›´å¿«åœ°å®Œæˆï¼Œä½†ä¸åº”å¤±å»ä»»ä½•ä¸¥è°¨æ€§ã€‚ç®€å•åœ°è¯´ï¼Œè¿‡å¤šçš„æ‰‹åŠ¨æµ‹è¯•å°†æ— æ³•è·Ÿä¸Šå¼€å‘çš„æ­¥ä¼ã€‚</p><h3 id="å†³å®šæµ‹è¯•è‡ªåŠ¨åŒ–æ–¹æ³•æœ€é‡è¦çš„ä¸‰ä¸ªå› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å†³å®šæµ‹è¯•è‡ªåŠ¨åŒ–æ–¹æ³•æœ€é‡è¦çš„ä¸‰ä¸ªå› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å†³å®šæµ‹è¯•è‡ªåŠ¨åŒ–æ–¹æ³•æœ€é‡è¦çš„ä¸‰ä¸ªå› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å†³å®šæµ‹è¯•è‡ªåŠ¨åŒ–æ–¹æ³•æœ€é‡è¦çš„ä¸‰ä¸ªå› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/5.png" alt="5"></p><p>æˆ‘ä»¬è¯¢é—®äº†è°ƒæŸ¥å¯¹è±¡ï¼Œä»€ä¹ˆæ˜¯å†³å®šä»–ä»¬æµ‹è¯•è‡ªåŠ¨åŒ–æ–¹æ³•çš„æœ€é‡è¦å› ç´ ã€‚ æˆ‘ä»¬æœ¬ä»¥ä¸ºæŠ•èµ„å›æŠ¥ç‡ï¼ˆROIï¼‰ä¼šé«˜å±…æ¦œé¦–ï¼Œä½†å¯ç»´æŠ¤æ€§å´ååˆ—å‰èŒ…ï¼Œè¿™è®©æˆ‘ä»¬æ¬£å–œåœ°è®¤è¯†åˆ°ï¼Œè¦æƒ³åœ¨è‡ªåŠ¨åŒ–é¢†åŸŸå–å¾—æˆåŠŸï¼Œå°±å¿…é¡»å°†å…¶è§†ä¸ºä¸€ç§èµ„äº§æ¥åŠ ä»¥ç»´æŠ¤å’Œå¼€å‘ã€‚</p><p>äººä»¬è®¤è¯†åˆ°ï¼Œä¸šåŠ¡éœ€æ±‚ä¹Ÿæ˜¯å…³é”®ï¼ŒåŒæ—¶è¿˜è¦é€‚åº”éœ€è¦æµ‹è¯•çš„æ–°æŠ€æœ¯â€“æˆ‘ä»¬è®¤ä¸ºï¼Œéƒ¨åˆ†åŸå› æ˜¯ä¸æ–­å‘äº‘æŠ€æœ¯è½¬å˜ã€‚</p><p>æˆ‘ä»¬å‘ç°ï¼Œå¤§å¤šæ•°ç»„ç»‡çš„é¦–è¦ä»»åŠ¡æ˜¯æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œè€Œä¸æ˜¯è¯æ˜è‡ªåŠ¨åŒ–çš„æŠ€æœ¯æŠ•èµ„å›æŠ¥ç‡ï¼Œç»„ç»‡ä¸­çš„å¯¹è¯å·²ç»ä»æµ‹è¯•å·¥å…·çš„æˆæœ¬å˜æˆäº†å®ƒèƒ½ä¸ºä¸šåŠ¡å¸¦æ¥å¤šå°‘ä»·å€¼ã€‚</p><h4 id="æµ‹è¯•è‡ªåŠ¨åŒ–å›¢é˜Ÿæ²¡æœ‰å¾ˆå¥½åœ°å…‘ç°æ‰¿è¯ºæ•ˆç›Š"><a href="#æµ‹è¯•è‡ªåŠ¨åŒ–å›¢é˜Ÿæ²¡æœ‰å¾ˆå¥½åœ°å…‘ç°æ‰¿è¯ºæ•ˆç›Š" class="headerlink" title="æµ‹è¯•è‡ªåŠ¨åŒ–å›¢é˜Ÿæ²¡æœ‰å¾ˆå¥½åœ°å…‘ç°æ‰¿è¯ºæ•ˆç›Š"></a>æµ‹è¯•è‡ªåŠ¨åŒ–å›¢é˜Ÿæ²¡æœ‰å¾ˆå¥½åœ°å…‘ç°æ‰¿è¯ºæ•ˆç›Š</h4><p>ä»¤äººå¤±æœ›çš„æ˜¯ï¼Œå®ç°è‡ªåŠ¨åŒ–é¢„æœŸæ•ˆç›Šçš„å›¢é˜Ÿæ¯”ä¾‹åªæœ‰ä¸€åŠå·¦å³ã€‚ç”šè‡³è¿ CI&#x2F;CD å’Œè‡ªåŠ¨åŒ–çš„æ•´åˆä¹Ÿä½äºé¢„æœŸï¼Œå°½ç®¡é•¿æœŸä»¥æ¥ï¼Œæ•æ·å®è·µæ¨åŠ¨äº†å‘ CI&#x2F;CD çš„è½¬å˜ã€‚</p><h3 id="ä½ çš„å›¢é˜Ÿä¸­æœ‰å¤šå¤§æ¯”ä¾‹çš„äººç›®å‰ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—äº†ä»¥ä¸‹å¥½å¤„ï¼Ÿ"><a href="#ä½ çš„å›¢é˜Ÿä¸­æœ‰å¤šå¤§æ¯”ä¾‹çš„äººç›®å‰ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—äº†ä»¥ä¸‹å¥½å¤„ï¼Ÿ" class="headerlink" title="ä½ çš„å›¢é˜Ÿä¸­æœ‰å¤šå¤§æ¯”ä¾‹çš„äººç›®å‰ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—äº†ä»¥ä¸‹å¥½å¤„ï¼Ÿ"></a>ä½ çš„å›¢é˜Ÿä¸­æœ‰å¤šå¤§æ¯”ä¾‹çš„äººç›®å‰ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—äº†ä»¥ä¸‹å¥½å¤„ï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/6.png" alt="6"></p><h4 id="ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿ</h4><p>è¿™æ˜¯å·¥å…·çš„å¤±è´¥å—ï¼Ÿå¼€æ”¾æºç å·¥å…·å’Œå•†ä¸šå·¥å…·éƒ½æ˜¯æˆç†Ÿçš„å·¥å…·ã€‚å®ƒä»¬çš„èƒ½åŠ›å’Œå±€é™æ€§éƒ½æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„â€“è‡³å°‘åœ¨æ¯å¤©ä½¿ç”¨å®ƒä»¬çš„äººå½“ä¸­æ˜¯è¿™æ ·ã€‚ä»ä¸€äº›æ·±å…¥çš„åç»­è®¿è°ˆä¸­å¯ä»¥çœ‹å‡ºï¼Œå…³äºä»€ä¹ˆå¯ä»¥åšï¼Œä»€ä¹ˆä¸å¯ä»¥åšçš„æ²Ÿé€šä¼¼ä¹ä»æœªå¾—åˆ°å¾ˆå¥½çš„ç®¡ç†ï¼Œå°¤å…¶æ˜¯åœ¨å¯»æ±‚åˆç†çš„æŠ•èµ„å›æŠ¥æ—¶ã€‚å°†æ‰‹åŠ¨æµ‹è¯•çš„ç™¾åˆ†æ¯”ç§°ä¸ºè‡ªåŠ¨åŒ–æµ‹è¯•çš„è¯±æƒ‘ä¼šè®©å›¢é˜Ÿèµ°ä¸Šä¸€æ¡è‡ªåŠ¨åŒ–çš„é“è·¯ï¼Œè€Œä¸è€ƒè™‘æ‰‹åŠ¨æµ‹è¯•æ˜¯å¦é€‚åˆè‡ªåŠ¨åŒ–å¹¶èƒ½å¸¦æ¥ä»·å€¼ã€‚</p><p>å…³é”®é—®é¢˜æ˜¯ï¼šæ‚¨èƒ½ç¡®å®šè§£å†³æ–¹æ¡ˆçš„æ‰€æœ‰éƒ¨åˆ†å—ï¼Ÿå³ä½¿æ‚¨çš„å›¢é˜Ÿå®ç°äº†æ‰¿è¯ºçš„æ•ˆç›Šï¼Œä½†è€ƒè™‘åˆ°ç°ä»£ IT ä¸–ç•Œçš„å…¨çƒæ€§å’Œäº‘&#x2F;åº”ç”¨ç¨‹åºæ¥å£äº’è”ä¸–ç•Œçš„å¤æ‚æ€§ï¼Œæœ‰äº›éƒ¨åˆ†å¯èƒ½ä¼šè¢«å¿½è§†ã€‚</p><p>å¤šå¹´æ¥ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ç ”ç©¶æµ‹è¯•è‡ªåŠ¨åŒ–è¿™ä¸€ä¸»é¢˜ï¼Œä½†ä»¤äººå¤±æœ›çš„æ˜¯ï¼Œä¼ä¸šä»åœ¨åŠªåŠ›ä½¿æµ‹è¯•è‡ªåŠ¨åŒ–å‘æŒ¥ä½œç”¨ã€‚è°ƒæŸ¥ç»“æœè¡¨æ˜ï¼Œæ‹¥æœ‰æˆç†Ÿæ•æ·æµç¨‹çš„å›¢é˜Ÿé€šå¸¸èƒ½ä»æµ‹è¯•è‡ªåŠ¨åŒ–æ´»åŠ¨ä¸­è·å¾—æ›´å¤šç›Šå¤„ã€‚è¿™ä¸ªä¿¡æ¯å¾ˆæ˜ç¡®ï¼šæ­£ç¡®çš„æµç¨‹ã€æ˜ç¡®çš„æœŸæœ›ã€è‰¯å¥½çš„éœ€æ±‚ä»¥åŠèƒ½å¤Ÿæ”¯æŒè¿™äº›æµç¨‹çš„å›¢é˜Ÿï¼Œéƒ½èƒ½å¢åŠ åœ¨ç°ä»£ä¸–ç•Œä¸­å–å¾—æˆåŠŸæ‰€éœ€çš„æ”¶ç›Šã€‚</p><h4 id="è‡ªåŠ¨åŒ–åœ¨å“ªäº›æ–¹é¢èƒ½ä¸ºæ‚¨å¸¦æ¥æœ€å¤§æ•ˆç›Šï¼Ÿ"><a href="#è‡ªåŠ¨åŒ–åœ¨å“ªäº›æ–¹é¢èƒ½ä¸ºæ‚¨å¸¦æ¥æœ€å¤§æ•ˆç›Šï¼Ÿ" class="headerlink" title="è‡ªåŠ¨åŒ–åœ¨å“ªäº›æ–¹é¢èƒ½ä¸ºæ‚¨å¸¦æ¥æœ€å¤§æ•ˆç›Šï¼Ÿ"></a>è‡ªåŠ¨åŒ–åœ¨å“ªäº›æ–¹é¢èƒ½ä¸ºæ‚¨å¸¦æ¥æœ€å¤§æ•ˆç›Šï¼Ÿ</h4><p>è‡ªåŠ¨åŒ–æ‰€èƒ½æä¾›çš„è¿œä¸æ­¢å‰ç«¯æµ‹è¯•æˆ–å•å…ƒæµ‹è¯•ä¸­çš„ä¸‹æ‹‰æµ‹è¯•ã€‚å¤šå¹´æ¥ï¼Œå•å…ƒæµ‹è¯•å’ŒåŠŸèƒ½æµ‹è¯•ä¸€ç›´ä¸»å¯¼ç€è‡ªåŠ¨åŒ–å·¥ä½œã€‚</p><p>ç°åœ¨ï¼Œç”±äºéœ€è¦åŠ å¿«æ„å»ºé€Ÿåº¦ã€è·å–å¤§é‡æ•°æ®ã€æ„å»ºç¯å¢ƒå’Œéƒ¨ç½²é«˜è´¨é‡ä»£ç ï¼Œè‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆä¸ºæ‰€æœ‰è¿™äº›é¢†åŸŸå¸¦æ¥äº†ä»·å€¼ã€‚</p><h3 id="åœ¨æµ‹è¯•å‘¨æœŸçš„å“ªäº›å…³é”®é˜¶æ®µï¼Œæ‚¨ç›®å‰èƒ½ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—æœ€å¤§æ”¶ç›Šï¼Ÿ"><a href="#åœ¨æµ‹è¯•å‘¨æœŸçš„å“ªäº›å…³é”®é˜¶æ®µï¼Œæ‚¨ç›®å‰èƒ½ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—æœ€å¤§æ”¶ç›Šï¼Ÿ" class="headerlink" title="åœ¨æµ‹è¯•å‘¨æœŸçš„å“ªäº›å…³é”®é˜¶æ®µï¼Œæ‚¨ç›®å‰èƒ½ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—æœ€å¤§æ”¶ç›Šï¼Ÿ"></a>åœ¨æµ‹è¯•å‘¨æœŸçš„å“ªäº›å…³é”®é˜¶æ®µï¼Œæ‚¨ç›®å‰èƒ½ä»æµ‹è¯•è‡ªåŠ¨åŒ–ä¸­è·å¾—æœ€å¤§æ”¶ç›Šï¼Ÿ</h3><h4 id="ç›˜ç‚¹"><a href="#ç›˜ç‚¹" class="headerlink" title="ç›˜ç‚¹"></a>ç›˜ç‚¹</h4><p>ä½ä»£ç è§£å†³æ–¹æ¡ˆè¶Šæ¥è¶Šå—æ¬¢è¿ã€‚å¼€æ”¾æºä»£ç æ¯å‘¨éƒ½æœ‰æ–°å·¥å…·é—®ä¸–ã€‚æˆç†Ÿçš„å•†ä¸šå·¥å…·ä¹Ÿåœ¨ä¸æ–­æ¨å‡ºã€‚è¿™æ„å‘³ç€ï¼Œè‡ªåŠ¨åŒ–å·¥å…·åŒ…æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´åŠ ä¸°å¯Œå’Œå¼ºå¤§ã€‚æˆ‘ä»¬å¯ä»¥ä»å¤§é‡å·¥å…·ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œè¿™äº›å·¥å…·åˆ©ç”¨äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ çš„çˆ†ç‚¸å¼å¢é•¿ï¼Œä¸ºå·¥å…·é›†å¸¦æ¥äº†é¢å¤–çš„ä»·å€¼ã€å¯ç”¨æ€§å’ŒåŠŸèƒ½ã€‚</p><p>ä½†æœ‰äº›çœ‹æ³•éœ€è¦åŠ ä»¥è§£å†³ã€‚å¾ˆå¤šæ—¶å€™ï¼Œäººä»¬è®¤ä¸ºè‡ªåŠ¨åŒ–æ— æ³•å…‘ç°å…¶æ‰¿è¯ºã€‚ä½œä¸ºä¸€ä¸ªè¡Œä¸šï¼Œæˆ‘ä»¬éœ€è¦è§£å†³è‡ªåŠ¨åŒ–é—®é¢˜ï¼Œå› ä¸ºå®ƒå¯¹äºåœ¨ç°ä»£ä¸–ç•Œä¸­ä»¥æˆ‘ä»¬æ‰€æœ‰äººéƒ½éœ€è¦çš„é€Ÿåº¦å’Œè´¨é‡äº¤ä»˜æˆåŠŸè‡³å…³é‡è¦ã€‚</p><h4 id="ç»„ç»‡åº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ"><a href="#ç»„ç»‡åº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç»„ç»‡åº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ"></a>ç»„ç»‡åº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ</h4><p>é€šè¿‡ç ”ç©¶ï¼Œæˆ‘ä»¬å¾—å‡ºä»¥ä¸‹å»ºè®®ï¼Œä»¥æé«˜è´¨é‡è‡ªåŠ¨åŒ–è®¡åˆ’çš„ä»·å€¼ï¼š</p><ul><li>å°½æ—©ä¸è´¨é‡è‡ªåŠ¨åŒ–ä¸“å®¶åˆä½œã€‚</li><li>åœ¨åˆ›å»ºéœ€æ±‚æ—¶å°±å¼€å§‹è‡ªåŠ¨åŒ–ï¼›åœ¨éœ€æ±‚å’Œæ•…äº‹ä¸­æ„å»ºè‡ªåŠ¨åŒ–ä¼˜å…ˆçš„æ–¹æ³•ã€‚</li><li>åœ¨å¼€å§‹è‡ªåŠ¨åŒ–ä¹‹å‰ï¼Œå…ˆå°±è‡ªåŠ¨åŒ–éœ€æ±‚è¾¾æˆä¸€è‡´ã€‚</li><li>å…³æ³¨ä»€ä¹ˆèƒ½ä¸ºå®¢æˆ·å’Œä¼ä¸šå¸¦æ¥æœ€å¤§åˆ©ç›Šï¼Œè€Œä¸æ˜¯æŠ•èµ„å›æŠ¥ç‡ã€‚</li><li>å®šæœŸå®¡æŸ¥å·¥å…·å’Œæ¡†æ¶ã€‚</li><li>è§„åˆ’è‡³å°‘æœªæ¥ä¸‰å¹´çš„è·¯çº¿å›¾ã€‚</li><li>ä¸€ç§å·¥å…·ä¸èƒ½åŒ…æ‰“å¤©ä¸‹ã€‚é€‰æ‹©æœ€é€‚åˆå·¥ä½œçš„å·¥å…·ã€‚ä¸è¦è¯•å›¾è®©ä¸€ç§å·¥å…·åŒ…åŠä¸€åˆ‡ã€‚</li><li>æŠ•èµ„äºäººã€‚ä¸è¦å†è¿½é€ç‹¬è§’å…½ï¼Œè¦ä¸ä½ çš„å‘˜å·¥åˆä½œï¼Œä»–ä»¬äº†è§£ä½ çš„ä¸šåŠ¡ã€‚</li></ul><p>å˜é©çš„å¥½å¤„ä¸æ˜¯ç«‹ç«¿è§å½±çš„ã€‚ä½ å¿…é¡»ç•™å‡ºæ—¶é—´ï¼Œè®©å˜é©åœ¨ä½ çš„é¡¹ç›®ç®¡é“ä¸­è¿›è¡Œï¼Œè®©æ€ç»´æ–¹å¼å¾—åˆ°è°ƒæ•´å’Œæ”¹å˜ã€‚å½“å®ƒä»¬å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨åŒ–å°±èƒ½å®ç°å®ƒæ‰€æ‰¿è¯ºçš„ä»·å€¼ â€”â€” ä¸ä»…ä»…æ˜¯ä¸€åŠæ—¶é—´ï¼Œè€Œæ˜¯å¤§éƒ¨åˆ†æ—¶é—´ï¼</p><p>æœ€åä¸€ä¸ªæƒ³æ³•ï¼šå¯æŒç»­å‘å±•æ˜¯ä¸€ä¸ªæ—¥ç›Šå¢é•¿çš„é‡è¦è¶‹åŠ¿ï¼Œä¸ä»…åœ¨ IT é¢†åŸŸï¼Œåœ¨æ‰€æœ‰é¢†åŸŸéƒ½æ˜¯å¦‚æ­¤ã€‚æˆ‘ä»¬ç°åœ¨å°±éœ€è¦å¼€å§‹æ€è€ƒè‡ªåŠ¨åŒ–å¦‚ä½•å‘ä¸–ç•Œå±•ç¤ºå…¶æ•ˆç›Šå’Œæˆæœ¬ã€‚æ‚¨çŸ¥é“è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç¢³è¶³è¿¹æ˜¯å¤šå°‘å—ï¼Ÿæ‚¨è¿˜éœ€è¦å¤šä¹…æ‰èƒ½ä¸ºæ‚¨çš„ç»„ç»‡æŠ¥å‘Šç¢³è¶³è¿¹ï¼Ÿç°åœ¨æ˜¯æ—¶å€™å¼€å§‹è€ƒè™‘å¦‚ä½•ä»¥åŠå¦‚ä½•åšäº†ï¼Œè¿™æ ·å½“æœ‰äººæå‡ºè¿™ä¸ªé—®é¢˜æ—¶ï¼Œæ‚¨å°±å·²ç»åšå¥½äº†å‡†å¤‡ã€‚</p><h2 id="è´¨é‡åŸºç¡€è®¾æ–½æµ‹è¯•å’Œä¾›åº”"><a href="#è´¨é‡åŸºç¡€è®¾æ–½æµ‹è¯•å’Œä¾›åº”" class="headerlink" title="è´¨é‡åŸºç¡€è®¾æ–½æµ‹è¯•å’Œä¾›åº”"></a>è´¨é‡åŸºç¡€è®¾æ–½æµ‹è¯•å’Œä¾›åº”</h2><p>æµ‹è¯•ç¯å¢ƒç®¡ç†ä¸€ç›´æ˜¯ã€Šä¸–ç•Œè´¨é‡æŠ¥å‘Šã€‹è°ƒæŸ¥çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚<br>ä»Šå¹´ï¼Œæˆ‘ä»¬åˆ†æäº†æµ‹è¯•ç¯å¢ƒè°ƒé…æ˜¯å¦‚ä½•è°ƒæ•´çš„ï¼Œä»¥åŠéç”Ÿäº§ç¯å¢ƒçš„äº‘ä¾›åº”æ˜¯å¦‚ä½•èµ·é£çš„ã€‚äº‘æµ‹è¯•æ˜¯å¦‚ä½•å…´èµ·çš„ã€‚<br>äº‘æµ‹è¯•åœ¨è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­å æ®è¶Šæ¥è¶Šé‡è¦çš„ä½ç½®ã€‚äº‘æµ‹è¯•åœ¨è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­å æ®äº†æ›´é‡è¦çš„ä½ç½®ï¼Œå› ä¸ºè¶Šæ¥è¶Šå¤šçš„ç¯å¢ƒå’Œäº‘æµ‹è¯•åœ¨è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­å æ®è¶Šæ¥è¶Šé‡è¦çš„ä½ç½®ã€‚åœ¨ã€Šä¸–ç•Œè´¨é‡æŠ¥å‘Šã€‹çš„æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨äº‘æµ‹è¯•çš„ç°çŠ¶å’Œé‡‡ç”¨æƒ…å†µã€‚</p><h3 id="äº‘æµ‹è¯•ç¯å¢ƒé…ç½®"><a href="#äº‘æµ‹è¯•ç¯å¢ƒé…ç½®" class="headerlink" title="äº‘æµ‹è¯•ç¯å¢ƒé…ç½®"></a>äº‘æµ‹è¯•ç¯å¢ƒé…ç½®</h3><p>éšç€è¶Šæ¥è¶Šå¤šçš„å·¥ä½œè´Ÿè½½è¿ç§»åˆ°äº‘ä¸­ï¼Œæˆ‘ä»¬è¯¢é—®äº†ä¼ä¸šåœ¨äº‘ä¸­è°ƒé…éç”Ÿäº§ç¯å¢ƒçš„æ¯”ä¾‹ã€‚<br>ç»“æœæ˜¾ç¤ºäº†æ˜æ˜¾çš„è¿›æ­¥ï¼Œä½†åœ¨è¿™ä¸€é¢†åŸŸä»æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œå› ä¸ºè¿‘ä¸€åŠçš„ä¼ä¸šåªåœ¨äº‘ä¸Šé…ç½®äº†æœ€å¤š 25% çš„éç”Ÿäº§ç¯å¢ƒã€‚æ€»ä½“è€Œè¨€ï¼Œ49% çš„ä¼ä¸šåœ¨äº‘ä¸Šéƒ¨ç½²äº† 50% ä»¥ä¸Šçš„éç”Ÿäº§ç¯å¢ƒã€‚</p><h3 id="åœ¨äº‘ä¸Šé…ç½®çš„éç”Ÿäº§ç¯å¢ƒçš„æ¯”ä¾‹æ˜¯å¤šå°‘"><a href="#åœ¨äº‘ä¸Šé…ç½®çš„éç”Ÿäº§ç¯å¢ƒçš„æ¯”ä¾‹æ˜¯å¤šå°‘" class="headerlink" title="åœ¨äº‘ä¸Šé…ç½®çš„éç”Ÿäº§ç¯å¢ƒçš„æ¯”ä¾‹æ˜¯å¤šå°‘"></a>åœ¨äº‘ä¸Šé…ç½®çš„éç”Ÿäº§ç¯å¢ƒçš„æ¯”ä¾‹æ˜¯å¤šå°‘</h3><p><img src="/2023/10/world-quality-report/8.png" alt="8"></p><p>æˆ‘ä»¬æ³¨æ„åˆ°éç”Ÿäº§æ€§å·¥ä½œè´Ÿè½½æ­£è¶Šæ¥è¶Šå¤šåœ°è½¬ç§»åˆ°äº‘ä¸­ï¼Œå› æ­¤æˆ‘ä»¬è¿˜è°ƒæŸ¥äº†éç”Ÿäº§æ€§ç¯å¢ƒçš„äº‘å¹³å°ç­–ç•¥ã€‚ç»“æœå‘ç°ï¼Œè®¸å¤šä¼ä¸šï¼ˆ44%ï¼‰ç›®å‰ä½¿ç”¨æ··åˆï¼ˆå†…éƒ¨éƒ¨ç½²åŠ å•ä¸€äº‘æä¾›å•†ï¼‰ç¯å¢ƒæˆ˜ç•¥ã€‚çº¦æœ‰ 38% çš„ä¼ä¸šå®æ–½äº†å¤šäº‘æˆ˜ç•¥ã€‚æ­¤å¤–ï¼Œå¹³å‡ 30% çš„å—è®¿è€…å·²å¼€å§‹è®¤çœŸè€ƒè™‘å°†æµ‹è¯•ç¯å¢ƒè¿ç§»åˆ°å¤šä¼ä¸šå†…éƒ¨ï¼ˆä¼ä¸šå†…éƒ¨åŠ å¤šäº‘æä¾›å•†ï¼‰æ¨¡å¼ã€‚</p><p>è¿™äº›æ•°æ®è¡¨æ˜ï¼Œéç”Ÿäº§ç¯å¢ƒå‘äº‘çš„è¿ç§»è¿œæœªç»“æŸã€‚æˆ‘ä»¬é¢„è®¡åœ¨éç”Ÿäº§ç¯å¢ƒä¸­é‡‡ç”¨å¤šäº‘ã€å¤šå†…éƒ¨éƒ¨ç½²æˆ˜ç•¥çš„æƒ…å†µä¼šè¶Šæ¥è¶Šå¤šï¼Œå› ä¸ºè¿™äº›è§£å†³æ–¹æ¡ˆå¯¹ç¾éš¾æ¢å¤ã€å®‰å…¨æ€§å’Œæˆæœ¬æ•ˆç‡éƒ½æœ‰ç§¯æçš„å½±å“ã€‚</p><h3 id="ä½ äº‘å¹³å°é…ç½®éç”Ÿäº§ç¯å¢ƒçš„ç­–ç•¥æ˜¯ä»€ä¹ˆ"><a href="#ä½ äº‘å¹³å°é…ç½®éç”Ÿäº§ç¯å¢ƒçš„ç­–ç•¥æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä½ äº‘å¹³å°é…ç½®éç”Ÿäº§ç¯å¢ƒçš„ç­–ç•¥æ˜¯ä»€ä¹ˆ"></a>ä½ äº‘å¹³å°é…ç½®éç”Ÿäº§ç¯å¢ƒçš„ç­–ç•¥æ˜¯ä»€ä¹ˆ</h3><p><img src="/2023/10/world-quality-report/9.png" alt="9"></p><h4 id="æµ‹è¯•ç¯å¢ƒé…ç½®è‡ªåŠ¨åŒ–"><a href="#æµ‹è¯•ç¯å¢ƒé…ç½®è‡ªåŠ¨åŒ–" class="headerlink" title="æµ‹è¯•ç¯å¢ƒé…ç½®è‡ªåŠ¨åŒ–"></a>æµ‹è¯•ç¯å¢ƒé…ç½®è‡ªåŠ¨åŒ–</h4><p>å°†éç”Ÿäº§ç¯å¢ƒè¿ç§»åˆ°äº‘ä¸­çš„ä¸€å¤§ä¼˜åŠ¿æ˜¯ï¼Œäº‘è§£å†³æ–¹æ¡ˆèƒ½è®©æµ‹è¯•ç¯å¢ƒçš„è‡ªåŠ¨è°ƒé…å˜å¾—æ›´åŠ å®¹æ˜“ã€‚æˆ‘ä»¬è°ƒæŸ¥äº†ä¼ä¸šä½¿ç”¨å“ªäº›å·¥å…·æ¥å®ç°æµ‹è¯•ç¯å¢ƒçš„è‡ªåŠ¨é…ç½®ã€‚ç»“æœæ˜¾ç¤ºï¼Œä¸åŒçš„å¯ç”¨é€‰é¡¹åˆ†å¸ƒå‡åŒ€ã€‚å¤šè¾¾ 41% çš„å—è®¿è€…ä½¿ç”¨æ··åˆå·¥å…·ç­–ç•¥ï¼Œå…¶ä¸­æ—¢æœ‰ç°æˆçš„å•†ç”¨å·¥å…·ï¼Œä¹Ÿæœ‰å¼€æºé€‰é¡¹ã€‚è¯´åˆ°äº‘åŸç”Ÿå·¥å…·æˆ–å†…éƒ¨ä¾›åº”å•†æ„å»ºçš„å·¥å…·ç»„åˆåå¥½ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°çš„å‰æ™¯æ˜¯ç›¸ä¼¼çš„ã€‚</p><p>ä»è¿™é¡¹åˆ†æä¸­å¯ä»¥çœ‹å‡ºï¼Œä¼ä¸šè¿˜æ²¡æœ‰å‡†å¤‡å¥½æŠŠæ‰€æœ‰é¸¡è›‹éƒ½æ”¾åœ¨åŒä¸€ä¸ªç¯®å­é‡Œã€‚å› æ­¤ï¼Œç›®å‰é‡‡å–çš„æ˜¯å¤šç§å·¥å…·ç»„åˆç­–ç•¥ã€‚æˆ‘ä»¬çœ‹åˆ°ï¼Œç”±äºè®¸å¤šå·¥å…·éƒ½æ˜¯è¿™ä¸€é¢†åŸŸçš„æ–°å·¥å…·ï¼Œå› æ­¤ä¼ä¸šåœ¨å·¥å…·ä½¿ç”¨æ–¹é¢é‡‡å–äº†ä¸€ç§å¹³è¡¡çš„æ–¹æ³•ã€‚</p><h3 id="ä½ å½“å‰è‡ªåŠ¨åŒ–ç«¯åˆ°ç«¯éç”Ÿäº§ç¯å¢ƒé…ç½®çš„å·¥å…·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä½ å½“å‰è‡ªåŠ¨åŒ–ç«¯åˆ°ç«¯éç”Ÿäº§ç¯å¢ƒé…ç½®çš„å·¥å…·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä½ å½“å‰è‡ªåŠ¨åŒ–ç«¯åˆ°ç«¯éç”Ÿäº§ç¯å¢ƒé…ç½®çš„å·¥å…·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä½ å½“å‰è‡ªåŠ¨åŒ–ç«¯åˆ°ç«¯éç”Ÿäº§ç¯å¢ƒé…ç½®çš„å·¥å…·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/10.png" alt="10"></p><h4 id="äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•"><a href="#äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•" class="headerlink" title="äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•"></a>äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•</h4><p>éšç€ç»„ç»‡éƒ¨ç½²æ›´å¤šçš„ç¯å¢ƒè¿›å…¥äº‘ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›çœ‹åˆ°äº‘æµ‹è¯•åœ¨é‡è¦æ€§ã€‚é€šè¿‡äº‘æµ‹è¯•ï¼Œç»„ç»‡å¯ä»¥éªŒè¯å¯æ‰©å±•æ€§ã€æ€§èƒ½ã€å®‰å…¨æ€§ã€å¯é æ€§ã€ç¾éš¾æ¢å¤ã€ç¯å¢ƒçš„äº’æ“ä½œæ€§å’Œå¤šç§Ÿæˆ·å’Œäº‘ä¸Šçš„åº”ç”¨ç¨‹åºã€‚è¿ç§»åº”ç”¨ç¨‹åºæ—¶åˆ°äº‘ï¼ŒåŠŸèƒ½å’ŒéåŠŸèƒ½æ–¹é¢åº”ç”¨ç¨‹åºå¿…é¡»è¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿æ•´ä½“åŠŸèƒ½å’Œæ€§èƒ½ä¿æŒæ‰€éœ€ã€‚åœ¨æˆ‘ä»¬ä»Šå¹´çš„è°ƒæŸ¥ä¸­ï¼Œæˆ‘ä»¬é—®å¦‚æœç»„ç»‡å°†äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•ä½œä¸ºä¸€éƒ¨åˆ†ä»–ä»¬çš„å¼€å‘ç”Ÿå‘½å‘¨æœŸã€‚ç»“æœè¡¨æ˜ï¼Œå¤§çº¦ 96% çš„æ‰€æœ‰å—è®¿è€…éƒ½æåˆ°ç°åœ¨åŒ…æ‹¬äº‘æµ‹è¯•ä½œä¸ºæµ‹è¯•ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ï¼Œ57% çš„äººå·²ç»å°†äº‘çº³å…¥å…¶ä¸­å¯¹å¤§å¤šæ•°é¡¹ç›®è¿›è¡Œæµ‹è¯•ï¼Œ39% çš„äººå£°ç§°å·²å°†å…¶åŒ…å«åœ¨å†…è‡³å°‘å¯¹äºæŸäº›é¡¹ç›®ã€‚</p><p>åœ¨å°†äº‘æµ‹è¯•åŠŸèƒ½çº³å…¥è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸæ–¹é¢ï¼Œè¿™æ˜¯ä¸€ä¸ªç§¯æçš„ä¸Šå‡è¶‹åŠ¿ã€‚æˆ‘ä»¬å¼ºçƒˆå»ºè®®ç»§ç»­ä¿æŒè¿™ä¸€è¶‹åŠ¿ï¼Œå¹¶å°†äº‘æµ‹è¯•å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•ä½œä¸ºç”Ÿå‘½å‘¨æœŸçš„å¿…ç»é˜¶æ®µã€‚</p><h3 id="ä½ çš„ç»„ç»‡æ˜¯å¦å°†äº‘å’ŒåŸºç¡€æ¶æ„æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ï¼Ÿ"><a href="#ä½ çš„ç»„ç»‡æ˜¯å¦å°†äº‘å’ŒåŸºç¡€æ¶æ„æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ï¼Ÿ" class="headerlink" title="ä½ çš„ç»„ç»‡æ˜¯å¦å°†äº‘å’ŒåŸºç¡€æ¶æ„æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ï¼Ÿ"></a>ä½ çš„ç»„ç»‡æ˜¯å¦å°†äº‘å’ŒåŸºç¡€æ¶æ„æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/11.png" alt="11"></p><p>æˆ‘ä»¬è¿˜è¯¢é—®äº†å—è®¿è€…äº‘æµ‹è¯•å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•åŒ…æ‹¬å“ªäº›ç±»å‹çš„é¡¹ç›®ã€‚ä¸å¾€å¹´ç›¸æ¯”ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªé‡å¤§è½¬å˜ï¼Œä»Šå¹´çº¦æœ‰ 40% çš„å—è®¿è€…æåˆ°ä»–ä»¬çš„æ‰€æœ‰é¡¹ç›®ç°åœ¨éƒ½å°†äº‘æµ‹è¯•ä½œä¸ºè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ã€‚çº¦ 27% çš„å—è®¿è€…è®¤ä¸ºè¿™åªé€‚ç”¨äºäº‘è¿ç§»é¡¹ç›®ã€‚</p><p>è¿™ä¸€è¶‹åŠ¿ä»¤äººé¼“èˆï¼Œå› ä¸ºäº‘è®¡ç®—å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•æ›¾ç»æ˜¯åœ¨æ•°æ®ä¸­å¿ƒå…¸å‹çš„è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸä¹‹å¤–è¿›è¡Œçš„ä¸€ä¸ªé˜¶æ®µã€‚</p><h3 id="ä»€ä¹ˆç±»å‹çš„é¡¹ç›®ï¼ˆå¦‚æœæœ‰ï¼‰å°†äº‘æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Ÿ"><a href="#ä»€ä¹ˆç±»å‹çš„é¡¹ç›®ï¼ˆå¦‚æœæœ‰ï¼‰å°†äº‘æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆç±»å‹çš„é¡¹ç›®ï¼ˆå¦‚æœæœ‰ï¼‰å°†äº‘æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Ÿ"></a>ä»€ä¹ˆç±»å‹çš„é¡¹ç›®ï¼ˆå¦‚æœæœ‰ï¼‰å°†äº‘æµ‹è¯•ä½œä¸ºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/12.png" alt="12"></p><p>æˆ‘ä»¬å°†äº‘æµ‹è¯•è§†ä¸ºä¸€ç§å°†è·å¾—è®¤å¯çš„è¶‹åŠ¿å¹¶åœ¨æœªæ¥å‡ å¹´å¢åŠ é‡‡ç”¨ï¼Œæˆ‘ä»¬æ˜¯è‚¯å®šä¼šçœ‹åˆ°æ›´å¤šçš„ç»„ç»‡è®¢é˜…äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•ä¸å¾€å¹´ç›¸æ¯”ã€‚è¿™ç”šè‡³ç”±äºè¶Šæ¥è¶Šå¤šåœ°é‡‡ç”¨äº‘å’Œæ›´åŠ å…³æ³¨æ½œåœ¨çš„å®‰å…¨å’Œæ€§èƒ½é—®é¢˜</p><h4 id="äº‘æµ‹è¯•ç­–ç•¥"><a href="#äº‘æµ‹è¯•ç­–ç•¥" class="headerlink" title="äº‘æµ‹è¯•ç­–ç•¥"></a>äº‘æµ‹è¯•ç­–ç•¥</h4><p>å¦‚æœäº‘æµ‹è¯•è¶Šæ¥è¶Šé‡è¦ï¼Œé‚£ä¹ˆäº†è§£ç»„ç»‡åœ¨å®šä¹‰äº‘æ–¹é¢çš„æˆç†Ÿç¨‹åº¦ä»–ä»¬é¡¹ç›®çš„æµ‹è¯•ç­–ç•¥ä¹ŸåŒæ ·é‡è¦ã€‚åœ¨è¿™é¡¹è°ƒæŸ¥ä¸­å‘ç°äº‘æµ‹è¯•ç­–ç•¥ä»è¿œæœªå¥æ•ˆï¼Œéœ€è¦æ›´æˆç†Ÿã€‚æ•´æ•´ä¸€åŠï¼ˆ50%ï¼‰çš„å—è®¿è€…æåˆ°ä»–ä»¬çš„äº‘æµ‹è¯•ç­–ç•¥åªæ˜¯æœ‰äº›æœ‰æ•ˆï¼Œè€Œ 37% çš„å—è®¿è€…æåˆ°å®ƒé€‚åº¦æœ‰æ•ˆã€‚</p><p>è¿™ä¸€ç»“æœæ ‡å¿—ç€äº‘æµ‹è¯•çš„æ•´ä½“æ¦‚å¿µå’Œäº‘æµ‹è¯•çš„ç›¸å…³è‡ªåŠ¨åŒ–è¿˜å¤„äºèµ·æ­¥é˜¶æ®µåœ¨å¤§å¤šæ•°ç»„ç»‡ä¸­ã€‚è¿™ä¸€è§‚å¯Ÿçš„ä¸»è¦æ”¶è·æ˜¯ç»„ç»‡åº”è¯¥ç´§æ€¥å¼€å§‹åˆ›å»ºä¸€ä¸ªç«¯åˆ°ç«¯çš„ç¬¦åˆçš„äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•ç­–ç•¥ç»„ç»‡çš„æ•´ä½“äº‘é‡‡ç”¨æˆ˜ç•¥ã€‚</p><h3 id="ä½ ç»„ç»‡çš„ç«¯åˆ°ç«¯äº‘æµ‹è¯•ç­–ç•¥çš„æœ‰æ•ˆæ€§å¦‚ä½•ï¼Ÿ"><a href="#ä½ ç»„ç»‡çš„ç«¯åˆ°ç«¯äº‘æµ‹è¯•ç­–ç•¥çš„æœ‰æ•ˆæ€§å¦‚ä½•ï¼Ÿ" class="headerlink" title="ä½ ç»„ç»‡çš„ç«¯åˆ°ç«¯äº‘æµ‹è¯•ç­–ç•¥çš„æœ‰æ•ˆæ€§å¦‚ä½•ï¼Ÿ"></a>ä½ ç»„ç»‡çš„ç«¯åˆ°ç«¯äº‘æµ‹è¯•ç­–ç•¥çš„æœ‰æ•ˆæ€§å¦‚ä½•ï¼Ÿ</h3><p><img src="/2023/10/world-quality-report/13.png" alt="13"></p><h4 id="äº‘æµ‹è¯•è‡ªåŠ¨åŒ–"><a href="#äº‘æµ‹è¯•è‡ªåŠ¨åŒ–" class="headerlink" title="äº‘æµ‹è¯•è‡ªåŠ¨åŒ–"></a>äº‘æµ‹è¯•è‡ªåŠ¨åŒ–</h4><p>æˆ‘ä»¬è¿˜è°ƒæŸ¥äº†ç»„ç»‡é‡‡å–çš„æ–¹æ³•èµ°å‘äº‘æµ‹è¯•çš„è‡ªåŠ¨åŒ–ä»¥åŠä»€ä¹ˆç±»å‹çš„ä»–ä»¬ç”¨äºäº‘æµ‹è¯•è‡ªåŠ¨åŒ–çš„å·¥å…·ã€‚å¤§çº¦ 33% çš„äººå—è®¿è€…å›ç­”è¯´ï¼šäº‘æµ‹è¯•å·¥å…·æ˜¯ä¾æ®é¡¹ç›®å…·ä½“è€Œå†³å®šçš„ã€‚ç›®å‰ç›¸åŒæ¯”ä¾‹ (33%) çš„äººæ›´å–œæ¬¢å¼€æºå·¥å…·ï¼Œè€Œ 31% çš„äººæ›´å–œæ¬¢äº‘åŸç”Ÿå·¥å…·ã€‚</p><p>æˆ‘ä»¬è§‚å¯Ÿåˆ°è·¨ç»„ç»‡çš„å·¥å…·ç­–ç•¥éå¸¸ç›¸ä¼¼ï¼Œè¿™ä¹Ÿè¡¨æ˜æ²¡æœ‰å“ªä¸€ä¸ªå·¥å…·æˆ–æ˜¯ç­–ç•¥æ˜¯ä¸€æç‹¬ç§€çš„ï¼Œå› æ­¤å¯¹äºç»„ç»‡ï¼Œæ‰€æœ‰é€‰é¡¹ï¼ˆå¼€æºã€ç°æˆã€æ··åˆã€ç­‰ï¼‰å‡å¯è€ƒè™‘ã€‚</p><p>æˆ‘ä»¬çš„å»ºè®®ï¼Œè€ƒè™‘åˆ°å„ç§è¶‹åŠ¿ï¼ŒåŒ…æ‹¬é‡‡ç”¨å¤šå‰æäº‘é‡‡ç”¨ç­–ç•¥ï¼Œç»„ç»‡åº”è®¤çœŸè€ƒè™‘é›†æˆå•†ä¸šç°æˆçš„å’Œå¼€æºçš„å·¥å…·é€‰é¡¹æ¥è§£å†³å„ç§äº‘æ¶æ„å’Œé¡¹ç›®ç‰¹å®šéœ€æ±‚ï¼Œè¿™è¿˜å¯ä»¥åœ¨è·¨é¡¹ç›®ä¸­é€šè¿‡æ ‡å‡†åŒ–å‡å°‘å·¥å…· license çš„æ”¯å‡ºã€‚</p><h3 id="ä½ çš„äº‘æµ‹è¯•å·¥å…·é‡‡ç”¨ç­–ç•¥æ˜¯ä»€ä¹ˆ"><a href="#ä½ çš„äº‘æµ‹è¯•å·¥å…·é‡‡ç”¨ç­–ç•¥æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä½ çš„äº‘æµ‹è¯•å·¥å…·é‡‡ç”¨ç­–ç•¥æ˜¯ä»€ä¹ˆ"></a>ä½ çš„äº‘æµ‹è¯•å·¥å…·é‡‡ç”¨ç­–ç•¥æ˜¯ä»€ä¹ˆ</h3><p><img src="/2023/10/world-quality-report/14.png" alt="14"></p><p>ç»„ç»‡åº”è¯¥åšä»€ä¹ˆä¸“æ³¨äºä»€ä¹ˆï¼Ÿ</p><p>æ€»ä½“è€Œè¨€ï¼Œæˆ‘ä»¬çœ‹åˆ°å›´ç»•æµ‹è¯•ç¯å¢ƒçš„ç§¯æè¶‹åŠ¿ç®¡ç†ï¼š</p><ul><li>è¶Šæ¥è¶Šå¤šçš„ç»„ç»‡æ­£åœ¨å°†æµ‹è¯•ç¯å¢ƒè¿ç§»åˆ°äº‘ç«¯ï¼Œåœ¨å¤šäº‘æˆ–å¤šå‰ææ¨¡å‹ä¸­ã€‚</li><li>ç»„ç»‡ä½¿ç”¨æ··åˆå·¥å…·é›†æ¥å®ç°è‡ªåŠ¨åŒ–æä¾›æµ‹è¯•ç¯å¢ƒï¼ŒåŒ…æ‹¬äº‘åŸç”Ÿï¼Œå•†ä¸šç°æˆçš„ä¾›åº”å•†æˆ–å†…éƒ¨å†…ç½®å·¥å…·ã€‚</li></ul><p>æˆ‘ä»¬å¯¹æµ‹è¯•ç¯å¢ƒçš„å»ºè®®ç®¡ç†å’Œé…ç½®å¦‚ä¸‹ï¼š</p><ul><li>åŠ å¿«é‡‡ç”¨å¤šåœºæ‰€ï¼ˆæœ¬åœ° + å¤šäº‘æä¾›å•†ï¼‰æµ‹è¯•ç¯å¢ƒçš„ç­–ç•¥æé«˜æˆæœ¬æ•ˆç‡ã€å®‰å…¨æ€§ã€å†—ä½™å’Œæ•°æ®æ¢å¤é€‰é¡¹ã€‚</li><li>è€ƒè™‘æ™ºèƒ½é›†æˆï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰å…·ä½“åŠŸèƒ½ï¼‰ï¼Œä»¥å……åˆ†åˆ©ç”¨å•†ä¸š off-the-shelf å’Œå¼€æºå·¥å…·ä½œä¸ºæ··åˆç­–ç•¥<br>æµ‹è¯•ç¯å¢ƒé…ç½®ã€‚</li><li>è¿›ä¸€æ­¥åˆ©ç”¨éç”Ÿäº§è½¬ç§»çš„æˆæœ¬æ•ˆç›Šè¶‹åŠ¿é€šè¿‡é«˜æ•ˆçš„æ–¹å¼å°†å·¥ä½œè´Ÿè½½è½¬ç§»åˆ°äº‘ç«¯éç”Ÿäº§ç¯å¢ƒçš„è®¾è®¡å’Œæ¶æ„ã€‚</li></ul><p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬è¿˜è®¨è®ºäº†ç§¯æçš„è¶‹åŠ¿åˆ°äº‘çš„æµ‹è¯•ï¼š</p><ul><li>å¤§å¤šæ•°ç»„ç»‡éƒ½å°†äº‘æµ‹è¯•è§†ä¸ºä¸€ç§è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ç»„æˆéƒ¨åˆ†ã€‚</li><li>ä¸å¼€æºå·¥å…·æœ‰å¾ˆå¼ºçš„è”ç³»ï¼Œå°½ç®¡æœ‰å…¶ä»–é€‰æ‹©ï¼Œä¾‹å¦‚ç°æˆçš„å•†ä¸šå·¥å…·ä¹Ÿè¢«ç”¨äºäº‘æµ‹è¯•çš„è‡ªåŠ¨åŒ–ã€‚</li></ul><p>æˆ‘ä»¬å…³äºäº‘æµ‹è¯•çš„ä¸»è¦å»ºè®®æ˜¯ä¸‹åˆ—ï¼š</p><ul><li>åœ¨æ‰€æœ‰é¡¹ç›®ä¸­çº³å…¥äº‘å’ŒåŸºç¡€è®¾æ–½æµ‹è¯•ç­–ç•¥ã€‚</li><li>é€šè¿‡è€ƒè™‘æ‰€æœ‰äº‘å¹³å°å’Œé›†æˆç¯å¢ƒæ¶æ„ï¼Œæ”¹è¿›ç«¯åˆ°ç«¯äº‘æµ‹è¯•ç­–ç•¥ï¼Œä»¥ç¡®ä¿ç¯å¢ƒçš„æ€§èƒ½ã€å¯æ‰©å±•æ€§å’ŒåŠŸèƒ½æ€§ã€‚</li><li>éšç€è¶Šæ¥è¶Šå¤šçš„æ•°æ®æ‰˜ç®¡åˆ°äº‘ä¸Šï¼Œä¸ç¬¬ä¸‰æ–¹äº‘åº”ç”¨ç¨‹åºçš„é›†æˆä¹Ÿåœ¨å¢åŠ ï¼Œå› æ­¤è¦æ›´åŠ å…³æ³¨å®‰å…¨æµ‹è¯•ã€‚</li></ul><h2 id="æµ‹è¯•æ•°æ®ä¾›åº”å’Œæ•°æ®éªŒè¯-WIP"><a href="#æµ‹è¯•æ•°æ®ä¾›åº”å’Œæ•°æ®éªŒè¯-WIP" class="headerlink" title="æµ‹è¯•æ•°æ®ä¾›åº”å’Œæ•°æ®éªŒè¯ (WIP)"></a>æµ‹è¯•æ•°æ®ä¾›åº”å’Œæ•°æ®éªŒè¯ (WIP)</h2><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Quality </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Report </tag>
            
            <tag> Quality </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³é€šè¿‡ Jenkins Artifactory plugin ä¸Šä¼  artifacts å¤±è´¥çš„é—®é¢˜ â€œunable to find valid certification path to requested targetâ€</title>
      <link href="/2023/09/unable-to-find-valid-certification-path/"/>
      <url>/2023/09/unable-to-find-valid-certification-path/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘é‡åˆ°äº†é€šè¿‡ Jenkins agent æ— æ³•ä¸Šä¼  artifacts åˆ° Artifactory çš„æƒ…å†µï¼Œå…·ä½“é”™è¯¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[2023-09-11T08:21:53.385Z] Executing <span class="built_in">command</span>: /bin/sh -c git <span class="built_in">log</span> --pretty=format:%s -1</span><br><span class="line">[2023-09-11T08:21:54.250Z] [consumer_0] Deploying artifact: https://artifactory.mycompany.com/artifactory/generic-int-den/my-project/hotfix/1.2.0.HF5/3/pj120_bin_opt_SunOS_3792bcf.tar.Z</span><br><span class="line"></span><br><span class="line">[2023-09-11T08:21:54.269Z] Error occurred <span class="keyword">for</span> request GET /artifactory/api/system/version HTTP/1.1: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.</span><br><span class="line">[2023-09-11T08:21:54.282Z] Error occurred <span class="keyword">for</span> request PUT /artifactory/generic-int-den/my-project/hotfix/1.2.0.HF5/3/pj120_bin_opt_SunOS_3792bcf.tar.Z;build.timestamp=1694418199972;build.name=hotfix%2F1.2.0.HF5;build.number=3 HTTP/1.1: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.</span><br><span class="line">[2023-09-11T08:21:54.284Z] [consumer_0] An exception occurred during execution:</span><br><span class="line">[2023-09-11T08:21:54.284Z] java.lang.RuntimeException: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br><span class="line">[2023-09-11T08:21:54.284Z] at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:44)</span><br><span class="line">[2023-09-11T08:21:54.284Z] at org.jfrog.build.extractor.producerConsumer.ConsumerRunnableBase.run(ConsumerRunnableBase.java:11)</span><br><span class="line">[2023-09-11T08:21:54.284Z] at java.lang.Thread.run(Thread.java:745)</span><br><span class="line">[2023-09-11T08:21:54.285Z] Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé—®é¢˜äº§ç”Ÿçš„åŸå› æ˜¯é€šè¿‡ HTTPS æ¥ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™æ²¡æœ‰é€šè¿‡ Java çš„å®‰å…¨è®¤è¯ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯é‡æ–°ç”Ÿæˆè®¤è¯æ–‡ä»¶ï¼Œç„¶åå¯¼å…¥å³å¯ï¼Œå…·ä½“çš„æ­¥éª¤å¦‚ä¸‹ã€‚</p><h2 id="ç”Ÿæˆå®‰å…¨è®¤è¯ï¼ˆSecurity-Certificateï¼‰æ–‡ä»¶"><a href="#ç”Ÿæˆå®‰å…¨è®¤è¯ï¼ˆSecurity-Certificateï¼‰æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆå®‰å…¨è®¤è¯ï¼ˆSecurity Certificateï¼‰æ–‡ä»¶"></a>ç”Ÿæˆå®‰å…¨è®¤è¯ï¼ˆSecurity Certificateï¼‰æ–‡ä»¶</h2><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆç”Ÿæˆé€šè¿‡æµè§ˆå™¨æ‰“å¼€çš„ä½ çš„ Artifactory ç½‘å€</li><li>åœ¨ç½‘å€çš„å·¦ä¾§åº”è¯¥æœ‰ä¸€ä¸ªé”çš„å›¾æ ‡ï¼Œç‚¹å‡» Connection is secure -ã€‹Certificate is valid -ã€‹Details -ã€‹ Export</li><li>é€‰æ‹© DER-encoded binary, single certificate (*.der) ç”Ÿæˆè®¤è¯æ–‡ä»¶</li></ol><p>æ¯”å¦‚æˆ‘ç”Ÿæˆçš„å®‰å…¨è®¤è¯æ–‡ä»¶çš„åå­—å«ï¼š<code>artifactory.mycompany.der</code>ï¼ˆåå­—å¯ä»¥ä»»æ„èµ·ï¼Œåªè¦åç¼€åä¸å˜å³å¯ï¼‰</p><h2 id="é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥å®‰å…¨è®¤è¯"><a href="#é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥å®‰å…¨è®¤è¯" class="headerlink" title="é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥å®‰å…¨è®¤è¯"></a>é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥å®‰å…¨è®¤è¯</h2><p>ç™»å½•åˆ°é‚£å°æœ‰é—®é¢˜çš„ Solaris agentï¼Œä¸Šä¼  <code>artifactory.mycompany.der</code> åˆ°æŒ‡å®šç›®å½•ä¸‹ï¼Œç„¶åæ‰¾åˆ° cacerts çš„è·¯å¾„ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@mysolaris:/<span class="comment"># keytool -import -alias example -keystore /usr/java/jre/lib/security/cacerts -file /tmp/artifactory.mycompany.der</span></span><br><span class="line"><span class="comment"># ç„¶åé€‰æ‹© yes</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ä¼šæç¤ºä½ è¾“å…¥å¯†ç ï¼Œé»˜è®¤å¯†ç ä¸º <code>changeit</code>ï¼Œè¾“å…¥å³å¯ã€‚ç„¶åé‡å¯ä½ çš„ JVM æˆ–æ˜¯ VMã€‚ç­‰å†æ¬¡é€šè¿‡è¯¥ Agent ä¸Šä¼  artifactsï¼Œä¸€åˆ‡æ¢å¤æ­£å¸¸ã€‚</p><blockquote><p>å¯å‚è€ƒï¼š <a href="https://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ">https://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ</a></p></blockquote><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Artifactory </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Jenkins </tag>
            
            <tag> Artifactory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³åœ¨ AIX é€šè¿‡ Jenkins agent git clone å¤±è´¥çš„é—®é¢˜</title>
      <link href="/2023/09/git-clone-failed-on-aix/"/>
      <url>/2023/09/git-clone-failed-on-aix/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åˆé‡åˆ°äº†åœ¨ AIX ä¸Šé€šè¿‡ Jenkins agent æ— æ³•ä¸‹è½½ä»£ç çš„æƒ…å†µï¼ŒæŠ¥äº†å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">16:42:47  Caused by: hudson.plugins.git.GitException: Command <span class="string">&quot;git init /disk1/agent/workspace/e_feature-aix-ci-build&quot;</span> returned status code 255:</span><br><span class="line">16:42:47  stdout: </span><br><span class="line">16:42:47  stderr: <span class="built_in">exec</span>(): 0509-036 Cannot load program git because of the following errors:</span><br><span class="line">16:42:47  0509-150   Dependent module /usr/lib/libiconv.a(libiconv.so.2) could not be loaded.</span><br><span class="line">16:42:47  0509-152   Member libiconv.so.2 is not found <span class="keyword">in</span> archive </span><br><span class="line">16:42:47  </span><br><span class="line">16:42:47  at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2734)</span><br><span class="line">16:42:47  at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2660)</span><br><span class="line">16:42:47  at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2656)</span><br><span class="line">16:42:47  at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:1981)</span><br><span class="line">16:42:47  at org.jenkinsci.plugins.gitclient.CliGitAPIImpl<span class="variable">$5</span>.execute(CliGitAPIImpl.java:1047)</span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šæ¬¡é‡åˆ°åœ¨ AIX é‡åˆ°çš„ git clone é—®é¢˜æ€»ç»“åœ¨è¿™é‡Œ <a href="https://shenxianpeng.github.io/2021/06/git-clone-failed-on-aix/">https://shenxianpeng.github.io/2021/06/git-clone-failed-on-aix/</a></p></blockquote><p>è€Œæˆ‘åœ¨ AIX æœºå™¨ä¸Šæ‰‹åŠ¨æ‰§è¡Œ git clone å‘½ä»¤å´æ²¡æœ‰è¿™ä¸ªé”™è¯¯å‘ç”Ÿï¼Œä»å¤±è´¥çš„ log å’Œ <code>ldd /usr/bin/git</code> å‘ç° <code>libiconv.a</code> çš„è·¯å¾„ä¸åŒï¼Œæ¨æµ‹é—®é¢˜åº”è¯¥å‡ºåœ¨ <code>LIBPATH</code> ç¯å¢ƒå˜é‡ä¸Šã€‚</p><p>å› ä¸ºåœ¨æœ¬åœ°ï¼ˆAIXï¼‰æ‰§è¡Œ git å‘½ä»¤çš„æ—¶å€™ <code>LIBPATH</code> æ˜¯ä¸ºç©ºï¼Œå¦‚æœè®¾ç½®äº† <code>LIBPATH</code> è·¯å¾„ä¸º &#x2F;usr&#x2F;lib&#x2F; ä¼šå‡ºä¸Šé¢ä¸€æ ·çš„é”™è¯¯ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ldd /usr/bin/git</span><br><span class="line">/usr/bin/git needs:</span><br><span class="line">         /usr/lib/libc.a(shr_64.o)</span><br><span class="line">         /usr/lib/libpthreads.a(shr_xpg5_64.o)</span><br><span class="line">         /opt/freeware/lib/libintl.a(libintl.so.8)</span><br><span class="line">         /opt/freeware/lib/libiconv.a(libiconv.so.2)</span><br><span class="line">         /opt/freeware/lib/libz.a(libz.so.1)</span><br><span class="line">         /unix</span><br><span class="line">         /usr/lib/libcrypt.a(shr_64.o)</span><br><span class="line">         /opt/freeware/lib64/libgcc_s.a(shr.o)</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>ä½† Jenkins agent åœ¨æ‰§è¡Œçš„æ—¶å€™æœ‰é»˜è®¤çš„ <code>LIBPATH</code>ï¼ŒæŸ¥çœ‹è¿™ä¸ªå˜é‡å¯ä»¥é€šè¿‡ Jenkins Agent ä¸Šçš„ Script Console æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ‰“å°å‡ºæ¥</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">println System.getenv(<span class="string">&quot;LIBPATH&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿”å›çš„ç»“æœ </span></span><br><span class="line">/usr/java8_64/jre/lib/ppc64/j9vm:/usr/java8_64/jre/lib/ppc64:/usr/java8_64/jre/../lib/ppc64:/usr/java8_64/jre/lib/icc:/usr/lib</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœç„¶æœ‰ <code>/usr/lib</code>ï¼Œè¿™å¯¼è‡´äº† git æ˜¯å»æ‰¾ <code>/usr/lib/libiconv.a</code> è€Œä¸æ˜¯ <code>/opt/freeware/lib/libiconv.a</code>ã€‚</p><p>æˆ‘å°è¯•è¿‡å¾ˆå¤šç§åŠæ³•ä½†æœ€ç»ˆè¿˜æ˜¯æ— æ³•åœ¨ Jenkins agent åœ¨ git clone çš„æ—¶å€™ <code>unset LIBPATH</code>ï¼ŒåŒ…æ‹¬: </p><ol><li>é‡æ–° linkï¼Œå°† <code>/usr/lib/libiconv.a</code> é“¾æ¥åˆ° <code>/opt/freeware/lib/libiconv.a</code></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> /usr/lib/libiconv.a /usr/lib/libiconv.a.bak</span><br><span class="line"><span class="built_in">ln</span> -s /opt/freeware/lib/libiconv.a /usr/lib/libiconv.a</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ pipeline ä¸­ä½¿ç”¨ <code>withEnv</code> è®¾ç½® <code>LIBPATH</code> ä¸ºç©º</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">withEnv([<span class="string">&#x27;LIBPATH=\&#x27;</span>\&#x27;<span class="string">&#x27;]) &#123;</span></span><br><span class="line"><span class="string">  checkout scm</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>åœ¨ Agent é…ç½®é¡µé¢ä¸Šå°è¯•é€šè¿‡ Environment variables æ¥ä¿®æ”¹ <code>LIBPATH</code>ï¼ˆè¿™ä¸ªçœ‹èµ·æ¥åƒæ˜¯ Jenkins çš„ä¸€ä¸ª bug <a href="https://issues.jenkins.io/browse/JENKINS-69821">JENKINS-69821</a>)</p></li><li><p>åœ¨é…ç½® Jenkins agent é¡µé¢é€šè¿‡æ·»åŠ  <code>export LIBPATH=&quot;&quot; &amp;&amp;</code> åˆ° Prefix Start Agent Command å‡ä¸èµ·ä½œç”¨ã€‚</p></li></ol><p>æœ€åæ˜¯é€šè¿‡åœ¨ AIX æ›´æ–° Git ä»ç‰ˆæœ¬ <code>2.39.3</code> å‡çº§åˆ° <code>2.40.0</code> è§£å†³äº†è¿™ä¸ªé”™è¯¯ï¼Œè¿™æœ‰ç‚¹å·§åˆå¹¶æ²¡æœ‰çœŸæ­£æŠŠ Jenkins agent çš„è¦†ç›–é»˜è®¤ç¯å¢ƒå˜é‡çš„é—®é¢˜ç»™è§£å†³ï¼Œä½†å¥½åœ¨è¿™ä¸ªé—®é¢˜å·²ç»æ²¡æœ‰äº†ã€‚</p><p>ä»…æ­¤è®°å½•ä¸€ä¸‹ï¼Œé˜²æ­¢ä»¥åé‡åˆ°åŒæ ·çš„é”™è¯¯ä¸è‡³äºä»å¤´å¼€å§‹å°è¯•ï¼Œä¹Ÿå¸Œæœ›è¿™ä¸ªè®°å½•ä¹Ÿå¯èƒ½å¸®åŠ©åˆ°ä½ ã€‚</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> AIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Jenkins </tag>
            
            <tag> AIX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Upload artifacts failed to Artifactory from AIX</title>
      <link href="/2023/08/upload-artifacts-failed-on-aix/"/>
      <url>/2023/08/upload-artifacts-failed-on-aix/</url>
      
        <content type="html"><![CDATA[<p>Recently my CI pipeline suddenly does not work on AIX 7.1 with error <code>Caused by: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.</code>. </p><details><summary>Click to see more details about the failure log.</summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">22:13:30  Executing <span class="built_in">command</span>: /bin/sh -c git <span class="built_in">log</span> --pretty=format:%s -1</span><br><span class="line">22:13:36  [consumer_0] Deploying artifact: https://artifactory.company.com/artifactory/generic-int-den/myproject/PRs/PR-880/1/myproject_bin_rel_AIX_5797b20.tar.Z</span><br><span class="line">22:13:36  Error occurred <span class="keyword">for</span> request GET /artifactory/api/system/version HTTP/1.1: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: The certificate issued by CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US is not trusted; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: Certificate chaining error.</span><br><span class="line">22:13:36  Error occurred <span class="keyword">for</span> request PUT /artifactory/generic-int-den/myproject/PRs/PR-880/1/cpplinter_bin_rel_AIX_5797b20.tar.Z;build.timestamp=1693273923987;build.name=PR-880;build.number=1 HTTP/1.1: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: The certificate issued by CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US is not trusted; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: Certificate chaining error.</span><br><span class="line">22:13:36  [consumer_0] An exception occurred during execution:</span><br><span class="line">22:13:36  java.lang.RuntimeException: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: The certificate issued by CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US is not trusted; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: Certificate chaining error</span><br><span class="line">22:13:36  at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:44)</span><br><span class="line">22:13:36  at org.jfrog.build.extractor.producerConsumer.ConsumerRunnableBase.run(ConsumerRunnableBase.java:11)</span><br><span class="line">22:13:36  at java.lang.Thread.run(Thread.java:785)</span><br><span class="line">22:13:36  Caused by: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: The certificate issued by CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US is not trusted; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: Certificate chaining error</span><br><span class="line">22:13:36  at com.ibm.jsse2.j.a(j.java:3)</span><br><span class="line">22:13:36  at com.ibm.jsse2.as.a(as.java:213)</span><br><span class="line">22:13:36  at com.ibm.jsse2.C.a(C.java:339)</span><br><span class="line">22:13:36  at com.ibm.jsse2.C.a(C.java:248)</span><br><span class="line">22:13:36  at com.ibm.jsse2.D.a(D.java:291)</span><br><span class="line">22:13:36  at com.ibm.jsse2.D.a(D.java:217)</span><br><span class="line">22:13:36  at com.ibm.jsse2.C.r(C.java:373)</span><br><span class="line">22:13:36  at com.ibm.jsse2.C.a(C.java:352)</span><br><span class="line">22:13:36  at com.ibm.jsse2.as.a(as.java:752)</span><br><span class="line">22:13:36  at com.ibm.jsse2.as.i(as.java:338)</span><br><span class="line">22:13:36  at com.ibm.jsse2.as.a(as.java:711)</span><br><span class="line">22:13:36  at com.ibm.jsse2.as.startHandshake(as.java:454)</span><br><span class="line">22:13:36  at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:436)</span><br><span class="line">22:13:36  at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:384)</span><br><span class="line">22:13:36  at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)</span><br><span class="line">22:13:36  at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)</span><br><span class="line">22:13:36  at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)</span><br><span class="line">22:13:36  at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)</span><br><span class="line">22:13:36  at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)</span><br><span class="line">22:13:36  at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)</span><br><span class="line">22:13:36  at org.apache.http.impl.execchain.ServiceUnavailableRetryExec.execute(ServiceUnavailableRetryExec.java:85)</span><br><span class="line">22:13:36  at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)</span><br><span class="line">22:13:36  at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)</span><br><span class="line">22:13:36  at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)</span><br><span class="line">22:13:36  at org.jfrog.build.client.PreemptiveHttpClient.execute(PreemptiveHttpClient.java:76)</span><br><span class="line">22:13:36  at org.jfrog.build.client.PreemptiveHttpClient.execute(PreemptiveHttpClient.java:64)</span><br><span class="line">22:13:36  at org.jfrog.build.client.JFrogHttpClient.sendRequest(JFrogHttpClient.java:133)</span><br><span class="line">22:13:36  at org.jfrog.build.extractor.clientConfiguration.client.JFrogService.execute(JFrogService.java:112)</span><br><span class="line">22:13:36  at org.jfrog.build.extractor.clientConfiguration.client.artifactory.services.Upload.execute(Upload.java:77)</span><br><span class="line">22:13:36  at org.jfrog.build.extractor.clientConfiguration.client.artifactory.ArtifactoryManager.upload(ArtifactoryManager.java:267)</span><br><span class="line">22:13:36  at org.jfrog.build.extractor.clientConfiguration.client.artifactory.ArtifactoryManager.upload(ArtifactoryManager.java:262)</span><br><span class="line">22:13:36  at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:39)</span><br><span class="line">22:13:36  ... 2 more</span><br><span class="line">22:13:36  Caused by: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: The certificate issued by CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US is not trusted; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: Certificate chaining error</span><br><span class="line">22:13:36  at com.ibm.jsse2.util.f.a(f.java:107)</span><br><span class="line">22:13:36  at com.ibm.jsse2.util.f.b(f.java:143)</span><br><span class="line">22:13:36  at com.ibm.jsse2.util.e.a(e.java:6)</span><br><span class="line">22:13:36  at com.ibm.jsse2.aA.a(aA.java:99)</span><br><span class="line">22:13:36  at com.ibm.jsse2.aA.a(aA.java:112)</span><br><span class="line">22:13:36  at com.ibm.jsse2.aA.checkServerTrusted(aA.java:28)</span><br><span class="line">22:13:36  at com.ibm.jsse2.D.a(D.java:588)</span><br><span class="line">22:13:36  ... 29 more</span><br><span class="line">22:13:36  Caused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: The certificate issued by CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US is not trusted; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: Certificate chaining error</span><br><span class="line">22:13:36  at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:422)</span><br><span class="line">22:13:36  at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:268)</span><br><span class="line">22:13:36  at com.ibm.jsse2.util.f.a(f.java:120)</span><br><span class="line">22:13:36  ... 35 more</span><br><span class="line">22:13:36  Caused by: java.security.cert.CertPathValidatorException: The certificate issued by CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US is not trusted; internal cause is: </span><br><span class="line">22:13:36  java.security.cert.CertPathValidatorException: Certificate chaining error</span><br><span class="line">22:13:36  at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:111)</span><br><span class="line">22:13:36  at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCertPathValidatorImpl.java:199)</span><br><span class="line">22:13:36  at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPathBuilderImpl.java:749)</span><br><span class="line">22:13:36  at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:661)</span><br><span class="line">22:13:36  at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:607)</span><br><span class="line">22:13:36  at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:368)</span><br><span class="line">22:13:36  ... 37 more</span><br><span class="line">22:13:36  Caused by: java.security.cert.CertPathValidatorException: Certificate chaining error</span><br><span class="line">22:13:36  at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:316)</span><br><span class="line">22:13:36  at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:108)</span><br><span class="line">22:13:36  ... 42 more</span><br><span class="line">22:13:36  </span><br></pre></td></tr></table></figure></details><p>I have tried to download certificate.pem from my Artifactory and run this command, but the issue still there on my AIX 7.3.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/java8_64/jre/bin/keytool -importcert -<span class="built_in">alias</span> cacertalias -keystore /usr/java8_64/jre/lib/security/cacerts -file /path/to/your/certificate.pem</span><br></pre></td></tr></table></figure><p>It investing it can not reproduce on my Windows, Linux and AIX 7.3 build machines.</p><p>Whatâ€™s the different between them? the only different is Java runtime. On my problematic AIX 7.1 build machine, I used a shared runtime which is a link to path <code>/tools/AIX-7.1/Java8_64-8.0.0.401/usr/java8_64/bin/java</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-5.0$ /tools/AIX-7.1/Java8_64-8.0.0.401/usr/java8_64/bin/java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build pap6480sr4fp1-20170215_01(SR4 FP1))</span><br><span class="line">IBM J9 VM (build 2.8, JRE 1.8.0 AIX ppc64-64 Compressed References 20170209_336038 (JIT enabled, AOT enabled)</span><br><span class="line">J9VM - R28_20170209_0201_B336038</span><br><span class="line">JIT  - tr.r14.java.green_20170125_131456</span><br><span class="line">GC   - R28_20170209_0201_B336038_CMPRSS</span><br><span class="line">J9CL - 20170209_336038)</span><br><span class="line">JCL - 20170215_01 based on Oracle jdk8u121-b13</span><br></pre></td></tr></table></figure><p>And I have anther Java runtime installed my that machine which is <code>/usr/java8_64/bin/java</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-5.0$ /usr/java8_64/bin/java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0_241&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 8.0.6.5 - pap6480sr6fp5-20200111_02(SR6 FP5))</span><br><span class="line">IBM J9 VM (build 2.9, JRE 1.8.0 AIX ppc64-64-Bit Compressed References 20200108_436782 (JIT enabled, AOT enabled)</span><br><span class="line">OpenJ9   - 7d1059c</span><br><span class="line">OMR      - d059105</span><br><span class="line">IBM      - c8aee39)</span><br><span class="line">JCL - 20200110_01 based on Oracle jdk8u241-b07</span><br></pre></td></tr></table></figure><p>Actually the versions of these two java versions are different. I just changed configuration of <code>JavaPath</code> from <code>/tools/AIX-7.1/Java8_64-8.0.0.401/usr/java8_64/bin/java</code> to <code>/usr/java8_64/bin/java</code> in the Jenkins node and disconnect then launch agent again, it works.</p><p>I donâ€™t why it works, I donâ€™t know much about Java certificate, if you know the reason please leave comments and let me know. Thank you.</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> AIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Troubleshooting </tag>
            
            <tag> Artifactory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ›å»º NuGet Organization çš„é‡åˆ°çš„å‘</title>
      <link href="/2023/08/nuget/"/>
      <url>/2023/08/nuget/</url>
      
        <content type="html"><![CDATA[<p>å…¶å®åˆ›å»ºåŒ…ç®¡ç†å¹³å°è´¦æˆ·æ²¡ä»€ä¹ˆå¯è¯´çš„ï¼Œä½†æœ€è¿‘å‡†å¤‡åœ¨ <a href="https://www.nuget.org/">https://www.nuget.org</a> ä¸Šé¢å‘å¸ƒäº§å“å‰åˆ›å»º Organization çš„æ—¶å€™ç¡®é‡åˆ°äº†é—®é¢˜ã€‚</p><h2 id="äº‹æƒ…æ˜¯è¿™æ ·çš„"><a href="#äº‹æƒ…æ˜¯è¿™æ ·çš„" class="headerlink" title="äº‹æƒ…æ˜¯è¿™æ ·çš„"></a>äº‹æƒ…æ˜¯è¿™æ ·çš„</h2><p>ä½œä¸ºä¸€åå…¬å¸å‘˜å·¥åœ¨é¦–æ¬¡æ‰“å¼€ NuGet ç½‘ç«™ (<a href="http://www.nuget.org/">www.nuget.org</a>) çš„æ—¶å€™ï¼Œç‚¹å‡»ã€Sign inã€‘ï¼Œæ˜ å…¥çœ¼å¸˜çš„å°±æ˜¯ã€Sign in with Microsoftã€‘ï¼Œç‚¹å‡»ï¼Œä¸‹ä¸€æ­¥ã€ä¸‹ä¸€æ­¥ï¼Œæˆ‘å°±é¡ºåˆ©çš„å°±ç”¨å…¬å¸é‚®ç®±æ³¨å†Œäº†æˆ‘çš„ç¬¬ä¸€ä¸ª NuGet çš„è´¦æˆ·ã€‚</p><p>æ­¤æ—¶æˆ‘å‡†å¤‡åˆ›å»ºä¸€ä¸ª Organization çš„æ—¶å€™ï¼Œè¾“å…¥è‡ªå·±çš„å…¬å¸é‚®ç®±æç¤ºè¿™ä¸ªé‚®ç®±åœ°å€å·²ç»è¢«ä½¿ç”¨äº†ï¼ŒWhat ï¼Ÿï¼Ÿï¼Ÿ</p><p>OKã€‚é‚£æˆ‘å°±å¡«å†™åŒäº‹çš„å…¬å¸é‚®ç®±åœ°å€å§ã€‚</p><p>åŒäº‹åœ¨æ”¶åˆ°é‚®ä»¶é€šçŸ¥åä¹Ÿæ˜¯ä¸€æ­¥æ­¥æ“ä½œï¼Œå…ˆæ˜¯æ‰“å¼€ NuGet.orgï¼Œç‚¹å‡»ã€Sign in with Microsoftã€‘ï¼Œç„¶åä¹Ÿæ˜¯éœ€è¦å¡«å†™è‡ªå·±çš„è´¦æˆ·åï¼Œç»“æœå®Œæˆè¿™ä¸€ç³»åˆ—çš„æ“ä½œä¹‹åï¼Œå†è¾“å…¥ä»–çš„é‚®ä»¶åœ°å€å»æ³¨å†Œ Organization çš„æ—¶å€™ä¹ŸåŒæ ·æç¤ºè¿™ä¸ªé‚®ç®±å·²ç»è¢«ä½¿ç”¨äº†ï¼Ÿï¼Ÿï¼Ÿä»€ä¹ˆæ“ä½œï¼ï¼ï¼é†‰äº†â€¦</p><h2 id="å¦‚ä½•è§£å†³çš„"><a href="#å¦‚ä½•è§£å†³çš„" class="headerlink" title="å¦‚ä½•è§£å†³çš„"></a>å¦‚ä½•è§£å†³çš„</h2><p>å°±åœ¨è¿™åƒé’§ä¸€å‘ç„¦æ€¥å¾—ç­‰å¾…å‘å¸ƒä¹‹é™…ï¼Œæˆ‘çªç„¶çµæœºä¸€åŠ¨ï¼Œä»¥æ­»é©¬å½“æ´»é©¬åŒ»çš„å¿ƒæ€ï¼Œå°†æˆ‘æ³¨å†Œçš„ NuGet çš„ä¸ªäººè´¦æˆ·ç»‘å®šçš„å…¬å¸é‚®ç®±ä¿®æ”¹ä¸ºäº†è‡ªå·±çš„ Gmail é‚®ç®±ï¼Œç„¶åæ­¤æ—¶å†å»åˆ›å»º Organization çš„æ—¶å€™è¾“å…¥çš„æ˜¯è‡ªå·±çš„å…¬å¸é‚®ç®±ï¼Œåˆ›å»º Organization æˆåŠŸäº†ï¼ï¼</p><p>å¥½äº†ï¼Œè°¨ä»¥æ­¤è®°å½•ä¸€ä¸‹åœ¨æ³¨å†Œ NuGet æ—¶å€™é‡åˆ°çš„é—®é¢˜ã€‚ä¸çŸ¥é“å¯¹ä½ æ˜¯å¦æœ‰ç”¨ï¼Œå¦‚æœçœŸçš„æœ‰å¸®åŠ©åˆ°ä½ ï¼Œä¸¾æ‰‹ç¤ºæ„ä¸€ä¸‹å“¦ã€‚</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Release </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NuGet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker Buildx Bakeï¼šåŠ é€Ÿæ„å»ºå’Œç®¡ç†å¤šå¹³å°é•œåƒçš„åˆ©å™¨</title>
      <link href="/2023/07/buildx-bake/"/>
      <url>/2023/07/buildx-bake/</url>
      
        <content type="html"><![CDATA[<p>éšç€å®¹å™¨åŒ–æŠ€æœ¯çš„æ™®åŠå’Œåº”ç”¨åœºæ™¯çš„å¢å¤šï¼Œæ„å»ºå’Œç®¡ç†å¤šå¹³å°é•œåƒå˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚<a href="https://github.com/docker/buildx">Docker Buildx</a> æ˜¯ Docker å®˜æ–¹å¯¹äº Docker CLI çš„ä¸€ä¸ªæ‰©å±•ï¼Œä¸º Docker ç”¨æˆ·æä¾›äº†æ›´å¼ºå¤§å’Œçµæ´»çš„æ„å»ºåŠŸèƒ½ã€‚åŒ…æ‹¬ï¼š</p><ol><li>å¤šå¹³å°æ„å»ºï¼šDocker Buildx å…è®¸ç”¨æˆ·åœ¨ä¸€ä¸ªæ„å»ºå‘½ä»¤ä¸­ä¸ºå¤šä¸ªä¸åŒçš„å¹³å°æ„å»ºå®¹å™¨é•œåƒã€‚è¿™æ ·ï¼Œä½ å¯ä»¥ä¸€æ¬¡æ€§æ„å»ºé€‚ç”¨äºå¤šç§ CPU æ¶æ„çš„é•œåƒï¼Œæ¯”å¦‚ x86ã€ARM ç­‰ï¼Œä»è€Œåœ¨ä¸åŒçš„ç¡¬ä»¶è®¾å¤‡ä¸Šè¿è¡Œç›¸åŒçš„é•œåƒã€‚</li><li>æ„å»ºç¼“å­˜ä¼˜åŒ–ï¼šDocker Buildx æ”¹è¿›äº†æ„å»ºè¿‡ç¨‹ä¸­çš„ç¼“å­˜æœºåˆ¶ï¼Œé€šè¿‡è‡ªåŠ¨è¯†åˆ« Dockerfile ä¸­å“ªäº›éƒ¨åˆ†æ˜¯å¯ç¼“å­˜çš„ï¼Œä»è€Œå‡å°‘é‡å¤æ„å»ºå’ŒåŠ å¿«æ„å»ºé€Ÿåº¦ã€‚</li><li>å¹¶è¡Œæ„å»ºï¼šBuildx å…è®¸å¹¶è¡Œæ„å»ºå¤šä¸ªé•œåƒï¼Œæé«˜äº†æ„å»ºçš„æ•ˆç‡ã€‚</li><li>å¤šç§è¾“å‡ºæ ¼å¼ï¼šBuildx æ”¯æŒä¸åŒçš„è¾“å‡ºæ ¼å¼ï¼ŒåŒ…æ‹¬ Docker é•œåƒã€OCI é•œåƒã€ä»¥åŠ rootfs ç­‰ã€‚</li><li>æ„å»ºç­–ç•¥ï¼šé€šè¿‡æ”¯æŒå¤šç§æ„å»ºç­–ç•¥ï¼Œç”¨æˆ·å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ„å»ºè¿‡ç¨‹ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šæ„å»ºã€ä½¿ç”¨è¿œç¨‹æ„å»ºç­‰ã€‚</li></ol><blockquote><p>ä½¿ç”¨ <code>docker buildx</code> éœ€è¦ Docker Engine ç‰ˆæœ¬ä¸ä½äº 19.03ã€‚</p></blockquote><p>å…¶ä¸­ï¼ŒDocker Buildx Bake æ˜¯ Buildx çš„ä¸€ä¸ªå­å‘½ä»¤ï¼Œä¹Ÿæ˜¯æœ¬ç¯‡æ–‡ç« è¦é‡ç‚¹ä»‹ç»åŒ…æ‹¬æ¦‚å¿µã€ä¼˜åŠ¿ã€ä½¿ç”¨åœºæ™¯ä»¥åŠå¦‚ä½•ä½¿ç”¨è¯¥åŠŸèƒ½æ¥åŠ é€Ÿæ„å»ºå’Œç®¡ç†å¤šå¹³å°é•œåƒã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Docker-Buildx-Bakeï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Docker-Buildx-Bakeï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Docker Buildx Bakeï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Docker Buildx Bakeï¼Ÿ</h2><p>Docker Buildx Bake æ˜¯ Docker Buildx çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå®ƒæ—¨åœ¨ç®€åŒ–å’ŒåŠ é€Ÿé•œåƒæ„å»ºè¿‡ç¨‹ã€‚Bake æ˜¯ä¸€ç§å£°æ˜å¼çš„æ„å»ºå®šä¹‰æ–¹å¼ï¼Œå®ƒå…è®¸ç”¨æˆ·åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­å®šä¹‰å¤šä¸ªæ„å»ºé…ç½®å’Œç›®æ ‡å¹³å°ï¼Œå®ç°è‡ªåŠ¨åŒ–æ‰¹é‡æ„å»ºå’Œå‘å¸ƒè·¨å¹³å°é•œåƒã€‚</p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨-Docker-Buildx-Bakeï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-Docker-Buildx-Bakeï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ Docker Buildx Bakeï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ Docker Buildx Bakeï¼Ÿ</h2><h3 id="1-æé«˜æ„å»ºæ•ˆç‡"><a href="#1-æé«˜æ„å»ºæ•ˆç‡" class="headerlink" title="1. æé«˜æ„å»ºæ•ˆç‡"></a>1. æé«˜æ„å»ºæ•ˆç‡</h3><p>Bake é€šè¿‡å¹¶è¡Œæ„å»ºå’Œç¼“å­˜æœºåˆ¶æ¥æé«˜æ„å»ºæ•ˆç‡ã€‚ä½¿ç”¨ Bake å¯ä»¥ä¸€æ¬¡æ€§å®šä¹‰å’Œæ„å»ºå¤šä¸ªé•œåƒï¼Œè€Œæ— éœ€ä¸ºæ¯ä¸ªé•œåƒåˆ†åˆ«æ‰§è¡Œæ„å»ºè¿‡ç¨‹ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çœæ„å»ºæ—¶é—´ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p><h3 id="2-æ”¯æŒå¤šä¸ªå¹³å°å’Œæ¶æ„"><a href="#2-æ”¯æŒå¤šä¸ªå¹³å°å’Œæ¶æ„" class="headerlink" title="2. æ”¯æŒå¤šä¸ªå¹³å°å’Œæ¶æ„"></a>2. æ”¯æŒå¤šä¸ªå¹³å°å’Œæ¶æ„</h3><p>Docker Buildx Bake çš„å¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯å®ƒèƒ½å¤Ÿæ„å»ºå¤šä¸ªå¹³å°å’Œæ¶æ„çš„é•œåƒã€‚é€šè¿‡åœ¨ Bake é…ç½®ä¸­æŒ‡å®šä¸åŒçš„å¹³å°å‚æ•°å°±å¯ä»¥è½»æ¾æ„å»ºé€‚ç”¨äºä¸åŒæ“ä½œç³»ç»Ÿå’Œæ¶æ„çš„é•œåƒã€‚è¿™å¯¹äºè·¨å¹³å°åº”ç”¨ç¨‹åºçš„å¼€å‘å’Œéƒ¨ç½²éå¸¸æœ‰ç”¨ã€‚</p><h3 id="3-ä¸€è‡´çš„æ„å»ºç¯å¢ƒ"><a href="#3-ä¸€è‡´çš„æ„å»ºç¯å¢ƒ" class="headerlink" title="3. ä¸€è‡´çš„æ„å»ºç¯å¢ƒ"></a>3. ä¸€è‡´çš„æ„å»ºç¯å¢ƒ</h3><p>é€šè¿‡ docker-bake.hcl ï¼ˆé™¤äº† HCL é…ç½®æ–‡ä»¶ä¹‹å¤–è¿˜å¯ä»¥æ˜¯ JSON æˆ–æ˜¯ YAML æ–‡ä»¶ï¼‰æ–‡ä»¶æè¿°æ„å»ºè¿‡ç¨‹ç¡®ä¿ä¸€è‡´çš„æ„å»ºç¯å¢ƒï¼Œä½¿ä¸åŒçš„æ„å»ºé…ç½®å’Œç›®æ ‡å¹³å°ä¹‹é—´å…·æœ‰ç›¸åŒçš„æ„å»ºè¿‡ç¨‹å’Œç»“æœã€‚è¿™ç§ä¸€è‡´æ€§æœ‰åŠ©äºå‡å°‘æ„å»ºè¿‡ç¨‹ä¸­çš„é”™è¯¯ï¼Œè€Œä¸”æ„å»ºé…ç½®æ›´æ˜“äºç»´æŠ¤å’Œç®¡ç†ã€‚</p><h2 id="å¦‚ä½•ä½¿ç”¨-Docker-Buildx-Bakeï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨-Docker-Buildx-Bakeï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ Docker Buildx Bakeï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨ Docker Buildx Bakeï¼Ÿ</h2><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ Docker Buildx Bake è¿›è¡Œé«˜æ•ˆæ„å»ºçš„åŸºæœ¬æ­¥éª¤ï¼Œé¦–å…ˆç¡®ä¿ä½ å·²ç»å®‰è£…äº† Docker Engine æˆ– Docker Desktop ç‰ˆæœ¬ 19.03 ä»¥åŠä»¥ä¸Šã€‚</p><p>ç„¶åä½ çš„ docker å‘½ä»¤å°†å˜æˆè¿™æ · <code>docker buildx bake</code>ã€‚ä»¥ä¸‹ <code>docker buildx bake --help</code> çš„å¸®åŠ©è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker buildx bake --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">Usage:  docker buildx bake [OPTIONS] [TARGET...]</span><br><span class="line"></span><br><span class="line">Build from a file</span><br><span class="line"></span><br><span class="line">Aliases:</span><br><span class="line">  docker buildx bake, docker buildx f</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --builder string         Override the configured builder instance</span><br><span class="line">  -f, --file stringArray       Build definition file</span><br><span class="line">      --load                   Shorthand <span class="keyword">for</span> <span class="string">&quot;--set=*.output=type=docker&quot;</span></span><br><span class="line">      --metadata-file string   Write build result metadata to the file</span><br><span class="line">      --no-cache               Do not use cache when building the image</span><br><span class="line">      --<span class="built_in">print</span>                  Print the options without building</span><br><span class="line">      --progress string        Set <span class="built_in">type</span> of progress output (<span class="string">&quot;auto&quot;</span>, <span class="string">&quot;plain&quot;</span>, <span class="string">&quot;tty&quot;</span>). Use plain to show container output (default <span class="string">&quot;auto&quot;</span>)</span><br><span class="line">      --provenance string      Shorthand <span class="keyword">for</span> <span class="string">&quot;--set=*.attest=type=provenance&quot;</span></span><br><span class="line">      --pull                   Always attempt to pull all referenced images</span><br><span class="line">      --push                   Shorthand <span class="keyword">for</span> <span class="string">&quot;--set=*.output=type=registry&quot;</span></span><br><span class="line">      --sbom string            Shorthand <span class="keyword">for</span> <span class="string">&quot;--set=*.attest=type=sbom&quot;</span></span><br><span class="line">      --<span class="built_in">set</span> stringArray        Override target value (e.g., <span class="string">&quot;targetpattern.key=value&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°è¯•ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ <code>docker buildx bake</code></p><h3 id="1-åˆ›å»º-Bake-é…ç½®æ–‡ä»¶"><a href="#1-åˆ›å»º-Bake-é…ç½®æ–‡ä»¶" class="headerlink" title="1. åˆ›å»º Bake é…ç½®æ–‡ä»¶"></a>1. åˆ›å»º Bake é…ç½®æ–‡ä»¶</h3><p>æ¯”å¦‚åˆ›å»ºä¸€ä¸ªåä¸º <code>docker-bake.dev.hcl</code> çš„ Bake é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰æ„å»ºä¸Šä¸‹æ–‡ã€ç›®æ ‡å¹³å°å’Œå…¶ä»–æ„å»ºé€‰é¡¹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker-bake.dev.hcl</span></span><br><span class="line">group <span class="string">&quot;default&quot;</span> &#123;</span><br><span class="line">  targets = [<span class="string">&quot;db&quot;</span>, <span class="string">&quot;webapp-dev&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">target <span class="string">&quot;db&quot;</span> &#123;</span><br><span class="line">  dockerfile = <span class="string">&quot;Dockerfile.db&quot;</span></span><br><span class="line">  tags = [<span class="string">&quot;xianpengshen/docker-buildx-bake-demo:db&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">target <span class="string">&quot;webapp-dev&quot;</span> &#123;</span><br><span class="line">  dockerfile = <span class="string">&quot;Dockerfile.webapp&quot;</span></span><br><span class="line">  tags = [<span class="string">&quot;xianpengshen/docker-buildx-bake-demo:webapp&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">target <span class="string">&quot;webapp-release&quot;</span> &#123;</span><br><span class="line">  inherits = [<span class="string">&quot;webapp-dev&quot;</span>]</span><br><span class="line">  platforms = [<span class="string">&quot;linux/amd64&quot;</span>, <span class="string">&quot;linux/arm64&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-è¿è¡Œ-Bake-æ„å»º"><a href="#2-è¿è¡Œ-Bake-æ„å»º" class="headerlink" title="2. è¿è¡Œ Bake æ„å»º"></a>2. è¿è¡Œ Bake æ„å»º</h3><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹ä½¿ç”¨ Bake æ„å»ºé•œåƒï¼š</p><p><code>$ docker buildx bake -f docker-bake.dev.hcl db webapp-release</code></p><h3 id="3-æ‰“å°æ„å»ºé€‰é¡¹"><a href="#3-æ‰“å°æ„å»ºé€‰é¡¹" class="headerlink" title="3. æ‰“å°æ„å»ºé€‰é¡¹"></a>3. æ‰“å°æ„å»ºé€‰é¡¹</h3><p>ä½ è¿˜å¯ä»¥æ— éœ€æ„å»ºæ‰“å°æ„å»ºé€‰é¡¹ï¼Œä½¿ç”¨ç”¨ <code>--print</code> æ¥æŸ¥çœ‹æŸä¸ªç›®æ ‡æ„å»ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker buildx bake -f docker-bake.dev.hcl --<span class="built_in">print</span> db</span><br><span class="line">[+] Building 0.0s (0/0)         </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;group&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;default&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;targets&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;db&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;target&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;db&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;context&quot;</span>: <span class="string">&quot;.&quot;</span>,</span><br><span class="line">      <span class="string">&quot;dockerfile&quot;</span>: <span class="string">&quot;Dockerfile.db&quot;</span>,</span><br><span class="line">      <span class="string">&quot;tags&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;xianpengshen/docker-buildx-bake-demo:db&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å‘å¸ƒæ„å»ºé•œåƒ"><a href="#4-å‘å¸ƒæ„å»ºé•œåƒ" class="headerlink" title="4. å‘å¸ƒæ„å»ºé•œåƒ"></a>4. å‘å¸ƒæ„å»ºé•œåƒ</h3><p>é€šè¿‡æ·»åŠ  <code>--push</code> é€‰é¡¹å¯ä»¥å°†æ„å»ºå®Œæˆçš„é•œåƒä¸€é”®å‘å¸ƒçš„é•œåƒä»“åº“ï¼Œä¾‹å¦‚ <code>$ docker buildx bake -f docker-bake.dev.hcl --push db webapp-release</code></p><p>ä»¥ä¸Šç¤ºä¾‹ä¸­çš„ demo æ”¾åœ¨è¿™é‡Œäº†ï¼š<a href="https://github.com/shenxianpeng/docker-buildx-bake-demo">https://github.com/shenxianpeng/docker-buildx-bake-demo</a></p><h3 id="5-Buildx-Bake-é«˜çº§ç”¨æ³•"><a href="#5-Buildx-Bake-é«˜çº§ç”¨æ³•" class="headerlink" title="5. Buildx Bake é«˜çº§ç”¨æ³•"></a>5. Buildx Bake é«˜çº§ç”¨æ³•</h3><p>Buildx Bake è¿˜æœ‰å…¶ä»–æ›´å¤šçš„ä½¿ç”¨æŠ€å·§ï¼Œæ¯”å¦‚ <code>variable</code>, <code>function </code>, <code>matrix</code> ç­‰è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œè¯¦æƒ…è¯·å‚è§å®˜æ–¹ <a href="https://docs.docker.com/build/bake/reference/">Buildx Bake reference</a> æ–‡æ¡£ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Docker Buildx Bake æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ„å»ºå·¥å…·ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€åŒ–å’ŒåŠ é€Ÿæ„å»ºè¿‡ç¨‹çš„æ–¹æ³•ã€‚é€šè¿‡ä½¿ç”¨ Bake ä½ å¯ä»¥é«˜æ•ˆåœ°æ„å»ºå’Œæµ‹è¯•å¤šä¸ªé•œåƒï¼Œå¹¶ä¸”å¯ä»¥è·¨å¤šä¸ªå¹³å°å’Œæ¶æ„è¿›è¡Œæ„å»ºã€‚æ‰€ä»¥è¯´ Bake æ˜¯å¼€å‘äººå‘˜å’Œæ„å»ºå·¥ç¨‹å¸ˆçš„é‡è¦åˆ©å™¨ï¼ŒæŒæ¡ Docker Buildx Bake çš„ä½¿ç”¨æ–¹æ³•å°†å¸®åŠ©ä½ æ›´å¥½åœ°åº”å¯¹å¤šé•œåƒæ„å»ºçš„å¸¦æ¥çš„æŒ‘æˆ˜ã€åŠ å¿«åº”ç”¨ç¨‹åºçš„äº¤ä»˜é€Ÿåº¦ã€‚</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Buildx </tag>
            
            <tag> Bake </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¦è§£SBOMï¼šå®šä¹‰ã€å…³ç³»ã€åŒºåˆ«ã€æœ€ä½³å®è·µå’Œç”Ÿæˆå·¥å…·</title>
      <link href="/2023/06/sbom/"/>
      <url>/2023/06/sbom/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-SBOM"><a href="#ä»€ä¹ˆæ˜¯-SBOM" class="headerlink" title="ä»€ä¹ˆæ˜¯ SBOM"></a>ä»€ä¹ˆæ˜¯ SBOM</h2><p>SBOM æ˜¯è½¯ä»¶ææ–™æ¸…å•ï¼ˆSoftware Bill of Materialsï¼‰çš„ç¼©å†™ã€‚å®ƒæ˜¯ä¸€ä»½è¯¦ç»†è®°å½•è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ‰€æœ‰ç»„ä»¶ã€åº“å’Œä¾èµ–é¡¹çš„æ¸…å•ã€‚</p><p>SBOM ç±»ä¼¼äºäº§å“çš„é…æ–¹æ¸…å•ï¼Œå®ƒåˆ—å‡ºäº†æ„æˆè½¯ä»¶åº”ç”¨ç¨‹åºçš„å„ç§å…ƒç´ ï¼ŒåŒ…æ‹¬å¼€æºè½¯ä»¶ç»„ä»¶ã€ç¬¬ä¸‰æ–¹åº“ã€æ¡†æ¶ã€å·¥å…·ç­‰ã€‚æ¯ä¸ªå…ƒç´ åœ¨ SBOM ä¸­éƒ½ä¼šæœ‰è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¦‚åç§°ã€ç‰ˆæœ¬å·ã€è®¸å¯è¯ä¿¡æ¯ã€ä¾èµ–å…³ç³»ç­‰ã€‚</p><p>SBOM çš„ç›®çš„æ˜¯å¢åŠ è½¯ä»¶ä¾›åº”é“¾çš„å¯è§æ€§å’Œé€æ˜åº¦ï¼Œå¹¶æä¾›æ›´å¥½çš„é£é™©ç®¡ç†å’Œå®‰å…¨æ€§ã€‚å®ƒå¯ä»¥å¸®åŠ©è½¯ä»¶å¼€å‘è€…ã€ä¾›åº”å•†å’Œç”¨æˆ·äº†è§£å…¶è½¯ä»¶ä¸­ä½¿ç”¨çš„ç»„ä»¶å’Œä¾èµ–é¡¹ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç®¡ç†æ½œåœ¨çš„æ¼æ´ã€å®‰å…¨é£é™©å’Œåˆè§„æ€§é—®é¢˜ã€‚é€šè¿‡ SBOM ç”¨æˆ·å¯ä»¥è¯†åˆ«å’Œè·Ÿè¸ªè½¯ä»¶ä¸­å­˜åœ¨çš„ä»»ä½•æ½œåœ¨æ¼æ´æˆ–å·²çŸ¥çš„å®‰å…¨é—®é¢˜ï¼Œå¹¶åŠæ—¶é‡‡å–ç›¸åº”çš„è¡¥æ•‘æªæ–½ã€‚</p><p>SBOM è¿˜å¯ä»¥ç”¨äºè½¯ä»¶å®¡è®¡ã€åˆè§„æ€§è¦æ±‚å’Œæ³•è§„éµä»æ€§ç­‰æ–¹é¢ã€‚ä¸€äº›è¡Œä¸šæ ‡å‡†å’Œæ³•è§„ï¼ˆå¦‚è½¯ä»¶ä¾›åº”é“¾å®‰å…¨æ¡†æ¶ï¼ˆSSCFï¼‰å’Œæ¬§ç›Ÿç½‘ç»œå’Œä¿¡æ¯å®‰å…¨æŒ‡ä»¤ï¼ˆNISæŒ‡ä»¤ï¼‰ï¼‰å·²ç»è¦æ±‚è½¯ä»¶ä¾›åº”å•†æä¾› SBOMï¼Œä»¥æé«˜è½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨æ€§å’Œå¯ä¿¡åº¦ã€‚</p><p><strong>æ€»ä¹‹ï¼ŒSBOM æ˜¯ä¸€ä»½è®°å½•è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ‰€æœ‰ç»„ä»¶å’Œä¾èµ–é¡¹çš„æ¸…å•ï¼Œå®ƒæä¾›äº†å¯¹è½¯ä»¶ä¾›åº”é“¾çš„å¯è§æ€§ï¼Œæœ‰åŠ©äºç®¡ç†é£é™©ã€æé«˜å®‰å…¨æ€§ï¼Œå¹¶æ»¡è¶³åˆè§„æ€§è¦æ±‚ã€‚</strong></p><h2 id="SBOM-å’Œ-SLSA-ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#SBOM-å’Œ-SLSA-ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="SBOM å’Œ SLSA ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"></a>SBOM å’Œ SLSA ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h2><p>SBOMï¼ˆè½¯ä»¶ææ–™æ¸…å•ï¼‰å’Œ SLSAï¼ˆSupply Chain Levels for Software Artifactsï¼‰æ˜¯ä¸¤ä¸ªä¸åŒä½†ç›¸å…³çš„æ¦‚å¿µã€‚</p><ul><li>SBOM æ˜¯è½¯ä»¶ææ–™æ¸…å•ï¼Œå®ƒæä¾›äº†å¯¹è½¯ä»¶ä¾›åº”é“¾çš„å¯è§æ€§ï¼ŒåŒ…æ‹¬ç»„ä»¶çš„ç‰ˆæœ¬ã€è®¸å¯è¯ä¿¡æ¯ã€æ¼æ´ç­‰ã€‚SBOM æ—¨åœ¨å¸®åŠ©ç»„ç»‡æ›´å¥½åœ°ç®¡ç†å’Œæ§åˆ¶è½¯ä»¶ä¾›åº”é“¾ï¼Œè¯†åˆ«å’Œå¤„ç†æ½œåœ¨çš„æ¼æ´ã€åˆè§„æ€§é—®é¢˜å’Œå®‰å…¨é£é™©ã€‚</li><li>SLSA æ˜¯ä¸€ç§ä¾›åº”é“¾å®‰å…¨æ¡†æ¶ï¼Œå®ƒå®šä¹‰äº†ä¸åŒçº§åˆ«çš„å®‰å…¨è¦æ±‚å’Œå®è·µï¼Œä»¥ç¡®ä¿è½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨æ€§ã€‚SLSA æ—¨åœ¨åŠ å¼ºè½¯ä»¶çš„å¯ä¿¡åº¦å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢æ¶æ„ä»£ç ã€ä¾›åº”é“¾æ”»å‡»å’Œæ¼æ´çš„ä¼ æ’­ã€‚SLSA å…³æ³¨æ•´ä¸ªè½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨ï¼ŒåŒ…æ‹¬ç»„ä»¶çš„æ¥æºã€éªŒè¯ã€æ„å»ºè¿‡ç¨‹å’Œå‘å¸ƒæœºåˆ¶ã€‚</li></ul><p>å…³äºä¸¤è€…çš„åŒºåˆ«ï¼š</p><ol><li>è§†è§’ä¸åŒï¼šSBOM å…³æ³¨è½¯ä»¶æ„å»ºç‰©æ–™çš„æ¸…å•å’Œå¯è§æ€§ï¼Œæä¾›å¯¹ç»„ä»¶å’Œä¾èµ–é¡¹çš„è¯¦ç»†ä¿¡æ¯ã€‚SLSA å…³æ³¨ä¾›åº”é“¾çš„å®‰å…¨æ€§ï¼Œå®šä¹‰äº†å®‰å…¨çº§åˆ«å’Œå®è·µï¼Œå¼ºè°ƒç¡®ä¿è½¯ä»¶ä¾›åº”é“¾çš„å¯ä¿¡åº¦å’Œå®‰å…¨æ€§ã€‚</li><li>ç”¨é€”ä¸åŒï¼šSBOM ç”¨äºè¯†åˆ«å’Œç®¡ç†è½¯ä»¶æ„å»ºä¸­çš„ç»„ä»¶ã€æ¼æ´å’Œåˆè§„æ€§é—®é¢˜ã€‚å®ƒæä¾›äº†ä¸€ç§ç®¡ç†è½¯ä»¶ä¾›åº”é“¾é£é™©çš„å·¥å…·ã€‚SLSA åˆ™æä¾›äº†ä¸€ç§å®‰å…¨æ¡†æ¶ï¼Œé€šè¿‡å®šä¹‰å®‰å…¨çº§åˆ«å’Œè¦æ±‚ï¼Œå¸®åŠ©ç»„ç»‡ç¡®ä¿è½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨æ€§ã€‚</li><li>å…³è”æ€§ï¼šSLSA å¯ä»¥åˆ©ç”¨ SBOM ä½œä¸ºå…¶å®æ–½çš„ä¸€éƒ¨åˆ†ã€‚SBOM æä¾›äº† SLSA æ‰€éœ€çš„ç»„ä»¶å’Œä¾èµ–é¡¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œæœ‰åŠ©äºéªŒè¯å’Œå®¡è®¡ä¾›åº”é“¾çš„å®‰å…¨æ€§ã€‚SLSA çš„å®è·µå¯ä»¥åŒ…æ‹¬è¦æ±‚ä½¿ç”¨ SBOM ç”Ÿæˆå’ŒéªŒè¯ï¼Œä»¥ç¡®ä¿è½¯ä»¶ä¾›åº”é“¾çš„å¯è§æ€§å’Œå®Œæ•´æ€§ã€‚</li></ol><p>SBOM å’Œ SLSA éƒ½æ˜¯è½¯ä»¶ä¾›åº”é“¾å®‰å…¨ä¸­çš„ä¸¤ä¸ªå…³é”®æ¦‚å¿µã€‚å®ƒä»¬å¯ä»¥ç›¸äº’å…³è”å’Œäº’è¡¥ä½¿ç”¨ï¼Œä»¥åŠ å¼ºè½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨æ€§å’Œç®¡ç†ã€‚</p><h2 id="SBOM-å’Œ-Black-Duck-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#SBOM-å’Œ-Black-Duck-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="SBOM å’Œ Black Duck ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"></a>SBOM å’Œ Black Duck ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>SBOMï¼ˆSoftware Bill of Materialsï¼‰å’Œ Synopsys BlackDuck æ˜¯ä¸¤ä¸ªç›¸å…³ä½†ä¸åŒçš„æ¦‚å¿µã€‚ä¸‹é¢æ˜¯å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š</p><p>SBOMï¼š</p><ol><li>å®šä¹‰ï¼šSBOM æ˜¯ä¸€ç§æ–‡æ¡£æˆ–æ¸…å•ï¼Œç”¨äºè®°å½•è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ‰€æœ‰ç»„ä»¶å’Œä¾èµ–é¡¹ã€‚å®ƒæä¾›äº†å¯¹è½¯ä»¶ä¾›åº”é“¾çš„å¯è§æ€§å’Œé€æ˜åº¦ã€‚</li><li>å†…å®¹ï¼šSBOM åˆ—å‡ºäº†æ¯ä¸ªç»„ä»¶çš„åç§°ã€ç‰ˆæœ¬å·ã€ä½œè€…ã€è®¸å¯è¯ä¿¡æ¯ç­‰è¯¦ç»†ä¿¡æ¯ã€‚å®ƒæœ‰åŠ©äºè¿½è¸ªå’Œç®¡ç†è½¯ä»¶çš„ç»„ä»¶ã€ä¾èµ–å…³ç³»ã€æ¼æ´å’Œè®¸å¯è¯åˆè§„æ€§ç­‰ã€‚</li><li>ç”¨é€”ï¼šSBOM ç”¨äºè½¯ä»¶ä¾›åº”é“¾ç®¡ç†ã€å®‰å…¨å®¡è®¡ã€åˆè§„æ€§éªŒè¯å’Œé£é™©ç®¡ç†ã€‚å®ƒå¸®åŠ©ç»„ç»‡äº†è§£è½¯ä»¶æ„å»ºä¸­ä½¿ç”¨çš„ç»„ä»¶ï¼Œè¯†åˆ«æ½œåœ¨çš„æ¼æ´å’Œé£é™©ï¼Œå¹¶ç¡®ä¿åˆè§„æ€§ã€‚</li></ol><p>Synopsys Black Duckï¼š</p><ol><li>åŠŸèƒ½ï¼šSynopsys Black Duck æ˜¯ä¸€ç§ä¾›åº”é“¾é£é™©ç®¡ç†å·¥å…·ã€‚å®ƒå¯ä»¥æ‰«æè½¯ä»¶é¡¹ç›®ï¼Œè¯†åˆ«å…¶ä¸­ä½¿ç”¨çš„å¼€æºç»„ä»¶å’Œç¬¬ä¸‰æ–¹åº“ï¼Œå¹¶åˆ†æå…¶è®¸å¯è¯åˆè§„æ€§ã€å®‰å…¨æ¼æ´å’Œå…¶ä»–æ½œåœ¨é£é™©ã€‚</li><li>ç‰¹ç‚¹ï¼šBlack Duck å…·æœ‰å¹¿æ³›çš„æ¼æ´æ•°æ®åº“å’Œè®¸å¯è¯çŸ¥è¯†åº“ï¼Œå¯ä¸å¼€å‘æµç¨‹å’Œ CI&#x2F;CD å·¥å…·é›†æˆï¼Œæä¾›æ¼æ´è­¦æŠ¥ã€è®¸å¯è¯åˆè§„æŠ¥å‘Šå’Œé£é™©åˆ†æç­‰åŠŸèƒ½ã€‚</li><li>ç›®çš„ï¼šBlack Duck å¸®åŠ©ç»„ç»‡ç®¡ç†å’Œæ§åˆ¶è½¯ä»¶ä¾›åº”é“¾é£é™©ï¼Œæä¾›å®æ—¶çš„å¼€æºç»„ä»¶å’Œç¬¬ä¸‰æ–¹åº“çš„å®‰å…¨å’Œåˆè§„æ€§ä¿¡æ¯ï¼Œä»¥æ”¯æŒå†³ç­–å’Œé‡‡å–é€‚å½“çš„æªæ–½ã€‚</li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒSBOM æ˜¯è®°å½•è½¯ä»¶æ„å»ºä¸­ä½¿ç”¨çš„ç»„ä»¶å’Œä¾èµ–é¡¹ï¼Œæä¾›å¯¹è½¯ä»¶ä¾›åº”é“¾çš„å¯è§æ€§å’Œç®¡ç†ã€‚è€Œ Black Duck æ˜¯ä¸€ç§ä¾›åº”é“¾é£é™©ç®¡ç†å·¥å…·ï¼Œé€šè¿‡æ‰«æå’Œåˆ†æè½¯ä»¶é¡¹ç›®ä¸­çš„å¼€æºç»„ä»¶å’Œç¬¬ä¸‰æ–¹åº“ï¼Œæä¾›è®¸å¯è¯åˆè§„æ€§ã€å®‰å…¨æ¼æ´å’Œé£é™©åˆ†æç­‰åŠŸèƒ½ã€‚Black Duck å¯ä»¥ç”¨äºç”Ÿæˆ SBOMï¼Œå¹¶æä¾›æ›´å…¨é¢çš„é£é™©å’Œåˆè§„æ€§åˆ†æã€‚å› æ­¤ï¼ŒBlack Duck æ˜¯ä¸€ä¸ªå…·ä½“çš„å·¥å…·ï¼Œè€Œ SBOM æ˜¯ä¸€ç§è®°å½•å’Œç®¡ç†è½¯ä»¶ä¾›åº”é“¾ä¿¡æ¯çš„æ¦‚å¿µã€‚</p><h2 id="SBOM-çš„æœ€ä½³å®è·µ"><a href="#SBOM-çš„æœ€ä½³å®è·µ" class="headerlink" title="SBOM çš„æœ€ä½³å®è·µ"></a>SBOM çš„æœ€ä½³å®è·µ</h2><ol><li>è‡ªåŠ¨åŒ–ç”Ÿæˆï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ç”Ÿæˆ SBOMï¼Œé¿å…æ‰‹åŠ¨åˆ›å»ºå’Œç»´æŠ¤ï¼Œç¡®ä¿å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li><li>åŒ…å«è¯¦ç»†ä¿¡æ¯ï¼šåœ¨ SBOM ä¸­åŒ…å«å°½å¯èƒ½è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¦‚ç»„ä»¶åç§°ã€ç‰ˆæœ¬å·ã€ä½œè€…ã€è®¸å¯è¯ä¿¡æ¯ã€ä¾èµ–å…³ç³»ã€æ¼æ´ä¿¡æ¯ç­‰ã€‚</li><li>å®šæœŸæ›´æ–°ï¼šå®šæœŸæ›´æ–° SBOM ä»¥åæ˜ æœ€æ–°çš„æ„å»ºç‰©æ–™æ¸…å•ï¼Œç¡®ä¿å…¶å‡†ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚</li><li>ç‰ˆæœ¬æ§åˆ¶ï¼šå¯¹äºæ¯ä¸ªè½¯ä»¶ç‰ˆæœ¬ï¼Œå»ºç«‹å’Œç®¡ç†ç›¸åº”çš„ SBOM ç‰ˆæœ¬ï¼Œä»¥ä¾¿è·Ÿè¸ªè½¯ä»¶ç‰ˆæœ¬å’Œå…¶å¯¹åº”çš„æ„å»ºç‰©æ–™æ¸…å•ã€‚</li><li>é›†æˆåˆ°è½¯ä»¶ç”Ÿå‘½å‘¨æœŸï¼šå°† SBOM é›†æˆåˆ°æ•´ä¸ªè½¯ä»¶ç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒåŒ…æ‹¬å¼€å‘ã€æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²å’Œç»´æŠ¤é˜¶æ®µã€‚</li><li>æ¼æ´ç®¡ç†å’Œé£é™©è¯„ä¼°ï¼šåˆ©ç”¨ SBOM ä¸­çš„æ¼æ´ä¿¡æ¯ï¼Œä¸æ¼æ´æ•°æ®åº“é›†æˆï¼Œè¿›è¡Œæ¼æ´ç®¡ç†å’Œé£é™©è¯„ä¼°ã€‚</li><li>ä¾›åº”å•†åˆä½œï¼šä¸ä¾›åº”å•†å’Œåˆä½œä¼™ä¼´å…±äº«å’Œè·å– SBOM ä¿¡æ¯ï¼Œç¡®ä¿ä»–ä»¬ä¹Ÿæä¾›å‡†ç¡®çš„ SBOMï¼Œå¹¶æŒç»­å…³æ³¨ä»–ä»¬çš„æ¼æ´ç®¡ç†å’Œåˆè§„æ€§æªæ–½ã€‚</li></ol><h2 id="SBOM-çš„ç”Ÿæˆå·¥å…·"><a href="#SBOM-çš„ç”Ÿæˆå·¥å…·" class="headerlink" title="SBOM çš„ç”Ÿæˆå·¥å…·"></a>SBOM çš„ç”Ÿæˆå·¥å…·</h2><ol><li>CycloneDXï¼šCycloneDX æ˜¯ä¸€ç§å¼€æ”¾çš„è½¯ä»¶ç»„ä»¶æè¿°æ ‡å‡†ï¼Œç”¨äºç”Ÿæˆå’Œå…±äº« SBOMã€‚å®ƒæ”¯æŒå¤šç§è¯­è¨€å’Œæ„å»ºå·¥å…·ï¼Œå…·æœ‰å¹¿æ³›çš„ç”Ÿæ€ç³»ç»Ÿå’Œå·¥å…·é›†æˆã€‚</li><li>SPDXï¼šSPDXï¼ˆSoftware Package Data Exchangeï¼‰æ˜¯ä¸€ç§å¼€æ”¾çš„æ ‡å‡†ï¼Œç”¨äºæè¿°è½¯ä»¶ç»„ä»¶å’Œç›¸å…³è®¸å¯è¯ä¿¡æ¯ã€‚å®ƒæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥ç”Ÿæˆå’Œäº¤æ¢SBOMã€‚</li><li>OWASP Dependency-Trackï¼šDependency-Track æ˜¯ä¸€ä¸ªå¼€æºçš„ä¾›åº”é“¾å®‰å…¨å¹³å°ï¼Œå¯ç”Ÿæˆå’Œåˆ†æ SBOMï¼Œæä¾›æ¼æ´ç®¡ç†ã€è®¸å¯è¯åˆè§„æ€§å’Œä¾›åº”é“¾å¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚</li><li>WhiteSource: WhiteSource æ˜¯ä¸€ç§ä¾›åº”é“¾ç®¡ç†å·¥å…·ï¼Œæä¾›äº†è‡ªåŠ¨åŒ–çš„å¼€æºç»„ä»¶è¯†åˆ«ã€è®¸å¯è¯ç®¡ç†å’Œæ¼æ´åˆ†æï¼Œå¯ä»¥ç”ŸæˆSBOMå¹¶è¿›è¡Œé£é™©è¯„ä¼°ã€‚</li><li>JFrog Xrayï¼šJFrog Xray æ˜¯ä¸€ç§è½¯ä»¶ä¾›åº”é“¾åˆ†æå·¥å…·ï¼Œå¯ä»¥æ‰«æå’Œåˆ†ææ„å»ºç‰©æ–™æ¸…å•ï¼Œæä¾›æ¼æ´è­¦æŠ¥ã€è®¸å¯è¯åˆè§„æ€§å’Œå®‰å…¨æ€§åˆ†æã€‚</li><li>Microsoft sbom-toolï¼šæ˜¯ä¸€ç§é«˜åº¦å¯æ‰©å±•ã€é€‚ç”¨äºä¼ä¸šçš„å·¥å…·ï¼Œå¯ä¸ºå„ç§å·¥ä»¶åˆ›å»º SPDX 2.2 å…¼å®¹çš„ SBOMã€‚</li><li>trivyï¼šæ”¯æŒåœ¨å®¹å™¨ã€Kubernetesã€ä»£ç å­˜å‚¨åº“ã€Cloud ç­‰ä¸­æŸ¥æ‰¾æ¼æ´ã€é”™è¯¯é…ç½®ã€å¯†é’¥ å’Œç”Ÿæˆ SBOMã€‚</li></ol><p>é™¤äº†ä»¥ä¸Šè¿™äº›è¿˜æœ‰ä¸€äº›å…¶ä»–å·¥å…·ä¹Ÿæä¾›äº† SBOM ç”Ÿæˆã€ç®¡ç†å’Œåˆ†æçš„åŠŸèƒ½ï¼Œä½ å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©é€‚åˆçš„å·¥å…·æ¥å®æ–½ SBOM çš„æœ€ä½³å®è·µã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¸Œæœ›é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œè®©ä½ äº†è§£äº† SBOM çš„æ¦‚å¿µã€ä¸ SLSA å’Œ Black Duck çš„å…³ç³»å’ŒåŒºåˆ«ã€æœ€ä½³å®è·µä»¥åŠå¯ç”¨çš„ç”Ÿæˆå·¥å…·æ¥å¸®åŠ©æ›´å¥½åœ°ç®¡ç†è½¯ä»¶ä¾›åº”é“¾å®‰å…¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SBOM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚æœä½ æ˜¯é¡¹ç›®æˆå‘˜ï¼Œæ˜¯ Fork åŸå§‹ä»“åº“è¿˜æ˜¯ç›´æ¥åŸå§‹ä»“åº“ä¸­ä¿®æ”¹ä»£ç ï¼Ÿ</title>
      <link href="/2023/06/fork-or-unfork/"/>
      <url>/2023/06/fork-or-unfork/</url>
      
        <content type="html"><![CDATA[<p>æƒ³å¿…ä½ ä¹Ÿè§åˆ°è¿‡å¾ˆå¤šå¼€æºé¡¹ç›®ä¸­çš„ CONTRIBUTION.md æ–‡æ¡£ä¸­é€šå¸¸éƒ½ä¼šè®©è´¡çŒ®è€… Fork ä»“åº“ï¼Œç„¶ååšä¿®æ”¹ã€‚</p><p><strong>é‚£ä¹ˆå¦‚æœä½ æ˜¯è¯¥å¼€æºé¡¹ç›®ä¸­çš„æˆå‘˜æ˜¯å¦éœ€è¦ Fork ä»“åº“è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿ</strong></p><p>ä»¥å‰æˆ‘æ²¡æœ‰è®¤çœŸå»æƒ³è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå¯¹äºé¡¹ç›®æˆå‘˜æ„Ÿè§‰ Fork æˆ–ä¸ Fork å¥½åƒå·®ä¸å¤šï¼Œä½†ä»”ç»†æƒ³æƒ³ Fork ä»“åº“ä¸ä¸ Fork ä»“åº“å…¶å®æ˜¯æœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦çš„å·®åˆ«çš„ï¼š</p><h2 id="ä¿®æ”¹æƒé™"><a href="#ä¿®æ”¹æƒé™" class="headerlink" title="ä¿®æ”¹æƒé™"></a>ä¿®æ”¹æƒé™</h2><p>åœ¨åŸå§‹ä»“åº“ä¸­ï¼Œä½ å¯èƒ½æ²¡æœ‰ç›´æ¥ä¿®æ”¹ä»£ç çš„æƒé™ï¼Œå½“ä½  Fork ä¸€ä¸ªä»“åº“æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå±äºä½ è‡ªå·±çš„å‰¯æœ¬ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªå‰¯æœ¬ä¸­æ‹¥æœ‰å®Œå…¨çš„ä¿®æ”¹æƒé™ï¼Œä½ å¯ä»¥è‡ªç”±åœ°è¿›è¡Œæ›´æ”¹ã€æ·»åŠ æ–°åŠŸèƒ½ã€è§£å†³bugç­‰ï¼Œè€Œä¸ä¼šå¯¹åŸå§‹ä»“åº“äº§ç”Ÿç›´æ¥å½±å“ã€‚</p><h2 id="åšå®éªŒæ€§çš„å·¥ä½œ"><a href="#åšå®éªŒæ€§çš„å·¥ä½œ" class="headerlink" title="åšå®éªŒæ€§çš„å·¥ä½œ"></a>åšå®éªŒæ€§çš„å·¥ä½œ</h2><p>å¦‚æœä½ è®¡åˆ’è¿›è¡Œè¾ƒå¤§çš„ä¿®æ”¹æˆ–å®éªŒæ€§å·¥ä½œï¼Œå¹¶ä¸”ä¸å¸Œæœ›ç›´æ¥å½±å“åŸå§‹ä»“åº“ï¼Œé‚£ä¹ˆ fork ä»“åº“å¹¶åœ¨ fork çš„ä¸­è¿›è¡Œä¿®æ”¹æ›´ä¸ºåˆé€‚ã€‚</p><p>æ¯”å¦‚ä½ éœ€è¦å®éªŒæ€§çš„å»å¤§é‡æ¸…ç†ç°æœ‰ä»“åº“é‡Œçš„ä¸€äº›åƒåœ¾æ–‡ä»¶æˆ–æ˜¯ä»£ç ï¼Œå¦‚æœä½ éœ€è¦éœ€è¦å¤šæ¬¡å°è¯•ï¼Œå¹¶å°†å¤šæ¬¡ä¿®æ”¹ç›´æ¥ git push åˆ°æ¨é€åŸå§‹ä»“åº“è¿›è¡Œä¿å­˜æˆ–æ˜¯æµ‹è¯•ï¼Œè¿™å¤§å¤§å¢åŠ åŸå§‹ä»“åº“çš„å­˜å‚¨ç©ºé—´ï¼Œå¦‚æœä½ çš„ä¿®æ”¹æ˜¯å¤§å‹æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯¹åŸå§‹ä»“åº“çš„å­˜å‚¨ç©ºé—´å½±å“åˆ™ä¼šæ›´å¤§ï¼›å¦‚æœä½ æ˜¯ Fork ä»“åº“åˆ™ä¸ä¼šé€ æˆåŸå§‹ä»“åº“çš„å½±å“ï¼Œç›´åˆ°ä½ å®Œæˆä¿®æ”¹é€šè¿‡ Pull Request åˆå¹¶åˆ°åŸå§‹ä»“åº“æ—¶æ‰ä¼šäº§ç”Ÿæ–°çš„å­˜å‚¨ç©ºé—´ã€‚</p><h2 id="ä»£ç å®¡æŸ¥å’Œåä½œ"><a href="#ä»£ç å®¡æŸ¥å’Œåä½œ" class="headerlink" title="ä»£ç å®¡æŸ¥å’Œåä½œ"></a>ä»£ç å®¡æŸ¥å’Œåä½œ</h2><p>å½“ä½  Fork ä¸€ä¸ªä»“åº“å¹¶åœ¨è‡ªå·±çš„å‰¯æœ¬ä¸­è¿›è¡Œä¿®æ”¹åï¼Œä½ å¿…é¡»é€šè¿‡ Pull Requestï¼ˆPRï¼‰å‘åŸå§‹ä»“åº“åˆå¹¶ä¿®æ”¹ï¼Œæœ‰åŠ©äºç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§ã€‚ï¼ˆå½“ç„¶ä¸ Fork ä¹Ÿ<strong>å¯ä»¥</strong>è¿™æ ·åšæˆ–ä¸åšï¼Œä½† Fork äº†å°±<strong>å¿…é¡»</strong>è¿™æ ·åšäº†ï¼‰</p><h2 id="ç‰ˆæœ¬æ§åˆ¶å’Œå†å²è®°å½•"><a href="#ç‰ˆæœ¬æ§åˆ¶å’Œå†å²è®°å½•" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶å’Œå†å²è®°å½•"></a>ç‰ˆæœ¬æ§åˆ¶å’Œå†å²è®°å½•</h2><p>Fork ä¸€ä¸ªä»“åº“åï¼Œä½ å¯ä»¥åœ¨è‡ªå·±çš„å‰¯æœ¬ä¸­ç»´æŠ¤ç‹¬ç«‹çš„ç‰ˆæœ¬æ§åˆ¶å†å²ã€‚ä½ å¯ä»¥è·Ÿè¸ªè‡ªå·±çš„æ›´æ”¹ã€å›æº¯å†å²ã€ç®¡ç†ä»£ç ç‰ˆæœ¬ï¼Œè€Œä¸ä¼šå½±å“åˆ°åŸå§‹ä»“åº“çš„ç‰ˆæœ¬æ§åˆ¶ã€‚åŒæ—¶ï¼Œä½ å¯ä»¥ä»åŸå§‹ä»“åº“åŒæ­¥æœ€æ–°çš„æ›´æ”¹ï¼Œä¿æŒä½ çš„å‰¯æœ¬ä¸åŸå§‹ä»“åº“çš„åŒæ­¥ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Fork ä»“åº“ä¸ä¸ Fork ä»“åº“çš„ä¸»è¦å·®åˆ«åœ¨äºä¿®æ”¹æƒé™ã€åšå®éªŒæ€§çš„å·¥ä½œã€ä»£ç å®¡æŸ¥å’Œåä½œï¼Œä»¥åŠç‰ˆæœ¬æ§åˆ¶å’Œå†å²è®°å½•ã€‚</p><p>ä¸ªäººè®¤ä¸ºåªè¦ä¸€ä¸ªä»“åº“çš„è´¡çŒ®è€…è¶…è¿‡ 3 äººï¼Œéƒ½å»ºè®®æ‰€æœ‰äººéƒ½ Fork åŸå§‹ä»“åº“ï¼Œé€šè¿‡ Pull Request æ–¹å¼åˆå¹¶ä»£ç ã€‚</p><p>ä½†ä¹Ÿæœ‰ä¾‹å¤–æƒ…å†µå¯èƒ½ä¸é€‚åˆ Forkï¼šé¡¹ç›®åœ¨ Fork ä¹‹å CI&#x2F;CD æ— æ³•ç‹¬ç«‹å·¥ä½œï¼Œä½†æ˜¯ä½ éœ€è¦å®ƒä»¬ã€‚æ¯”å¦‚ Fork åçš„ä»“åº“å› ä¸ºç¯å¢ƒç­‰åŸå› ä¸æ”¯æŒç‹¬ç«‹çš„è¿è¡Œ CI&#x2F;CD è€Œä½ éœ€è¦åœ¨æäº¤ Pull Request ä¹‹å‰é€šè¿‡è‡ªåŠ¨åŒ–å¯¹åˆ†æ”¯è¿›è¡Œæµ‹è¯•ã€‚</p><p>å¦å¤–è¿˜è¦ä¸ºåŸå§‹ä»“åº“éœ€è¦åšé€‚å½“çš„åˆ†æ”¯æƒé™è®¾ç½®ï¼Œä»¥é˜²æ­¢å°±ç®—ä¸¤ä¸ªäººçš„å›¢é˜Ÿå¦å¤–ä¸€ä¸ªäººä¸ç†Ÿæ‚‰ Git ä½¿ç”¨äº†éå¸¸å±é™©çš„æ“ä½œï¼Œæ¯”å¦‚å¼ºåˆ¶æ¨é€ï¼ˆForce Pushï¼‰ï¼Œå˜åŸºï¼ˆRebasingï¼‰ï¼Œå¼ºåˆ¶æ£€å‡ºï¼ˆForce Checkoutï¼‰å¯èƒ½å¯¼è‡´ä»£ç ä¸¢å¤±ã€æ•°æ®æŸåæˆ–ç‰ˆæœ¬æ§åˆ¶é—®é¢˜ã€‚</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Fork </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¨‹åºå‘˜è‡ªæˆ‘ä¿®å…»ä¹‹Gitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒï¼ˆå·¥å…·ç¯‡ï¼‰</title>
      <link href="/2023/05/commit-check/"/>
      <url>/2023/05/commit-check/</url>
      
        <content type="html"><![CDATA[<p>Git æäº¤ä¿¡æ¯å’Œ Git åˆ†æ”¯å‘½åè§„èŒƒæ˜¯å›¢é˜Ÿåä½œä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬èƒ½å¤Ÿä½¿ä»£ç åº“æ›´åŠ è§„èŒƒã€æ˜“äºç»´æŠ¤å’Œç†è§£ã€‚</p><p>æˆ‘ä»¬éœ€è¦é€šè¿‡å·¥å…·æ¥å¸®åŠ©å®ç°Gitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒï¼Œæœ¬ç¯‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ <a href="https://github.com/commit-check/commit-check">Commit Check</a> è¿™ä¸ªå·¥å…·æ¥éªŒè¯æäº¤ä¿¡æ¯ã€åˆ†æ”¯å‘½åã€æäº¤ç”¨æˆ·åå­—ã€æäº¤ç”¨æˆ·é‚®ç®±ç­‰æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚</p><p>æ›´å¤šå…³äºGitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒå¯ä»¥å‚çœ‹æˆ‘ä¹‹å‰å‘å¸ƒçš„æ–‡ç« <a href="https://shenxianpeng.github.io/2020/09/commit-messages-specification/">ã€Šç¨‹åºå‘˜è‡ªæˆ‘ä¿®å…»ä¹‹Gitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒã€‹</a>ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h2 id="Commit-Check-ç®€ä»‹"><a href="#Commit-Check-ç®€ä»‹" class="headerlink" title="Commit Check ç®€ä»‹"></a>Commit Check ç®€ä»‹</h2><p>Commit Check æ˜¯ä¸€ä¸ªå¯ä»¥æ£€æŸ¥ Git æäº¤ä¿¡æ¯ï¼Œåˆ†æ”¯å‘½åã€æäº¤è€…ç”¨æˆ·åã€æäº¤è€…é‚®ç®±ç­‰ç­‰ã€‚å®ƒæ˜¯ <a href="https://docs.mohami.io/yet-another-commit-checker-yacc/">Yet Another Commit Checker</a> çš„å¼€æºå¹³æ›¿ç‰ˆã€‚</p><h2 id="Commit-Check-çš„é…ç½®"><a href="#Commit-Check-çš„é…ç½®" class="headerlink" title="Commit Check çš„é…ç½®"></a>Commit Check çš„é…ç½®</h2><h3 id="ä½¿ç”¨é»˜è®¤è®¾ç½®"><a href="#ä½¿ç”¨é»˜è®¤è®¾ç½®" class="headerlink" title="ä½¿ç”¨é»˜è®¤è®¾ç½®"></a>ä½¿ç”¨é»˜è®¤è®¾ç½®</h3><p>å¦‚æœæ²¡æœ‰è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ï¼ŒCommit Check ä¼šä½¿ç”¨é»˜è®¤è®¾ç½®ã€‚å…·ä½“è®¾ç½®<a href="https://github.com/commit-check/commit-check/blob/main/commit_check/__init__.py">åœ¨æ­¤</a></p><p>é»˜è®¤è®¾ç½®ä¸­ï¼Œæäº¤ä¿¡æ¯éµå¾ª<a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/">çº¦å®šå¼æäº¤</a>ï¼Œåˆ†æ”¯å‘½åè§<a href="https://support.atlassian.com/bitbucket-cloud/docs/configure-a-projects-branching-model/">åˆ†æ”¯æ¨¡å‹è¯¦ç»†ä¿¡æ¯</a></p><h3 id="ä½¿ç”¨è‡ªå®šä¹‰é…ç½®"><a href="#ä½¿ç”¨è‡ªå®šä¹‰é…ç½®" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰é…ç½®"></a>ä½¿ç”¨è‡ªå®šä¹‰é…ç½®</h3><p>ä½ å¯ä»¥åœ¨ä½ çš„ Git ä»“åº“ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>.commit-check.yml</code> æ¥è‡ªå®šä¹‰è®¾ç½®ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">checks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">check:</span> <span class="string">message</span></span><br><span class="line">    <span class="attr">regex:</span> <span class="string">&#x27;^(build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test)&#123;1&#125;(\([\w\-\.]+\))?(!)?: ([\w ])+([\s\S]*)|(Merge).*|(fixup!.*)&#x27;</span></span><br><span class="line">    <span class="attr">error:</span> <span class="string">&quot;The commit message should be structured as follows:\n\n</span></span><br><span class="line"><span class="string">    &lt;type&gt;[optional scope]: &lt;description&gt;\n</span></span><br><span class="line"><span class="string">    [optional body]\n</span></span><br><span class="line"><span class="string">    [optional footer(s)]\n\n</span></span><br><span class="line"><span class="string">    More details please refer to https://www.conventionalcommits.org&quot;</span></span><br><span class="line">    <span class="attr">suggest:</span> <span class="string">please</span> <span class="string">check</span> <span class="string">your</span> <span class="string">commit</span> <span class="string">message</span> <span class="string">whether</span> <span class="string">matches</span> <span class="string">above</span> <span class="string">regex</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">check:</span> <span class="string">branch</span></span><br><span class="line">    <span class="attr">regex:</span> <span class="string">^(bugfix|feature|release|hotfix|task)\/.+|(master)|(main)|(HEAD)|(PR-.+)</span></span><br><span class="line">    <span class="attr">error:</span> <span class="string">&quot;Branches must begin with these types: bugfix/ feature/ release/ hotfix/ task/&quot;</span></span><br><span class="line">    <span class="attr">suggest:</span> <span class="string">run</span> <span class="string">command</span> <span class="string">`git</span> <span class="string">checkout</span> <span class="string">-b</span> <span class="string">type/branch_name`</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">check:</span> <span class="string">author_name</span></span><br><span class="line">    <span class="attr">regex:</span> <span class="string">^[A-Za-z</span> <span class="string">,.\&#x27;-]+$|.*(\[bot])</span></span><br><span class="line">    <span class="attr">error:</span> <span class="string">The</span> <span class="string">committer</span> <span class="string">name</span> <span class="string">seems</span> <span class="string">invalid</span></span><br><span class="line">    <span class="attr">suggest:</span> <span class="string">run</span> <span class="string">command</span> <span class="string">`git</span> <span class="string">config</span> <span class="string">user.name</span> <span class="string">&quot;Your Name&quot;</span><span class="string">`</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">check:</span> <span class="string">author_email</span></span><br><span class="line">    <span class="attr">regex:</span> <span class="string">^\S+@\S+\.\S+$</span></span><br><span class="line">    <span class="attr">error:</span> <span class="string">The</span> <span class="string">committer</span> <span class="string">email</span> <span class="string">seems</span> <span class="string">invalid</span></span><br><span class="line">    <span class="attr">suggest:</span> <span class="string">run</span> <span class="string">command</span> <span class="string">`git</span> <span class="string">config</span> <span class="string">user.email</span> <span class="string">yourname@example.com`</span></span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥ä¿®æ”¹ <code>regex</code>, <code>error</code>, <code>suggest</code> çš„å€¼ã€‚</p><h2 id="Commit-Check-ä½¿ç”¨"><a href="#Commit-Check-ä½¿ç”¨" class="headerlink" title="Commit Check ä½¿ç”¨"></a>Commit Check ä½¿ç”¨</h2><p>Commit Check æ”¯æŒå¤šç§ä½¿ç”¨æ–¹å¼</p><h3 id="ä»¥-GitHub-Action-æ¥è¿è¡Œ"><a href="#ä»¥-GitHub-Action-æ¥è¿è¡Œ" class="headerlink" title="ä»¥ GitHub Action æ¥è¿è¡Œ"></a>ä»¥ GitHub Action æ¥è¿è¡Œ</h3><p>ä¾‹å¦‚åˆ›å»ºä¸€ä¸ª GitHub Action workflow æ–‡ä»¶ <code>.github/workflows/commit-check.yml</code></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Commit</span> <span class="string">Check</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> <span class="string">&#x27;main&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">commit-check:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">commit-check/commit-check-action@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">message:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">author-name:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">author-email:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">dry-run:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">job-summary:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>è¯¦ç»†è¯·å‚è€ƒ <a href="https://github.com/commit-check/commit-check-action">https://github.com/commit-check/commit-check-action</a></p><h3 id="ä»¥-pre-commit-hook-è¿è¡Œ"><a href="#ä»¥-pre-commit-hook-è¿è¡Œ" class="headerlink" title="ä»¥ pre-commit hook è¿è¡Œ"></a>ä»¥ pre-commit hook è¿è¡Œ</h3><p>é¦–é€‰éœ€è¦å®‰è£…äº† <a href="https://pre-commit.com/#install">pre-commit</a></p><p>ç„¶åå°†å¦‚ä¸‹è®¾ç½®æ·»åŠ åˆ°ä½ çš„ <code>.pre-commit-config.yaml</code> æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span>   <span class="attr">repo:</span> <span class="string">https://github.com/commit-check/commit-check</span></span><br><span class="line">    <span class="attr">rev:</span> <span class="string">the</span> <span class="string">tag</span> <span class="string">or</span> <span class="string">revision</span></span><br><span class="line">    <span class="attr">hooks:</span> <span class="comment"># support hooks</span></span><br><span class="line">    <span class="bullet">-</span>   <span class="attr">id:</span> <span class="string">check-message</span></span><br><span class="line">    <span class="bullet">-</span>   <span class="attr">id:</span> <span class="string">check-branch</span></span><br><span class="line">    <span class="bullet">-</span>   <span class="attr">id:</span> <span class="string">check-author-name</span></span><br><span class="line">    <span class="bullet">-</span>   <span class="attr">id:</span> <span class="string">check-author-email</span></span><br></pre></td></tr></table></figure><h3 id="ä»¥å‘½ä»¤è¡Œæ¥è¿è¡Œ"><a href="#ä»¥å‘½ä»¤è¡Œæ¥è¿è¡Œ" class="headerlink" title="ä»¥å‘½ä»¤è¡Œæ¥è¿è¡Œ"></a>ä»¥å‘½ä»¤è¡Œæ¥è¿è¡Œ</h3><p>å¯ä»¥é€šè¿‡ pip å…ˆå®‰è£…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install commit-check</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œ <code>commit-check --help</code> å‘½ä»¤å°±å¯ä»¥æŸ¥çœ‹å¦‚ä½•ä½¿ç”¨äº†ï¼Œå…·ä½“å¯ä»¥å‚è§<a href="https://commit-check.github.io/commit-check/cli_args.html">æ–‡æ¡£</a></p><h3 id="ä»¥-Git-Hooks-æ¥è¿è¡Œ"><a href="#ä»¥-Git-Hooks-æ¥è¿è¡Œ" class="headerlink" title="ä»¥ Git Hooks æ¥è¿è¡Œ"></a>ä»¥ Git Hooks æ¥è¿è¡Œ</h3><p>è¦é…ç½® Git Hooks ï¼Œä½ éœ€è¦åœ¨ Git å­˜å‚¨åº“çš„ <code>.git/hooks/</code> ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„è„šæœ¬æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ <code>.git/hooks/pre-push</code>ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">commit-check --message --branch --author-name --author-email</span><br></pre></td></tr></table></figure><p>å¹¶ä¿®æ”¹ä¸ºå¯æ‰§è¡Œæƒé™ <code>chmod +x .git/hooks/pre-push</code>ï¼Œç„¶åå½“ä½ è¿è¡Œ <code>git push</code> å‘½ä»¤æ—¶ï¼Œè¿™ä¸ª push hook ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p><h2 id="Commit-Check-æ‰§è¡Œå¤±è´¥ç¤ºä¾‹"><a href="#Commit-Check-æ‰§è¡Œå¤±è´¥ç¤ºä¾‹" class="headerlink" title="Commit Check æ‰§è¡Œå¤±è´¥ç¤ºä¾‹"></a>Commit Check æ‰§è¡Œå¤±è´¥ç¤ºä¾‹</h2><p>æ£€æŸ¥æäº¤ä¿¡æ¯å¤±è´¥</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Commit rejected by Commit-Check.</span><br><span class="line"></span><br><span class="line">  (c).-.(c)    (c).-.(c)    (c).-.(c)    (c).-.(c)    (c).-.(c)</span><br><span class="line">   / ._. \      / ._. \      / ._. \      / ._. \      / ._. \</span><br><span class="line"> __\( C )/__  __\( H )/__  __\( E )/__  __\( C )/__  __\( K )/__</span><br><span class="line">(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)</span><br><span class="line">   || E ||      || R ||      || R ||      || O ||      || R ||</span><br><span class="line"> _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._</span><br><span class="line">(.-./`-Â´\.-.)(.-./`-Â´\.-.)(.-./`-Â´\.-.)(.-./`-Â´\.-.)(.-./`-Â´\.-.)</span><br><span class="line"> `-Â´     `-Â´  `-Â´     `-Â´  `-Â´     `-Â´  `-Â´     `-Â´  `-Â´     `-Â´</span><br><span class="line"></span><br><span class="line">Invalid commit message =&gt; <span class="built_in">test</span></span><br><span class="line">It doesn<span class="string">&#x27;t match regex: ^(build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test)&#123;1&#125;(\([\w\-\.]+\))?(!)?: ([\w ])+([\s\S]*)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The commit message should be structured as follows:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;type&gt;[optional scope]: &lt;description&gt;</span></span><br><span class="line"><span class="string">[optional body]</span></span><br><span class="line"><span class="string">[optional footer(s)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">More details please refer to https://www.conventionalcommits.org</span></span><br><span class="line"><span class="string">Suggest: please check your commit message whether matches above regex</span></span><br></pre></td></tr></table></figure><p>æ£€æŸ¥åˆ†æ”¯å‘½åå¤±è´¥</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Commit rejected by Commit-Check.</span><br><span class="line"></span><br><span class="line">  (c).-.(c)    (c).-.(c)    (c).-.(c)    (c).-.(c)    (c).-.(c)</span><br><span class="line">   / ._. \      / ._. \      / ._. \      / ._. \      / ._. \</span><br><span class="line"> __\( C )/__  __\( H )/__  __\( E )/__  __\( C )/__  __\( K )/__</span><br><span class="line">(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)(_.-/<span class="string">&#x27;-&#x27;</span>\-._)</span><br><span class="line">   || E ||      || R ||      || R ||      || O ||      || R ||</span><br><span class="line"> _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._  _.<span class="string">&#x27; &#x27;</span>-<span class="string">&#x27; &#x27;</span>._</span><br><span class="line">(.-./`-Â´\.-.)(.-./`-Â´\.-.)(.-./`-Â´\.-.)(.-./`-Â´\.-.)(.-./`-Â´\.-.)</span><br><span class="line"> `-Â´     `-Â´  `-Â´     `-Â´  `-Â´     `-Â´  `-Â´     `-Â´  `-Â´     `-Â´</span><br><span class="line"></span><br><span class="line">Commit rejected.</span><br><span class="line"></span><br><span class="line">Invalid branch name =&gt; <span class="built_in">test</span></span><br><span class="line">It doesn<span class="string">&#x27;t match regex: ^(bugfix|feature|release|hotfix|task)\/.+|(master)|(main)|(HEAD)|(PR-.+)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Branches must begin with these types: bugfix/ feature/ release/ hotfix/ task/</span></span><br><span class="line"><span class="string">Suggest: run command `git checkout -b type/branch_name`</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ Commit Check çš„ä½¿ç”¨ä»‹ç»äº†ï¼Œæ›´å¤šæ–°ä¿¡æ¯è¯·å‚è€ƒ <a href="https://github.com/commit-check/commit-check">https://github.com/commit-check/commit-check</a></p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Branch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins agent service can not start automatically on Windows</title>
      <link href="/2023/04/jenkins-troubleshooting/"/>
      <url>/2023/04/jenkins-troubleshooting/</url>
      
        <content type="html"><![CDATA[<h2 id="Whatâ€™s-the-issue"><a href="#Whatâ€™s-the-issue" class="headerlink" title="Whatâ€™s the issue"></a>Whatâ€™s the issue</h2><p>My Windows build machine is regular reboot after Windows updates, but my Jenkins agent service on this Windows can not<br>start automatically even I have set the startup type to Automatic.</p><p><img src="/2023/04/jenkins-troubleshooting/service-general.png" alt="Windows Service Config 2"></p><h2 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution 1"></a>Solution 1</h2><p>After some research, select â€œAllow service to interact with desktopâ€ with service properties on Log On tab can fix this problem.</p><p>In service properties -&gt; Log On -&gt; Select â€œLocal System accountâ€ and select the checkbox for â€œAllow service to interact with desktopâ€. </p><p><img src="/2023/04/jenkins-troubleshooting/service-log-on.png" alt="Windows Service Config 2"></p><h2 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution 2"></a>Solution 2</h2><span id="more"></span><p>If above solution still does not work, you can write a restart jenkins agent service batch script and put it to Startup folder.</p><p>Here is a example: <a href="https://github.com/shenxianpeng/win-jenkins-agent#setup-autostart-jenkins-agent-service-after-windows-reboot">Setup autostart Jenkins agent service after Windows reboot</a></p><h2 id="Semi-automatic-setup-Jenkins-Agent-on-Windows"><a href="#Semi-automatic-setup-Jenkins-Agent-on-Windows" class="headerlink" title="Semi-automatic setup Jenkins Agent on Windows"></a>Semi-automatic setup Jenkins Agent on Windows</h2><p>The above mentioned project <a href="https://github.com/shenxianpeng/win-jenkins-agent">win-jenkins-agent</a> not only supports auto start Jenkins agent server after Windows reboot, but also supports semi-automatic setup Jenkins agent on Windows.</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pipeline </tag>
            
            <tag> Troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLSA æ¡†æ¶ä¸è½¯ä»¶ä¾›åº”é“¾å®‰å…¨é˜²æŠ¤</title>
      <link href="/2023/03/slsa/"/>
      <url>/2023/03/slsa/</url>
      
        <content type="html"><![CDATA[<p>éšç€è¿‘äº›å¹´é’ˆå¯¹è½¯ä»¶ä¾›åº”é“¾å‘èµ·çš„æ”»å‡»æ¬¡æ•°è¶Šæ¥è¶Šå¤šï¼ŒGoogle å‘å¸ƒäº†ä¸€ç³»åˆ—æŒ‡å—æ¥ç¡®ä¿è½¯ä»¶åŒ…çš„å®Œæ•´æ€§ï¼Œç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢æœªç»æˆæƒçš„ä»£ç ä¿®æ”¹å½±å“è½¯ä»¶ä¾›åº”é“¾ã€‚</p><p>Google çš„ SLSA æ¡†æ¶ï¼ˆSupply-chain Levels for Software Artifacts è½¯ä»¶åˆ¶å“çš„ä¾›åº”é“¾çº§åˆ«ï¼‰æ˜¯é€šè¿‡è¯†åˆ« CI&#x2F;CD æµæ°´çº¿ä¸­çš„é—®é¢˜å¹¶å‡å°å½±å“ï¼Œä¸ºå®ç°æ›´å®‰å…¨çš„è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²æµç¨‹æä¾›å»ºè®®ã€‚</p><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFSLSA">ä»€ä¹ˆæ˜¯SLSA</a></li><li><a href="#%E8%BD%AF%E4%BB%B6%E4%BE%9B%E5%BA%94%E9%93%BE%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98">è½¯ä»¶ä¾›åº”é“¾ä¸­çš„é—®é¢˜</a><br>2.1 <a href="#%E4%BE%9B%E5%BA%94%E9%93%BE%E6%94%BB%E5%87%BB%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B">ä¾›åº”é“¾æ”»å‡»åŒ…æ‹¬å“ªäº›</a><br>2.2 <a href="#%E7%9C%9F%E5%AE%9E%E4%B8%96%E7%95%8C%E7%9A%84%E4%BE%8B%E5%AD%90">çœŸå®ä¸–ç•Œçš„ä¾‹å­</a></li><li><a href="#SLSA%E7%AD%89%E7%BA%A7">SLSAç­‰çº§</a><br>3.1 <a href="#%E8%AF%A6%E7%BB%86%E8%A7%A3%E9%87%8A">è¯¦ç»†è§£é‡Š</a><br>3.2 <a href="#%E9%99%90%E5%88%B6">é™åˆ¶</a></li><li><a href="#SLSA%E8%90%BD%E5%9C%B0">SLSAè½åœ°</a></li><li><a href="#%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7">å…¶ä»–å·¥å…·</a></li></ol><h2 id="ä»€ä¹ˆæ˜¯SLSA"><a href="#ä»€ä¹ˆæ˜¯SLSA" class="headerlink" title="ä»€ä¹ˆæ˜¯SLSA"></a>ä»€ä¹ˆæ˜¯SLSA</h2><p><a href="https://slsa.dev/">SLSA</a> å…¨åæ˜¯ Supply chain Levels for Software Artifacts, or SLSA (å‘éŸ³â€œsalsaâ€).</p><p>SLSA æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯æ¡†æ¶ï¼Œä¸€ä¸ªæ ‡å‡†å’Œæ§åˆ¶çš„æ¸…å•ç¡®ä¿è½¯ä»¶æ„å»ºå’Œéƒ¨ç½²è¿‡ç¨‹çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢ç¯¡æ”¹æºä»£ç ã€æ„å»ºå¹³å°ä»¥åŠæ„ä»¶ä»“åº“è€Œäº§ç”Ÿçš„å¨èƒã€‚</p><h2 id="è½¯ä»¶ä¾›åº”é“¾ä¸­çš„é—®é¢˜"><a href="#è½¯ä»¶ä¾›åº”é“¾ä¸­çš„é—®é¢˜" class="headerlink" title="è½¯ä»¶ä¾›åº”é“¾ä¸­çš„é—®é¢˜"></a>è½¯ä»¶ä¾›åº”é“¾ä¸­çš„é—®é¢˜</h2><p>ä»»ä½•è½¯ä»¶ä¾›åº”é“¾éƒ½å¯èƒ½å¼•å…¥æ¼æ´ï¼Œéšç€ç³»ç»Ÿå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œåšå¥½æœ€ä½³å®è·µä»è€Œä¿è¯äº¤ä»˜å·¥ä»¶çš„å®Œæ•´æ€§å˜å¾—éå¸¸é‡è¦ã€‚å¦‚æœæ²¡æœ‰ä¸€å®šçš„è§„èŒƒå’Œç³»ç»Ÿå‘å±•è®¡åˆ’ï¼Œå°±å¾ˆéš¾åº”å¯¹ä¸‹ä¸€æ¬¡é»‘å®¢æ”»å‡»ã€‚</p><h3 id="ä¾›åº”é“¾æ”»å‡»åŒ…æ‹¬å“ªäº›"><a href="#ä¾›åº”é“¾æ”»å‡»åŒ…æ‹¬å“ªäº›" class="headerlink" title="ä¾›åº”é“¾æ”»å‡»åŒ…æ‹¬å“ªäº›"></a>ä¾›åº”é“¾æ”»å‡»åŒ…æ‹¬å“ªäº›</h3><p><img src="/2023/03/slsa/supply-chain-threats.png" alt="Supply Chain Threats"></p><p>A æäº¤æœªç»è®¤è¯çš„ä¿®æ”¹<br>B æ³„éœ²æºç ä»“åº“<br>C ä»è¢«ä¿®æ”¹æºä»£ç æ„å»º<br>D æ³„éœ²æ„å»ºè¿‡ç¨‹<br>E ä½¿ç”¨å·²æ³„éœ²çš„ä¾èµ–<br>F ä¸Šä¼ è¢«ä¿®æ”¹çš„åŒ…<br>G æ³„éœ²äº†åŒ…ä»“åº“<br>H ä½¿ç”¨å·²æ³„éœ²çš„åŒ…</p><h3 id="çœŸå®ä¸–ç•Œçš„ä¾‹å­"><a href="#çœŸå®ä¸–ç•Œçš„ä¾‹å­" class="headerlink" title="çœŸå®ä¸–ç•Œçš„ä¾‹å­"></a>çœŸå®ä¸–ç•Œçš„ä¾‹å­</h3><table><thead><tr><th>å®Œæ•´æ€§å¨èƒ</th><th>å·²çŸ¥ä¾‹å­</th><th>SLSA å¦‚ä½•æä¾›å¸®åŠ©</th></tr></thead><tbody><tr><td>A æäº¤æœªç»è®¤è¯çš„ä¿®æ”¹</td><td><a href="https://lore.kernel.org/lkml/202105051005.49BFABCE@keescook/">ç ”ç©¶äººå‘˜</a>è¯•å›¾é€šè¿‡é‚®ä»¶åˆ—è¡¨ä¸Šçš„<br>è¡¥ä¸ç¨‹åºæ•…æ„å°†æ¼æ´å¼•å…¥ Linux å†…æ ¸ã€‚</td><td>ä¸¤äººå®¡æŸ¥å‘ç°äº†å¤§éƒ¨åˆ†ï¼ˆä½†ä¸æ˜¯å…¨éƒ¨ï¼‰æ¼æ´ã€‚</td></tr><tr><td>B æ³„éœ²æºç ä»“åº“</td><td><a href="https://news-web.php.net/php.internals/113838">PHP</a>ï¼šæ”»å‡»è€…ç ´åäº† PHP çš„è‡ªæ‰˜ç®¡<br> git æœåŠ¡å™¨å¹¶æ³¨å…¥äº†ä¸¤ä¸ªæ¶æ„æäº¤ã€‚</td><td>ä¸€ä¸ªå—åˆ°æ›´å¥½ä¿æŠ¤çš„æºä»£ç å¹³å°<br>å°†æˆä¸ºæ”»å‡»è€…æ›´éš¾æ”»å‡»çš„ç›®æ ‡ã€‚</td></tr><tr><td>C ä»è¢«ä¿®æ”¹æºä»£ç æ„å»º</td><td><a href="https://www.webmin.com/exploit.html">Webmin</a>ï¼šæ”»å‡»è€…ä¿®æ”¹äº†æ„å»ºåŸºç¡€è®¾æ–½<br>ä»¥ä½¿ç”¨ä¸æºä»£ç æ§åˆ¶ä¸åŒ¹é…çš„æºæ–‡ä»¶ã€‚</td><td>ç¬¦åˆ SLSA æ ‡å‡†çš„æ„å»ºæœåŠ¡å™¨ä¼šç”Ÿæˆå‡ºå¤„ï¼Œ<br>ä»¥è¯†åˆ«å®é™…ä½¿ç”¨çš„æ¥æºï¼Œä»è€Œä½¿æ¶ˆè´¹è€…èƒ½å¤Ÿæ£€æµ‹åˆ°æ­¤ç±»ç¯¡æ”¹ã€‚</td></tr><tr><td>D æ³„éœ²æ„å»ºè¿‡ç¨‹</td><td><a href="https://www.crowdstrike.com/blog/sunspot-malware-technical-analysis/">SolarWinds</a>ï¼šæ”»å‡»è€…ç ´åäº†æ„å»ºå¹³å°<br>å¹¶å®‰è£…äº†åœ¨æ¯æ¬¡æ„å»ºæœŸé—´æ³¨å…¥æ¶æ„è¡Œä¸ºçš„æ¤å…¥ç¨‹åºã€‚</td><td>æ›´é«˜çš„ SLSA çº§åˆ«éœ€è¦å¯¹æ„å»ºå¹³å°è¿›è¡Œæ›´å¼ºå¤§çš„å®‰å…¨æ§åˆ¶ï¼Œ<br>è¿™ä½¿å¾—å¦¥åå’Œè·å¾—æŒä¹…æ€§å˜å¾—æ›´åŠ å›°éš¾ã€‚</td></tr><tr><td>E ä½¿ç”¨å·²æ³„éœ²çš„ä¾èµ–</td><td><a href="https://web.archive.org/web/20210909051737/https://schneider.dev/blog/event-stream-vulnerability-explained/">event-stream</a>ï¼šæ”»å‡»è€…æ·»åŠ äº†ä¸€ä¸ªæ— å®³çš„ä¾èµ–é¡¹ï¼Œç„¶åæ›´æ–°äº†è¯¥ä¾èµ–é¡¹<br>ä»¥æ·»åŠ æ¶æ„è¡Œä¸ºã€‚æ›´æ–°ä¸æäº¤åˆ° GitHub çš„ä»£ç ä¸åŒ¹é…ï¼ˆå³æ”»å‡» Fï¼‰ã€‚</td><td>é€’å½’åœ°å°† SLSA åº”ç”¨äºæ‰€æœ‰ä¾èµ–é¡¹ä¼šé˜»æ­¢è¿™ä¸ªç‰¹å®šçš„å‘é‡ï¼Œå› ä¸º<br>å‡ºå¤„ä¼šè¡¨æ˜å®ƒä¸æ˜¯ç”±é€‚å½“çš„æ„å»ºå™¨æ„å»ºçš„ï¼Œæˆ–è€…æºä¸æ˜¯æ¥è‡ª GitHubã€‚</td></tr><tr><td>F ä¸Šä¼ è¢«ä¿®æ”¹çš„åŒ…</td><td><a href="https://about.codecov.io/apr-2021-post-mortem/">CodeCov</a>ï¼šæ”»å‡»è€…ä½¿ç”¨æ³„éœ²çš„å‡­æ®å°†æ¶æ„å·¥ä»¶ä¸Šä¼ åˆ°<br> Google Cloud Storage(GCS)ï¼Œç”¨æˆ·å¯ä»¥ä»ä¸­ç›´æ¥ä¸‹è½½ã€‚</td><td>GCS ä¸­å·¥ä»¶çš„å‡ºå¤„è¡¨æ˜å·¥ä»¶ä¸æ˜¯ä»¥<br>é¢„æœŸçš„æ–¹å¼ä»é¢„æœŸçš„æºä»£ç åº“ä¸­æ„å»ºçš„ã€‚</td></tr><tr><td>G æ³„éœ²äº†åŒ…ä»“åº“</td><td><a href="https://theupdateframework.io/papers/attacks-on-package-managers-ccs2008.pdf">å¯¹åŒ…é•œåƒçš„æ”»å‡»</a>ï¼šç ”ç©¶äººå‘˜ä¸ºå‡ ä¸ªæµè¡Œçš„<br>åŒ…å­˜å‚¨åº“è¿è¡Œé•œåƒï¼Œè¿™äº›é•œåƒå¯èƒ½è¢«ç”¨æ¥æä¾›æ¶æ„åŒ…ã€‚</td><td>ä¸ä¸Šé¢çš„ (F) ç±»ä¼¼ï¼Œæ¶æ„å·¥ä»¶çš„æ¥æºè¡¨æ˜å®ƒä»¬ä¸æ˜¯<br>æŒ‰é¢„æœŸæ„å»ºçš„ï¼Œä¹Ÿä¸æ˜¯æ¥è‡ªé¢„æœŸçš„æºä»£ç åº“ã€‚</td></tr><tr><td>H ä½¿ç”¨å·²æ³„éœ²çš„åŒ…</td><td><a href="https://blog.sonatype.com/damaging-linux-mac-malware-bundled-within-browserify-npm-brandjack-attempt">Browserify typosquatting</a>ï¼šæ”»å‡»è€…<br>ä¸Šä¼ äº†ä¸€ä¸ªä¸åŸå§‹åç§°ç›¸ä¼¼çš„æ¶æ„åŒ…ã€‚</td><td>SLSA ä¸ç›´æ¥è§£å†³è¿™ç§å¨èƒï¼Œä½†å°†å‡ºå¤„é“¾æ¥å›æºä»£ç æ§åˆ¶<br>å¯ä»¥å¯ç”¨å’Œå¢å¼ºå…¶ä»–è§£å†³æ–¹æ¡ˆã€‚</td></tr></tbody></table><h2 id="SLSAç­‰çº§"><a href="#SLSAç­‰çº§" class="headerlink" title="SLSAç­‰çº§"></a>SLSAç­‰çº§</h2><span id="more"></span><table><thead><tr><th>ç­‰çº§</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>1</td><td>æ„å»ºè¿‡ç¨‹çš„æ–‡æ¡£</td><td>æ— ç½²åçš„å‡ºå¤„</td></tr><tr><td>2</td><td>æ„å»ºæœåŠ¡çš„é˜²ç¯¡æ”¹</td><td>æ‰˜ç®¡æº&#x2F;æ„å»ºï¼Œç½²åå‡ºå¤„</td></tr><tr><td>3</td><td>å¯¹ç‰¹å®šå¨èƒçš„é¢å¤–æŠµæŠ—åŠ›</td><td>å¯¹ä¸»æœºçš„å®‰å…¨æ§åˆ¶ï¼Œä¸å¯ä¼ªé€ çš„æ¥æº</td></tr><tr><td>4</td><td>æœ€é«˜çº§åˆ«çš„ä¿¡å¿ƒå’Œä¿¡ä»»</td><td>ä¸¤æ–¹å®¡æŸ¥+å¯†å°æ„å»º</td></tr></tbody></table><h3 id="è¯¦ç»†è§£é‡Š"><a href="#è¯¦ç»†è§£é‡Š" class="headerlink" title="è¯¦ç»†è§£é‡Š"></a>è¯¦ç»†è§£é‡Š</h3><table><thead><tr><th>ç­‰çº§</th><th>è¦æ±‚</th></tr></thead><tbody><tr><td>0</td><td>æ²¡æœ‰ä¿è¯ã€‚ SLSA 0 è¡¨ç¤ºç¼ºå°‘ä»»ä½• SLSA çº§åˆ«ã€‚</td></tr><tr><td>1</td><td><strong>æ„å»ºè¿‡ç¨‹å¿…é¡»å®Œå…¨è„šæœ¬åŒ–&#x2F;è‡ªåŠ¨åŒ–å¹¶ç”Ÿæˆå‡ºå¤„ã€‚</strong> <br>å‡ºå¤„æ˜¯å…³äºå·¥ä»¶æ„å»ºæ–¹å¼çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬æ„å»ºè¿‡ç¨‹ã€é¡¶çº§æºå’Œä¾èµ–é¡¹ã€‚<br>äº†è§£å‡ºå¤„å…è®¸è½¯ä»¶æ¶ˆè´¹è€…åšå‡ºåŸºäºé£é™©çš„å®‰å…¨å†³ç­–ã€‚<br>SLSA 1 çš„ Provenance ä¸èƒ½é˜²æ­¢ç¯¡æ”¹ï¼Œä½†å®ƒæä¾›äº†åŸºæœ¬çº§åˆ«çš„ä»£ç æºè¯†åˆ«å¹¶æœ‰åŠ©äºæ¼æ´ç®¡ç†ã€‚</td></tr><tr><td>2</td><td><strong>éœ€è¦ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å’Œç”Ÿæˆç»è¿‡èº«ä»½éªŒè¯çš„æ¥æºçš„æ‰˜ç®¡æ„å»ºæœåŠ¡ã€‚</strong> <br>è¿™äº›é™„åŠ è¦æ±‚ä½¿è½¯ä»¶æ¶ˆè´¹è€…å¯¹è½¯ä»¶çš„æ¥æºæ›´æœ‰ä¿¡å¿ƒã€‚<br>åœ¨æ­¤çº§åˆ«ï¼Œå‡ºå¤„å¯é˜²æ­¢ç¯¡æ”¹åˆ°æ„å»ºæœåŠ¡å—ä¿¡ä»»çš„ç¨‹åº¦ã€‚<br>SLSA 2 è¿˜æä¾›äº†ä¸€ä¸ªè½»æ¾å‡çº§åˆ° SLSA 3 çš„é€”å¾„ã€‚</td></tr><tr><td>3</td><td><strong>æºå’Œæ„å»ºå¹³å°ç¬¦åˆç‰¹å®šæ ‡å‡†ï¼Œä»¥åˆ†åˆ«ä¿è¯æºçš„å¯å®¡è®¡æ€§å’Œå‡ºå¤„çš„å®Œæ•´æ€§ã€‚</strong> <br>æˆ‘ä»¬è®¾æƒ³äº†ä¸€ä¸ªè®¤è¯æµç¨‹ï¼Œå®¡è®¡å‘˜å¯ä»¥é€šè¿‡è¯¥æµç¨‹è¯æ˜å¹³å°ç¬¦åˆè¦æ±‚ï¼Œç„¶åæ¶ˆè´¹è€…å°±å¯ä»¥ä¿¡èµ–äº†ã€‚ <br>SLSA 3 é€šè¿‡é˜²æ­¢ç‰¹å®šç±»åˆ«çš„å¨èƒï¼ˆä¾‹å¦‚äº¤å‰æ„å»ºæ±¡æŸ“ï¼‰ï¼Œæä¾›æ¯”æ—©æœŸçº§åˆ«æ›´å¼ºçš„é˜²ç¯¡æ”¹ä¿æŠ¤ã€‚</td></tr><tr><td>4</td><td><strong>éœ€è¦ä¸¤äººå®¡æŸ¥æ‰€æœ‰æ›´æ”¹å’Œå¯†å°ã€å¯é‡ç°çš„æ„å»ºè¿‡ç¨‹ã€‚</strong> <br>ä¸¤äººå®¡æŸ¥æ˜¯å‘ç°é”™è¯¯å’Œé˜»æ­¢ä¸è‰¯è¡Œä¸ºçš„è¡Œä¸šæœ€ä½³å®è·µã€‚ <br>å¯†å°æ„å»ºä¿è¯æ¥æºçš„ä¾èµ–é¡¹åˆ—è¡¨æ˜¯å®Œæ•´çš„ã€‚ <br>å¯é‡ç°çš„æ„å»ºè™½ç„¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„ï¼Œä½†æä¾›äº†è®¸å¤šå¯å®¡è®¡æ€§å’Œå¯é æ€§çš„å¥½å¤„ã€‚ <br>æ€»çš„æ¥è¯´ï¼ŒSLSA 4 è®©æ¶ˆè´¹è€…å¯¹è½¯ä»¶æœªè¢«ç¯¡æ”¹å…·æœ‰é«˜åº¦çš„ä¿¡å¿ƒã€‚</td></tr></tbody></table><h3 id="é™åˆ¶"><a href="#é™åˆ¶" class="headerlink" title="é™åˆ¶"></a>é™åˆ¶</h3><p>SLSA å¯ä»¥å¸®åŠ©å‡å°‘è½¯ä»¶å·¥ä»¶ä¸­çš„ä¾›åº”é“¾å¨èƒï¼Œä½†ä¹Ÿæœ‰å±€é™æ€§ã€‚</p><ul><li>è®¸å¤šå·¥ä»¶åœ¨ä¾›åº”é“¾ä¸­å­˜åœ¨å¤§é‡ä¾èµ–å…³ç³»ï¼Œå®Œæ•´çš„ä¾èµ–å…³ç³»å›¾å¯èƒ½éå¸¸å¤§ã€‚</li><li>å®é™…ä¸Šä»äº‹å®‰å…¨å·¥ä½œçš„å›¢é˜Ÿéœ€è¦ç¡®å®šå¹¶å…³æ³¨ä¾›åº”é“¾ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼Œä½†å·¥ä½œé‡å¯èƒ½å¾ˆå¤§ã€‚</li><li>å·¥ä»¶çš„ SLSA çº§åˆ«ä¸å¯ä¼ é€’å¹¶ä¸”ä¾èµ–é¡¹æœ‰è‡ªå·±çš„ SLSA è¯„çº§ï¼Œè¿™æ„å‘³ç€å¯ä»¥ä» SLSA 0 ä¾èµ–é¡¹æ„å»º SLSA 4 å·¥ä»¶ã€‚å› æ­¤ï¼Œè™½ç„¶ä¸»è¦çš„å·¥ä»¶å…·æœ‰å¾ˆå¼ºçš„å®‰å…¨æ€§ï¼Œä½†å…¶ä»–åœ°æ–¹å¯èƒ½ä»ç„¶å­˜åœ¨é£é™©ã€‚è¿™äº›é£é™©çš„æ€»å’Œå°†å¸®åŠ©è½¯ä»¶æ¶ˆè´¹è€…äº†è§£å¦‚ä½•ä»¥åŠåœ¨ä½•å¤„ä½¿ç”¨ SLSA 4 å·¥ä»¶ã€‚</li><li>è™½ç„¶è¿™äº›ä»»åŠ¡çš„è‡ªåŠ¨åŒ–ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œä½†å¯¹äºæ¯ä¸ªè½¯ä»¶æ¶ˆè´¹è€…æ¥è¯´ï¼Œå…¨é¢å®¡æŸ¥æ¯ä¸ªå·¥ä»¶çš„æ•´ä¸ªå›¾è¡¨å¹¶ä¸åˆ‡å®é™…ã€‚ä¸ºäº†ç¼©å°è¿™ä¸€å·®è·ï¼Œå®¡è®¡å‘˜å’Œè®¤è¯æœºæ„å¯ä»¥éªŒè¯å¹¶æ–­è¨€æŸäº›ä¸œè¥¿ç¬¦åˆ SLSA è¦æ±‚ã€‚è¿™å¯¹äºé—­æºè½¯ä»¶å¯èƒ½ç‰¹åˆ«æœ‰ä»·å€¼ã€‚</li></ul><p>ä½œä¸º SLSA è·¯çº¿å›¾çš„ä¸€éƒ¨åˆ†ï¼ŒSLSA å›¢é˜Ÿè¿˜ä¼šç»§ç»­æ¢è®¨å¦‚ä½•è¯†åˆ«é‡è¦ç»„æˆéƒ¨åˆ†ã€å¦‚ä½•ç¡®å®šæ•´ä¸ªä¾›åº”é“¾çš„æ€»ä½“é£é™©ä»¥åŠè®¤è¯çš„ä½œç”¨ã€‚</p><h2 id="SLSAè½åœ°"><a href="#SLSAè½åœ°" class="headerlink" title="SLSAè½åœ°"></a>SLSAè½åœ°</h2><p>SLSA æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œä½†å¦‚ä½•è½åœ°å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ SLSA çš„ <a href="https://slsa.dev/spec/v0.1/requirements">Requirements</a> çš„æ±‡æ€»è¡¨æ¥ä¸€ä¸€å¯¹ç…§è¿›è¡Œè‡ªæ£€ï¼ŒæŸ¥çœ‹å½“å‰çš„ CI&#x2F;CD å·¥ä½œæµå¤„åœ¨å“ªä¸ªå®‰å…¨ç­‰çº§ã€‚</p><p>æœ‰æ²¡æœ‰å·¥å…·èƒ½å¤Ÿæ›´å¥½çš„å¸®åŠ©æˆ‘ä»¬æ£€æŸ¥å¹¶æŒ‡å¯¼æˆ‘ä»¬å¦‚ä½•æé«˜å®‰å…¨ç­‰çº§å‘¢ï¼Ÿ</p><p>ç›®å‰åªæœ‰å°‘æ•°å¯ä»¥å®ç°æ­¤ç›®çš„çš„å·¥å…·ï¼Œå¹¶ä¸”ç»å¤§å¤šæ•°åªé™äº GitHubã€‚</p><p><a href="https://github.com/ossf/scorecard">OpenSSF Scorecard</a> å°±æ˜¯ä¸€ä¸ªæ¥è‡ªäºå¼€æºå®‰å…¨åŸºé‡‘ä¼šï¼ˆOpenSSFï¼‰é’ˆå¯¹å¼€æºè½¯ä»¶å®‰å…¨æŒ‡æ ‡æ£€æŸ¥çš„ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€æºç»´æŠ¤è€…æ”¹è¿›ä»–ä»¬çš„å®‰å…¨æœ€ä½³å®è·µï¼Œå¹¶å¸®åŠ©å¼€æºæ¶ˆè´¹è€…åˆ¤æ–­ä»–ä»¬çš„ä¾èµ–é¡¹æ˜¯å¦å®‰å…¨ã€‚</p><p>å®ƒæ˜¯é€šè¿‡è¯„ä¼°è½¯ä»¶å®‰å…¨ç›¸å…³çš„è®¸å¤šé‡è¦é¡¹ç›®ï¼Œå¹¶ä¸ºæ¯ä¸ªæ£€æŸ¥åˆ†é… 0-10 çš„åˆ†æ•°ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™äº›åˆ†æ•°æ¥äº†è§£éœ€è¦æ”¹è¿›çš„ç‰¹å®šé¢†åŸŸï¼Œä»¥åŠ å¼ºé¡¹ç›®çš„å®‰å…¨çŠ¶å†µã€‚è¿˜å¯ä»¥è¯„ä¼°ä¾èµ–é¡¹å¼•å…¥çš„é£é™©ï¼Œå¹¶å°±æ¥å—è¿™äº›é£é™©ã€è¯„ä¼°æ›¿ä»£è§£å†³æ–¹æ¡ˆæˆ–ä¸ç»´æŠ¤äººå‘˜åˆä½œè¿›è¡Œæ”¹è¿›åšå‡ºæ˜æ™ºçš„å†³å®šã€‚</p><h2 id="å…¶ä»–å·¥å…·"><a href="#å…¶ä»–å·¥å…·" class="headerlink" title="å…¶ä»–å·¥å…·"></a>å…¶ä»–å·¥å…·</h2><ul><li><a href="https://github.com/slsa-framework/slsa-verifier">slsa-verifier</a> - éªŒè¯ç¬¦åˆ SLSA æ ‡å‡†çš„æ„å»ºå‡ºå¤„</li><li><a href="https://github.com/sigstore">Sigstore</a> - ç”¨äºç­¾åã€éªŒè¯å’Œä¿æŠ¤è½¯ä»¶çš„æ–°æ ‡å‡†</li></ul><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> DevSecOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SLSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åœ¨ DevOps ä»»åŠ¡ä¸­ä½¿ç”¨ ChatGPT?</title>
      <link href="/2023/02/chatgpt-for-devops/"/>
      <url>/2023/02/chatgpt-for-devops/</url>
      
        <content type="html"><![CDATA[<p>éšç€ DevOps çš„æµè¡Œï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘å›¢é˜Ÿæ­£åœ¨å¯»æ‰¾ä¸€äº›å·¥å…·æ¥å¸®åŠ©ä»–ä»¬æ›´å¥½åœ°å®Œæˆä»»åŠ¡ã€‚ChatGPT æ˜¯ä¸€æ¬¾åŸºäºäººå·¥æ™ºèƒ½çš„è‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¸®åŠ©å¼€å‘å›¢é˜Ÿåœ¨ DevOps ä»»åŠ¡ä¸­æ›´åŠ é«˜æ•ˆåœ°å·¥ä½œã€‚</p><p>æœ¬æ–‡å°†æ¢è®¨å¦‚ä½•åœ¨ DevOps ä»»åŠ¡ä¸­ä½¿ç”¨ ChatGPTã€‚</p><h2 id="ä¸€ã€ChatGPT-ç®€ä»‹"><a href="#ä¸€ã€ChatGPT-ç®€ä»‹" class="headerlink" title="ä¸€ã€ChatGPT ç®€ä»‹"></a>ä¸€ã€ChatGPT ç®€ä»‹</h2><p>ChatGPT æ˜¯ä¸€æ¬¾ç”± OpenAI å¼€å‘çš„äººå·¥æ™ºèƒ½è‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·ã€‚å®ƒå¯ä»¥ç”¨äºè®¸å¤šä¸åŒçš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€æ–‡æœ¬ç”Ÿæˆç­‰ã€‚<br>ChatGPT ä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œå¯ä»¥ç”Ÿæˆä¸è¾“å…¥å†…å®¹ç›¸å…³çš„æ–‡æœ¬ã€‚å®ƒæ˜¯ä¸€æ¬¾éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´åŠ é«˜æ•ˆåœ°å·¥ä½œã€‚</p><h2 id="äºŒã€ChatGPT-åœ¨-DevOps-ä¸­çš„åº”ç”¨"><a href="#äºŒã€ChatGPT-åœ¨-DevOps-ä¸­çš„åº”ç”¨" class="headerlink" title="äºŒã€ChatGPT åœ¨ DevOps ä¸­çš„åº”ç”¨"></a>äºŒã€ChatGPT åœ¨ DevOps ä¸­çš„åº”ç”¨</h2><p>åœ¨ DevOps ä¸­ï¼Œå¼€å‘å›¢é˜Ÿé€šå¸¸éœ€è¦å¿«é€Ÿè§£å†³é—®é¢˜ï¼Œå¹¶ä¸å›¢é˜Ÿæˆå‘˜å’Œå®¢æˆ·è¿›è¡Œæœ‰æ•ˆæ²Ÿé€šã€‚ChatGPT å¯ä»¥ç”¨æ¥å¸®åŠ©è§£å†³è¿™äº›é—®é¢˜ã€‚</p><ol><li><p>è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥<br>  å¼€å‘å›¢é˜Ÿé€šå¸¸éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ¥è¿›è¡Œä»£ç å®¡æŸ¥ã€‚ChatGPT å¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚å®ƒå¯ä»¥æ ¹æ®ä»£ç åº“ä¸­çš„æ ·æœ¬ä»£ç ï¼Œç”Ÿæˆä¸æ ·æœ¬ä»£ç é£æ ¼ç›¸ä¼¼çš„ä»£ç ï¼Œå¹¶å¯¹æ–°ä»£ç è¿›è¡Œå®¡æŸ¥ã€‚è¿™å¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´å¿«åœ°è¿›è¡Œä»£ç å®¡æŸ¥ï¼Œå¹¶å‡å°‘äººä¸ºé”™è¯¯çš„å¯èƒ½æ€§ã€‚</p></li><li><p>è‡ªåŠ¨åŒ–æµ‹è¯•<br>  æµ‹è¯•æ˜¯ DevOps ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ChatGPT å¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å®ƒå¯ä»¥æ ¹æ®æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç›¸åº”çš„æµ‹è¯•ä»£ç ï¼Œå¹¶å¯¹æµ‹è¯•ç»“æœè¿›è¡Œè¯„ä¼°ã€‚è¿™å¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´å¿«åœ°è¿›è¡Œæµ‹è¯•ï¼Œå¹¶å‡å°‘äººä¸ºé”™è¯¯çš„å¯èƒ½æ€§ã€‚</p></li><li><p>è‡ªåŠ¨åŒ–éƒ¨ç½²<br>  éƒ¨ç½²æ˜¯ DevOps ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ChatGPT å¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚å®ƒå¯ä»¥æ ¹æ®éƒ¨ç½²è§„åˆ™ç”Ÿæˆç›¸åº”çš„éƒ¨ç½²ä»£ç ï¼Œå¹¶å¯¹éƒ¨ç½²ç»“æœè¿›è¡Œè¯„ä¼°ã€‚è¿™å¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´å¿«åœ°è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶å‡å°‘äººä¸ºé”™è¯¯çš„å¯èƒ½æ€§ã€‚</p></li><li><p>è‡ªåŠ¨åŒ–æ–‡æ¡£ç”Ÿæˆ<br>  æ–‡æ¡£æ˜¯ DevOps ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ChatGPT å¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–æ–‡æ¡£ç”Ÿæˆã€‚å®ƒå¯ä»¥æ ¹æ®é¡¹ç›®çš„ä»£ç åº“å’Œæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç›¸åº”çš„æ–‡æ¡£ï¼Œå¹¶å¯¹æ–‡æ¡£çš„è´¨é‡è¿›è¡Œè¯„ä¼°ã€‚è¿™å¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´å¿«åœ°ç”Ÿæˆæ–‡æ¡£ï¼Œå¹¶å‡å°‘äººä¸ºé”™è¯¯çš„å¯èƒ½æ€§ã€‚</p></li></ol><h2 id="ä¸‰ã€å¦‚ä½•ä½¿ç”¨-ChatGPT"><a href="#ä¸‰ã€å¦‚ä½•ä½¿ç”¨-ChatGPT" class="headerlink" title="ä¸‰ã€å¦‚ä½•ä½¿ç”¨ ChatGPT"></a>ä¸‰ã€å¦‚ä½•ä½¿ç”¨ ChatGPT</h2><p>è¦ä½¿ç”¨ ChatGPTï¼Œå¼€å‘å›¢é˜Ÿéœ€è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><span id="more"></span><ol><li><p>æ”¶é›†æ•°æ®<br>  æ”¶é›†æ•°æ®æ˜¯ä½¿ç”¨ ChatGPT çš„ç¬¬ä¸€æ­¥ã€‚å¼€å‘å›¢é˜Ÿéœ€è¦æ”¶é›†å¼€å‘å›¢é˜Ÿéœ€è¦æ”¶é›†ä¸å…¶ä»»åŠ¡ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ä»£ç åº“ã€æµ‹è¯•ç”¨ä¾‹ã€éƒ¨ç½²è§„åˆ™å’Œæ–‡æ¡£ã€‚è¿™äº›æ•°æ®å°†ç”¨äºè®­ç»ƒ ChatGPT æ¨¡å‹ï¼Œä»¥ç”Ÿæˆä¸ä»»åŠ¡ç›¸å…³çš„æ–‡æœ¬ã€‚</p></li><li><p>è®­ç»ƒ ChatGPT æ¨¡å‹<br>  è®­ç»ƒ ChatGPT æ¨¡å‹æ˜¯ä½¿ç”¨ ChatGPT çš„ç¬¬äºŒæ­¥ã€‚å¼€å‘å›¢é˜Ÿå¯ä»¥ä½¿ç”¨å·²æœ‰çš„æ•°æ®æ¥è®­ç»ƒæ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿ç§»å­¦ä¹ æŠ€æœ¯ï¼Œå°†å·²æœ‰çš„ ChatGPT æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œä»¥é€‚åº”å…¶ä»»åŠ¡çš„éœ€æ±‚ã€‚è®­ç»ƒå¥½çš„ ChatGPT æ¨¡å‹å°†ç”¨äºç”Ÿæˆä¸ä»»åŠ¡ç›¸å…³çš„æ–‡æœ¬ã€‚</p></li><li><p>é›†æˆ ChatGPT æ¨¡å‹<br>  é›†æˆ ChatGPT æ¨¡å‹æ˜¯ä½¿ç”¨ ChatGPT çš„ç¬¬ä¸‰æ­¥ã€‚å¼€å‘å›¢é˜Ÿå¯ä»¥å°† ChatGPT æ¨¡å‹é›†æˆåˆ°å…¶ DevOps å·¥å…·é“¾ä¸­ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°† ChatGPT æ¨¡å‹é›†æˆåˆ°è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ã€è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·å’Œè‡ªåŠ¨åŒ–æ–‡æ¡£ç”Ÿæˆå·¥å…·ä¸­ã€‚è¿™å°†ä½¿è¿™äº›å·¥å…·æ›´åŠ æ™ºèƒ½åŒ–ï¼Œå¹¶å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´åŠ é«˜æ•ˆåœ°å·¥ä½œã€‚</p></li><li><p>ä¼˜åŒ– ChatGPT æ¨¡å‹<br>ä¼˜åŒ– ChatGPT æ¨¡å‹æ˜¯ä½¿ç”¨ ChatGPT çš„ç¬¬å››æ­¥ã€‚å¼€å‘å›¢é˜Ÿéœ€è¦å®šæœŸç›‘æ§ ChatGPT æ¨¡å‹çš„æ€§èƒ½ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å¢åŠ æ›´å¤šçš„è®­ç»ƒæ•°æ®ã€è°ƒæ•´æ¨¡å‹çš„è¶…å‚æ•°ã€å¢åŠ æ­£åˆ™åŒ–çº¦æŸç­‰ã€‚è¿™å°†æœ‰åŠ©äºæé«˜ ChatGPT æ¨¡å‹çš„å‡†ç¡®æ€§å’Œæ€§èƒ½ï¼Œå¹¶ä½¿å…¶æ›´åŠ é€‚åº”ä»»åŠ¡éœ€æ±‚ã€‚</p></li></ol><h2 id="å››ã€ç»“è®º"><a href="#å››ã€ç»“è®º" class="headerlink" title="å››ã€ç»“è®º"></a>å››ã€ç»“è®º</h2><p>åœ¨ DevOps ä»»åŠ¡ä¸­ä½¿ç”¨ ChatGPT å¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´åŠ é«˜æ•ˆåœ°å·¥ä½œã€‚ChatGPT å¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œè‡ªåŠ¨åŒ–æ–‡æ¡£ç”Ÿæˆç­‰ä»»åŠ¡ã€‚å¼€å‘å›¢é˜Ÿéœ€è¦æ”¶é›†ä¸å…¶ä»»åŠ¡ç›¸å…³çš„æ•°æ®ï¼Œè®­ç»ƒ ChatGPT æ¨¡å‹ï¼Œå¹¶å°†å…¶é›†æˆåˆ°å…¶ DevOps å·¥å…·é“¾ä¸­ã€‚å¼€å‘å›¢é˜Ÿè¿˜éœ€è¦å®šæœŸç›‘æ§ ChatGPT æ¨¡å‹çš„æ€§èƒ½ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚è¿™å°†æœ‰åŠ©äºæé«˜ ChatGPT æ¨¡å‹çš„å‡†ç¡®æ€§å’Œæ€§èƒ½ï¼Œå¹¶ä½¿å…¶æ›´åŠ é€‚åº”ä»»åŠ¡éœ€æ±‚ã€‚</p><blockquote><p>å¯¹äº†ï¼Œæœ¬ç¯‡æ–‡ç« æ˜¯ç”± ChatGPT ç”Ÿæˆçš„ï¼Œä½ è§‰å¾—å®ƒå†™çš„æ€ä¹ˆæ ·ï¼Œåƒä¸ªæ²¹è…»çš„ä¸­å¹´äººï¼Ÿ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> ChatGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆæˆ‘çš„ Jenkins Controller è¶Šæ¥è¶Šæ…¢ï¼Ÿå¯èƒ½çŠ¯äº†è¿™äº›é”™è¯¯...</title>
      <link href="/2023/02/pipeline-best-practices/"/>
      <url>/2023/02/pipeline-best-practices/</url>
      
        <content type="html"><![CDATA[<p>å°±åƒæ ‡é¢˜æ‰€è¯´çš„ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„ Jenkins Controller è¶Šæ¥è¶Šæ…¢ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰éµå¾ª Jenkins pipeline ç¼–å†™çš„ä¸€äº›æœ€ä½³å®è·µã€‚</p><p>æ‰€ä»¥ä¸»è¦ä»‹ç» Jenkins pipeline çš„ä¸€äº›æœ€ä½³å®è·µï¼Œç›®çš„æ˜¯ä¸ºäº†å‘ pipeline ä½œè€…å’Œç»´æŠ¤è€…å±•ç¤ºä¸€äº›ä»–ä»¬è¿‡å»å¯èƒ½å¹¶æ²¡æœ‰æ„è¯†åˆ°çš„â€œåæ¨¡å¼â€ã€‚</p><p>æˆ‘ä¼šå°½é‡åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„ Pipeline æœ€ä½³å®è·µï¼Œå¹¶æä¾›ä¸€äº›å®è·µä¸­å¸¸è§çš„å…·ä½“ç¤ºä¾‹ã€‚</p><h2 id="ä¸€èˆ¬é—®é¢˜"><a href="#ä¸€èˆ¬é—®é¢˜" class="headerlink" title="ä¸€èˆ¬é—®é¢˜"></a>ä¸€èˆ¬é—®é¢˜</h2><h3 id="ç¡®ä¿åœ¨-pipeline-ä¸­ä½¿ç”¨-Groovy-ä»£ç ä½œä¸ºç²˜å¸–å‰‚"><a href="#ç¡®ä¿åœ¨-pipeline-ä¸­ä½¿ç”¨-Groovy-ä»£ç ä½œä¸ºç²˜å¸–å‰‚" class="headerlink" title="ç¡®ä¿åœ¨ pipeline ä¸­ä½¿ç”¨ Groovy ä»£ç ä½œä¸ºç²˜å¸–å‰‚"></a>ç¡®ä¿åœ¨ pipeline ä¸­ä½¿ç”¨ Groovy ä»£ç ä½œä¸ºç²˜å¸–å‰‚</h3><p>ä½¿ç”¨ Groovy ä»£ç è¿æ¥ä¸€ç»„æ“ä½œè€Œä¸æ˜¯ä½œä¸º pipeline çš„ä¸»è¦åŠŸèƒ½ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œä¸å…¶ä¾èµ– pipeline åŠŸèƒ½ï¼ˆGroovy æˆ– pipeline æ­¥éª¤ï¼‰æ¥æ¨åŠ¨æ„å»ºè¿‡ç¨‹å‘å‰å‘å±•ï¼Œä¸å¦‚ä½¿ç”¨å•ä¸ªæ­¥éª¤ï¼ˆä¾‹å¦‚ <code>sh</code>ï¼‰æ¥å®Œæˆæ„å»ºçš„å¤šä¸ªéƒ¨åˆ†ã€‚</p><p>pipeline éšç€å…¶å¤æ‚æ€§çš„å¢åŠ ï¼ˆGroovy ä»£ç é‡ã€ä½¿ç”¨çš„æ­¥éª¤æ•°ç­‰ï¼‰ï¼Œéœ€è¦ controller ä¸Šçš„æ›´å¤šèµ„æºï¼ˆCPUã€å†…å­˜ã€å­˜å‚¨ï¼‰ã€‚å°† Pipeline è§†ä¸ºå®Œæˆæ„å»ºçš„å·¥å…·ï¼Œè€Œä¸æ˜¯æ„å»ºçš„æ ¸å¿ƒã€‚</p><p>ç¤ºä¾‹ï¼šä½¿ç”¨å•ä¸ª Maven æ„å»ºæ­¥éª¤é€šè¿‡å…¶æ„å»º&#x2F;æµ‹è¯•&#x2F;éƒ¨ç½²è¿‡ç¨‹æ¥é©±åŠ¨æ„å»ºã€‚</p><h3 id="åœ¨-Jenkins-pipeline-ä¸­è¿è¡Œ-shell-è„šæœ¬"><a href="#åœ¨-Jenkins-pipeline-ä¸­è¿è¡Œ-shell-è„šæœ¬" class="headerlink" title="åœ¨ Jenkins pipeline ä¸­è¿è¡Œ shell è„šæœ¬"></a>åœ¨ Jenkins pipeline ä¸­è¿è¡Œ shell è„šæœ¬</h3><p>åœ¨ Jenkins Pipeline ä¸­ä½¿ç”¨ shell è„šæœ¬å¯ä»¥é€šè¿‡å°†å¤šä¸ªæ­¥éª¤åˆå¹¶åˆ°ä¸€ä¸ªé˜¶æ®µæ¥å¸®åŠ©ç®€åŒ–æ„å»ºã€‚shell è„šæœ¬è¿˜å…è®¸ç”¨æˆ·æ·»åŠ æˆ–æ›´æ–°å‘½ä»¤ï¼Œè€Œæ— éœ€å•ç‹¬ä¿®æ”¹æ¯ä¸ªæ­¥éª¤æˆ–é˜¶æ®µã€‚</p><p>Jenkins Pipeline ä¸­ä½¿ç”¨ shell è„šæœ¬åŠå…¶æä¾›çš„å¥½å¤„ï¼š</p><span id="more"></span><h3 id="é¿å…-pipeline-ä¸­çš„å¤æ‚-Groovy-ä»£ç "><a href="#é¿å…-pipeline-ä¸­çš„å¤æ‚-Groovy-ä»£ç " class="headerlink" title="é¿å… pipeline ä¸­çš„å¤æ‚ Groovy ä»£ç "></a>é¿å… pipeline ä¸­çš„å¤æ‚ Groovy ä»£ç </h3><p>å¯¹äº pipelineï¼ŒGroovy ä»£ç å§‹ç»ˆåœ¨ controller ä¸Šæ‰§è¡Œï¼Œè¿™æ„å‘³ç€ä½¿ç”¨ controller èµ„æºï¼ˆå†…å­˜å’Œ CPUï¼‰ã€‚</p><p>å› æ­¤ï¼Œå‡å°‘ Pipeline æ‰§è¡Œçš„ Groovy ä»£ç é‡è‡³å…³é‡è¦ï¼ˆè¿™åŒ…æ‹¬åœ¨ Pipeline ä¸­å¯¼å…¥çš„ç±»ä¸Šè°ƒç”¨çš„ä»»ä½•æ–¹æ³•ï¼‰ã€‚ä»¥ä¸‹æ˜¯è¦é¿å…ä½¿ç”¨çš„æœ€å¸¸è§ Groovy æ–¹æ³•ç¤ºä¾‹ï¼š</p><ol><li><p><code>JsonSlurper</code>ï¼šæ­¤å‡½æ•°ï¼ˆä»¥åŠå…¶ä»–ä¸€äº›ç±»ä¼¼å‡½æ•°ï¼Œå¦‚ <code>XmlSlurper</code> æˆ– <code>readFile</code>ï¼‰å¯ç”¨äºä»ç£ç›˜ä¸Šçš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œå°†è¯¥æ–‡ä»¶ä¸­çš„æ•°æ®è§£æä¸º <code>JSON</code> å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ <code>JsonSlurper().parseText(readFile(&quot;$LOCAL_FILE&quot;))</code>ã€‚è¯¥å‘½ä»¤ä¸¤æ¬¡å°†æœ¬åœ°æ–‡ä»¶åŠ è½½åˆ° controller çš„å†…å­˜ä¸­ï¼Œå¦‚æœæ–‡ä»¶å¾ˆå¤§æˆ–å‘½ä»¤æ‰§è¡Œé¢‘ç¹ï¼Œå°†éœ€è¦å¤§é‡å†…å­˜ã€‚</p><p> è§£å†³æ–¹æ¡ˆï¼šä¸ä½¿ç”¨ <code>JsonSlurper</code>ï¼Œè€Œæ˜¯ä½¿ç”¨ shell æ­¥éª¤å¹¶è¿”å›æ ‡å‡†è¾“å‡ºã€‚è¿™ä¸ª shell çœ‹èµ·æ¥åƒè¿™æ ·ï¼š<code>def JsonReturn = sh label: &#39;&#39;, returnStdout: true, script: &#39;echo &quot;$LOCAL_FILE&quot;| jq &quot;$PARSING_QUERY&quot;&#39;</code>ã€‚è¿™å°†ä½¿ç”¨ä»£ç†èµ„æºæ¥è¯»å–æ–‡ä»¶ï¼Œ<code>$PARSING_QUERY</code> å°†å¸®åŠ©å°†æ–‡ä»¶è§£ææˆæ›´å°çš„å°ºå¯¸ã€‚</p></li><li><p><code>HttpRequest</code>ï¼šæ­¤å‘½ä»¤ç»å¸¸ç”¨äºä»å¤–éƒ¨æºè·å–æ•°æ®å¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚è¿™ç§åšæ³•å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºä¸ä»…è¯¥è¯·æ±‚ç›´æ¥æ¥è‡ª controller ï¼ˆå¦‚æœ controller æ²¡æœ‰åŠ è½½è¯ä¹¦ï¼Œè¿™å¯èƒ½ä¼šä¸º HTTPS è¯·æ±‚ä¹‹ç±»çš„äº‹æƒ…æä¾›é”™è¯¯çš„ç»“æœï¼‰ï¼Œè€Œä¸”å¯¹è¯¥è¯·æ±‚çš„å“åº”è¢«å­˜å‚¨äº†ä¸¤æ¬¡ã€‚</p><p> è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ shell æ­¥éª¤æ‰§è¡Œæ¥è‡ªä»£ç†çš„ HTTP è¯·æ±‚ï¼Œä¾‹å¦‚ä½¿ç”¨ curl æˆ– wget ç­‰å·¥å…·ï¼Œè§†æƒ…å†µè€Œå®šã€‚å¦‚æœç»“æœå¿…é¡»åœ¨ Pipeline çš„åé¢ï¼Œå°½é‡åœ¨ agent ç«¯è¿‡æ»¤ç»“æœï¼Œè¿™æ ·åªæœ‰æœ€å°‘çš„éœ€è¦çš„ä¿¡æ¯å¿…é¡»ä¼ å› Jenkins controllerã€‚</p></li></ol><h3 id="å‡å°‘ç±»ä¼¼-pipeline-æ­¥éª¤çš„é‡å¤"><a href="#å‡å°‘ç±»ä¼¼-pipeline-æ­¥éª¤çš„é‡å¤" class="headerlink" title="å‡å°‘ç±»ä¼¼ pipeline æ­¥éª¤çš„é‡å¤"></a>å‡å°‘ç±»ä¼¼ pipeline æ­¥éª¤çš„é‡å¤</h3><p>å°½å¯èƒ½å¤šåœ°å°† pipeline æ­¥éª¤ç»„åˆæˆå•ä¸ªæ­¥éª¤ï¼Œä»¥å‡å°‘ pipeline æ‰§è¡Œå¼•æ“æœ¬èº«é€ æˆçš„å¼€é”€ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ è¿ç»­è¿è¡Œä¸‰ä¸ª shell æ­¥éª¤ï¼Œåˆ™æ¯ä¸ªæ­¥éª¤éƒ½å¿…é¡»å¯åŠ¨å’Œåœæ­¢ï¼Œéœ€è¦åˆ›å»ºå’Œæ¸…ç† agent å’Œ controller ä¸Šçš„è¿æ¥å’Œèµ„æºã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœå°†æ‰€æœ‰å‘½ä»¤æ”¾å…¥å•ä¸ª shell æ­¥éª¤ï¼Œåˆ™åªéœ€å¯åŠ¨å’Œåœæ­¢ä¸€ä¸ªæ­¥éª¤ã€‚</p><p>ç¤ºä¾‹ï¼šä¸å…¶åˆ›å»ºä¸€ç³»åˆ— <code>echo</code> æˆ– <code>sh</code> æ­¥éª¤ï¼Œä¸å¦‚å°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ­¥éª¤æˆ–è„šæœ¬ã€‚</p><h3 id="é¿å…è°ƒç”¨-Jenkins-getInstance"><a href="#é¿å…è°ƒç”¨-Jenkins-getInstance" class="headerlink" title="é¿å…è°ƒç”¨ Jenkins.getInstance"></a>é¿å…è°ƒç”¨ <code>Jenkins.getInstance</code></h3><p>åœ¨ Pipeline æˆ–å…±äº«åº“ä¸­ä½¿ç”¨ Jenkins.instance æˆ–å…¶è®¿é—®å™¨æ–¹æ³•è¡¨ç¤ºè¯¥ Pipeline&#x2F;å…±äº«åº“ä¸­çš„ä»£ç æ»¥ç”¨ã€‚</p><p>ä»éæ²™ç›’å…±äº«åº“ä½¿ç”¨ Jenkins API æ„å‘³ç€å…±äº«åº“æ—¢æ˜¯å…±äº«åº“åˆæ˜¯ä¸€ç§ Jenkins æ’ä»¶ã€‚</p><p>ä» pipeline ä¸ Jenkins API äº¤äº’æ—¶éœ€è¦éå¸¸å°å¿ƒï¼Œä»¥é¿å…ä¸¥é‡çš„å®‰å…¨å’Œæ€§èƒ½é—®é¢˜ã€‚å¦‚æœä½ å¿…é¡»åœ¨ä½ çš„æ„å»ºä¸­ä½¿ç”¨ Jenkins APIï¼Œæ¨èçš„æ–¹æ³•æ˜¯åœ¨ Java ä¸­åˆ›å»ºä¸€ä¸ªæœ€å°çš„æ’ä»¶ï¼Œå®ƒåœ¨ä½ æƒ³è¦ä½¿ç”¨ Pipeline çš„ Step API è®¿é—®çš„ Jenkins API å‘¨å›´å®ç°ä¸€ä¸ªå®‰å…¨çš„åŒ…è£…å™¨ã€‚</p><p>ç›´æ¥ä»æ²™ç›’ Jenkinsfile ä½¿ç”¨ Jenkins API æ„å‘³ç€ä½ å¯èƒ½ä¸å¾—ä¸å°†å…è®¸æ²™ç›’ä¿æŠ¤çš„æ–¹æ³•åˆ—å…¥ç™½åå•ï¼Œä»»ä½•å¯ä»¥ä¿®æ”¹ pipeline çš„äººéƒ½å¯ä»¥ç»•è¿‡å®ƒï¼Œè¿™æ˜¯ä¸€ä¸ªé‡å¤§çš„å®‰å…¨é£é™©ã€‚åˆ—å…¥ç™½åå•çš„æ–¹æ³•ä»¥ç³»ç»Ÿç”¨æˆ·èº«ä»½è¿è¡Œï¼Œå…·æœ‰æ•´ä½“ç®¡ç†å‘˜æƒé™ï¼Œè¿™å¯èƒ½å¯¼è‡´å¼€å‘äººå‘˜æ‹¥æœ‰æ¯”é¢„æœŸæ›´é«˜çš„æƒé™ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šæœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯è§£å†³æ­£åœ¨è¿›è¡Œçš„è°ƒç”¨ï¼Œä½†å¦‚æœå¿…é¡»å®Œæˆè¿™äº›è°ƒç”¨ï¼Œé‚£ä¹ˆæœ€å¥½å®æ–½ä¸€ä¸ªèƒ½å¤Ÿæ”¶é›†æ‰€éœ€æ•°æ®çš„ Jenkins æ’ä»¶ã€‚</p><h3 id="æ¸…ç†æ—§çš„-Jenkins-æ„å»º"><a href="#æ¸…ç†æ—§çš„-Jenkins-æ„å»º" class="headerlink" title="æ¸…ç†æ—§çš„ Jenkins æ„å»º"></a>æ¸…ç†æ—§çš„ Jenkins æ„å»º</h3><p>ä½œä¸º Jenkins ç®¡ç†å‘˜ï¼Œåˆ é™¤æ—§çš„æˆ–ä¸éœ€è¦çš„æ„å»ºå¯ä»¥ä½¿ Jenkins controller é«˜æ•ˆè¿è¡Œã€‚</p><p>å½“ä½ ä¸åˆ é™¤æ—§ç‰ˆæœ¬æ—¶ï¼Œç”¨äºæ›´æ–°å’Œç›¸å…³ç‰ˆæœ¬çš„èµ„æºå°±ä¼šå‡å°‘ã€‚å¯ä»¥åœ¨æ¯ä¸ª pipeline ä½œä¸šä¸­ä½¿ç”¨ <code>buildDiscarder</code> æ¥ä¿ç•™ç‰¹å®šå†å²æ„å»ºæ•°é‡ã€‚</p><h2 id="ä½¿ç”¨å…±äº«åº“"><a href="#ä½¿ç”¨å…±äº«åº“" class="headerlink" title="ä½¿ç”¨å…±äº«åº“"></a>ä½¿ç”¨å…±äº«åº“</h2><h3 id="ä¸è¦è¦†ç›–å†…ç½®çš„-pipeline-æ­¥éª¤"><a href="#ä¸è¦è¦†ç›–å†…ç½®çš„-pipeline-æ­¥éª¤" class="headerlink" title="ä¸è¦è¦†ç›–å†…ç½®çš„ pipeline æ­¥éª¤"></a>ä¸è¦è¦†ç›–å†…ç½®çš„ pipeline æ­¥éª¤</h3><p>å°½å¯èƒ½è¿œç¦»è‡ªå®šä¹‰&#x2F;è¦†ç›–çš„ pipeline æ­¥éª¤ã€‚è¦†ç›–å†…ç½® pipeline æ­¥éª¤æ˜¯ä½¿ç”¨å…±äº«åº“è¦†ç›–æ ‡å‡† pipeline APIï¼ˆå¦‚ <code>sh</code> æˆ– <code>timeout</code>ï¼‰çš„è¿‡ç¨‹ã€‚æ­¤è¿‡ç¨‹å¾ˆå±é™©ï¼Œå› ä¸º pipeline API å¯èƒ½éšæ—¶æ›´æ”¹ï¼Œå¯¼è‡´è‡ªå®šä¹‰ä»£ç ä¸­æ–­æˆ–ç»™å‡ºä¸é¢„æœŸä¸åŒçš„ç»“æœã€‚</p><p>å½“è‡ªå®šä¹‰ä»£ç å›  Pipeline API æ›´æ”¹è€Œä¸­æ–­æ—¶ï¼Œæ•…éšœæ’é™¤å¾ˆå›°éš¾ï¼Œå› ä¸ºå³ä½¿è‡ªå®šä¹‰ä»£ç æ²¡æœ‰æ›´æ”¹ï¼Œåœ¨ API æ›´æ–°åå®ƒä¹Ÿå¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p><p>å› æ­¤ï¼Œå³ä½¿è‡ªå®šä¹‰ä»£ç æ²¡æœ‰æ›´æ”¹ï¼Œä¹Ÿä¸æ„å‘³ç€åœ¨ API æ›´æ–°åå®ƒä¼šä¿æŒä¸å˜ã€‚</p><p>æœ€åï¼Œç”±äºåœ¨æ•´ä¸ª pipeline ä¸­æ™®éä½¿ç”¨è¿™äº›æ­¥éª¤ï¼Œå¦‚æœæŸäº›å†…å®¹ç¼–ç ä¸æ­£ç¡®&#x2F;æ•ˆç‡ä½ä¸‹ï¼Œç»“æœå¯¹ Jenkins æ¥è¯´å¯èƒ½æ˜¯ç¾éš¾æ€§çš„ã€‚</p><h3 id="é¿å…å¤§å‹å…¨å±€å˜é‡å£°æ˜æ–‡ä»¶"><a href="#é¿å…å¤§å‹å…¨å±€å˜é‡å£°æ˜æ–‡ä»¶" class="headerlink" title="é¿å…å¤§å‹å…¨å±€å˜é‡å£°æ˜æ–‡ä»¶"></a>é¿å…å¤§å‹å…¨å±€å˜é‡å£°æ˜æ–‡ä»¶</h3><p>æ‹¥æœ‰è¾ƒå¤§çš„å˜é‡å£°æ˜æ–‡ä»¶å¯èƒ½éœ€è¦å¤§é‡å†…å­˜è€Œå‡ ä¹æ²¡æœ‰ä»»ä½•å¥½å¤„ï¼Œå› ä¸ºæ— è®ºæ˜¯å¦éœ€è¦å˜é‡ï¼Œéƒ½ä¼šä¸ºæ¯ä¸ª pipeline åŠ è½½è¯¥æ–‡ä»¶ã€‚</p><p><strong>å»ºè®®åˆ›å»ºä»…åŒ…å«ä¸å½“å‰æ‰§è¡Œç›¸å…³çš„å˜é‡çš„å°å˜é‡æ–‡ä»¶ã€‚</strong></p><h3 id="é¿å…éå¸¸å¤§çš„å…±äº«åº“"><a href="#é¿å…éå¸¸å¤§çš„å…±äº«åº“" class="headerlink" title="é¿å…éå¸¸å¤§çš„å…±äº«åº“"></a>é¿å…éå¸¸å¤§çš„å…±äº«åº“</h3><p>åœ¨ Pipelines ä¸­ä½¿ç”¨å¤§å‹å…±äº«åº“éœ€è¦åœ¨ Pipeline å¯åŠ¨ä¹‹å‰æ£€å‡ºä¸€ä¸ªéå¸¸å¤§çš„æ–‡ä»¶ï¼Œå¹¶ä¸ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„æ¯ä¸ªä½œä¸šåŠ è½½ç›¸åŒçš„å…±äº«åº“ï¼Œè¿™ä¼šå¯¼è‡´å†…å­˜å¼€é”€å¢åŠ å’Œæ‰§è¡Œæ—¶é—´å˜æ…¢ã€‚</p><h2 id="å›ç­”å…¶ä»–å¸¸è§é—®é¢˜"><a href="#å›ç­”å…¶ä»–å¸¸è§é—®é¢˜" class="headerlink" title="å›ç­”å…¶ä»–å¸¸è§é—®é¢˜"></a>å›ç­”å…¶ä»–å¸¸è§é—®é¢˜</h2><h3 id="å¤„ç†-pipeline-ä¸­çš„å¹¶å‘"><a href="#å¤„ç†-pipeline-ä¸­çš„å¹¶å‘" class="headerlink" title="å¤„ç† pipeline ä¸­çš„å¹¶å‘"></a>å¤„ç† pipeline ä¸­çš„å¹¶å‘</h3><p>å°½é‡ä¸è¦è·¨å¤šä¸ª pipeline æ‰§è¡Œæˆ–å¤šä¸ªä¸åŒçš„ pipeline å…±äº«å·¥ä½œåŒºã€‚è¿™ç§åšæ³•å¯èƒ½ä¼šå¯¼è‡´æ¯ä¸ª pipeline ä¸­çš„æ„å¤–æ–‡ä»¶ä¿®æ”¹æˆ–å·¥ä½œåŒºé‡å‘½åã€‚</p><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œå…±äº«å·&#x2F;ç£ç›˜å®‰è£…åœ¨å•ç‹¬çš„ä½ç½®ï¼Œæ–‡ä»¶ä»è¯¥ä½ç½®å¤åˆ¶åˆ°å½“å‰å·¥ä½œåŒºï¼Œç„¶åå½“æ„å»ºå®Œæˆæ—¶ï¼Œå¦‚æœæœ‰æ›´æ–°å®Œæˆï¼Œæ–‡ä»¶å¯ä»¥è¢«å¤åˆ¶å›æ¥ã€‚</p><p>æ„å»ºä¸åŒçš„å®¹å™¨ï¼Œä»å¤´å¼€å§‹åˆ›å»ºæ‰€éœ€çš„èµ„æºï¼ˆäº‘ç±»å‹ä»£ç†éå¸¸é€‚åˆæ­¤ï¼‰ã€‚æ„å»ºè¿™äº›å®¹å™¨å°†ç¡®ä¿æ„å»ºè¿‡ç¨‹æ¯æ¬¡éƒ½ä»å¤´å¼€å§‹ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“é‡å¤ã€‚å¦‚æœæ„å»ºå®¹å™¨ä¸èµ·ä½œç”¨ï¼Œè¯·ç¦ç”¨ pipeline ä¸Šçš„å¹¶å‘æ€§æˆ–ä½¿ç”¨å¯é”å®šèµ„æºæ’ä»¶åœ¨è¿è¡Œæ—¶é”å®šå·¥ä½œåŒºï¼Œä»¥ä¾¿å…¶ä»–æ„å»ºåœ¨é”å®šæ—¶æ— æ³•ä½¿ç”¨å®ƒã€‚</p><p>è­¦å‘Šï¼šå¦‚æœè¿™äº›èµ„æºè¢«ä»»æ„é”å®šï¼Œåˆ™åœ¨è¿è¡Œæ—¶ç¦ç”¨å¹¶å‘æˆ–é”å®šå·¥ä½œåŒºå¯èƒ½ä¼šå¯¼è‡´ pipeline åœ¨ç­‰å¾…èµ„æºæ—¶è¢«é˜»å¡ã€‚</p><p><strong>å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œä¸ä¸ºæ¯ä¸ªä½œä¸šä½¿ç”¨å”¯ä¸€èµ„æºç›¸æ¯”ï¼Œè¿™ä¸¤ç§æ–¹æ³•è·å¾—æ„å»ºç»“æœçš„æ—¶é—´éƒ½æ¯”è¾ƒæ…¢ã€‚</strong></p><h3 id="é¿å…-NotSerializableException"><a href="#é¿å…-NotSerializableException" class="headerlink" title="é¿å… NotSerializableException"></a>é¿å… <code>NotSerializableException</code></h3><p>Pipeline ä»£ç ç»è¿‡ CPS è½¬æ¢ï¼Œä»¥ä¾¿ pipeline èƒ½å¤Ÿåœ¨ Jenkins é‡å¯åæ¢å¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ pipeline æ­£åœ¨è¿è¡Œä½ çš„è„šæœ¬æ—¶ï¼Œä½ å¯ä»¥å…³é—­ Jenkins æˆ–å¤±å»ä¸ä»£ç†çš„è¿æ¥ã€‚å½“å®ƒè¿”å›æ—¶ï¼ŒJenkins ä¼šè®°ä½å®ƒåœ¨åšä»€ä¹ˆï¼Œå¹¶ä¸”ä½ çš„ pipeline è„šæœ¬ä¼šæ¢å¤æ‰§è¡Œï¼Œå°±å¥½åƒå®ƒä»æœªè¢«ä¸­æ–­è¿‡ä¸€æ ·ã€‚ä¸€ç§ç§°ä¸ºâ€œè¿ç»­ä¼ é€’æ ·å¼ (CPS)â€çš„æ‰§è¡ŒæŠ€æœ¯åœ¨æ¢å¤ pipeline ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚ä½†æ˜¯ï¼Œç”±äº CPS è½¬æ¢ï¼ŒæŸäº› Groovy è¡¨è¾¾å¼æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p><p>åœ¨å¹•åï¼ŒCPS ä¾èµ–äºèƒ½å¤Ÿåºåˆ—åŒ– pipeline çš„å½“å‰çŠ¶æ€ä»¥åŠè¦æ‰§è¡Œçš„ pipeline çš„å…¶ä½™éƒ¨åˆ†ã€‚<br>è¿™æ„å‘³ç€åœ¨ pipeline ä¸­ä½¿ç”¨ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡å°†è§¦å‘ <code>NotSerializableException</code> åœ¨ pipeline å°è¯•ä¿ç•™å…¶çŠ¶æ€æ—¶æŠ›å‡ºã€‚</p><p>æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œä¸€äº›å¯èƒ½æœ‰é—®é¢˜çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜… <a href="http://jenkins.io/redirect/pipeline-cps-method-mismatches">Pipeline CPS æ–¹æ³•ä¸åŒ¹é…</a>ã€‚</p><p>ä¸‹é¢å°†ä»‹ç»ç¡®ä¿ pipeline èƒ½å¤ŸæŒ‰é¢„æœŸè¿è¡Œçš„æŠ€æœ¯ã€‚</p><h3 id="ç¡®ä¿æŒä¹…å˜é‡å¯åºåˆ—åŒ–"><a href="#ç¡®ä¿æŒä¹…å˜é‡å¯åºåˆ—åŒ–" class="headerlink" title="ç¡®ä¿æŒä¹…å˜é‡å¯åºåˆ—åŒ–"></a>ç¡®ä¿æŒä¹…å˜é‡å¯åºåˆ—åŒ–</h3><p>åœ¨åºåˆ—åŒ–æœŸé—´ï¼Œå±€éƒ¨å˜é‡ä½œä¸º pipeline çŠ¶æ€çš„ä¸€éƒ¨åˆ†è¢«æ•è·ã€‚è¿™æ„å‘³ç€åœ¨ pipeline æ‰§è¡ŒæœŸé—´å°†ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡å­˜å‚¨åœ¨å˜é‡ä¸­å°†å¯¼è‡´æŠ›å‡º <code>NotSerializableException</code>ã€‚</p><h3 id="ä¸è¦å°†ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡åˆ†é…ç»™å˜é‡"><a href="#ä¸è¦å°†ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡åˆ†é…ç»™å˜é‡" class="headerlink" title="ä¸è¦å°†ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡åˆ†é…ç»™å˜é‡"></a>ä¸è¦å°†ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡åˆ†é…ç»™å˜é‡</h3><p>ä¸€ç§ç­–ç•¥æ˜¯åˆ©ç”¨ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡å§‹ç»ˆâ€œåŠæ—¶â€æ¨æ–­å®ƒä»¬çš„å€¼ï¼Œè€Œä¸æ˜¯è®¡ç®—å®ƒä»¬çš„å€¼å¹¶å°†è¯¥å€¼å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚</p><h3 id="ä½¿ç”¨-NonCPS"><a href="#ä½¿ç”¨-NonCPS" class="headerlink" title="ä½¿ç”¨ @NonCPS"></a>ä½¿ç”¨ <code>@NonCPS</code></h3><p>å¦‚æœæœ‰å¿…è¦ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>@NonCPS</code> æ³¨é‡Šä¸ºç‰¹å®šæ–¹æ³•ç¦ç”¨ CPS è½¬æ¢ï¼Œå¦‚æœå®ƒç»è¿‡ CPS è½¬æ¢ï¼Œè¯¥æ–¹æ³•çš„ä¸»ä½“å°†æ— æ³•æ­£ç¡®æ‰§è¡Œã€‚è¯·æ³¨æ„ï¼Œè¿™ä¹Ÿæ„å‘³ç€ Groovy å‡½æ•°å°†ä¸å¾—ä¸å®Œå…¨é‡æ–°å¯åŠ¨ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«è½¬æ¢ã€‚</p><blockquote><p>å¼‚æ­¥ pipeline æ­¥éª¤ï¼ˆä¾‹å¦‚ <code>sh</code> å’Œ <code>sleep</code>ï¼‰å§‹ç»ˆæ˜¯ CPS è½¬æ¢çš„ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨ä½¿ç”¨ <code>@NonCPS</code> æ³¨é‡Šçš„æ–¹æ³•å†…éƒ¨ä½¿ç”¨ã€‚é€šå¸¸ï¼Œä½ åº”è¯¥é¿å…åœ¨ä½¿ç”¨ <code>@NonCPS</code> æ³¨é‡Šçš„æ–¹æ³•å†…éƒ¨ä½¿ç”¨ pipeline æ­¥éª¤ã€‚</p></blockquote><h3 id="Pipeline-è€ä¹…æ€§"><a href="#Pipeline-è€ä¹…æ€§" class="headerlink" title="Pipeline è€ä¹…æ€§"></a>Pipeline è€ä¹…æ€§</h3><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ›´æ”¹ pipeline çš„æŒä¹…æ€§å¯èƒ½ä¼šå¯¼è‡´ <code>NotSerializableException</code> ä¸ä¼šè¢«æŠ›å‡ºï¼Œå¦åˆ™å®ƒä»¬ä¼šè¢«æŠ›å‡ºã€‚è¿™æ˜¯å› ä¸ºé€šè¿‡ <code>PERFORMANCE_OPTIMIZED</code> é™ä½ pipeline çš„æŒä¹…æ€§æ„å‘³ç€ pipeline å½“å‰çŠ¶æ€çš„æŒä¹…åŒ–é¢‘ç‡å¤§å¤§é™ä½ã€‚å› æ­¤ï¼Œpipeline ä»ä¸å°è¯•åºåˆ—åŒ–ä¸å¯åºåˆ—åŒ–çš„å€¼ï¼Œå› æ­¤ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><blockquote><p>æ­¤æ³¨é‡Šçš„å­˜åœ¨æ˜¯ä¸ºäº†å‘ŠçŸ¥ç”¨æˆ·æ­¤è¡Œä¸ºçš„æ ¹æœ¬åŸå› ã€‚ä¸å»ºè®®çº¯ç²¹ä¸ºäº†é¿å…å¯ä¸²è¡ŒåŒ–é—®é¢˜è€Œå°† pipeline çš„æŒä¹…æ€§è®¾ç½®è®¾ç½®ä¸ºæ€§èƒ½ä¼˜åŒ–ã€‚</p></blockquote><ul><li><a href="https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/">https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/</a></li><li><a href="https://www.cloudbees.com/blog/top-10-best-practices-jenkins-pipeline-plugin">https://www.cloudbees.com/blog/top-10-best-practices-jenkins-pipeline-plugin</a></li><li><a href="https://github.com/jenkinsci/pipeline-examples/blob/master/docs/BEST_PRACTICES.md">https://github.com/jenkinsci/pipeline-examples/blob/master/docs/BEST_PRACTICES.md</a></li><li><a href="https://devopscook.com/jenkinsfile-best-practices/">https://devopscook.com/jenkinsfile-best-practices/</a></li></ul><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022 å¹´ç»ˆæ€»ç»“</title>
      <link href="/2022/12/2022-summary/"/>
      <url>/2022/12/2022-summary/</url>
      
        <content type="html"><![CDATA[<p>æ—¶é—´è¿‡å¾—å¥½å¿«ï¼Œåˆè¿‡å®Œäº†ä¸€å¹´ã€‚</p><p>ä»Šå¹´æƒ³å†™ä¸€äº›æ€»ç»“å›é¡¾ä¸€ä¸‹è¿‡å»çš„ä¸€å¹´å‘ç”Ÿåœ¨è‡ªå·±èº«ä¸Šçš„é‡è¦äº‹ä»¶ã€‚</p><p>ç”±äº 2021 å¹´æ²¡æœ‰å†™å¹´ç»ˆæ€»ç»“ï¼Œ2021 å¹´åœ¨æˆ‘çš„è„‘æµ·é‡Œå·²ç»å˜åŒ–æ¨¡ç³Šï¼Œæˆ‘åªèƒ½å‡­ç€ä¸€äº›ç…§ç‰‡å’Œæ—¥è®°æ‰æƒ³èµ·æ¥çš„ä¸€äº›äº‹æƒ…ã€‚çœ‹æ¥ä»¥åçš„å¹´ç»ˆæ€»ç»“ä¸èƒ½è½ä¸‹ã€‚</p><h2 id="å›é¡¾-2021"><a href="#å›é¡¾-2021" class="headerlink" title="å›é¡¾ 2021"></a>å›é¡¾ 2021</h2><p>2021 å¹´æˆ‘çš„ä¸ªäººå…³é”®è¯æ˜¯â€œæœ€åçš„æ½‡æ´’â€ã€‚</p><p>å¹´åˆæˆ‘æ¬å®¶äº†ï¼Œæ–°å®¶ç¦»å…¬å¸å¼€è½¦åªè¦åå‡ åˆ†é’Ÿã€‚è¿™èŠ‚çœäº†å¾ˆå¤šèŠ±åœ¨è·¯ä¸Šçš„æ—¶é—´ï¼Œå‘¨æœ«æˆ‘ä¹Ÿæ›´æ„¿æ„å¾€å…¬å¸è·‘ã€‚</p><p>å››æœˆï¼Œç¬¬ä¸€æ¬¡ Fork å¹¶å¼€å§‹ç»´æŠ¤ <a href="https://github.com/cpp-linter/cpp-linter-action">cpp-linter-action</a> è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œå¹¶ä¸”å¸å¼•äº†å¦å¤–ä¸€ä¸ªå¼€å‘è€…ä¸æˆ‘å…±åŒç»´æŠ¤ã€‚</p><p>ä¸ƒæœˆï¼Œå¹¿é¹¿å²›æ—…è¡Œ</p><p>å…«æœˆï¼Œè€å©†æ€€å­•äº†ã€‚ç°åœ¨å›çœ‹ 2021 çš„ç…§ç‰‡ï¼Œä¸¤ä¸ªäººçš„ç”Ÿæ´»çœŸçš„æ˜¯å¤ªè‡ªåœ¨å’Œæ½‡æ´’äº†ï¼Œä¸¤äººåƒé¥±å…¨å®¶ä¸é¥¿ã€‚</p><p>åä¸€æœˆï¼Œè¢«å‘ŠçŸ¥ä¸ºæ¬¡å¯†æ¥ï¼Œè¦æ±‚å»é…’åº—éš”ç¦»ã€‚å°±è¿™æ ·æˆ‘ä»¬è¢«æ‹‰å»é…’åº—éš”ç¦»äº†ä¸€å‘¨ï¼Œç„¶åå›å®¶ååˆè¦æ±‚éš”ç¦»ä¸€å‘¨ã€‚ç°åœ¨æƒ³æƒ³å‘µå‘µä¸å¯æ€è®®ï¼</p><h2 id="å›é¡¾-2022"><a href="#å›é¡¾-2022" class="headerlink" title="å›é¡¾ 2022"></a>å›é¡¾ 2022</h2><p>2022 çš„æˆ‘ä¸ªäººçš„å…³é”®è¯å°±æ˜¯â€œè´£ä»»â€ã€‚</p><p>äº”æœˆï¼Œéšç€å¥³å„¿çš„å‡ºç”Ÿçš„ï¼Œé™¤äº†å·¥ä½œä¹‹å¤–ï¼Œå‡ ä¹æ‰€æœ‰çš„æ—¶é—´éƒ½èŠ±åœ¨äº†ç…§é¡¾å®¶åº­æ–¹é¢ï¼Œç•™ç»™æˆ‘å­¦ä¹ å’Œè¾“å‡ºæ—¶é—´å¯¥å¯¥æ— å‡ äº†ã€‚</p><p>å­©å­çš„å‡ºç”Ÿæœ€ç›´æ¥çš„æ„Ÿå—å°±æ˜¯èº«ä¸Šè´£ä»»çš„é‡å¤§ï¼Œå…»è‚²ä¸€ä¸ªå­©å­ä¸ä½†éœ€è¦ä»˜å‡ºæ—¶é—´è¿˜æœ‰é‡‘é’±ï¼Œæˆ‘çœŸæ­£åœ°æˆä¸ºäº†ä¸Šæœ‰è€ä¸‹æœ‰å°çš„ä¸­å¹´äººäº†ï¼Œä¸€åˆ»éƒ½ä¸èƒ½å€’ä¸‹ã€‚</p><p>ä»¥å‰è§‰å¾—è‡ªå·±æ— æ‰€ä¸èƒ½ï¼Œæœªæ¥å¯æœŸï¼Œç°åœ¨è§‰å¾—è‡ªå·±è‚©è†€ä¸Šçš„è´£ä»»é‡å¤§ï¼Œä»æ­¤å†ä¹Ÿæ— æ³•èººå¹³äº†ã€‚</p><p>å…­æœˆè‡³ä¹æœˆï¼Œé™ªäº§å‡ã€‚å½“å…¨èŒå¥¶çˆ¸ï¼Œåœ¨å­©å­çš„ç¡è§‰çš„æ—¶å€™æ”¾å¼ƒäº†ä¸€äº›ä¼‘æ¯æ—¶é—´ç”¨æ¥è¯»ä¹¦å’Œå¼€æºã€‚</p><p>åæœˆè‡³åäºŒæœˆï¼Œå›å½’å²—ä½ï¼Œå› ä¸ºç–«æƒ…å…³ç³»å¤§éƒ¨æ—¶é—´éƒ½åœ¨å®¶åŠå…¬ã€‚ä¸Šç­å·¥ä½œï¼Œä¸‹ç­çœ‹å¨ƒï¼Œå†ä¹Ÿæ²¡æœ‰å¤§å—æ—¶é—´æ¥å­¦ä¹ å’Œè¾“å‡ºäº†ã€‚</p><p>å› æ­¤æˆ‘ä»Šå¹´è¾“å‡ºçš„æ–‡ç« å¾ˆå°‘ï¼Œåšå®¢ä¸Šä¸€å…±å‘å¸ƒäº† 19 ç¯‡ï¼Œå…¶ä¸­å…¬ä¼—å·åªè¾“å‡ºäº† 11 ç¯‡æ–‡ç« ã€‚è¿™äº›è¾“å‡ºç»å¤§å¤šæ•°å‘ç”Ÿåœ¨ä¸ŠåŠå¹´å­©å­è¿˜æ²¡å‡ºç”Ÿçš„æ—¶å€™ã€‚</p><p>åœ¨ä¸šä½™æ—¶é—´ç›¸è¾ƒäºè¾“å‡ºæ–‡ç« ï¼Œç¬¬ä¸€ä¼˜å…ˆçº§è¿˜æ˜¯åœ¨å¼€æºé¡¹ç›®ï¼Œè¿™èƒ½è®©æˆ‘å­¦åˆ°æ›´å¤šã€‚æˆ‘åœ¨ <a href="https://github.com/cpp-linter">cpp-linter</a> è¿™ä¸ªé¡¹ç›®ä¸ŠèŠ±äº†æ¯”è¾ƒå¤šçš„ä¸šä½™æ—¶é—´ï¼Œç›®å‰ <a href="https://github.com/cpp-linter/cpp-linter-action">cpp-linter-action</a> å·²ç»å…¶ä»–è¢«è¶…è¿‡ 100 ä¸ªå…¶ä»–é¡¹ç›®æ‰€ä½¿ç”¨ï¼ˆä¾èµ–ï¼‰ï¼Œæˆ‘å¸Œæœ›èƒ½æŠŠ cpp-linter åšæˆæ‰€æœ‰ C&#x2F;C++ é¡¹ç›®çš„é¦–é€‰çš„ä»£ç æ ¼å¼åŒ–å’Œé™æ€æ£€æŸ¥å·¥å…·ã€‚</p><h2 id="å±•æœ›-2023"><a href="#å±•æœ›-2023" class="headerlink" title="å±•æœ› 2023"></a>å±•æœ› 2023</h2><ul><li>å·¥ä½œå’Œå®¶åº­çš„å¹³è¡¡ï¼Œå¸Œæœ›å¥³å„¿å¥åº·æˆé•¿ï¼Œæ—©ç‚¹ç¡æ•´è§‰ï¼Œè¿™æ ·çˆ¸çˆ¸å¯ä»¥æ™šä¸Šå·¥ä½œå’Œå­¦ä¹ äº†</li><li>è‹±è¯­å’ŒæŠ€æœ¯èƒ½å¤Ÿæœ‰è¿›æ­¥ï¼Œæ¯”å¦‚é€šè¿‡ TOEIC Tests å’ŒåŠ å…¥çŸ¥åçš„ Python Org å’Œå­¦ä¹  Cloud æ–¹é¢çš„æŠ€æœ¯</li><li>è¶…è¿‡ 2022 å¹´åœ¨åšå®¢å’Œå…¬ä¼—å·çš„è¾“å‡ºæ–‡ç« æ•°ï¼Œå®Œæˆ 24ï¼ˆåšå®¢ï¼‰+ 12ï¼ˆå…¬ä¼—å·ï¼‰è¦æ±‚ä¸é«˜å§</li><li>ä¿æŒèº«ä½“å¥åº·ï¼Œæ¢å¤æ¸¸æ³³ã€è¶³çƒã€è¿åŠ¨ï¼Œè®©ä½“é‡å›åˆ° 160 æ–¤ä»¥ä¸‹</li></ul><h2 id="è¿‡å»çš„å¹´ç»ˆæ€»ç»“"><a href="#è¿‡å»çš„å¹´ç»ˆæ€»ç»“" class="headerlink" title="è¿‡å»çš„å¹´ç»ˆæ€»ç»“"></a>è¿‡å»çš„å¹´ç»ˆæ€»ç»“</h2><blockquote><p><a href="https://shenxianpeng.github.io/2020/12/2020-summary/">2020 å¹´ç»ˆæ€»ç»“</a><br><a href="https://shenxianpeng.github.io/2019/12/2019-summary/">2019 å¹´ç»ˆæ€»ç»“</a><br><a href="https://shenxianpeng.github.io/2018/12/from-qa-to-dev/">2018 ä»æµ‹è¯•åˆ°å¼€å‘çš„äº”ä¸ªæœˆ</a></p></blockquote><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Thought </tag>
            
            <tag> Summary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to implement [skip ci] for Jenkins multi-branch pipeline</title>
      <link href="/2022/10/jenkins-skip-ci/"/>
      <url>/2022/10/jenkins-skip-ci/</url>
      
        <content type="html"><![CDATA[<p>When I want to implement [skip ci] or [ci skip] for Jenkins multi-branch pipeline, the existing plugin seems broken.</p><ul><li><a href="https://issues.jenkins.io/browse/JENKINS-35509">JENKINS-35509</a></li><li><a href="https://issues.jenkins.io/browse/JENKINS-34130">JENKINS-34130</a></li></ul><blockquote><p>My advice: try not to use the Jenkins plugin if possible.</p></blockquote><p>Good, itâ€™s time to implement [skip ci] myself.</p><p>If you like me used Jenkins shared library, you can create a function like <code>SkipCI</code> from <code>src/org/cicd/utils.groovy</code>, then other jobs can reused this function.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/org/cicd/utils.groovy</span></span><br><span class="line"><span class="keyword">def</span> SkipCI(number = <span class="string">&quot;all&quot;</span>)&#123;</span><br><span class="line">  <span class="keyword">def</span> statusCodeList = []</span><br><span class="line"></span><br><span class="line">  String[] keyWords = [<span class="string">&#x27;ci skip&#x27;</span>, <span class="string">&#x27;skip ci&#x27;</span>] <span class="comment">// add more keywords if need.</span></span><br><span class="line">  keyWords.each &#123; keyWord -&gt;</span><br><span class="line">    <span class="keyword">def</span> statusCode = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">if</span> (number == <span class="string">&quot;all&quot;</span>) &#123;</span><br><span class="line">      statusCode = sh <span class="attr">script:</span> <span class="string">&quot;git log --oneline --all | grep \&#x27;$&#123;keyWord&#125;\&#x27;&quot;</span>, <span class="attr">returnStatus:</span> <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      statusCode = sh <span class="attr">script:</span> <span class="string">&quot;git log --oneline -n $&#123;number&#125; | grep \&#x27;$&#123;keyWord&#125;\&#x27;&quot;</span>, <span class="attr">returnStatus:</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    statusCodeList.add(statusCode)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (statusCodeList.contains(<span class="number">0</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Then I can call this function from other jobs.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// The following is not the complete code, it is just sample code and may not be run successfully.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.cicd.utils</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> call()&#123;</span><br><span class="line"></span><br><span class="line">  pipeline &#123;</span><br><span class="line">    agent &#123;</span><br><span class="line">      node &#123;</span><br><span class="line">        label <span class="string">&#x27;linux&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    parameters &#123;</span><br><span class="line">      booleanParam <span class="attr">defaultValue:</span> <span class="literal">true</span>, <span class="attr">name:</span> <span class="string">&#x27;Build&#x27;</span>, <span class="attr">description:</span> <span class="string">&#x27;Uncheck to skip build.&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> utils = <span class="keyword">new</span> org.cicd.utils()</span><br><span class="line"></span><br><span class="line">    stage(<span class="string">&quot;Checkout&quot;</span>) &#123;</span><br><span class="line">      checkout scm</span><br><span class="line"></span><br><span class="line">      <span class="comment">// just check the latest commit message.</span></span><br><span class="line">      SkipCI = utils.SkipCI(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stage(<span class="string">&quot;Build&quot;</span>)&#123;</span><br><span class="line">      when &#123;</span><br><span class="line">        beforeAgent <span class="literal">true</span></span><br><span class="line">        expression &#123; <span class="keyword">return</span> params.Build &amp;&amp; !SkipCI &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      steps &#123;</span><br><span class="line">        script &#123;</span><br><span class="line">          sh <span class="string">&quot;make build&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Please let me know if any questions or suggestions.</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to fix &quot;Temporary Failure in name resolution&quot; in WSL</title>
      <link href="/2022/09/fix-wsl-networking-issue/"/>
      <url>/2022/09/fix-wsl-networking-issue/</url>
      
        <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>I have encountered a problem when I ping google.com failed and return some error like â€œTemporary failure in name resolutionâ€</p><h2 id="How-to-fix"><a href="#How-to-fix" class="headerlink" title="How to fix"></a>How to fix</h2><ol><li><p>Inside WSL2, create or append file: <code>/etc/wsl.conf</code></p></li><li><p>Put the following lines in the file in order to ensure the your DNS changes do not get blown away</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">tee</span> /etc/wsl.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">[network]</span></span><br><span class="line"><span class="string">generateResolvConf = false</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li></ol><span id="more"></span><ol start="3"><li>In a cmd windows (!!), run <code>wsl --shutdown</code></li><li>Start WSL2</li><li>Run the following inside WSL2 (line with search is optional)</li></ol>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> -rf /etc/resolv.conf</span><br><span class="line">sudo <span class="built_in">tee</span> /etc/resolv.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">search yourbase.domain.local</span></span><br><span class="line"><span class="string">nameserver 8.8.8.8</span></span><br><span class="line"><span class="string">nameserver 1.1.1.1</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>  In my case, I can remove <code>/etc/resolv.conf</code> and error is â€œrm: cannot remove â€˜&#x2F;etc&#x2F;resolv.confâ€™: Operation not permittedâ€</p>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># use following command instead fixed.</span></span><br><span class="line">sudo chattr -a -i /etc/resolv.conf</span><br></pre></td></tr></table></figure><h2 id="Reference-links"><a href="#Reference-links" class="headerlink" title="Reference links"></a>Reference links</h2><blockquote><p><a href="https://askubuntu.com/questions/1192347/temporary-failure-in-name-resolution-on-wsl">https://askubuntu.com/questions/1192347/temporary-failure-in-name-resolution-on-wsl</a><br><a href="https://askubuntu.com/questions/125847/un-removable-etc-resolv-conf">https://askubuntu.com/questions/125847/un-removable-etc-resolv-conf</a></p></blockquote><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Restrict others from login your important Linux machine</title>
      <link href="/2022/09/restrict-connect-server/"/>
      <url>/2022/09/restrict-connect-server/</url>
      
        <content type="html"><![CDATA[<p>If you have a critical machine like your teamâ€™s CI server that runs on Linux, so you donâ€™t want every members in your group to access it.</p><p>Modifying this setting <code>/etc/security/access.conf</code> on Linux can do it.</p><h2 id="How-to-setup"><a href="#How-to-setup" class="headerlink" title="How to setup"></a>How to setup</h2><p>I commented out the access settings for TEAM A, and add some user accounts can access.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#+ : (SRV_WW_TEAM_A_CompAdmin) : ALL</span></span><br><span class="line">+ : shenx, map, xiar : ALL</span><br></pre></td></tr></table></figure><span id="more"></span><p><strong>Be careful not to restrict everyone including yourself.</strong></p><p>It would be best to allow several people can also access it to prevent any issues to log in with your account or you leave the organization.</p><h2 id="Letâ€™s-test"><a href="#Letâ€™s-test" class="headerlink" title="Letâ€™s test"></a>Letâ€™s test</h2><p>Then when I try to use another account not in the list to access this machine and the connection shows closed.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh <span class="built_in">test</span>@devciserver.organization.com</span><br><span class="line"><span class="built_in">test</span>@devciserver.organization.com<span class="string">&#x27;s password:</span></span><br><span class="line"><span class="string">Connection closed by 10.84.17.119 port 22</span></span><br></pre></td></tr></table></figure><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C/C++ ä»£ç æ ¼å¼åŒ–å’Œé™æ€åˆ†ææ£€æŸ¥çš„ä¸€ç«™å¼å·¥ä½œæµ Cpp Linter</title>
      <link href="/2022/08/cpp-linter/"/>
      <url>/2022/08/cpp-linter/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡æ˜¯å…³äº C&#x2F;C++ ä»£ç æ ¼å¼åŒ–å’Œé™æ€åˆ†ææ£€æŸ¥çš„å®è·µåˆ†äº«ã€‚</p><p>ç›®å‰ C&#x2F;C++ è¯­è¨€çš„ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥å·¥å…·ä½¿ç”¨çš„æœ€ä¸ºå¹¿æ³›çš„æ˜¯ <a href="https://llvm.org/">LLVM</a> é¡¹ç›®ä¸­çš„ <a href="https://clang.llvm.org/docs/ClangFormat.html">Clang-Format</a> å’Œ <a href="https://clang.llvm.org/extra/clang-tidy/">Clang-Tidy</a>ã€‚</p><blockquote><p>LLVM é¡¹ç›®æ˜¯æ¨¡å—åŒ–å’Œå¯é‡ç”¨çš„ç¼–è¯‘å™¨å’Œå·¥å…·é“¾æŠ€æœ¯çš„é›†åˆã€‚</p></blockquote><p>å¯¹äº C&#x2F;C++ ä»£ç æ ¼å¼åŒ–å’Œé™æ€åˆ†ææ£€æŸ¥ç”¨åˆ°æ˜¯ LLVM é¡¹ç›®ä¸­ clang-format å’Œ clang-tidyï¼Œæ”¾åœ¨ä¸€èµ·æˆ‘ä»¬ç§°å®ƒä¸º clang-toolsã€‚</p><p>è™½ç„¶æˆ‘ä»¬æœ‰äº†å·¥å…·ï¼Œä½†<strong>å¦‚ä½•æŠŠå·¥å…·æ›´å¥½çš„é›†æˆåˆ°æˆ‘ä»¬çš„å·¥ä½œæµä¸­</strong>æ‰æ˜¯æœ¬ç¯‡é‡ç‚¹è¦è®¨è®ºçš„ã€‚</p><p><a href="https://github.com/cpp-linter">cpp-linter</a> ç»„ç»‡çš„è¯ç”Ÿå°±æ˜¯ä¸º C&#x2F;C++ ä»£ç æ ¼å¼åŒ–å’Œé™æ€åˆ†ææ£€æŸ¥æä¾›ä¸€ç«™å¼çš„å·¥ä½œæµï¼ŒåŒ…æ‹¬ï¼š</p><ol><li>æ–¹ä¾¿ä¸‹è½½ clang-toolsï¼Œæä¾›äº† Docker images å’Œ binaries ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼›</li><li>æ–¹ä¾¿ä¸å·¥ä½œæµè¿›è¡Œé›†æˆï¼ŒåŒ…æ‹¬ä¸ CI ä»¥åŠ git hooks çš„é›†æˆã€‚</li></ol><p>ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ clang-tools ä¸‹è½½å·¥å…·ï¼Œä»¥åŠé›†æˆåˆ°å·¥ä½œæµä¸­ã€‚</p><span id="more"></span><h2 id="clang-tools-Docker-images"><a href="#clang-tools-Docker-images" class="headerlink" title="clang-tools Docker images"></a>clang-tools Docker images</h2><p>å¦‚æœä½ æƒ³é€šè¿‡ Docker æ¥ä½¿ç”¨ clang-format å’Œ clang-tidyï¼Œ<a href="https://github.com/cpp-linter/clang-tools">clang-tools</a> é¡¹ç›®æ˜¯ä¸“é—¨ç”¨æ¥æä¾› Docker é•œåƒçš„ã€‚</p><p>åªè¦ä¸‹è½½ clang-tools Docker é•œåƒï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ clang-format å’Œ clang-tidy äº†ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ clang-format ç‰ˆæœ¬</span></span><br><span class="line">$ docker run xianpengshen/clang-tools:12 clang-format --version</span><br><span class="line">Ubuntu clang-format version 12.0.0-3ubuntu1~20.04.4</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–ä»£ç  (helloworld.c åœ¨ä»“åº“çš„ demo ç›®å½•ä¸‹)</span></span><br><span class="line">$ docker run -v <span class="variable">$PWD</span>:/src xianpengshen/clang-tools:12 clang-format --dry-run -i helloworld.c</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ clang-tidy ç‰ˆæœ¬</span></span><br><span class="line">$ docker run xianpengshen/clang-tools:12 clang-tidy --version</span><br><span class="line">LLVM (http://llvm.org/):</span><br><span class="line">  LLVM version 12.0.0</span><br><span class="line"></span><br><span class="line">  Optimized build.</span><br><span class="line">  Default target: x86_64-pc-linux-gnu</span><br><span class="line">  Host CPU: cascadelake</span><br><span class="line"><span class="comment"># è¯Šæ–­ä»£ç  (helloworld.c åœ¨ä»“åº“çš„ demo ç›®å½•ä¸‹)</span></span><br><span class="line">$ docker run -v <span class="variable">$PWD</span>:/src xianpengshen/clang-tools:12 clang-tidy helloworld.c \</span><br><span class="line">-checks=boost-*,bugprone-*,performance-*,readability-*,portability-*,modernize-*,clang-analyzer-cplusplus-*,clang-analyzer-*,cppcoreguidelines-*</span><br></pre></td></tr></table></figure><h2 id="clang-tools-binaries"><a href="#clang-tools-binaries" class="headerlink" title="clang-tools binaries"></a>clang-tools binaries</h2><p>å¦‚æœä½ éœ€è¦ä½¿ç”¨ clang-tools binariesï¼Œä»¥ Windows ä¸ºä¾‹ï¼Œé€šå¸¸ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„ clang-tools éœ€è¦å…ˆå®‰è£… LLVM è¿™ä¸ªå¤§çš„å®‰è£…åŒ…æ‰èƒ½è·å¾— clang-format &amp; clang-tidy è¿™äº›å·¥å…·ï¼›åœ¨ Linux ä¸Šä¼šæ–¹ä¾¿å¾ˆå¤šï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤æ¥ä¸‹è½½ï¼Œä½†å¦‚æœæƒ³ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„ clang-format &amp; clang-tidy å¯èƒ½è¦é¢ä¸´æ‰‹åŠ¨ä¸‹è½½å’Œå®‰è£…ã€‚</p><p><a href="https://github.com/cpp-linter/clang-tools-pip">clang-tools-pip</a> æä¾›å¹¶æ”¯æŒåœ¨ Windowsï¼ŒLinuxï¼ŒMacOs ä¸Šé€šè¿‡å‘½ä»¤è¡Œä¸‹è½½ä»»ä½•æŒ‡å®šç‰ˆæœ¬çš„ clang-tools å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>åªéœ€è¦ä½¿ç”¨ <code>pip</code> å®‰è£… <code>clang-tools</code> ï¼ˆå³ <code>pip install clang-tools</code>ï¼‰åï¼Œç„¶åé€šè¿‡ <code>clang-tools</code> å‘½ä»¤å°±å¯ä»¥å®‰è£…ä»»ä½•ç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶äº†ã€‚</p><p>ä¾‹å¦‚ï¼Œå®‰è£… clang-tools ç‰ˆæœ¬ 13ï¼š</p><p><code>$ clang-tools --install 13</code></p><p>ä¹Ÿå¯ä»¥å°†å®ƒå®‰è£…åˆ°æŒ‡å®šç›®å½•ä¸‹é¢ï¼š</p><p><code>$ clang-tools --install 13 --directory .</code></p><p>å®‰è£…æˆåŠŸåï¼Œå¯ä»¥æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ clang-format-13 --version</span><br><span class="line">clang-format version 13.0.0</span><br><span class="line"></span><br><span class="line">$ clang-tidy-13 --version</span><br><span class="line">LLVM (http://llvm.org/):</span><br><span class="line">  LLVM version 13.0.0</span><br><span class="line">  Optimized build.</span><br><span class="line">  Default target: x86_64-unknown-linux-gnu</span><br><span class="line">  Host CPU: skylake</span><br></pre></td></tr></table></figure><p><code>clang-tools</code> CLI è¿˜æä¾›äº†å…¶ä»–é€‰é¡¹ï¼Œæ¯”å¦‚è‡ªåŠ¨å¸®ä½ åˆ›å»ºé“¾æ¥ç­‰ï¼Œå¯ä»¥æŸ¥çœ‹å®ƒçš„ CLI <a href="https://cpp-linter.github.io/clang-tools-pip/cli_args.html">æ–‡æ¡£</a>æ¥è·å¾—å¸®åŠ©ã€‚</p><h2 id="æŠŠ-clang-tools-é›†æˆåˆ°å·¥ä½œæµ"><a href="#æŠŠ-clang-tools-é›†æˆåˆ°å·¥ä½œæµ" class="headerlink" title="æŠŠ clang-tools é›†æˆåˆ°å·¥ä½œæµ"></a>æŠŠ clang-tools é›†æˆåˆ°å·¥ä½œæµ</h2><p>ä¸Šé¢ä»‹ç»äº†æ–¹ä¾¿ä¸‹è½½ clang-tools çš„ Docker images å’Œ binaries è¿™ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä½•æŠŠå®ƒä»¬é›†æˆåˆ°å·¥ä½œæµä¸­æ˜¯æˆ‘ä»¬æœ€ç»ˆæ‰€å…³å¿ƒçš„ã€‚</p><p>å½“å‰çš„ä¸»æµ IDE å¯ä»¥é€šè¿‡æ’ä»¶çš„æ–¹å¼æ¥ä½¿ç”¨ clang-format å’Œ clang-tidyï¼Œä½†è¿™æ ·çš„é—®é¢˜æ˜¯ï¼š</p><ol><li>ä¸åŒçš„å¼€å‘å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„ IDEï¼Œè¿™æ ·åœ¨ä¸åŒçš„ IDE ä¸Šå®‰è£…æ’ä»¶éœ€è¦æ¯”è¾ƒé«˜çš„å­¦ä¹ æˆæœ¬ï¼›</li><li>æ²¡æ³•ä¿è¯æ‰€æœ‰å¼€å‘äººå‘˜åœ¨æäº¤ä»£ç çš„æ—¶å€™éƒ½ä¼šå»æ‰§è¡Œ Clang-Format æˆ– Clang-Tidyã€‚</li></ol><p>é‚£ä¹ˆæ€æ ·ç¡®ä¿æ¯æ¬¡æäº¤ä»£ç éƒ½åšäº† Clang-Format æˆ– Clang-Tidy æ£€æŸ¥å‘¢ï¼Ÿ</p><ol><li><a href="https://github.com/cpp-linter/cpp-linter-action">cpp-linter-action</a> æä¾›äº†é€šè¿‡ CI è¿›è¡Œæ£€æŸ¥ï¼Œå½“å‘ç°æ²¡æœ‰æ ¼å¼åŒ–æˆ–æœ‰è¯Šæ–­é”™è¯¯çš„ä»£ç æ—¶ CI ä¼šå¤±è´¥ï¼Œæ¥é˜²æ­¢åˆå¹¶åˆ°ä¸»åˆ†çš„ä»£ç æ²¡æœ‰é€šè¿‡ä»£ç æ£€æŸ¥ï¼›</li><li><a href="https://github.com/cpp-linter/cpp-linter-hooks">cpp-linter-hooks</a> é€šè¿‡ git hook åœ¨æäº¤ä»£ç çš„æ—¶å€™è‡ªåŠ¨è¿è¡Œ clang-format å’Œ clang-tidyï¼Œå¦‚æœä¸ç¬¦åˆè§„èŒƒåˆ™æäº¤å¤±è´¥ï¼Œå¹¶æç¤ºå¹¶è‡ªåŠ¨æ ¼å¼åŒ–ã€‚</li></ol><h2 id="cpp-linter-action-åœ¨ä»£ç åˆå¹¶å‰åšè‡ªåŠ¨æ£€æŸ¥"><a href="#cpp-linter-action-åœ¨ä»£ç åˆå¹¶å‰åšè‡ªåŠ¨æ£€æŸ¥" class="headerlink" title="cpp-linter-action åœ¨ä»£ç åˆå¹¶å‰åšè‡ªåŠ¨æ£€æŸ¥"></a>cpp-linter-action åœ¨ä»£ç åˆå¹¶å‰åšè‡ªåŠ¨æ£€æŸ¥</h2><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ GitHubï¼Œé‚£ä¹ˆéå¸¸æ¨èä½ ä½¿ç”¨ <a href="https://github.com/cpp-linter/cpp-linter-action">cpp-linter-action</a> è¿™ä¸ª GitHub Actionã€‚</p><blockquote><p>ç›®å‰ <a href="https://github.com/cpp-linter/cpp-linter">cpp-linter</a> è¿˜æ²¡æœ‰è·Ÿå…¶ä»–é™¤ GitHub ä»¥å¤–çš„ SCM åš API é›†æˆã€‚</p></blockquote><p>ä»¥ä¸‹æ˜¯å®ƒçš„ä¸€äº›é‡è¦ç‰¹æ€§ï¼š</p><ol><li>è¿è¡Œç»“æœæ”¯æŒ Annotations å’Œ Thread Comment ä¸¤ç§æ–¹å¼å±•ç¤º</li><li>æ”¯æŒ GitHub çš„ public å’Œ private ä»“åº“</li><li>æ”¯æŒç»å¤§å¤šæ•° Clang ç‰ˆæœ¬</li><li>è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ <a href="https://github.com/cpp-linter/cpp-linter-action#optional-inputs">optional-inputs</a></li></ol><p>ä½¿ç”¨è¿™ä¸ª Action åªéœ€è¦åœ¨ <code>.github/workflows/</code> ä¸‹é¢åˆ›å»ºä¸€ä¸ª cpp-linter.ymlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><blockquote><p>å½“ç„¶ä¹Ÿå¯ä»¥æŠŠä¸‹é¢çš„é…ç½®åŠ åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ Workflowï¼Œä¾‹å¦‚ buildã€‚</p></blockquote><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">cpp-linter</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">opened</span>, <span class="string">reopened</span>]</span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">cpp-linter:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">cpp-linter/cpp-linter-action@v1</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">linter</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">style:</span> <span class="string">file</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Fail</span> <span class="string">fast?!</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">steps.linter.outputs.checks-failed</span> <span class="string">&gt;</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          echo &quot;Some files failed the linting checks!&quot;</span></span><br><span class="line"><span class="string">          exit 1</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå‘ç°å­˜åœ¨æ²¡æœ‰è¿›è¡Œæ ¼å¼åŒ–æˆ–æ˜¯é™ä»£ç æ€æ£€æŸ¥ï¼ŒCI workflow ä¼šå¤±è´¥ï¼Œå¹¶ä¸”ä¼šæœ‰å¦‚ä¸‹æ³¨é‡Šè¯´æ˜ï¼Œannotations é»˜è®¤æ˜¯å¼€å¯çš„ã€‚</p><p><img src="/2022/08/cpp-linter/annotations.png" alt="annotations"></p><p>å¦‚æœå¼€å¯äº† Thread Comment é€‰é¡¹ï¼ˆå³ <code>thread-comments: true</code>ï¼‰å°±ä¼šå°†åœ¨ Pull Request ä¸­è‡ªåŠ¨æ·»åŠ å¦‚ä¸‹é”™è¯¯è¯„è®ºã€‚</p><p><img src="/2022/08/cpp-linter/comment.png" alt="comment"></p><p>ç›®å‰å·²ç»æœ‰å¾ˆå¤šçŸ¥åé¡¹ç›®ä¾èµ–è¿™ä¸ª Actionï¼Œå®ƒåœ¨ GitHub Marketplace ä¸Šé¢æœç´¢å®ƒçš„æ’åä¹Ÿéå¸¸é å‰ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚</p><blockquote><p>æ³¨ï¼šannotations å’Œ comment è¿™ä¸¤ä¸ªåŠŸèƒ½ç›®å‰åªæ”¯æŒ GitHubï¼Œè¯¥é¡¹ç›®æœªæ¥è€ƒè™‘æ”¯æŒå…¶ä»– SCMï¼Œåƒ Bitbucketï¼ŒGitLabã€‚</p></blockquote><h2 id="cpp-linter-hooks-åœ¨æäº¤ä»£ç æ—¶è‡ªåŠ¨æ£€æŸ¥"><a href="#cpp-linter-hooks-åœ¨æäº¤ä»£ç æ—¶è‡ªåŠ¨æ£€æŸ¥" class="headerlink" title="cpp-linter-hooks åœ¨æäº¤ä»£ç æ—¶è‡ªåŠ¨æ£€æŸ¥"></a>cpp-linter-hooks åœ¨æäº¤ä»£ç æ—¶è‡ªåŠ¨æ£€æŸ¥</h2><p><a href="https://github.com/cpp-linter/cpp-linter-hooks">cpp-linter-hooks</a> æ˜¯é€šè¿‡ git hook åœ¨æäº¤ä»£ç æ—¶åšè‡ªåŠ¨æ£€æŸ¥ï¼Œè¿™ç§æ–¹å¼ä¸é™åˆ¶ä½¿ç”¨ä»»ä½• SCMã€‚</p><p>åªéœ€è¦åœ¨é¡¹ç›®ä»“åº“ä¸­æ·»åŠ ä¸€ä¸ª <code>.pre-commit-config.yaml</code> é…ç½®æ–‡ä»¶ï¼Œç„¶åå°† <a href="https://github.com/cpp-linter/cpp-linter-hooks">cpp-linter-hooks</a> è¿™ä¸ª hook æ·»åŠ åˆ° <code>.pre-commit-config.yaml</code> ä¸­ï¼Œå…·ä½“è®¾ç½®å¦‚ä¸‹ï¼š</p><blockquote><p><code>.pre-commit-config.yaml</code> æ˜¯ <a href="https://pre-commit.com/"><code>pre-commit</code></a> framework çš„é»˜è®¤é…ç½®æ–‡ä»¶ã€‚</p></blockquote><ol><li><p>å®‰è£… pre-commit</p> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install pre-commit</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºé…ç½®æ–‡ä»¶ <code>.pre-commit-config.yaml</code>ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p> <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">repos:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">repo:</span> <span class="string">https://github.com/cpp-linter/cpp-linter-hooks</span></span><br><span class="line">  <span class="attr">rev:</span> <span class="string">v0.2.1</span></span><br><span class="line">  <span class="attr">hooks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">clang-format</span></span><br><span class="line">      <span class="attr">args:</span> [<span class="string">--style=file</span>]  <span class="comment"># to load .clang-format</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">clang-tidy</span></span><br><span class="line">      <span class="attr">args:</span> [<span class="string">--checks=.clang-tidy</span>] <span class="comment"># path/to/.clang-tidy</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œçš„ file æ˜¯æŒ‡ <code>.clang-format</code>, clang-format é»˜è®¤æ”¯æŒçš„ç¼–ç æ ¼å¼åŒ…æ‹¬ LLVM, GNU, Google, Chromium, Microsoft, Mozilla, WebKitï¼Œå¦‚æœéœ€è¦ç‰¹æ®Šè®¾ç½®å¯ä»¥åœ¨ä»“åº“çš„æ ¹ç›®å½•ä¸‹é¢åˆ›å»ºé…ç½®æ–‡ä»¶ <code>.clang-format</code>ã€‚åŒç†ï¼Œå¦‚æœé»˜è®¤çš„é™æ€åˆ†æè®¾ç½®ä¸æ»¡è¶³è¦æ±‚ï¼Œå¯ä»¥åœ¨ä»“åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.clang-tidy</code> é…ç½®æ–‡ä»¶ã€‚</p></blockquote><p> æ›´å¤šé…ç½®å¯ä»¥å‚è€ƒ <a href="https://github.com/cpp-linter/cpp-linter-hooks">README</a></p></li><li><p>å®‰è£… git hook è„šæœ¬</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pre-commit install</span><br><span class="line">pre-commit installed at .git/hooks/pre-commit</span><br></pre></td></tr></table></figure></li><li><p>ä¹‹åæ¯æ¬¡ <code>git commit</code> éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œ clang-format å’Œ chang-tidyã€‚</p><p> å¦‚æœæ£€æŸ¥åˆ°æ²¡æœ‰æ ¼å¼åŒ–æˆ–æœ‰é™æ€åˆ†æé”™è¯¯ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><p> chang-format çš„è¾“å‡º</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">clang-format.............................................................Failed</span><br><span class="line">- hook <span class="built_in">id</span>: clang-format</span><br><span class="line">- files were modified by this hook</span><br></pre></td></tr></table></figure><p> å¹¶è‡ªåŠ¨å¸®ä½ è¿›è¡Œæ ¼å¼åŒ–</p> <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="comment">--- a/testing/main.c</span></span><br><span class="line"><span class="comment">+++ b/testing/main.c</span></span><br><span class="line"><span class="meta">@@ -1,3 +1,6 @@</span></span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"><span class="deletion">-int main() &#123;for (;;) break; printf(&quot;Hello world!\n&quot;);return 0;&#125;</span></span><br><span class="line"><span class="deletion">-</span></span><br><span class="line"><span class="addition">+int main() &#123;</span></span><br><span class="line"><span class="addition">+  for (;;) break;</span></span><br><span class="line"><span class="addition">+  printf(&quot;Hello world!\n&quot;);</span></span><br><span class="line"><span class="addition">+  return 0;</span></span><br><span class="line"><span class="addition">+&#125;</span></span><br></pre></td></tr></table></figure><p> chang-tidy çš„è¾“å‡º</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">clang-tidy...............................................................Failed</span><br><span class="line">- hook <span class="built_in">id</span>: clang-tidy</span><br><span class="line">- <span class="built_in">exit</span> code: 1</span><br><span class="line"></span><br><span class="line">418 warnings and 1 error generated.</span><br><span class="line">Error <span class="keyword">while</span> processing /home/ubuntu/cpp-linter-hooks/testing/main.c.</span><br><span class="line">Suppressed 417 warnings (417 <span class="keyword">in</span> non-user code).</span><br><span class="line">Use -header-filter=.* to display errors from all non-system headers. Use -system-headers to display errors from system headers as well.</span><br><span class="line">Found compiler error(s).</span><br><span class="line">/home/ubuntu/cpp-linter-hooks/testing/main.c:3:11: warning: statement should be inside braces [readability-braces-around-statements]</span><br><span class="line">  <span class="keyword">for</span> (;;) <span class="built_in">break</span>;</span><br><span class="line">          ^</span><br><span class="line">          &#123;</span><br><span class="line">/usr/include/stdio.h:33:10: error: <span class="string">&#x27;stddef.h&#x27;</span> file not found [clang-diagnostic-error]</span><br><span class="line"><span class="comment">#include &lt;stddef.h&gt;</span></span><br><span class="line">        ^~~~~~~~~~</span><br></pre></td></tr></table></figure></li></ol><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>é€‰æ‹© CI è¿˜æ˜¯ git hookï¼Ÿ</p><ul><li>å¦‚æœä½ çš„å›¢é˜Ÿå·²ç»åœ¨ä½¿ç”¨ pre-commitï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨ git hook è¿™ç§æ–¹å¼ï¼Œåªéœ€è¦æ·»åŠ  <a href="https://github.com/cpp-linter/cpp-linter-hooks">cpp-linter-hooks</a> å³å¯</li><li>å¦‚æœä¸å¸Œæœ›å¼•å…¥ pre-commit åˆ™å¯ä»¥é€šè¿‡æ·»åŠ  CI æ¥è¿›è¡Œæ£€æŸ¥ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä¸¤ä¸ªéƒ½é€‰ã€‚</li></ul><p>cpp-linter organization æ˜¯æˆ‘åˆ›å»ºçš„ï¼Œç”± <a href="https://github.com/2bndy5">Brendan Doherty</a> å’Œæˆ‘ä¸ºä¸»è¦è´¡çŒ®è€…å…±åŒç»´æŠ¤çš„å¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬éƒ½æ˜¯è¿½æ±‚ä»£ç è´¨é‡ã€åŠ›æ±‚æ„å»ºæœ€å¥½çš„è½¯ä»¶çš„å¼€å‘è€…ï¼Œä¸ºæ­¤æˆ‘èŠ±è´¹äº†å¾ˆå¤šä¸šä½™æ—¶é—´åœ¨ä¸Šé¢ï¼Œä½†ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œåé¢æˆ‘ä¼šåˆ†äº«å…¶ä¸­ä¸€äº›æœ‰æ„æ€çš„å®ç°æ–¹å¼ã€‚</p><p>ç›®å‰ cpp-linter åœ¨ GitHub ä¸Šæä¾›äº†æœ€å¥½ç”¨çš„ C&#x2F;C++ Linter Action å’Œ clang-toolsï¼Œæ¬¢è¿å¤§å®¶ä½¿ç”¨ï¼Œæœ‰ä»€ä¹ˆæ„è§æˆ–é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ Issue åé¦ˆã€‚</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Clang-Format </tag>
            
            <tag> Clang-Tidy </tag>
            
            <tag> Clang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to create GPG keys and add to GitHub</title>
      <link href="/2022/07/create-gpg-keys/"/>
      <url>/2022/07/create-gpg-keys/</url>
      
        <content type="html"><![CDATA[<h3 id="First-List-your-GPG-key"><a href="#First-List-your-GPG-key" class="headerlink" title="First, List your GPG key"></a>First, List your GPG key</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># If folders does not exist will create be related automatically</span></span><br><span class="line">$ gpg --list-keys</span><br><span class="line">gpg: directory <span class="string">&#x27;/home/ubuntu/.gnupg&#x27;</span> created</span><br><span class="line">gpg: keybox <span class="string">&#x27;/home/ubuntu/.gnupg/pubring.kbx&#x27;</span> created</span><br><span class="line">gpg: /home/ubuntu/.gnupg/trustdb.gpg: trustdb created</span><br><span class="line"></span><br><span class="line">$ gpg --list-key</span><br></pre></td></tr></table></figure><h3 id="Second-generate-GPG-key"><a href="#Second-generate-GPG-key" class="headerlink" title="Second, generate GPG key"></a>Second, generate GPG key</h3><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ gpg --gen-key</span><br><span class="line">gpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc.</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br><span class="line">Note: Use <span class="string">&quot;gpg --full-generate-key&quot;</span> <span class="keyword">for</span> a full featured key generation dialog.</span><br><span class="line"></span><br><span class="line">GnuPG needs to construct a user ID to identify your key.</span><br><span class="line"></span><br><span class="line">Real name: shenxianpeng</span><br><span class="line">Email address: xianpeng.shen@gmail.com</span><br><span class="line">You selected this USER-ID:</span><br><span class="line">    <span class="string">&quot;shenxianpeng &lt;xianpeng.shen@gmail.com&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">Change (N)ame, (E)mail, or (O)kay/(Q)uit? O</span><br><span class="line">We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, utilize the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br><span class="line">We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, utilize the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br><span class="line">gpg: key 5F72A7D009FC935A marked as ultimately trusted</span><br><span class="line">gpg: directory <span class="string">&#x27;/home/ubuntu/.gnupg/openpgp-revocs.d&#x27;</span> created</span><br><span class="line">gpg: revocation certificate stored as <span class="string">&#x27;/home/ubuntu/.gnupg/openpgp-revocs.d/F0F32CB8C65536ECE0187EAD5F72A7D009FC935A.rev&#x27;</span></span><br><span class="line">public and secret key created and signed.</span><br><span class="line"></span><br><span class="line">pub   rsa3072 2022-07-28 [SC] [expires: 2024-07-27]</span><br><span class="line">      F0F32CB8C65536ECE0187EAD5F72A7D009FC935A</span><br><span class="line">uid                      shenxianpeng &lt;xianpeng.shen@gmail.com&gt;</span><br><span class="line">sub   rsa3072 2022-07-28 [E] [expires: 2024-07-27]</span><br></pre></td></tr></table></figure><h3 id="Third-get-your-public-key-content"><a href="#Third-get-your-public-key-content" class="headerlink" title="Third, get your public key content"></a>Third, get your public key content</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># get with your email</span></span><br><span class="line">gpg --armor --<span class="built_in">export</span> xianpeng.shen@gmail.com</span><br><span class="line"><span class="comment"># or with your pub key id</span></span><br><span class="line">pg --armor --<span class="built_in">export</span> F0F32CB8C65536ECE0187EAD5F72A7D009FC935A</span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># public key content output below</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Fourth-add-the-public-key-content-GPG-keys-to-GitHub"><a href="#Fourth-add-the-public-key-content-GPG-keys-to-GitHub" class="headerlink" title="Fourth, add the public key content (GPG keys) to GitHub"></a>Fourth, add the public key content (GPG keys) to GitHub</h3><p>Open GitHub, Settings -&gt; SSH and GPG keys -&gt; New GPG key</p><p><img src="/2022/07/create-gpg-keys/add-gpg-key.png" alt="add-gpg-key"></p><p>Then when you commit with command <code>git commit -S -m &quot;Your commit message&quot;</code>, then a verified signature will show on GitHub</p><p><img src="/2022/07/create-gpg-keys/verified-signature.png" alt="verified-signature"></p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GPG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12 å‘¨çš„é™ªäº§å‡æˆ‘ä¸€åˆ»éƒ½æ²¡é—²ç€</title>
      <link href="/2022/06/vacation-weekly-report/"/>
      <url>/2022/06/vacation-weekly-report/</url>
      
        <content type="html"><![CDATA[<p>æœ‰å¹¸èµ¶ä¸Šäº†å…¬å¸çš„æ”¿ç­–å˜åŒ–ï¼Œæˆ‘æœ‰ 12 å‘¨çš„é™ªäº§å‡æ¥åšå…¨èŒå¥¶çˆ¸ï¼Œç…§é¡¾å®¶äººçš„åŒæ—¶å¸Œæœ›æŒ¤å‡ºæ—¶é—´æ¥å­¦ä¹ ï¼Œæ¯•ç«Ÿåœ¨èŒæœŸé—´å¾ˆæœ‰æœ‰æœºä¼šèƒ½æœ‰è¿‘ 3 ä¸ªæœˆçš„å‡æœŸã€‚</p><p>ç…§é¡¾å­©å­å…¼é¡¾å­¦ä¹ çœŸä¸æ˜¯ä¸€ä»¶è½»æ¾çš„äº‹æƒ…ï¼Œæˆ‘å°½åŠ›å…¼é¡¾äº†ä¸¤è€…ï¼Œåšäº†å¦‚ä¸‹çš„æµæ°´è´¦è®°å½•ã€‚</p><h2 id="è®¡åˆ’"><a href="#è®¡åˆ’" class="headerlink" title="è®¡åˆ’"></a>è®¡åˆ’</h2><p>æˆ‘çŸ¥é“ 12 å‘¨ä¼šå¾ˆå¿«è¿‡å»ï¼Œå°±åœ¨å·²ç»å¿«è¦è¿‡å»äº† 2 å‘¨æ—¶æˆ‘å†³å®šæœ‰è®¡åˆ’çš„æ¥å®Œæˆä¸€äº›ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼š</p><ul><li><input disabled type="checkbox"> å®Œæˆã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ã€ã€Šé‡æ„ã€‹ä»¥åŠã€ŠåŠ¨æ‰‹å­¦ä¹ æ·±åº¦å­¦ä¹ è¿™ä¸‰æœ¬ä¹¦ã€‹çš„é˜…è¯»å’Œè±†ç“£è¯„è®º</li><li><input disabled type="checkbox"> ä¸º pre-commit å†™ä¸€ä¸ª clang-format å’Œ clang-tidy çš„ <code>cpp-linter-hooks</code></li><li><input disabled type="checkbox"> å®Œæˆæ¯ä¸ªæœˆ 15 èŠ‚è‹±è¯­è¯¾ä»¥åŠ 3~4 çš„ä½“è‚²é”»ç‚¼ï¼ˆæ¸¸æ³³å’Œè¶³çƒï¼‰</li><li><input disabled type="checkbox"> æ‰¾ä¸€ä¸ªå¯ä»¥ä½œä¸ºé•¿æœŸä¸šä½™å‚ä¸çš„å¼€æºé¡¹ç›®ï¼Œä¾‹å¦‚ pytestï¼Œtoxï¼Œpypaã€‚</li></ul><p>ä¹Ÿå°±æ˜¯ä»ä¼‘å‡çš„ç¬¬ 2 å‘¨å¼€å§‹ï¼Œæˆ‘å¼€å§‹è®°å½•æ¯å‘¨çš„å®Œæˆçš„å°ä»»åŠ¡ã€‚</p><span id="more"></span><h2 id="å‘¨æŠ¥"><a href="#å‘¨æŠ¥" class="headerlink" title="å‘¨æŠ¥"></a>å‘¨æŠ¥</h2><p>ç¬¬ 11~12 å‘¨ï¼ˆ8.15 - 8.28ï¼‰- æœ€åä¸¤å‘¨</p><p>æ—¶é—´è¿‡å¾—å¤ªå¿«äº†ï¼Œä¸çŸ¥ä¸è§‰å°±æ˜¯å‡æœŸçš„æœ€åä¸¤å‘¨äº†ã€‚</p><ul><li>Validate VMs</li><li>æ›´æ–°å…³äº <code>setuptools_scm</code> çš„ä½¿ç”¨ã€‚</li><li>åœ¨ cpp-linter Org ä¸­åšä¸€äº›é¡¹ç›®çš„ä¿®æ”¹å’Œä»£ç è¯„å®¡</li></ul><p>ç¬¬ 10 å‘¨ï¼ˆ8.8 - 8.14ï¼‰- æœ€åä¸‰å‘¨</p><ul><li>Validate VMs</li><li>æ€»ç»“å…³äº <code>setuptools_scm</code> çš„ä½¿ç”¨ã€‚</li></ul><p>ç¬¬ 9 å‘¨ï¼ˆ8.1 - 8.7ï¼‰- æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œè½¬çœ¼å°±åˆ°äº†é™ªäº§å‡çš„æœ€å 4 å‘¨äº†</p><ul><li>Draft ä¸€ç¯‡å…³äºå‚ä¸å¼€æºçš„æ–‡ç« </li><li>åšäº†ä¸€äº›å·¥ä½œï¼Œä»¥åŠ Troubleshooting supportï¼›å‚ä¸å¼€æºé¡¹ç›®å’Œ Code Reviewã€‚</li><li>æ¸¸æ³³ä»¥åŠå®Œæˆã€Šé‡æ„ã€‹ä¹¦è¯„</li></ul><p>ç¬¬ 8 å‘¨ï¼ˆ7.25 - 7.31ï¼‰</p><ul><li>åš <code>cpp-linter</code> é‡Œçš„ä¸€äº›é¡¹ç›®çš„æ›´æ–°ï¼Œåš Artifactory çš„è¿ç§»å’Œæµ‹è¯•ã€‚</li><li>è¿™å‘¨è®¡åˆ’åšçš„äº‹æƒ…ä¸–çºªæ²¡å®Œæˆå‡ æ ·ï¼Œæ¯”å¦‚å†™æ–‡ç« å’Œçœ‹ä¹¦ã€‚</li><li>æ¸¸æ³³</li></ul><p>ç¬¬ 7 å‘¨ï¼ˆ7.18 - 7.24ï¼‰</p><ul><li>å‘ç° Python çœŸæ˜¯å…¥é—¨å®¹æ˜“å­¦å¥½éš¾â€¦ åˆæ­¥å­¦äº†ä¸€ä¸‹ tox å’Œ mypyï¼Œä¼šä¹‹åçš„ project ä¸­å°è¯•ä½¿ç”¨ã€‚</li><li>é‡æ„äº†ä»£ç ï¼Œæœ¬æ‰“ç®—å¹¶æŠŠ Code Coverage å†™åˆ° 100 %ï¼Œä½†æ²¡å®ç°ï¼Œpytest è¿˜éœ€è¦ç»§ç»­å­¦ã€‚</li><li>åœ¨ç¢ç£¨ä¸€ä¸ªæœ‰æ„æ€çš„å¯ä»¥ä½œä¸ºé•¿æœŸä¸šä½™æ—¶é—´æ¥åšçš„é¡¹ç›®ï¼Œç›®å‰æœ‰ä¸ªæ¨¡ç³Šçš„é›å½¢ï¼Œå…ˆè¯•è¯•çœ‹</li><li>ã€Šé‡æ„ã€‹ä¹¦æ²¡æ€ä¹ˆè¯»ï¼Œå‘¨å…­æ¸¸æ³³å¯ä»¥ç»§ç»­</li></ul><p>ç¬¬ 6 å‘¨ï¼ˆ7.11 - 7.17ï¼‰</p><ul><li>å®Œæˆäº† <code>cpp-linter-hooks</code> åŠŸèƒ½çš„å¼€å‘å¹¶æŠŠå®ƒè¿ç§»åˆ° cpp-linter org ä¸‹é¢ã€‚</li><li>åˆ›å»ºäº† <code>.github</code> ä»“åº“ï¼Œå¯¹äº org è¿™æ˜¯ä¸€ä¸ªå¾ˆç¥å¥‡çš„æ®‹é…·ï¼Œç©æ³•å¾ˆå¤šï¼Œè¿˜åœ¨é™†ç»­æ¢ç´¢ä¸­ã€‚</li><li>ç»ˆäºæŠŠè¯» Code Clean çš„ä¹¦è¯„äº¤äº†ï¼Œè¿˜éœ€ç»§ç»­è¯»å®Œæˆä»»åŠ¡ã€‚</li><li>å‘¨äº”å‘äº†ä¸€ç¯‡å…¬ä¼—å·æ–‡ç« ï¼Œæ˜¯ä¹‹å‰å†™çš„ï¼Œæ•´ç†ç»ˆäºå‘å‡ºäº†ï¼Œè¿™æ˜¯ 3 ä¸ªæœˆä»¥æ¥çš„ç¬¬ä¸€æ¬¡æ›´æ–°ã€‚</li><li>å‘¨æ—¥å»æ¸¸ä¸€æ¬¡æ³³ã€‚</li></ul><p>ç¬¬ 5 å‘¨ï¼ˆ7.4 - 7.10ï¼‰</p><ul><li>ä¸Šå‘¨ä¸»è¦æ˜¯æŠ½ç©ºå†™ <code>clang-tools-pip</code> å’Œ <code>cpp-linter-hooks</code> è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œç›®å‰å®Œæˆå¤§æ¦‚ 70%ï¼Œé¢„è®¡æœ¬å‘¨å¯ä»¥åŸºæœ¬ç»“æŸã€‚</li><li>å·¥ä½œä¸Šä¹ŸèŠ±äº†ç‚¹æ—¶é—´ï¼Œä¿®å¤äº†ä¹‹å‰å†™çš„ pipeline çš„å‡ ä¸ªé—®é¢˜</li><li>ä¸Šå‘¨å¼€å§‹è¯»ã€Šé‡æ„ã€‹äº†ï¼Œä½†æ²¡å¤šå°‘æ—¶é—´èŠ±åœ¨è¯»ä¹¦ä¸Šï¼Œæ²¡è¯»å‡ é¡µã€‚ä¸€è‡´æƒ³æ›´æ–°å…¬å·æ–‡ç« ï¼Œå¯æƒœæŒºèŠ±æ—¶é—´çš„</li><li>ä¸Šå‘¨æ—¥æ¸¸æ³³ä¹Ÿæ²¡æ¸¸ï¼Œå› ä¸ºè„–å­åäº†ï¼Œå¯èƒ½æ˜¯å–‚å¥¶ä½å¤´é€ æˆçš„ :(</li></ul><p>ç¬¬ 3 - 4 å‘¨ï¼š</p><ul><li>ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ P56 - P130</li><li>åœ¨å®ç° <code>cpp-linter-hooks</code> ä¹‹å‰éœ€è¦å®ç° install clang-tools with pip, å› æ­¤æˆ‘åˆ›å»ºäº† <code>clang-tools-pip</code></li><li>å»å¸‚æ¸¸æ³³é¦†æ¸¸äº†ä¸€æ¬¡æ³³ï¼Œç¬¬äºŒæ¬¡æœ¬å·²çº¦å¥½ä½†ä¸´æ—¶æœ‰äº‹å–æ¶ˆäº†</li></ul><p>ç¬¬ 2 å‘¨ï¼š</p><ul><li>ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ P26 - P56</li><li>åˆ›å»ºäº† <code>cpp-linter-hooks</code> ä»“åº“ï¼Œå­¦ä¹ åˆ«äººçš„ä»£ç </li><li>è®¡åˆ’æœ¬å‘¨æœ«å’Œä¹”æ•™ç»ƒå»æ¸¸æ³³</li></ul><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Windows åšå¼€å‘è¿˜èƒ½è¿™ä¹ˆçˆ½ï¼ŸWSL + VS Code + Docker Desktop ä½ å€¼å¾—æœ‰ç”¨</title>
      <link href="/2022/04/wsl/"/>
      <url>/2022/04/wsl/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆä¹…ä»¥æ¥å¾ˆå¤šç¨‹åºå‘˜éƒ½é‡åˆ°è¿‡åœ¨ Windows åšå¼€å‘çš„å„ç§ä¸ä¾¿ï¼š</p><p>æ¯”å¦‚è®¾ç½®å¼€å‘ç¯å¢ƒä¸èƒ½åƒ Linux å’Œ Mac é‚£æ ·åªéœ€è¦è¾“å…¥ä¸€è¡Œå‘½ä»¤å°±èƒ½å®‰è£…å„ç§ command å’Œ packageï¼Œå› æ­¤æœ‰çš„ç¨‹åºå‘˜ä»æ­¤è½¬åˆ°äº† Mac ä¸Šå¼€å‘ï¼Œä¹Ÿæœ‰çš„å¹²è„†å°±ä½¿ç”¨ Linux ä½œä¸ºå¼€å‘æœºï¼Œåªæœ‰é‚£äº›ä¸å¾—ä¸ä½¿ç”¨ Windows ä½œä¸ºå¼€å‘ç¯å¢ƒç¨‹åºå‘˜è¿˜ä¸€ç›´ç•™åœ¨äº† Windows ä¸Šç»§ç»­å‡‘åˆä¸­ã€‚</p><p>ç›´åˆ° WSL çš„åˆ°æ¥ï¼Œå‡†ç¡®æ¥è¯´æ˜¯ WSL2ã€‚</p><p>WSL + VS Code + Docker Desktop è¿™ä¸‰å‰‘å®¢çš„ç»„åˆï¼Œå¼€å§‹è®©æˆ‘è§‰å¾—åœ¨ Windows ä¸Šåšå¼€å‘æ˜¯ä¸€ä»¶éå¸¸çˆ½çš„äº‹æƒ…ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-WSL"><a href="#ä»€ä¹ˆæ˜¯-WSL" class="headerlink" title="ä»€ä¹ˆæ˜¯ WSL"></a>ä»€ä¹ˆæ˜¯ WSL</h2><p>WSL æ˜¯ Windows Subsystem for Linux çš„ç¼©å†™ï¼Œå®ƒæ˜¯ Windows 10 æ“ä½œç³»ç»Ÿçš„ä¸€é¡¹åŠŸèƒ½ï¼Œä½¿ä½ èƒ½å¤Ÿåœ¨ Windows ä¸Šç›´æ¥è¿è¡Œ Linux æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥åŠ Linux å‘½ä»¤è¡Œå·¥å…·å’Œ GUI åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸ä¼ ç»Ÿçš„ Windows æ¡Œé¢å’Œåº”ç”¨ç¨‹åºä¸€èµ·è¿è¡Œã€‚</p><blockquote><p>WSL çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚æ˜¯ Windows 10 version 1903 åŠæ›´é«˜ã€‚</p></blockquote><p>WSL æ˜¯ä¸“ä¸ºé‚£äº›éœ€è¦ä½¿ç”¨ Linux çš„å¼€å‘äººå‘˜æ‰€å¼€å‘çš„ï¼Œä¾‹å¦‚ä»äº‹ç½‘ç»œå¼€å‘äººå‘˜ã€å¼€æºé¡¹ç›®ã€ä»¥åŠéœ€è¦éƒ¨ç½²åˆ° Linux æœåŠ¡å™¨ç¯å¢ƒçš„å¼€å‘è€…ã€‚</p><p>WSL é€‚ç”¨äºå–œæ¬¢ä½¿ç”¨ Bashã€å¸¸ç”¨ Linux å·¥å…·ï¼ˆsedã€awkç­‰ï¼‰å’Œ Linux ä¼˜å…ˆæ¡†æ¶ï¼ˆRubyã€Python ç­‰ï¼‰ï¼ŒåŒæ—¶ä¹Ÿå–œæ¬¢ä½¿ç”¨ Windows ä½œä¸ºç”Ÿäº§åŠ›å·¥å…·çš„äººã€‚</p><p>ä¸‹é¢æ¥çœ‹çœ‹ WSL å’Œè™šæ‹Ÿæœºç›¸æ¯”æœ‰å“ªäº›ä¼˜åŠ¿ã€‚</p><span id="more"></span><h2 id="ä½¿ç”¨-WSL-çš„å‡ ç‚¹ä¼˜åŠ¿"><a href="#ä½¿ç”¨-WSL-çš„å‡ ç‚¹ä¼˜åŠ¿" class="headerlink" title="ä½¿ç”¨ WSL çš„å‡ ç‚¹ä¼˜åŠ¿"></a>ä½¿ç”¨ WSL çš„å‡ ç‚¹ä¼˜åŠ¿</h2><ol><li>ä¸å®Œæ•´çš„è™šæ‹Ÿæœºç›¸æ¯”ï¼ŒWSL éœ€è¦çš„èµ„æºï¼ˆCPUã€å†…å­˜å’Œå­˜å‚¨ï¼‰æ›´å°‘</li><li>ä½ å¯ä»¥åŒæ—¶ä½¿ç”¨ Windows å’Œ Linuxï¼Œå¹¶ä» Linux ä¸­è®¿é—®ä½ çš„ Windows æ–‡ä»¶ï¼Œæœ‰æ›´å¥½çš„äº¤äº’ä½“éªŒã€‚</li><li>æœ€æœ€é‡è¦çš„æ˜¯ï¼Œä½¿ç”¨ WSL ç»“åˆ VS Code + Docker æ—¢æœ‰ Linux çš„å®Œç¾ä½“éªŒæ„Ÿï¼Œä¹ŸåŒæ—¶æ‹¥æœ‰åœ¨ Windows ä¸Šçš„åŠå…¬ç”Ÿäº§åŠ›ã€‚è¿™æ˜¯è™šæ‹Ÿæœºæˆ–æ˜¯ Linux æ“ä½œç³»ç»Ÿæ‰€åŠä¸åˆ°ã€‚Mac å¯ä»¥ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½é€‚åˆ Macã€‚</li></ol><p>ä¸‹é¢å°±æ¥è¯´è¯´å¦‚ä½•å®‰è£… WSLï¼Œä»¥åŠå’Œ VS Code + Docker è¿›è¡Œæ­é…ä½¿ç”¨ã€‚</p><h2 id="å®‰è£…-WSL"><a href="#å®‰è£…-WSL" class="headerlink" title="å®‰è£… WSL"></a>å®‰è£… WSL</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">--install</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†å¯ç”¨æ‰€éœ€çš„å¯é€‰ç»„ä»¶ï¼Œä¸‹è½½æœ€æ–°çš„ Linux å†…æ ¸ï¼Œå°† WSL 2 è®¾ç½®ä¸ºä½ çš„é»˜è®¤å€¼ï¼Œå¹¶ä¸ºä½ å®‰è£…ä¸€ä¸ª Linux å‘è¡Œç‰ˆï¼ˆé»˜è®¤ä¸º Ubuntuï¼‰ã€‚</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å¯ç”¨çš„å‘è¡Œç‰ˆåˆ—è¡¨</span></span><br><span class="line">C:\Users\xshen&gt;wsl <span class="literal">--list</span> <span class="literal">--online</span></span><br><span class="line">The following is a list of valid distributions that can be installed.</span><br><span class="line">Install <span class="keyword">using</span> <span class="string">&#x27;wsl --install -d &lt;Distro&gt;&#x27;</span>.</span><br><span class="line"></span><br><span class="line">NAME            FRIENDLY NAME</span><br><span class="line">Ubuntu          Ubuntu</span><br><span class="line">Debian          Debian GNU/Linux</span><br><span class="line">kali<span class="literal">-linux</span>      Kali Linux Rolling</span><br><span class="line">openS<span class="built_in">USE-42</span>     openSUSE Leap <span class="number">42</span></span><br><span class="line">SLES<span class="literal">-12</span>         SUSE Linux Enterprise Server v12</span><br><span class="line">Ubuntu<span class="literal">-16</span>.<span class="number">04</span>    Ubuntu <span class="number">16.04</span> LTS</span><br><span class="line">Ubuntu<span class="literal">-18</span>.<span class="number">04</span>    Ubuntu <span class="number">18.04</span> LTS</span><br><span class="line">Ubuntu<span class="literal">-20</span>.<span class="number">04</span>    Ubuntu <span class="number">20.04</span> LTS</span><br></pre></td></tr></table></figure><p>å®‰è£…å…¶ä»–å‘è¡Œç‰ˆï¼Œæ¯”å¦‚ Debian</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">--install</span> <span class="literal">-d</span> Debian</span><br></pre></td></tr></table></figure><p>æ›´è¯¦ç»†çš„è¯·å‚è€ƒå®˜æ–¹<a href="https://docs.microsoft.com/en-us/windows/wsl/install">æ–‡æ¡£</a></p><h2 id="WSL-VS-Code-æ¼”ç¤º"><a href="#WSL-VS-Code-æ¼”ç¤º" class="headerlink" title="WSL + VS Code æ¼”ç¤º"></a>WSL + VS Code æ¼”ç¤º</h2><p>ä»¥ä¸‹ä»¥ Ubuntu ä¸ºä¾‹ï¼Œæ¼”ç¤ºä»ä¸‹è½½ä»£ç ï¼Œå¹¶é€šè¿‡ VS Code æ‰“å¼€ä»£ç ç›®å½•è¿›è¡Œ Codingã€‚</p><p>æ­¤æ—¶æˆ‘å·²ç»é€šè¿‡ WSL æ‰“å¼€äº†å·²ç»å®‰è£…å¥½çš„ Ubuntu æ“ä½œç³»ç»Ÿäº†ã€‚</p><p><img src="/2022/04/wsl/ubuntu.png" alt="ubuntu"></p><p>é¦–é€‰ä¸‹è½½ä»£ç </p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ubuntu@CN-L-2680:~$ git <span class="built_in">clone</span> https://github.com/cue-lang/cue.git --depth 1</span><br><span class="line">Cloning into <span class="string">&#x27;cue&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: 1833, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (1833/1833), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (1502/1502), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 1833 (delta 238), reused 1161 (delta 148), pack-reused 0</span><br><span class="line">Receiving objects: 100% (1833/1833), 1.53 MiB | 5.39 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (238/238), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ°ä¸‹è½½å¥½çš„ä»£ç ç›®å½•ä¸‹é¢ï¼Œè¾“å…¥ <code>code .</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ubuntu@CN-L-2680:~$ <span class="built_in">cd</span> cue/</span><br><span class="line">ubuntu@CN-L-2680:~/cue$ code .</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæœ‰ç¬¬ä¸€æ¬¡æ‰ä¼šå®‰è£… VS Code Server</span></span><br><span class="line">Installing VS Code Server <span class="keyword">for</span> x64 (dfd34e8260c270da74b5c2d86d61aee4b6d56977)</span><br><span class="line">Downloading: 100%</span><br><span class="line">Unpacking: 100%</span><br><span class="line">Unpacked 2341 files and folders to /home/ubuntu/.vscode-server/bin/dfd34e8260c270da74b5c2d86d61aee4b6d56977.</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£… VS Code Serverï¼Œå®‰è£…å®Œæˆåä¼šè‡ªåŠ¨å¯åŠ¨ä½ æœ¬æœºä¸Šçš„ VS Codeï¼Œå¹¶æ‰“å¼€äº† Ubuntu ä¸Šçš„ä»£ç ç›®å½•ï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸ä¸æ»‘ã€‚</p><p>ä¹‹åä½ å°±å¯ä»¥åœ¨ VS Code ä¸Šé€šè¿‡å‘½ä»¤è¡Œ <code>apt-get</code> å‘½ä»¤å®‰è£…ä½ éœ€è¦çš„ä»»ä½•è½¯ä»¶äº†ï¼ŒçœŸçˆ½~</p><p><img src="/2022/04/wsl/vscode.png" alt="vscode"></p><blockquote><p>æœ¬æœº VS Code ä¸Šéœ€è¦å®‰è£…å¾®è½¯å‡ºçš„ <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">Remote - WSL</a> æ’ä»¶ï¼›<br>å¦å¤–ï¼Œå¦‚æœéœ€è¦åœ¨ WSL ä¸­ä½¿ç”¨ Dockerï¼Œéœ€è¦åœ¨ Windows ä¸Šé¢„å…ˆå®‰è£… <a href="https://www.docker.com/products/docker-desktop/">Docker Desktop</a>ã€‚</p></blockquote><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Windows </tag>
            
            <tag> WSL </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº Dockerï¼Œcontainerdï¼ŒCRIï¼ŒCRI-Oï¼ŒOCIï¼Œrunc çš„è§£é‡Šä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œåœ¨ä¸€èµ·çš„</title>
      <link href="/2022/03/container-ecosystem/"/>
      <url>/2022/03/container-ecosystem/</url>
      
        <content type="html"><![CDATA[<p>è‡ª Docker å¼€å¯äº†ä½¿ç”¨å®¹å™¨çš„çˆ†å‘å¼å¢é•¿ï¼Œæœ‰è¶Šæ¥è¶Šå¤šçš„å·¥å…·å’Œæ ‡å‡†æ¥å¸®åŠ©ç®¡ç†å’Œä½¿ç”¨è¿™é¡¹å®¹å™¨åŒ–æŠ€æœ¯ï¼Œä¸æ­¤åŒæ—¶ä¹Ÿé€ æˆäº†æœ‰å¾ˆå¤šæœ¯è¯­è®©äººæ„Ÿåˆ°å›°æƒ‘ã€‚</p><p>æ¯”å¦‚ Docker, containerd, CRI, CRI-O, OCI, runcï¼Œæœ¬ç¯‡å°†ä»‹ç»è¿™äº›ä½ å¬è¿‡ä½†å¹¶ä¸äº†è§£çš„æœ¯è¯­ï¼Œå¹¶è§£é‡Šå®¹å™¨ç”Ÿæ€ç³»ç»Ÿæ˜¯å¦‚ä½•åœ¨ä¸€èµ·å·¥ä½œçš„ã€‚</p><h2 id="å®¹å™¨ç”Ÿæ€ç³»ç»Ÿ"><a href="#å®¹å™¨ç”Ÿæ€ç³»ç»Ÿ" class="headerlink" title="å®¹å™¨ç”Ÿæ€ç³»ç»Ÿ"></a>å®¹å™¨ç”Ÿæ€ç³»ç»Ÿ</h2><p>å®¹å™¨ç”Ÿæ€ç³»ç»Ÿæ˜¯ç”±è®¸å¤šä»¤äººå…´å¥‹çš„æŠ€æœ¯ã€å¤§é‡çš„ä¸“ä¸šæœ¯è¯­å’Œå¤§å…¬å¸ç›¸äº’äº‰æ–—ç»„æˆçš„ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›å…¬å¸å¶å°”ä¼šåœ¨ä¼‘æˆ˜ä¸­èµ°åˆ°ä¸€èµ·åˆä½œï¼Œå•†å®šä¸€äº›æ ‡å‡†ï¼Œè¿™äº›æ ‡å‡†æœ‰åŠ©äºä½¿è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿåœ¨ä¸åŒçš„å¹³å°å’Œæ“ä½œç³»ç»Ÿä¹‹é—´æ›´å…·äº’æ“ä½œæ€§ï¼Œå¹¶å‡å°‘å¯¹å•ä¸€å…¬å¸æˆ–é¡¹ç›®çš„ä¾èµ–ã€‚</p><p>è¿™å¼ å›¾æ˜¾ç¤ºäº† Dockerã€Kubernetesã€CRIã€OCIã€containerd å’Œ runc åœ¨è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿä¸­æ˜¯å¦‚ä½•ç»“åˆçš„ã€‚</p><span id="more"></span><p><img src="/2022/03/container-ecosystem/container-ecosystem.png" alt="container ecosystem"></p><p>å…¶å·¥ä½œæµç¨‹ç®€å•æ¥è¯´æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>Dockerï¼ŒKubernetes ç­‰å·¥å…·æ¥è¿è¡Œä¸€ä¸ªå®¹å™¨æ—¶ä¼šè°ƒç”¨å®¹å™¨è¿è¡Œæ—¶ï¼ˆCRIï¼‰æ¯”å¦‚ containerdï¼ŒCRI-O</li><li>é€šè¿‡å®¹å™¨è¿è¡Œæ—¶æ¥å®Œæˆå®¹å™¨çš„åˆ›å»ºã€è¿è¡Œã€é”€æ¯ç­‰å®é™…å·¥ä½œ<ul><li>Docker ä½¿ç”¨çš„æ˜¯ containerd ä½œä¸ºå…¶è¿è¡Œæ—¶ï¼›Kubernetes æ”¯æŒ containerdï¼ŒCRI-O ç­‰å¤šç§å®¹å™¨è¿è¡Œæ—¶</li><li>è¿™äº›å®¹å™¨è¿è¡Œæ—¶éƒ½éµå¾ªäº† OCI è§„èŒƒï¼Œå¹¶é€šè¿‡ runc æ¥å®ç°ä¸æ“ä½œç³»ç»Ÿå†…æ ¸äº¤äº’æ¥å®Œæˆå®¹å™¨çš„åˆ›å»ºå’Œè¿è¡Œ</li></ul></li></ol><p>ä¸‹é¢å°±åˆ†åˆ«ä»‹ç»å›¾ä¸­æ‰€æåˆ°çš„æœ¯è¯­å’Œè§„èŒƒã€‚</p><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>é¦–å…ˆæˆ‘ä»¬ä»å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ Docker å¼€å§‹ï¼Œå› ä¸ºå®ƒæ˜¯ç®¡ç†å®¹å™¨çš„æœ€æµè¡Œçš„å·¥å…·ã€‚å¯¹å¾ˆå¤šäººæ¥è¯´â€Dockerâ€è¿™ä¸ªåå­—æœ¬èº«å°±æ˜¯â€å®¹å™¨â€çš„ä»£åè¯ã€‚</p><p>Docker å¯åŠ¨äº†æ•´ä¸ªå®¹å™¨çš„é©å‘½ï¼Œå®ƒåˆ›é€ äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å·¥å…·æ¥å¤„ç†å®¹å™¨ä¹Ÿå« Dockerï¼Œè¿™é‡Œæœ€ä¸»è¦çš„è¦æ˜ç™½ï¼š</p><ul><li>Docker å¹¶ä¸æ˜¯è¿™ä¸ªå”¯ä¸€çš„å®¹å™¨ç«äº‰è€…</li><li>å®¹å™¨ä¹Ÿä¸å†ä¸ Docker è¿™ä¸ªåå­—ç´§å¯†è”ç³»åœ¨ä¸€èµ·</li></ul><p>ç›®å‰çš„å®¹å™¨å·¥å…·ä¸­ï¼ŒDocker åªæ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå…¶ä»–è‘—åçš„å®¹å™¨å·¥å…·è¿˜åŒ…æ‹¬ï¼š<a href="https://podman.io/">Podman</a>ï¼Œ<a href="https://linuxcontainers.org/lxd/introduction/">LXC</a>ï¼Œ<a href="https://containerd.io/">containerd</a>ï¼Œ<a href="https://buildah.io/">Buildah</a> ç­‰ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½ è®¤ä¸ºå®¹å™¨åªæ˜¯å…³äº Docker çš„ï¼Œé‚£æ˜¯ç‰‡é¢çš„ä¸å¯¹çš„ã€‚</p><h3 id="Docker-ç»„æˆ"><a href="#Docker-ç»„æˆ" class="headerlink" title="Docker ç»„æˆ"></a>Docker ç»„æˆ</h3><p>Docker å¯ä»¥è½»æ¾åœ°æ„å»ºå®¹å™¨é•œåƒï¼Œä» Docker Hub ä¸­æ‹‰å–é•œåƒï¼Œåˆ›å»ºã€å¯åŠ¨å’Œç®¡ç†å®¹å™¨ã€‚å®é™…ä¸Šï¼Œå½“ä½ ç”¨ Docker è¿è¡Œä¸€ä¸ªå®¹å™¨æ—¶å®é™…ä¸Šæ˜¯é€šè¿‡ Docker å®ˆæŠ¤ç¨‹åºã€containerd å’Œ runc æ¥è¿è¡Œå®ƒã€‚</p><p><img src="/2022/03/container-ecosystem/docker.png" alt="Docker"></p><p>ä¸ºäº†å®ç°è¿™ä¸€åˆ‡ï¼ŒDocker æ˜¯ç”±è¿™äº›é¡¹ç›®ç»„æˆï¼ˆè¿˜æœ‰å…¶ä»–é¡¹ç›®ï¼Œä½†è¿™äº›æ˜¯ä¸»è¦çš„ï¼‰ã€‚</p><ul><li>docker-cliï¼šè¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒæ˜¯ç”¨æ¥å®Œæˆ <code>docker pull</code>, <code>build</code>, <code>run</code>, <code>exec</code> ç­‰å‘½ä»¤è¿›è¡Œäº¤äº’ã€‚</li><li>containerdï¼šè¿™æ˜¯ä¸€ä¸ªç®¡ç†å’Œè¿è¡Œå®¹å™¨çš„å®ˆæŠ¤è¿›ç¨‹ã€‚å®ƒæ¨é€å’Œæ‹‰åŠ¨é•œåƒï¼Œç®¡ç†å­˜å‚¨å’Œç½‘ç»œï¼Œå¹¶ç›‘ç£å®¹å™¨çš„è¿è¡Œã€‚</li><li>runcï¼šè¿™æ˜¯ä½çº§åˆ«çš„å®¹å™¨è¿è¡Œæ—¶é—´ï¼ˆå®é™…åˆ›å»ºå’Œè¿è¡Œå®¹å™¨çš„ä¸œè¥¿ï¼‰ã€‚å®ƒåŒ…æ‹¬ libcontainerï¼Œä¸€ä¸ªç”¨äºåˆ›å»ºå®¹å™¨çš„åŸºäº Go çš„æœ¬åœ°å®ç°ã€‚</li></ul><h3 id="Docker-é•œåƒ"><a href="#Docker-é•œåƒ" class="headerlink" title="Docker é•œåƒ"></a>Docker é•œåƒ</h3><p>è®¸å¤šäººæ‰€è¯´çš„ Docker é•œåƒï¼Œå®é™…ä¸Šæ˜¯ä»¥ Open Container Initiativeï¼ˆOCIï¼‰æ ¼å¼æ‰“åŒ…çš„é•œåƒã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½ ä» Docker Hub æˆ–å…¶ä»–æ³¨å†Œä¸­å¿ƒæ‹‰å‡ºä¸€ä¸ªé•œåƒï¼Œä½ åº”è¯¥èƒ½å¤Ÿç”¨ docker å‘½ä»¤ä½¿ç”¨å®ƒï¼Œæˆ–åœ¨ Kubernetes é›†ç¾¤ä¸Šä½¿ç”¨ï¼Œæˆ–ç”¨ podman å·¥å…·ä»¥åŠä»»ä½•å…¶ä»–æ”¯æŒ OCI é•œåƒæ ¼å¼è§„èŒƒçš„å·¥å…·ã€‚</p><h3 id="Dockershim"><a href="#Dockershim" class="headerlink" title="Dockershim"></a>Dockershim</h3><p>åœ¨ Kubernetes åŒ…æ‹¬ä¸€ä¸ªåä¸º dockershim çš„ç»„ä»¶ï¼Œä½¿å®ƒèƒ½å¤Ÿæ”¯æŒ Dockerã€‚ä½† Docker ç”±äºæ¯” Kubernetes æ›´æ—©ï¼Œæ²¡æœ‰å®ç° CRIï¼Œæ‰€ä»¥è¿™å°±æ˜¯ dockershim å­˜åœ¨çš„åŸå› ï¼Œå®ƒæ”¯æŒå°† Docker è¢«ç¡¬ç¼–ç åˆ° Kubernetes ä¸­ã€‚éšç€å®¹å™¨åŒ–æˆä¸ºè¡Œä¸šæ ‡å‡†ï¼ŒKubernetes é¡¹ç›®å¢åŠ äº†å¯¹é¢å¤–è¿è¡Œæ—¶çš„æ”¯æŒï¼Œæ¯”å¦‚é€šè¿‡ Container Runtime Interface (CRI) å®¹å™¨è¿è¡Œæ—¶æ¥å£æ¥æ”¯æŒè¿è¡Œå®¹å™¨ã€‚å› æ­¤ dockershim æˆä¸ºäº† Kubernetes é¡¹ç›®ä¸­çš„ä¸€ä¸ªå¼‚ç±»ï¼Œå¯¹ Docker å’Œ dockershim çš„ä¾èµ–å·²ç»æ¸—é€åˆ°äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰ç”Ÿæ€ç³»ç»Ÿä¸­çš„å„ç§å·¥å…·å’Œé¡¹ç›®ä¸­ï¼Œå¯¼è‡´ä»£ç è„†å¼±ã€‚</p><p>2022 å¹´ 4 æœˆ dockershim å°†ä¼šä» Kubernetes 1.24 ä¸­å®Œå…¨ç§»é™¤ã€‚ä»Šå Kubernetes å°†å–æ¶ˆå¯¹ Docker çš„ç›´æ¥æ”¯æŒï¼Œè€Œå€¾å‘äºåªä½¿ç”¨å®ç°å…¶å®¹å™¨è¿è¡Œæ—¶æ¥å£çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œè¿™å¯èƒ½æ„å‘³ç€ä½¿ç”¨ containerd æˆ– CRI-Oã€‚è¿™å¹¶ä¸æ„å‘³ç€ Kubernetes å°†ä¸èƒ½è¿è¡Œ Docker æ ¼å¼çš„å®¹å™¨ã€‚containerd å’Œ CRI-O éƒ½å¯ä»¥è¿è¡Œ Docker æ ¼å¼ï¼ˆå®é™…ä¸Šæ˜¯ OCI æ ¼å¼ï¼‰çš„é•œåƒï¼Œå®ƒä»¬åªæ˜¯æ— éœ€ä½¿ç”¨ docker å‘½ä»¤æˆ– Docker å®ˆæŠ¤ç¨‹åºã€‚</p><h2 id="Container-Runtime-Interface-CRI"><a href="#Container-Runtime-Interface-CRI" class="headerlink" title="Container Runtime Interface (CRI)"></a>Container Runtime Interface (CRI)</h2><p>CRIï¼ˆå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼‰æ˜¯ Kubernetes ç”¨æ¥æ§åˆ¶åˆ›å»ºå’Œç®¡ç†å®¹å™¨çš„ä¸åŒè¿è¡Œæ—¶çš„ APIï¼Œå®ƒä½¿ Kubernetes æ›´å®¹æ˜“ä½¿ç”¨ä¸åŒçš„å®¹å™¨è¿è¡Œæ—¶ã€‚å®ƒä¸€ä¸ªæ’ä»¶æ¥å£ï¼Œè¿™æ„å‘³ç€ä»»ä½•ç¬¦åˆè¯¥æ ‡å‡†å®ç°çš„å®¹å™¨è¿è¡Œæ—¶éƒ½å¯ä»¥è¢« Kubernetes æ‰€ä½¿ç”¨ã€‚</p><p>Kubernetes é¡¹ç›®ä¸å¿…æ‰‹åŠ¨æ·»åŠ å¯¹æ¯ä¸ªè¿è¡Œæ—¶çš„æ”¯æŒï¼ŒCRI API æè¿°äº† Kubernetes å¦‚ä½•ä¸æ¯ä¸ªè¿è¡Œæ—¶è¿›è¡Œäº¤äº’ï¼Œç”±è¿è¡Œæ—¶å†³å®šå¦‚ä½•å®é™…ç®¡ç†å®¹å™¨ï¼Œå› æ­¤åªè¦å®ƒéµå®ˆ CRI çš„ API å³å¯ã€‚</p><p><img src="/2022/03/container-ecosystem/cri.png" alt="CRI"></p><p>ä½ å¯ä»¥ä½¿ç”¨ä½ å–œæ¬¢çš„ containerd æ¥è¿è¡Œä½ çš„å®¹å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ CRI-O æ¥è¿è¡Œä½ çš„å®¹å™¨ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªè¿è¡Œæ—¶éƒ½å®ç°äº† CRI è§„èŒƒã€‚</p><h2 id="containerd"><a href="#containerd" class="headerlink" title="containerd"></a>containerd</h2><p>containerd æ˜¯ä¸€ä¸ªæ¥è‡ª Docker çš„é«˜çº§å®¹å™¨è¿è¡Œæ—¶ï¼Œå¹¶å®ç°äº† CRI è§„èŒƒã€‚å®ƒæ˜¯ä» Docker é¡¹ç›®ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä¹‹å containerd è¢«æèµ ç»™äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰ä¸ºå®¹å™¨ç¤¾åŒºæä¾›åˆ›å»ºæ–°å®¹å™¨è§£å†³æ–¹æ¡ˆçš„åŸºç¡€ã€‚</p><p>æ‰€ä»¥ Docker è‡ªå·±åœ¨å†…éƒ¨ä½¿ç”¨ containerdï¼Œå½“ä½ å®‰è£… Docker æ—¶ä¹Ÿä¼šå®‰è£… containerdã€‚</p><p>containerd é€šè¿‡å…¶ CRI æ’ä»¶å®ç°äº† Kubernetes å®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼ˆCRIï¼‰ï¼Œå®ƒå¯ä»¥ç®¡ç†å®¹å™¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬ä»é•œåƒçš„ä¼ è¾“ã€å­˜å‚¨åˆ°å®¹å™¨çš„æ‰§è¡Œã€ç›‘æ§å†åˆ°ç½‘ç»œã€‚</p><h2 id="CRI-O"><a href="#CRI-O" class="headerlink" title="CRI-O"></a>CRI-O</h2><p>CRI-O æ˜¯å¦ä¸€ä¸ªå®ç°äº†å®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼ˆCRIï¼‰çš„é«˜çº§åˆ«å®¹å™¨è¿è¡Œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ OCIï¼ˆå¼€æ”¾å®¹å™¨å€¡è®®ï¼‰å…¼å®¹çš„è¿è¡Œæ—¶ï¼Œå®ƒæ˜¯ containerd çš„ä¸€ä¸ªæ›¿ä»£å“ã€‚</p><p>CRI-O è¯ç”Ÿäº RedHatã€IBMã€è‹±ç‰¹å°”ã€SUSEã€Hyper ç­‰å…¬å¸ã€‚å®ƒæ˜¯ä¸“é—¨ä»å¤´å¼€å§‹åˆ›å»ºçš„ï¼Œä½œä¸º Kubernetes çš„ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œå®ƒæä¾›äº†å¯åŠ¨ã€åœæ­¢å’Œé‡å¯å®¹å™¨çš„èƒ½åŠ›ï¼Œå°±åƒ containerd ä¸€æ ·ã€‚</p><h2 id="Open-Container-Initiative-OCI"><a href="#Open-Container-Initiative-OCI" class="headerlink" title="Open Container Initiative (OCI)"></a>Open Container Initiative (OCI)</h2><p>OCI å¼€æ”¾å®¹å™¨å€¡è®®ï¼Œæ˜¯ä¸€ä¸ªç”±ç§‘æŠ€å…¬å¸ç»„æˆçš„å›¢ä½“ï¼Œå…¶ç›®çš„æ˜¯å›´ç»•å®¹å™¨é•œåƒå’Œè¿è¡Œæ—¶åˆ›å»ºå¼€æ”¾çš„è¡Œä¸šæ ‡å‡†ã€‚ä»–ä»¬ç»´æŠ¤å®¹å™¨é•œåƒæ ¼å¼çš„è§„èŒƒï¼Œä»¥åŠå®¹å™¨åº”è¯¥å¦‚ä½•è¿è¡Œã€‚</p><p>OCI èƒŒåçš„æƒ³æ³•æ˜¯ï¼Œä½ å¯ä»¥é€‰æ‹©ç¬¦åˆè§„èŒƒçš„ä¸åŒè¿è¡Œæ—¶ï¼Œè¿™äº›è¿è¡Œæ—¶éƒ½æœ‰ä¸åŒçš„åº•å±‚å®ç°ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªç¬¦åˆ OCI çš„è¿è¡Œæ—¶ç”¨äºä½ çš„ Linux ä¸»æœºï¼Œå¦ä¸€ä¸ªç”¨äºä½ çš„ Windows ä¸»æœºã€‚è¿™å°±æ˜¯æ‹¥æœ‰ä¸€ä¸ªå¯ä»¥ç”±è®¸å¤šä¸åŒé¡¹ç›®å®æ–½çš„æ ‡å‡†çš„å¥½å¤„ã€‚è¿™ç§åŒæ ·çš„ â€œä¸€ä¸ªæ ‡å‡†ï¼Œå¤šç§å®ç°â€ çš„æ–¹æ³•å…¶å®è¿˜æœ‰å¾ˆå¤šéƒ½åœ¨ä½¿ç”¨ï¼Œä»è“ç‰™è®¾å¤‡åˆ° Java APIsã€‚</p><h2 id="runc"><a href="#runc" class="headerlink" title="runc"></a>runc</h2><p>runc æ˜¯è½»é‡çº§çš„é€šç”¨è¿è¡Œæ—¶å®¹å™¨ï¼Œå®ƒéµå®ˆ OCI è§„èŒƒï¼Œæ˜¯å®ç° OCI æ¥å£çš„æœ€ä½çº§åˆ«çš„ç»„ä»¶ï¼Œå®ƒä¸å†…æ ¸äº¤äº’åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ã€‚</p><p>runc ä¸ºå®¹å™¨æä¾›äº†æ‰€æœ‰çš„ä½çº§åŠŸèƒ½ï¼Œä¸ç°æœ‰çš„ä½çº§ Linux åŠŸèƒ½äº¤äº’ï¼Œå¦‚å‘½åç©ºé—´å’Œæ§åˆ¶ç»„ï¼Œå®ƒä½¿ç”¨è¿™äº›åŠŸèƒ½æ¥åˆ›å»ºå’Œè¿è¡Œå®¹å™¨è¿›ç¨‹ã€‚</p><p>runc çš„å‡ ä¸ªæ›¿ä»£å“ï¼š</p><ul><li><a href="https://github.com/containers/crun">crun</a> ä¸€ä¸ªç”¨ C è¯­è¨€ç¼–å†™çš„å®¹å™¨è¿è¡Œæ—¶ï¼ˆç›¸æ¯”ä¹‹ä¸‹ï¼Œrunc æ˜¯ç”¨Goç¼–å†™çš„ã€‚ï¼‰</li><li>æ¥è‡ª Katacontainers é¡¹ç›®çš„ <a href="https://github.com/kata-containers/kata-containers">kata-runtime</a>ï¼Œå®ƒå°† OCI è§„èŒƒå®ç°ä¸ºå•ç‹¬çš„è½»é‡çº§è™šæ‹Ÿæœºï¼ˆç¡¬ä»¶è™šæ‹ŸåŒ–ï¼‰ã€‚</li><li>Google çš„ <a href="https://gvisor.dev/">gVisor</a>ï¼Œå®ƒåˆ›å»ºäº†æ‹¥æœ‰è‡ªå·±å†…æ ¸çš„å®¹å™¨ã€‚å®ƒåœ¨å…¶è¿è¡Œæ—¶ä¸­å®ç°äº† OCIï¼Œç§°ä¸º runscã€‚</li></ul><p>runc æ˜¯ä¸€ä¸ªåœ¨ Linux ä¸Šè¿è¡Œå®¹å™¨çš„å·¥å…·ï¼Œæ‰€ä»¥è¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ Linux ä¸Šã€è£¸æœºä¸Šæˆ–è™šæ‹Ÿæœºå†…è¿è¡Œã€‚</p><p>åœ¨ Windows ä¸Šï¼Œå®ƒç•¥æœ‰ä¸åŒï¼Œä¸ runc ç›¸å½“çš„æ˜¯å¾®è½¯çš„ä¸»æœºè®¡ç®—æœåŠ¡ï¼ˆHCSï¼‰ï¼Œå®ƒåŒ…æ‹¬ä¸€ä¸ªå« <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/deploy-containers/containerd">runhcs</a> çš„å·¥å…·ï¼Œå®ƒæœ¬èº«æ˜¯ runc çš„ä¸€ä¸ªåˆ†å‰ï¼Œä¹Ÿå®ç°äº†å¼€æ”¾å®¹å™¨å€¡è®®çš„è§„èŒƒã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ° Docker åªæ˜¯å®¹å™¨ç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€ä¸ªå°éƒ¨åˆ†ã€‚å¦å¤–è¿˜æœ‰ä¸€å †å¼€æ”¾çš„æ ‡å‡†ï¼Œè¿™å°±ä½¿å¾—ä¸åŒçš„å®ç°äº’ç›¸ä¹‹é—´æ˜¯å¯æ›¿æ¢çš„ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰ CRI å’Œ OCI æ ‡å‡†ï¼Œä»¥åŠ containerdã€runc å’Œ CRI-O ç­‰é¡¹ç›®å­˜åœ¨çš„åŸå› äº†ã€‚</p><p>ç°åœ¨ä½ çŸ¥é“äº†å…³äºå®¹å™¨è¿™ä¸ªæœ‰è¶£è€Œåˆç•¥æ˜¾å¤æ‚çš„ä¸–ç•Œçš„ä¸€åˆ‡ï¼Œä¸‹æ¬¡å’Œåˆ«äººè®¨è®ºæ—¶ï¼Œä¸è¦è¯´ä½ åœ¨ä½¿ç”¨ â€œDocker å®¹å™¨â€ :)</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote><p><a href="https://www.tutorialworks.com/difference-docker-containerd-runc-crio-oci/">The differences between Docker, containerd, CRI-O and runc</a></p></blockquote><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> containerd </tag>
            
            <tag> CRI </tag>
            
            <tag> CRI-O </tag>
            
            <tag> OCI </tag>
            
            <tag> runc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to enable, configure and disable Jenkins LDAP</title>
      <link href="/2022/03/jenkins-ldap-configuration/"/>
      <url>/2022/03/jenkins-ldap-configuration/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In organizations, using LDAP login very common way for users to log in with their credentials.</p><h2 id="How-to-configure-LDAP"><a href="#How-to-configure-LDAP" class="headerlink" title="How to configure LDAP"></a>How to configure LDAP</h2><p>Preparation: Installed LDAP Jenkins plugin</p><p><img src="/2022/03/jenkins-ldap-configuration/ldap-plugin.png" alt="LDAP plugin"></p><p>About how to configure it, you can refer to Jenkins LDAP Plugin documentation <a href="https://plugins.jenkins.io/ldap/">https://plugins.jenkins.io/ldap/</a></p><p>This is my LDAP configuration just for testing.</p><span id="more"></span><p><img src="/2022/03/jenkins-ldap-configuration/ldap-configure1.png" alt="LDAP configure1"></p><p><img src="/2022/03/jenkins-ldap-configuration/ldap-configure2.png" alt="LDAP configure2"></p><h2 id="Can-not-login-with-LDAP"><a href="#Can-not-login-with-LDAP" class="headerlink" title="Can not login with LDAP?"></a>Can not login with LDAP?</h2><p>Sometimes, for some reason, there is a problem with your organizationâ€™s LDAP server and you canâ€™t log in to Jenkins using LDAP, but you need to use Jenkins now.</p><p>You can disable LDAP authentication by changing <code>config.xml</code>.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Login, cd to jenkins server folder</span></span><br><span class="line">$ <span class="built_in">cd</span> /var/lib/jenkins/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Highly rememend you to backup config.xml before making any change !!!</span></span><br><span class="line"><span class="comment"># If you don&#x27;t backup config.xml, you&#x27;ll lost your LDAP configration after reboot service.</span></span><br><span class="line">$ <span class="built_in">cp</span> config.xml config.xml.bak</span><br><span class="line"></span><br><span class="line"><span class="comment"># Modify config.xml from</span></span><br><span class="line">&lt;useSecurity&gt;<span class="literal">true</span>&lt;/useSecurity&gt;</span><br><span class="line"><span class="comment"># To</span></span><br><span class="line">&lt;useSecurity&gt;<span class="literal">false</span>&lt;/useSecurity&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Restart Jenkins server</span></span><br><span class="line">sudo service jenkins restart</span><br></pre></td></tr></table></figure><p>Then you can log into the Jenkins server again.</p><p>Once your organizationâ€™s LDAP works again, you can replace <code>config.xml</code> with your backup config.xml file. Then your users can continue to log in via LDAP.</p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> LDAP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é è°±ï¼šåœ¨ä¸åˆ é™¤å’Œé‡å»º GitHub ä»“åº“çš„æƒ…å†µä¸‹ä¸çˆ¶(Fork)ä»“åº“åˆ†ç¦»(Unfork)</title>
      <link href="/2022/03/unfork-github-repo/"/>
      <url>/2022/03/unfork-github-repo/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ‰å¼€å‘è€…ã€ç”šè‡³å…¬å¸å¯èƒ½ä¼šé‡åˆ°è¿‡ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li>æœ€å¼€å§‹ Fork äº†ä¸€ä¸ªä»“åº“ï¼Œä¹‹ååšäº†å¤§é‡çš„ä¿®æ”¹ï¼Œä»åŠŸèƒ½åˆ°å¼€å‘è¯­è¨€ï¼Œå·²ç»ä¸çˆ¶ä»“åº“å„è‡ªå‘å±•äº†</li><li>ç”±äºæ˜¯ Fork çš„ä»“åº“ï¼Œåœ¨æ¯æ¬¡æ Pull Request çš„é»˜è®¤ç›®æ ‡åˆ†æ”¯æ˜¯çˆ¶ä»“åº“ï¼Œä¸€ä¸æ³¨æ„å°±ä¼šæ PR åˆ°çˆ¶ä»“åº“é‡Œå»äº†</li><li>Fork çš„ä»“åº“æœ‰äººè´¡çŒ®å¹¶ä½¿ç”¨äº†ï¼Œä½†ä¸èƒ½æ˜¾ç¤ºè´¡çŒ®è€…ï¼Œä»¥åŠè¯¥é¡¹ç›®è¢«å“ªäº›å…¶ä»–çš„é¡¹ç›®æ‰€ä½¿ç”¨ï¼Œè¿™ä¸åˆ©äºé¡¹ç›®çš„å‘å±•</li></ol><p>åŸºäºè¿™äº›é—®é¢˜ï¼Œå¼€å‘è€…ä¼šè€ƒè™‘ä¸çˆ¶ä»“åº“è¿›è¡Œåˆ†ç¦»ï¼Œä½†ç›®å‰ GitHub æ²¡æœ‰æä¾› Unfork&#x2F;Detach çš„åŠŸèƒ½ã€‚</p><p>å¦‚æœç›´æ¥åˆ é™¤é¡¹ç›®å¹¶é‡å»ºå¯ä»¥è¾¾åˆ°åˆ†ç¦»çš„ç›®çš„ï¼Œä½†è¿™æ ·ä¼šä¸¢å¤±ä¸€äº›é‡è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚é¡¹ç›®ä¸­çš„ Issuesï¼ŒWikis ä»¥åŠ Pull Requests ç­‰ã€‚</p><blockquote><p>Unfork è·ŸæŸèŠ‚æ——ä¸‹æŸå¼•æ“ç™½å«– Apache SkyWalking æœ‰æœ¬è´¨åŒºåˆ«ï¼Œå®ƒæ›´åƒæ˜¯ Hudson å’Œ Jenkins çš„åˆ†é“æ‰¬é•³ã€‚</p></blockquote><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>åœ¨ç»è¿‡ä¸€ç•ªè°ƒæŸ¥å’Œæµ‹è¯•ï¼Œç›®å‰æœ€å¯è¡Œçš„åŠæ³•å°±æ˜¯é€šè¿‡ GitHub Support æ¥å¤„ç†ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><span id="more"></span><ol><li>æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼š<a href="https://support.github.com/contact?tags=rr-forks">https://support.github.com/contact?tags=rr-forks</a></li><li>é€‰æ‹©ä½ çš„è´¦æˆ·æˆ–æ˜¯ç»„ç»‡ï¼Œç„¶ååœ¨ Subject ä¸­è¾“å…¥ â€œunforkâ€ ä¼šè‡ªåŠ¨å¼¹å‡ºè™šæ‹ŸåŠ©æ‰‹ï¼Œé€‰æ‹©è™šæ‹ŸæœºåŠ©æ‰‹<br> <img src="/2022/03/unfork-github-repo/type-unfork.png" alt="è§†å›¾ 1"></li><li>ç„¶åæ ¹æ®è™šæ‹ŸåŠ©æ‰‹çš„é—®é¢˜ç„¶åé€‰æ‹©ç­”æ¡ˆï¼ˆå¦‚ä¸‹æ˜¯éƒ¨åˆ†æˆªå›¾ï¼‰<br> <img src="/2022/03/unfork-github-repo/virtual-assistant-1.png" alt="è§†å›¾ 2"></li><li>æœ€åè¿™äº›å¯¹è¯ä¼šè‡ªåŠ¨è½¬æ¢æˆæ–‡å­—è„šæœ¬ï¼Œç„¶å Send requestï¼Œç­‰ç€ Support å¤„ç†å°±å¯ä»¥äº†ï¼ˆä¸ä¼šå¤ªä¹…ï¼‰<br> <img src="/2022/03/unfork-github-repo/virtual-assistant-2.png" alt="è§†å›¾ 3"></li></ol><p>è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœä½ çš„ä»“åº“è¢«å…¶ä»–äºº Fork äº†ï¼Œä½ æƒ³è·Ÿçˆ¶ä»“åº“åˆ†ç¦»ä¹‹åç»§ç»­ä¿ç•™ä½ çš„å­ä»“åº“çš„ Fork è®°å½•ï¼Œä½ åº”è¯¥é€‰æ‹© â€œBring the child forks with the repositoryâ€ã€‚</p><p>å¦å¤–ï¼Œé€šè¿‡å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚å‘½ä»¤ <code>git clone --bare</code> å’Œ <code>git push --mirror</code>ï¼Œå¯ä»¥ä¿ç•™å®Œæˆçš„ Git å†å²ï¼Œä½†ä¸èƒ½ä¿ç•™ Issuesï¼ŒWikis ä»¥åŠ Pull Requests ç­‰ä¿¡æ¯ã€‚</p><p>å¸Œæœ›å¯¹æœ‰éœ€è¦çš„ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://stackoverflow.com/questions/16052477/delete-fork-dependency-of-a-github-repository">Delete fork dependency of a GitHub repository</a></li><li><a href="https://stackoverflow.com/questions/29326767/unfork-a-github-fork-without-deleting/41486339#41486339">Unfork a Github fork without deleting</a></li></ul><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
            <tag> Fork </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Jenkins ä¸Šç”¨äº†è¿™ä¹ˆä¹…çš„ Groovyï¼Œæ˜¯æ—¶å€™è®¤è¯†ä¸€ä¸‹å®ƒäº†</title>
      <link href="/2022/03/groovy/"/>
      <url>/2022/03/groovy/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ Jenkins å’Œ Groovy è¶Šä¹…ï¼Œæˆ‘å°±è¿™æ ·çš„ç–‘é—®ï¼š</p><p>Groovy åˆ°åº•æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Ÿ<br>Groovy æœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ<br>Groovy å’Œ Java æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>Groovy å’Œ Java å¦‚ä½•é€‰æ‹©ï¼Ÿ<br>Groovy åœ¨æ•´ä¸ªå¼€å‘è¯­è¨€ä¸­å ä»€ä¹ˆä½ç½®ï¼Ÿè¦ä¸è¦å­¦ï¼Ÿ</p><p>æœ¬ç¯‡æˆ‘çš„å­¦ä¹ ç»“æœçš„åˆ†äº«ï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åŠ©ä½ è§£ç­”ä»¥ä¸Šçš„è¿™äº›é—®é¢˜ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Groovy"><a href="#ä»€ä¹ˆæ˜¯-Groovy" class="headerlink" title="ä»€ä¹ˆæ˜¯ Groovy"></a>ä»€ä¹ˆæ˜¯ Groovy</h2><p>Apache Groovy æ˜¯ä¸€ç§å¼ºå¤§çš„ã€å¯é€‰ç±»å‹çš„åŠ¨æ€è¯­è¨€ï¼Œå…·æœ‰é™æ€ç±»å‹å’Œé™æ€ç¼–è¯‘åŠŸèƒ½ï¼Œé€‚ç”¨äº Java å¹³å°ï¼Œæ—¨åœ¨é€šè¿‡ç®€æ´ã€ç†Ÿæ‚‰ä¸”æ˜“äºå­¦ä¹ çš„è¯­æ³•æé«˜å¼€å‘äººå‘˜çš„å·¥ä½œæ•ˆç‡ã€‚<br>å®ƒä¸ä»»ä½• Java ç¨‹åºé¡ºåˆ©é›†æˆï¼Œå¹¶ç«‹å³ä¸ºä½ çš„åº”ç”¨ç¨‹åºæä¾›å¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬è„šæœ¬åŠŸèƒ½ã€ç‰¹å®šé¢†åŸŸè¯­è¨€åˆ›ä½œã€è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶å…ƒç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹ã€‚</p><h2 id="Groovy-çš„ç‰¹æ€§"><a href="#Groovy-çš„ç‰¹æ€§" class="headerlink" title="Groovy çš„ç‰¹æ€§"></a>Groovy çš„ç‰¹æ€§</h2><p>ç¿»è¯‘å®˜æ–¹çš„è¯´æ³•ï¼ŒGroovy æœ‰ä»¥ä¸‹å…­å¤§ç‰¹æ€§ã€‚</p><ol><li>å¹³å¦çš„å­¦ä¹ æ›²çº¿ - ç®€æ´ã€æ˜“è¯»ä¸”å¯Œæœ‰è¡¨ç°åŠ›çš„è¯­æ³•ï¼ŒJava å¼€å‘äººå‘˜æ˜“äºå­¦ä¹ </li><li>å¼ºå¤§çš„åŠŸèƒ½ - é—­åŒ…ã€æ„å»ºå™¨ã€è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶å…ƒç¼–ç¨‹ã€å‡½æ•°å¼ç¼–ç¨‹ã€ç±»å‹æ¨æ–­å’Œé™æ€ç¼–è¯‘</li><li>æµç•…çš„ Java é›†æˆ - ä¸ Java å’Œä»»ä½•ç¬¬ä¸‰æ–¹åº“æ— ç¼ã€é€æ˜åœ°é›†æˆå’Œäº’æ“ä½œ</li><li>é¢†åŸŸç‰¹å®šè¯­è¨€ - çµæ´»å¯å»¶å±•çš„è¯­æ³•ï¼Œå…ˆè¿›çš„é›†æˆå’Œå®šåˆ¶æœºåˆ¶ï¼Œåœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­é›†æˆå¯è¯»çš„ä¸šåŠ¡è§„åˆ™</li><li>å……æ»¡æ´»åŠ›å’Œä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ - Web å¼€å‘ã€å“åº”å¼åº”ç”¨ç¨‹åºã€å¹¶å‘&#x2F;å¼‚æ­¥&#x2F;å¹¶è¡Œåº“ã€æµ‹è¯•æ¡†æ¶ã€æ„å»ºå·¥å…·ã€ä»£ç åˆ†æã€GUI æ„å»º</li><li>è„šæœ¬å’Œæµ‹è¯•èƒ¶æ°´ - éå¸¸é€‚åˆç¼–å†™ç®€æ´å’Œå¯ç»´æŠ¤çš„æµ‹è¯•ï¼Œä»¥åŠæ‰€æœ‰æ„å»ºå’Œè‡ªåŠ¨åŒ–ä»»åŠ¡</li></ol><h2 id="Groovy-å’Œ-Java-çš„åŒºåˆ«"><a href="#Groovy-å’Œ-Java-çš„åŒºåˆ«" class="headerlink" title="Groovy å’Œ Java çš„åŒºåˆ«"></a>Groovy å’Œ Java çš„åŒºåˆ«</h2><span id="more"></span><p><img src="/2022/03/groovy/groovy-vs-java.png" alt=" Groovy vs Java"></p><ol><li>Groovy æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œä¹Ÿæ”¯æŒè„šæœ¬è¯­è¨€ï¼›Java æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ã€‚</li><li>Groovy æ”¯æŒå¤šæ–¹æ³•ï¼Œè¿è¡Œæ–¹æ³•çš„é€‰æ‹©å°†åœ¨è¿è¡Œæ—¶é€‰æ‹©ï¼›Java æä¾›å¤šæ–¹æ³•çš„å£°æ˜ï¼Œåœ¨ç¼–è¯‘æ—¶è€Œä¸æ˜¯è¿è¡Œæ—¶é€‰æ‹©ã€‚</li><li>Groovy ä¸­ï¼Œè‡ªåŠ¨èµ„æºç®¡ç†æœºåˆ¶æ˜¯ä¸å­˜åœ¨çš„ï¼Œé™æ€çš„ã€åŒ¿åçš„å†…éƒ¨ç±»ï¼›Java ä» Java7 ç‰ˆæœ¬å¼€å§‹å°±æä¾›äº†è‡ªåŠ¨èµ„æºç®¡ç†ï¼Œåœ¨å†…éƒ¨é™æ€ç±»æˆ–åŒ¿åç±»æ–¹é¢å ä¸Šé£ã€‚</li><li>Groovy ä¸­ï¼Œæœ‰ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§ï¼Œå¦‚ Lambda å‡½æ•°ï¼Œå‡½æ•°å¼æ¥å£ï¼›è€Œ Java ä» JDK 8 ç‰ˆæœ¬å¼€å§‹å°±æœ‰ Lambda å‡½æ•°ã€å‡½æ•°å¼æ¥å£å’Œè®¸å¤šå…¶ä»–çš„æµå’Œå¹¶è¡Œæ“ä½œåŠŸèƒ½ã€‚</li><li>Groovy å¯ä»¥ç”¨å•å¼•å·æˆ–åŒå¼•å·æ ¼å¼å®šä¹‰å’Œå£°æ˜å­—ç¬¦ä¸²å’Œå­—ç¬¦å­—é¢ï¼›Java åªæœ‰åŒå¼•å·æ ¼å¼æ¥å£°æ˜å’Œå®šä¹‰å­—ç¬¦ä¸²å­—é¢æˆ–å­—ç¬¦å­—é¢ã€‚</li><li>Groovy ä¸­æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”åªä½¿ç”¨å¯¹è±¡ã€‚å› æ­¤ï¼Œä¸å­˜åœ¨è‡ªåŠ¨è£…ç®±æˆ–æ‹†ç®±çš„æ¦‚å¿µï¼Œä¹Ÿä¸å­˜åœ¨åŸºå…ƒçš„è½¬æ¢ï¼›ç›¸åï¼ŒJava æœ‰åŸºå…ƒæ•°æ®ç±»å‹å’Œ Wrapper ç±»ï¼Œå¯ä»¥æ˜¾å¼æˆ–éšå¼åœ°è¿›è¡Œè‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±ã€‚</li><li>Groovy ä¸­ï¼Œæ•°æ®ç±»å‹çš„è‡ªåŠ¨æ‹“å®½å’Œç¼©å°æœ‰å¾ˆå¤šå®½å¹¿çš„èŒƒå›´ï¼Œæœ‰å¾ˆå¤šè½¬æ¢ï¼›è€ŒJavaåœ¨æ•°æ®ç±»å‹çš„ç¼©å°æˆ–æ‹“å®½æ–¹é¢æœ‰é™åˆ¶ã€‚</li><li>Groovy å¯¹å…¶æ‰€æœ‰ç±»å‹çš„ç±»æˆå‘˜æˆ–æ•°æ®éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„è®¿é—®ä¿®é¥°ç¬¦ï¼›è€ŒJavaçš„é»˜è®¤è®¿é—®çº§åˆ«æ˜¯åŒ…çº§ï¼Œå–å†³äºç±»æˆå‘˜çš„ç±»å‹ã€‚</li><li>Groovy åœ¨å…¶ç±»ä¸­è‡ªåŠ¨ç”Ÿæˆ getters å’Œ setter æ¥è®¿é—®å’Œä¿®æ”¹ç±»çš„æˆå‘˜ï¼›è€Œåœ¨ Java ä¸­ï¼Œå®ƒä»¬å¿…é¡»åœ¨ç±»ä¸­æ˜ç¡®æåˆ°è®¿é—®ä¿®é¥°ç¬¦ã€‚</li><li>Groovy æœ‰ Groovy beansï¼›è€ŒJavaæœ‰Java beansã€‚</li><li>Groovy ä¹Ÿè¢«ç§°ä¸º Java çš„è¶…é›†ï¼Œå› ä¸º Java ç¨‹åºå¯ä»¥åœ¨ Groovy ç¯å¢ƒä¸­è¿è¡Œã€‚åè¿‡æ¥å¹¶ä¸ä¸€å®šã€‚</li><li>Groovy åœ¨å®šä¹‰ç±»å‹æ—¶æœ‰æ›´ç®€å•çš„è¯­æ³•ï¼Œåªéœ€ä½¿ç”¨ def æ¥å£°æ˜ä¸€ä¸ªå˜é‡ï¼›Javaæœ‰ä¸åŒç±»å‹çš„ç±»å‹åç§°æ¥å£°æ˜å˜é‡æˆ–ç±»çš„ä»»ä½•æ–¹æ³•æˆ–æˆå‘˜ã€‚</li><li>Groovy ä¸è¦æ±‚ä»»ä½•ä¸»æ–¹æ³•æˆ–æ–¹æ³•çš„å…¥å£ç‚¹æ¥è¿è¡Œç±»æˆ–ä»»ä½•ç¨‹åºï¼›è€Œ Java åˆ™è¦æ±‚ç±»ä¸­çš„ main æ–¹æ³•æ¥è¿è¡Œç¨‹åºã€‚</li></ol><!-- more --><h2 id="Groovy-å’Œ-Java-å¦‚ä½•é€‰æ‹©"><a href="#Groovy-å’Œ-Java-å¦‚ä½•é€‰æ‹©" class="headerlink" title="Groovy å’Œ Java å¦‚ä½•é€‰æ‹©"></a>Groovy å’Œ Java å¦‚ä½•é€‰æ‹©</h2><ul><li>å¦‚æœå¯æ‰©å±•æ€§å’Œæ€§èƒ½è‡³å…³é‡è¦å¹¶ä¸”å…¬å¸å¼€å‘ Web åº”ç”¨ç¨‹åºï¼Œå½“ç„¶æ˜¯ Javaã€‚æ¯”å¦‚ç”µå•†ã€é“¶è¡Œã€é‡‘èã€å›½é˜²ã€åŒ»ç–—ä¿å¥ç­‰é¢†åŸŸçš„å¤§å…¬å¸éƒ½ä¼šé€‰æ‹© Javaï¼Œå› ä¸ºå®ƒç»è¿‡æ—¶é—´è¯æ˜ï¼Œé€šå¸¸ç”¨äºå¼€å‘å¤æ‚çš„ä¼ä¸šé¡¹ç›®ã€‚</li><li>Groovy å¯ä»¥ç”¨æ¥ç¼–æ’ä¸€äº› Pipelineï¼Œè‡ªåŠ¨åŒ–ï¼Œæµ‹è¯•ä»»åŠ¡ï¼Œå› ä¸ºå®ƒæ—¢æ˜¯ç¼–ç¨‹è¯­è¨€ä¹Ÿæ˜¯ä¸€ç§å‡ºè‰²çš„è„šæœ¬è¯­è¨€ï¼ŒåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºå­¦ä¹ ã€‚</li></ul><h2 id="Groovy-ç›®å‰æµè¡Œæ’å"><a href="#Groovy-ç›®å‰æµè¡Œæ’å" class="headerlink" title="Groovy ç›®å‰æµè¡Œæ’å"></a>Groovy ç›®å‰æµè¡Œæ’å</h2><p><img src="/2022/03/groovy/2022-02.png" alt="TIOBE index"></p><p>æˆ‘ä»¬ä»è¿™å¼ å›¾çœ‹åˆ° 2022 å¹´ Groovy è¯­è¨€çš„æ’è¡Œæœ‰ä¸€ä¸ªéå¸¸å¤§çš„ä¸‹æ»‘ï¼Œä»ä¹‹å‰çš„æ’å 12 ç›´æ¥è·Œå€’äº† 20ã€‚</p><p>ä»æ•°æ®ä¸Š 2022 å¹´ 2 æœˆ Groovy æœ‰å°å¹…å‡å°‘ï¼ˆä» 0.76ï¼Œ%0.74%ï¼‰ï¼Œä½†è¿™ä¸æ˜¯ä¸»è¦åŸå› ï¼Œä¸»è¦æ˜¯å¾ˆå¯èƒ½æ˜¯å› ä¸º TIOBE index ä» Alexa æ›´æ¢ä¸º Similarweb ç½‘ç»œæµé‡å¼•æ“å¯¼è‡´çš„æ³¢åŠ¨ã€‚</p><p>è¿™äº›è¯­è¨€çš„æ’åä¸Šå‡åŒ…æ‹¬ï¼šAssembly languageï¼ŒGoï¼ŒSwift, MATLAB, Delphi&#x2F;Object Pascal, Classic Visual Basic, Objective-C çš„å¢é•¿æŠ¢å äº† Groovy åŸæœ‰çš„ä½ç½®ã€‚</p><p><img src="/2022/03/groovy/groovy.png" alt="TIOBE index for Groovy"></p><p>å¦å¤–ä» Groovy çš„æµè¡Œå†å²æ¥çœ‹ï¼Œå®ƒç›®å‰è¿˜æ˜¯æœ‰å¾ˆå¤šäººåœ¨ä½¿ç”¨çš„ã€‚å¼€å‘è€…æˆ–è®¸ä¸ä¼šæŠŠå®ƒå½“ä½œç¬¬ä¸€è¯­è¨€ï¼Œä½†ä½œä¸ºè„šæœ¬è¯­è¨€å­¦ä¹ ä¸€ä¸‹è¿˜æ˜¯å¯ä»¥çš„ã€‚</p><p>å¯¹äºä½¿ç”¨ Jenkins Shared Libraries çš„ DevOps å·¥ç¨‹å¸ˆï¼Œéœ€è¦å­¦ä¹  Groovyã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li>Groovy vs Java: <a href="https://flyoutsourcing.com/blog/groovy-vs.-java-what-suits-your-needs.html">https://flyoutsourcing.com/blog/groovy-vs.-java-what-suits-your-needs.html</a></li><li>Differences with Javaï¼š<a href="https://groovy-lang.org/differences.html">https://groovy-lang.org/differences.html</a></li><li>TIOBE indexï¼š<a href="https://www.tiobe.com/tiobe-index/">https://www.tiobe.com/tiobe-index/</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Groovy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Jenkins </tag>
            
            <tag> Groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Resolved - The Pip Inspector tree parse failed to produce output</title>
      <link href="/2022/03/blackduck-troubleshooting/"/>
      <url>/2022/03/blackduck-troubleshooting/</url>
      
        <content type="html"><![CDATA[<h2 id="Details"><a href="#Details" class="headerlink" title="Details"></a>Details</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Failure: PIP - Pip Inspector</span><br><span class="line">  The Pip Inspector tree parse failed to produce output.</span><br><span class="line"></span><br><span class="line">Overall Status: FAILURE_DETECTOR - Detect had one or more detector failures <span class="keyword">while</span> extracting dependencies.</span><br></pre></td></tr></table></figure><p>For more output please click to expand.</p><details><summary>ğŸ‘‰ Click to see more output ğŸ‘ˆ</summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[main] --- ======== Detect Issues ========</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- DETECTORS:</span><br><span class="line">[main] --- Detector Issue</span><br><span class="line">[main] --- /workdir/test</span><br><span class="line">[main] --- Failure: PIP - Pip Inspector</span><br><span class="line">[main] --- The Pip Inspector tree parse failed to produce output.</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- ======== Detect Result ========</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- Black Duck Project BOM: https://org.blackducksoftware.com/api/projects/246c8952-7cb8-40e9-9987-35f7d4602ae1/versions/e1cb4204-42d0-4445-8675-978df62b150d/components</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- ======== Detect Status ========</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- GIT: SUCCESS</span><br><span class="line">[main] --- PIP: FAILURE</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- Signature scan / Snippet scan on /workdir/test: SUCCESS</span><br><span class="line">[main] --- Overall Status: FAILURE_DETECTOR - Detect had one or more detector failures <span class="keyword">while</span> extracting dependencies. Check that all projects build and your environment is configured correctly.</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- If you need <span class="built_in">help</span> troubleshooting this problem, generate a diagnostic zip file by adding <span class="string">&#x27;-d&#x27;</span> to the <span class="built_in">command</span> line, and provide it to Synopsys Technical Support. See <span class="string">&#x27;Diagnostic Mode&#x27;</span> <span class="keyword">in</span> the Detect documentation <span class="keyword">for</span> more information.</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- ===============================</span><br><span class="line">[main] ---</span><br><span class="line">[main] --- Detect duration: 00h 00m 54s 951ms</span><br><span class="line">[main] --- Exiting with code 5 - FAILURE_DETECTOR</span><br></pre></td></tr></table></figure></details><p>ENVIRONMENT:</p><ul><li>Product: synopsys-detect-7.11.1.jar</li><li>Others: OpenJDK 11, Python 3.6 and Python 2.7.5</li></ul><h2 id="Root-cause"><a href="#Root-cause" class="headerlink" title="Root cause"></a>Root cause</h2><span id="more"></span><p>More output of this run, I see it used <code>python</code> (which is python2) not <code>python3</code>,<br>so run <a href="https://github.com/blackducksoftware/synopsys-detect/blob/master/src/main/resources/pip-inspector.py">pip-inspector.py</a> failed.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DEBUG [main-Executable_Stream_Thread] --- Python 2.7.5</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">[main] --- Running executable &gt;/usr/bin/python /home/****/blackduck/runs/2022-03-01-07-45-05-986/shared/pip/pip-inspector.py --projectname=<span class="built_in">test</span></span><br></pre></td></tr></table></figure><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Link python to python3, it works in my case.</p><p>For example</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># save python to other name</span></span><br><span class="line">sudo <span class="built_in">mv</span> /usr/bin/python /usr/bin/python.old</span><br><span class="line"><span class="comment"># link python3 to python</span></span><br><span class="line">sudo <span class="built_in">ln</span> -s /usr/bin/python3 /usr/bin/python</span><br></pre></td></tr></table></figure><p>Then try to run <code>bash &lt;(curl -s -L https://detect.synopsys.com/detect7.sh)</code> again, my test commands:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash &lt;(curl -s -L https://detect.synopsys.com/detect7.sh) --blackduck.url=https://org.blackducksoftware.com --blackduck.api.token=MmMwMjdlOTctMT --detect.project.name=HUB --detect.project.version.name=TEST_v1.1.1 --detect.source.path=/workdir/test --logging.level.com.synopsys.integration=DEBUG --blackduck.trust.cert=TRUE --detect.tools.excluded=POLARIS --detect.blackduck.signature.scanner.snippet.matching=SNIPPET_MATCHING</span><br></pre></td></tr></table></figure><p>If you want to use Docker to do Blackduck scan, you can create a Docker image. like this</p><!-- more --><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">11</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set DETECT version you need, if it&#x27;s empty download the latest version.</span></span><br><span class="line"><span class="comment"># https://sig-repo.synopsys.com/artifactory/bds-integrations-release/com/synopsys/integration/synopsys-detect</span></span><br><span class="line"><span class="keyword">ENV</span> DETECT_LATEST_RELEASE_VERSION=<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get upgrade -y \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">        git \</span></span><br><span class="line"><span class="language-bash">        python \</span></span><br><span class="line"><span class="language-bash">        pip \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get autoremove \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get clean</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> curl -sSOL https://detect.synopsys.com/detect7.sh &amp;&amp; bash detect7.sh --<span class="built_in">help</span> \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">rm</span> -rf /usr/bin/python \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">ln</span> -s /usr/bin/python3 /usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /src</span></span><br></pre></td></tr></table></figure><p>Hope this help.</p><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> BlackDuck </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Troubleshooting </tag>
            
            <tag> BlackDuck </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022 å¹´æœ€å€¼å¾—å…³æ³¨çš„ DevOps è¶‹åŠ¿å’Œé—®ç­”</title>
      <link href="/2022/02/devops-trends-2022/"/>
      <url>/2022/02/devops-trends-2022/</url>
      
        <content type="html"><![CDATA[<p>DevOps æ˜¯ IT ç•Œæœ€è¿‘å‡ å¹´çš„ä¸€ä¸ªçƒ­é—¨è¯é¢˜ï¼Œè€Œä¸”è¿˜ä¼šè¶Šæ¥è¶Šçƒ­ã€‚</p><p>æœ€è¿‘æœ‰å¹¸å’Œä¸€ä½åšä¼ æ’­å’¨è¯¢çš„è¯»è€…æœ‹å‹äº¤æµå…³äº 2022 å¹´æœ€å€¼å¾—å…³æ³¨çš„ DevOps è¶‹åŠ¿ä»¥åŠä¸€äº›é—®é¢˜å’Œå›ç­”ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚</p><h2 id="è¡Œä¸šè¶‹åŠ¿"><a href="#è¡Œä¸šè¶‹åŠ¿" class="headerlink" title="è¡Œä¸šè¶‹åŠ¿"></a>è¡Œä¸šè¶‹åŠ¿</h2><h3 id="è¶‹åŠ¿ä¸€ï¼šè½¬å‘æ— æœåŠ¡å™¨è®¡ç®—"><a href="#è¶‹åŠ¿ä¸€ï¼šè½¬å‘æ— æœåŠ¡å™¨è®¡ç®—" class="headerlink" title="è¶‹åŠ¿ä¸€ï¼šè½¬å‘æ— æœåŠ¡å™¨è®¡ç®—"></a>è¶‹åŠ¿ä¸€ï¼šè½¬å‘æ— æœåŠ¡å™¨è®¡ç®—</h3><p>æ— æœåŠ¡å™¨è®¡ç®—æ˜¯ä¸€ç§æ–°å…´è¶‹åŠ¿ï¼Œå®é™…ä¸Šå·²ç»å­˜åœ¨äº†åå¤šå¹´ã€‚ä¼ä¸šè´­ä¹°æ— æœåŠ¡å™¨æ¡†æ¶éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œä¸»è¦æ˜¯å› ä¸ºå¯¹è¡Œä¸šæ”¯æŒå’Œå¯¹æŠ•èµ„å›æŠ¥çš„æ‹…å¿§ã€‚</p><p>æ— æœåŠ¡å™¨å…·æœ‰è®¸å¤šè¶Šæ¥è¶Šéš¾ä»¥å¿½è§†çš„ä¼˜åŠ¿ï¼Œä¸»è¦çš„ä¸¤ä¸ªæœ€å¤§å¥½å¤„æ˜¯æ•ˆç‡å’Œå¯é æ€§ã€‚æ²¡æœ‰åŸºç¡€è®¾æ–½ç®¡ç†çš„è´Ÿæ‹…ï¼Œä¼ä¸šå¯ä»¥å°†èµ„æºé›†ä¸­åœ¨æ­£é‡è¦çš„äº‹é¡¹ä¸Šã€‚æ­¤å¤–ï¼Œæ— æœåŠ¡å™¨è¿˜é™ä½äº†ä¼ ç»Ÿæ¡†æ¶å¯èƒ½å‡ºç°çš„æ½œåœ¨ç»´æŠ¤é—®é¢˜çš„é£é™©ã€‚</p><p>æ— æœåŠ¡å™¨æä¾›å›ºæœ‰çš„å¯æ‰©å±•æ€§å’Œå¯é æ€§å¹¶è‡ªåŠ¨åŒ–å¼€å‘äººå‘˜ä¸å–œæ¬¢çš„æ—¥å¸¸æ“ä½œä»»åŠ¡ï¼Œ2022 å¹´æ— æœåŠ¡å™¨è®¡ç®—ä¼šç»å†ä¸‹ä¸€æ¬¡å‘å±•ã€‚</p><h3 id="è¶‹åŠ¿äºŒï¼šå¾®æœåŠ¡æ¶æ„å¢é•¿"><a href="#è¶‹åŠ¿äºŒï¼šå¾®æœåŠ¡æ¶æ„å¢é•¿" class="headerlink" title="è¶‹åŠ¿äºŒï¼šå¾®æœåŠ¡æ¶æ„å¢é•¿"></a>è¶‹åŠ¿äºŒï¼šå¾®æœåŠ¡æ¶æ„å¢é•¿</h3><p>éšç€æ— æœåŠ¡å™¨è®¡ç®—åœ¨ 2022 å¹´çš„å‘å±•ï¼Œå¾®æœåŠ¡ä¹Ÿå°†å¦‚æ­¤ã€‚</p><p>å¾®æœåŠ¡æ¶æ„æ˜¯å°†å•ä½“åº”ç”¨åˆ†åŒ–ä¸ºå°çš„ç‹¬ç«‹å•å…ƒï¼Œæˆ–æœåŠ¡ï¼Œä»è€Œä¸ºå¤§å‹å›¢é˜Ÿæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚å®ƒæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li>ä¸ºä¼ä¸šæä¾›æ¯”å•ä½“åº”ç”¨ç¨‹åºæ›´å¥½çš„å¯æ‰©å±•æ€§å’Œæ•æ·æ€§</li><li>å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€å’Œå·¥å…·ï¼Œæ¶ˆé™¤ä¼ ç»Ÿåº”ç”¨ç¨‹åºå¼€å‘çš„å±€é™</li><li>å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ä¸ç ´åæ•´ä¸ªä»£ç åº“çš„æƒ…å†µä¸‹éƒ¨ç½²å°çš„ç‰¹æ€§æˆ–åŠŸèƒ½</li><li>DevOps å›¢é˜Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ¥æ‰©å±•æ¯ä¸ªåº”ç”¨éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æ‰©å±•æ•´ä¸ªåº”ç”¨</li><li>å‡ºç°é—®é¢˜å¾®æœåŠ¡å¯ä»¥è½»æ¾æ§åˆ¶é—®é¢˜ï¼Œè€Œä¸ä¼šä¸­æ–­æ•´ä¸ªåº”ç”¨ç¨‹åº</li></ul><p>å½“ç„¶ä¹Ÿå¿…é¡»è®¤è¯†åˆ°å¾®æœåŠ¡çš„ä¸€ä¸ªå¼Šç«¯ï¼Œå¦‚æœå®æ–½ä¸ä½³å¯èƒ½å¯¼è‡´ä¸¥é‡é—®é¢˜ï¼ŒåŒ…æ‹¬æ•°æ®ä¸¢å¤±ã€å¯é æ€§å·®å’Œå®‰å…¨é£é™©ã€‚</p><h3 id="è¶‹åŠ¿ä¸‰ï¼šKubernetes-æˆä¸ºåŸºç¡€æ¶æ„"><a href="#è¶‹åŠ¿ä¸‰ï¼šKubernetes-æˆä¸ºåŸºç¡€æ¶æ„" class="headerlink" title="è¶‹åŠ¿ä¸‰ï¼šKubernetes æˆä¸ºåŸºç¡€æ¶æ„"></a>è¶‹åŠ¿ä¸‰ï¼šKubernetes æˆä¸ºåŸºç¡€æ¶æ„</h3><span id="more"></span><p>Kubernetesï¼Œä¹Ÿç§° K8sï¼Œæ˜¯å®¹å™¨ç¼–æ’å¼€æºå¹³å°ï¼Œå®ƒèƒ½å¤Ÿä¸å®¹å™¨ç»„äº¤äº’ï¼ŒåŒæ—¶ç®¡ç†æ›´å¤šé›†ç¾¤ã€‚é™¤äº†å®¹å™¨ç®¡ç†ï¼Œè¿˜æä¾›å®‰å…¨ã€ç½‘ç»œå’Œå­˜å‚¨æœåŠ¡ï¼Œè‡ªæˆ‘ç›‘æ§ï¼ŒèŠ‚ç‚¹å’Œå®¹å™¨çš„å¥åº·çŠ¶å†µæ£€æŸ¥ã€‚å®ƒå¯ä»¥å¤„ç†ä»è™šæ‹Ÿæœºé›†ç¾¤ç®¡ç†åˆ°è´Ÿè½½å¹³è¡¡ç­‰æ‰€æœ‰æ–¹æ–¹é¢é¢ï¼Œæé«˜ç”Ÿäº§åŠ›ï¼Œç®€åŒ– DevOps å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ã€‚</p><p>æ ¹æ® Flexera çš„ 2021 å¹´äº‘è®¡ç®—çŠ¶å†µæŠ¥å‘Šï¼Œ48% çš„ä¼ä¸šä½¿ç”¨ Kubernetesï¼Œå¦æœ‰ 25% çš„ä¼ä¸šè®¡åˆ’ä½¿ç”¨å®ƒã€‚å¦å¤– 53% çš„ç»„ç»‡ä½¿ç”¨ Dockerï¼Œ21% çš„ç»„ç»‡è®¡åˆ’ä½¿ç”¨ã€‚</p><h3 id="è¶‹åŠ¿å››ï¼šDevSecOps-æˆä¸ºé‡è¦ç»„æˆéƒ¨åˆ†"><a href="#è¶‹åŠ¿å››ï¼šDevSecOps-æˆä¸ºé‡è¦ç»„æˆéƒ¨åˆ†" class="headerlink" title="è¶‹åŠ¿å››ï¼šDevSecOps æˆä¸ºé‡è¦ç»„æˆéƒ¨åˆ†"></a>è¶‹åŠ¿å››ï¼šDevSecOps æˆä¸ºé‡è¦ç»„æˆéƒ¨åˆ†</h3><p>å®‰å…¨æ€§æ­£åœ¨æˆä¸º DevOps é¢†åŸŸçš„å¦ä¸€ä¸ªæ—¥ç›Šå…³æ³¨çš„é—®é¢˜ã€‚</p><p>ä¸ºäº†é¿å…ç½‘ç»œæ”»å‡»ï¼Œè®¸å¤šå¤§å‹ä¼ä¸šæ­£åœ¨å°†å®‰å…¨æ€§é›†æˆåˆ°ä»–ä»¬çš„ DevOps æµç¨‹ä¸­ã€‚ä» DevOps åˆ° DevSecOps çš„è½¬å˜é¢„è®¡åœ¨ 2022 ä¼šæœ‰æ›´å¤šå…¬å¸åœ¨è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸåŠ å…¥å®‰å…¨æ§åˆ¶ã€‚<br>è¿™ä½¿ DevOps å›¢é˜Ÿèƒ½å¤Ÿåœ¨å¼€å‘é˜¶æ®µæŒç»­ç›‘æ§å’Œä¿®å¤å®‰å…¨ç¼ºé™·ï¼Œä»è€Œæé«˜äº¤ä»˜é€Ÿåº¦å’Œè´¨é‡ã€‚DevSecOps æ­£åœ¨æˆä¸ºè®¸å¤šå…¬å¸ç»„ç»‡ç»“æ„å›¾çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><h2 id="è¡Œä¸šé—®ç­”"><a href="#è¡Œä¸šé—®ç­”" class="headerlink" title="è¡Œä¸šé—®ç­”"></a>è¡Œä¸šé—®ç­”</h2><!-- more --><h3 id="é—®é¢˜ä¸€-DevOps-æ•´ä¸ªç›®å‰è¡Œä¸šå¤´éƒ¨æœ¬åœŸå’Œå›½é™…ç©å®¶æœ‰å“ªäº›ï¼ˆGitLab-ï¼Ÿ"><a href="#é—®é¢˜ä¸€-DevOps-æ•´ä¸ªç›®å‰è¡Œä¸šå¤´éƒ¨æœ¬åœŸå’Œå›½é™…ç©å®¶æœ‰å“ªäº›ï¼ˆGitLab-ï¼Ÿ" class="headerlink" title="é—®é¢˜ä¸€: DevOps æ•´ä¸ªç›®å‰è¡Œä¸šå¤´éƒ¨æœ¬åœŸå’Œå›½é™…ç©å®¶æœ‰å“ªäº›ï¼ˆGitLab)ï¼Ÿ"></a>é—®é¢˜ä¸€: DevOps æ•´ä¸ªç›®å‰è¡Œä¸šå¤´éƒ¨æœ¬åœŸå’Œå›½é™…ç©å®¶æœ‰å“ªäº›ï¼ˆGitLab)ï¼Ÿ</h3><p>ä»¥æˆ‘æ‰€åœ¨çš„å¤–ä¼è€Œè¨€é€šå¸¸æ˜¯é€‰æ‹©å›½é™…ç©å®¶ï¼Œä»¥æœ€å¸¸ç”¨çš„ä»£ç ç®¡ç†å’Œé¡¹ç›®ç®¡ç†çš„å·¥å…·ä¸ºä¾‹ï¼š</p><ul><li>ä¸Šäº†å¹´å¤´çš„å¤–ä¼å¤§å…¬å¸é€šå¸¸åœ¨ä½¿ç”¨ Atlassian å®¶çš„ Jira å’Œ Bitbucketã€‚èˆ¹å¤§éš¾æ‰å¤´ï¼Œé€‰æ‹© GitLabï¼ŒGitHub è¿™æ ·ä¸€ç«™å¼çš„ DevOps è¿ç§»æˆæœ¬å¾ˆé«˜ï¼Œéœ€è¦æœ‰è¶³å¤Ÿçš„ç†ç”±æ‰å¯èƒ½æ¢å·¥å…·ã€‚</li><li>å¯¹äºå¹´è½»çš„å…¬å¸ï¼ŒGitLab å’Œ GitHub éƒ½æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚GitLab åœ¨ä¼ä¸šå†…éƒ¨å»ºç«‹ç§æœå±…å¤šï¼›GitHub ä¹Ÿæä¾›ä¼ä¸šç‰ˆç§æœï¼Œä½†å¯¹äºå¼€æºé¡¹ç›®è€Œè¨€ GitHub ä¾ç„¶æ˜¯ä»£ç æ‰˜ç®¡çš„é¦–é€‰ã€‚</li></ul><p>å…¶ä»–ç”¨åˆ°çš„ä»˜è´¹çº§ DevOps å·¥å…·è¿˜åŒ…æ‹¬ Synopsys (Polaris, Blackduck)ï¼ŒJfrog (Artifactory)ï¼ŒSonarQube ç­‰ã€‚</p><h3 id="é—®é¢˜äºŒ-è¡Œä¸šç›®å‰æœ‰å“ªäº›é‡ç‚¹è¶‹åŠ¿ï¼Ÿæ¯”å¦‚å®‰å…¨è¿™å—ï¼Œæ˜¯ä¸æ˜¯ç›®å‰è¡Œä¸šå…³æ³¨åº¦æ¯”è¾ƒé«˜ï¼Ÿæœ‰å“ªäº›å·¥å…·ï¼Ÿ"><a href="#é—®é¢˜äºŒ-è¡Œä¸šç›®å‰æœ‰å“ªäº›é‡ç‚¹è¶‹åŠ¿ï¼Ÿæ¯”å¦‚å®‰å…¨è¿™å—ï¼Œæ˜¯ä¸æ˜¯ç›®å‰è¡Œä¸šå…³æ³¨åº¦æ¯”è¾ƒé«˜ï¼Ÿæœ‰å“ªäº›å·¥å…·ï¼Ÿ" class="headerlink" title="é—®é¢˜äºŒ: è¡Œä¸šç›®å‰æœ‰å“ªäº›é‡ç‚¹è¶‹åŠ¿ï¼Ÿæ¯”å¦‚å®‰å…¨è¿™å—ï¼Œæ˜¯ä¸æ˜¯ç›®å‰è¡Œä¸šå…³æ³¨åº¦æ¯”è¾ƒé«˜ï¼Ÿæœ‰å“ªäº›å·¥å…·ï¼Ÿ"></a>é—®é¢˜äºŒ: è¡Œä¸šç›®å‰æœ‰å“ªäº›é‡ç‚¹è¶‹åŠ¿ï¼Ÿæ¯”å¦‚å®‰å…¨è¿™å—ï¼Œæ˜¯ä¸æ˜¯ç›®å‰è¡Œä¸šå…³æ³¨åº¦æ¯”è¾ƒé«˜ï¼Ÿæœ‰å“ªäº›å·¥å…·ï¼Ÿ</h3><p>å®‰å…¨é¢†åŸŸçš„å…³æ³¨åº¦åœ¨é€å¹´å‡é«˜ï¼Œå°¤å…¶åœ¨å¤–ä¼å¾ˆæ³¨é‡å®‰å…¨è¿™å—ï¼Œä»–ä»¬æ„¿æ„èŠ±é’±æ¥è´­ä¹°å®‰å…¨æ‰«æå·¥å…·æ¥æ‰«æä»£ç ï¼Œç”šè‡³è¿˜ä¼šè¦æ±‚æ‰€æœ‰çš„å‘å¸ƒçš„äº§å“ä»£ç ä¸­ä¸èƒ½æœ‰é«˜å±æ¼æ´ã€‚</p><p>ä¸€äº›å¸¸ç”¨çš„å·¥å…·åŒ…æ‹¬ï¼šé™æ€ä»£ç æ‰«æï¼Œæ¯”å¦‚ Polaris, Veracode, Snyk, SonarQube, PVS-Studioï¼›ä»£ç ç»„æˆåˆ†æï¼Œæ¯”å¦‚ Blackduckï¼ŒX-Ray ç­‰ç­‰ã€‚</p><h3 id="é—®é¢˜ä¸‰ï¼šä¼ä¸šåœ¨é€‰æ‹©-DevOps-å¹³å°æ—¶ä¸»è¦è€ƒè™‘çš„å› ç´ æœ‰å“ªäº›ï¼Ÿæ¯”å¦‚æ•°æ®åº“å®‰å…¨ï¼Œå…¬å¸æˆç†Ÿåº¦ï¼Œæµ·å¤–çŸ¥ååº¦ï¼Œç­‰ç­‰"><a href="#é—®é¢˜ä¸‰ï¼šä¼ä¸šåœ¨é€‰æ‹©-DevOps-å¹³å°æ—¶ä¸»è¦è€ƒè™‘çš„å› ç´ æœ‰å“ªäº›ï¼Ÿæ¯”å¦‚æ•°æ®åº“å®‰å…¨ï¼Œå…¬å¸æˆç†Ÿåº¦ï¼Œæµ·å¤–çŸ¥ååº¦ï¼Œç­‰ç­‰" class="headerlink" title="é—®é¢˜ä¸‰ï¼šä¼ä¸šåœ¨é€‰æ‹© DevOps å¹³å°æ—¶ä¸»è¦è€ƒè™‘çš„å› ç´ æœ‰å“ªäº›ï¼Ÿæ¯”å¦‚æ•°æ®åº“å®‰å…¨ï¼Œå…¬å¸æˆç†Ÿåº¦ï¼Œæµ·å¤–çŸ¥ååº¦ï¼Œç­‰ç­‰"></a>é—®é¢˜ä¸‰ï¼šä¼ä¸šåœ¨é€‰æ‹© DevOps å¹³å°æ—¶ä¸»è¦è€ƒè™‘çš„å› ç´ æœ‰å“ªäº›ï¼Ÿæ¯”å¦‚æ•°æ®åº“å®‰å…¨ï¼Œå…¬å¸æˆç†Ÿåº¦ï¼Œæµ·å¤–çŸ¥ååº¦ï¼Œç­‰ç­‰</h3><p>æˆ‘è®¤ä¸ºä¸»è¦è€ƒè™‘å…¬å¸çš„çŸ¥ååº¦ï¼Œå…¶æ¬¡äº§å“çš„çŸ¥ååº¦ï¼Œå¦‚æœæ˜¯å¼€æºäº§å“ä¼šç€é‡å…³æ³¨ GitHub ä¸Šçš„ Contributors æ•°é‡ï¼Œå®ƒæ›´èƒ½ä»£è¡¨ç¤¾åŒºçš„æ´»è·ƒåº¦ï¼Œå…¶æ¬¡æ˜¯ Fork å’Œ Star æ•°é‡ã€‚</p><h3 id="é—®é¢˜å››ï¼šç›®å‰-DevOps-å¤„äºå“ªä¸ªé˜¶æ®µ-æœªæ¥çš„å‘å±•æœºä¼šæ˜¯åœ¨å“ªé‡Œï¼Ÿ"><a href="#é—®é¢˜å››ï¼šç›®å‰-DevOps-å¤„äºå“ªä¸ªé˜¶æ®µ-æœªæ¥çš„å‘å±•æœºä¼šæ˜¯åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="é—®é¢˜å››ï¼šç›®å‰ DevOps å¤„äºå“ªä¸ªé˜¶æ®µ? æœªæ¥çš„å‘å±•æœºä¼šæ˜¯åœ¨å“ªé‡Œï¼Ÿ"></a>é—®é¢˜å››ï¼šç›®å‰ DevOps å¤„äºå“ªä¸ªé˜¶æ®µ? æœªæ¥çš„å‘å±•æœºä¼šæ˜¯åœ¨å“ªé‡Œï¼Ÿ</h3><p>DevOps å¸‚åœºç›®å‰å¤„åœ¨ç›¸å¯¹æˆç†Ÿçš„é˜¶æ®µï¼Œæ¯ä¸ªç»†åˆ†é¢†åŸŸéƒ½æœ‰å¾ˆå¤šå·¥å…·å¯ä»¥é€‰æ‹©ã€‚æœªæ¥åŸºç¡€è®¾æ–½ä¼šæ›´å¤šçš„å‘å®¹å™¨äº‘æ–¹å‘å‘å±•ã€‚</p><p>å…·æœ‰åˆ›æ–°çš„ DevOps äº§å“ä¾ç„¶ä¼šå¾ˆæœ‰å¸‚åœºï¼Œåƒæ˜¯ GitLabï¼ŒHashiCorp ç­‰å…¬å¸çš„äº§å“ï¼Œä»–ä»¬åœ¨çŸ­çŸ­åå¹´å†…æˆä¸ºä¸–ç•Œçº§çš„è½¯ä»¶å…¬å¸ã€‚</p><h3 id="é—®é¢˜äº”ï¼šæœ‰å“ªäº›ä¸»æµæˆ–å¹³æ—¶é‡ç‚¹å…³æ³¨çš„è¡Œä¸šåª’ä½“å·æˆ–è‡ªåª’ä½“å…¬ä¼—å·ï¼Ÿ"><a href="#é—®é¢˜äº”ï¼šæœ‰å“ªäº›ä¸»æµæˆ–å¹³æ—¶é‡ç‚¹å…³æ³¨çš„è¡Œä¸šåª’ä½“å·æˆ–è‡ªåª’ä½“å…¬ä¼—å·ï¼Ÿ" class="headerlink" title="é—®é¢˜äº”ï¼šæœ‰å“ªäº›ä¸»æµæˆ–å¹³æ—¶é‡ç‚¹å…³æ³¨çš„è¡Œä¸šåª’ä½“å·æˆ–è‡ªåª’ä½“å…¬ä¼—å·ï¼Ÿ"></a>é—®é¢˜äº”ï¼šæœ‰å“ªäº›ä¸»æµæˆ–å¹³æ—¶é‡ç‚¹å…³æ³¨çš„è¡Œä¸šåª’ä½“å·æˆ–è‡ªåª’ä½“å…¬ä¼—å·ï¼Ÿ</h3><p>ä¼šç»å¸¸çœ‹ä¸€äº› DevOps ç›¸å…³çš„ä»¥åŠ InfoQï¼Œé˜¿é‡Œã€è…¾è®¯ã€ç¾å›¢ç­‰æŠ€æœ¯å…¬ä¼—å·ã€‚</p><p>è¿˜ä¼šçœ‹ YouTube ä¸Šä¸€äº› DevOps çš„ä¸ªäººåŠå…¬å¸é¢‘é“ï¼šTechWorld with Nana, CloudBeesTVï¼ŒCNCFï¼ŒDevOps Paradoxï¼ŒDevOps Toolkit ç­‰ã€‚</p><h3 id="é—®é¢˜å…­ï¼šé™¤äº†å…¬ä¼—å·å¤–ï¼Œä½ å¹³æ—¶ä¼šä¸Šå“ªäº›è¡Œä¸šç¤¾åŒºï¼Ÿæ¯”å¦‚è¯´-GitHub-æˆ–-CSDNï¼Ÿ"><a href="#é—®é¢˜å…­ï¼šé™¤äº†å…¬ä¼—å·å¤–ï¼Œä½ å¹³æ—¶ä¼šä¸Šå“ªäº›è¡Œä¸šç¤¾åŒºï¼Ÿæ¯”å¦‚è¯´-GitHub-æˆ–-CSDNï¼Ÿ" class="headerlink" title="é—®é¢˜å…­ï¼šé™¤äº†å…¬ä¼—å·å¤–ï¼Œä½ å¹³æ—¶ä¼šä¸Šå“ªäº›è¡Œä¸šç¤¾åŒºï¼Ÿæ¯”å¦‚è¯´ GitHub æˆ– CSDNï¼Ÿ"></a>é—®é¢˜å…­ï¼šé™¤äº†å…¬ä¼—å·å¤–ï¼Œä½ å¹³æ—¶ä¼šä¸Šå“ªäº›è¡Œä¸šç¤¾åŒºï¼Ÿæ¯”å¦‚è¯´ GitHub æˆ– CSDNï¼Ÿ</h3><p>æœ€å¸¸çœ‹çš„æ˜¯ GitHub ä»¥åŠ GitHub Trending æ¥çœ‹æœ€è¿‘å—å…³æ³¨çš„é¡¹ç›®ã€‚è¿˜ä¼š</p><p>ç¤¾åŒºä¼šå®šæœŸå»çœ‹ <a href="https://dev.to/">DEV Community</a>, <a href="https://medium.com/">Medium</a>, <a href="https://www.infoq.cn/">InfoQ</a> ã€‚ä¼šçœ‹çŸ¥ä¹ä¸Šä¸€äº›è¯é¢˜ä¸‹çš„ç²¾åï¼Œå¾ˆå°‘çœ‹ CSDNï¼Œæ‡‚å¾—éƒ½æ‡‚ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://www.itbusinessedge.com/development/devops-trends-2022/">Top DevOps Trends to Watch in 2022</a></li><li><a href="https://blog.qasource.com/devops-trends-to-look-out-for-in-2022">DevOps Trends To Look Out for in 2022</a></li></ul><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Kubernetes </tag>
            
            <tag> DevSecOps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»QAåˆ°DEVåˆ°DEVOPSï¼Œç å­—äº”å¹´æœ‰å“ªäº›æ”¶è·</title>
      <link href="/2022/02/from-qa-to-dev-to-devops/"/>
      <url>/2022/02/from-qa-to-dev-to-devops/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å†™åšå®¢å’Œå…¬ä¼—å·è¿™ä»¶äº‹ä¸Šï¼Œä¸çŸ¥ä¸è§‰å·²ç»æ˜¯æˆ‘çš„ç¬¬äº”ä¸ªå¹´å¤´äº†ï¼Œæ²¡æƒ³è¿‡èƒ½è¿™ä¹ˆä¹…ã€‚</p><p>å€Ÿæ­¤åˆ†äº«ä¸€ä¸‹è¿™äº›å¹´æˆ‘çš„èŒä¸šçº¿è·¯çš„å˜åŒ–ï¼Œä»¥åŠå†™åšå®¢&amp;å…¬ä¼—å·æœ‰ä»€ä¹ˆæ”¶è·ï¼Œç®—æ˜¯è‡ªå·±è¿‡å»çš„ä¸€ä¸ªæ€»ç»“ï¼Œå¦‚æœèƒ½æœ‰ç‚¹å…±é¸£å’Œå¸®åŠ©å°±æ›´å¥½äº†ã€‚</p><h2 id="ä»QAåˆ°DEVåˆ°DEVOPS"><a href="#ä»QAåˆ°DEVåˆ°DEVOPS" class="headerlink" title="ä»QAåˆ°DEVåˆ°DEVOPS"></a>ä»QAåˆ°DEVåˆ°DEVOPS</h2><p>æœ€æ—©å…³æ³¨æˆ‘å…¬ä¼—å·è¯»è€…æœ‹å‹å¤§æ¦‚éƒ½æ˜¯å› ä¸ºè½¯ä»¶æµ‹è¯•è€Œç»“ç¼˜çš„ã€‚æ˜¯çš„ï¼Œæˆ‘åšäº†è¿‘ 10 çš„è½¯ä»¶æµ‹è¯•å·¥ä½œï¼Œå…ˆååœ¨ SIMcomã€ä¸œè½¯ã€äº¬ä¸œå•†åŸã€å¤–ä¼ä»äº‹è¿‡åŠŸèƒ½&amp;è‡ªåŠ¨åŒ–&amp;æ€§èƒ½æµ‹è¯•å·¥ä½œã€‚</p><p>ä»åŠŸèƒ½æµ‹è¯•å…¥è¡Œå¼€å§‹ï¼Œæˆ‘æ…¢æ…¢åœ°æ„Ÿå—åˆ°ç¼–ç¨‹ä¸æ˜¯å¼€å‘çš„ç‹¬é—¨æ­¦åŠŸï¼Œå®ƒä¹Ÿæ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆçš„å¿…å¤‡æŠ€èƒ½ï¼Œåªæœ‰å…·å¤‡è‰¯å¥½çš„ç¼–ç èƒ½åŠ›ï¼Œæ‰èƒ½å»åšè‡ªåŠ¨åŒ–ã€Unittestã€ä»¥åŠæµ‹è¯•å¼€å‘ç­‰å·¥ä½œã€‚</p><p>å½“æˆ‘åšäº†è‡ªåŠ¨åŒ–æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ‘åˆå‘ç°ç›¸å¯¹äºâ€œå‘ç°â€é—®é¢˜ï¼Œâ€œè§£å†³â€é—®é¢˜æ›´ä»¤æˆ‘æ„‰æ‚¦ã€‚æˆ‘å¼€å§‹æ¢¦æƒ³æœ‰æœºä¼šèƒ½å»åšå¼€å‘ï¼Œè¿™æ ·ä¸ä½†å¯ä»¥æé«˜è‡ªå·±çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œå¦å¤–å¼€å‘ã€æµ‹è¯•éƒ½æ‡‚ä¹Ÿèƒ½ä¸ºè‡ªå·±ä»Šåçš„èŒä¸šå‘å±•æ‰¾åˆ°æ›´å¤šå¯èƒ½æ€§ã€‚</p><p>æœ€ç»ˆæ˜¯å› ä¸ºæœ‰è¿™æ ·çš„æœºä¼š+è‡ªå·±çš„ä¸»åŠ¨+ç¼–ç è¿‡å¾—å»ï¼Œæˆ‘ä»æµ‹è¯•è½¬åˆ°äº†å¼€å‘ã€‚èµ·åˆçš„è‰°éš¾å’Œå‹åŠ›éƒ½æ˜¯æˆ‘å·¥ä½œè¿‘ 10 å¹´æ¥å‰æ‰€æœªæœ‰çš„ï¼Œç™½å¤©çœ‹ä»£ç ã€æ™šä¸Šçœ‹ä»£ç ã€å‘¨æœ«çœ‹ä»£ç â€¦ å¤©å¤©å¦‚æ­¤ã€‚ç»è¿‡äº†åŠå¹´å¤šçš„åŠªåŠ›ï¼Œæ‰ç»ˆäºä¸Šå²¸ï¼Œå¯ä»¥åš C&#x2F;C++ é¡¹ç›®çš„ Bugfix äº†ã€‚</p><p>ä¹Ÿæ­£æ˜¯å› ä¸ºæœ‰å¼€å‘ã€è‡ªåŠ¨åŒ–ã€æŒç»­é›†æˆçš„ç»éªŒï¼Œåœ¨å›¢é˜Ÿéœ€è¦ä¸€å Build&#x2F;Release å·¥ç¨‹å¸ˆçš„æ—¶å€™ï¼Œæˆ‘çŸ¥é“è¿™å°±æ˜¯æˆ‘æœ€é€‚åˆçš„å²—ä½ï¼Œè´Ÿè´£äº§å“çš„è‡ªåŠ¨åŒ–æ„å»ºã€å‘å¸ƒã€åŸºç¡€è®¾æ–½å»ºè®¾ã€CI&#x2F;CD ä»¥åŠæé«˜ç ”å‘æ•ˆèƒ½çš„ç›¸å…³å¼€å‘å·¥ä½œã€‚</p><p>å°±è¿™æ ·æˆ‘ä» QA åˆ° DEV åˆ° DEVOPSã€‚å…¬ä¼—å·çš„æ›´åè®°å½•ä¹Ÿè®°å½•äº†æˆ‘çš„èŒä¸šè·¯çº¿å˜åŒ–ï¼š</p><ul><li>2019å¹´07æœˆ28æ—¥ â€œè½¯ä»¶æµ‹è¯•ä¸å¼€å‘â€æ”¹åâ€œDevOpsæ”»åŸç‹®â€</li><li>2018å¹´12æœˆ29æ—¥ â€œDevQAâ€æ”¹åâ€œè½¯ä»¶æµ‹è¯•ä¸å¼€å‘â€</li><li>2018å¹´12æœˆ26æ—¥ â€œè½¯ä»¶æµ‹è¯•QAâ€æ”¹åâ€œDevQAâ€</li><li>2017å¹´08æœˆ01æ—¥ æ³¨å†Œâ€œè½¯ä»¶æµ‹è¯•QAâ€</li></ul><h2 id="å†™ä½œäº”å¹´æœ‰å“ªäº›æ”¶è·"><a href="#å†™ä½œäº”å¹´æœ‰å“ªäº›æ”¶è·" class="headerlink" title="å†™ä½œäº”å¹´æœ‰å“ªäº›æ”¶è·"></a>å†™ä½œäº”å¹´æœ‰å“ªäº›æ”¶è·</h2><p><strong>å†™ä½œæ˜¯ä¸€é¡¹é•¿æœŸæ”¶ç›Šè¿œè¶…çŸ­æœŸæ”¶ç›Šçš„äº‹æƒ…</strong>ã€‚</p><p>å¯¹äºç»å¤§å¤šæ•°äººåœ¨çŸ­æœŸå†…å‡ ä¹ä¸ä¼šæœ‰ä»€ä¹ˆå®è´¨æ€§çš„æ”¶ç›Šï¼Œè¿˜ä¼šèŠ±è´¹å¤§é‡çš„ä¸šä½™æ—¶é—´ï¼Œå¦¥å¦¥çš„æ˜¯ç”¨çˆ±åœ¨å‘ç”µã€‚ä»é‡‘é’±è§’åº¦æ¥è¡¡é‡è¿™ä»¶äº‹ï¼Œè¿™æ˜¯ä¸€ä»¶æŠ•å…¥å’Œäº§å‡ºå®Œå…¨ä¸æˆæ¯”ä¾‹çš„äº‹æƒ…ï¼Œå¾ˆéš¾åšæŒã€‚</p><p>å¦‚æœä»é•¿æœŸæ¥çœ‹ï¼ŒåšæŒå†™ä½œä¸€å®šä¼šå¸¦æ¥ä»·å€¼çš„ï¼Œæˆ‘æ€»ç»“æœ‰ä»¥äº”ä¸ªæ–¹é¢çš„å¥½å¤„ï¼š</p><ol><li>å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ - å½“æˆ‘ä»¬å¼„æ˜ç™½äº†ä¸€ä¸ªæŠ€æœ¯éš¾é¢˜ï¼Œè™½ç„¶å½“æ—¶æ˜ç™½äº†ï¼Œä½†å¦‚æœæ²¡è®°å½•ä¸‹æ¥ï¼Œå¾ˆæœ‰å¯èƒ½ä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜åˆä¸çŸ¥é“è¯¥å¦‚ä½•è§£å†³ã€‚</li><li>è®©åˆ«äººå¬æ‡‚æ‰æ˜¯çœŸçš„æ‡‚ - æœ‰æ—¶å€™å¯¹äºä¸€ä¸ªé—®é¢˜æˆ‘ä»¬è®¤ä¸ºè‡ªå·±æ˜ç™½äº†ï¼Œå½“åˆ†äº«ç»™åˆ«äººçš„æ—¶å€™ï¼Œæ‰å‘ç°å…¶ä¸­æœ‰çš„é€»è¾‘è¯´ä¸é€šï¼Œå› æ­¤ä¸å¾—ä¸ç»§ç»­æ€è€ƒå¹¶å½»åº•ææ¸…æ¥šã€‚</li><li>æ‰“é€ å­¦ä¹ é£è½® - å½“ä½ åšæŒåˆ†äº«å¹¶æœ‰äººå…³æ³¨åˆ°ä½ å¹¶ä¸ä½ äº’åŠ¨çš„æ—¶å€™ï¼Œä½ å°±ä¼šæœ‰åŠ¨åŠ›ç»§ç»­åˆ†äº«ï¼Œå­¦ä¹ æ–°çš„çŸ¥è¯†ç„¶åå†åˆ†äº«ï¼Œä¸€æ—¦å­¦ä¹ çš„é£è½®é€ å¥½äº†ï¼ŒåšæŒä¸‹å»å°±å˜å¾—å®¹æ˜“ã€‚</li><li>é—´æ¥æ”¶ç›Š - ä½†å‡¡åšæŒå†™ç‚¹ä¸œè¥¿ï¼Œå¯¹äºä»¥åæ‰¾å·¥ä½œéƒ½æˆ–å¤šæˆ–å°‘ä¼šæœ‰äº›å¸®åŠ©ï¼Œè‡³å°‘è¯´æ˜ä½ æ˜¯ä¸€ä¸ªçˆ±å­¦ä¹ çš„äººã€‚å¦‚æœä½ çš„åˆ†äº«è®©åŒè¡Œã€æœªæ¥ä½ çš„é¢è¯•å®˜è§‰å¾—å¾ˆä¸é”™ï¼Œå¾ˆå¯èƒ½ä¼šç»™ä½ å¸¦æ¥ä¸€æ¬¡æ–°çš„å·¥ä½œæœºä¼šã€‚</li><li>ç›´æ¥æ”¶ç›Š - ç›´æ¥åˆ©ç›ŠåŒ…æ‹¬å¹³å°æµé‡å’Œå¹¿å‘Šæ”¶ç›Šã€ä»¥åŠå–ä¸“æ ã€åšå’¨è¯¢ç­‰ã€‚è¿™è¦æ±‚å°±å¾ˆé«˜äº†ï¼Œä¸ä½†éœ€è¦ä¼šè‡ªåª’ä½“è¿è¥ï¼Œè¿˜æœ‰è¦è¶…å¼ºçš„è¾“å‡ºåŠŸåŠ›ï¼Œè¿™èƒŒåå°±æ˜¯æ¯”åˆ«äººæ›´å¤šçš„ä»˜å‡ºã€‚</li></ol><span id="more"></span><p>2017 å¹´çš„æ—¶å€™æˆ‘æ²¡æƒ³é‚£ä¹ˆå¤šï¼Œåªæ˜¯è§‰å¾—è‡ªå·±ä¹Ÿå¯ä»¥å†™ç‚¹ä¸œè¥¿ï¼Œå°±åœ¨ 2017 å¹´ 7 æœˆ 6 æ—¥é€šè¿‡ GitHub Page å»ºç«‹äº†è‡ªå·±çš„<a href="https://shenxianpeng.github.io/">ä¸ªäººåšå®¢</a></p><p><img src="/2022/02/from-qa-to-dev-to-devops/blog-first-commit.png" alt="ç¬¬ä¸€æ¬¡æäº¤"></p><p>å†…å®¹æœ‰äº†ï¼Œå¤åˆ¶è¿‡æ¥ä¹Ÿä¸è´¹ç”µï¼Œè¿˜èƒ½äº†è§£ä¸‹å…¬ä¼—å·æ€ä¹ˆç©çš„ï¼Œç„¶åå°±åœ¨åŒå¹´ 8 æœˆå¼€é€šäº†å¾®ä¿¡å…¬ä¼—å·ï¼›åæ¥æƒ³çœ‹çœ‹å°ç¨‹åºæ˜¯æ€ä¹ˆç©çš„ï¼Œç„¶ååœ¨ 2020 å¹´äº”ä¸€å‡æœŸä¸ºæˆ‘çš„åšå®¢åˆ›å»ºäº†å¾®ä¿¡å°ç¨‹åº(DevOpsæ”»åŸç‹®)</p><p>å¯¹äºæˆ‘æ¥è¯´èŠ±äº†è¿™ä¹ˆå¤šçš„ä¸šä½™æ—¶é—´æ¥å†™ä½œï¼Œè¯´è¯´æœ‰å“ªäº›å…·ä½“çš„æ”¶è·ã€‚</p><ol><li>çŸ¥é“å¦‚ä½•åœ¨ GitHub ä¸Šå»ºç«™ã€å‘å¸ƒåšå®¢ï¼ŒæŠŠ GitHub å˜æˆæœ€å¸¸è®¿é—®çš„ç½‘ç«™ä¹‹ä¸€</li><li>çŸ¥é“ Hexo åšå®¢å¦‚ä½•é›†æˆ Disqus, Google Analytics, Google Adsense, etcï¼Œå¹¶åšäº†å¾ˆå¤šä¸ªæ”¹è¿›</li><li>çŸ¥é“å¦‚ä½•ä½¿ç”¨å’Œé›†æˆ Github Actionsã€Travisã€SonarQube ç­‰å·¥å…·</li><li>çŸ¥é“å¦‚ä½•è¿è¥ä¸€ä¸ªå…¬ä¼—å·ï¼›çŸ¥é“å¦‚ä½•åˆ›å»ºã€å‘å¸ƒä¸€ä¸ªå¾®ä¿¡å°ç¨‹åº</li><li>å‚ä¸å¼€æºé¡¹ç›®ï¼Œåœ¨å¼€æºé¡¹ç›®ä¸­å­¦ä¹ ç¼–ç ã€å¼€é˜”çœ¼ç•Œå’Œæœ€ä½³å®è·µ</li><li>æœ‰åŒäº‹è¯´ ta è¯»åˆ°äº†æˆ‘çš„æ–‡ç« ï¼Œæ‰¾åˆ°å¹¶å…³æ³¨äº†æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè¿™è®©æˆ‘å¾ˆè£å¹¸</li><li>æ”¶åˆ°è¿‡å’¨è¯¢ï¼Œè¿˜æœ‰å’¨è¯¢è€…çš„æ„Ÿè°¢çº¢åŒ…ï¼Œèƒ½å¤Ÿå¸®åˆ°åˆ«äººå¹¶æ”¶åˆ°æ­£åé¦ˆè®©æˆ‘éå¸¸å¼€å¿ƒ</li><li>ä¸æ•¢æƒ³è¿˜èƒ½æ”¶åˆ°å¤§å‡ºç‰ˆç¤¾çš„é‚€è¯·å†™ä¸€æœ¬æŠ€æœ¯ä¹¦ç±ï¼Œå› å·¥ä½œå¿™ä»¥åŠè¿˜æœ‰æ›´é‡è¦çš„çŸ¥è¯†è¦å­¦ï¼Œä¸»åŠ¨æ”¾å¼ƒäº†</li><li>â€¦ â€¦</li></ol><p>è¿™äº›æ”¶è·ä¸­ï¼Œæˆ‘è§‰å¾—æœ€å¤§çš„æ”¶è·æ˜¯<strong>æ‰“é€ å­¦ä¹ é£è½®ï¼Œå…»æˆåˆ†äº«ä¹ æƒ¯</strong>ã€‚</p><p>æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨ã€‚æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æï¼ŒæŒç»­åšå¯¹çš„äº‹æƒ…ï¼Œå…¶ä»–çš„å°±äº¤ç»™æ—¶é—´ã€‚</p><p align="right">â€”â€” 2022 å¹´ 2 æœˆ 20 æ—¥ï¼Œå‡Œæ™¨æ›´æ–°ã€‚</p><h2 id="ç›¸å…³æ¨èé˜…è¯»"><a href="#ç›¸å…³æ¨èé˜…è¯»" class="headerlink" title="ç›¸å…³æ¨èé˜…è¯»"></a>ç›¸å…³æ¨èé˜…è¯»</h2><blockquote><ul><li><a href="https://shenxianpeng.github.io/2018/07/why-I-move-to-development/">åšäº†9å¹´æµ‹è¯•ï¼Œæˆ‘ä¸ºä½•è½¬å¼€å‘ï¼Ÿ</a></li><li><a href="https://shenxianpeng.github.io/2018/12/from-qa-to-dev/">ä»æµ‹è¯•åˆ°å¼€å‘çš„äº”ä¸ªæœˆ</a></li></ul></blockquote><hr><p>è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Thought </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vagrant å’Œ Docker çš„åŒºåˆ«ï¼Œè¯¥å¦‚ä½•é€‰ï¼Ÿ</title>
      <link href="/2022/01/vagrant-vs-docker/"/>
      <url>/2022/01/vagrant-vs-docker/</url>
      
        <content type="html"><![CDATA[<p>å…³äº Vagrant çš„ä»‹ç»ï¼Œå¯ä»¥å‚çœ‹å‰ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://shenxianpeng.github.io/2022/01/vagrant/">ä»€ä¹ˆæ˜¯ Vagrant? Vagrant å’Œ VirtualBox çš„åŒºåˆ«</a></p><h2 id="ä»€ä¹ˆæ˜¯-Vagrant"><a href="#ä»€ä¹ˆæ˜¯-Vagrant" class="headerlink" title="ä»€ä¹ˆæ˜¯ Vagrant"></a>ä»€ä¹ˆæ˜¯ Vagrant</h2><p>å…³äº Vagrant çš„ä»‹ç»ï¼Œå¯ä»¥å‚çœ‹å‰ä¸€ç¯‡æ–‡ç« ï¼šä»€ä¹ˆæ˜¯ Vagrant? Vagrant å’Œ VirtualBox çš„åŒºåˆ«</p><h2 id="Vagrant-å’Œ-Docker-åŒºåˆ«"><a href="#Vagrant-å’Œ-Docker-åŒºåˆ«" class="headerlink" title="Vagrant å’Œ Docker åŒºåˆ«"></a>Vagrant å’Œ Docker åŒºåˆ«</h2><p>å…³äº Vagrant è¢«é—®åˆ°æœ€å¤šçš„é—®é¢˜ï¼šVagrant å’Œ Docker ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p><p>å¦‚æœä¸åˆ†åœºæ™¯çš„ç›´æ¥æ¯”å¯¹ Vagrant å’Œ Docker æ˜¯ä¸æ°å½“çš„ã€‚åœ¨ä¸€äº›ç®€å•åœºæ™¯ä¸­ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯é‡å¤çš„ï¼Œä½†åœ¨æ›´å¤šåœºæ™¯ä¸­ï¼Œå®ƒä»¬æ˜¯æ— æ³•ç›¸äº’æ›¿ä»£çš„ã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ç”¨ Vagrantï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨ Docker å‘¢ï¼Ÿ</p><p><strong>æ‰€ä»¥å¦‚æœä½ ä»…ä»…æ˜¯æƒ³ç®¡ç†è™šæ‹Ÿæœºï¼Œé‚£ä¹ˆä½ åº”è¯¥ä½¿ç”¨ Vagrantï¼›å¦‚æœä½ æƒ³å¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²åº”ç”¨ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨ Dockerã€‚</strong></p><p>ä¸‹é¢å…·ä½“æ¥è¯´è¯´ä¸ºä»€ä¹ˆã€‚</p><span id="more"></span><p>Vagrant æ˜¯ VM çš„ç®¡ç†å·¥å…·ï¼Œæˆ–æ˜¯è¯´ç¼–æ’å·¥å…·ï¼›Docker æ˜¯ç”¨æ¥æ„å»ºã€è¿è¡Œã€ç®¡ç†å®¹å™¨çš„å·¥å…·ã€‚é‚£ä¹ˆè¿™ä¸ªé—®é¢˜å…¶å®è½åœ¨äº†è™šæ‹Ÿæœºï¼ˆVMï¼‰å’Œ å®¹å™¨ï¼ˆContainerï¼‰çš„åŒºåˆ«ã€‚</p><p>å¼•ç”¨ç½‘ç»œä¸Šä¸€ç»„ç…§ç‰‡æ¥æ„Ÿå—ä¸€ä¸‹ç‰©ç†æœºï¼ˆHostï¼‰ï¼Œè™šæ‹Ÿæœºï¼ˆVMï¼‰å’Œ å®¹å™¨ï¼ˆContainerï¼‰ä¹‹é—´çš„åŒºåˆ«ã€‚</p><p>ç‰©ç†æœºï¼ˆHostï¼‰</p><p><img src="/2022/01/vagrant-vs-docker/host.jpg" alt="ç‰©ç†æœº"></p><p>è™šæ‹Ÿæœºï¼ˆVMï¼‰</p><p><img src="/2022/01/vagrant-vs-docker/vm.jpg" alt="è™šæ‹Ÿæœº"></p><p>å®¹å™¨ï¼ˆContainerï¼‰</p><p><img src="/2022/01/vagrant-vs-docker/docker.jpg" alt="Docker"></p><p>ä»å›¾ä¸Šæˆ‘ä»¬æ›´å®¹æ˜“ç†è§£è™šæ‹Ÿæœºï¼ˆVMï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„è¿™äº›ä¸åŒï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th>è™šæ‹Ÿæœº</th><th>å®¹å™¨</th></tr></thead><tbody><tr><td>éš”ç¦»çº§åˆ«</td><td>æ“ä½œç³»ç»Ÿçº§</td><td>è¿›ç¨‹çº§åˆ«</td></tr><tr><td>éš”ç¦»ç­–ç•¥</td><td>Hypervisor</td><td>CGROUPS</td></tr><tr><td>ç³»ç»Ÿèµ„æº</td><td>5 - 15%</td><td>0 - 5%</td></tr><tr><td>å¯åŠ¨æ—¶é—´</td><td>åˆ†é’Ÿçº§</td><td>ç§’çº§</td></tr><tr><td>é•œåƒå­˜å‚¨</td><td>GB</td><td>MB</td></tr></tbody></table><p>æ€»ç»“ï¼šVagrant å’Œ Docker çš„ä½¿ç”¨åœºæ™¯åŒºåˆ«</p><!-- more --><p><strong>Vagrant è®¾è®¡æ˜¯ç”¨æ¥ç®¡ç†è™šæ‹Ÿæœºçš„ï¼ŒDocker è®¾è®¡æ˜¯ç”¨æ¥ç®¡ç†åº”ç”¨ç¯å¢ƒã€‚</strong></p><p>Vagrant æ›´é€‚åˆç”¨æ¥åšå¼€å‘ã€æµ‹è¯•ï¼Œè§£å†³ç¯å¢ƒä¸€è‡´æ€§çš„é—®é¢˜ï¼›Docker æ›´é€‚åˆåšå¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²ï¼ŒCI&#x2F;CDã€‚</p><p>æœ€åï¼ŒVagrant å’Œ Docker éƒ½æœ‰å¤§é‡ç¤¾åŒºè´¡çŒ®çš„ <a href="https://app.vagrantup.com/boxes/search">â€œBoxâ€</a> å’Œ <a href="https://hub.docker.com/">â€œImageâ€</a> å¯ä¾›é€‰æ‹©ã€‚</p><hr><p>æ¬¢è¿æ‰«ç å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€- ä¸“æ³¨äºDevOpsé¢†åŸŸçŸ¥è¯†åˆ†äº«ã€‚</p><p><img src="https://github.com/shenxianpeng/shenxianpeng.github.io/blob/master/about/index/qrcode.jpg?raw=true" alt=" "></p>]]></content>
      
      
      <categories>
          
          <category> Vagrant </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> VirtualBox </tag>
            
            <tag> Vagrant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯ Vagrant? Vagrant å’Œ VirtualBox çš„åŒºåˆ«</title>
      <link href="/2022/01/vagrant/"/>
      <url>/2022/01/vagrant/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-Vagrant"><a href="#ä»€ä¹ˆæ˜¯-Vagrant" class="headerlink" title="ä»€ä¹ˆæ˜¯ Vagrant"></a>ä»€ä¹ˆæ˜¯ Vagrant</h2><p>Vagrant æ˜¯ä¸€ç§<a href="https://github.com/hashicorp/vagrant">å¼€æº</a>è½¯ä»¶äº§å“ï¼Œç”¨æ¥æ–¹ä¾¿æ„å»ºå’Œç»´æŠ¤è™šæ‹Ÿè½¯ä»¶å¼€å‘ç¯å¢ƒã€‚</p><p>ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥åŸºäº VirtualBoxã€VMwareã€KVMã€Hyper-V å’Œ AWS ç”šè‡³æ˜¯ Docker ç­‰æä¾›å•†æ¥æ„å»ºå¼€å‘ç¯å¢ƒã€‚å®ƒé€šè¿‡ç®€åŒ–è™šæ‹ŸåŒ–çš„è½¯ä»¶é…ç½®ç®¡ç†ï¼Œæ¥æé«˜å¼€å‘æ•ˆç‡ã€‚</p><p>Vagrant æ˜¯ç”¨ Ruby è¯­è¨€å¼€å‘çš„ï¼Œä½†å®ƒçš„ç”Ÿæ€ç³»ç»Ÿæ”¯æŒä½¿ç”¨å…¶ä»–å‡ ç§è¯­è¨€è¿›è¡Œå¼€å‘ã€‚</p><p>ç®€å•æ¥è¯´ Vagrant æ˜¯å¯¹ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ä¸€å±‚å°è£…ï¼Œèƒ½å¤Ÿè®©ä½ æ›´æ–¹ä¾¿çš„ä½¿ç”¨è™šæ‹Ÿå¼€å‘ç¯å¢ƒã€‚</p><h2 id="Vagrant-çš„å‘å±•å²"><a href="#Vagrant-çš„å‘å±•å²" class="headerlink" title="Vagrant çš„å‘å±•å²"></a>Vagrant çš„å‘å±•å²</h2><span id="more"></span><p>Vagrant æœ€åˆæ˜¯ç”± <a href="https://www.hashicorp.com/about?name=mitchell-hashimoto">Mitchell Hashimoto</a> äº 2010 å¹´ 1 æœˆä½œä¸ºä¸ªäººé¡¹ç›®å¯åŠ¨çš„ã€‚</p><p>Vagrant çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬äº 2010 å¹´ 3 æœˆå‘å¸ƒã€‚2010 å¹´ 10 æœˆï¼ŒEngine Yard å®£å¸ƒä»–ä»¬å°†èµåŠ© Vagrant é¡¹ç›®ã€‚</p><p>Vagrant çš„ç¬¬ä¸€ä¸ªç¨³å®šç‰ˆæœ¬ Vagrant 1.0 äº 2012 å¹´ 3 æœˆå‘å¸ƒï¼Œæ­£å¥½æ˜¯åŸå§‹ç‰ˆæœ¬å‘å¸ƒä¸¤å¹´åã€‚</p><p>åŒå¹´ 11 æœˆï¼ŒMitchell æˆç«‹äº† HashiCorp å…¬å¸ï¼Œä»¥æ”¯æŒ Vagrant çš„å…¨èŒå¼€å‘ã€‚Vagrant ä»ç„¶æ˜¯å¼€æºè½¯ä»¶ï¼ŒHashiCorp å…¬å¸è‡´åŠ›äºåˆ›å»ºå•†ä¸šç‰ˆæœ¬ï¼Œå¹¶ä¸º Vagrant æä¾›ä¸“ä¸šæ”¯æŒå’ŒåŸ¹è®­ã€‚</p><p>ç°åœ¨ HashiCorp å·²ç»æˆä¸ºä¸–ç•Œé¡¶çº§å¼€æºå…¬å¸ï¼Œå®ƒé€šè¿‡ä¸€ç³»åˆ—çš„äº§å“ï¼ŒåŒ…æ‹¬ Vagrantï¼ŒPackerï¼ˆæ‰“åŒ…ï¼‰ï¼ŒMomadï¼ˆéƒ¨ç½²ï¼‰ï¼ŒTerraformï¼ˆé…ç½®äº‘ç¯å¢ƒï¼‰ï¼ŒVaultï¼ˆæƒé™ç®¡ç†ï¼‰ ä»¥åŠ Consulï¼ˆç›‘æ§ï¼‰ï¼Œä»ç«¯åˆ°ç«¯é‡æ–°å®šä¹‰äº†æ•´ä¸ª DevOpsã€‚</p><p>Vagrant æœ€åˆæ”¯æŒ VirtualBoxï¼Œåœ¨ 1.1 ç‰ˆå¢åŠ äº†å¯¹å…¶ä»–è™šæ‹ŸåŒ–è½¯ä»¶ï¼ˆå¦‚ VMware å’Œ KVMï¼‰çš„æ”¯æŒï¼Œä»¥åŠå¯¹ Amazon EC2 ç­‰æœåŠ¡å™¨ç¯å¢ƒçš„æ”¯æŒã€‚ä» 1.6 ç‰ˆå¼€å§‹ï¼ŒVagrant åŸç”Ÿæ”¯æŒ Docker å®¹å™¨ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥æ›¿ä»£å®Œå…¨è™šæ‹ŸåŒ–çš„æ“ä½œç³»ç»Ÿã€‚</p><h2 id="å¦‚ä½•ä½¿ç”¨-Vagrant"><a href="#å¦‚ä½•ä½¿ç”¨-Vagrant" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ Vagrant"></a>å¦‚ä½•ä½¿ç”¨ Vagrant</h2><p>ä½¿ç”¨ Vagrant çš„å‰ææ¡ä»¶ï¼š</p><ol><li>å®‰è£… Vagrantã€‚ä¸‹è½½ <a href="https://www.vagrantup.com/downloads">Vagrant</a></li><li>å®‰è£… <a href="https://www.virtualbox.org/">VirtualBox</a></li></ol><p>å½“ä»¥ä¸Šä¸¤ä¸ªéƒ½å‡†å¤‡å¥½äº†ï¼Œä½ å°±å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºå¹¶ä½¿ç”¨ä½ çš„è™šæ‹Ÿæœºäº†ã€‚</p><p>æ¯”å¦‚ä½ éœ€è¦ä¸€ä¸ª <a href="https://app.vagrantup.com/hashicorp/boxes/bionic64">Ubuntu 18.04 LTS 64-bit</a>çš„è™šæ‹Ÿæœºã€‚æ›´å¤šå…¶ä»–çš„è™šæ‹Ÿæœºå¯ä»¥åˆ° <a href="https://app.vagrantup.com/boxes/search">Box</a> ç½‘ç«™ä¸Šå»æœç´¢æŸ¥æ‰¾ï¼Œå®ƒç±»ä¼¼äº Docker Hubï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸Šé¢ä¸‹è½½å’Œä¸Šä¼ å„ç§ Vagrant Boxã€‚</p><p>ä½ åªéœ€æ‰§è¡Œä¸€äº›ç®€å•çš„å‘½ä»¤å°±å¯ä»¥å®Œæˆå¯åŠ¨ã€ç™»å½•ã€é€€å‡ºã€åŠé”€æ¯ã€‚</p><p>åˆå§‹åŒ– Vagrant</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vagrant init hashicorp/bionic64</span><br></pre></td></tr></table></figure><p>å¯åŠ¨è™šæ‹Ÿæœºã€‚å¤§æ¦‚å‡ åç§’é’Ÿå°±å¯ä»¥å®Œæˆäº†ï¼ˆç¬¬ä¸€æ¬¡éœ€è¦ä¸‹è½½é•œåƒï¼Œæ—¶é—´ä¼šé•¿ä¸€ç‚¹ï¼Œå–å†³äºç½‘é€Ÿï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vagrant up</span><br></pre></td></tr></table></figure><p>ç™»å½•ä½ çš„è™šæ‹Ÿæœºï¼Œç„¶åå¯ä»¥ä½¿ç”¨ä½ åˆ›å»ºçš„ Ubuntu è™šæ‹Ÿæœºäº†</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vagrant ssh</span><br></pre></td></tr></table></figure><p>å½“ä½ ä¸æƒ³ç”¨çš„æ—¶å€™ï¼Œæ‰§è¡Œ <code>logout</code> å°±å¯ä»¥é€€å‡ºç™»å½•äº†ã€‚</p><h2 id="Vagrant-å’Œä¼ ç»Ÿè™šæ‹Ÿæœºè½¯ä»¶çš„åŒºåˆ«"><a href="#Vagrant-å’Œä¼ ç»Ÿè™šæ‹Ÿæœºè½¯ä»¶çš„åŒºåˆ«" class="headerlink" title="Vagrant å’Œä¼ ç»Ÿè™šæ‹Ÿæœºè½¯ä»¶çš„åŒºåˆ«"></a>Vagrant å’Œä¼ ç»Ÿè™šæ‹Ÿæœºè½¯ä»¶çš„åŒºåˆ«</h2><!-- more --><p><img src="/2022/01/vagrant/vagrant_virtualbox.png" alt="Vagrant"></p><p>Vagrant ç›¸æ¯”ä¼ ç»Ÿä½¿ç”¨è™šæ‹Ÿæœºçš„æ–¹å¼è¦æ–¹ä¾¿å¾—å¤šï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¼ ç»Ÿæ–¹å¼æ˜¯æ€æ ·åˆ›å»ºä¸€å°è™šæ‹Ÿæœºçš„ã€‚</p><p>è¿˜æ˜¯ä»¥ VirtualBox ä¸ºä¾‹ï¼Œå‡è®¾ä½ å·²ç»å®‰è£…å¥½äº† VirtualBoxï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è¦åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºçš„åŠ¨ä½œæ˜¯è¿™æ ·çš„ï¼š</p><p>é¦–å…ˆï¼Œä¸‹è½½å¯¹åº”çš„ ISO æ–‡ä»¶<br>ç„¶åï¼Œç”¨ VirtualBox æˆ– VMware æ¥åŠ è½½ ISO<br>æœ€åï¼Œé€šè¿‡ä¸€æ­¥æ­¥çš„é…ç½® CPUã€å†…å­˜ã€ç£ç›˜ï¼Œç½‘ç»œã€ç”¨æˆ·ç­‰è®¾ç½®ï¼Œç­‰å¾…å®‰è£…å®Œæˆå®‰è£…</p><p>è¿™ç§æ–¹å¼é…ç½®èµ·æ¥å°±éå¸¸ç¹çï¼Œéœ€è¦ä¸€æ­¥æ­¥åœ°è¿›è¡Œã€‚è¿™äº›é…ç½®çš„æ­¥éª¤å¾€å¾€è¿˜ä¼šå†™ä¸€ä¸ªæ–‡æ¡£æ¥è®°å½•ä¸‹æ¥æ‰èƒ½ä¿è¯ä»¥åèƒ½å¤Ÿåˆ›å»ºå‡ºæ¥â€œä¸€æ¨¡ä¸€æ ·â€çš„è™šæ‹Ÿå¼€å‘ç¯å¢ƒã€‚</p><p>ç›¸ä¿¡é€šè¿‡å¯¹æ¯”ä½ å·²ç»å¤§æ¦‚äº†è§£ Vagrant æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Œä»¥åŠå®ƒå’Œä¼ ç»Ÿä½¿ç”¨è™šæ‹Ÿæœºä¹‹é—´çš„ä¸€äº›åŒºåˆ«äº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Vagrant ç›¸æ¯”äºä¼ ç»Ÿä½¿ç”¨è™šæ‹Ÿæœºçš„ä¼˜åŠ¿ï¼šæä¾›æ˜“äºé…ç½®ã€å¯é‡ç°å’Œä¾¿æºçš„å·¥ä½œç¯å¢ƒï¼Œä»è€Œæé«˜ç”Ÿäº§åŠ›å’Œçµæ´»æ€§ã€‚</p><p><strong>Vagrant å¯ä»¥è¯´æ˜¯åˆ›å»ºã€ç®¡ç†è™šæ‹ŸåŒ–ç¯å¢ƒçš„æœ€ç®€å•ã€æœ€å¿«æ·çš„æ–¹å¼ï¼</strong></p><p>å®ƒä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆæ–¹ä¾¿æ˜¯ç«™åœ¨äº†è¿™äº›å·¨äººï¼ˆVirtualBoxã€VMwareã€AWSã€OpenStack æˆ–å…¶ä»–æä¾›å•†ï¼‰çš„è‚©è†€ä¸Šï¼Œç„¶åé€šè¿‡ Shell è„šæœ¬ã€Ansbileã€Chefã€Puppet ç­‰å·¥å…·å®ç°è‡ªåŠ¨åœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…å’Œé…ç½®è½¯ä»¶ã€‚</p><p>ä¸‹ä¸€ç¯‡å°†ä»‹ç» Vagrant å’Œ Docker ä¹‹é—´çš„<a href="https://shenxianpeng.github.io/2022/01/vagrant-vs-docker/">åŒºåˆ«</a>ã€‚</p><hr><p>æ¬¢è¿æ‰«ç å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€- ä¸“æ³¨äºDevOpsé¢†åŸŸçŸ¥è¯†åˆ†äº«ã€‚</p><p><img src="https://github.com/shenxianpeng/shenxianpeng.github.io/blob/master/about/index/qrcode.jpg?raw=true" alt=" "></p>]]></content>
      
      
      <categories>
          
          <category> Vagrant </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VirtualBox </tag>
            
            <tag> Vagrant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯ Go ï¼ŸGo çš„ä¼˜åŠ¿å’Œç°çŠ¶ã€‚åˆå­¦è€…åº”è¯¥å­¦ä¹  Python è¿˜æ˜¯ Goï¼Ÿ</title>
      <link href="/2022/01/what-is-go/"/>
      <url>/2022/01/what-is-go/</url>
      
        <content type="html"><![CDATA[<p>Go æ˜¯ä¸€ç§å¼€æºç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥è½»æ¾æ„å»ºç®€å•ã€å¯é å’Œé«˜æ•ˆçš„è½¯ä»¶ã€‚</p><h2 id="Go-è¿˜æ˜¯-Golang"><a href="#Go-è¿˜æ˜¯-Golang" class="headerlink" title="Go è¿˜æ˜¯ Golang"></a>Go è¿˜æ˜¯ Golang</h2><p>å…ˆé—®ä¸€ä¸ªå¤§å¤šæ•°äººå¯èƒ½ä¼šå¿½ç•¥çš„é—®é¢˜ï¼šGoogle çš„è¿™é—¨å¼€æºç¼–ç¨‹è¯­è¨€å« Go è¿˜æ˜¯ Golangï¼Ÿè¿˜æ˜¯ä¸¤ä¸ªéƒ½è¡Œï¼Ÿç»™ä½ ä¸‰ç§’é’Ÿæƒ³ä¸€ä¸‹ â€¦</p><p>Google è¯´ï¼šå®ƒå« Goã€‚ä¹‹æ‰€ä»¥æœ‰äººç§°å®ƒä¸º Golang æ˜¯ç”±äºä¹‹å‰çš„ Go è¯­è¨€å®˜ç½‘æ˜¯ golang.orgï¼ˆå› ä¸º go.org å·²ç»è¢«åˆ«äººç”¨äº†ï¼‰ï¼Œå› æ­¤æœ‰äººå°† Golang å’Œ Go æ··ç”¨äº†ã€‚</p><p>ç°åœ¨è¾“å…¥ golang.org ä¼šç›´æ¥è·³è½¬åˆ° go.dev è¿™ä¸ªç½‘å€ï¼Œè¿™ä¹Ÿç®—æ˜¯å½»åº•ç»™è‡ªå®¶å­©å­æ­£ä¸ªåã€‚</p><h2 id="Go-è¯­è¨€æœ‰å“ªäº›ä¼˜åŠ¿"><a href="#Go-è¯­è¨€æœ‰å“ªäº›ä¼˜åŠ¿" class="headerlink" title="Go è¯­è¨€æœ‰å“ªäº›ä¼˜åŠ¿"></a>Go è¯­è¨€æœ‰å“ªäº›ä¼˜åŠ¿</h2><p>å®˜ç½‘æ˜¯è¿™æ ·ä»‹ç» Go è¯­è¨€çš„ï¼š</p><ul><li>Go é€‚åˆå¤§è§„æ¨¡å¿«é€Ÿæ„å»ºï¼Œå¯é ã€é«˜æ•ˆçš„è½¯ä»¶</li><li>Go æ˜¯ Google åœ¨èƒŒåæ”¯æŒçš„ä¸€é—¨å¼€æºç¼–ç¨‹è¯­è¨€</li><li>æ˜“äºå­¦ä¹ å’Œå…¥é—¨</li><li>å†…ç½®å¹¶å‘å’Œå¼ºå¤§çš„æ ‡å‡†åº“</li><li>ä¸æ–­å‘å±•çš„åˆä½œä¼™ä¼´ã€ç¤¾åŒºå’Œå·¥å…·ç”Ÿæ€ç³»ç»Ÿ</li></ul><p>ä»Šå¤©ï¼ŒGo è¢«ç”¨äºå„ç§åº”ç”¨ç¨‹åºï¼š</p><span id="more"></span><ul><li>Go åœ¨åŸºäºäº‘æˆ–æœåŠ¡å™¨ç«¯çš„åº”ç”¨ç¨‹åºä¸­å¾ˆå—æ¬¢è¿</li><li>äº‘åŸºç¡€è®¾æ–½æ–¹é¢ã€‚å½“ä»Šæœ€æµè¡Œçš„åŸºç¡€è®¾æ–½å·¥å…·æ˜¯ç”¨ Go ç¼–å†™çš„ï¼Œä¾‹å¦‚ Kubernetesã€Docker å’Œ Prometheus</li><li>è®¸å¤šå‘½ä»¤è¡Œå·¥å…·éƒ½æ˜¯ç”¨ Go ç¼–å†™çš„</li><li>DevOps å’Œ Web å¯é æ€§è‡ªåŠ¨åŒ–ä¹Ÿå¸¸å¸¸ç”¨ Go æ¥å†™</li><li>Go ä¹Ÿè¢«ç”¨äºäººå·¥æ™ºèƒ½å’Œæ•°æ®ç§‘å­¦é¢†åŸŸ</li><li>å¾®æ§åˆ¶å™¨ç¼–ç¨‹ã€æœºå™¨äººæŠ€æœ¯å’Œæ¸¸æˆä¸­ä½¿ç”¨ä¹Ÿä¼šä½¿ç”¨ Go</li></ul><p>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ Go è¶Šæ¥è¶Šæµè¡Œã€‚</p><p>æ­£æ˜¯å› ä¸ºè¿™äº›ä¼˜åŠ¿ä»¥åŠåœ¨å·¥ä½œä¸Šçš„éœ€è¦å†™ä¸€ä¸ª CLIï¼Œæˆ‘å°±å…¥é—¨ Go è¯­è¨€äº†ã€‚</p><h2 id="Go-è¯­è¨€çš„æ’å"><a href="#Go-è¯­è¨€çš„æ’å" class="headerlink" title="Go è¯­è¨€çš„æ’å"></a>Go è¯­è¨€çš„æ’å</h2><p>Go è¯­è¨€åœ¨å›½å†…çƒ­åº¦å¯è°“æ˜¯éå¸¸é«˜äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Go è¯­è¨€ç›®å‰æœ€æ–°çš„æ’åæ€ä¹ˆæ ·ã€‚</p><!-- more --><p><img src="/2022/01/what-is-go/tiobe-index-go.png" alt="Goè¯­è¨€æ’å"></p><p>è¿™æ˜¯ TIOBE 2022 å¹´ä¸€æœˆæ’åå‰ 20 ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥çœ‹åˆ° Go è¯­è¨€ä½äºè¿™ä¸ªæ’è¡Œæ¦œçš„ç¬¬ 13 ä½ï¼Œç›¸æ¯”äºå»å¹´ä¸Šå‡äº†ä¸€ä½ã€‚</p><p>å¯¹æ¯”æ’åœ¨æ¦œå•å‰äº”çš„ Pythonï¼ŒCï¼ŒJavaï¼ŒC++ï¼ŒC#ï¼Œä½ è§‰å¾— Go èƒ½å¦è¿½ä¸Šå®ƒä»¬å‘¢ï¼Ÿ</p><p>ä»æˆ‘èº«è¾¹éäº‘å‚å•†çš„å…¬å¸å’ŒåŒäº‹æ¥çœ‹ï¼Œç›®å‰å¤§å¤šæ•°éƒ½æ˜¯ C&#x2F;C++ï¼ŒJavaï¼ŒC#ï¼ŒPython çš„å¼€å‘äººå‘˜ï¼Œæ‰€ä»¥è¿™ä¸ªæ’åæˆ‘è®¤ä¸ºè¿˜æ˜¯æŒºç¬¦åˆé¢„æœŸçš„ã€‚</p><h2 id="åˆå­¦è€…åº”è¯¥å­¦ä¹ -Python-è¿˜æ˜¯-Go-ï¼Ÿ"><a href="#åˆå­¦è€…åº”è¯¥å­¦ä¹ -Python-è¿˜æ˜¯-Go-ï¼Ÿ" class="headerlink" title="åˆå­¦è€…åº”è¯¥å­¦ä¹  Python è¿˜æ˜¯ Go ï¼Ÿ"></a>åˆå­¦è€…åº”è¯¥å­¦ä¹  Python è¿˜æ˜¯ Go ï¼Ÿ</h2><p>Python å·²æœ‰ 30 å¤šå¹´çš„å†å²ï¼Œä½†å®ƒçš„å—æ¬¢è¿ç¨‹åº¦ä»åœ¨ç»§ç»­å¢é•¿ã€‚Python æ˜¯ä¸€é—¨å‡ºè‰²çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼æ¥ç¼–å†™ä»£ç ã€‚åœ¨æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä½ å¯èƒ½æ‰¾ä¸åˆ°ä¸€ç§æ¯” Python è¢«æ›´å¤šéç¨‹åºå‘˜ä½¿ç”¨çš„è¯­è¨€ã€‚</p><ul><li>å®ƒçš„çµæ´»æ€§æ˜¯ Python å¦‚æ­¤å—æ¬¢è¿çš„åŸå› ä¹‹ä¸€</li><li>å®ƒç»å¸¸ç”¨äºç¼–å†™è„šæœ¬ï¼ŒWeb å¼€å‘ã€æ•°æ®ç§‘å­¦ã€ä»¥åŠé¢å‘å­©å­ä»¬æ•™æˆç¼–ç¨‹ã€åˆ¶ä½œåŠ¨ç”»ç­‰ç­‰ã€‚</li></ul><p>é‚£ä¹ˆ Go ä¸ Python ç›¸æ¯”å¦‚ä½•å‘¢ï¼Ÿ</p><ul><li>Python å’Œ Go éƒ½å…·æœ‰ç®€å•çš„è¯­æ³•</li><li>Python å’Œ Go å¯¹äºåˆå­¦è€…æ¥è¯´éƒ½å¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œä¸”ç›¸å¯¹å®¹æ˜“å­¦ä¹ ï¼ˆPython ç›¸å¯¹æ›´å®¹æ˜“ï¼‰</li><li>Python å¾€å¾€åœ¨æ•°æ®ç§‘å­¦é¢†åŸŸå æ®ä¸»å¯¼åœ°ä½ï¼›Go éå¸¸é€‚åˆç³»ç»Ÿç¼–ç¨‹</li><li>ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦ Go æ¯” Python å¿«å¤šäº†</li><li>ä½œä¸ºé«˜çº§è¯­è¨€ï¼ŒPython æ‹¥æœ‰æ›´å¹¿æ³›çš„åº“å’Œå›´ç»•å®ƒå»ºç«‹çš„ç¤¾åŒº</li><li>Go æ˜¯å¤„ç†å¤§å‹å¹¶å‘åº”ç”¨ç¨‹åºçš„ç†æƒ³é€‰æ‹©ã€æ”¯æŒå¹¶å‘ï¼ŒåŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åº&#x2F;ä»»åŠ¡çš„èƒ½åŠ›ã€‚Python æ²¡æœ‰ã€‚</li></ul><p>ä»Šå¤© Python å’Œ Go éƒ½æ˜¯ç›®å‰æœ€æµè¡Œå’Œæœ€æ–¹ä¾¿ä½¿ç”¨çš„ä¸¤ç§ç¼–ç¨‹è¯­è¨€ã€‚å¯¹äºåˆå­¦è€…åº”è¯¥æ˜¯å­¦ä¹  Python è¿˜æ˜¯ Go ï¼Ÿ</p><ul><li>å¦‚æœä½ æ˜¯é›¶åŸºç¡€ï¼Œå»ºè®®å…ˆå­¦ä¹  Pythonã€‚ç›¸æ¯”äº Goï¼ŒPython è¿˜æ˜¯æ›´å®¹æ˜“å­¦ä¹ ã€‚</li><li>å¦‚æœä½ æ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæƒ³å­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå»ºè®®å­¦ä¹  Pythonã€‚å› æ­¤ç»å¤§å¤šæ•°çš„è‡ªåŠ¨åŒ–æµ‹è¯•å²—ä½è¦æ±‚æ˜¯æŒæ¡ Pythonã€‚</li><li>å¦‚æœä½ æ˜¯è½¯ä»¶å¼€å‘ã€DevOps å·¥ç¨‹å¸ˆï¼Œæœ€å¥½ä¸¤é—¨éƒ½è¦ä¼šã€‚â€å°å­©å­æ‰åšé€‰æ‹©ï¼Œå¤§äººå…¨éƒ½è¦ã€‚â€</li></ul><h2 id="å¦‚ä½•å­¦ä¹ -Go-è¯­è¨€"><a href="#å¦‚ä½•å­¦ä¹ -Go-è¯­è¨€" class="headerlink" title="å¦‚ä½•å­¦ä¹  Go è¯­è¨€"></a>å¦‚ä½•å­¦ä¹  Go è¯­è¨€</h2><ul><li><p>çœ‹æ–‡æ¡£æˆ–è§†é¢‘ï¼Œæœ€æœ€é‡è¦çš„æ˜¯è¦åŠ¨æ‰‹ï¼ï¼</p><p>æˆ‘æœ€æ—©æ˜¯åœ¨ 2010~2020 æœŸé—´çœ‹è¿‡ Go è¯­è¨€çš„è§†é¢‘æ•™ç¨‹ï¼Œä½†ç”±äºæ²¡æ€ä¹ˆåŠ¨æ‰‹å†™è¿‡ï¼Œä¸€ç›´å¤„åœ¨åªçŸ¥å…¶ä¸€ä¸çŸ¥å…¶äºŒçš„é˜¶æ®µã€‚</p><p>å¯¹äºæ–°æ‰‹å­¦ä¹ ä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œçœ‹æ•™ç¨‹å¤§æ¦‚åªèƒ½å­¦ä¼š 30%ï¼Œæƒ³è¦çœŸæ­£çš„å­¦ä¼šå¿…é¡»äº²è‡ªä¸Šæ‰‹å®è·µï¼Œå¦åˆ™ä¸€å®šä¼šæ˜¯ï¼šâ€œä¸€çœ‹å°±ä¼šï¼Œä¸€å†™å°±åºŸâ€ã€‚</p></li><li><p>ç¡®å®šè¦ä¸€ä¸ªæ–¹å‘ï¼Œç«‹åˆ»å¼€å§‹ Codingã€‚</p><p>æˆ‘çš„æ–¹å‘å°±æ˜¯å†™ä¸€ä¸ª CLI å·¥å…·ã€‚å°½ç®¡ Go è¯­è¨€å†…ç½®çš„ Flag è¿™ä¸ª package å¯ä»¥ç”¨æ¥ç¼–å†™ CLI å‘½ä»¤ï¼Œæˆ‘ä¹Ÿçœ‹äº†å¾ˆå¤šä½¿ç”¨ Go å¼€å‘çš„ CLI é¡¹ç›®åï¼Œæ³¨æ„åˆ°è¿™äº›é¡¹ç›®éƒ½æ²¡æœ‰ä½¿ç”¨å†…ç½®çš„ Flag åŒ…ï¼Œè€Œæ˜¯ç»å¤§å¤šæ•°ä½¿ç”¨äº† <a href="https://github.com/spf13/cobra">spf13&#x2F;cobra</a> æˆ– <a href="https://github.com/urfave/cli">urfave&#x2F;cli</a>ã€‚</p><ul><li>è¿™æ˜¯ä½¿ç”¨ cobra çš„é¡¹ç›®<a href="https://github.com/spf13/cobra/blob/master/projects_using_cobra.md">åˆ—è¡¨</a>ï¼Œå…¶ä¸­åŒ…æ‹¬äº†è‘—åçš„é¡¹ç›®æ¯”å¦‚ Kubernetes, Hugo, Dockerï¼ŒGithub CLI ç­‰éƒ½ä½¿ç”¨çš„ cobraã€‚</li><li>è‡³äº urfave&#x2F;cliï¼Œæˆ‘çœ‹åˆ° Jfrog CLI åœ¨ä½¿ç”¨å®ƒï¼Œå…¶ä»–æ­£åœ¨ä½¿ç”¨ urfave&#x2F;cli çš„çŸ¥åé¡¹ç›®æˆ‘å¹¶æ²¡æœ‰çœ‹åˆ°åƒ cobra é‚£æ ·çš„åˆ—è¡¨ã€‚</li></ul><p>å¯¹äºæˆ‘è¿™æ ·çš„åˆå­¦è€…ï¼Œæœ€é‡è¦çš„æ˜¯é©¬ä¸Šå¼€å§‹ï¼Œå› æ­¤åœ¨é€‰æ‹©çš„æ¡†æ¶çš„æ—¶å€™ä¸éœ€è¦èŠ±è´¹å¤ªå¤šæ—¶é—´ï¼Œcobra æœ‰é‚£ä¹ˆå¤šä¼˜ç§€çš„é¡¹ç›®èƒŒä¹¦ï¼Œè·Ÿç€ç”¨å°±è¡Œï¼Œæœ€é‡è¦çš„æ˜¯å°½å¿«åŠ¨æ‰‹ã€‚åœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œé€‰æ‹©åŒæ ·ä½¿ç”¨è¯¥æ¡†æ¶çš„é¡¶çº§é¡¹ç›®åšå‚è€ƒï¼Œè¿™èƒ½å¸®åŠ©æˆ‘ä»¬é€šè¿‡é˜…è¯»åˆ«äººçš„ä»£ç ä¹Ÿè®©æˆ‘ä»¬è‡ªå·±å†™å‡ºæ›´ä¼˜ç§€çš„ä»£ç ã€‚åƒä¸‡ä¸è¦å» Ctrl + C ç„¶å Ctrl + Vã€‚</p></li><li><p>æœ€åï¼Œå†åˆ†äº«å‡ ä¸ªåœ¨å¼€å‘ CLI æ—¶ä¸€åˆ‡å…¶ä»–çš„ä¼˜ç§€é¡¹ç›®ã€‚æ¯”å¦‚ï¼š</p><ul><li>github.com&#x2F;AlecAivazis&#x2F;survey&#x2F;v2 - æ”¯æŒç»ˆç«¯ä¸Šæ„å»ºäº¤äº’å¼å‘½ä»¤è¡Œ</li><li>github.com&#x2F;enescakir&#x2F;emoji - è¡¨æƒ…ç¬¦å·åº“ï¼Œæ”¯æŒåœ¨ç»ˆç«¯è¾“å‡ºè¡¨æƒ…ç¬¦å·</li><li>github.com&#x2F;mgutz&#x2F;ansi - å¯ä»¥åˆ›å»º ANSI å½©è‰²å­—ç¬¦ä¸²</li></ul></li></ul><hr><p>æ¬¢è¿æ‰«ç å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€- ä¸“æ³¨äºDevOpsé¢†åŸŸçŸ¥è¯†åˆ†äº«ã€‚</p><p><img src="https://github.com/shenxianpeng/shenxianpeng.github.io/blob/master/about/index/qrcode.jpg?raw=true" alt=" "></p>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
            <tag> CLI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ ä¸€å®šè¦äº†è§£è¿™ 17 æ¡ Docker æœ€ä½³å®è·µï¼</title>
      <link href="/2022/01/docker-best-practice/"/>
      <url>/2022/01/docker-best-practice/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡åˆ†äº«åœ¨ç¼–å†™ Dockerfiles å’Œä½¿ç”¨ Docker æ—¶åº”éµå¾ªçš„ä¸€äº›æœ€ä½³å®è·µã€‚ç¯‡å¹…è¾ƒé•¿ï¼Œå»ºè®®å…ˆæ”¶è—æ…¢æ…¢çœ‹ï¼Œä¿è¯çœ‹å®Œä¼šå¾ˆæœ‰æ”¶è·ã€‚</p><h2 id="æ–‡ç« ç›®å½•"><a href="#æ–‡ç« ç›®å½•" class="headerlink" title="æ–‡ç« ç›®å½•"></a>æ–‡ç« ç›®å½•</h2><p>Dockerfile æœ€ä½³å®è·µ</p><ol><li>ä½¿ç”¨å¤šé˜¶æ®µçš„æ„å»º</li><li>è°ƒæ•´ Dockerfile å‘½ä»¤çš„é¡ºåº</li><li>ä½¿ç”¨å°å‹ Docker åŸºç¡€é•œåƒ</li><li>å°½é‡å‡å°‘å±‚çš„æ•°é‡</li><li>ä½¿ç”¨æ— ç‰¹æƒçš„å®¹å™¨</li><li>ä¼˜å…ˆé€‰æ‹© <code>COPY</code> è€Œä¸æ˜¯ <code>ADD</code></li><li>å°† <code>Python</code> åŒ…ç¼“å­˜åˆ° Docker ä¸»æœºä¸Š</li><li>æ¯ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</li><li>ä¼˜å…ˆé€‰æ‹©æ•°ç»„è€Œä¸æ˜¯å­—ç¬¦ä¸²è¯­æ³•</li><li>ç†è§£ <code>ENTRYPOINT</code> å’Œ <code>CMD</code> ä¹‹é—´çš„åŒºåˆ«</li><li>æ·»åŠ å¥åº·æ£€æŸ¥ <code>HEALTHCHECK</code></li></ol><p>Docker é•œåƒæœ€ä½³å®è·µ</p><ol><li>Docker é•œåƒçš„ç‰ˆæœ¬</li><li>ä¸è¦åœ¨é•œåƒä¸­å­˜å‚¨å¯†é’¥</li><li>ä½¿ç”¨ <code>.dockerignore</code> æ–‡ä»¶</li><li>æ£€æŸ¥å’Œæ‰«æä½ çš„ Docker æ–‡ä»¶å’Œé•œåƒ</li><li>ç­¾ç½²å’ŒéªŒè¯é•œåƒ</li></ol><h2 id="Dockerfile-æœ€ä½³å®è·µ"><a href="#Dockerfile-æœ€ä½³å®è·µ" class="headerlink" title="Dockerfile æœ€ä½³å®è·µ"></a>Dockerfile æœ€ä½³å®è·µ</h2><h3 id="1-ä½¿ç”¨å¤šé˜¶æ®µçš„æ„å»º"><a href="#1-ä½¿ç”¨å¤šé˜¶æ®µçš„æ„å»º" class="headerlink" title="1. ä½¿ç”¨å¤šé˜¶æ®µçš„æ„å»º"></a>1. ä½¿ç”¨å¤šé˜¶æ®µçš„æ„å»º</h3><p>åˆ©ç”¨å¤šé˜¶æ®µæ„å»ºçš„ä¼˜åŠ¿æ¥åˆ›å»ºæ›´ç²¾ç®€ã€æ›´å®‰å…¨çš„Dockeré•œåƒã€‚å¤šé˜¶æ®µ Docker æ„å»º(<a href="https://docs.docker.com/develop/develop-images/multistage-build/">multi-stage builds</a>)å…è®¸ä½ å°†ä½ çš„ Dockerfile åˆ†æˆå‡ ä¸ªé˜¶æ®µã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥æœ‰ä¸€ä¸ªé˜¶æ®µç”¨äºç¼–è¯‘å’Œæ„å»ºä½ çš„åº”ç”¨ç¨‹åºï¼Œç„¶åå¯ä»¥å¤åˆ¶åˆ°åç»­é˜¶æ®µã€‚ç”±äºåªæœ‰æœ€åä¸€ä¸ªé˜¶æ®µè¢«ç”¨æ¥åˆ›å»ºé•œåƒï¼Œä¸æ„å»ºåº”ç”¨ç¨‹åºç›¸å…³çš„ä¾èµ–å…³ç³»å’Œå·¥å…·å°±ä¼šè¢«ä¸¢å¼ƒï¼Œå› æ­¤å¯ä»¥ç•™ä¸‹ä¸€ä¸ªç²¾ç®€çš„ã€æ¨¡å—åŒ–çš„ã€å¯ç”¨äºç”Ÿäº§çš„é•œåƒã€‚</p><p>Web å¼€å‘ç¤ºä¾‹ï¼š</p><span id="more"></span><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸´æ—¶é˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim as builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    apt-get install -y --no-install-recommends gcc</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip wheel --no-cache-dir --no-deps --wheel-dir /app/wheels -r requirements.txt</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€ç»ˆé˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /app/wheels /wheels</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /app/requirements.txt .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install --no-cache /wheels/*</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒGCC ç¼–è¯‘å™¨åœ¨å®‰è£…æŸäº› Python åŒ…æ—¶æ˜¯å¿…éœ€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªä¸´æ—¶çš„ã€æ„å»ºæ—¶çš„é˜¶æ®µæ¥å¤„ç†æ„å»ºé˜¶æ®µã€‚</p><p>ç”±äºæœ€ç»ˆçš„è¿è¡Œæ—¶æ˜ åƒä¸åŒ…å« GCCï¼Œæ‰€ä»¥å®ƒæ›´è½»ï¼Œä¹Ÿæ›´å®‰å…¨ã€‚é•œåƒå¤§å°æ¯”è¾ƒï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">REPOSITORY                 TAG                    IMAGE ID       CREATED          SIZE</span><br><span class="line">docker-single              latest                 8d6b6a4d7fb6   16 seconds ago   259MB</span><br><span class="line">docker-multi               latest                 813c2fa9b114   3 minutes ago    156MB</span><br></pre></td></tr></table></figure><p>å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸´æ—¶é˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span> as builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip wheel --no-cache-dir --no-deps --wheel-dir /wheels jupyter pandas</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€ç»ˆé˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /notebooks</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /wheels /wheels</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install --no-cache /wheels/*</span></span><br></pre></td></tr></table></figure><p>é•œåƒå¤§å°æ¯”è¾ƒï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">REPOSITORY                  TAG                   IMAGE ID       CREATED         SIZE</span><br><span class="line">ds-multi                    latest                b4195deac742   2 minutes ago   357MB</span><br><span class="line">ds-single                   latest                7c23c43aeda6   6 minutes ago   969MB</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œå¤šé˜¶æ®µæ„å»ºå¯ä»¥å‡å°‘ä½ çš„ç”Ÿäº§é•œåƒçš„å¤§å°ï¼Œå¸®åŠ©ä½ èŠ‚çœæ—¶é—´å’Œé‡‘é’±ã€‚æ­¤å¤–ï¼Œè¿™å°†ç®€åŒ–ä½ çš„ç”Ÿäº§å®¹å™¨ã€‚ç”±äºå°ºå¯¸è¾ƒå°å’Œç®€å•ï¼Œç›¸å¯¹ä¼šæœ‰è¾ƒå°çš„æ”»å‡»é¢ã€‚</p><h3 id="2-è°ƒæ•´-Dockerfile-å‘½ä»¤çš„é¡ºåº"><a href="#2-è°ƒæ•´-Dockerfile-å‘½ä»¤çš„é¡ºåº" class="headerlink" title="2. è°ƒæ•´ Dockerfile å‘½ä»¤çš„é¡ºåº"></a>2. è°ƒæ•´ Dockerfile å‘½ä»¤çš„é¡ºåº</h3><p>å¯†åˆ‡æ³¨æ„ä½ çš„ Dockerfile å‘½ä»¤çš„é¡ºåºï¼Œä»¥åˆ©ç”¨å±‚ç¼“å­˜ã€‚</p><p>Docker åœ¨ä¸€ä¸ªç‰¹å®šçš„ Docker æ–‡ä»¶ä¸­ç¼“å­˜æ¯ä¸ªæ­¥éª¤ï¼ˆæˆ–å±‚ï¼‰ï¼Œä»¥åŠ å¿«åç»­çš„æ„å»ºã€‚å½“ä¸€ä¸ªæ­¥éª¤å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸ä»…è¯¥æ­¥éª¤ï¼Œè€Œä¸”æ‰€æœ‰åç»­æ­¥éª¤çš„ç¼“å­˜éƒ½å°†è¢«åºŸæ­¢ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> sample.py .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install -r /requirements.txt</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ª Dockerfile ä¸­ï¼Œæˆ‘ä»¬åœ¨å®‰è£…éœ€æ±‚ä¹‹å‰å¤åˆ¶äº†åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚ç°åœ¨ï¼Œæ¯æ¬¡æˆ‘ä»¬æ”¹å˜ sample.py æ—¶ï¼Œæ„å»ºéƒ½ä¼šé‡æ–°å®‰è£…è½¯ä»¶åŒ…ã€‚è¿™æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ Docker å®¹å™¨ä½œä¸ºå¼€å‘ç¯å¢ƒæ—¶ã€‚å› æ­¤ï¼ŒæŠŠç»å¸¸å˜åŒ–çš„æ–‡ä»¶æ”¾åœ¨ Dockerfile çš„æœ«å°¾æ˜¯å¾ˆå…³é”®çš„ã€‚</p><blockquote><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ .dockerignore æ–‡ä»¶æ¥æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œä½¿å…¶ä¸è¢«æ·»åŠ åˆ° Docker æ„å»ºç¯å¢ƒå’Œæœ€ç»ˆé•œåƒä¸­ï¼Œä»è€Œå¸®åŠ©é˜²æ­¢ä¸å¿…è¦çš„ç¼“å­˜å¤±æ•ˆã€‚æ›´å¤šä¿¡æ¯åé¢ä¼šæåˆ°ã€‚</p></blockquote><p>å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ Dockerfile ä¸­ï¼Œä½ åº”è¯¥æŠŠ <code>COPY sample.py .</code> å‘½ä»¤ç§»åˆ°åº•éƒ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install -r /requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> sample.py .</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ã€‚</p><ol><li>æ€»æ˜¯æŠŠå¯èƒ½å‘ç”Ÿå˜åŒ–çš„å±‚æ”¾åœ¨ Dockerfile ä¸­å°½å¯èƒ½çš„ä½ã€‚</li><li>å°†å¤šä¸ª <code>RUN apt-get update</code>ï¼Œ<code>RUN apt-get install</code> ç­‰å‘½ä»¤ç»“åˆåˆ°ä¸€èµ·æ‰§è¡Œã€‚(è¿™ä¹Ÿæœ‰åŠ©äºå‡å°‘é•œåƒçš„å¤§å°ï¼Œåé¢ä¼šå¾ˆå¿«å°±ä¼šæåˆ°è¿™ä¸€ç‚¹)ã€‚</li><li>å¦‚æœä½ æƒ³å…³é—­æŸä¸ª Docker æ„å»ºçš„ç¼“å­˜ï¼Œå¯ä»¥æ·»åŠ  <code>--no-cache=True</code> æ ‡å¿—ã€‚</li></ol><h3 id="3-ä½¿ç”¨å°å‹-Docker-åŸºç¡€é•œåƒ"><a href="#3-ä½¿ç”¨å°å‹-Docker-åŸºç¡€é•œåƒ" class="headerlink" title="3. ä½¿ç”¨å°å‹ Docker åŸºç¡€é•œåƒ"></a>3. ä½¿ç”¨å°å‹ Docker åŸºç¡€é•œåƒ</h3><p>è¾ƒå°çš„ Docker é•œåƒæ›´å…·æœ‰æ¨¡å—åŒ–å’Œå®‰å…¨æ€§ã€‚è¾ƒå°çš„ Docker åŸºç¡€é•œåƒåœ¨æ„å»ºã€æ¨é€å’Œæ‹‰åŠ¨é•œåƒçš„é€Ÿåº¦è¾ƒå°ï¼Œå®ƒä»¬ä¹Ÿå¾€å¾€æ›´å®‰å…¨ï¼Œå› ä¸ºå®ƒä»¬åªåŒ…æ‹¬è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„å¿…è¦åº“å’Œç³»ç»Ÿä¾èµ–ã€‚</p><p>ä½ åº”è¯¥ä½¿ç”¨å“ªä¸ª Docker åŸºç¡€é•œåƒï¼Ÿè¿™ä¸ªæ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„ç­”æ¡ˆï¼Œå®ƒè¿™å–å†³äºä½ è¦åšä»€ä¹ˆã€‚ä¸‹é¢æ˜¯ Python çš„å„ç§ Docker åŸºç¡€é•œåƒçš„å¤§å°æ¯”è¾ƒã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">REPOSITORY   TAG                 IMAGE ID       CREATED      SIZE</span><br><span class="line">python       3.9.6-alpine3.14    f773016f760e   3 days ago   45.1MB</span><br><span class="line">python       3.9.6-slim          907fc13ca8e7   3 days ago   115MB</span><br><span class="line">python       3.9.6-slim-buster   907fc13ca8e7   3 days ago   115MB</span><br><span class="line">python       3.9.6               cba42c28d9b8   3 days ago   886MB</span><br><span class="line">python       3.9.6-buster        cba42c28d9b8   3 days ago   886MB</span><br></pre></td></tr></table></figure><p>è™½ç„¶åŸºäº Alpine Linux çš„ Alpine flavor æ˜¯æœ€å°çš„ï¼Œä½†å¦‚æœä½ æ‰¾ä¸åˆ°å¯ä»¥ä¸ä¹‹é…åˆçš„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¾€å¾€ä¼šå¯¼è‡´æ„å»ºæ—¶é—´çš„å¢åŠ ã€‚å› æ­¤ï¼Œä½ æœ€ç»ˆå¯èƒ½ä¸å¾—ä¸è‡ªå·±æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™å¯èƒ½ä¼šå¢åŠ é•œåƒçš„å¤§å°ï¼ˆå–å†³äºæ‰€éœ€çš„ç³»ç»Ÿçº§ä¾èµ–ï¼‰å’Œæ„å»ºæ—¶é—´ï¼ˆç”±äºå¿…é¡»ä»æºå¤´ç¼–è¯‘ï¼‰ã€‚</p><blockquote><p>å…³äºä¸ºä»€ä¹ˆæœ€å¥½ä¸è¦ä½¿ç”¨åŸºäº Alpine çš„åŸºç¡€é•œåƒï¼Œè¯·å‚è€ƒ<a href="https://pythonspeed.com/articles/base-image-python-docker-images/">é€‚ç”¨äº Python åº”ç”¨ç¨‹åºçš„æœ€ä½³ Docker åŸºç¡€æ˜ åƒ</a> å’Œ <a href="https://pythonspeed.com/articles/alpine-docker-python/">ä½¿ç”¨ Alpine å¯ä»¥ä½¿ Python Docker æ„å»ºé€Ÿåº¦æ…¢ 50 å€</a> äº†è§£æ›´å¤šå…³äºä¸ºä»€ä¹ˆæœ€å¥½é¿å…ä½¿ç”¨åŸºäº Alpine çš„åŸºç¡€é•œåƒã€‚</p></blockquote><p>å½’æ ¹ç»“åº•ï¼Œè¿™éƒ½æ˜¯å…³äºå¹³è¡¡çš„é—®é¢˜ã€‚å¦‚æœæœ‰ç–‘é—®ï¼Œä» <code>*-slim</code> flavor å¼€å§‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå› ä¸ºä½ æ­£åœ¨æ„å»ºä½ çš„åº”ç”¨ç¨‹åºã€‚ä½ æƒ³é¿å…åœ¨æ·»åŠ æ–°çš„ <code>Python</code> åŒ…æ—¶ä¸å¾—ä¸ä¸æ–­åœ°æ›´æ–° Dockerfile ä»¥å®‰è£…å¿…è¦çš„ç³»ç»Ÿçº§ä¾èµ–ã€‚å½“ä½ ä¸ºç”Ÿäº§å¼ºåŒ–ä½ çš„åº”ç”¨ç¨‹åºå’Œ Dockerfile æ—¶ï¼Œä½ å¯èƒ½æƒ³æ¢ç´¢ä½¿ç”¨ Alpine æ¥å®Œæˆå¤šé˜¶æ®µæ„å»ºçš„æœ€ç»ˆé•œåƒã€‚</p><p>å¦å¤–ï¼Œåˆ«å¿˜äº†å®šæœŸæ›´æ–°ä½ çš„åŸºç¡€é•œåƒï¼Œä»¥æé«˜å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚å½“ä¸€ä¸ªåŸºç¡€é•œåƒçš„æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œä¾‹å¦‚ï¼š<code>3.9.6-slim</code> â€“&gt; <code>3.9.7-slim</code>ï¼Œä½ åº”è¯¥æ‹‰å‡ºæ–°çš„é•œåƒå¹¶æ›´æ–°ä½ æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä»¥è·å¾—æ‰€æœ‰æœ€æ–°çš„å®‰å…¨è¡¥ä¸ã€‚</p><h3 id="4-å°½é‡å‡å°‘å±‚çš„æ•°é‡"><a href="#4-å°½é‡å‡å°‘å±‚çš„æ•°é‡" class="headerlink" title="4. å°½é‡å‡å°‘å±‚çš„æ•°é‡"></a>4. å°½é‡å‡å°‘å±‚çš„æ•°é‡</h3><p>å°½é‡æŠŠ <code>RUN</code>ã€<code>COPY</code> å’Œ <code>ADD</code> å‘½ä»¤ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä¼šåˆ›å»ºå±‚ã€‚æ¯ä¸€å±‚éƒ½ä¼šå¢åŠ é•œåƒçš„å¤§å°ï¼Œå› ä¸ºå®ƒä»¬æ˜¯è¢«ç¼“å­˜çš„ã€‚å› æ­¤ï¼Œéšç€å±‚æ•°çš„å¢åŠ ï¼Œé•œåƒå¤§å°ä¹Ÿä¼šå¢åŠ ã€‚</p><p>ä½ å¯ä»¥ç”¨ <code>docker history</code> å‘½ä»¤æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">dockerfile   latest    180f98132d02   51 seconds ago   259MB</span><br><span class="line"></span><br><span class="line">docker <span class="built_in">history</span> 180f98132d02</span><br><span class="line"></span><br><span class="line">IMAGE          CREATED              CREATED BY                                      SIZE      COMMENT</span><br><span class="line">180f98132d02   58 seconds ago       COPY . . <span class="comment"># buildkit                             6.71kB    buildkit.dockerfile.v0</span></span><br><span class="line">&lt;missing&gt;      58 seconds ago       RUN /bin/sh -c pip install -r requirements.tâ€¦   35.5MB    buildkit.dockerfile.v0</span><br><span class="line">&lt;missing&gt;      About a minute ago   COPY requirements.txt . <span class="comment"># buildkit              58B       buildkit.dockerfile.v0</span></span><br><span class="line">&lt;missing&gt;      About a minute ago   WORKDIR /app</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„å°ºå¯¸ã€‚åªæœ‰ <code>RUN</code>ã€<code>COPY</code> å’Œ <code>ADD</code> å‘½ä»¤å¢åŠ äº†é•œåƒçš„å°ºå¯¸ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°é€šè¿‡åˆå¹¶å‘½ä»¤æ¥å‡å°‘é•œåƒçš„å¤§å°ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y gcc</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥åˆå¹¶æˆä¸€ä¸ª <code>RUN</code> å‘½ä»¤ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y gcc</span></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œåˆ›å»ºä¸€ä¸ªå•å±‚è€Œä¸æ˜¯ä¸¤ä¸ªï¼Œè¿™å°±å‡å°‘äº†æœ€ç»ˆé•œåƒçš„å¤§å°ã€‚è™½ç„¶å‡å°‘å±‚æ•°æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œè¿™æœ¬èº«ä¸æ˜¯ä¸€ä¸ªç›®æ ‡ï¼Œè€Œæ˜¯å‡å°‘é•œåƒå¤§å°å’Œæ„å»ºæ—¶é—´çš„ä¸€ä¸ªå‰¯ä½œç”¨ã€‚æ¢å¥è¯è¯´å‘¢ï¼Œä¸å…¶è¯•å›¾ä¼˜åŒ–æ¯ä¸€æ¡å‘½ä»¤ï¼Œä½ æ›´åº”è¯¥å…³æ³¨å‰é¢çš„ä¸‰ç§åšæ³•ï¼ï¼ï¼</p><ol><li>å¤šé˜¶æ®µæ„å»º</li><li>Dockerfileå‘½ä»¤çš„é¡ºåº</li><li>ä»¥åŠä½¿ç”¨ä¸€ä¸ªå°çš„åŸºç¡€é•œåƒã€‚</li></ol><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><ol><li><code>RUN</code>ã€<code>COPY</code> å’Œ <code>ADD</code> éƒ½ä¼šåˆ›å»ºå›¾å±‚</li><li>æ¯ä¸ªå›¾å±‚éƒ½åŒ…å«ä¸å‰ä¸€ä¸ªå›¾å±‚çš„å·®å¼‚</li><li>å›¾å±‚ä¼šå¢åŠ æœ€ç»ˆé•œåƒçš„å¤§å°</li></ol><h4 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h4><ol><li>åˆå¹¶ç›¸å…³å‘½ä»¤</li><li>åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æ‰§è¡Œ <code>RUN</code> æ­¥éª¤ä¸­åˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶</li><li>å°½é‡å‡å°‘è¿è¡Œ <code>apt-get upgrade</code> çš„æ¬¡æ•°ï¼Œå› ä¸ºå®ƒå°†æ‰€æœ‰è½¯ä»¶åŒ…å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</li><li>å¯¹äºå¤šé˜¶æ®µçš„æ„å»ºï¼Œä¸è¦å¤ªæ‹…å¿ƒè¿‡åº¦ä¼˜åŒ–ä¸´æ—¶é˜¶æ®µçš„å‘½ä»¤</li></ol><p>æœ€åï¼Œä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œå»ºè®®å°†å¤šè¡Œå‚æ•°æŒ‰å­—æ¯æ•°å­—æ’åºã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    git \</span></span><br><span class="line"><span class="language-bash">    gcc \</span></span><br><span class="line"><span class="language-bash">    matplotlib \</span></span><br><span class="line"><span class="language-bash">    pillow  \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/*</span></span><br></pre></td></tr></table></figure><h3 id="5-ä½¿ç”¨æ— ç‰¹æƒçš„å®¹å™¨"><a href="#5-ä½¿ç”¨æ— ç‰¹æƒçš„å®¹å™¨" class="headerlink" title="5. ä½¿ç”¨æ— ç‰¹æƒçš„å®¹å™¨"></a>5. ä½¿ç”¨æ— ç‰¹æƒçš„å®¹å™¨</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker åœ¨å®¹å™¨å†…ä»¥ root èº«ä»½è¿è¡Œå®¹å™¨è¿›ç¨‹ã€‚ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ä¸ªç³Ÿç³•çš„åšæ³•ï¼Œå› ä¸ºåœ¨å®¹å™¨å†…ä»¥ root èº«ä»½è¿è¡Œçš„è¿›ç¨‹åœ¨ Docker ä¸»æœºä¸­ä¹Ÿæ˜¯ä»¥ root èº«ä»½è¿è¡Œã€‚</p><p>å› æ­¤ï¼Œå¦‚æœæ”»å‡»è€…è·å¾—äº†å¯¹å®¹å™¨çš„è®¿é—®æƒï¼Œä»–ä»¬å°±å¯ä»¥è·å¾—æ‰€æœ‰çš„ root æƒé™ï¼Œå¹¶å¯ä»¥å¯¹ Docker ä¸»æœºè¿›è¡Œä¸€äº›æ”»å‡»ï¼Œä¾‹å¦‚ï¼š</p><ol><li>å°†æ•æ„Ÿä¿¡æ¯ä»ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿå¤åˆ¶åˆ°å®¹å™¨ä¸­</li><li>æ‰§è¡Œè¿œç¨‹å‘½ä»¤</li></ol><p>ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œç¡®ä¿ä»¥é root ç”¨æˆ·è¿è¡Œå®¹å™¨è¿›ç¨‹ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> addgroup --system app &amp;&amp; adduser --system --group app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> app</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œåˆ é™¤ shell æƒé™ï¼Œç¡®ä¿æ²¡æœ‰ä¸»ç›®å½•ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> addgroup --gid 1001 --system app &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    adduser --no-create-home --shell /bin/false --disabled-password --uid 1001 --system --group app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> app</span><br></pre></td></tr></table></figure><p>éªŒè¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -i sample <span class="built_in">id</span></span><br><span class="line"></span><br><span class="line">uid=1001(app) gid=1001(app) <span class="built_in">groups</span>=1001(app)</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œå®¹å™¨å†…çš„åº”ç”¨ç¨‹åºåœ¨ä¸€ä¸ªé root ç”¨æˆ·ä¸‹è¿è¡Œã€‚ç„¶è€Œï¼Œè¯·è®°ä½ï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹å’Œå®¹å™¨æœ¬èº«ä»ç„¶æ˜¯ä»¥ root æƒé™è¿è¡Œçš„ã€‚</p><p>è¯·åŠ¡å¿…æŸ¥çœ‹ä»¥éæ ¹ç”¨æˆ·èº«ä»½è¿è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹ï¼Œä»¥è·å¾—ä»¥éæ ¹ç”¨æˆ·èº«ä»½è¿è¡Œå®ˆæŠ¤è¿›ç¨‹å’Œå®¹å™¨çš„å¸®åŠ©ã€‚</p><h3 id="6-ä¼˜å…ˆé€‰æ‹©-COPY-è€Œä¸æ˜¯-ADD"><a href="#6-ä¼˜å…ˆé€‰æ‹©-COPY-è€Œä¸æ˜¯-ADD" class="headerlink" title="6. ä¼˜å…ˆé€‰æ‹© COPY è€Œä¸æ˜¯ ADD"></a>6. ä¼˜å…ˆé€‰æ‹© <code>COPY</code> è€Œä¸æ˜¯ <code>ADD</code></h3><p>é™¤éä½ ç¡®å®šä½ éœ€è¦ <code>ADD</code> æ‰€å¸¦æ¥çš„é¢å¤–åŠŸèƒ½ï¼Œå¦åˆ™è¯·ä½¿ç”¨ <code>COPY</code>ã€‚</p><p>é‚£ä¹ˆ <code>COPY</code> å’Œ <code>ADD</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>é¦–å…ˆï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½å…è®¸ä½ ä»ä¸€ä¸ªç‰¹å®šçš„ä½ç½®å¤åˆ¶æ–‡ä»¶åˆ° Docker é•œåƒä¸­ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ADD</span><span class="language-bash"> &lt;src&gt; &lt;dest&gt;</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> &lt;src&gt; &lt;dest&gt;</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶å®ƒä»¬çœ‹èµ·æ¥ä½œç”¨ç›¸åŒï¼Œä½† <code>ADD</code> æœ‰ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚</p><ul><li><code>COPY</code> ç”¨äºå°†æœ¬åœ°æ–‡ä»¶æˆ–ç›®å½•ä» Docker ä¸»æœºå¤åˆ¶åˆ°é•œåƒä¸Šã€‚</li><li><code>ADD</code> å¯ä»¥ç”¨äºåŒæ ·çš„äº‹æƒ…ï¼Œä¹Ÿå¯ä»¥ç”¨äºä¸‹è½½å¤–éƒ¨æ–‡ä»¶ã€‚å¦å¤–ï¼Œå¦‚æœä½ ä½¿ç”¨å‹ç¼©æ–‡ä»¶ï¼ˆtarã€gzipã€bzip2ç­‰ï¼‰ä½œä¸º <src> å‚æ•°ï¼Œ<code>ADD</code> ä¼šè‡ªåŠ¨å°†å†…å®¹è§£å‹åˆ°æŒ‡å®šä½ç½®ã€‚</src></li></ul><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°†ä¸»æœºä¸Šçš„æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°ç›®çš„åœ°</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> /source/path  /destination/path</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> /source/path  /destination/path</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½å¤–éƒ¨æ–‡ä»¶å¹¶å¤åˆ¶åˆ°ç›®çš„åœ°</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> http://external.file/url  /destination/path</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶å’Œæå–æœ¬åœ°å‹ç¼©æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> source.file.tar.gz /destination/path</span></span><br></pre></td></tr></table></figure><p>æœ€å <code>COPY</code> åœ¨è¯­ä¹‰ä¸Šæ¯” <code>ADD</code> æ›´åŠ æ˜ç¡®å’Œæ›´å®¹æ˜“ç†è§£ã€‚</p><h3 id="7-ç¼“å­˜å®‰è£…åŒ…åˆ°-Docker-ä¸»æœºä¸Š"><a href="#7-ç¼“å­˜å®‰è£…åŒ…åˆ°-Docker-ä¸»æœºä¸Š" class="headerlink" title="7. ç¼“å­˜å®‰è£…åŒ…åˆ° Docker ä¸»æœºä¸Š"></a>7. ç¼“å­˜å®‰è£…åŒ…åˆ° Docker ä¸»æœºä¸Š</h3><p>å½“ä¸€ä¸ªéœ€æ±‚æ–‡ä»¶è¢«æ”¹å˜æ—¶ï¼Œé•œåƒéœ€è¦è¢«é‡å»ºä»¥å®‰è£…æ–°çš„åŒ…ã€‚å…ˆå‰çš„æ­¥éª¤å°†è¢«ç¼“å­˜ï¼Œæ­£å¦‚åœ¨æœ€å°åŒ–å±‚æ•°ä¸­æåˆ°çš„ã€‚åœ¨é‡å»ºé•œåƒæ—¶ä¸‹è½½æ‰€æœ‰çš„åŒ…ä¼šå¯¼è‡´å¤§é‡çš„ç½‘ç»œæ´»åŠ¨ï¼Œå¹¶éœ€è¦å¤§é‡çš„æ—¶é—´ã€‚æ¯æ¬¡é‡å»ºéƒ½è¦å ç”¨åŒç­‰çš„æ—¶é—´æ¥ä¸‹è½½ä¸åŒæ„å»ºä¸­çš„é€šç”¨åŒ…ã€‚</p><p>ä»¥ Python ä¸ºä¾‹ï¼Œä½ å¯ä»¥é€šè¿‡å°† pip ç¼“å­˜ç›®å½•æ˜ å°„åˆ°ä¸»æœºä¸Šçš„ä¸€ä¸ªç›®å½•æ¥é¿å…è¿™ç§æƒ…å†µã€‚æ‰€ä»¥å¯¹äºæ¯æ¬¡é‡å»ºï¼Œç¼“å­˜çš„ç‰ˆæœ¬ä¼šæŒç»­å­˜åœ¨ï¼Œè¿™å¯ä»¥æé«˜æ„å»ºé€Ÿåº¦ã€‚</p><p>åœ¨ Docker è¿è¡Œä¸­æ·»åŠ ä¸€ä¸ªå·ï¼Œä½œä¸º <code>-v $HOME/.cache/pip-docker/:/root/.cache/pip</code> æˆ–è€…ä½œä¸º Docker Compose æ–‡ä»¶ä¸­çš„æ˜ å°„ã€‚</p><p>ä¸Šé¢ä»‹ç»çš„ç›®å½•åªä¾›å‚è€ƒï¼Œè¦ç¡®ä¿ä½ æ˜ å°„çš„æ˜¯ cache ç›®å½•ï¼Œè€Œä¸æ˜¯ site-packagesï¼ˆå†…ç½®åŒ…æ‰€åœ¨çš„ä½ç½®ï¼‰ã€‚</p><p>å°†ç¼“å­˜ä» docker é•œåƒä¸­ç§»åˆ°ä¸»æœºä¸Šå¯ä»¥ä¸ºä½ èŠ‚çœæœ€ç»ˆé•œåƒçš„ç©ºé—´ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥ ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> --mount=<span class="built_in">type</span>=cache,target=/root/.cache/pip \</span></span><br><span class="line"><span class="language-bash">        pip install -r requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥ ...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-æ¯ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹"><a href="#8-æ¯ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹" class="headerlink" title="8. æ¯ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹"></a>8. æ¯ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</h3><p>ä¸ºä»€ä¹ˆå»ºè®®æ¯ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Ÿ</p><p>è®©æˆ‘ä»¬å‡è®¾ä½ çš„åº”ç”¨ç¨‹åºæ ˆç”±ä¸¤ä¸ª Web æœåŠ¡å™¨å’Œä¸€ä¸ªæ•°æ®åº“ç»„æˆã€‚è™½ç„¶ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»ä¸€ä¸ªå®¹å™¨ä¸­è¿è¡Œæ‰€æœ‰ä¸‰ä¸ªï¼Œä½†ä½ åº”è¯¥åœ¨ä¸€ä¸ªå•ç‹¬çš„å®¹å™¨ä¸­è¿è¡Œæ¯ä¸ªæœåŠ¡ï¼Œä»¥ä¾¿æ›´å®¹æ˜“é‡å¤ä½¿ç”¨å’Œæ‰©å±•æ¯ä¸ªå•ç‹¬çš„æœåŠ¡ã€‚</p><ul><li>æ‰©å±•æ€§ - ç”±äºæ¯ä¸ªæœåŠ¡éƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„å®¹å™¨ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ°´å¹³åœ°æ‰©å±•ä½ çš„ä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨æ¥å¤„ç†æ›´å¤šçš„æµé‡ã€‚</li><li>å¯é‡ç”¨æ€§ - ä¹Ÿè®¸ä½ æœ‰å¦ä¸€ä¸ªæœåŠ¡éœ€è¦ä¸€ä¸ªå®¹å™¨åŒ–çš„æ•°æ®åº“ï¼Œä½ å¯ä»¥ç®€å•åœ°é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“å®¹å™¨ï¼Œè€Œä¸éœ€è¦å¸¦ç€ä¸¤ä¸ªä¸å¿…è¦çš„æœåŠ¡ã€‚</li><li>æ—¥å¿— - è€¦åˆå®¹å™¨ä¼šè®©æ—¥å¿—å˜å¾—æ›´åŠ å¤æ‚ã€‚ï¼ˆæˆ‘ä»¬å°†åœ¨æœ¬æ–‡åé¢è¿›ä¸€æ­¥è¯¦ç»†è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼‰</li><li>å¯ç§»æ¤æ€§å’Œå¯é¢„æµ‹æ€§ - å½“å®¹å™¨æœ‰è¾ƒå°‘çš„éƒ¨åˆ†åœ¨å·¥ä½œæ—¶ï¼Œåˆ¶ä½œå®‰å…¨è¡¥ä¸æˆ–è°ƒè¯•é—®é¢˜å°±ä¼šå®¹æ˜“å¾—å¤šã€‚</li></ul><h3 id="9-ä¼˜å…ˆé€‰æ‹©æ•°ç»„è€Œä¸æ˜¯å­—ç¬¦ä¸²è¯­æ³•"><a href="#9-ä¼˜å…ˆé€‰æ‹©æ•°ç»„è€Œä¸æ˜¯å­—ç¬¦ä¸²è¯­æ³•" class="headerlink" title="9. ä¼˜å…ˆé€‰æ‹©æ•°ç»„è€Œä¸æ˜¯å­—ç¬¦ä¸²è¯­æ³•"></a>9. ä¼˜å…ˆé€‰æ‹©æ•°ç»„è€Œä¸æ˜¯å­—ç¬¦ä¸²è¯­æ³•</h3><p>ä½ å¯ä»¥åœ¨ä½ çš„ Dockerfiles ä¸­ä»¥æ•°ç»„ï¼ˆexecï¼‰æˆ–å­—ç¬¦ä¸²ï¼ˆshellï¼‰æ ¼å¼</p><p>åœ¨ Dockerfile ä¸­ï¼Œä½ å¯ä»¥ä»¥æ•°ç»„ï¼ˆexecï¼‰æˆ–å­—ç¬¦ä¸²ï¼ˆshellï¼‰æ ¼å¼æ¥ä½¿ç”¨ <code>CMD</code> å’Œ <code>ENTRYPOINT</code> å‘½ä»¤</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°ç»„ï¼ˆexecï¼‰</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;gunicorn&quot;</span>, <span class="string">&quot;-w&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;-k&quot;</span>, <span class="string">&quot;uvicorn.workers.UvicornWorker&quot;</span>, <span class="string">&quot;main:app&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²ï¼ˆshellï¼‰</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> <span class="string">&quot;gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app&quot;</span></span></span><br></pre></td></tr></table></figure><p>ä¸¤è€…éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”å®ç°äº†å‡ ä¹ç›¸åŒçš„äº‹æƒ…ï¼›ä½†æ˜¯ï¼Œä½ åº”è¯¥å°½å¯èƒ½åœ°ä½¿ç”¨ exec æ ¼å¼ã€‚</p><p>ä»¥ä¸‹æ¥è‡ª <a href="https://docs.docker.com/compose/faq/#why-do-my-services-take-10-seconds-to-recreate-or-stop">Dockerçš„å®˜æ–¹æ–‡æ¡£</a>å†…å®¹ï¼š</p><ul><li>ç¡®ä¿ä½ åœ¨ Dockerfile ä¸­ä½¿ç”¨ <code>CMD</code> å’Œ <code>ENTRYPOINT</code> çš„ exec å½¢å¼ã€‚</li><li>ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>[&quot;program&quot;, &quot;arg1&quot;, &quot;arg2&quot;]</code> è€Œä¸æ˜¯ <code>&quot;program arg1 arg2&quot;</code>ã€‚ä½¿ç”¨å­—ç¬¦ä¸²å½¢å¼ä¼šå¯¼è‡´ Docker ä½¿ç”¨ <code>bash</code> è¿è¡Œä½ çš„è¿›ç¨‹ï¼Œè€Œ <code>bash</code> å¹¶ä¸èƒ½æ­£ç¡®å¤„ç†ä¿¡å·ã€‚Compose æ€»æ˜¯ä½¿ç”¨ JSON å½¢å¼ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå¦‚æœä½ åœ¨ä½ çš„ Compose æ–‡ä»¶ä¸­è¦†ç›–äº†å‘½ä»¤æˆ–å…¥å£ã€‚</li></ul><p>å› æ­¤ï¼Œç”±äºå¤§å¤šæ•° shell ä¸å¤„ç†å¯¹å­è¿›ç¨‹çš„ä¿¡å·ï¼Œå¦‚æœä½ ä½¿ç”¨ shell æ ¼å¼ï¼ŒCTRL-Cï¼ˆäº§ç”Ÿ <code>SIGTERM</code>ï¼‰å¯èƒ½ä¸ä¼šåœæ­¢ä¸€ä¸ªå­è¿›ç¨‹ã€‚</p><p>ä¾‹å­:</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># BAD: å­—ç¬¦ä¸²ï¼ˆshellï¼‰æ ¼å¼</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> top -d</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># GOOD: æ•°ç»„ï¼ˆexecï¼‰æ ¼å¼</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;top&quot;</span>, <span class="string">&quot;-d&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§æƒ…å†µæ‰§è¡Œæ•ˆæœä¸€æ ·ã€‚ä½†è¯·æ³¨æ„ï¼Œåœ¨å­—ç¬¦ä¸²ï¼ˆshellï¼‰æ ¼å¼çš„æƒ…å†µä¸‹ï¼Œ<code>CTRL-C</code> ä¸ä¼šæ€æ­»è¿™ä¸ªè¿›ç¨‹ã€‚ç›¸åï¼Œä½ ä¼šçœ‹åˆ° <code>^C^C^C^C^C^C^C^C^C^C</code>ã€‚</p><p>å¦ä¸€ä¸ªæ³¨æ„äº‹é¡¹æ˜¯ï¼Œå­—ç¬¦ä¸²ï¼ˆshellï¼‰æ ¼å¼æºå¸¦çš„æ˜¯ shell çš„ PIDï¼Œè€Œä¸æ˜¯è¿›ç¨‹æœ¬èº«ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°ç»„æ ¼å¼</span></span><br><span class="line">root@<span class="number">18</span>d8fd3fd4d2:/app<span class="comment"># ps ax</span></span><br><span class="line">  PID TTY      STAT   TIME COMMAND</span><br><span class="line">    <span class="number">1</span> ?        Ss     <span class="number">0</span>:<span class="number">00</span> python manage.py runserver <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8000</span></span><br><span class="line">    <span class="number">7</span> ?        Sl     <span class="number">0</span>:<span class="number">02</span> /usr/local/bin/python manage.py runserver <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8000</span></span><br><span class="line">   <span class="number">25</span> pts/<span class="number">0</span>    Ss     <span class="number">0</span>:<span class="number">00</span> bash</span><br><span class="line">  <span class="number">356</span> pts/<span class="number">0</span>    R+     <span class="number">0</span>:<span class="number">00</span> ps ax</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²æ ¼å¼</span></span><br><span class="line">root@ede24a5ef536:/app<span class="comment"># ps ax</span></span><br><span class="line">  PID TTY      STAT   TIME COMMAND</span><br><span class="line">    <span class="number">1</span> ?        Ss     <span class="number">0</span>:<span class="number">00</span> /bin/sh -c python manage.py runserver <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8000</span></span><br><span class="line">    <span class="number">8</span> ?        S      <span class="number">0</span>:<span class="number">00</span> python manage.py runserver <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8000</span></span><br><span class="line">    <span class="number">9</span> ?        Sl     <span class="number">0</span>:<span class="number">01</span> /usr/local/bin/python manage.py runserver <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8000</span></span><br><span class="line">   <span class="number">13</span> pts/<span class="number">0</span>    Ss     <span class="number">0</span>:<span class="number">00</span> bash</span><br><span class="line">  <span class="number">342</span> pts/<span class="number">0</span>    R+     <span class="number">0</span>:<span class="number">00</span> ps ax</span><br></pre></td></tr></table></figure><h4 id="10-äº†è§£-ENTRYPOINT-å’Œ-CMD-ä¹‹é—´çš„åŒºåˆ«"><a href="#10-äº†è§£-ENTRYPOINT-å’Œ-CMD-ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="10. äº†è§£ ENTRYPOINT å’Œ CMD ä¹‹é—´çš„åŒºåˆ«"></a>10. äº†è§£ <code>ENTRYPOINT</code> å’Œ <code>CMD</code> ä¹‹é—´çš„åŒºåˆ«</h4><p>æˆ‘åº”è¯¥ä½¿ç”¨ <code>ENTRYPOINT</code> è¿˜æ˜¯ <code>CMD</code> æ¥è¿è¡Œå®¹å™¨è¿›ç¨‹ï¼Ÿæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åœ¨å®¹å™¨ä¸­è¿è¡Œå‘½ä»¤ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;gunicorn&quot;</span>, <span class="string">&quot;config.wsgi&quot;</span>, <span class="string">&quot;-b&quot;</span>, <span class="string">&quot;0.0.0.0:8000&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å’Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;gunicorn&quot;</span>, <span class="string">&quot;config.wsgi&quot;</span>, <span class="string">&quot;-b&quot;</span>, <span class="string">&quot;0.0.0.0:8000&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>ä¸¤è€…æœ¬è´¨ä¸Šåšçš„æ˜¯åŒä¸€ä»¶äº‹ï¼šç”¨ <code>Gunicorn</code> æœåŠ¡å™¨åœ¨ <code>config.wsgi</code> å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œå¹¶å°†å…¶ç»‘å®šåˆ° <code>0.0.0.0:8000</code>ã€‚</p><p><code>CMD</code> å¾ˆå®¹æ˜“è¢«é‡å†™ã€‚å¦‚æœä½ è¿è¡Œ <code>docker run &lt;image_name&gt; uvicorn config.asgi</code>ï¼Œä¸Šè¿° <code>CMD</code> å°±ä¼šè¢«æ–°çš„å‚æ•°æ‰€å–ä»£ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>uvicorn config.asgi</code>ã€‚è€Œè¦è¦†ç›– <code>ENTRYPOINT</code> å‘½ä»¤ï¼Œå¿…é¡»æŒ‡å®š <code>--entrypoint</code> é€‰é¡¹ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --entrypoint uvicorn config.asgi &lt;image_name&gt;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æ­£åœ¨è¦†ç›–å…¥å£ç‚¹ã€‚æ‰€ä»¥ï¼Œå»ºè®®ä½¿ç”¨ <code>ENTRYPOINT</code> è€Œä¸æ˜¯ <code>CMD</code>ï¼Œä»¥é˜²æ­¢æ„å¤–åœ°è¦†ç›–å‘½ä»¤ã€‚</p><p>å®ƒä»¬ä¹Ÿå¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚æ¯”å¦‚è¯´</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;gunicorn&quot;</span>, <span class="string">&quot;config.wsgi&quot;</span>, <span class="string">&quot;-w&quot;</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;4&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>å½“åƒè¿™æ ·ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œä¸ºå¯åŠ¨å®¹å™¨æ‰€è¿è¡Œçš„å‘½ä»¤å°±å˜æˆäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gunicorn config.wsgi -w 4</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€è¿°ï¼Œ<code>CMD</code> å¾ˆå®¹æ˜“è¢«é‡å†™ã€‚å› æ­¤ï¼Œ<code>CMD</code> å¯ä»¥è¢«ç”¨æ¥å‘ <code>ENTRYPOINT</code> å‘½ä»¤ä¼ é€’å‚æ•°ã€‚æ¯”å¦‚å¾ˆå®¹æ˜“æ›´æ”¹ workers çš„æ•°é‡ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run &lt;image_name&gt; 6</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å°†æœ‰ 6 ä¸ª Gunicorn workers å¯åŠ¨å®¹å™¨ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„ 4 ä¸ªã€‚</p><h3 id="11-æ·»åŠ å¥åº·æ£€æŸ¥-HEALTHCHECK"><a href="#11-æ·»åŠ å¥åº·æ£€æŸ¥-HEALTHCHECK" class="headerlink" title="11. æ·»åŠ å¥åº·æ£€æŸ¥ HEALTHCHECK"></a>11. æ·»åŠ å¥åº·æ£€æŸ¥ <code>HEALTHCHECK</code></h3><p>ä½¿ç”¨ <code>HEALTHCHECK</code> æ¥ç¡®å®šå®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹æ˜¯å¦ä¸ä»…å·²å¯åŠ¨å¹¶æ­£åœ¨è¿è¡Œï¼Œè€Œä¸”æ˜¯â€œå¥åº·â€çš„ã€‚</p><p>Docker å…¬å¼€äº†ä¸€ä¸ª API æ¥æ£€æŸ¥å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹çš„çŠ¶æ€ï¼Œå®ƒæä¾›çš„ä¿¡æ¯ä¸ä»…ä»…æ˜¯è¿›ç¨‹æ˜¯å¦â€œæ­£åœ¨è¿è¡Œâ€ï¼Œå› ä¸ºâ€œè¿è¡Œâ€æ¶µç›–äº†â€œå®ƒæ­£åœ¨è¿è¡Œâ€ã€â€œä»åœ¨å¯åŠ¨â€ã€ç”šè‡³â€œé™·å…¥æŸç§æ— é™å¾ªç¯é”™è¯¯çŠ¶æ€â€ã€‚ä½ å¯ä»¥é€šè¿‡ <a href="https://docs.docker.com/engine/reference/builder/#healthcheck"><code>HEALTHCHECK</code></a> æŒ‡ä»¤ä¸æ­¤ API äº¤äº’ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨æä¾› Web åº”ç”¨ç¨‹åºï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å†…å®¹æ¥ç¡®å®š <code>/</code> ç«¯ç‚¹æ˜¯å¦å·²å¯åŠ¨å¹¶å¯ä»¥å¤„ç†æœåŠ¡è¯·æ±‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> CMD curl --fail http://localhost:8000 || <span class="built_in">exit</span> 1</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿è¡Œ <code>docker ps</code>ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>HEALTHCHECK</code> çš„çŠ¶æ€ã€‚</p><p>å¥åº·çš„ç¤ºä¾‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS                            PORTS                                       NAMES</span><br><span class="line">09c2eb4970d4   healthcheck   <span class="string">&quot;python manage.py ruâ€¦&quot;</span>   10 seconds ago   Up 8 seconds (health: starting)   0.0.0.0:8000-&gt;8000/tcp, :::8000-&gt;8000/tcp   xenodochial_clarke</span><br></pre></td></tr></table></figure><p>ä¸å¥åº·çš„ç¤ºä¾‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED              STATUS                          PORTS                                       NAMES</span><br><span class="line">09c2eb4970d4   healthcheck   <span class="string">&quot;python manage.py ruâ€¦&quot;</span>   About a minute ago   Up About a minute (unhealthy)   0.0.0.0:8000-&gt;8000/tcp, :::8000-&gt;8000/tcp   xenodochial_clarke</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œè®¾ç½®ä¸€ä¸ªä»…ç”¨äºå¥åº·æ£€æŸ¥çš„è‡ªå®šä¹‰ç«¯ç‚¹ï¼Œç„¶åé…ç½® <code>HEALTHCHECK</code> ä»¥é’ˆå¯¹è¿”å›çš„æ•°æ®è¿›è¡Œæµ‹è¯•ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœç«¯ç‚¹è¿”å› <code>&#123;&quot;ping&quot;: &quot;pong&quot;&#125;</code> çš„ JSON å“åº”ï¼Œä½ å¯ä»¥æŒ‡ç¤º <code>HEALTHCHECK</code> éªŒè¯å“åº”æ­£æ–‡ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>docker inspect</code> æŸ¥çœ‹è¿è¡ŒçŠ¶å†µæ£€æŸ¥çŠ¶æ€çš„æ–¹æ³•ï¼š</p><blockquote><p>è¿™é‡Œçœç•¥äº†éƒ¨åˆ†è¾“å‡ºã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">â¯ docker inspect --format <span class="string">&quot;&#123;&#123;json .State.Health &#125;&#125;&quot;</span> ab94f2ac7889</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;Status&quot;</span>: <span class="string">&quot;healthy&quot;</span>,</span><br><span class="line">  <span class="string">&quot;FailingStreak&quot;</span>: 0,</span><br><span class="line">  <span class="string">&quot;Log&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;Start&quot;</span>: <span class="string">&quot;2021-09-28T15:22:57.5764644Z&quot;</span>,</span><br><span class="line">      <span class="string">&quot;End&quot;</span>: <span class="string">&quot;2021-09-28T15:22:57.7825527Z&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ExitCode&quot;</span>: 0,</span><br><span class="line">      <span class="string">&quot;Output&quot;</span>: <span class="string">&quot;...&quot;</span></span><br></pre></td></tr></table></figure><p>ä½ è¿˜å¯ä»¥å‘ Docker Compose æ–‡ä»¶æ·»åŠ è¿è¡ŒçŠ¶å†µæ£€æŸ¥ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;8000:8000&#x27;</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> <span class="string">curl</span> <span class="string">--fail</span> <span class="string">http://localhost:8000</span> <span class="string">||</span> <span class="string">exit</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">interval:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">start_period:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><p>é€‰é¡¹ï¼š</p><ul><li><code>test</code>ï¼šè¦æµ‹è¯•çš„å‘½ä»¤ã€‚</li><li><code>interval</code>ï¼šè¦æµ‹è¯•çš„é—´éš” - å³ï¼Œæµ‹è¯•æ¯ x æ—¶é—´å•ä½ã€‚</li><li><code>timeout</code>ï¼šç­‰å¾…å“åº”çš„æœ€é•¿æ—¶é—´ã€‚</li><li><code>start_period</code>ï¼šä½•æ—¶å¼€å§‹å¥åº·æ£€æŸ¥ã€‚å®ƒå¯ä»¥åœ¨å®¹å™¨å‡†å¤‡å°±ç»ªä¹‹å‰æ‰§è¡Œå…¶ä»–ä»»åŠ¡æ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚è¿è¡Œè¿ç§»ã€‚</li><li><code>retries</code>ï¼šåœ¨å°†æµ‹è¯•æŒ‡å®šä¸ºå¤±è´¥ä¹‹å‰çš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚</li></ul><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Docker Swarm ä»¥å¤–çš„ç¼–æ’å·¥å…·ï¼ˆæ¯”å¦‚ Kubernetes æˆ– AWS ECSï¼‰ï¼Œå®ƒä»¬å¾ˆå¯èƒ½æœ‰è‡ªå·±çš„å†…éƒ¨ç³»ç»Ÿæ¥å¤„ç†å¥åº·æ£€æŸ¥ã€‚åœ¨æ·»åŠ  <code>HEALTHCHECK</code> æŒ‡ä»¤ä¹‹å‰ï¼Œè¯·å‚é˜…ç‰¹å®šå·¥å…·çš„æ–‡æ¡£ã€‚</p><h2 id="Docker-é•œåƒæœ€ä½³å®è·µ"><a href="#Docker-é•œåƒæœ€ä½³å®è·µ" class="headerlink" title="Docker é•œåƒæœ€ä½³å®è·µ"></a>Docker é•œåƒæœ€ä½³å®è·µ</h2><h3 id="1-Docker-é•œåƒç‰ˆæœ¬"><a href="#1-Docker-é•œåƒç‰ˆæœ¬" class="headerlink" title="1. Docker é•œåƒç‰ˆæœ¬"></a>1. Docker é•œåƒç‰ˆæœ¬</h3><p>åªè¦æœ‰å¯èƒ½ï¼Œå°±è¦é¿å…ä½¿ç”¨ <code>latest</code> æ ‡ç­¾çš„é•œåƒã€‚</p><p>å¦‚æœä½ ä¾èµ– <code>latest</code> æ ‡ç­¾ï¼ˆè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„ â€œæ ‡ç­¾â€ï¼Œå› ä¸ºå½“é•œåƒæ²¡æœ‰æ˜ç¡®çš„æ ‡ç­¾æ—¶ï¼Œå®ƒæ˜¯é»˜è®¤åº”ç”¨çš„ï¼‰ï¼Œä½ æ— æ³•æ ¹æ®é•œåƒæ ‡ç­¾æ¥åˆ¤æ–­ä½ çš„ä»£ç æ­£åœ¨è¿è¡Œå“ªä¸ªç‰ˆæœ¬ã€‚</p><p>å¦‚æœä½ æƒ³å›æ»šå°±å˜å¾—å¾ˆå›°éš¾ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“è¢«è¦†ç›–ï¼ˆæ— è®ºæ˜¯æ„å¤–è¿˜æ˜¯æ¶æ„çš„ï¼‰ã€‚æ ‡ç­¾ï¼Œå°±åƒä½ çš„åŸºç¡€è®¾æ–½å’Œéƒ¨ç½²ï¼Œåº”è¯¥æ˜¯ä¸å¯æ”¹å˜çš„ã€‚</p><p>æ‰€ä»¥æ— è®ºä½ å¦‚ä½•å¯¹å¾…ä½ çš„å†…éƒ¨é•œåƒï¼Œéƒ½ä¸åº”è¯¥å¯¹åŸºæœ¬é•œåƒä½¿ç”¨ <code>latest</code> æ ‡ç­¾ï¼Œå› ä¸ºä½ å¯èƒ½ä¼šæ— æ„ä¸­æŠŠä¸€ä¸ªå¸¦æœ‰ç ´åæ€§å˜åŒ–çš„æ–°ç‰ˆæœ¬éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ã€‚</p><p>å¯¹äºå†…éƒ¨é•œåƒï¼Œåº”ä½¿ç”¨æè¿°æ€§çš„æ ‡ç­¾ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åˆ†è¾¨å“ªä¸ªç‰ˆæœ¬çš„ä»£ç æ­£åœ¨è¿è¡Œï¼Œå¤„ç†å›æ»šï¼Œå¹¶é¿å…å‘½åå†²çªã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æè¿°ç¬¦æ¥ç»„æˆä¸€ä¸ªæ ‡ç­¾ã€‚</p><ol><li>æ—¶é—´æˆ³</li><li>Docker é•œåƒ ID</li><li>Git æäº¤å“ˆå¸Œå€¼</li><li>è¯­ä¹‰ç‰ˆæœ¬ (Semantic version)</li></ol><p>å…³äºæ›´å¤šçš„é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ Stack Overflow <a href="https://stackoverflow.com/a/56213290/1799408">é—®é¢˜</a> â€œProperly Versioning Docker Imagesâ€ ä¸­çš„è¿™ä¸ªç­”æ¡ˆã€‚</p><p>æ¯”å¦‚è¯´</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t web-prod-b25a262-1.0.0 .</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸‹é¢çš„å†…å®¹æ¥å½¢æˆæ ‡ç­¾</p><ol><li>é¡¹ç›®åç§°ï¼šweb</li><li>ç¯å¢ƒåç§°: prod</li><li>Git commit short hash: b25a262 (é€šè¿‡å‘½ä»¤ <code>git rev-parse --short HEAD</code> æ¥è·å¾—)</li><li>è¯­ä¹‰å­¦ç‰ˆæœ¬ï¼š1.0.0</li></ol><p>é€‰æ‹©ä¸€ä¸ªæ ‡ç­¾æ–¹æ¡ˆå¹¶ä¸ä¹‹ä¿æŒä¸€è‡´æ˜¯è‡³å…³é‡è¦çš„ã€‚ç”±äºæäº¤å“ˆå¸Œå€¼ï¼ˆcommit hashesï¼‰å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†é•œåƒæ ‡ç­¾ä¸ä»£ç è”ç³»èµ·æ¥ï¼Œå»ºè®®å°†å®ƒä»¬çº³å…¥ä½ çš„æ ‡ç­¾æ–¹æ¡ˆã€‚</p><h3 id="2-ä¸è¦åœ¨é•œåƒä¸­å­˜å‚¨æœºå¯†ä¿¡æ¯"><a href="#2-ä¸è¦åœ¨é•œåƒä¸­å­˜å‚¨æœºå¯†ä¿¡æ¯" class="headerlink" title="2. ä¸è¦åœ¨é•œåƒä¸­å­˜å‚¨æœºå¯†ä¿¡æ¯"></a>2. ä¸è¦åœ¨é•œåƒä¸­å­˜å‚¨æœºå¯†ä¿¡æ¯</h3><p>Secrets æ˜¯æ•æ„Ÿçš„ä¿¡æ¯ï¼Œå¦‚å¯†ç ã€æ•°æ®åº“å‡­è¯ã€SSHå¯†é’¥ã€ä»¤ç‰Œå’Œ TLS è¯ä¹¦ç­‰ã€‚è¿™äº›ä¿¡æ¯ä¸åº”è¯¥åœ¨æ²¡æœ‰åŠ å¯†çš„æƒ…å†µä¸‹è¢«æ”¾å…¥ä½ çš„é•œåƒä¸­ï¼Œå› ä¸ºæœªç»æˆæƒçš„ç”¨æˆ·å¦‚æœè·å¾—äº†é•œåƒçš„è®¿é—®æƒï¼Œåªéœ€è¦æ£€æŸ¥è¿™äº›å±‚å°±å¯ä»¥æå–å¯†é’¥ã€‚</p><p>å› æ­¤ä¸è¦åœ¨ Docker æ–‡ä»¶ä¸­æ·»åŠ æ˜æ–‡çš„å¯†é’¥ï¼Œå°¤å…¶æ˜¯å½“ä½ æŠŠé•œåƒæ¨é€åˆ°åƒ Docker Hub è¿™æ ·çš„å…¬å…±ä»“åº“ï¼ï¼</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> DATABASE_PASSWORD <span class="string">&quot;SuperSecretSauce&quot;</span></span><br></pre></td></tr></table></figure><p>ç›¸åï¼Œå®ƒä»¬åº”è¯¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ³¨å…¥</p><ol><li>ç¯å¢ƒå˜é‡ï¼ˆåœ¨è¿è¡Œæ—¶)</li><li>æ„å»ºæ—¶å‚æ•°ï¼ˆåœ¨æ„å»ºæ—¶)</li><li>åè°ƒå·¥å…·ï¼Œå¦‚ Docker Swarmï¼ˆé€šè¿‡ Docker secretsï¼‰æˆ– Kubernetesï¼ˆé€šè¿‡ Kubernetes secretsï¼‰ã€‚</li></ol><p>æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡åœ¨ä½ çš„ <code>.dockerignore</code> æ–‡ä»¶ä¸­æ·»åŠ å¸¸è§çš„å¯†é’¥æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ¥å¸®åŠ©é˜²æ­¢å¯†é’¥çš„æ³„éœ²ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">**/.env</span><br><span class="line">**/.aws</span><br><span class="line">**/.ssh</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œè¦æ˜ç¡®å“ªäº›æ–‡ä»¶ä¼šè¢«å¤åˆ¶åˆ°é•œåƒä¸­ï¼Œè€Œä¸æ˜¯é€’å½’åœ°å¤åˆ¶æ‰€æœ‰æ–‡ä»¶ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸å¥½çš„åšæ³•</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¥½çš„åšæ³•</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./app.py .</span></span><br></pre></td></tr></table></figure><p>æ˜ç¡®çš„åšæ³•ä¹Ÿæœ‰åŠ©äºé™åˆ¶ç¼“å­˜çš„ç ´åã€‚</p><h4 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h4><p>ä½ å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥ä¼ é€’å¯†é’¥ï¼Œä½†å®ƒä»¬ä¼šåœ¨æ‰€æœ‰å­è¿›ç¨‹ã€é“¾æ¥çš„å®¹å™¨å’Œæ—¥å¿—ä»¥åŠ <code>docker inspect</code> ä¸­å¯è§ã€‚è¦æ›´æ–°å®ƒä»¬ä¹Ÿå¾ˆå›°éš¾ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --detach --<span class="built_in">env</span> <span class="string">&quot;DATABASE_PASSWORD=SuperSecretSauce&quot;</span> pythonï¼š3.9-slim</span><br><span class="line"></span><br><span class="line">b25a262f870eb0fdbf03c666e7fcf18f9664314b79ad58bc7618ea3445e39239</span><br><span class="line"></span><br><span class="line">docker inspect --format=<span class="string">&#x27;&#123;&#123;range .Config.Env&#125;&#125;&#123;&#123;println .&#125;&#125;&#123;&#123;end&#125;&#125;&#x27;</span> b25a262f870eb0fdbf03c666e7fcf18f9664314b79ad58bc7618ea3445e39239</span><br><span class="line"></span><br><span class="line">DATABASE_PASSWORD=SuperSecretSauce</span><br><span class="line">PATH=/usr/local/bin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line">LANG=C.UTF-8</span><br><span class="line">GPG_KEY=E3FF2839C048B25C084DEBE9B26995E310250568</span><br><span class="line">python_version=3.9.7</span><br><span class="line">python_pip_version=21.2.4</span><br><span class="line">python_setuptools_version=57.5.0</span><br><span class="line">python_get_pip_url=https://github.com/pypa/get-pip/raw/c20b0cfd643cd4a19246ccf204e2997af70f6b21/public/get-pip.py</span><br><span class="line">PYTHON_GET_PIP_SHA256=fa6f3fb93cce234cd4e8dd2beb54a51ab9c247653b52855a48dd44e6b21ff28b</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æœ€ç›´æ¥çš„å¯†é’¥ç®¡ç†æ–¹æ³•ã€‚è™½ç„¶å®ƒä¸æ˜¯æœ€å®‰å…¨çš„ï¼Œä½†å®ƒä¼šè®©è¯šå®çš„äººä¿æŒè¯šå®ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€ä¸ªè–„è–„çš„ä¿æŠ¤å±‚ï¼Œæœ‰åŠ©äºä½¿å¯†é’¥ä¸è¢«å¥½å¥‡çš„æ¸¸è¡çš„çœ¼ç›å‘ç°ã€‚</p><p>ä½¿ç”¨å…±äº«å·ä¼ é€’å¯†é’¥æ˜¯ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†å®ƒä»¬åº”è¯¥è¢«åŠ å¯†ï¼Œé€šè¿‡ Vault æˆ– AWSå¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆKMSï¼‰ï¼Œå› ä¸ºå®ƒä»¬è¢«ä¿å­˜åˆ°ç£ç›˜ã€‚</p><h4 id="æ„å»ºæ—¶å‚æ•°"><a href="#æ„å»ºæ—¶å‚æ•°" class="headerlink" title="æ„å»ºæ—¶å‚æ•°"></a>æ„å»ºæ—¶å‚æ•°</h4><p>ä½ å¯ä»¥åœ¨æ„å»ºæ—¶ä½¿ç”¨æ„å»ºæ—¶å‚æ•°æ¥ä¼ é€’å¯†é’¥ï¼Œä½†è¿™äº›å¯†é’¥å¯¹äºé‚£äº›å¯ä»¥é€šè¿‡ docker å†å²è®¿é—®é•œåƒçš„äººæ¥è¯´æ˜¯å¯è§çš„ã€‚</p><p>ä¾‹å­</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> DATABASE_PASSWORD</span><br></pre></td></tr></table></figure><p>æ„å»º</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build --build-arg <span class="string">&quot;DATABASE_PASSWORD=SuperSecretSauce&quot;</span> .</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åªéœ€è¦ä¸´æ—¶ä½¿ç”¨å¯†é’¥ä½œä¸ºæ„å»ºçš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œç”¨äºå…‹éš†ç§æœ‰ repo æˆ–ä¸‹è½½ç§æœ‰è½¯ä»¶åŒ…çš„ SSH å¯†é’¥ã€‚ä½ åº”è¯¥ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼Œå› ä¸ºæ„å»ºè€…çš„å†å²ä¼šè¢«ä¸´æ—¶é˜¶æ®µå¿½ç•¥ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸´æ—¶é˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim as builder</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯†é’¥å‚æ•°</span></span><br><span class="line"><span class="keyword">arg</span> ssh_private_key</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… git</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; ï¼ˆè¿è¡Œ apt-get updateï¼‰ã€‚</span></span><br><span class="line">    apt-get install -y --no-install-recommends git</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ ssh å¯†é’¥æ¥å…‹éš† repo</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /root/.ssh/ &amp;&amp; \\</span></span><br><span class="line"><span class="language-bash">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;PRIVATE_SSH_KEY&#125;</span>&quot;</span> &gt; /root/.ssh/id_rsa</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">touch</span> /root/.ssh/known_hosts &amp; &amp;</span></span><br><span class="line">    ssh-keyscan bitbucket.org &gt;&gt; /root/.ssh/known_hosts</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> git@github.com:testdrivenio/not-real.git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€åé˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line">å·¥ä½œç›®å½• /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»ä¸´æ—¶é•œåƒä¸­å¤åˆ¶ç‰ˆæœ¬åº“</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /your-repo /app/your-repo</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¤šé˜¶æ®µæ„å»ºåªä¿ç•™äº†æœ€ç»ˆé•œåƒçš„å†å²ã€‚ä½ å¯ä»¥æŠŠè¿™ä¸ªåŠŸèƒ½ç”¨äºä½ çš„åº”ç”¨ç¨‹åºéœ€è¦çš„æ°¸ä¹…å¯†é’¥ï¼Œæ¯”å¦‚æ•°æ®åº“å‡­è¯ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ docker build ä¸­æ–°çš„ <code>--secret</code> é€‰é¡¹æ¥å‘ Docker é•œåƒä¼ é€’å¯†é’¥ï¼Œè¿™äº›å¯†é’¥ä¸ä¼šè¢«å­˜å‚¨åœ¨é•œåƒä¸­ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &quot;docker_is_awesome&quot; &gt; secrets.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»é»˜è®¤çš„å¯†é’¥ä½ç½®æ˜¾ç¤ºå¯†é’¥ã€‚</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> --mount=<span class="built_in">type</span>=secret,<span class="built_in">id</span>=mysecret <span class="built_in">cat</span> /run/secrets/mysecret</span></span><br></pre></td></tr></table></figure><p>è¿™å°†è£…è½½ <code>secrets.txt</code> æ–‡ä»¶ä¸­çš„å¯†é’¥ã€‚</p><p>æ„å»ºé•œåƒ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build --no-cache --progress=plain --secret <span class="built_in">id</span>=mysecret,src=secrets.txt .</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">#4 [1/2] FROM docker.io/library/alpine</span></span><br><span class="line"><span class="comment">#4 sha256:665ba8b2cdc0cb0200e2a42a6b3c0f8f684089f4cd1b81494fbb9805879120f7</span></span><br><span class="line"><span class="comment">#4 ç¼“å­˜çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#5 [2/2] RUN --mount=type=secret,id=mysecret cat /run/secrets/myecret</span></span><br><span class="line"><span class="comment">#5 sha256:75601a522ebe80ada66dedd9dd86772ca932d30d7e1b11bba94c04aa55c237de</span></span><br><span class="line"><span class="comment">#5 0.635 docker_is_awesome#5 DONE 0.7s</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#6 å¯¼å‡ºåˆ°é•œåƒ</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ£€æŸ¥å†å²è®°å½•ï¼Œçœ‹çœ‹å¯†é’¥æ˜¯å¦æ³„éœ²äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">â¯ docker <span class="built_in">history</span> 49574a19241c</span><br><span class="line">IMAGE          CREATED         CREATED BY                                      SIZE      COMMENT</span><br><span class="line">49574a19241c   5 minutes ago   CMD [<span class="string">&quot;/bin/sh&quot;</span>]                                 0B        buildkit.dockerfile.v0</span><br><span class="line">&lt;missing&gt;      5 minutes ago   RUN /bin/sh -c <span class="built_in">cat</span> /run/secrets/mysecret <span class="comment"># bâ€¦   0B        buildkit.dockerfile.v0</span></span><br><span class="line">&lt;missing&gt;      4 weeks ago     /bin/sh -c <span class="comment">#(nop)  CMD [&quot;/bin/sh&quot;]              0B</span></span><br><span class="line">&lt;missing&gt;      4 weeks ago     /bin/sh -c <span class="comment">#(nop) ADD file:aad4290d27580cc1aâ€¦   5.6MB</span></span><br></pre></td></tr></table></figure><h4 id="Docker-å¯†é’¥"><a href="#Docker-å¯†é’¥" class="headerlink" title="Docker å¯†é’¥"></a>Docker å¯†é’¥</h4><p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Docker Swarmï¼Œä½ å¯ä»¥ç”¨ Docker secrets æ¥ç®¡ç†å¯†é’¥ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯åŠ¨ Docker Swarm æ¨¡å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker swarm init</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª docker å¯†é’¥ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;supersecretpassword&quot;</span> | docker secret create postgres_password -</span><br><span class="line">qdqmbpizeef0lfhyttxqfbty0</span><br><span class="line"></span><br><span class="line">docker secret <span class="built_in">ls</span></span><br><span class="line">ID                          NAME                DRIVER    CREATED         UPDATED</span><br><span class="line">qdqmbpizeef0lfhyttxqfbty0   postgres_password             4 seconds ago   4 seconds ago</span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªå®¹å™¨è¢«èµ‹äºˆä¸Šè¿°å¯†é’¥çš„è®¿é—®æƒæ—¶ï¼Œå®ƒå°†æŒ‚è½½åœ¨ <code>/run/secrets/postgres_password</code>ã€‚è¿™ä¸ªæ–‡ä»¶å°†åŒ…å«æ˜æ–‡çš„å¯†é’¥çš„å®é™…å€¼ã€‚</p><p>ä½¿ç”¨å…¶ä»–çš„ç¼–æ’å·¥å…·ï¼Ÿ</p><ul><li><a href="https://docs.aws.amazon.com/eks/latest/userguide/manage-secrets.html">ä½¿ç”¨ AWS Secrets Manager çš„å¯†é’¥ä¸ Kubernetes çš„å¯†é’¥</a></li><li>DigitalOcean Kubernetes - <a href="https://www.digitalocean.com/community/tutorials/recommended-steps-to-secure-a-digitalocean-kubernetes-cluster">ä¿æŠ¤ DigitalOcean Kubernetes é›†ç¾¤çš„æ¨èæ­¥éª¤</a></li><li>Google Kuberneteså¼•æ“ - <a href="https://cloud.google.com/secret-manager/docs/using-other-products#google-kubernetes-engine">ä¸å…¶ä»–äº§å“ä¸€èµ·ä½¿ç”¨å¯†é’¥ç®¡ç†å™¨</a></li><li>Nomad - <a href="https://learn.hashicorp.com/tutorials/nomad/vault-postgres?in=nomad/integrate-vault">Vault é›†æˆå’Œæ£€ç´¢åŠ¨æ€å¯†é’¥</a></li></ul><h3 id="3-ä½¿ç”¨-dockerignore-æ–‡ä»¶"><a href="#3-ä½¿ç”¨-dockerignore-æ–‡ä»¶" class="headerlink" title="3. ä½¿ç”¨ .dockerignore æ–‡ä»¶"></a>3. ä½¿ç”¨ .dockerignore æ–‡ä»¶</h3><p>ä¹‹å‰å·²ç»æåˆ°è¿‡å‡ æ¬¡ä½¿ç”¨ <code>.dockerignore</code> æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶ç”¨æ¥æŒ‡å®šä½ ä¸å¸Œæœ›è¢«æ·»åŠ åˆ°å‘é€ç»™ Docker å®ˆæŠ¤è¿›ç¨‹çš„åˆå§‹æ„å»ºä¸Šä¸‹æ–‡ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œåè€…å°†æ„å»ºä½ çš„é•œåƒã€‚æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å®šä¹‰ä½ éœ€è¦çš„æ„å»ºç¯å¢ƒã€‚</p><p>å½“ä¸€ä¸ª Docker é•œåƒè¢«æ„å»ºæ—¶ï¼Œæ•´ä¸ª Docker ä¸Šä¸‹æ–‡ - å³ä½ çš„é¡¹ç›®çš„æ ¹åœ¨ <code>COPY</code> æˆ– <code>ADD</code> å‘½ä»¤æ‰§è¡Œä¹‹å‰å°±è¢«å‘é€ç»™äº† Docker å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>è¿™å¯èƒ½æ˜¯ç›¸å½“è´¹èµ„æºï¼Œå°¤å…¶æ˜¯å½“ä½ çš„é¡¹ç›®ä¸­æœ‰è®¸å¤šä¾èµ–å…³ç³»ã€å¤§é‡çš„æ•°æ®æ–‡ä»¶æˆ–æ„å»ºå·¥ä»¶æ—¶ã€‚</p><p>å¦å¤–ï¼Œå½“ Docker CLI å’Œå®ˆæŠ¤ç¨‹åºä¸åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚æ¯”å¦‚å®ˆæŠ¤è¿›ç¨‹æ˜¯åœ¨è¿œç¨‹æœºå™¨ä¸Šæ‰§è¡Œçš„ï¼Œä½ å°±æ›´åº”è¯¥æ³¨æ„æ„å»ºç¯å¢ƒçš„å¤§å°äº†ã€‚</p><p>ä½ åº”è¯¥åœ¨ <code>.dockerignore</code> æ–‡ä»¶ä¸­æ·»åŠ ä»€ä¹ˆï¼Ÿ</p><ol><li>ä¸´æ—¶æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</li><li>æ„å»ºæ—¥å¿—</li><li>æœ¬åœ° secrets</li><li>æœ¬åœ°å¼€å‘æ–‡ä»¶ï¼Œå¦‚ <code>docker-compose.yml</code></li><li>ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶å¤¹ï¼Œå¦‚ â€œ.gitâ€ã€â€.hgâ€ å’Œ â€œ.vscodeâ€ ç­‰</li></ol><p>ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">**/.git</span><br><span class="line">**/.gitignore</span><br><span class="line">**/.vscode</span><br><span class="line">**/coverage</span><br><span class="line">**/.env</span><br><span class="line">**/.aws</span><br><span class="line">**/.ssh</span><br><span class="line">Dockerfile</span><br><span class="line">README.md</span><br><span class="line">docker-compose.yml</span><br><span class="line">**/.DS_Store</span><br><span class="line">**/venv</span><br><span class="line">**/env</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œç»“æ„åˆç†çš„ .dockerignore å¯ä»¥å¸®åŠ©</p><ol><li>å‡å°‘ Docker é•œåƒçš„å¤§å°</li><li>åŠ å¿«æ„å»ºè¿‡ç¨‹</li><li>é˜²æ­¢ä¸å¿…è¦çš„ç¼“å­˜å¤±æ•ˆ</li><li>é˜²æ­¢æ³„å¯†</li></ol><h3 id="4-æ£€æŸ¥å¹¶æ‰«æä½ çš„-Dockerfile-å’Œé•œåƒ"><a href="#4-æ£€æŸ¥å¹¶æ‰«æä½ çš„-Dockerfile-å’Œé•œåƒ" class="headerlink" title="4. æ£€æŸ¥å¹¶æ‰«æä½ çš„ Dockerfile å’Œé•œåƒ"></a>4. æ£€æŸ¥å¹¶æ‰«æä½ çš„ Dockerfile å’Œé•œåƒ</h3><p>Linting æ˜¯æ£€æŸ¥æºä»£ç ä¸­æ˜¯å¦å­˜åœ¨å¯èƒ½å¯¼è‡´æ½œåœ¨ç¼ºé™·çš„ç¼–ç¨‹å’Œé£æ ¼é”™è¯¯ä»¥åŠä¸è‰¯åšæ³•çš„è¿‡ç¨‹ã€‚å°±åƒç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œé™æ€æ–‡ä»¶ä¹Ÿå¯ä»¥è¢« lintã€‚ç‰¹åˆ«æ˜¯å¯¹äºä½ çš„ Dockerfileï¼Œlinter å¯ä»¥å¸®åŠ©ç¡®ä¿å®ƒä»¬çš„å¯ç»´æŠ¤æ€§ã€é¿å…å¼ƒç”¨è¯­æ³•å¹¶éµå®ˆæœ€ä½³å®è·µã€‚æ•´ç†é•œåƒåº”è¯¥æ˜¯ CI ç®¡é“çš„æ ‡å‡†éƒ¨åˆ†ã€‚</p><p><a href="https://github.com/hadolint/hadolint">Hadolint</a> æ˜¯æœ€æµè¡Œçš„ Dockerfile linterï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hadolint Dockerfile</span><br><span class="line"></span><br><span class="line">Dockerfile:1 DL3006 warning: Always tag the version of an image explicitly</span><br><span class="line">Dockerfile:7 DL3042 warning: Avoid the use of cache directory with pip. Use `pip install --no-cache-dir &lt;package&gt;`</span><br><span class="line">Dockerfile:9 DL3059 info: Multiple consecutive `RUN` instructions. Consider consolidation.</span><br><span class="line">Dockerfile:17 DL3025 warning: Use arguments JSON notation <span class="keyword">for</span> CMD and ENTRYPOINT arguments</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ Hadolint ä¸€ä¸ªåœ¨çº¿çš„é“¾æ¥ <a href="https://hadolint.github.io/hadolint/">https://hadolint.github.io/hadolint/</a> ä¹Ÿå¯ä»¥å®‰è£… VS Code <a href="https://marketplace.visualstudio.com/items?itemName=exiasr.hadolint">æ’ä»¶</a></p><p>ä½ å¯ä»¥å°† Dockerfile ä¸æ‰«æé•œåƒå’Œå®¹å™¨çš„æ¼æ´ç»“åˆä½¿ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›æœ‰å½±å“åŠ›çš„é•œåƒæ‰«æå·¥å…·ï¼š</p><ul><li><a href="https://docs.docker.com/engine/scan/">Snyk</a> æ˜¯ Docker æœ¬åœ°æ¼æ´æ‰«æçš„ç‹¬å®¶æä¾›å•†ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>docker scan</code> CLI å‘½ä»¤æ¥æ‰«æé•œåƒã€‚</li><li><a href="https://aquasecurity.github.io/trivy/">Trivy</a> å¯ç”¨äºæ‰«æå®¹å™¨é•œåƒã€æ–‡ä»¶ç³»ç»Ÿã€git å­˜å‚¨åº“å’Œå…¶ä»–é…ç½®æ–‡ä»¶ã€‚</li><li><a href="https://github.com/quay/clair">Clair</a> æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œç”¨äºå¯¹åº”ç”¨ç¨‹åºå®¹å™¨ä¸­çš„æ¼æ´è¿›è¡Œé™æ€åˆ†æã€‚</li><li><a href="https://github.com/anchore/anchore-engine">Anchore</a> æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¸ºå®¹å™¨é•œåƒçš„æ£€æŸ¥ã€åˆ†æå’Œè®¤è¯æä¾›é›†ä¸­å¼æœåŠ¡ã€‚</li></ul><p>æ€»è€Œè¨€ä¹‹ï¼Œå¯¹ä½ çš„ Dockerfile å’Œé•œåƒè¿›è¡Œ lint å’Œæ‰«æï¼Œæ¥å‘ç°ä»»ä½•åç¦»æœ€ä½³å®è·µçš„æ½œåœ¨é—®é¢˜ã€‚</p><h3 id="5-ç­¾åå’ŒéªŒè¯é•œåƒ"><a href="#5-ç­¾åå’ŒéªŒè¯é•œåƒ" class="headerlink" title="5. ç­¾åå’ŒéªŒè¯é•œåƒ"></a>5. ç­¾åå’ŒéªŒè¯é•œåƒ</h3><p>ä½ æ€ä¹ˆçŸ¥é“ç”¨äºè¿è¡Œç”Ÿäº§ä»£ç çš„é•œåƒæ²¡æœ‰è¢«ç¯¡æ”¹ï¼Ÿ</p><p>ç¯¡æ”¹å¯ä»¥é€šè¿‡ä¸­é—´äººï¼ˆMITMï¼‰æ”»å‡»æˆ–æ³¨å†Œè¡¨è¢«å®Œå…¨ç ´åæ¥å®ç°ã€‚Docker å†…å®¹ä¿¡ä»»ï¼ˆDCTï¼‰å¯ä»¥å¯¹æ¥è‡ªè¿œç¨‹æ³¨å†Œä¸­å¿ƒçš„ Docker é•œåƒè¿›è¡Œç­¾åå’ŒéªŒè¯ã€‚</p><p>ä¸ºäº†éªŒè¯é•œåƒçš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ï¼Œè¯·è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DOCKER_CONTENT_TRUST=1</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå¦‚æœä½ è¯•å›¾æ‹‰ä¸€ä¸ªæ²¡æœ‰è¢«ç­¾åçš„é•œåƒï¼Œä½ ä¼šæ”¶åˆ°ä»¥ä¸‹é”™è¯¯ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Error: remote trust data does not exist <span class="keyword">for</span> docker.io/namespace/unsigned-image:</span><br><span class="line">notary.docker.io does not have trust data <span class="keyword">for</span> docker.io/namespace/unsigned-image</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä»ä½¿ç”¨ Docker å†…å®¹ä¿¡ä»»ç­¾ç½²é•œåƒæ–‡æ¡£ä¸­äº†è§£ç­¾ç½²é•œåƒçš„æƒ…å†µã€‚</p><p>å½“ä» Docker Hubä¸‹ è½½é•œåƒæ—¶ï¼Œç¡®ä¿ä½¿ç”¨å®˜æ–¹é•œåƒæˆ–æ¥è‡ªå¯ä¿¡æ¥æºçš„ç»è¿‡éªŒè¯çš„é•œåƒã€‚è¾ƒå¤§çš„å›¢é˜Ÿåº”è¯¥ä½¿ç”¨ä»–ä»¬è‡ªå·±çš„å†…éƒ¨ç§æœ‰å®¹å™¨ä»“åº“</p><h3 id="6-è®¾ç½®å†…å­˜å’Œ-CPU-çš„é™åˆ¶"><a href="#6-è®¾ç½®å†…å­˜å’Œ-CPU-çš„é™åˆ¶" class="headerlink" title="6. è®¾ç½®å†…å­˜å’Œ CPU çš„é™åˆ¶"></a>6. è®¾ç½®å†…å­˜å’Œ CPU çš„é™åˆ¶</h3><p>é™åˆ¶ Docker å®¹å™¨çš„å†…å­˜ä½¿ç”¨æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œç‰¹åˆ«æ˜¯å½“ä½ åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œå¤šä¸ªå®¹å™¨æ—¶ã€‚è¿™å¯ä»¥é˜²æ­¢ä»»ä½•ä¸€ä¸ªå®¹å™¨ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„å†…å­˜ï¼Œä»è€Œå‰Šå¼±å…¶ä»–å®¹å™¨çš„åŠŸèƒ½ã€‚</p><p>é™åˆ¶å†…å­˜ä½¿ç”¨çš„æœ€ç®€å•æ–¹æ³•æ˜¯åœ¨ Docker cli ä¸­ä½¿ç”¨ <code>--memory</code> å’Œ <code>--cpu</code> é€‰é¡¹ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --cpus=2 -m 512m nginx</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‘½ä»¤å°†å®¹å™¨çš„ä½¿ç”¨é™åˆ¶åœ¨ 2 ä¸ª CPU å’Œ 512 å…†çš„å†…å­˜ã€‚</p><p>ä½ å¯ä»¥åœ¨ Docker Compose æ–‡ä»¶ä¸­åšåŒæ ·çš„äº‹æƒ…ï¼Œåƒè¿™æ ·ã€‚</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.9&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:alpine</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">limits:</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="number">2</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">512M</span></span><br><span class="line">        <span class="attr">reservations:</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">256M</span></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ <code>reservations</code> å­—æ®µã€‚å®ƒæ˜¯ç”¨æ¥è®¾ç½®è½¯é™åˆ¶çš„ï¼Œå½“ä¸»æœºçš„å†…å­˜æˆ–CPUèµ„æºä¸è¶³æ—¶ï¼Œå®ƒå°±ä¼šä¼˜å…ˆè€ƒè™‘ã€‚</p><p>å…¶ä»–ç›¸å…³èµ„æº</p><ol><li>å¸¦æœ‰å†…å­˜ã€CPUå’ŒGPUçš„è¿è¡Œæ—¶é€‰é¡¹ï¼š<a href="https://docs.docker.com/config/containers/resource_constraints/">https://docs.docker.com/config/containers/resource_constraints/</a></li><li>Docker Compose çš„èµ„æºé™åˆ¶ï¼š<a href="https://docs.docker.com/compose/compose-file/compose-file-v3/#resources">https://docs.docker.com/compose/compose-file/compose-file-v3/#resources</a></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡ä»‹ç»çš„ 17 æ¡æœ€ä½³å®è·µï¼ŒæŒæ¡è¿™äº›æœ€ä½³å®è·µä¸€å®šä¼šè®©ä½ çš„ Dockerfile å’Œ Docker Image å˜å¾—ç²¾ç®€ï¼Œå¹²å‡€ï¼Œå’Œå®‰å…¨ã€‚</p><p>æœ¬æ–‡å‡ºè‡ª <a href="https://testdriven.io/blog/docker-best-practices/">Docker Best Practices for Python Developers</a>ã€‚</p><hr><p>æ¬¢è¿æ‰«ç å…³æ³¨å…¬ä¼—å·ã€ŒDevOpsæ”»åŸç‹®ã€- ä¸“æ³¨äºDevOpsé¢†åŸŸçŸ¥è¯†åˆ†äº«ã€‚</p><p><img src="https://github.com/shenxianpeng/shenxianpeng.github.io/blob/master/about/index/qrcode.jpg?raw=true" alt=" "></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Dokerfile </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022å¹´åºå‘˜å¦‚ä½•é€‰æ‹©æ˜¾ç¤ºå™¨ï¼Ÿ1080pè¿˜æ˜¯2K? å•å±è¿˜æ˜¯å¤šå±ï¼Ÿ</title>
      <link href="/2021/12/choose-monitor/"/>
      <url>/2021/12/choose-monitor/</url>
      
        <content type="html"><![CDATA[<p>å·¥ä½œåå‡ å¹´ç”¨è¿‡äº†ä¸å°‘æ˜¾ç¤ºå™¨ï¼Œä»æœ€åˆçš„ 17å¯¸ï¼Œåˆ°åæ¥çš„ 23å¯¸ã€27å¯¸ã€32å¯¸ã€å†åˆ°ç°åœ¨çš„ 34 å¯¸ï¼Œæ ¹æ®æˆ‘è‡ªå·±çš„ä½¿ç”¨ä½“éªŒï¼Œæ¥ä¸ªä¸»è§‚æ¨èï¼š</p><p>ç¬¬ä¸€åï¼Œä¸€ä¸ª34å¯¸æ›²é¢æ˜¾ç¤ºå™¨<br>ç¬¬äºŒåï¼Œä¸€ä¸ª27å¯¸ + ä¸€ä¸ª23å¯¸çš„åŒå±ç»„åˆ<br>ç¬¬ä¸‰åï¼Œä¸€ä¸ª32å¯¸ + ä¸€ä¸ª23å¯¸çš„åŒå±ç»„åˆ<br>ç¬¬ä¸‰åï¼Œä¸¤ä¸ª 23 å¯¸çš„åŒå±ç»„åˆï¼ˆå¹¶åˆ—ç¬¬ä¸‰åï¼‰</p><p>ä»¥ä¸Šè¿™äº›å±å¹•æ¨èè´­ä¹° 2K åŠä»¥ä¸Šçš„åˆ†è¾¨ç‡ï¼Œ1080p çš„åˆ†è¾¨ç‡ä¸æ¨èã€‚</p><p>ä¸‹é¢æˆ‘å°±æŒ‰ç…§æ—¶é—´è½´è¯´è¯´æˆ‘ç”¨è¿‡çš„é‚£äº›æ˜¾ç¤ºå™¨ã€‚</p><span id="more"></span><h2 id="æˆ‘ç”¨è¿‡çš„æ˜¾ç¤ºå™¨"><a href="#æˆ‘ç”¨è¿‡çš„æ˜¾ç¤ºå™¨" class="headerlink" title="æˆ‘ç”¨è¿‡çš„æ˜¾ç¤ºå™¨"></a>æˆ‘ç”¨è¿‡çš„æ˜¾ç¤ºå™¨</h2><h3 id="åŒå±-23å¯¸-1080p"><a href="#åŒå±-23å¯¸-1080p" class="headerlink" title="åŒå± 23å¯¸ 1080p"></a>åŒå± 23å¯¸ 1080p</h3><p>äº”å¹´å‰å…¬å¸é…ç½®çš„æ˜¯ä¸¤ä¸ª 23 å¯¸çš„ 1080p æ˜¾ç¤ºå™¨ï¼Œè¿˜æœ‰æ˜¾ç¤ºå™¨æ”¯æ¶ï¼Œè¿™åœ¨å½“æ—¶æ˜¯éå¸¸å¥½ç”¨çš„ç»„åˆäº†ï¼Œå¯¹å·¥ä½œæ•ˆç‡çš„æå‡ç¡®å®å¾ˆæœ‰å¸®åŠ©ã€‚</p><p>ï¼ˆçœŸä¸çŸ¥é“é‚£äº›ä¸è‚¯åœ¨æ˜¾ç¤ºå™¨ä¸ŠèŠ±é’±çš„å…¬å¸æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œæ¢ä¸ªå¤§å±æ˜¾ç¤ºå™¨æ˜¯èŠ±æœ€å°‘çš„é’±æé«˜ç¨‹åºå‘˜æ•ˆç‡çš„æœ€æœ‰æ•ˆåŠæ³•äº†ï¼‰</p><p>æ”¾åœ¨ç°åœ¨ 1080p çš„åˆ†è¾¨ç‡å·²ç»ä¸æ¨èäº†ï¼Œå»ºè®®è´­ä¹° 2K ä»¥åŠä»¥ä¸Šåˆ†è¾¨ç‡çš„æ˜¾ç¤ºå±ã€‚</p><h3 id="å•å±-27å¯¸-2K"><a href="#å•å±-27å¯¸-2K" class="headerlink" title="å•å± 27å¯¸ 2K"></a>å•å± 27å¯¸ 2K</h3><p>åœ¨å®¶åŠå…¬å’Œå­¦ä¹ è‹¦äºå®¶é‡Œçš„åŠå…¬æ¡Œå¤§å°æœ‰é™ï¼Œæ”¾ç½®ä¸¤ä¸ª 23 å¯¸æ˜¾ç¤ºå™¨æ²¡é‚£ä¹ˆå¤šç©ºé—´ï¼Œå› æ­¤æˆ‘æ‰“ç®—è´­ä¹°ä¸€ä¸ª 27 å¯¸æ˜¾ç¤ºå™¨ã€‚<br>ä½†åˆ†è¾¨ç‡æ˜¯ç»§ç»­é€‰æ‹© 1080p è¿˜æ˜¯ 2K å‘¢ï¼Ÿ</p><p>å½“æ—¶æˆ‘çœ‹å¥½çš„ Dell ä¸€æ¬¾ 2K åˆ†è¾¨ç‡çš„æ˜¾ç¤ºå™¨ï¼Œå°±æ˜¯ä»·æ ¼æœ‰ç‚¹è´µäº†ï¼ˆä¸¤åƒå¤šï¼‰ï¼Œäºæ˜¯æˆ‘å°±åœ¨ç½‘ä¸Šä¹°äº†å¦å¤–ä¸€æ¬¾ 1080p çš„ 27 å¯¸æ˜¾ç¤ºå™¨ã€‚</p><p>å½“æˆ‘æ‹¿åˆ°è¿™æ¬¾ 1080p çš„ 27 å¯¸æ˜¾ç¤ºå™¨ï¼Œèƒ½æ˜æ˜¾çš„çœ‹åˆ°å®ƒçš„é¢—ç²’æ„Ÿï¼Œä¸€æ—¦æ³¨æ„åˆ°äº†å°±æ²¡æ³•å†å¿½ç•¥å®ƒäº†ã€‚æœ€åé€€è€Œæ±‚å…¶æ¬¡ï¼ŒèŠ±äº†ä¸åˆ° 1500 é€‰æ‹©äº†ä¼˜æ´¾çš„ä¸€æ¬¾ 27 å¯¸ 2K æ˜¾ç¤ºå™¨ã€‚</p><p>è¿™ä¸€ç”¨å°±æ˜¯ä¸‰å¹´ï¼Œç›´åˆ°ä»Šå¹´æ¬å®¶äº†ï¼Œæˆ‘æœ‰äº†æ›´å¤§çš„åŠå…¬æ¡Œï¼Œ27 å¯¸çš„ 2K æ˜¾ç¤ºå™¨åœ¨å¤§å°ä¸Šå·²ç»ä¸å¤ªèƒ½æ»¡è¶³æˆ‘äº†ï¼Œæˆ‘å°±å¼€å§‹æœç½—æ–°çš„å‡çº§ç›®æ ‡ã€‚</p><h3 id="åŒå±-27å¯¸-2K"><a href="#åŒå±-27å¯¸-2K" class="headerlink" title="åŒå± 27å¯¸ 2K"></a>åŒå± 27å¯¸ 2K</h3><p>æˆ‘å¼€å§‹è€ƒè™‘æ˜¯è´­ä¹°ä¸€ä¸ª 34 å¯¸æ˜¾ç¤ºå™¨è¿˜æ˜¯ä¸¤ä¸ª 27 å¯¸ 2K æ˜¾ç¤ºå™¨ï¼Ÿ</p><p>æœ€åå¤„äºæˆæœ¬çš„è€ƒè™‘ï¼Œæˆ‘æ‰“ç®—åœ¨é—²é±¼ä¸Šæ”¶ä¸€å°åŒæ¬¾çš„ 27 å¯¸ 2K æ˜¾ç¤ºå™¨ç»„æˆåŒå±ã€‚ä½†å› ä¸ºè´§æºç¡®å®å¾ˆå°‘ï¼ŒåŠ ä¸Šä¸€æœ¬ä¸å‡ºå¤–åœ°ï¼Œè¿Ÿè¿Ÿæ²¡æœ‰ä¹°åˆ°ï¼Œæœ€åä¸å¾—ä¸è€ƒè™‘è´­ä¹°ä¸¤ä¸ªæ–°çš„ 27 å¯¸ 2K æ˜¾ç¤ºå™¨ã€‚æˆ‘å†æ¬¡åœ¨è´­ä¹°çš„ä¸¤å— 27 å¯¸çš„ 2K æ˜¾ç¤ºå™¨ï¼Œè¿˜åœ¨é—²é±¼ä¸Šä¹°çš„æ˜¾ç¤ºå™¨æ”¯æ¶å…¨éƒ½åˆ°è´§äº†ï¼Œå°±ç­‰å¿«ä¹çš„ç»„è£…äº†ã€‚</p><p>å¯å½“æˆ‘æŠŠä¸¤ä¸ªæ˜¾ç¤ºå™¨éƒ½æ‘†åœ¨æ¡Œå­ä¸Šï¼Œæˆ‘åæ‚”äº†ï¼Œæ¯”æˆ‘æƒ³è±¡ä¸­çš„è¦é•¿ï¼Œä¸€ç±³å…­çš„æ¡Œå­éƒ½å¿«ç››ä¸ä¸‹å®ƒä»¬äº†ï¼Œå¦å¤–å¯èƒ½æ˜¯æˆ‘æ”¯æ¶æ²¡è°ƒå¥½çš„åŸå› ï¼Œè¿™ä¸¤ä¸ªæ˜¾ç¤ºå™¨æ‘†æ”¾åœ¨ä¸€èµ·çš„æ—¶å€™ä¸­é—´æœ‰ä¸€æ¡ä¸Šå®½ä¸‹çª„çš„ç¼ â€¦ â€¦</p><h3 id="æ›²é¢å•å±-34å¯¸-2K"><a href="#æ›²é¢å•å±-34å¯¸-2K" class="headerlink" title="æ›²é¢å•å± 34å¯¸ 2K"></a>æ›²é¢å•å± 34å¯¸ 2K</h3><p>æ²¡æœ‰å°è¯•è¿‡çœŸçš„ä¸çŸ¥é“åˆ°åº•ä»€ä¹ˆæ‰æ˜¯é€‚åˆè‡ªå·±çš„ã€‚ç°åœ¨æˆ‘ç»ˆäºçŸ¥é“äº†â€¦ ç›®å‰æœ€é€‚åˆæˆ‘çš„å°±æ˜¯ 34å¯¸ æ˜¾ç¤ºæ›²é¢å±ã€‚</p><p>ä¸ºä»€ä¹ˆæ˜¯æ›²é¢çš„å‘¢ï¼Ÿ</p><p>æˆ‘ç›®å‰å…¬å¸çš„æ˜¾ç¤ºå™¨ç»„åˆæ˜¯ 32å¯¸2K + 23å¯¸1080pï¼Œè¿™ä¸ª32å¯¸æ˜¾ç¤ºå™¨å°±æ˜¯ç›´é¢å±å¹•çš„ï¼Œåœ¨çœ‹å±å¹•è¾¹ç¼˜çš„å†…å®¹æ—¶æ²¡æœ‰æ›²é¢å±å¹•æ¥çš„èˆ’æœã€‚</p><p>å›åˆ°34å¯¸æ›²é¢å±ï¼Œå¸‚åœºä¸­ç§ç±»ç¹å¤šï¼Œå¦‚æœä¸æƒ³è¸©å‘ï¼ˆæŠ˜è…¾ï¼‰ï¼Œå»ºè®®ç›´æ¥ä¹°å°ç±³34å¯¸æ›²é¢æ˜¾ç¤ºå™¨ã€‚åŒåä¸€é’±è´­ä¹°çš„å¥½åƒä¸è¶³ 1900ã€‚</p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>ä»¥ä¸Šå°±æ˜¯æˆ‘ç”¨è¿‡çš„æ˜¾ç¤ºå™¨çš„ç®€å•åˆ†äº«ï¼Œæ¯”è¾ƒä¸»æµä½†ä¹Ÿæ¯”è¾ƒæœ‰é™ã€‚æ¯”å¦‚æˆ‘æ²¡ç”¨è¿‡è¶…è¿‡ 2K åˆ†è¾¨ç‡ä»¥ä¸Šçš„æ˜¾ç¤ºå™¨ï¼Œä¹Ÿæ²¡ç”¨è¿‡æ›´å¤§å°ºå¯¸å’Œä¸‰å±ä»¥ä¸Šçš„ç»„åˆã€‚</p><p>æœ€åè¿˜æ˜¯å¸Œæœ›è¿™ä¸ªåˆ†äº«å¯¹ä½ é€‰è´­æ˜¾ç¤ºå™¨æœ‰ä¸€ç‚¹ç‚¹å¸®åŠ©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»„ç»‡å†…å¦‚ä½•è¯„ä¼° CI/CD æˆç†Ÿåº¦</title>
      <link href="/2021/12/cicd-assessment/"/>
      <url>/2021/12/cicd-assessment/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨ä¸€ä¸ªç»„ç»‡å†…ï¼Œä¸åŒçš„å›¢é˜Ÿä¹‹é—´å¯èƒ½ä¼šæœ‰ä¸åŒçš„ç»´åº¦æ¥è¯„ä¼° CI&#x2F;CD çš„æˆç†Ÿåº¦ã€‚è¿™ä½¿å¾—å¯¹è¡¡é‡æ¯ä¸ªå›¢é˜Ÿçš„ CI&#x2F;CD çš„è¡¨ç°å˜å¾—å›°éš¾ã€‚</p><p>å¦‚ä½•å¿«é€Ÿè¯„ä¼°å“ªäº›é¡¹ç›®éµå¾ªæœ€ä½³å®è·µï¼Ÿå¦‚ä½•æ›´å®¹æ˜“åœ°æ„å»ºé«˜è´¨é‡çš„å®‰å…¨è½¯ä»¶ï¼Ÿç»„ç»‡å†…éœ€è¦å»ºç«‹ä¸€ä¸ªç”±å›¢é˜Ÿæˆå‘˜ä¸€èµ·è®¨è®ºå‡ºæ¥çš„æœ€ä½³å®è·µæ¥å¸®åŠ©å›¢é˜Ÿå»ºç«‹æ˜ç¡®çš„åŠªåŠ›æ–¹å‘ã€‚</p><h2 id="å¦‚ä½•è¯„ä¼°"><a href="#å¦‚ä½•è¯„ä¼°" class="headerlink" title="å¦‚ä½•è¯„ä¼°"></a>å¦‚ä½•è¯„ä¼°</h2><p>è¿™é‡Œæˆ‘å‚è€ƒäº†å¼€æºé¡¹ç›® <a href="https://github.com/coreinfrastructure/best-practices-badge">CII æœ€ä½³å®è·µå¾½ç« è®¡åˆ’</a>ï¼Œè¿™æ˜¯ Linux åŸºé‡‘ä¼š (LF) å‘èµ·çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚å®ƒæä¾›ä¸€ç³»åˆ—è‡ªç”±&#x2F;å¼€æºè½¯ä»¶ (FLOSS) é¡¹ç›®çš„æœ€ä½³å®è·µæ–¹æ³•ã€‚å‚ç…§è¿™äº›æœ€ä½³å®è·µæ ‡å‡†çš„é¡¹ç›®å¯ä»¥è¿›è¡Œè‡ªè®¤è¯, ä»¥è·å¾—æ ¸å¿ƒåŸºç¡€è®¾æ–½ä¿ƒè¿›ä¼š(CII)å¾½ç« ã€‚è¦åšåˆ°è¿™ç‚¹æ— éœ€ä»»ä½•è´¹ç”¨ï¼Œä½ çš„é¡¹ç›®å¯ä»¥ä½¿ç”¨ Web åº”ç”¨ï¼ˆBadgeApp) æ¥è¯æ˜æ˜¯å¦‚ä½•ç¬¦åˆè¿™äº›å®è·µæ ‡å‡†çš„ä»¥åŠå…¶è¯¦ç»†çŠ¶å†µã€‚</p><p>è¿™äº›æœ€ä½³å®è·µæ ‡å‡†å¯ä»¥ç”¨æ¥ï¼š</p><ul><li>é¼“åŠ±é¡¹ç›®éµå¾ªæœ€ä½³å®è·µã€‚</li><li>å¸®åŠ©æ–°çš„é¡¹ç›®æ‰¾åˆ°é‚£äº›å®ƒä»¬è¦éµå¾ªçš„æœ€ä½³å®è·µ</li><li>å¸®åŠ©ç”¨æˆ·äº†è§£å“ªäº›é¡¹ç›®éµå¾ªäº†æœ€ä½³å®è·µï¼ˆè¿™æ ·ç”¨æˆ·å¯ä»¥æ›´å€¾å‘äºé€‰æ‹©æ­¤ç±»é¡¹ç›®ï¼‰ã€‚</li></ul><p>æœ€ä½³å®è·µåŒ…å«ä»¥ä¸‹äº”ä¸ªæ ‡å‡†ï¼šåŸºæœ¬ï¼Œå˜æ›´æ§åˆ¶ï¼ŒæŠ¥å‘Šï¼Œè´¨é‡ï¼Œå®‰å…¨ï¼Œåˆ†æã€‚</p><p><img src="/2021/12/cicd-assessment/cii.png" alt="cii"></p><p>æ›´å¤šå…³äºæ ‡å‡†çš„ç»†åˆ†å¯ä»¥å‚è€ƒ <a href="https://hardenedlinux.github.io/2016/08/04/best-practices-criteria-for-floss-part1.html">CII ä¸­æ–‡æ–‡æ¡£</a> æˆ– <a href="https://github.com/coreinfrastructure/best-practices-badge/blob/main/doc/criteria.md">CII è‹±æ–‡æ–‡æ¡£</a>ã€‚</p><p>å·²ç»å¾ˆå¤šçŸ¥åçš„é¡¹ç›®æ¯”å¦‚ <a href="https://bestpractices.coreinfrastructure.org/en/projects/569">Kubernetes</a>, <a href="https://bestpractices.coreinfrastructure.org/en/projects/29">Node.js</a> ç­‰åœ¨ä½¿ç”¨è¿™ä¸ªæœ€ä½³å®è·µå¾½ç« è®¡åˆ’</p><p><img src="/2021/12/cicd-assessment/badge-owners.png" alt="badge-owners"></p><p>å¦‚æœä½ çš„é¡¹ç›®åœ¨ GitHub ä¸Šæˆ–æ˜¯ä½ å¯ä»¥æŒ‰ç…§ä¸Šè¿°çš„å¾½ç« è®¡åˆ’è¿›è¡Œè¯„ä¼°ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯„ä¼°ä½ é¡¹ç›®çš„æœ€ä½³å®è·µï¼Œå¹¶å¯ä»¥åœ¨é¡¹ç›®ä¸»é¡µçš„ README ä¸Šæ˜¾ç¤ºå¾½ç« ç»“æœã€‚</p><p><img src="/2021/12/cicd-assessment/badge-result.png" alt="badge-result"></p><h2 id="å®šåˆ¶æœ€ä½³å®è·µæ ‡å‡†"><a href="#å®šåˆ¶æœ€ä½³å®è·µæ ‡å‡†" class="headerlink" title="å®šåˆ¶æœ€ä½³å®è·µæ ‡å‡†"></a>å®šåˆ¶æœ€ä½³å®è·µæ ‡å‡†</h2><p>å¦‚æœä¸Šè¿°é¡¹ç›®ä¸èƒ½æ»¡è¶³ä½ çš„è¯„ä¼°è¦æ±‚ï¼Œç»“åˆæˆ‘çš„å®è·µï¼Œåˆ¶å®šäº†å¦‚ä¸‹â€œæœ€ä½³å®è·µæ ‡å‡†â€å¹¶åˆ†é…äº†ç›¸åº”çš„æˆç†Ÿåº¦å¾½ç« ï¼Œä¾›å‚è€ƒã€‚</p><h3 id="è®¡ç®—è§„åˆ™"><a href="#è®¡ç®—è§„åˆ™" class="headerlink" title="è®¡ç®—è§„åˆ™"></a>è®¡ç®—è§„åˆ™</h3><ol><li>æ¯ä¸ªæœ€ä½³å®è·µæ ‡å‡†éƒ½æœ‰åˆ†æ•°ï¼Œé€šå¸¸ä¸€èˆ¬çš„æ ‡å‡†æ˜¯10åˆ†ï¼Œé‡è¦çš„æ ‡å‡†æ˜¯20åˆ†</li><li>å¸¦æœ‰ğŸ”°çš„æœ€ä½³å®è·µæ ‡å‡†è¡¨ç¤ºâ€œä¸€å®šè¦æœ‰â€</li><li>å¸¦æœ‰ğŸ‘çš„æœ€ä½³å®è·µæ ‡å‡†è¡¨ç¤ºâ€œåº”å½“æœ‰â€</li><li>æ¯ä¸ªé¡¹ç›®çš„æœ€ä½³å®è·µæ ‡å‡†åˆ†æ•°ä¹‹å’Œè½åœ¨çš„åŒºé—´è·å¾—å¯¹åº”çš„å¾½ç« </li></ol><h3 id="å¾½ç« åˆ†æ•°å¯¹ç…§è¡¨"><a href="#å¾½ç« åˆ†æ•°å¯¹ç…§è¡¨" class="headerlink" title="å¾½ç« åˆ†æ•°å¯¹ç…§è¡¨"></a>å¾½ç« åˆ†æ•°å¯¹ç…§è¡¨</h3><table><thead><tr><th>å¾½ç« </th><th>åˆ†æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸš©WIP</td><td>&lt; 100</td><td>å°äº100åˆ†è·å¾— ğŸš©Work In Progress å¾½ç« </td></tr><tr><td>âœ”ï¸PASSING</td><td>&#x3D; 100</td><td>ç­‰äº100åˆ†è·å¾— âœ”ï¸PASSING å¾½ç« </td></tr><tr><td>ğŸ¥ˆSILVER</td><td>&gt; 100 &amp;&amp; &lt;&#x3D; 150</td><td>å¤§äº100ï¼Œå°äºç­‰äº150åˆ†è·å¾—ğŸ¥ˆé“¶ç‰Œå¾½ç« </td></tr><tr><td>ğŸ¥‡GOLD</td><td>&gt; 150</td><td>å¤§äºç­‰äº150åˆ†è·å¾—ğŸ¥‡é‡‘ç‰Œå¾½ç« </td></tr></tbody></table><p>æ³¨ï¼šè¿™ä¸ªåˆ†æ•°åŒºé—´å¯è°ƒæ•´ã€‚</p><h3 id="æœ€ä½³å®è·µæ ‡å‡†å’Œåˆ†æ•°"><a href="#æœ€ä½³å®è·µæ ‡å‡†å’Œåˆ†æ•°" class="headerlink" title="æœ€ä½³å®è·µæ ‡å‡†å’Œåˆ†æ•°"></a>æœ€ä½³å®è·µæ ‡å‡†å’Œåˆ†æ•°</h3><table><thead><tr><th>ç±»åˆ«</th><th>æœ€ä½³å®è·µæ ‡å‡†</th><th>åˆ†æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>åŸºæœ¬</strong></td><td>ğŸ”°<strong>æ„å»ºä»»ä½•åˆ†æ”¯</strong></td><td><strong>20</strong></td><td>Jenkinsï¼šæ”¯æŒä»»ä½•åˆ†æ”¯æ„å»º</td></tr><tr><td></td><td>ğŸ”°<strong>æ„å»ºä»»ä½•PR</strong></td><td><strong>20</strong></td><td>Jenkinsï¼šæ”¯æŒå¯¹ä»»ä½• Pull Request åœ¨ Merge ä¹‹å‰è¿›è¡Œæ„å»º</td></tr><tr><td></td><td>ğŸ”°ä¸Šä¼ åˆ¶å“</td><td>10</td><td>Jenkinsï¼šæ„å»ºäº§ç‰©ä¸Šä¼ åˆ°åˆ¶å“ä»“åº“ä¿å­˜</td></tr><tr><td></td><td>ğŸ‘å®¹å™¨åŒ–æ„å»º</td><td>10</td><td>æ¨èä½¿ç”¨å®¹å™¨åŒ–æŠ€æœ¯å®ç°Pipeline</td></tr><tr><td><strong>è´¨é‡</strong></td><td>ğŸ”°<strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong></td><td><strong>20</strong></td><td>Jenkinsï¼šæ”¯æŒè§¦å‘å†’çƒŸ&#x2F;å•å…ƒ&#x2F;å›å½’æµ‹è¯•</td></tr><tr><td></td><td>ğŸ‘æ€§èƒ½æµ‹è¯•</td><td>10</td><td>Jenkinsï¼šæ”¯æŒè§¦å‘æ€§èƒ½æµ‹è¯•</td></tr><tr><td></td><td>ğŸ‘ä»£ç è¦†ç›–ç‡æ”¶é›†</td><td>10</td><td>Jenkinsï¼šæ”¯æŒè·å¾—ä»£ç è¦†ç›–ç‡</td></tr><tr><td><strong>å®‰å…¨</strong></td><td>ğŸ”°æ¼æ´æ‰«æ</td><td>10</td><td>Jenkinsï¼šæ”¯æŒè§¦å‘æ¼æ´æ‰«æ</td></tr><tr><td></td><td>ğŸ”°Licenseæ‰«æ</td><td>10</td><td>Jenkinsï¼šæ”¯æŒè§¦å‘è¯ä¹¦æ‰«æ</td></tr><tr><td><strong>åˆ†æ</strong></td><td>ğŸ‘Code Lint</td><td>10</td><td>Jenkinsï¼šæ”¯æŒå¯¹PRè¿›è¡Œä»£ç æ ¼å¼æ£€æŸ¥</td></tr><tr><td></td><td>ğŸ‘é™æ€ä»£ç åˆ†æ</td><td>10</td><td>Jenkinsï¼šæ”¯æŒå¯¹PRè¿›è¡Œé™æ€ä»£ç åˆ†æ</td></tr><tr><td></td><td>ğŸ‘åŠ¨æ€ä»£ç åˆ†æ</td><td>10</td><td>Jenkinsï¼šæ”¯æŒå¯¹PRè¿›è¡ŒåŠ¨æ€ä»£ç åˆ†æ</td></tr><tr><td><strong>æŠ¥å‘Š</strong></td><td>ğŸ”°Emailæˆ–Slacké€šçŸ¥</td><td>10</td><td>æ”¯æŒé€šè¿‡Emailæˆ–Slackç­‰æ–¹å¼é€šçŸ¥</td></tr></tbody></table><p>æ³¨ï¼šä»¥Jenkinsä¸ºä¾‹ã€‚</p><h2 id="æœ€ç»ˆçš„ç»“æœ"><a href="#æœ€ç»ˆçš„ç»“æœ" class="headerlink" title="æœ€ç»ˆçš„ç»“æœ"></a>æœ€ç»ˆçš„ç»“æœ</h2><table><thead><tr><th>No</th><th>Repository Name</th><th>å®ç°çš„æœ€ä½³å®è·µæ ‡å‡†</th><th>å¾½ç« </th></tr></thead><tbody><tr><td>1</td><td>project-a</td><td>ğŸ”°<strong>æ„å»ºä»»ä½•åˆ†æ”¯</strong><br>ğŸ”°<strong>æ„å»ºä»»ä½•PR</strong><br>ğŸ”°ä¸Šä¼ åˆ¶å“<br>ğŸ”°<strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong><br>ğŸ”°Emailæˆ–Slacké€šçŸ¥</td><td>ğŸš©WIP</td></tr><tr><td>2</td><td>project-b</td><td>ğŸ”°<strong>æ„å»ºä»»ä½•åˆ†æ”¯</strong><br>ğŸ”°<strong>æ„å»ºä»»ä½•PR</strong><br>ğŸ”°ä¸Šä¼ åˆ¶å“<br>ğŸ”°<strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong><br>ğŸ”°æ¼æ´æ‰«æ<br>ğŸ”°Licenseæ‰«æ<br>ğŸ”°Emailæˆ–Slacké€šçŸ¥</td><td>âœ”ï¸PASSING</td></tr><tr><td>3</td><td>project-c</td><td>ğŸ”°<strong>æ„å»ºä»»ä½•åˆ†æ”¯</strong><br>ğŸ”°<strong>æ„å»ºä»»ä½•PR</strong><br>ğŸ”°ä¸Šä¼ åˆ¶å“<br>ğŸ‘å®¹å™¨åŒ–æ„å»º<br>ğŸ”°<strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong><br>ğŸ”°æ¼æ´æ‰«æ<br>ğŸ”°Licenseæ‰«æ<br>ğŸ”°Emailæˆ–Slacké€šçŸ¥</td><td>ğŸ¥ˆSILVER</td></tr><tr><td>4</td><td>project-d</td><td>ğŸ”°<strong>æ„å»ºä»»ä½•åˆ†æ”¯</strong><br>ğŸ”°<strong>æ„å»ºä»»ä½•PR</strong><br>ğŸ”°ä¸Šä¼ åˆ¶å“<br>ğŸ‘å®¹å™¨åŒ–æ„å»º<br>ğŸ”°<strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong><br>ğŸ‘æ€§èƒ½æµ‹è¯•<br>ğŸ‘ä»£ç è¦†ç›–ç‡æ”¶é›†<br>ğŸ”°æ¼æ´æ‰«æ<br>ğŸ”°Licenseæ‰«æ<br>ğŸ‘Code Lint<br>ğŸ‘é™æ€ä»£ç åˆ†æ<br>ğŸ‘åŠ¨æ€ä»£ç åˆ†æ<br>ğŸ”°Emailæˆ–Slacké€šçŸ¥</td><td>ğŸ¥‡GOLD</td></tr></tbody></table><h2 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>Q: ä¸ºä»€ä¹ˆä½¿ç”¨å¾½ç« è€Œä¸æ˜¯åˆ†æ•°ï¼Ÿ<br>A: ä½¿ç”¨å¾½ç« èƒ½æ›´å¥½çš„å¸®åŠ©å›¢é˜Ÿæœç€ç›®æ ‡è€Œä¸æ˜¯åˆ†æ•°åŠªåŠ›ã€‚</p><p>Q: å»ºç«‹æœ€ä½³å®è·µæ ‡å‡†è¿˜æœ‰å“ªäº›å¸®åŠ©ï¼Ÿ<br>A: å›¢é˜Ÿä¹‹é—´å®¹æ˜“è¿›è¡ŒæŠ€æœ¯å…±äº«ï¼Œæ›´å®¹æ˜“åœ°æ„å»ºé«˜è´¨é‡çš„å®‰å…¨è½¯ä»¶ï¼Œä¿æŒå›¢é˜Ÿä¹‹é—´åœ¨ç»Ÿä¸€çš„é«˜æ°´å‡†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI </tag>
            
            <tag> CD </tag>
            
            <tag> Badge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub Actions è¿˜èƒ½è¿™ä¹ˆç©ï¼Ÿè‡ªåŠ¨å°†å‘å¸ƒçš„åšå®¢æ–‡ç« æ›´æ–°åˆ° GitHub ä¸ªäººä¸»é¡µ</title>
      <link href="/2021/11/special-repository/"/>
      <url>/2021/11/special-repository/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å®ç°äº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ Workflowï¼Œå°±æ˜¯é€šè¿‡ GitHub Actions è‡ªåŠ¨å°†æ¯æ¬¡æœ€æ–°å‘å¸ƒçš„æ–‡ç« è‡ªåŠ¨åŒæ­¥åˆ°æˆ‘çš„ GitHub é¦–é¡µã€‚</p><p>å°±åƒè¿™æ ·åœ¨é¦–é¡µæ˜¾ç¤ºæœ€è¿‘å‘å¸ƒçš„åšå®¢æ–‡ç« ã€‚</p><p><img src="/2021/11/special-repository/final.png" alt="æœ€ç»ˆæ•ˆæœ"></p><p>è¦å®ç°è¿™æ ·çš„å·¥ä½œæµéœ€è¦äº†è§£ä»¥ä¸‹è¿™å‡ ç‚¹ï¼š</p><ol><li>éœ€è¦åˆ›å»ºä¸€ä¸ªä¸ GitHub åŒåçš„ä¸ªäººä»“åº“ï¼Œè¿™ä¸ªä»“åº“çš„ <code>README.md</code> ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨é¦–é¡µ</li><li>é€šè¿‡ GitHub Actions è‡ªåŠ¨è·å–åšå®¢çš„æœ€æ–°æ–‡ç« å¹¶æ›´æ–° <code>README.md</code></li><li>åªæœ‰å½“æœ‰æ–°çš„æ–‡ç« å‘å¸ƒçš„æ—¶å€™æ‰è§¦å‘è‡ªåŠ¨è·å–ã€æ›´æ–°æ–‡ç«  GitHub Action</li></ol><span id="more"></span><p>GitHub åŒåçš„ä¸ªäººä»“åº“æ˜¯ä¸€ä¸ªç‰¹æ®Šä»“åº“ï¼Œå³åˆ›å»ºä¸€ä¸ªä¸ä½ çš„ GitHub è´¦å·åŒåçš„ä»“åº“ï¼Œæ·»åŠ çš„ <code>README.md</code> ä¼šåœ¨ GitHub ä¸ªäººä¸»é¡µæ˜¾ç¤ºã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœä½ çš„ GitHub åå« <code>GeBiLaoWang</code>ï¼Œé‚£ä¹ˆå½“ä½ åˆ›å»ºä¸€ä¸ªå« <code>GeBiLaoWang</code> çš„ Git ä»“åº“ï¼Œæ·»åŠ  README.md åå°±ä¼šåœ¨ä¸»é¡µæ˜¾ç¤ºã€‚</p><p>é’ˆå¯¹è¿™ä¸ªåŠŸèƒ½ GitHub ä¸Šæœ‰å¾ˆå¤šä¸°å¯Œå¤šå½©çš„ä¸ªäººä»‹ç»ï¼ˆå¦‚ä¸‹ï¼‰ã€‚æ›´å¤šçµæ„Ÿå¯ä»¥å‚çœ‹è¿™ä¸ªé“¾æ¥ï¼š<a href="https://awesomegithubprofile.tech/">https://awesomegithubprofile.tech/</a></p><p><img src="/2021/11/special-repository/profile.png" alt="profile"></p><h2 id="è‡ªåŠ¨è·å–æ–‡ç« å¹¶æ›´æ–°-README-md"><a href="#è‡ªåŠ¨è·å–æ–‡ç« å¹¶æ›´æ–°-README-md" class="headerlink" title="è‡ªåŠ¨è·å–æ–‡ç« å¹¶æ›´æ–° README.md"></a>è‡ªåŠ¨è·å–æ–‡ç« å¹¶æ›´æ–° <code>README.md</code></h2><p>åœ¨ GitHub ä¸Šæœ‰å¾ˆå¤šå¼€å‘è€…ä¸º GitHub Actions å¼€å‘æ–°çš„å°åŠŸèƒ½ã€‚æˆ‘è¿™é‡Œç”¨åˆ°ä¸€ä¸ªå¼€æºé¡¹ç›®å« <a href="https://github.com/gautamkrishnar/blog-post-workflow">blog-post-workflow</a>ï¼Œå®ƒå¯ä»¥é€šè¿‡ RSSï¼ˆè®¢é˜…æºï¼‰æ¥è·å–åˆ°åšå®¢çš„æœ€æ–°æ–‡ç« ã€‚</p><p>å®ƒä¸ä½†æ”¯æŒ RSS è¿˜æ”¯æŒè·å– StackOverflow ä»¥åŠ Youtube è§†é¢‘ç­‰èµ„æºã€‚</p><p>æˆ‘åªéœ€è¦åœ¨ GitHub åŒåçš„ä»“åº“ä¸‹æ·»åŠ ä¸€ä¸ªè¿™æ ·çš„ Workflow YML <code>.github/workflows/blog-post-workflow.yml</code> å³å¯ã€‚</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Latest</span> <span class="string">blog</span> <span class="string">post</span> <span class="string">workflow</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;* 2 * * *&#x27;</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">update-readme-with-blog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Update</span> <span class="string">this</span> <span class="string">repo&#x27;s</span> <span class="string">README</span> <span class="string">with</span> <span class="string">latest</span> <span class="string">blog</span> <span class="string">posts</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">gautamkrishnar/blog-post-workflow@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># æˆ‘çš„åšå®¢ RSS é“¾æ¥</span></span><br><span class="line">          <span class="attr">feed_list:</span> <span class="string">&quot;https://shenxianpeng.github.io/atom.xml&quot;</span></span><br><span class="line">          <span class="comment"># è·å–æœ€æ–° 10 ç¯‡æ–‡ç« </span></span><br><span class="line">          <span class="attr">max_post_count:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure><p>åˆšå¼€å§‹æˆ‘éœ€è¦è®©è¿™ä¸ª Workflow èƒ½å·¥ä½œå³å¯ã€‚å› æ­¤ç”¨çš„å®šæ—¶è§¦å‘ï¼Œå³å°±æ˜¯æ¯å¤©æ—©ä¸Šä¸¤ç‚¹å°±è‡ªåŠ¨è·å–ä¸€æ¬¡æœ€æ–°æ–‡ç« å¹¶æ›´æ–°è¿™ä¸ªç‰¹æ®Šä»“åº“ <code>README.md</code>ã€‚</p><p>è¿™ä¸ªåšæ³•è¿˜å¯ä»¥ï¼Œä½†ä¸å¤ŸèŠ‚çœèµ„æºä¹Ÿä¸å¤Ÿå®Œç¾ã€‚æœ€å¥½çš„åšæ³•æ˜¯ï¼šåªæœ‰å½“æœ‰æ–°æ–‡ç« å‘å¸ƒæ—¶æ‰è§¦å‘ä¸Šé¢çš„ Workflow æ›´æ–° <code>README.md</code>ã€‚è¿™å°±éœ€è¦æœ‰ä¸€ä¸ª Webhook å½“æ£€æµ‹åˆ°æœ‰æ–‡ç« æ›´æ–°æ—¶è‡ªåŠ¨è§¦å‘è¿™é‡Œçš„ Workflowã€‚</p><h2 id="è§¦å‘å¦ä¸€ä¸ª-GitHub-Action"><a href="#è§¦å‘å¦ä¸€ä¸ª-GitHub-Action" class="headerlink" title="è§¦å‘å¦ä¸€ä¸ª GitHub Action"></a>è§¦å‘å¦ä¸€ä¸ª GitHub Action</h2><p>GitHub Actions æä¾›äº†ä¸€ä¸ª Webhook äº‹ä»¶å«åš <a href="https://docs.github.com/en/actions/learn-github-actions/events-that-trigger-workflows#repository_dispatch"><code>repository_dispatch</code></a> å¯ä»¥æ¥åšè¿™ä»¶äº‹ã€‚</p><p>å®ƒçš„åŸç†ï¼šä½¿ç”¨ GitHub API æ¥è§¦å‘ä¸€ä¸ª Webhook äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶å«åš <code>repository_dispatch</code>ï¼Œè¿™ä¸ªäº‹ä»¶é‡Œçš„ç±»å‹æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œå¹¶ä¸”åœ¨è¦è¢«è§¦å‘çš„ workflow é‡Œéœ€è¦ä½¿ç”¨ <code>repository_dispatch</code> äº‹ä»¶ã€‚</p><p>å³ï¼šåœ¨å­˜æ”¾åšå®¢æ–‡ç« çš„ä»“åº“é‡Œè¦æœ‰ä¸€ä¸ª Workflow é€šè¿‡å‘é€ <code>repository_dispatch</code> äº‹ä»¶è§¦å‘ç‰¹æ®Šä»“åº“ä¸­çš„ Workflow æ¥æ›´æ–° <code>README.md</code>ã€‚</p><p>è¿™é‡Œæˆ‘å®šä¹‰äº‹ä»¶ç±»å‹åå« <code>special_repository</code>ï¼Œå®ƒåªæ¥å—æ¥è‡ª GitHub API <code>repository_dispatch</code> äº‹ä»¶ã€‚</p><p>å†æ¬¡è°ƒæ•´ä¸Šé¢çš„ <code>.github/workflows/blog-post-workflow.yml</code> æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># special_repository.yml</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">Latest</span> <span class="string">blog</span> <span class="string">post</span> <span class="string">workflow</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">repository_dispatch:</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„ç±»å‹æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œæˆ‘å°†å®ƒèµ·åä¸ºï¼šspecial_repository</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">special_repository</span>]</span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">update-readme-with-blog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Update</span> <span class="string">this</span> <span class="string">repo&#x27;s</span> <span class="string">README</span> <span class="string">with</span> <span class="string">latest</span> <span class="string">blog</span> <span class="string">posts</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">gautamkrishnar/blog-post-workflow@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">feed_list:</span> <span class="string">&quot;https://shenxianpeng.github.io/atom.xml&quot;</span></span><br><span class="line">          <span class="attr">max_post_count:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure><p>æ¥å—äº‹ä»¶çš„ Workflow ä¿®æ”¹å¥½äº†ã€‚å¦‚ä½•å‘é€ç±»å‹ä¸º <code>special_repository</code> çš„ <code>repository_dispatch</code> äº‹ä»¶å‘¢ï¼Ÿæˆ‘è¿™é‡Œé€šè¿‡ <code>curl</code> ç›´æ¥è°ƒç”¨ API æ¥å®Œæˆã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -XPOST -u <span class="string">&quot;<span class="variable">$&#123;&#123; secrets.PAT_USERNAME&#125;</span>&#125;:<span class="variable">$&#123;&#123;secrets.PAT_TOKEN&#125;</span>&#125;&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;Accept: application/vnd.github.everest-preview+json&quot;</span> \</span><br><span class="line">    -H <span class="string">&quot;Content-Type: application/json&quot;</span> https://api.github.com/repos/shenxianpeng/shenxianpeng/dispatches \</span><br><span class="line">    --data <span class="string">&#x27;&#123;&quot;event_type&quot;: &quot;special_repository&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå‘é€äº‹ä»¶ Workflow YML <code>.github/workflows/send-dispatch.yml</code> å¦‚ä¸‹:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Tigger</span> <span class="string">special</span> <span class="string">repository</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="comment"># å½“ master åˆ†æ”¯æœ‰å˜æ›´çš„æ—¶å€™è§¦å‘ workflow</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Send</span> <span class="string">repository</span> <span class="string">dispatch</span> <span class="string">event</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          curl -XPOST -u &quot;$&#123;&#123; secrets.PAT_USERNAME&#125;&#125;:$&#123;&#123;secrets.PAT_TOKEN&#125;&#125;&quot; \</span></span><br><span class="line"><span class="string">          -H &quot;Accept: application/vnd.github.everest-preview+json&quot; \</span></span><br><span class="line"><span class="string">          -H &quot;Content-Type: application/json&quot; https://api.github.com/repos/shenxianpeng/shenxianpeng/dispatches \</span></span><br><span class="line"><span class="string">          --data &#x27;&#123;&quot;event_type&quot;: &quot;special_repository&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼š<code>PAT_USERNAME</code> å’Œ <code>PAT_TOKEN</code> éœ€è¦åœ¨å½“å‰çš„ä»“åº“ã€è®¾ç½® -&gt; Secretsã€‘é‡Œè¿›è¡Œæ·»åŠ ï¼Œè¿™é‡Œå°±ä¸å…·ä½“ä»‹ç»äº†ï¼Œéœ€è¦å¯ä»¥è‡ªè¡Œæœç´¢ã€‚</p><p><img src="/2021/11/special-repository/secrets.png" alt="è®¾ç½® PAT"></p><p>ä»¥ä¸Šå°±æ˜¯é€šè¿‡ GitHub Actions å®ç°å½“åšå®¢æœ‰æ–°å‘å¸ƒçš„æ–‡ç« åè‡ªåŠ¨æ›´æ–° GitHub é¦–é¡µçš„æ‰€æœ‰å†…å®¹äº†ã€‚</p><p>å¦‚æœè¿˜æœ‰ä»€ä¹ˆæœ‰æ„æ€çš„ç©æ³•æ¬¢è¿è¯„è®ºåŒºé‡Œåˆ†äº«ä¸€ä¸‹å§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> Actions </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021-22 ä¸–ç•Œè´¨é‡æŠ¥å‘Šï¼ˆWorld Quality Reportï¼‰</title>
      <link href="/2021/11/world-quality-report/"/>
      <url>/2021/11/world-quality-report/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>2021-22 ä¸–ç•Œè´¨é‡æŠ¥å‘Šï¼ˆWorld Quality Report ç®€ç§° WQRï¼‰æ˜¯ç”± Micro Focusï¼ŒCapgemini å’Œ Sogeti ä¸‰å®¶å…¬å¸åˆä½œçš„æ¥åˆ†æè½¯ä»¶è´¨é‡å’Œæµ‹è¯•è¶‹åŠ¿åœ¨å…¨çƒèŒƒå›´å†…å”¯ä¸€çš„æŠ¥å‘Šã€‚</p><p>è¿™ä»½æŠ¥å‘Šå…±é‡‡è®¿äº† 1750 åé«˜ç®¡å’Œä¸“ä¸šäººå£«ã€‚ä»æœ€é«˜ç®¡ç†å±‚åˆ° QA æµ‹è¯•ç»ç†å’Œè´¨é‡å·¥ç¨‹å¸ˆï¼Œæ¶µç›–äº†æ¥è‡ªå…¨çƒ 32 ä¸ªå›½å®¶çš„ 10 ä¸ªè¡Œä¸šã€‚</p><p><img src="/2021/11/world-quality-report/0.png" alt="å›¾ç‰‡ 0"></p><p>ä¸–ç•Œè´¨é‡æŠ¥å‘Šï¼ˆWQRï¼‰æ˜¯ä¸€é¡¹ç‹¬ä¸€æ— äºŒçš„å…¨çƒç ”ç©¶ï¼Œä»Šå¹´çš„è°ƒæŸ¥å¼ºè°ƒäº†æ–°éƒ¨ç½²æ–¹æ³•ä¸­ä¸æ–­å˜åŒ–çš„å—å¤§æµè¡Œå½±å“çš„åº”ç”¨ç¨‹åºéœ€æ±‚çš„å½±å“ï¼Œä»¥åŠ QA å¯¹æ•æ·å’Œ DevOps å®è·µçš„é‡‡ç”¨ï¼ŒAI çš„æŒç»­å¢é•¿ã€‚</p><p>ä½œä¸ºæµ‹è¯•å…³æ³¨è¿™ç±»è½¯ä»¶è´¨é‡æŠ¥å‘Šå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿäº†è§£è½¯ä»¶æµ‹è¯•è¡Œä¸šçš„ç°çŠ¶å’Œè¶‹åŠ¿ã€‚</p><h2 id="äº”å¤§ä¸»é¢˜"><a href="#äº”å¤§ä¸»é¢˜" class="headerlink" title="äº”å¤§ä¸»é¢˜"></a>äº”å¤§ä¸»é¢˜</h2><p>WQR çš„ä¸€ä¸ªå…³é”®ä¿¡æ¯ï¼šåœ¨æ–°å† ç–«æƒ…ä¾æ—§çš„ä»Šå¤©ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†æ•°å­—åŒ–è½¬å‹çš„èåˆä»¥åŠæ•æ·å’Œ DevOps å®è·µçš„å®æ—¶é‡‡ç”¨ã€‚æ­¤å¤–ï¼ŒQA æ­£åœ¨æˆä¸ºé‡‡ç”¨æ•æ·å’Œ DevOps å®è·µçš„é¢†å¯¼è€…ï¼Œä¸ºå›¢é˜Ÿæä¾›å·¥å…·å’Œæµç¨‹ä»¥ä¿ƒè¿›æ•´ä¸ªè½¯ä»¶ç”Ÿå‘½å‘¨æœŸï¼ˆSDLCï¼‰çš„è´¨é‡ã€‚</p><p>WQR å›´ç»•å…³é”®å‘ç°å’Œè¶‹åŠ¿çªå‡ºäº†äº”ä¸ªç‰¹å®šä¸»é¢˜ï¼š</p><ol><li>æ–°å† ç–«æƒ…å¯¹ QA ç»„ç»‡å’Œè½¯ä»¶æµ‹è¯•çš„å½±å“</li><li>æ•°å­—åŒ–è½¬å‹ä¸ DevOps å’Œæ•æ·é‡‡ç”¨çš„å®æ—¶èåˆä»¥åŠ QA åœ¨å…¶ä¸­çš„æ—¥ç›Šé‡è¦çš„ä½œç”¨</li><li>åœ°ç†ä¸Šåˆ†æ•£çš„å›¢é˜Ÿåœ¨è·¨ç¯å¢ƒéƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ä¸“æ³¨äºä¸šåŠ¡æˆæœ</li><li>äººå·¥æ™ºèƒ½ (AI) å¢å¼ºäº†æ•æ·å’Œ DevOps åœ¨æ‰€æœ‰å›¢é˜Ÿä¸­åŸ¹å…»ä¸æ–­å¢é•¿çš„è´¨é‡è´£ä»»æ–‡åŒ–</li><li>ä½¿ç”¨ AI é©±åŠ¨çš„æŒç»­æµ‹è¯•å’Œè´¨é‡ç®¡ç†å·¥å…·æ¥è§£å†³å®¢æˆ·ä½“éªŒä¼˜å…ˆäº‹é¡¹å’Œå¿«é€Ÿå˜åŒ–çš„å—ç–«æƒ…å½±å“çš„è¦æ±‚</li></ol><span id="more"></span><h2 id="ä¸»è¦å‘ç°å’Œè¶‹åŠ¿"><a href="#ä¸»è¦å‘ç°å’Œè¶‹åŠ¿" class="headerlink" title="ä¸»è¦å‘ç°å’Œè¶‹åŠ¿"></a>ä¸»è¦å‘ç°å’Œè¶‹åŠ¿</h2><h3 id="1-æ–°å† ç–«æƒ…å¯¹-QA-ç»„ç»‡å’Œè½¯ä»¶æµ‹è¯•çš„å½±å“"><a href="#1-æ–°å† ç–«æƒ…å¯¹-QA-ç»„ç»‡å’Œè½¯ä»¶æµ‹è¯•çš„å½±å“" class="headerlink" title="1. æ–°å† ç–«æƒ…å¯¹ QA ç»„ç»‡å’Œè½¯ä»¶æµ‹è¯•çš„å½±å“"></a>1. æ–°å† ç–«æƒ…å¯¹ QA ç»„ç»‡å’Œè½¯ä»¶æµ‹è¯•çš„å½±å“</h3><p>æ–°å† ç–«æƒ…å¯¹ QA åœ¨å†…çš„å‡ ä¹æ‰€æœ‰ä¸šåŠ¡æ–¹é¢éƒ½äº§ç”Ÿäº†ç›´æ¥è€ŒçœŸå®çš„å½±å“ã€‚ç„¶è€Œè®¸å¤š QA ç»„ç»‡èƒ½å¤Ÿé€‚åº”æ–°çš„æ··åˆå·¥ä½œç¯å¢ƒçš„ç°å®ï¼Œå¹¶è¿‡æ¸¡åˆ°åœ¨åˆ†å¸ƒå¼å›¢é˜Ÿä¸­å·¥ä½œçš„æ–°ç°å®ã€‚è¿™å¯èƒ½å‘ç”Ÿäº†ï¼Œå› ä¸ºæ··åˆåˆ†å¸ƒå¼å›¢é˜Ÿçš„è¶‹åŠ¿å·²ç»åœ¨å¢é•¿ï¼Œè€Œç–«æƒ…åªæ˜¯åŠ é€Ÿäº†è¿™ç§è¶‹åŠ¿ã€‚</p><h4 id="å®¢æˆ·ä½“éªŒä¸ºç‹"><a href="#å®¢æˆ·ä½“éªŒä¸ºç‹" class="headerlink" title="å®¢æˆ·ä½“éªŒä¸ºç‹"></a>å®¢æˆ·ä½“éªŒä¸ºç‹</h4><p>æ–°å† ç–«æƒ…å°†é‡ç‚¹é‡æ–°æ”¾åœ¨äº†å®¢æˆ·åŠå…¶ä½“éªŒä¸Šã€‚ä»Šå¹´æœ€å—å¥½è¯„çš„æ–¹é¢æ˜¯ï¼š</p><ul><li>å¢å¼ºå®¢æˆ·ä½“éªŒï¼Œ63% çš„å—è®¿è€…é€‰æ‹©äº†è¿™ä¸€ç‚¹</li><li>å…¶æ¬¡æ˜¯å¢å¼ºå®‰å…¨æ€§ï¼ˆ62%ï¼‰</li><li>å†æ¬¡æ˜¯å¯¹ä¸šåŠ¡éœ€æ±‚çš„æ›´é«˜å“åº”èƒ½åŠ›ï¼ˆ61%ï¼‰</li><li>ä»¥åŠæ›´é«˜è´¨é‡çš„è½¯ä»¶è§£å†³æ–¹æ¡ˆ (61%)</li></ul><p><img src="/2021/11/world-quality-report/1.png" alt="å›¾ç‰‡ 1"></p><h4 id="ä»ä¿ç®¡äººåˆ°è´¨é‡å† å†›"><a href="#ä»ä¿ç®¡äººåˆ°è´¨é‡å† å†›" class="headerlink" title="ä»ä¿ç®¡äººåˆ°è´¨é‡å† å†›"></a>ä»ä¿ç®¡äººåˆ°è´¨é‡å† å†›</h4><p>åœ¨è¿‡å»çš„ä¸€å¹´ä¸­ï¼Œæµ‹è¯•å’Œ QA ç›®æ ‡ä¹Ÿå‘ç”Ÿäº†é‡æ–°æ’åºã€‚å»å¹´ä¸šåŠ¡æˆæœå’Œè´¨é‡çš„å®ˆæŠ¤è€…æ˜¯æ˜æ˜¾çš„é¢†å¯¼è€…ï¼Œè€Œä»Šå¹´ï¼Œè¿™äº›æ•°æ®ä¹‹é—´çš„æ”¯æŒç‡ç¼©å°äº†ã€‚</p><ul><li>å›¢é˜Ÿä¸­çš„è´¨é‡ä¿ç®¡äººã€è´¨é‡é€Ÿåº¦å’Œè´¨é‡èµ‹èƒ½ä»¥ 62% é¢†å…ˆ</li><li>ä¸šåŠ¡ä¿è¯ã€æ•°å­—åŒ–å¹¸ç¦å’Œè‡ªåŠ¨åŒ–ä»¥ 61% æ’åœ¨äº†ç¬¬äºŒä½</li></ul><p>QA å›¢é˜Ÿæ­£åœ¨ä»è´¨é‡çš„ç›‘æŠ¤äººæ¼”å˜ä¸ºè´¨é‡çš„æ‹¥æŠ¤è€…ã€‚QA å›¢é˜Ÿæ­£åœ¨æˆä¸ºç»„ç»‡è´¨é‡è®¡åˆ’ä¸­å……æ»¡æ´»åŠ›çš„é¢†å¯¼è€…ï¼Œæ”¯æŒå›¢é˜Ÿä¸­çš„æ¯ä¸ªäººå®ç°è´¨é‡ï¼ŒåŒæ—¶ä¸ºä¸šåŠ¡æˆæœå’Œå¢é•¿åšå‡ºè´¡çŒ®ã€‚</p><p><img src="/2021/11/world-quality-report/2.png" alt="å›¾ç‰‡ 2"></p><h3 id="2-æ•°å­—åŒ–è½¬å‹ä¸-DevOps-å’Œæ•æ·é‡‡ç”¨çš„å®æ—¶èåˆä»¥åŠ-QA-åœ¨å…¶ä¸­çš„æ—¥ç›Šé‡è¦çš„ä½œç”¨"><a href="#2-æ•°å­—åŒ–è½¬å‹ä¸-DevOps-å’Œæ•æ·é‡‡ç”¨çš„å®æ—¶èåˆä»¥åŠ-QA-åœ¨å…¶ä¸­çš„æ—¥ç›Šé‡è¦çš„ä½œç”¨" class="headerlink" title="2. æ•°å­—åŒ–è½¬å‹ä¸ DevOps å’Œæ•æ·é‡‡ç”¨çš„å®æ—¶èåˆä»¥åŠ QA åœ¨å…¶ä¸­çš„æ—¥ç›Šé‡è¦çš„ä½œç”¨"></a>2. æ•°å­—åŒ–è½¬å‹ä¸ DevOps å’Œæ•æ·é‡‡ç”¨çš„å®æ—¶èåˆä»¥åŠ QA åœ¨å…¶ä¸­çš„æ—¥ç›Šé‡è¦çš„ä½œç”¨</h3><h4 id="æ¨åŠ¨æ•°å­—åŒ–è½¬å‹"><a href="#æ¨åŠ¨æ•°å­—åŒ–è½¬å‹" class="headerlink" title="æ¨åŠ¨æ•°å­—åŒ–è½¬å‹"></a>æ¨åŠ¨æ•°å­—åŒ–è½¬å‹</h4><p>ä»Šå¹´ï¼Œæ•°å­—åŒ–è½¬å‹ä¸¾æªç¬¦åˆç–«æƒ…çš„è¦æ±‚ã€‚åœ¨ç–«æƒ…å¼€å§‹ä¹‹å‰ï¼Œæ•æ·å’Œ DevOps æ˜¯ä¸€ç§å¢é•¿è¶‹åŠ¿ã€‚åœ¨ç–«æƒ…æœŸé—´ï¼Œæˆ‘ä»¬å¼€å§‹çœ‹åˆ° QA ç°åœ¨åœ¨ç»„ç»‡é‡‡ç”¨æ•æ·å’Œ DevOps æ–¹é¢å‘æŒ¥ç€å…³é”®ä½œç”¨ï¼Œæ¨¡ç³Šäº†å¼€å‘å’Œæµ‹è¯•ä¹‹é—´çš„ç•Œé™ï¼ŒåŒæ—¶åˆ›å»ºäº†ä¸€ç§æ··åˆçš„è´¨é‡æ–¹æ³•ã€‚</p><p>æ¥çœ‹çœ‹æ•°å­—åŒ–è½¬å‹çš„é©±åŠ¨å› ç´ æœ‰å“ªäº›ï¼šæé«˜ç”Ÿäº§åŠ›å’Œæ•ˆç‡ä»¥ 47% çš„æ¯”ä¾‹é¢†å…ˆï¼›å…¶æ¬¡æ˜¯æé«˜æœåŠ¡&#x2F;äº§å“è´¨é‡çš„æ¯”ä¾‹ä¸º 46%ï¼›ç¬¬ä¸‰æ˜¯é€Ÿåº¦ã€æ›´å¥½çš„æ•æ·æ€§å’Œçµæ´»æ€§ï¼›å®¢æˆ·ä½“éªŒç›´æ¥è½åäºé€Ÿåº¦ï¼›ç´§éšå…¶åçš„æ˜¯é™ä½æˆæœ¬å’Œåˆ›é€ åˆ›æ–°æœºä¼šï¼›ç«äº‰å·®å¼‚åŒ–æ˜¯æœ€åã€‚</p><p><img src="/2021/11/world-quality-report/3.png" alt="å›¾ç‰‡ 3"></p><blockquote><p>å› ä¸ºç«äº‰å·®å¼‚ä¼¼ä¹æ›´å¤šæ˜¯æ•°å­—åŒ–è½¬å‹çš„é™„å¸¦å¥½å¤„ï¼Œè€Œæ•°å­—åŒ–è½¬å‹æœ¬èº«æœ‰åŠ©äºæé«˜æ•ˆç‡ã€è´¨é‡ã€é€Ÿåº¦å’Œæ•´ä½“æ›´å¥½çš„å®¢æˆ·ä½“éªŒã€‚</p></blockquote><h4 id="QA-åœ¨-DevOps-å’Œæ•æ·é‡‡ç”¨ä¸­çš„ä½œç”¨è¶Šæ¥è¶Šå¤§-â€”â€”-ä»¥ä¸šåŠ¡ä¼˜å…ˆçº§ä¸ºæŒ‡å¯¼"><a href="#QA-åœ¨-DevOps-å’Œæ•æ·é‡‡ç”¨ä¸­çš„ä½œç”¨è¶Šæ¥è¶Šå¤§-â€”â€”-ä»¥ä¸šåŠ¡ä¼˜å…ˆçº§ä¸ºæŒ‡å¯¼" class="headerlink" title="QA åœ¨ DevOps å’Œæ•æ·é‡‡ç”¨ä¸­çš„ä½œç”¨è¶Šæ¥è¶Šå¤§ â€”â€” ä»¥ä¸šåŠ¡ä¼˜å…ˆçº§ä¸ºæŒ‡å¯¼"></a>QA åœ¨ DevOps å’Œæ•æ·é‡‡ç”¨ä¸­çš„ä½œç”¨è¶Šæ¥è¶Šå¤§ â€”â€” ä»¥ä¸šåŠ¡ä¼˜å…ˆçº§ä¸ºæŒ‡å¯¼</h4><p>ä»Šå¹´ï¼Œæˆ‘ä»¬è§è¯äº†ä¸šåŠ¡éœ€æ±‚çš„é‡å¤§è°ƒæ•´ï¼Œå˜å¾—æ¯”æŠ€æœ¯å †æ ˆçš„éœ€æ±‚æ›´é‡è¦ã€‚ä¸å»å¹´ç›¸æ¯”ï¼Œå¯¹æŠ€æœ¯æ ˆç»™äºˆæƒé‡çš„å‚ä¸è€…æ•°é‡ä¸‹é™äº† 16 ä¸ªç™¾åˆ†ç‚¹ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸Šå‡æœ€å¤§çš„ï¼š</p><ul><li>ä¸šåŠ¡ä¼˜å…ˆçº§ï¼Œç°åœ¨æ’åç¬¬ä¸€ï¼Œæ¯”å»å¹´å¢åŠ äº† 11 ä¸ªç™¾åˆ†ç‚¹</li><li>æ­¤å¤–ï¼Œä¸å»å¹´ç›¸æ¯”æ˜¾ç€å¢åŠ çš„æ˜¯æ–‡åŒ–&#x2F;æ•æ·æ€§ï¼Œå¢åŠ äº† 21 ä¸ªç™¾åˆ†ç‚¹</li></ul><p><img src="/2021/11/world-quality-report/4.png" alt="å›¾ç‰‡ 4"></p><h3 id="3-åœ°ç†ä¸Šåˆ†æ•£çš„å›¢é˜Ÿåœ¨è·¨ç¯å¢ƒéƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ä¸“æ³¨äºä¸šåŠ¡æˆæœ"><a href="#3-åœ°ç†ä¸Šåˆ†æ•£çš„å›¢é˜Ÿåœ¨è·¨ç¯å¢ƒéƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ä¸“æ³¨äºä¸šåŠ¡æˆæœ" class="headerlink" title="3. åœ°ç†ä¸Šåˆ†æ•£çš„å›¢é˜Ÿåœ¨è·¨ç¯å¢ƒéƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ä¸“æ³¨äºä¸šåŠ¡æˆæœ"></a>3. åœ°ç†ä¸Šåˆ†æ•£çš„å›¢é˜Ÿåœ¨è·¨ç¯å¢ƒéƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ä¸“æ³¨äºä¸šåŠ¡æˆæœ</h3><p>å»å¹´çš„è°ƒæŸ¥æ˜¯åœ¨å…¨çƒç–«æƒ…å¼€å§‹æ—¶è¿›è¡Œçš„ï¼Œè¯¥è°ƒæŸ¥æ˜¾ç¤ºäº†æ»¡è¶³ä¸šåŠ¡ç›®æ ‡æ‰€éœ€çš„å˜é©è¿¹è±¡ï¼Œä»¥åŠè¿œç¨‹å·¥ä½œå’Œæ•°å­—åŒ–è½¬å‹çš„æ–°è¦æ±‚ã€‚é€šè¿‡ä»Šå¹´çš„è°ƒæŸ¥ï¼Œæˆ‘ä»¬çœ‹åˆ°æ•°å­—åŒ–è½¬å‹ä»åœ¨ç»§ç»­ï¼Œå³ä½¿ä¸å—ç–«æƒ…å½±å“çš„æ–°å·¥ä½œè¦æ±‚ä¿æŒåŒæ­¥ã€‚è¿™åŠ é€Ÿäº†å…¬å¸å°†å·¥ä½œè´Ÿè½½è¿ç§»åˆ°äº‘çš„è®¡åˆ’ï¼Œéƒ¨åˆ†åŸå› æ˜¯è®¡åˆ’ä¸­çš„æ•°å­—åŒ–è½¬å‹è®¡åˆ’ï¼Œä»¥åŠå‘è¿œç¨‹å·¥ä½œçš„å¿«é€Ÿè½¬å˜ï¼Œåˆºæ¿€äº†æé«˜å®‰å…¨æ€§çš„éœ€æ±‚ã€‚</p><p>ç”±äºå—ç–«æƒ…å½±å“çš„å·¥ä½œåœºæ‰€ï¼Œè¯„ä»·æœ€é«˜çš„ç„¦ç‚¹æ˜¯å¯¹æµ‹è¯•ç³»ç»Ÿå’Œæµ‹è¯•ç¯å¢ƒçš„è¿œç¨‹è®¿é—®ï¼ˆä½¿ç”¨ SaaS å’Œäº‘ï¼‰ã€‚æ”¯æŒè¿™ç§è¿œç¨‹è®¿é—®æ˜¯åŸºäºè¿œç¨‹çš„æ¬¡è¦å› ç´ ï¼ŒåŒ…æ‹¬æ›´å¥½çš„å›¢é˜Ÿåä½œå·¥å…·ã€‚ä¸ºäº†æ”¯æŒç°ä»£åº”ç”¨ç¨‹åºçš„è´¨é‡ï¼Œæµ‹è¯•ç¯å¢ƒæœ¬èº«ä¹Ÿå¿…é¡»ç°ä»£åŒ–ã€‚ä»Šå¹´ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼š</p><ul><li>ç»„ç»‡å¯¹ä½¿ç”¨äº‘å’Œå®¹å™¨å®ç°æµ‹è¯•ç¯å¢ƒç°ä»£åŒ–çš„è¶Šæ¥è¶Šæ»¡æ„ï¼ˆæœ€é«˜æ»¡æ„åº¦ï¼‰</li><li>å…¶æ¬¡æ˜¯æ”¹è¿›é¢„è®¢å’Œç®¡ç†æµ‹è¯•ç¯å¢ƒï¼ˆ+16ï¼‰</li><li>ç„¶åæä¾›å¯è§æ€§ï¼ˆ+22ï¼‰</li><li>æœ€åæˆæœ¬æ•ˆç‡ï¼ˆ+18ï¼‰</li></ul><p><img src="/2021/11/world-quality-report/5.png" alt="å›¾ç‰‡ 5"></p><h3 id="4-äººå·¥æ™ºèƒ½-AI-å¢å¼ºäº†æ•æ·å’Œ-DevOps-åœ¨æ‰€æœ‰å›¢é˜Ÿä¸­åŸ¹å…»ä¸æ–­å¢é•¿çš„è´¨é‡è´£ä»»æ–‡åŒ–"><a href="#4-äººå·¥æ™ºèƒ½-AI-å¢å¼ºäº†æ•æ·å’Œ-DevOps-åœ¨æ‰€æœ‰å›¢é˜Ÿä¸­åŸ¹å…»ä¸æ–­å¢é•¿çš„è´¨é‡è´£ä»»æ–‡åŒ–" class="headerlink" title="4. äººå·¥æ™ºèƒ½ (AI) å¢å¼ºäº†æ•æ·å’Œ DevOps åœ¨æ‰€æœ‰å›¢é˜Ÿä¸­åŸ¹å…»ä¸æ–­å¢é•¿çš„è´¨é‡è´£ä»»æ–‡åŒ–"></a>4. äººå·¥æ™ºèƒ½ (AI) å¢å¼ºäº†æ•æ·å’Œ DevOps åœ¨æ‰€æœ‰å›¢é˜Ÿä¸­åŸ¹å…»ä¸æ–­å¢é•¿çš„è´¨é‡è´£ä»»æ–‡åŒ–</h3><p>äººå·¥æ™ºèƒ½ç»§ç»­æ”¹å˜æµ‹è¯•è‡ªåŠ¨åŒ–çš„æ„å»ºæ–¹å¼ï¼Œä»¥åŠæµ‹è¯•çš„æ‰§è¡Œæ–¹å¼ã€‚æˆ‘ä»¬çœ‹åˆ°ç»„ç»‡å†…éƒ¨å¯¹åŸºäº AI çš„æµ‹è¯•æ°´å¹³çš„ä¿¡å¿ƒè¶Šæ¥è¶Šé«˜ï¼Œå‡ ä¹ä¸€åŠçš„å—è®¿è€…è¡¨ç¤ºä»–ä»¬å·²ç»æ‹¥æœ‰ AI å’Œ ML æ‰€éœ€çš„æµ‹è¯•æ‰§è¡Œæ•°æ®çš„ä»“åº“ï¼Œå¹¶è¡¨ç¤ºä»–ä»¬æ„¿æ„æ ¹æ®ä»–ä»¬çš„ AI å’Œ ML å¹³å°æä¾›çš„æƒ…æŠ¥é‡‡å–è¡ŒåŠ¨ã€‚</p><p><img src="/2021/11/world-quality-report/6.png" alt="å›¾ç‰‡ 6"></p><p>ä»Šå¹´ï¼Œæˆ‘ä»¬è¿˜è¦æ±‚å—è®¿è€…é¢„æµ‹ä»–ä»¬åˆ©ç”¨ä¸€ç³»åˆ—æ–¹æ³•æ¥åŠ é€Ÿå’Œä¼˜åŒ–æ•æ·å’Œ DevOps ç¯å¢ƒä¸­çš„æµ‹è¯•çš„å¯èƒ½æ€§ã€‚ä¸å»å¹´åŒæœŸç›¸æ¯”ï¼š</p><ul><li>å°†æµ‹è¯•é›†æˆåˆ° CI&#x2F;CD æµæ°´çº¿çš„è‡ªåŠ¨è´¨é‡é—¨ï¼ˆ+5ï¼‰</li><li>é€šè¿‡å®æ–½æ™ºèƒ½å’Œè‡ªåŠ¨åŒ–ä»ªè¡¨æ¿ä»¥å®ç°æŒç»­è´¨é‡ç›‘æ§å¢é•¿æœ€å¤šï¼ˆ+9ï¼‰</li><li>ä»Šå¹´æ–°å¢åŠ çš„ä½¿ç”¨ AI æ¥ä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹åœ¨æ€»ä½“ä¸Šå¹¶åˆ—ç¬¬äºŒï¼Œä»…è½åäºæµ‹è¯•å·¦ç§»ã€‚</li></ul><p><img src="/2021/11/world-quality-report/7.png" alt="å›¾ç‰‡ 7"></p><h3 id="5-ä½¿ç”¨-AI-é©±åŠ¨çš„æŒç»­æµ‹è¯•å’Œè´¨é‡ç®¡ç†å·¥å…·æ¥è§£å†³å®¢æˆ·ä½“éªŒä¼˜å…ˆäº‹é¡¹å’Œå¿«é€Ÿå˜åŒ–çš„å—ç–«æƒ…å½±å“çš„è¦æ±‚"><a href="#5-ä½¿ç”¨-AI-é©±åŠ¨çš„æŒç»­æµ‹è¯•å’Œè´¨é‡ç®¡ç†å·¥å…·æ¥è§£å†³å®¢æˆ·ä½“éªŒä¼˜å…ˆäº‹é¡¹å’Œå¿«é€Ÿå˜åŒ–çš„å—ç–«æƒ…å½±å“çš„è¦æ±‚" class="headerlink" title="5. ä½¿ç”¨ AI é©±åŠ¨çš„æŒç»­æµ‹è¯•å’Œè´¨é‡ç®¡ç†å·¥å…·æ¥è§£å†³å®¢æˆ·ä½“éªŒä¼˜å…ˆäº‹é¡¹å’Œå¿«é€Ÿå˜åŒ–çš„å—ç–«æƒ…å½±å“çš„è¦æ±‚"></a>5. ä½¿ç”¨ AI é©±åŠ¨çš„æŒç»­æµ‹è¯•å’Œè´¨é‡ç®¡ç†å·¥å…·æ¥è§£å†³å®¢æˆ·ä½“éªŒä¼˜å…ˆäº‹é¡¹å’Œå¿«é€Ÿå˜åŒ–çš„å—ç–«æƒ…å½±å“çš„è¦æ±‚</h3><p>ä»Šå¹´ï¼Œæˆ‘ä»¬å‘å—è®¿è€…è¯¢é—®äº†æµ‹è¯•è‡ªåŠ¨åŒ–æœ‰å“ªäº›å¥½å¤„ï¼š</p><ul><li>é¦–å…ˆä¸å»å¹´ç›¸æ¯”æ‰€æœ‰é¡¹ç›®åŒæ¯”è¶‹åŠ¿å‡å‘ˆä¸‹é™è¶‹åŠ¿ï¼Œè¿™æ˜¾ç¤ºäº†åœ¨æ··åˆå’Œåˆ†å¸ƒå¼å›¢é˜Ÿä¸­å·¥ä½œæ‰€é¢ä¸´çš„æŒ‘æˆ˜</li><li>åƒæ˜¯æ›´å¥½çš„å‘ç°ç¼ºé™·ã€ç¼©çŸ­æµ‹è¯•å‘¨æœŸã€é™ä½æ•´ä½“å®‰å…¨é£é™©ã€æ›´å¥½çš„æµ‹è¯•è¦†ç›–ç‡ã€é™ä½æµ‹è¯•æˆæœ¬ï¼Œä»¥åŠæ§åˆ¶æµ‹è¯•çš„é€æ˜åº¦éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„å¥½å¤„</li><li>AI&#x2F;ML æ˜¯ç¬¬å››é«˜çš„å¥½å¤„ï¼Œè¿™ä¹Ÿè¯æ˜äº†å®ƒçš„æ½œåŠ›å’Œä»·å€¼</li></ul><p><img src="/2021/11/world-quality-report/8.png" alt="å›¾ç‰‡ 8"></p><h2 id="ä¸»è¦å»ºè®®"><a href="#ä¸»è¦å»ºè®®" class="headerlink" title="ä¸»è¦å»ºè®®"></a>ä¸»è¦å»ºè®®</h2><h3 id="æ•æ·å’Œ-DevOps-ä¸­çš„-QA-ç¼–æ’"><a href="#æ•æ·å’Œ-DevOps-ä¸­çš„-QA-ç¼–æ’" class="headerlink" title="æ•æ·å’Œ DevOps ä¸­çš„ QA ç¼–æ’"></a>æ•æ·å’Œ DevOps ä¸­çš„ QA ç¼–æ’</h3><p>å…³æ³¨æœ€é‡è¦çš„äº‹æƒ…ï¼šå®¢æˆ·ä½“éªŒå’Œä¸šåŠ¡ç›®æ ‡ï¼Œä»¥æ•ˆç‡å’Œé€Ÿåº¦æ»¡è¶³è¿™ä¸¤è€…çš„éœ€æ±‚ã€‚åŒæ—¶ï¼Œåœ¨ä½ çš„å›¢é˜Ÿä¸­é‡‡ç”¨å·¥ç¨‹æ€ç»´ï¼Œå¹¶æ¥å—å¤šæŠ€èƒ½å’ŒæŠ€èƒ½æå‡ã€‚ä¸€ä¸ªæ­£åœ¨è¿…é€Ÿæˆä¸ºæ–°å¸¸æ€çš„æ–°è¶‹åŠ¿æ˜¯ SDETï¼ˆæµ‹è¯•ä¸­çš„è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆï¼‰ã€‚æŠ•èµ„æ´å¯ŸåŠ›ï¼Œå°¤å…¶æ˜¯è·¨è¶Šæ•´ä¸ª QA å’Œæµ‹è¯•åŠŸèƒ½çš„å®æ—¶æ´å¯ŸåŠ›ã€‚ä»çŸ­æœŸæˆ˜æœ¯è®¡åˆ’åˆ°é•¿æœŸè§„åˆ’å’Œæˆ˜ç•¥æ–¹å‘ï¼Œä¸“æ³¨äºå¼€å‘å…·æœ‰å®æ—¶ KPI çš„æ™ºèƒ½ä»ªè¡¨æ¿ã€‚</p><h3 id="æ™ºèƒ½æµ‹è¯•è‡ªåŠ¨åŒ–"><a href="#æ™ºèƒ½æµ‹è¯•è‡ªåŠ¨åŒ–" class="headerlink" title="æ™ºèƒ½æµ‹è¯•è‡ªåŠ¨åŒ–"></a>æ™ºèƒ½æµ‹è¯•è‡ªåŠ¨åŒ–</h3><p>é€šè¿‡é‡‡ç”¨è‡ªåŠ¨åŒ–ä¼˜å…ˆçš„è½¯ä»¶è´¨é‡äº¤ä»˜æ–¹æ³•ï¼Œåœ¨ QA ä¸­æ ‡å‡†åŒ–æµ‹è¯•è‡ªåŠ¨åŒ–çš„ä½¿ç”¨ã€‚åœ¨ E2E ç”Ÿå‘½å‘¨æœŸä¸­æ‰©å±•è‡ªåŠ¨åŒ–ï¼Œå°†è‡ªåŠ¨åŒ–çº³å…¥æ‰€æœ‰ QA æ´»åŠ¨ã€‚</p><h3 id="äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ "><a href="#äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ " class="headerlink" title="äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ "></a>äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ </h3><p>æ¨åŠ¨äººå·¥æ™ºèƒ½çš„ä½¿ç”¨ â€”â€” ä¸è¦è¢«å®ƒæ‰€é©±åŠ¨ã€‚AI å’Œ ML æœ‰æœ›æä¾›æŒ‡æ•°çº§çš„æ”¹è¿›ï¼Œä½†å°† AI ç”¨ä½œå·¥å…·ï¼Œè€Œä¸æ˜¯æ›¿ä»£ä½ æ­£åœ¨åˆ¶å®šçš„ä¸šåŠ¡å†³ç­–ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ AI æ¥é˜æ˜è¯¥åšä»€ä¹ˆä»¥åŠä½•æ—¶è¯¥åšã€‚å®ƒä¸ä»…æœ‰åŠ©äºè¯†åˆ«æ•…éšœï¼Œè€Œä¸”æœ‰åŠ©äºè¯†åˆ«è¿™äº›æ•…éšœå‘ç”Ÿçš„åŸå› ã€‚æ­¤å¤–ï¼Œå°† AI é‡ç‚¹æ”¾åœ¨æœ€é‡è¦çš„äº‹æƒ…ä¸Šï¼Œç¡®å®šè½¯ä»¶äº¤ä»˜ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„è´¨é‡é¢†åŸŸã€‚å¦‚æœä½ å°šæœªå°† AI çº³å…¥è´¨é‡ï¼Œé‚£ä¹ˆç°åœ¨æ˜¯å¼€å§‹çš„æœ€ä½³æ—¶æœºã€‚</p><h3 id="æµ‹è¯•ç¯å¢ƒç®¡ç†-TEM-å’Œæµ‹è¯•æ•°æ®ç®¡ç†-TDM"><a href="#æµ‹è¯•ç¯å¢ƒç®¡ç†-TEM-å’Œæµ‹è¯•æ•°æ®ç®¡ç†-TDM" class="headerlink" title="æµ‹è¯•ç¯å¢ƒç®¡ç† (TEM) å’Œæµ‹è¯•æ•°æ®ç®¡ç† (TDM)"></a>æµ‹è¯•ç¯å¢ƒç®¡ç† (TEM) å’Œæµ‹è¯•æ•°æ®ç®¡ç† (TDM)</h3><p>äº‘è®¡ç®—çš„é‡‡ç”¨æ­£åœ¨ç»§ç»­è‚¯å®šå’Œç¨³å®šçš„å¢é•¿ï¼Œä½†è¦æ³¨æ„ç¡®ä¿æœªæ¥ä¸ä¼šæ©ç›–ç°åœ¨çš„éœ€æ±‚ã€‚æˆåŠŸé‡‡ç”¨äº‘è®¡ç®—çš„å…³é”®æ˜¯è¦ç¡®ä¿ä¸ä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å®Œæ•´æ€§ã€‚å¦å¤–ï¼Œæ•°æ®åˆ†æç°åœ¨æ˜¯æµ‹è¯•æ•°æ®ç®¡ç†æ¡†æ¶çš„ä¸€ä¸ªå…³é”®æ–¹é¢ã€‚</p><h3 id="å®‰é˜²ä¸æ™ºèƒ½äº§ä¸š"><a href="#å®‰é˜²ä¸æ™ºèƒ½äº§ä¸š" class="headerlink" title="å®‰é˜²ä¸æ™ºèƒ½äº§ä¸š"></a>å®‰é˜²ä¸æ™ºèƒ½äº§ä¸š</h3><p>è¿œç¨‹è¿æ¥è¦æ±‚å¯¹æµ‹è¯•å’ŒQAç»„ç»‡çš„å®‰å…¨æ€§å’Œå¼¹æ€§è¿›è¡Œé€‚å½“çš„è€ƒè™‘ã€‚æŠ•èµ„äºåˆ›æ–°ï¼Œåœ¨ä½ çš„å®éªŒå®¤å’Œä½ çš„å›¢é˜Ÿä¸­ã€‚æ— è®ºä½ æ˜¯å¦ä» POC å¼€å§‹æ¥è¯æ˜å¯è¡Œæ€§ï¼Œç¡®ä¿ç®¡ç†å±‚çš„æ”¯æŒæ˜¯å®æ–½å˜é©çš„å…³é”®ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>çœ‹å®Œæ•´ä¸ª WQR æŠ¥å‘Šä¹‹åæˆ‘ä»ä¸­å­¦ä¹ åˆ°çš„å˜åŒ–ï¼š</p><ol><li>ä»¥ä¸šåŠ¡ä¼˜å…ˆçº§ä¸ºæŒ‡å¯¼ã€‚ä¸å»å¹´ç›¸æ¯”ï¼ŒæŠ€æœ¯æ ˆçš„æƒé‡ä¸‹é™äº†16%ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸šåŠ¡ä¼˜å…ˆçº§ã€‚ç„¶åæ˜¯æ–‡åŒ–ã€æ•æ·å¢åŠ äº†21%</li><li>å¯¹äº‘å’Œå®¹å™¨å®ç°æµ‹è¯•ç¯å¢ƒç°ä»£åŒ–æ»¡æ„åº¦è¯„ä»·æœ€é«˜</li><li>å°†æµ‹è¯•é›†æˆåˆ° CI&#x2F;CD æµæ°´çº¿çš„è‡ªåŠ¨è´¨é‡é—¨ï¼ˆ+5%ï¼‰</li><li>å®æ–½æ™ºèƒ½å’Œè‡ªåŠ¨åŒ– Dashboard ä»¥å®ç°æŒç»­è´¨é‡ç›‘æ§çš„å¢é•¿æœ€å¤šï¼ˆ+9%ï¼‰</li><li>ä½¿ç”¨ AI æ¥ä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹åœ¨æ€»ä½“ä¸Šå¹¶åˆ—ç¬¬äºŒï¼Œä»…è½åä¸æµ‹è¯•å·¦ç§»</li><li>äººå·¥æ™ºèƒ½ç»§ç»­æ”¹å˜è‡ªåŠ¨åŒ–çš„æ„å»ºæ–¹å¼å’Œæµ‹è¯•çš„æ‰§è¡Œæ–¹å¼ã€‚å‡ ä¹ä¸€åŠçš„å—è®¿è€…è¡¨ç¤ºä»–ä»¬æ‹¥æœ‰ AI&#x2F;ML æ‰€éœ€è¦çš„æµ‹è¯•æ‰§è¡Œä»“åº“ï¼Œå¹¶ä¸”æ„¿æ„æ ¹æ® AI&#x2F;ML æä¾›çš„æƒ…å†µé‡‡å–è¡ŒåŠ¨</li></ol><hr><blockquote><p>å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€ŠDevOpsæ”»åŸç‹®ã€‹å›å¤ï¼šâ€WQRâ€ å¯ä»¥ä¸‹è½½å®Œæ•´ç‰ˆçš„ã€Š2021-22 ä¸–ç•Œè´¨é‡æŠ¥å‘Š(WQR) ã€‹ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Quality </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Report </tag>
            
            <tag> Quality </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Polaris - é™æ€ä»£ç åˆ†æ</title>
      <link href="/2021/10/what-is-polaris/"/>
      <url>/2021/10/what-is-polaris/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™å¯èƒ½æ˜¯ä¸­æ–‡ç½‘é‡Œä»‹ç»Polarisæœ€è¯¦ç»†çš„æ–‡ç« äº†</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-Polarisï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Polarisï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Polarisï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Polarisï¼Ÿ</h2><p><strong>Polaris</strong> - æ‰˜ç®¡é™æ€åº”ç”¨ç¨‹åºè½¯ä»¶æµ‹è¯•(SAST)å·¥å…·çš„ SaaS å¹³å°ï¼Œå®ƒæ˜¯ç”¨äºåˆ†ç±»å’Œä¿®å¤æ¼æ´å¹¶è¿è¡ŒæŠ¥å‘Šçš„ Web ç«™ç‚¹ã€‚<br><strong>SAST</strong> - ä¸€ç§å¯¹æºä»£ç åˆ†ææˆ–æ„å»ºè¿‡ç¨‹ä¸­å»å¯»æ‰¾å®‰å…¨æ¼æ´çš„å·¥å…·ï¼Œæ˜¯ä¸€ç§åœ¨è½¯ä»¶å¼€å‘çš„ç”Ÿå‘½å‘¨æœŸ(SDLC)ä¸­ç¡®ä¿å®‰å…¨çš„é‡è¦æ­¥éª¤ã€‚<br><strong>Coverity</strong> - Coverity æ˜¯ Synopsys å…¬å¸æä¾›çš„åŸå§‹é™æ€åº”ç”¨è½¯ä»¶æµ‹è¯• (SAST) å·¥å…·ã€‚Polaris æ˜¯ Coverity çš„ SaaS ç‰ˆæœ¬ã€‚<br><strong>Synopsys</strong> - æ˜¯å¼€å‘ Polaris å’Œå…¶ä»–è½¯ä»¶æ‰«æå·¥å…·çš„å…¬å¸ï¼Œæ¯”å¦‚ BlackDuck ä¹Ÿæ˜¯ä»–ä»¬çš„äº§å“ã€‚</p><h2 id="Polaris-æ”¯æŒå“ªäº›è¯­è¨€ï¼Ÿ"><a href="#Polaris-æ”¯æŒå“ªäº›è¯­è¨€ï¼Ÿ" class="headerlink" title="Polaris æ”¯æŒå“ªäº›è¯­è¨€ï¼Ÿ"></a>Polaris æ”¯æŒå“ªäº›è¯­è¨€ï¼Ÿ</h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">C/C++</span><br><span class="line">C#</span><br><span class="line">Java</span><br><span class="line">JavaScript</span><br><span class="line">TypeScript</span><br><span class="line">PHP</span><br><span class="line">Python</span><br><span class="line">Fortran</span><br><span class="line">Swift</span><br><span class="line">...and more</span><br></pre></td></tr></table></figure><h2 id="Polaris-SaaS-å¹³å°"><a href="#Polaris-SaaS-å¹³å°" class="headerlink" title="Polaris SaaS å¹³å°"></a>Polaris SaaS å¹³å°</h2><p>é€šå¸¸å¦‚æœä½ çš„ç»„ç»‡å¼•å…¥äº† Polaris çš„ SaaS æœåŠ¡ï¼Œä½ å°†ä¼šæœ‰å¦‚ä¸‹ç½‘å€å¯ä¾›è®¿é—® URL: <a href="https://organization.polaris.synopsys.com/">https://organization.polaris.synopsys.com</a></p><p>ç„¶åç™»å½•ï¼Œä½ å°±å¯ä»¥ç»™è‡ªå·±çš„ Git Repository åˆ›å»ºå¯¹åº”çš„é¡¹ç›®äº†ã€‚</p><blockquote><p>å»ºè®®ï¼šåˆ›å»ºçš„é¡¹ç›®åç§°ä¸ Git Repository çš„åç§°ä¸€è‡´ã€‚</p></blockquote><h2 id="Polaris-å¦‚ä½•è¿›è¡Œæ¼æ´æ‰«æï¼Ÿ"><a href="#Polaris-å¦‚ä½•è¿›è¡Œæ¼æ´æ‰«æï¼Ÿ" class="headerlink" title="Polaris å¦‚ä½•è¿›è¡Œæ¼æ´æ‰«æï¼Ÿ"></a>Polaris å¦‚ä½•è¿›è¡Œæ¼æ´æ‰«æï¼Ÿ</h2><h3 id="Polaris-å®‰è£…"><a href="#Polaris-å®‰è£…" class="headerlink" title="Polaris å®‰è£…"></a>Polaris å®‰è£…</h3><p>åœ¨è¿›è¡Œ Polaris æ‰«æä¹‹å‰ï¼Œä½ éœ€è¦å…ˆä¸‹è½½å¹¶å®‰è£… polarisã€‚</p><p>å¦‚æœä½ çš„ Polaris server URL ä¸ºï¼š<code>POLARIS_SERVER_URL=https://organization.polaris.synopsys.com</code></p><p>ä¸‹è½½è¿æ¥ä¸ºï¼š<code>$POLARIS_SERVER_URL/api/tools/polaris_cli-linux64.zip</code></p><p>ç„¶åå°†ä¸‹è½½åˆ°æœ¬åœ°çš„ <code>polaris_cli-linux64.zip</code> è¿›è¡Œè§£å‹ï¼Œå°†å…¶ bin ç›®å½•æ·»åŠ åˆ° PATH ä¸­ã€‚</p><h3 id="Polaris-YAML-æ–‡ä»¶é…ç½®"><a href="#Polaris-YAML-æ–‡ä»¶é…ç½®" class="headerlink" title="Polaris YAML æ–‡ä»¶é…ç½®"></a>Polaris YAML æ–‡ä»¶é…ç½®</h3><p>åœ¨è¿›è¡Œæ‰«æä¹‹å‰ï¼Œä½ éœ€è¦ä¸ºä½ çš„é¡¹ç›®åˆ›å»º YAML æ–‡ä»¶ã€‚é»˜è®¤é…ç½®æ–‡ä»¶åä¸º <code>polaris.yml</code>ï¼Œä½äºé¡¹ç›®æ ¹ç›®å½•ã€‚å¦‚æœä½ å¸Œæœ›æŒ‡å®šä¸åŒçš„é…ç½®æ–‡ä»¶åï¼Œä½ å¯ä»¥åœ¨ <code>polaris</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>-c</code> é€‰é¡¹ã€‚</p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ <code>polaris setup</code> ä»¥ç”Ÿæˆé€šç”¨çš„ <code>polaris.yml</code> æ–‡ä»¶ã€‚</p><p>è¿è¡Œ <code>polaris configure</code> ä»¥ç¡®è®¤ä½ çš„æ–‡ä»¶åœ¨è¯­æ³•ä¸Šæ˜¯æ­£ç¡®çš„å¹¶ä¸” <code>polaris</code> æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><h4 id="Capture-æ•è·"><a href="#Capture-æ•è·" class="headerlink" title="Capture - æ•è·"></a>Capture - æ•è·</h4><p>YAML é…ç½®æ–‡ä»¶å¯ä»¥åŒ…å«ä¸‰ç§ç±»å‹çš„ Captureï¼š</p><ul><li>Build(æ„å»º) - è¿è¡Œæ„å»ºå‘½ä»¤ï¼Œç„¶ååˆ†æç»“æœ</li><li>Filesystem(æ–‡ä»¶ç³»ç»Ÿ) - å¯¹äºè§£é‡Šå‹è¯­è¨€ï¼Œæä¾›é¡¹ç›®ç±»å‹å’Œè¦åˆ†æçš„æ‰©å±•åˆ—è¡¨</li><li>Buildless - å¯¹äºä¸€äº›å¯ä»¥ä½¿ç”¨ä¾èµ–ç®¡ç†å™¨çš„è¯­è¨€ï¼Œæ¯”å¦‚ maven</li></ul><table><thead><tr><th>Languages</th><th>Build Options</th></tr></thead><tbody><tr><td>C, C++, ObjectiveC, Objective C++,Go, Scala, Swift</td><td>ä½¿ç”¨ Build æ•è·</td></tr><tr><td>PHP, Python, Ruby</td><td>ä½¿ç”¨ Buildless æˆ– Filesystem æ•è·</td></tr><tr><td>C#, Visual Basic.</td><td>å¦‚æœæƒ³è·å¾—æ›´å‡†ç¡®çš„ç»“æœä½¿ç”¨ Build æ•è·ï¼›å¦‚æœå¯»æ±‚ç®€å•ä½¿ç”¨ Buildless æ•è·</td></tr><tr><td>Java</td><td>å¦‚æœæƒ³è·å¾—æ›´å‡†ç¡®çš„ç»“æœä½¿ç”¨ Build æ•è·ï¼›å¦‚æœå¯»æ±‚ç®€å•ä½¿ç”¨ Buildless æ•è·</td></tr><tr><td>JavaScript,TypeScript</td><td>ä½¿ç”¨ Filesystem æ•è·ï¼›å¦‚æœå¯»æ±‚ç®€å•ä½¿ç”¨ Buildless æ•è·</td></tr></tbody></table><h4 id="Analyze-åˆ†æ"><a href="#Analyze-åˆ†æ" class="headerlink" title="Analyze - åˆ†æ"></a>Analyze - åˆ†æ</h4><p>å¦‚æœä½ æ­£åœ¨æ‰«æ C&#x2F;C++ ä»£ç ï¼Œåˆ™åº”åŒ…æ‹¬æ­¤åˆ†æéƒ¨åˆ†ä»¥å……åˆ†åˆ©ç”¨ Polaris çš„æ‰«æåŠŸèƒ½ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">analyze:</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">central</span></span><br><span class="line">  <span class="attr">coverity:</span></span><br><span class="line">    <span class="attr">cov-analyze:</span> [<span class="string">&quot;--security&quot;</span>,<span class="string">&quot;--concurrency&quot;</span>]</span><br></pre></td></tr></table></figure><h4 id="Polaris-YAML-ç¤ºä¾‹æ–‡ä»¶"><a href="#Polaris-YAML-ç¤ºä¾‹æ–‡ä»¶" class="headerlink" title="Polaris YAML ç¤ºä¾‹æ–‡ä»¶"></a>Polaris YAML ç¤ºä¾‹æ–‡ä»¶</h4><span id="more"></span><p>ç¤ºä¾‹1ï¼šä¸€ä¸ªC&#x2F;C++ é¡¹ç›®</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="attr">project:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-cplus-demo</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">$&#123;scm.git.branch&#125;</span></span><br><span class="line">  <span class="attr">revision:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">$&#123;scm.git.commit&#125;</span></span><br><span class="line">    <span class="attr">date:</span> <span class="string">$&#123;scm.git.commit.date&#125;</span></span><br><span class="line"><span class="attr">capture:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">cleanCommands:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">shell:</span> [<span class="string">make</span>, <span class="string">-f</span>, <span class="string">GNUmakefile</span>, <span class="string">clean</span>]</span><br><span class="line">    <span class="attr">buildCommands:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">shell:</span> [<span class="string">make</span>, <span class="string">-f</span>, <span class="string">GNUmakefile</span>]</span><br><span class="line"><span class="attr">analyze:</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">central</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="attr">coverity:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">serverUrl:</span> <span class="string">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹2ï¼šä¸€ä¸ª Java é¡¹ç›®</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="attr">project:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-java-demo</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">$&#123;scm.git.branch&#125;</span></span><br><span class="line">  <span class="attr">revision:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">$&#123;scm.git.commit&#125;</span></span><br><span class="line">    <span class="attr">date:</span> <span class="string">$&#123;scm.git.commit.date&#125;</span></span><br><span class="line"><span class="attr">capture:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">cleanCommands:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">shell:</span> [<span class="string">gradle</span>, <span class="string">-b</span>, <span class="string">build.gradle</span>, <span class="string">--no-daemon</span>, <span class="string">clean</span>]</span><br><span class="line">    <span class="attr">buildCommands:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">shell:</span> [<span class="string">gradle</span>, <span class="string">-b</span>, <span class="string">build.gradle</span>, <span class="string">--no-daemon</span>, <span class="string">shadowJar</span>]</span><br><span class="line">  <span class="attr">fileSystem:</span></span><br><span class="line">    <span class="attr">ears:</span></span><br><span class="line">      <span class="attr">extensions:</span> [<span class="string">ear</span>]</span><br><span class="line">      <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">directory:</span> <span class="string">$&#123;project.projectDir&#125;</span></span><br><span class="line">    <span class="attr">java:</span></span><br><span class="line">      <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">directory:</span> <span class="string">$&#123;project.projectDir&#125;</span></span><br><span class="line">    <span class="attr">javascript:</span></span><br><span class="line">      <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">directory:</span> <span class="string">client-vscode</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">excludeRegex:</span> <span class="string">node_modules|bower_components|vendor</span></span><br><span class="line">    <span class="attr">python:</span></span><br><span class="line">      <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">directory:</span> <span class="string">$&#123;project.projectDir&#125;</span></span><br><span class="line">    <span class="attr">wars:</span></span><br><span class="line">      <span class="attr">extensions:</span> [<span class="string">war</span>]</span><br><span class="line">      <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">directory:</span> <span class="string">$&#123;project.projectDir&#125;</span></span><br><span class="line"><span class="attr">analyze:</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">central</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="attr">coverity:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">serverUrl:</span> <span class="string">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹3ï¼šä¸€ä¸ª CSharp é¡¹ç›®</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="attr">project:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-ssharp-demo</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">$&#123;scm.git.branch&#125;</span></span><br><span class="line">  <span class="attr">revision:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">$&#123;scm.git.commit&#125;</span></span><br><span class="line">    <span class="attr">date:</span> <span class="string">$&#123;scm.git.commit.date&#125;</span></span><br><span class="line"><span class="attr">capture:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">buildCommands:</span></span><br><span class="line">    <span class="comment"># å¦‚æœæ„å»ºè¿‡ç¨‹å¾ˆå¤æ‚ï¼Œä½ å¯ä»¥å†™ä¸€ä¸ªè„šæœ¬ï¼Œç„¶åè°ƒç”¨å®ƒ</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">shell:</span> [<span class="string">&#x27;script\polaris.bat&#x27;</span>]</span><br><span class="line">    <span class="comment"># è·³è¿‡ä¸€äº›ä½ ä¸æƒ³æ‰«æçš„æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">skipFiles:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;*.java&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;*.text&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;*.js&quot;</span></span><br><span class="line"><span class="attr">analyze:</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">central</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="attr">coverity:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">serverUrl:</span> <span class="string">https://organization.polaris.synopsys.com</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šå…³äºå¦‚ä½•ç¼–å†™ <code>polaris.yml</code> å°±ä¸ä¸€ä¸€ç½—åˆ—äº†ï¼Œè¯¦ç»†è¯·å‚è€ƒ Polaris çš„å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://sig-docs.synopsys.com/polaris/topics/c_conf-overview.html">https://sig-docs.synopsys.com/polaris/topics/c_conf-overview.html</a></p><h3 id="æ‰§è¡Œåˆ†æ"><a href="#æ‰§è¡Œåˆ†æ" class="headerlink" title="æ‰§è¡Œåˆ†æ"></a>æ‰§è¡Œåˆ†æ</h3><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œ Polaris åˆ†æï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">polaris -c polaris.yml analyze -w --coverity-ignore-capture-failure</span><br></pre></td></tr></table></figure><p><code>--coverity-ignore-capture-failure</code> - å¿½ç•¥ Coverity æ•è·å¤±è´¥ã€‚è¿è¡Œ <code>polaris help analyze</code> å¯ä»¥æŸ¥çœ‹æ›´å¤šåˆ†æå‘½ä»¤çš„ä»‹ç»ã€‚</p><h3 id="Polaris-åˆ†æç»“æœ"><a href="#Polaris-åˆ†æç»“æœ" class="headerlink" title="Polaris åˆ†æç»“æœ"></a>Polaris åˆ†æç»“æœ</h3><p>å¦‚æœ Polaris åˆ†ææˆåŠŸï¼Œå°†ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ä¸€æ¡æˆåŠŸä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[INFO] [1zb99xsu] Coverity job completed successfully!</span><br><span class="line"></span><br><span class="line">[INFO] [1zb99xsu] Coverity - analyze phase took 4m 36.526s.</span><br><span class="line">Analysis Completed.</span><br><span class="line">Coverity analysis</span><br><span class="line">&#123;</span><br><span class="line"> <span class="string">&quot;JobId&quot;</span>: <span class="string">&quot;mlkik4esb961p0dtq8i6m7pm14&quot;</span>,</span><br><span class="line"> <span class="string">&quot;Status&quot;</span>: <span class="string">&quot;Success&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">Job issue summary</span><br><span class="line">&#123;</span><br><span class="line"> <span class="string">&quot;IssuesBySeverity&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;Critical&quot;</span>: 0,</span><br><span class="line">  <span class="string">&quot;High&quot;</span>: 250,</span><br><span class="line">  <span class="string">&quot;Medium&quot;</span>: 359,</span><br><span class="line">  <span class="string">&quot;Low&quot;</span>: 81</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="string">&quot;Total&quot;</span>: 690,</span><br><span class="line"> <span class="string">&quot;NewIssues&quot;</span>: 0,</span><br><span class="line"> <span class="string">&quot;ClosedIssues&quot;</span>: 0,</span><br><span class="line"> <span class="string">&quot;SummaryUrl&quot;</span>: <span class="string">&quot;https://organization.polaris.synopsys.com/projects/bb079756-194e-4645-9121-5131493a0c93/branches/d567c376-4d5d-4941-8733-aa27bb2f5f5b&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¾ç¤ºäº†ä¸€å…±å‘ç°äº†å¤šå°‘ 690 ä¸ªæ¼æ´ï¼Œä»¥åŠæ¯ç§ä¸åŒä¸¥é‡ç¨‹åº¦å„å å¤šå°‘ä¸ªã€‚å…·ä½“çš„æ¼æ´ä¿¡æ¯éœ€è¦ç™»å½•åˆ° Polaris SaaS å¹³å°è¿›è¡ŒæŸ¥çœ‹ã€‚</p><p>ç‚¹å‡» <code>SummaryUrl</code> ä¸­çš„é“¾æ¥å°†ä¼šç›´æ¥è·³è½¬åˆ°è¯¥é¡¹ç›®çš„ Polaris æ‰«æç»“æœã€‚</p><p><img src="/2021/10/what-is-polaris/summary.png" alt="Summary"></p><p><img src="/2021/10/what-is-polaris/issues.png" alt="Issues"></p>]]></content>
      
      
      <categories>
          
          <category> Polaris </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Polaris </tag>
            
            <tag> Static </tag>
            
            <tag> Coverity </tag>
            
            <tag> Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git å¸¸ç”¨å‘½ä»¤å¤‡å¿˜å½•</title>
      <link href="/2021/10/git-cheatsheet/"/>
      <url>/2021/10/git-cheatsheet/</url>
      
        <content type="html"><![CDATA[<p>ä¸ç®¡æ˜¯å¯¹äº Git çš„åˆå­¦è€…è¿˜æ˜¯ç»å¸¸ä½¿ç”¨ Git çš„ç å†œä»¬ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­éš¾å…ä¼šæœ‰é‡åˆ°æœ‰çš„å‘½ä»¤ä¸€æ—¶æƒ³ä¸èµ·æ¥ã€‚ä¸å¦¨å°†ä¸‹é¢æ€»ç»“çš„ä¸€äº› Git å¸¸ç”¨å‘½ä»¤åŠæŠ€å·§æ”¶è—æˆ–æ‰“å°å‡ºæ¥ï¼Œä»¥å¤‡éœ€è¦çš„æ—¶å€™å¯ä»¥å¾ˆå¿«æ‰¾åˆ°ã€‚</p><h2 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a><code>git config</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ git é…ç½®</span></span><br><span class="line">git config -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä½ çš„ git æäº¤ username å’Œ email</span></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼šå¯¹äºå…¬å¸é‡Œé¡¹ç›®</span></span><br><span class="line">git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;your_email@organization.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼šå¯¹äºä¸ªäººçš„ GitHub é¡¹ç›®</span></span><br><span class="line">git config user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line">git config user.email <span class="string">&quot;your_emailn@gmail.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ HTTP/HTTPS é¿å…æ¯æ¬¡è¾“å…¥å¯†ç </span></span><br><span class="line">git config --global credential.helper cache</span><br></pre></td></tr></table></figure><h2 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a><code>git init</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–ä¸€ä¸ªä»“åº“</span></span><br><span class="line">git init</span><br></pre></td></tr></table></figure><h2 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a><code>git add</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git add file_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»…å°†æŸäº›æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº, ä¾‹å¦‚:ä»…æ·»åŠ æ‰€æœ‰ä»¥ &#x27;test*&#x27; å¼€å¤´çš„æ–‡ä»¶</span></span><br><span class="line">git add <span class="built_in">test</span>*</span><br></pre></td></tr></table></figure><h2 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a><code>git status</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ä»“åº“çŠ¶æ€</span></span><br><span class="line">git status</span><br></pre></td></tr></table></figure><h2 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a><code>git commit</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æäº¤æ›´æ”¹</span></span><br><span class="line">git commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤å¸¦æœ‰æ¶ˆæ¯çš„æ›´æ”¹</span></span><br><span class="line">git commit -m <span class="string">&quot;This is a commit message&quot;</span></span><br></pre></td></tr></table></figure><h2 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a><code>git log</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æäº¤å†å²</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æäº¤å†å²å’Œæ˜¾ç¤ºç›¸åº”çš„ä¿®æ”¹</span></span><br><span class="line">git <span class="built_in">log</span> -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæäº¤å†å²ç»Ÿè®¡</span></span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºç‰¹å®šçš„æäº¤</span></span><br><span class="line">git show commit_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥å›¾å½¢æ–¹å¼æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æäº¤ä¿¡æ¯</span></span><br><span class="line">git <span class="built_in">log</span> --graph --oneline</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥å›¾å½¢æ–¹å¼æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯çš„æäº¤ä¿¡æ¯</span></span><br><span class="line">git <span class="built_in">log</span> --graph --oneline --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–è¿œç¨‹ä»“åº“çš„å½“å‰æäº¤æ—¥å¿—</span></span><br><span class="line">git <span class="built_in">log</span> origin/master</span><br></pre></td></tr></table></figure><h2 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a><code>git diff</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨ä½¿ç”¨ diff æäº¤ä¹‹å‰æ‰€åšçš„æ›´æ”¹</span></span><br><span class="line">git diff</span><br><span class="line">git diff some_file.js</span><br><span class="line">git diff --staged</span><br></pre></td></tr></table></figure><h2 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a><code>git rm</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤è·Ÿè¸ªæ–‡ä»¶</span></span><br><span class="line">git <span class="built_in">rm</span> file_name</span><br></pre></td></tr></table></figure><h2 id="git-mv"><a href="#git-mv" class="headerlink" title="git mv"></a><code>git mv</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é‡å‘½åæ–‡ä»¶</span></span><br><span class="line">git <span class="built_in">mv</span> old_file_name new_file_name</span><br></pre></td></tr></table></figure><h2 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a><code>git checkout</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">git checkout branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿˜åŸæœªæš‚å­˜çš„æ›´æ”¹</span></span><br><span class="line">git checkout file_name</span><br></pre></td></tr></table></figure><h2 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a><code>git reset</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿˜åŸæš‚å­˜åŒºçš„æ›´æ”¹</span></span><br><span class="line">git reset HEAD file_name</span><br><span class="line">git reset HEAD -p</span><br></pre></td></tr></table></figure><h2 id="git-commit-amend"><a href="#git-commit-amend" class="headerlink" title="git commit --amend"></a><code>git commit --amend</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹æœ€è¿‘çš„æäº¤ä¿¡æ¯</span></span><br><span class="line">git commit --amend</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æœ€è¿‘çš„æäº¤ä¿¡æ¯ä¸ºï¼šNew commit message</span></span><br><span class="line">git commit --amend -m <span class="string">&quot;New commit message&quot;</span></span><br></pre></td></tr></table></figure><h2 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a><code>git revert</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å›æ»šæœ€åä¸€æ¬¡æäº¤</span></span><br><span class="line">git revert HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›æ»šæŒ‡å®šä¸€æ¬¡æäº¤</span></span><br><span class="line">git revert commit_id</span><br></pre></td></tr></table></figure><h2 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a><code>git branch</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåˆ†æ”¯</span></span><br><span class="line">git branch branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºåˆ†æ”¯å¹¶åˆ‡åˆ°è¯¥åˆ†æ”¯</span></span><br><span class="line">git checkout -b branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å½“å‰æ­£åœ¨è·Ÿè¸ªçš„è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git branch -r</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åˆ†æ”¯</span></span><br><span class="line">git branch -d branch_name</span><br></pre></td></tr></table></figure><h2 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a><code>git merge</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°† branch_name åˆå¹¶åˆ°å½“åˆ†æ”¯</span></span><br><span class="line">git merge branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸­æ­¢åˆå¹¶</span></span><br><span class="line">git merge --abort</span><br></pre></td></tr></table></figure><h2 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a><code>git pull</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»è¿œç¨‹ä»“åº“æ‹‰å–æ›´æ”¹</span></span><br><span class="line">git pull</span><br></pre></td></tr></table></figure><h2 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a><code>git fetch</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è·å–è¿œç¨‹ä»“åº“æ›´æ”¹</span></span><br><span class="line">git fetch</span><br></pre></td></tr></table></figure><h2 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a><code>git push</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¨é€æ›´æ”¹åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€ä¸€ä¸ªæ–°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">git push -u origin branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤è¿œç¨‹ä»“åº“åˆ†æ”¯</span></span><br><span class="line">git push --delete origin branch_name</span><br></pre></td></tr></table></figure><h2 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a><code>git remote</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ è¿œç¨‹ä»“åº“</span></span><br><span class="line">git add remote https://repository_name.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è¿œç¨‹ä»“åº“çš„æ›´å¤šä¿¡æ¯</span></span><br><span class="line">git remote show origin</span><br></pre></td></tr></table></figure><h2 id="GitæŠ€å·§å’Œçªé—¨"><a href="#GitæŠ€å·§å’Œçªé—¨" class="headerlink" title="GitæŠ€å·§å’Œçªé—¨"></a>GitæŠ€å·§å’Œçªé—¨</h2><h3 id="æ¸…ç†å·²åˆå¹¶åˆ†æ”¯"><a href="#æ¸…ç†å·²åˆå¹¶åˆ†æ”¯" class="headerlink" title="æ¸…ç†å·²åˆå¹¶åˆ†æ”¯"></a>æ¸…ç†å·²åˆå¹¶åˆ†æ”¯</h3><p>æ¸…ç†å·²ç»åˆå¹¶çš„æœ¬åœ°åˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch --merged master | grep -v <span class="string">&quot;master&quot;</span> | xargs -n 1 git branch -d</span><br></pre></td></tr></table></figure><h3 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a><code>.gitignore</code></h3><p>æŒ‡æ˜ Git åº”è¯¥å¿½ç•¥çš„æ•…æ„ä¸è·Ÿè¸ªçš„æ–‡ä»¶çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>.gitignore</code> å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¿½ç•¥ .vscode ç›®å½•</span></span><br><span class="line">.vscode/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥ build ç›®å½•</span></span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥æ–‡ä»¶</span></span><br><span class="line">output.log</span><br></pre></td></tr></table></figure><h3 id="gitattributes"><a href="#gitattributes" class="headerlink" title=".gitattributes"></a><code>.gitattributes</code></h3><p>å…³äº <code>.gitattributes</code> è¯·å‚è€ƒ</p><ul><li><a href="https://www.git-scm.com/docs/gitattributes">https://www.git-scm.com/docs/gitattributes</a></li><li><a href="https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings">https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Cheatsheet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How does SonarQube Community Edition integrate with the project</title>
      <link href="/2021/09/sonarqube-integration/"/>
      <url>/2021/09/sonarqube-integration/</url>
      
        <content type="html"><![CDATA[<p>After you have set up the SonarQube instance, you will need to integrate SonarQube with project.</p><p>Because I used the community edition version, it doesnâ€™t support the C&#x2F;C++ project, so I only demo how to integrate with Maven, Gradle, and Others.</p><p>For example, the demo project name and ID in SonarQube are both <code>test-demo</code>, and I build with Jenkins.</p><h2 id="Build-with-Maven"><a href="#Build-with-Maven" class="headerlink" title="Build with Maven"></a>Build with Maven</h2><ol><li><p>Add the following to your <code>pom.xml</code> file:</p> <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sonar.projectKey</span>&gt;</span>test-demo<span class="tag">&lt;/<span class="name">sonar.projectKey</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>Add the following code to your <code>Jenkinsfile</code>:</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">stage(&#x27;SonarQube Analysis&#x27;) &#123;</span><br><span class="line">  def mvn = tool &#x27;Default Maven&#x27;;</span><br><span class="line">  withSonarQubeEnv() &#123;</span><br><span class="line">    sh &quot;$&#123;mvn&#125;/bin/mvn sonar:sonar&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="Build-with-Gradle"><a href="#Build-with-Gradle" class="headerlink" title="Build with Gradle"></a>Build with Gradle</h2><ol><li><p>Add the following to your <code>build.gradle</code> file:</p> <figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">  id <span class="string">&quot;org.sonarqube&quot;</span> version <span class="string">&quot;3.3&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sonarqube &#123;</span><br><span class="line">  properties &#123;</span><br><span class="line">    property <span class="string">&quot;sonar.projectKey&quot;</span>, <span class="string">&quot;test-demo&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Add the following code to your <code>Jenkinsfile</code>:</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">stage(&#x27;SonarQube Analysis&#x27;) &#123;</span><br><span class="line">  withSonarQubeEnv() &#123;</span><br><span class="line">    sh &quot;./gradlew sonarqube&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="Build-with-Other-for-JS-TS-Python-â€¦"><a href="#Build-with-Other-for-JS-TS-Python-â€¦" class="headerlink" title="Build with Other(for JS, TS, Python, â€¦)"></a>Build with Other(for JS, TS, Python, â€¦)</h2><ol><li><p>Create a <code>sonar-project.properties</code> file in your repository and paste the following code:</p> <figure class="highlight text"><table><tr><td class="code"><pre><span class="line">sonar.projectKey=test-demo</span><br></pre></td></tr></table></figure></li><li><p>Add the following code to your <code>Jenkinsfile</code>:</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">stage(&#x27;SonarQube Analysis&#x27;) &#123;</span><br><span class="line">  def scannerHome = tool &#x27;SonarScanner&#x27;;</span><br><span class="line">  withSonarQubeEnv() &#123;</span><br><span class="line">    sh &quot;$&#123;scannerHome&#125;/bin/sonar-scanner&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>More about how to integrate with SonarQube, please visit your SonarQube instance documentation: <a href="http://localhost:9000/documentation">http://localhost:9000/documentation</a></p>]]></content>
      
      
      <categories>
          
          <category> SonarQube </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gradle </tag>
            
            <tag> SonarQube </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Run lcov failed &quot;Can&#39;t locate JSON/PP.pm in @INC ...&quot;</title>
      <link href="/2021/09/lcov-error/"/>
      <url>/2021/09/lcov-error/</url>
      
        <content type="html"><![CDATA[<p>When execute command: <code>lcov --capture --directory . --no-external --output-file coverage.info</code> to generate code coverage report, I encountered the following error:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lcov --capture --directory . --no-external --output-file coverage.info</span><br><span class="line">Capturing coverage data from .</span><br><span class="line">Can<span class="string">&#x27;t locate JSON/PP.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /usr/local/bin/geninfo line 63.</span></span><br><span class="line"><span class="string">BEGIN failed--compilation aborted at /usr/local/bin/geninfo line 63.</span></span><br><span class="line"><span class="string">sh-4.2$ perl -MCPAN -e &#x27;</span>install JSON<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Can&#x27;</span>t locate CPAN.pm <span class="keyword">in</span> @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).</span><br><span class="line">BEGIN failed--compilation aborted.</span><br></pre></td></tr></table></figure><h2 id="Canâ€™t-locate-CPAN-pm"><a href="#Canâ€™t-locate-CPAN-pm" class="headerlink" title="Canâ€™t locate CPAN.pm"></a>Canâ€™t locate CPAN.pm</h2><p>fixed this problem â€œCanâ€™t locate CPAN.pmâ€ by running the command <code>yum install perl-CPAN</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ sudo perl -MCPAN -e <span class="string">&#x27;install JSON&#x27;</span></span><br><span class="line">[sudo] password <span class="keyword">for</span> sxp:</span><br><span class="line">Can<span class="string">&#x27;t locate CPAN.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).</span></span><br><span class="line"><span class="string">BEGIN failed--compilation aborted.</span></span><br><span class="line"><span class="string">sh-4.2$ sudo yum install perl-CPAN</span></span><br></pre></td></tr></table></figure><p>Then run <code>sudo perl -MCPAN -e &#39;install JSON&#39;</code> again, it works.</p><h2 id="Canâ€™t-locate-JSON-PP-pm"><a href="#Canâ€™t-locate-JSON-PP-pm" class="headerlink" title="Canâ€™t locate JSON&#x2F;PP.pm"></a>Canâ€™t locate JSON&#x2F;PP.pm</h2><p>fixed this problem by copying backportPP.pm to the PP.pm file.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/local/share/perl5/JSON</span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">backportPP  backportPP.pm</span><br><span class="line">$ <span class="built_in">cp</span> backportPP.pm PP.pm</span><br></pre></td></tr></table></figure><h2 id="Canâ€™t-locate-Module-Load-pm"><a href="#Canâ€™t-locate-Module-Load-pm" class="headerlink" title="Canâ€™t locate Module&#x2F;Load.pm"></a>Canâ€™t locate Module&#x2F;Load.pm</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-4.2$ geninfo --version</span><br><span class="line">Can<span class="string">&#x27;t locate Module/Load.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /usr/local/bin/geninfo line 63.</span></span><br><span class="line"><span class="string">BEGIN failed--compilation aborted at /usr/local/bin/geninfo line 63.</span></span><br><span class="line"><span class="string">bash-4.2$</span></span><br></pre></td></tr></table></figure><p>Install <code>perl-Module-Load-Conditional</code> can resolved.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum install perl-Module-Load-Conditional</span><br></pre></td></tr></table></figure><h2 id="Canâ€™t-locate-Capture-Tiny-pm-in-INC"><a href="#Canâ€™t-locate-Capture-Tiny-pm-in-INC" class="headerlink" title="Canâ€™t locate Capture&#x2F;Tiny.pm in @INC"></a>Canâ€™t locate Capture&#x2F;Tiny.pm in @INC</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ lcov --version</span><br><span class="line">Can<span class="string">&#x27;t locate Capture/Tiny.pm in @INC (@INC contains: /usr/local/bin/../lib /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /usr/local/bin/../lib/lcovutil.pm line 13.</span></span><br><span class="line"><span class="string">BEGIN failed--compilation aborted at /usr/local/bin/../lib/lcovutil.pm line 13.</span></span><br><span class="line"><span class="string">Compilation failed in require at /usr/local/bin/lcov line 104.</span></span><br><span class="line"><span class="string">BEGIN failed--compilation aborted at /usr/local/bin/lcov line 104.</span></span><br></pre></td></tr></table></figure><p>Fixed with following command</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">perl -MCPAN -e <span class="string">&#x27;install Capture::Tiny&#x27;</span></span><br></pre></td></tr></table></figure><p>Then run <code>lcov --version</code> back to work.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ lcov --version</span><br><span class="line">lcov: LCOV version v1.16-16-g038c2ca</span><br></pre></td></tr></table></figure><h2 id="Canâ€™t-locate-DateTime-pm"><a href="#Canâ€™t-locate-DateTime-pm" class="headerlink" title="Canâ€™t locate DateTime.pm"></a>Canâ€™t locate DateTime.pm</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ genhtml --<span class="built_in">help</span></span><br><span class="line">Can<span class="string">&#x27;t locate DateTime.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /usr/local/bin/genhtml line 87.</span></span><br><span class="line"><span class="string">BEGIN failed--compilation aborted at /usr/local/bin/genhtml line 87.</span></span><br></pre></td></tr></table></figure><p>Need to install the perl module DateTime, On Centos7 run</p><p><code>sudo yum install &#39;perl(DateTime)&#39;</code></p><p>But this still doesnâ€™t work for me.</p><h2 id="Run-geninfo-command-failed"><a href="#Run-geninfo-command-failed" class="headerlink" title="Run geninfo command failed"></a>Run <code>geninfo</code> command failed</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Capturing coverage data from .</span><br><span class="line">Compress::Raw::Zlib version 2.201 required--this is only version 2.061 at /usr/local/share/perl5/IO/Uncompress/RawInflate.pm line 8.</span><br><span class="line">BEGIN failed--compilation aborted at /usr/local/share/perl5/IO/Uncompress/RawInflate.pm line 8.</span><br><span class="line">Compilation failed <span class="keyword">in</span> require at /usr/local/share/perl5/IO/Uncompress/Gunzip.pm line 12.</span><br><span class="line">BEGIN failed--compilation aborted at /usr/local/share/perl5/IO/Uncompress/Gunzip.pm line 12.</span><br><span class="line">Compilation failed <span class="keyword">in</span> require at /usr/local/bin/geninfo line 62.</span><br><span class="line">BEGIN failed--compilation aborted at /usr/local/bin/geninfo line 62.</span><br><span class="line">sh-4.2$</span><br></pre></td></tr></table></figure><p>Install package <code>Compress::Raw::Zlib</code> fixed.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">perl -MCPAN -e <span class="string">&#x27;install Compress::Raw::Zlib&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lcov </tag>
            
            <tag> perl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Gcov å’Œ LCOV åš C/C++ é¡¹ç›®çš„ä»£ç è¦†ç›–ç‡</title>
      <link href="/2021/08/gcov-example-cn/"/>
      <url>/2021/08/gcov-example-cn/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡åˆ†äº«å¦‚ä½•ä½¿ç”¨ Gcov å’Œ LCOV å¯¹ C&#x2F;C++ é¡¹ç›®è¿›è¡Œä»£ç è¦†ç›–ç‡çš„åº¦é‡ã€‚</p><p>å¦‚æœä½ æƒ³äº†è§£ä»£ç è¦†ç›–ç‡å·¥å…· Gcov æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ–æ˜¯ä»¥åéœ€è¦åš C&#x2F;C++ é¡¹ç›®çš„ä»£ç è¦†ç›–ç‡ï¼Œå¸Œæœ›æœ¬ç¯‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ä¸çŸ¥é“ä½ æ²¡æœ‰é‡åˆ°è¿‡å’Œæˆ‘ä¸€æ ·çš„é—®é¢˜ï¼šå‡ åå¹´å‰çš„ C&#x2F;C++ é¡¹ç›®æ²¡æœ‰å•å…ƒæµ‹è¯•ï¼Œåªæœ‰å›å½’æµ‹è¯•ï¼Œä½†æ˜¯æƒ³çŸ¥é“å›å½’æµ‹è¯•æµ‹äº†å“ªäº›ä»£ç ï¼Ÿè¿˜æœ‰å“ªäº›ä»£ç æ²¡æµ‹åˆ°ï¼Ÿä»£ç è¦†ç›–ç‡æ˜¯å¤šå°‘ï¼Ÿä»Šåå“ªäº›åœ°æ–¹éœ€è¦æé«˜è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Ÿ</p><p>å¯èƒ½å¯¹äºæ¥è§¦è¿‡ Java çš„ Junit å’Œ JaCoCo çš„äººæ¥è¯´ï¼Œæ²¡æœ‰å•å…ƒæµ‹è¯•åº”è¯¥æµ‹ä¸äº†ä»£ç è¦†ç›–ç‡å§ â€¦ å…¶å®ä¸ç„¶ï¼Œå¦‚æœä¸è¡Œå°±æ²¡æœ‰ä¸‹æ–‡äº† :)</p><h2 id="ç°çŠ¶"><a href="#ç°çŠ¶" class="headerlink" title="ç°çŠ¶"></a>ç°çŠ¶</h2><p>å¸‚åœºä¸Šæœ‰ä¸€äº›å·¥å…·å¯ä»¥é’ˆå¯¹é»‘ç›’æµ‹è¯•æ¥è¡¡é‡ä»£ç è¦†ç›–ç‡ Squish Cocoï¼ŒBullseye ç­‰ï¼Œå®ƒä»¬çš„åŸç†å°±æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™æ’å…¥ instrumentationï¼Œä¸­æ–‡å«æ’æ¡©ï¼Œåœ¨è¿è¡Œæµ‹è¯•çš„æ—¶å€™ç”¨æ¥è·Ÿè¸ªå’Œè®°å½•è¿è¡Œç»“æœã€‚</p><p>å…¶ä¸­æˆ‘æ¯”è¾ƒæ·±å…¥çš„äº†è§£è¿‡ <a href="https://shenxianpeng.github.io/2019/05/squishcoco/">Squish Coco</a> å®ƒå¦‚ä½•ä½¿ç”¨ï¼Œä½†å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¼•å…¥è¿™ç±»å·¥å…·éƒ½æˆ–å¤šæˆ–å°‘çš„éœ€è¦è§£å†³ç¼–è¯‘ä¸Šçš„é—®é¢˜ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºæœ‰ä¸€äº›ç¼–è¯‘é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œå°±ä¸€ç›´æ²¡æœ‰è´­ä¹°è¿™æ¬¾ä»·æ ¼ä¸è²çš„å·¥å…· Licenseã€‚</p><p>å½“æˆ‘å†æ¬¡é‡æ–°è°ƒæŸ¥ä»£ç è¦†ç›–ç‡çš„æ—¶å€™ï¼Œæˆ‘å¾ˆæƒ­æ„§çš„å‘ç°åŸæ¥æ­£åœ¨ä½¿ç”¨çš„ GCC å…¶å®æœ‰å†…ç½®çš„ä»£ç è¦†ç›–ç‡çš„å·¥å…·çš„ï¼Œå« <a href="https://gcc.gnu.org/onlinedocs/gcc/Gcov.html">Gcov</a></p><h2 id="å‰ææ¡ä»¶"><a href="#å‰ææ¡ä»¶" class="headerlink" title="å‰ææ¡ä»¶"></a>å‰ææ¡ä»¶</h2><p>å¯¹äºæƒ³ä½¿ç”¨ Gcov çš„äººï¼Œä¸ºäº†è¯´æ˜å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘å‡†å¤‡äº†ä¸€æ®µç¤ºä¾‹ç¨‹åºï¼Œè¿è¡Œè¿™ä¸ªç¨‹åºä¹‹å‰éœ€è¦å…ˆå®‰è£… <a href="https://gcc.gnu.org/install/index.html">GCC</a> å’Œ <a href="http://ltp.sourceforge.net/coverage/lcov.php">LCOV</a>ã€‚</p><p>å¦‚æœæ²¡æœ‰ç¯å¢ƒæˆ–ä¸æƒ³å®‰è£…ï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹ç¤ºä¾‹ä»“åº“çš„ GitHub ä»“åº“ï¼š<a href="https://github.com/shenxianpeng/gcov-example">https://github.com/shenxianpeng/gcov-example</a></p><p>æ³¨ï¼šä¸»åˆ†æ”¯ <code>master</code> ä¸‹é¢æ”¾çš„æ˜¯æºç ï¼Œåˆ†æ”¯ <code>coverage</code> ä¸‹çš„ <code>out</code> ç›®å½•æ˜¯æœ€ç»ˆçš„ç»“æœæŠ¥å‘Šã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™æ˜¯æˆ‘çš„æµ‹è¯•ç¯å¢ƒä¸Šçš„ GCC å’Œ lcov çš„ç‰ˆæœ¬</span></span><br><span class="line">sh-4.2$ gcc --version</span><br><span class="line">gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-39)</span><br><span class="line">Copyright (C) 2015 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the <span class="built_in">source</span> <span class="keyword">for</span> copying conditions.  There is NO</span><br><span class="line">warranty; not even <span class="keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br><span class="line"></span><br><span class="line">sh-4.2$ lcov -v</span><br><span class="line">lcov: LCOV version 1.14</span><br></pre></td></tr></table></figure><h2 id="Gcov-æ˜¯å¦‚ä½•å·¥ä½œçš„"><a href="#Gcov-æ˜¯å¦‚ä½•å·¥ä½œçš„" class="headerlink" title="Gcov æ˜¯å¦‚ä½•å·¥ä½œçš„"></a>Gcov æ˜¯å¦‚ä½•å·¥ä½œçš„</h2><p>Gcov å·¥ä½œæµç¨‹å›¾</p><p><img src="/2021/08/gcov-example-cn/gcov-flow.jpg" alt="flow"></p><p>ä¸»è¦åˆ†ä¸‰æ­¥ï¼š</p><ol><li>åœ¨ GCC ç¼–è¯‘çš„æ—¶åŠ å…¥ç‰¹æ®Šçš„ç¼–è¯‘é€‰é¡¹ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå’Œ <code>*.gcno</code>ï¼›</li><li>è¿è¡Œï¼ˆæµ‹è¯•ï¼‰ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç”Ÿæˆäº† <code>*.gcda</code> æ•°æ®æ–‡ä»¶ï¼›</li><li>æœ‰äº† <code>*.gcno</code> å’Œ <code>*.gcda</code>ï¼Œé€šè¿‡æºç ç”Ÿæˆ <code>gcov</code> æ–‡ä»¶ï¼Œæœ€åç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Šã€‚</li></ol><p>ä¸‹é¢å°±å¼€å§‹ä»‹ç»å…¶ä¸­æ¯ä¸€æ­¥å…·ä½“æ˜¯æ€ä¹ˆåšçš„ã€‚</p><h3 id="1-ç¼–è¯‘"><a href="#1-ç¼–è¯‘" class="headerlink" title="1. ç¼–è¯‘"></a>1. ç¼–è¯‘</h3><p>ç¬¬ä¸€æ­¥ç¼–è¯‘ï¼Œè¿™é‡Œå·²ç»å°†ç¼–è¯‘ç”¨åˆ°çš„å‚æ•°å’Œæ–‡ä»¶éƒ½å†™åœ¨äº† <code>makefile</code> é‡Œäº†ï¼Œåªè¦æ‰§è¡Œ <code>make</code> å°±å¯ä»¥ç¼–è¯‘äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure><details><summary>ç‚¹å‡»æŸ¥çœ‹ make å‘½ä»¤çš„è¾“å‡º</summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ make</span><br><span class="line">gcc -fPIC -fprofile-arcs -ftest-coverage -c -Wall -Werror main.c</span><br><span class="line">gcc -fPIC -fprofile-arcs -ftest-coverage -c -Wall -Werror foo.c</span><br><span class="line">gcc -fPIC -fprofile-arcs -ftest-coverage -o main main.o foo.o</span><br></pre></td></tr></table></figure></details><p>é€šè¿‡è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç¨‹åºåœ¨ç¼–è¯‘çš„æ—¶å€™æ·»åŠ äº†ä¸¤ä¸ªç¼–è¯‘é€‰é¡¹ <code>-fprofile-arcs</code> and <code>-ftest-coverage</code>ã€‚åœ¨ç¼–è¯‘æˆåŠŸåï¼Œä¸ä»…ç”Ÿæˆäº† <code>main</code> and <code>.o</code> æ–‡ä»¶ï¼ŒåŒæ—¶è¿˜ç”Ÿæˆäº†ä¸¤ä¸ª <code>.gcno</code> æ–‡ä»¶.</p><blockquote><p><code>.gcno</code> è®°å½•æ–‡ä»¶æ˜¯åœ¨åŠ å…¥ GCC ç¼–è¯‘é€‰é¡¹ <code>-ftest-coverage</code> åç”Ÿæˆçš„ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å®ƒåŒ…å«ç”¨äºé‡å»ºåŸºæœ¬å—å›¾å’Œä¸ºå—åˆ†é…æºè¡Œå·çš„ä¿¡æ¯ã€‚</p></blockquote><h3 id="2-è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶"><a href="#2-è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="2. è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶"></a>2. è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶</h3><p>åœ¨ç¼–è¯‘å®Œæˆåï¼Œç”Ÿæˆäº† <code>main</code> è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿è¡Œï¼ˆæµ‹è¯•ï¼‰å®ƒï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./main</span><br></pre></td></tr></table></figure><details><summary>ç‚¹å‡»æŸ¥çœ‹è¿è¡Œ main æ—¶è¾“å‡º</summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ ./main</span><br><span class="line">Start calling foo() ...</span><br><span class="line">when num is equal to 1...</span><br><span class="line">when num is equal to 2...</span><br></pre></td></tr></table></figure></details><p>å½“è¿è¡Œ <code>main</code> åï¼Œæ‰§è¡Œç»“æœè¢«è®°å½•åœ¨äº† <code>.gcda</code> è¿™ä¸ªæ•°æ®æ–‡ä»¶é‡Œï¼ŒæŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°ä¸€å…±æœ‰ç”Ÿæˆäº†ä¸¤ä¸ª <code>.gcda</code> æ–‡ä»¶ï¼Œæ¯ä¸ªæºæ–‡ä»¶éƒ½å¯¹åº”ä¸€ä¸ª  <code>.gcda</code> æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">foo.c  foo.gcda  foo.gcno  foo.h  foo.o  img  main  main.c  main.gcda  main.gcno  main.o  makefile  README.md</span><br></pre></td></tr></table></figure><blockquote><p><code>.gcda</code> è®°å½•æ•°æ®æ–‡ä»¶çš„ç”Ÿæˆæ˜¯å› ä¸ºç¨‹åºåœ¨ç¼–è¯‘çš„æ—¶å€™å¼•å…¥äº† <code>-fprofile-arcs</code> é€‰é¡¹ã€‚å®ƒåŒ…å«å¼§è¿‡æ¸¡è®¡æ•°ã€å€¼åˆ†å¸ƒè®¡æ•°å’Œä¸€äº›æ‘˜è¦ä¿¡æ¯ã€‚</p></blockquote><h3 id="3-ç”ŸæˆæŠ¥å‘Š"><a href="#3-ç”ŸæˆæŠ¥å‘Š" class="headerlink" title="3. ç”ŸæˆæŠ¥å‘Š"></a>3. ç”ŸæˆæŠ¥å‘Š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make report</span><br></pre></td></tr></table></figure><details><summary> ç‚¹å‡»æŸ¥çœ‹ç”ŸæˆæŠ¥å‘Šçš„è¾“å‡º </summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ make report</span><br><span class="line">gcov main.c foo.c</span><br><span class="line">File <span class="string">&#x27;main.c&#x27;</span></span><br><span class="line">Lines executed:100.00% of 5</span><br><span class="line">Creating <span class="string">&#x27;main.c.gcov&#x27;</span></span><br><span class="line"></span><br><span class="line">File <span class="string">&#x27;foo.c&#x27;</span></span><br><span class="line">Lines executed:85.71% of 7</span><br><span class="line">Creating <span class="string">&#x27;foo.c.gcov&#x27;</span></span><br><span class="line"></span><br><span class="line">Lines executed:91.67% of 12</span><br><span class="line">lcov --capture --directory . --output-file coverage.info</span><br><span class="line">Capturing coverage data from .</span><br><span class="line">Found gcov version: 4.8.5</span><br><span class="line">Scanning . <span class="keyword">for</span> .gcda files ...</span><br><span class="line">Found 2 data files <span class="keyword">in</span> .</span><br><span class="line">Processing foo.gcda</span><br><span class="line">geninfo: WARNING: cannot find an entry <span class="keyword">for</span> main.c.gcov <span class="keyword">in</span> .gcno file, skipping file!</span><br><span class="line">Processing main.gcda</span><br><span class="line">Finished .info-file creation</span><br><span class="line">genhtml coverage.info --output-directory out</span><br><span class="line">Reading data file coverage.info</span><br><span class="line">Found 2 entries.</span><br><span class="line">Found common filename prefix <span class="string">&quot;/workspace/coco&quot;</span></span><br><span class="line">Writing .css and .png files.</span><br><span class="line">Generating output.</span><br><span class="line">Processing file gcov-example/main.c</span><br><span class="line">Processing file gcov-example/foo.c</span><br><span class="line">Writing directory view page.</span><br><span class="line">Overall coverage rate:</span><br><span class="line">  lines......: 91.7% (11 of 12 lines)</span><br><span class="line">  <span class="built_in">functions</span>..: 100.0% (2 of 2 <span class="built_in">functions</span>)</span><br></pre></td></tr></table></figure></details><p>æ‰§è¡Œ <code>make report</code> æ¥ç”Ÿæˆ HTML æŠ¥å‘Šï¼Œè¿™æ¡å‘½ä»¤çš„èƒŒåå®é™…ä¸Šä¸»è¦æ‰§è¡Œäº†ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>åœ¨æœ‰äº†ç¼–è¯‘å’Œè¿è¡Œæ—¶å€™ç”Ÿæˆçš„ <code>.gcno</code> å’Œ <code>.gcda</code> æ–‡ä»¶åï¼Œæ‰§è¡Œå‘½ä»¤ <code>gcov main.c foo.c</code> å³å¯ç”Ÿæˆ <code>.gcov</code> ä»£ç è¦†ç›–ç‡æ–‡ä»¶ã€‚</p></li><li><p>æœ‰äº†ä»£ç è¦†ç›–ç‡ <code>.gcov</code> æ–‡ä»¶ï¼Œé€šè¿‡ <a href="http://ltp.sourceforge.net/coverage/lcov.php">LCOV</a> ç”Ÿæˆå¯è§†åŒ–ä»£ç è¦†ç›–ç‡æŠ¥å‘Šã€‚</p></li></ol><p>ç”Ÿæˆ HTML ç»“æœæŠ¥å‘Šçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. ç”Ÿæˆ coverage.info æ•°æ®æ–‡ä»¶</span></span><br><span class="line">lcov --capture --directory . --output-file coverage.info</span><br><span class="line"><span class="comment"># 2. æ ¹æ®è¿™ä¸ªæ•°æ®æ–‡ä»¶ç”ŸæˆæŠ¥å‘Š</span></span><br><span class="line">genhtml coverage.info --output-directory out</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶"><a href="#åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶"></a>åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶</h3><p>ä¸Šä¼ è¿‡ç¨‹ä¸­æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶å¯é€šè¿‡æ‰§è¡Œ <code>make clean</code> å‘½ä»¤æ¥å½»åº•åˆ é™¤æ‰ã€‚</p><details><summary> ç‚¹å‡»æŸ¥çœ‹ make clean å‘½ä»¤çš„è¾“å‡º </summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ make clean</span><br><span class="line"><span class="built_in">rm</span> -rf main *.o *.so *.gcno *.gcda *.gcov coverage.info out</span><br></pre></td></tr></table></figure></details><h2 id="ä»£ç è¦†ç›–ç‡æŠ¥å‘Š"><a href="#ä»£ç è¦†ç›–ç‡æŠ¥å‘Š" class="headerlink" title="ä»£ç è¦†ç›–ç‡æŠ¥å‘Š"></a>ä»£ç è¦†ç›–ç‡æŠ¥å‘Š</h2><p><img src="/2021/08/gcov-example-cn/index.png" alt="index"></p><p>é¦–é¡µä»¥ç›®å½•ç»“æ„æ˜¾ç¤º</p><p><img src="/2021/08/gcov-example-cn/example.png" alt="example"></p><p>è¿›å…¥ç›®å½•åï¼Œæ˜¾ç¤ºè¯¥ç›®å½•ä¸‹çš„æºæ–‡ä»¶</p><p><img src="/2021/08/gcov-example-cn/main.c.png" alt="main.c"></p><p>è“è‰²è¡¨ç¤ºè¿™äº›è¯­å¥è¢«è¦†ç›–</p><p><img src="/2021/08/gcov-example-cn/foo.c.png" alt="foo.c"></p><p>çº¢è‰²è¡¨ç¤ºæ²¡æœ‰è¢«è¦†ç›–çš„è¯­å¥</p><blockquote><p>LCOV æ”¯æŒè¯­å¥ã€å‡½æ•°å’Œåˆ†æ”¯è¦†ç›–åº¦é‡ã€‚</p></blockquote><p>æ—æ³¨ï¼š</p><ul><li>è¿˜æœ‰å¦å¤–ä¸€ä¸ªç”Ÿæˆ HTML æŠ¥å‘Šçš„å·¥å…·å« <a href="https://github.com/gcovr/gcovr">gcovr</a>ï¼Œä½¿ç”¨ Python å¼€å‘çš„ï¼Œå®ƒçš„æŠ¥å‘Šåœ¨æ˜¾ç¤ºæ–¹å¼ä¸Šä¸ LCOV ç•¥æœ‰ä¸åŒã€‚æ¯”å¦‚ LCOV ä»¥ç›®å½•ç»“æ„æ˜¾ç¤ºï¼Œ gcovr ä»¥æ–‡ä»¶è·¯å¾„æ¥æ˜¾ç¤ºï¼Œå‰è€…ä¸ä»£ç ç»“æ„ä¸€ç›´å› æ­¤æˆ‘æ›´å€¾å‘äºä½¿ç”¨å‰è€…ã€‚</li></ul><h2 id="ç›¸å…³é˜…è¯»"><a href="#ç›¸å…³é˜…è¯»" class="headerlink" title="ç›¸å…³é˜…è¯»"></a>ç›¸å…³é˜…è¯»</h2><ul><li>å…³äºä»£ç è¦†ç›–ç‡(About Code Coverage)ï¼š<a href="https://shenxianpeng.github.io/2021/07/code-coverage/">https://shenxianpeng.github.io/2021/07/code-coverage/</a></li><li>åœ¨ Linux å†…æ ¸ä¸­ä½¿ç”¨ Gcov çš„ç¤ºä¾‹ï¼š<a href="https://01.org/linuxgraphics/gfx-docs/drm/dev-tools/gcov.html">https://01.org/linuxgraphics/gfx-docs/drm/dev-tools/gcov.html</a></li><li>å½“æ„å»ºç¯å¢ƒä¸æµ‹è¯•ç¯å¢ƒä¸åŒæ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼š<a href="https://gcc.gnu.org/onlinedocs/gcc/Cross-profiling.html#Cross-profiling">https://gcc.gnu.org/onlinedocs/gcc/Cross-profiling.html#Cross-profiling</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coverage </tag>
            
            <tag> Gcov </tag>
            
            <tag> LCOV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SonarQube installation and troubleshootings</title>
      <link href="/2021/08/sonarqube-setup/"/>
      <url>/2021/08/sonarqube-setup/</url>
      
        <content type="html"><![CDATA[<h2 id="Backgroud"><a href="#Backgroud" class="headerlink" title="Backgroud"></a>Backgroud</h2><p>In my opinion, SonarQube is not a very easy setup DevOps tool to compare with Jenkins, Artifactory. You canâ€™t just run some script under the bin folder to let the server boot up.</p><p>You must have an installed database, configuration LDAP in the config file, etc.</p><p>So Iâ€™d like to document some important steps for myself, like setup LDAP or PostgreSQL when I install SonarQube of v9.0.1. It would be better if it can help others.</p><h2 id="Prerequisite-and-Download"><a href="#Prerequisite-and-Download" class="headerlink" title="Prerequisite and Download"></a>Prerequisite and Download</h2><ol><li><p>Need to be installed JRE&#x2F;JDK 11 on the running machine.</p><p> Here is the prerequisites overview: <a href="https://docs.sonarqube.org/latest/requirements/requirements/">https://docs.sonarqube.org/latest/requirements/requirements/</a></p></li><li><p>Download SonarQube: <a href="https://www.sonarqube.org/downloads/">https://www.sonarqube.org/downloads/</a></p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> sonarqube/</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-9.0.1.46107.zip</span><br><span class="line"></span><br><span class="line">unzip sonarqube-9.0.1.46107.zip</span><br><span class="line"><span class="built_in">cd</span>  sonarqube-9.0.1.46107/bin/linux-x86-64</span><br><span class="line">sh sonar.sh console</span><br></pre></td></tr></table></figure></li></ol><h2 id="Change-Java-version"><a href="#Change-Java-version" class="headerlink" title="Change Java version"></a>Change Java version</h2><p>I installed SonarQube on CentOS 7 machine, the Java version is OpenJDK 1.8.0_242 by default, but the prerequisite shows at least need JDK 11. There is also JDK 11 available on my machine, so I just need to change the Java version.</p><p>I recommend using the <code>alternatives</code> command change Java versionï¼Œrefer as following:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ java -version</span><br><span class="line">openjdk version <span class="string">&quot;1.8.0_242&quot;</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_242-b08)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.242-b08, mixed mode)</span><br><span class="line"></span><br><span class="line">$ alternatives --config java</span><br><span class="line"></span><br><span class="line">There are 3 programs <span class="built_in">which</span> provide <span class="string">&#x27;java&#x27;</span>.</span><br><span class="line"></span><br><span class="line">  Selection    Command</span><br><span class="line">-----------------------------------------------</span><br><span class="line">   1           java-1.7.0-openjdk.x86_64 (/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.251-2.6.21.1.el7.x86_64/jre/bin/java)</span><br><span class="line">*+ 2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.242.b08-1.el7.x86_64/jre/bin/java)</span><br><span class="line">   3           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.12.0.7-0.el7_9.x86_64/bin/java)</span><br><span class="line"></span><br><span class="line">Enter to keep the current selection[+], or <span class="built_in">type</span> selection number: 3</span><br><span class="line">$ java -version</span><br><span class="line">openjdk version <span class="string">&quot;11.0.12&quot;</span> 2021-07-20 LTS</span><br><span class="line">OpenJDK Runtime Environment 18.9 (build 11.0.12+7-LTS)</span><br><span class="line">OpenJDK 64-Bit Server VM 18.9 (build 11.0.12+7-LTS, mixed mode, sharing)</span><br></pre></td></tr></table></figure><h2 id="Install-Database"><a href="#Install-Database" class="headerlink" title="Install Database"></a>Install Database</h2><p>SonarQube needs you to have installed a database. It supports several database engines, like Microsoft SQL Server, Oracle, and PostgreSQL. Since PostgreSQL is open source, light, and easy to install, so I choose PostgreSQL as its database.</p><p>How to download and install PostgreSQL please see this page: <a href="https://www.postgresql.org/download/linux/redhat/">https://www.postgresql.org/download/linux/redhat/</a></p><h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><h3 id="1-How-to-establish-a-connection-with-SonarQube-and-PostgreSQL"><a href="#1-How-to-establish-a-connection-with-SonarQube-and-PostgreSQL" class="headerlink" title="1. How to establish a connection with SonarQube and PostgreSQL"></a>1. How to establish a connection with SonarQube and PostgreSQL</h3><p>Please refer to the <code>sonar.properties</code> file at the end of this post.</p><h3 id="2-How-to-setup-LDAP-for-users-to-log-in"><a href="#2-How-to-setup-LDAP-for-users-to-log-in" class="headerlink" title="2. How to setup LDAP for users to log in"></a>2. How to setup LDAP for users to log in</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sonar.security.realm=LDAP</span><br><span class="line">ldap.url=ldap://den.exmaple-org:389</span><br><span class="line">ldap.bindDn=user@exmaple-org.com</span><br><span class="line">ldap.bindPassword=mypassword</span><br><span class="line">ldap.authentication=simple</span><br><span class="line">ldap.user.baseDn=DC=exmaple-org,DC=com</span><br><span class="line">ldap.user.request=(&amp;(objectClass=user)(sAMAccountName=&#123;login&#125;))</span><br><span class="line">ldap.user.realNameAttribute=cn</span><br><span class="line">ldap.user.emailAttribute=email</span><br></pre></td></tr></table></figure><h3 id="3-How-to-fix-LDAP-login-SonarQube-is-very-slowly"><a href="#3-How-to-fix-LDAP-login-SonarQube-is-very-slowly" class="headerlink" title="3. How to fix LDAP login SonarQube is very slowly"></a>3. How to fix LDAP login SonarQube is very slowly</h3><p>Comment out <code>ldap.followReferrals=false</code> in sonar.properties file would be help.</p><p>Related post: <a href="https://community.sonarsource.com/t/ldap-login-takes-2-minutes-the-first-time/1573/7">https://community.sonarsource.com/t/ldap-login-takes-2-minutes-the-first-time/1573/7</a></p><h2 id="4-How-to-fix-â€˜Could-not-resolve-11-file-paths-in-lcov-infoâ€™"><a href="#4-How-to-fix-â€˜Could-not-resolve-11-file-paths-in-lcov-infoâ€™" class="headerlink" title="4. How to fix â€˜Could not resolve 11 file paths in lcov.infoâ€™"></a>4. How to fix â€˜Could not resolve 11 file paths in lcov.infoâ€™</h2><p>I want to display Javascript code coverage result in SonarQube, so I added <code>sonar.javascript.lcov.reportPaths=coverage/lcov.info</code> to the <code>sonar-project.properties</code></p><p>But when I run <code>sonar-scanner.bat</code> in the command line, the code coverage result can not show in sonar. I noticed the following error from the output:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">INFO: Analysing [C:\workspace\xvm-ide\client\coverage\lcov.info]</span><br><span class="line">WARN: Could not resolve 11 file paths <span class="keyword">in</span> [C:\workspace\xvm-ide\client\coverage\lcov.info]</span><br></pre></td></tr></table></figure><p>There are some posts related to this problem, for example, <a href="https://github.com/kulshekhar/ts-jest/issues/542">https://github.com/kulshekhar/ts-jest/issues/542</a>, but no one works in my case.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># here is an example error path in lcov.info</span></span><br><span class="line">..\src\auto-group\groupView.ts</span><br></pre></td></tr></table></figure><p>Finally, I have to use the <code>sed</code> command to remove <code>..\</code> in front of the paths before running <code>sonar-scanner.bat</code>, then the problem was solved.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/\..\\//g&#x27;</span> lcov.info</span><br></pre></td></tr></table></figure><p>Please comment if you can solve the problem with changing options in the <code>tsconfig.json</code> file.</p><h3 id="4-How-to-output-to-more-logs"><a href="#4-How-to-output-to-more-logs" class="headerlink" title="4. How to output to more logs"></a>4. How to output to more logs</h3><p>To output more logs, change <code>sonar.log.level=INFO</code> to <code>sonar.log.level=DEBUG</code> in below.</p><blockquote><p>Note: all above changes of <code>sonar.properties</code> need to restart the SonarQube instance to take effect.</p></blockquote><h2 id="Final-sonar-properties"><a href="#Final-sonar-properties" class="headerlink" title="Final sonar.properties"></a>Final <code>sonar.properties</code></h2><p>For the <code>sonar.properties</code> file, please see below or <a href="https://gist.github.com/shenxianpeng/a1eec786210b421f8be34e3263f1a002">link</a></p><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># DATABASE</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># IMPORTANT:</span></span><br><span class="line"><span class="comment"># - The embedded H2 database is used by default. It is recommended for tests but not for</span></span><br><span class="line"><span class="comment">#   production use. Supported databases are Oracle, PostgreSQL and Microsoft SQLServer.</span></span><br><span class="line"><span class="comment"># - Changes to database connection URL (sonar.jdbc.url) can affect SonarSource licensed products.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User credentials.</span></span><br><span class="line"><span class="comment"># Permissions to create tables, indices and triggers must be granted to JDBC user.</span></span><br><span class="line"><span class="comment"># The schema must be created first.</span></span><br><span class="line">sonar.jdbc.username=sonarqube</span><br><span class="line">sonar.jdbc.password=mypassword</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#----- PostgreSQL 9.6 or greater</span></span><br><span class="line"><span class="comment"># By default the schema named &quot;public&quot; is used. It can be overridden with the parameter &quot;currentSchema&quot;.</span></span><br><span class="line">sonar.jdbc.url=jdbc:postgresql://localhost/sonarqube</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Binding IP address. For servers with more than one IP address, this property specifies which</span></span><br><span class="line"><span class="comment"># address will be used for listening on the specified ports.</span></span><br><span class="line"><span class="comment"># By default, ports will be used on all IP addresses associated with the server.</span></span><br><span class="line">sonar.web.host=10.118.245.19</span><br><span class="line"></span><br><span class="line"><span class="comment"># Web context. When set, it must start with forward slash (for example /sonarqube).</span></span><br><span class="line"><span class="comment"># The default value is root context (empty value).</span></span><br><span class="line">sonar.web.context=</span><br><span class="line"><span class="comment"># TCP port for incoming HTTP connections. Default value is 9000.</span></span><br><span class="line">sonar.web.port=9000</span><br><span class="line"></span><br><span class="line"><span class="comment"># LDAP CONFIGURATION</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Follow or not referrals. See http://docs.oracle.com/javase/jndi/tutorial/ldap/referral/jndi.html (default: true)</span></span><br><span class="line">ldap.followReferrals=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable the LDAP feature</span></span><br><span class="line">sonar.security.realm=LDAP</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set to true when connecting to a LDAP server using a case-insensitive setup.</span></span><br><span class="line"><span class="comment"># sonar.authenticator.downcase=true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL of the LDAP server. Note that if you are using ldaps, then you should install the server certificate into the Java truststore.</span></span><br><span class="line">ldap.url=ldap://den.exmaple-org:389</span><br><span class="line"></span><br><span class="line"><span class="comment"># Bind DN is the username of an LDAP user to connect (or bind) with. Leave this blank for anonymous access to the LDAP directory (optional)</span></span><br><span class="line">ldap.bindDn=user@exmaple-org.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># Bind Password is the password of the user to connect with. Leave this blank for anonymous access to the LDAP directory (optional)</span></span><br><span class="line">ldap.bindPassword=mypassword</span><br><span class="line"></span><br><span class="line"><span class="comment"># Possible values: simple | CRAM-MD5 | DIGEST-MD5 | GSSAPI See http://java.sun.com/products/jndi/tutorial/ldap/security/auth.html (default: simple)</span></span><br><span class="line">ldap.authentication=simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># USER MAPPING</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Distinguished Name (DN) of the root node in LDAP from which to search for users (mandatory)</span></span><br><span class="line">ldap.user.baseDn=DC=exmaple-org,DC=com</span><br><span class="line"></span><br><span class="line"><span class="comment"># LDAP user request. (default: (&amp;(objectClass=inetOrgPerson)(uid=&#123;login&#125;)) )</span></span><br><span class="line">ldap.user.request=(&amp;(objectClass=user)(sAMAccountName=&#123;login&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Attribute in LDAP defining the userâ€™s real name. (default: cn)</span></span><br><span class="line">ldap.user.realNameAttribute=cn</span><br><span class="line"></span><br><span class="line"><span class="comment"># Attribute in LDAP defining the userâ€™s email. (default: mail)</span></span><br><span class="line">ldap.user.emailAttribute=email</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sonar.search.javaAdditionalOpts=-Dbootstrap.system_call_filter=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Global level of logs (applies to all 4 processes).</span></span><br><span class="line"><span class="comment"># Supported values are INFO (default), DEBUG and TRACE</span></span><br><span class="line">sonar.log.level=INFO</span><br><span class="line"></span><br><span class="line"><span class="comment"># Paths to persistent data files (embedded database and search index) and temporary files.</span></span><br><span class="line"><span class="comment"># Can be absolute or relative to installation directory.</span></span><br><span class="line"><span class="comment"># Defaults are respectively &lt;installation home&gt;/data and &lt;installation home&gt;/temp</span></span><br><span class="line">sonar.path.data=/var/sonarqube/data</span><br><span class="line">sonar.path.temp=/var/sonarqube/temp</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SonarQube </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SonarQube </tag>
            
            <tag> LDAP </tag>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to fix &quot;hidden symbol `__gcov_init&#39; in ../libgcov.a(_gcov.o) is referenced by DSO&quot;</title>
      <link href="/2021/07/how-to-fix-gcov-hidden-symbol/"/>
      <url>/2021/07/how-to-fix-gcov-hidden-symbol/</url>
      
        <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>When we introduced Gocv to build my project for code coverage, I encountered the following error message:</p><h3 id="error-1"><a href="#error-1" class="headerlink" title="error 1"></a>error 1</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">g++     -m64 -z muldefs -L/lib64 -L/usr/lib64 -lglib-2.0 -m64 -DUV_64PORT -DU2_64_BUILD -fPIC -g  DU_starter.o</span><br><span class="line">NFA_msghandle.o NFA_svr_exit.o du_err_printf.o  -L/workspace/code/myproject/src/home/x64debug/bin/</span><br><span class="line">-L/workspace/code/myproject/src/home/x64debug/bin/lib/ -lundata -lutcallc_nfasvr</span><br><span class="line">-Wl,-rpath=/workspace/code/myproject/src/home/x64debug/bin/ -Wl,-rpath=/.dulibs28  -Wl,--enable-new-dtags</span><br><span class="line">-L/.dulibs28 -lodbc  -lm -lncurses -lrt -lcrypt -lgdbm -ldl -lpam -lpthread  -ldl -lglib-2.0</span><br><span class="line">-lstdc++ -lnsl -lrt -lgcov -o /workspace/code/myproject/src/home/x64debug/objs/du/share/dutsvr</span><br><span class="line">/usr/bin/ld: /workspace/code/myproject/src/home/x64debug/objs/du/share/dutsvr:</span><br><span class="line">hidden symbol `__gcov_init<span class="string">&#x27; in /usr/lib/gcc/x86_64-redhat-linux/4.8.5/libgcov.a(_gcov.o) is referenced by DSO</span></span><br></pre></td></tr></table></figure><h3 id="error-2"><a href="#error-2" class="headerlink" title="error 2"></a>error 2</h3><p>It may also be such an error</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/home/p7539c/cutest/CuTest.c:379: undefined reference to `__gcov_init<span class="string">&#x27;</span></span><br><span class="line"><span class="string">CuTest.o:(.data+0x184): undefined reference to `__gcov_merge_add&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="Positioning-problem"><a href="#Positioning-problem" class="headerlink" title="Positioning problem"></a>Positioning problem</h2><p>Letâ€™s take the <strong>error 1</strong>.</p><p>From the error message, I noticed <code>-lundata -lutcallc_nfasvr</code> are all the linked libraries (-l<em>library</em>)</p><p>I checked libraries <code>undata</code> and <code>utcallc_nfasvr</code> one by one, and found it displayed <code>U __gcov_init</code> and <code>U</code> means undefined symbols.</p><blockquote><p>Use the <code>find</code> command to search the library and the <code>nm</code> command to list symbols in the library.</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-sh-4.2$ find -name *utcallc_nfasvr*</span><br><span class="line">./bin/libutcallc_nfasvr.so</span><br><span class="line">./objs/du/work/libutcallc_nfasvr.so</span><br><span class="line">-sh-4.2$ nm ./bin/libutcallc_nfasvr.so | grep __gcov_init</span><br><span class="line">                 U __gcov_init</span><br></pre></td></tr></table></figure><h2 id="How-to-fix"><a href="#How-to-fix" class="headerlink" title="How to fix"></a>How to fix</h2><p>In my case, I just added the following code <code>LIB_1_LIBS := -lgcov</code> to allow the <code>utcallc_nfasvr</code> library to call gcov.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">LIB_1 := utcallc_nfasvr</span><br><span class="line"><span class="comment"># added below code to my makefile</span></span><br><span class="line">LIB_1_LIBS := -lgcov</span><br></pre></td></tr></table></figure><p>Rebuild, the error is gone, then checked library, it displayed <code>t __gcov_init</code> this time, it means symbol value exists not hidden.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-sh-4.2$ nm ./bin/libutcallc_nfasvr.so | grep __gcov_init</span><br><span class="line">                 t __gcov_init</span><br></pre></td></tr></table></figure><p>Or in your case may build a shared library like so, similarly, just add the compile parameter <code>-lgcov</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">g++   -shared -o libMyLib.so src_a.o src_b.o src_c.o -lgcov</span><br></pre></td></tr></table></figure><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>I have encountered the following problems many times</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">undefined reference to `__gcov_init<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">undefined reference to `__gcov_merge_add&#x27;</span></span><br><span class="line"></span><br><span class="line">`hidden symbol `__gcov_init<span class="string">&#x27; in /usr/lib/gcc/x86_64-redhat-linux/4.8.5/libgcov.a(_gcov.o) is referenced by DSO`</span></span><br></pre></td></tr></table></figure><p>Each time I can fix it by adding <code>-glcov</code> then recompile. the error has gone after rebuild. (you use the <code>nm</code> command to double-check whether the symbol has been added successfully.)</p><p>Hopes it can help you.</p>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Coverage </tag>
            
            <tag> Gcov </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Add or update Bitbucket build status with REST API</title>
      <link href="/2021/07/update-bitbucket-build-status/"/>
      <url>/2021/07/update-bitbucket-build-status/</url>
      
        <content type="html"><![CDATA[<h2 id="Backgorud"><a href="#Backgorud" class="headerlink" title="Backgorud"></a>Backgorud</h2><ol><li><p>When you want to <strong>add</strong> build status to your Bitbucket the specific commit of a branch when you start a build from the branch</p></li><li><p>When the build status is wrong, you want to <strong>update</strong> it manually. for example, update build status from FAILED to SUCCESSFUL</p></li></ol><p>You can call Bitbucket REST API to do these.</p><h2 id="Code-snippet"><a href="#Code-snippet" class="headerlink" title="Code snippet"></a>Code snippet</h2><p>Below is the code snippet to update Bitbucket build status with REST API in the shell script.</p><p>The code on GitHub Gist: <a href="https://gist.github.com/shenxianpeng/bd5eddc5fb39e54110afb8e2e7a6c4fb">https://gist.github.com/shenxianpeng/bd5eddc5fb39e54110afb8e2e7a6c4fb</a></p><p>Click <strong>Read More</strong> to view the code here.</p><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">username=your-bitbucket-user</span><br><span class="line">password=your-bitbucket-password</span><br><span class="line"></span><br><span class="line">commit_id=<span class="string">&#x27;57587d7d4892bc4ef2c4375028c19b27921e2485&#x27;</span></span><br><span class="line"><span class="comment"># build_result has 3 status: SUCCESSFUL, FAILED, INPROGRESS</span></span><br><span class="line">build_result=<span class="string">&#x27;SUCCESSFUL&#x27;</span></span><br><span class="line">description=<span class="string">&#x27;Manully update bitbucket status&#x27;</span></span><br><span class="line"></span><br><span class="line">build_name=<span class="string">&#x27;test #1&#x27;</span></span><br><span class="line">build_url=http://localhost:8080/job/test/</span><br><span class="line"></span><br><span class="line">bitbucket_rest_api=<span class="string">&#x27;https://myorg.bitbucket.com/rest/build-status/latest/commits&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">gen_post_data</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  &quot;state&quot;: &quot;$build_result&quot;,</span></span><br><span class="line"><span class="string">  &quot;key&quot;: &quot;$commit_id&quot;,</span></span><br><span class="line"><span class="string">  &quot;name&quot;: &quot;$build_name&quot;,</span></span><br><span class="line"><span class="string">  &quot;url&quot;: &quot;$build_url&quot;,</span></span><br><span class="line"><span class="string">  &quot;description&quot;: &quot;$description&quot;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(gen_post_data)</span>&quot;</span></span><br><span class="line"></span><br><span class="line">curl -u <span class="variable">$username</span>:<span class="variable">$password</span> \</span><br><span class="line">-H <span class="string">&quot;Accept: application/json&quot;</span> \</span><br><span class="line">-H <span class="string">&quot;Content-Type:application/json&quot;</span> \</span><br><span class="line">-X POST <span class="variable">$bitbucket_rest_api</span>/<span class="variable">$commit_id</span> --data <span class="string">&quot;<span class="subst">$(gen_post_data)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$0</span>: Update bitbucket build status failed.&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$0</span>: Update bitbucket build status success.&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>And the screenshot of the final update result</p><p><img src="/2021/07/update-bitbucket-build-status/build-status.png" alt="Bitbucket build status"></p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shell </tag>
            
            <tag> Bitbucket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºä»£ç è¦†ç›–ç‡ (About Code Coverage)</title>
      <link href="/2021/07/code-coverage/"/>
      <url>/2021/07/code-coverage/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ç®€è¦ä»‹ç»ï¼šä»€ä¹ˆæ˜¯ä»£ç è¦†ç›–ç‡ï¼Ÿä¸ºä»€ä¹ˆè¦åšä»£ç è¦†ç›–ç‡ï¼Ÿä»£ç è¦†ç›–ç‡çš„æŒ‡æ ‡ã€å·¥ä½œåŸç†ï¼Œä¸»æµçš„ä»£ç è¦†ç›–ç‡å·¥å…·ä»¥åŠä¸è¦é«˜ä¼°ä»£ç è¦†ç›–ç‡æŒ‡æ ‡ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯ä»£ç è¦†ç›–ç‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä»£ç è¦†ç›–ç‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä»£ç è¦†ç›–ç‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä»£ç è¦†ç›–ç‡ï¼Ÿ</h2><p>ä»£ç è¦†ç›–ç‡æ˜¯å¯¹æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­è¢«æ‰§è¡Œçš„ä»£ç çš„è¡¡é‡ï¼Œå®ƒèƒ½æµ‹é‡æºä»£ç ä¸­çš„å“ªäº›è¯­å¥åœ¨æµ‹è¯•ä¸­è¢«æ‰§è¡Œï¼Œå“ªäº›è¯­å¥å°šæœªè¢«æ‰§è¡Œã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦æµ‹é‡ä»£ç è¦†ç›–ç‡ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æµ‹é‡ä»£ç è¦†ç›–ç‡ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æµ‹é‡ä»£ç è¦†ç›–ç‡ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦æµ‹é‡ä»£ç è¦†ç›–ç‡ï¼Ÿ</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæµ‹è¯•å¯ä»¥æé«˜è½¯ä»¶ç‰ˆæœ¬çš„è´¨é‡å’Œå¯é¢„æµ‹æ€§ã€‚ä½†æ˜¯ï¼Œä½ çŸ¥é“ä½ çš„å•å…ƒæµ‹è¯•ç”šè‡³æ˜¯ä½ çš„åŠŸèƒ½æµ‹è¯•å®é™…æµ‹è¯•ä»£ç çš„æ•ˆæœå¦‚ä½•å—ï¼Ÿæ˜¯å¦è¿˜éœ€è¦æ›´å¤šçš„æµ‹è¯•ï¼Ÿ</p><p>è¿™äº›æ˜¯ä»£ç è¦†ç›–ç‡å¯ä»¥è¯•å›¾å›ç­”çš„é—®é¢˜ã€‚æ€»ä¹‹ï¼Œå‡ºäºä»¥ä¸‹åŸå› æˆ‘ä»¬éœ€è¦æµ‹é‡ä»£ç è¦†ç›–ç‡ï¼š</p><ul><li>äº†è§£æˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹å¯¹æºä»£ç çš„æµ‹è¯•æ•ˆæœ</li><li>äº†è§£æˆ‘ä»¬æ˜¯å¦è¿›è¡Œäº†è¶³å¤Ÿçš„æµ‹è¯•</li><li>åœ¨è½¯ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒæµ‹è¯•è´¨é‡</li></ul><p>æ³¨ï¼šä»£ç è¦†ç›–ç‡ä¸æ˜¯çµä¸¹å¦™è¯ï¼Œè¦†ç›–ç‡æµ‹é‡ä¸èƒ½æ›¿ä»£è‰¯å¥½çš„ä»£ç å®¡æŸ¥å’Œä¼˜ç§€çš„ç¼–ç¨‹å®è·µã€‚</p><p>é€šå¸¸ï¼Œæˆ‘ä»¬åº”è¯¥é‡‡ç”¨åˆç†çš„è¦†ç›–ç›®æ ‡ï¼ŒåŠ›æ±‚åœ¨ä»£ç è¦†ç›–ç‡åœ¨æ‰€æœ‰æ¨¡å—ä¸­å®ç°å‡åŒ€è¦†ç›–ï¼Œè€Œä¸æ˜¯åªçœ‹æœ€ç»ˆæ•°å­—çš„æ˜¯å¦é«˜åˆ°ä»¤äººæ»¡æ„ã€‚</p><p>ä¸¾ä¾‹ï¼šå‡è®¾ä»£ç è¦†ç›–ç‡åªåœ¨æŸä¸€äº›æ¨¡å—ä»£ç è¦†ç›–ç‡å¾ˆé«˜ï¼Œä½†åœ¨ä¸€äº›å…³é”®æ¨¡å—å¹¶æ²¡æœ‰è¶³å¤Ÿçš„æµ‹è¯•ç”¨ä¾‹è¦†ç›–ï¼Œé‚£æ ·è™½ç„¶ä»£ç è¦†ç›–ç‡å¾ˆé«˜ï¼Œä½†å¹¶ä¸èƒ½è¯´æ˜äº§å“è´¨é‡å°±å¾ˆé«˜ã€‚</p><h2 id="ä»£ç è¦†ç›–ç‡çš„æŒ‡æ ‡ç§ç±»"><a href="#ä»£ç è¦†ç›–ç‡çš„æŒ‡æ ‡ç§ç±»" class="headerlink" title="ä»£ç è¦†ç›–ç‡çš„æŒ‡æ ‡ç§ç±»"></a>ä»£ç è¦†ç›–ç‡çš„æŒ‡æ ‡ç§ç±»</h2><p>ä»£ç è¦†ç›–ç‡å·¥å…·é€šå¸¸ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡å‡†æ¥ç¡®å®šä½ çš„ä»£ç åœ¨è¢«è‡ªåŠ¨åŒ–æµ‹è¯•åæ˜¯å¦å¾—åˆ°äº†æ‰§è¡Œï¼Œå¸¸è§çš„è¦†ç›–ç‡æŠ¥å‘Šä¸­çœ‹åˆ°çš„æŒ‡æ ‡åŒ…æ‹¬ï¼š</p><ul><li>å‡½æ•°è¦†ç›–ç‡ï¼šå®šä¹‰çš„å‡½æ•°ä¸­æœ‰å¤šå°‘è¢«è°ƒç”¨</li><li>è¯­å¥è¦†ç›–ç‡ï¼šç¨‹åºä¸­çš„è¯­å¥æœ‰å¤šå°‘è¢«æ‰§è¡Œ</li><li>åˆ†æ”¯è¦†ç›–ç‡ï¼šæœ‰å¤šå°‘æ§åˆ¶ç»“æ„çš„åˆ†æ”¯ï¼ˆä¾‹å¦‚ifè¯­å¥ï¼‰è¢«æ‰§è¡Œ</li><li>æ¡ä»¶è¦†ç›–ç‡ï¼šæœ‰å¤šå°‘å¸ƒå°”å­è¡¨è¾¾å¼è¢«æµ‹è¯•ä¸ºçœŸå€¼å’Œå‡å€¼</li><li>è¡Œè¦†ç›–ç‡ï¼šæœ‰å¤šå°‘è¡Œçš„æºä»£ç è¢«æµ‹è¯•è¿‡</li></ul><h2 id="ä»£ç è¦†ç›–ç‡æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#ä»£ç è¦†ç›–ç‡æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="ä»£ç è¦†ç›–ç‡æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>ä»£ç è¦†ç›–ç‡æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p>ä»£ç è¦†ç›–ç‡æµ‹é‡ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><h3 id="1-Source-code-instrumentation-æºä»£ç æ£€æµ‹"><a href="#1-Source-code-instrumentation-æºä»£ç æ£€æµ‹" class="headerlink" title="1. Source code instrumentation - æºä»£ç æ£€æµ‹"></a>1. Source code instrumentation - æºä»£ç æ£€æµ‹</h3><p>å°†æ£€æµ‹è¯­å¥æ·»åŠ åˆ°æºä»£ç ä¸­ï¼Œå¹¶ä½¿ç”¨æ­£å¸¸çš„ç¼–è¯‘å·¥å…·é“¾ç¼–è¯‘ä»£ç ä»¥ç”Ÿæˆæ£€æµ‹çš„ç¨‹åºé›†ã€‚è¿™æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ’æ¡©ï¼ŒGcov æ˜¯å±äºè¿™ä¸€ç±»çš„ä»£ç è¦†ç›–ç‡å·¥å…·ã€‚</p><h3 id="2-Runtime-instrumentation-è¿è¡Œæ—¶æ”¶é›†"><a href="#2-Runtime-instrumentation-è¿è¡Œæ—¶æ”¶é›†" class="headerlink" title="2. Runtime instrumentation - è¿è¡Œæ—¶æ”¶é›†"></a>2. Runtime instrumentation - è¿è¡Œæ—¶æ”¶é›†</h3><p>è¿™ç§æ–¹æ³•åœ¨ä»£ç æ‰§è¡Œæ—¶ä»è¿è¡Œæ—¶ç¯å¢ƒæ”¶é›†ä¿¡æ¯ä»¥ç¡®å®šè¦†ç›–ç‡ä¿¡æ¯ã€‚ä»¥æˆ‘çš„ç†è§£ JaCoCo å’Œ Coverage è¿™ä¸¤ä¸ªå·¥å…·çš„åŸç†å±äºè¿™ä¸€ç±»åˆ«ã€‚</p><h3 id="3-Intermediate-code-instrumentation-ä¸­é—´ä»£ç æ£€æµ‹"><a href="#3-Intermediate-code-instrumentation-ä¸­é—´ä»£ç æ£€æµ‹" class="headerlink" title="3. Intermediate code instrumentation - ä¸­é—´ä»£ç æ£€æµ‹"></a>3. Intermediate code instrumentation - ä¸­é—´ä»£ç æ£€æµ‹</h3><p>é€šè¿‡æ·»åŠ æ–°çš„å­—èŠ‚ç æ¥æ£€æµ‹ç¼–è¯‘åçš„ç±»æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„æ£€æµ‹ç±»ã€‚è¯´å®è¯ï¼Œæˆ‘ Google äº†å¾ˆå¤šæ–‡ç« å¹¶æ‰¾åˆ°ç¡®å®šçš„è¯´æ˜å“ªä¸ªå·¥å…·æ˜¯å±äºè¿™ä¸€ç±»çš„ã€‚</p><p>äº†è§£è¿™äº›å·¥å…·çš„åŸºæœ¬åŸç†ï¼Œç»“åˆç°æœ‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæœ‰åŠ©äºæ­£ç¡®çš„é€‰æ‹©ä»£ç è¦†ç›–ç‡å·¥å…·ã€‚æ¯”å¦‚ï¼š</p><ul><li>äº§å“çš„æºä»£ç åªæœ‰ E2Eï¼ˆç«¯åˆ°ç«¯ï¼‰æµ‹è¯•ç”¨ä¾‹ï¼Œé€šå¸¸åªèƒ½é€‰æ‹©ç¬¬ä¸€ç±»å·¥å…·ï¼Œå³é€šè¿‡æ’æ¡©ç¼–è¯‘å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åè¿›è¡Œæµ‹è¯•å’Œç»“æœæ”¶é›†ã€‚</li><li>äº§å“çš„æºä»£ç æœ‰å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œé€šå¸¸é€‰æ‹©ç¬¬äºŒç±»å·¥å…·ï¼Œå³è¿è¡Œæ—¶æ”¶é›†ã€‚è¿™ç±»å·¥å…·çš„æ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ˜“äºåšæŒç»­é›†æˆã€‚</li></ul><h2 id="å½“å‰ä¸»æµä»£ç è¦†ç›–ç‡å·¥å…·"><a href="#å½“å‰ä¸»æµä»£ç è¦†ç›–ç‡å·¥å…·" class="headerlink" title="å½“å‰ä¸»æµä»£ç è¦†ç›–ç‡å·¥å…·"></a>å½“å‰ä¸»æµä»£ç è¦†ç›–ç‡å·¥å…·</h2><p>ä»£ç è¦†ç›–ç‡çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œä»¥ä¸‹æ˜¯æˆ‘ç”¨è¿‡çš„ä¸åŒç¼–ç¨‹è¯­è¨€çš„ä»£ç è¦†ç›–ç‡å·¥å…·ã€‚åœ¨é€‰æ‹©å·¥å…·æ—¶ï¼ŒåŠ›æ±‚å»é€‰æ‹©é‚£äº›å¼€æºã€æµè¡Œï¼ˆæ´»è·ƒï¼‰ã€å¥½ç”¨çš„å·¥å…·ã€‚</p><table><thead><tr><th>ç¼–ç¨‹è¯­è¨€</th><th>ä»£ç è¦†ç›–ç‡å·¥å…·</th></tr></thead><tbody><tr><td>C&#x2F;C++</td><td>Gcov</td></tr><tr><td>Java</td><td>JaCoCo</td></tr><tr><td>JavaScript</td><td>Istanbul</td></tr><tr><td>Python</td><td>Coverage.py</td></tr><tr><td>Golang</td><td>cover</td></tr></tbody></table><h2 id="ä¸è¦é«˜ä¼°ä»£ç è¦†ç›–ç‡æŒ‡æ ‡"><a href="#ä¸è¦é«˜ä¼°ä»£ç è¦†ç›–ç‡æŒ‡æ ‡" class="headerlink" title="ä¸è¦é«˜ä¼°ä»£ç è¦†ç›–ç‡æŒ‡æ ‡"></a>ä¸è¦é«˜ä¼°ä»£ç è¦†ç›–ç‡æŒ‡æ ‡</h2><p>ä»£ç è¦†ç›–ç‡ä¸æ˜¯çµä¸¹å¦™è¯ï¼Œå®ƒåªæ˜¯å‘Šè¯‰æˆ‘ä»¬æœ‰å“ªäº›ä»£ç æ²¡æœ‰è¢«æµ‹è¯•ç”¨ä¾‹â€œæ‰§è¡Œåˆ°â€è€Œå·²ï¼Œé«˜ç™¾åˆ†æ¯”çš„ä»£ç è¦†ç›–ç‡ä¸ç­‰äºé«˜è´¨é‡çš„æœ‰æ•ˆæµ‹è¯•ã€‚</p><p>é¦–å…ˆï¼Œé«˜ä»£ç è¦†ç›–ç‡ä¸è¶³ä»¥è¡¡é‡æœ‰æ•ˆæµ‹è¯•ã€‚ç›¸åï¼Œä»£ç è¦†ç›–ç‡æ›´å‡†ç¡®åœ°ç»™å‡ºäº†ä»£ç æœªè¢«æµ‹è¯•ç¨‹åº¦çš„åº¦é‡ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬çš„ä»£ç è¦†ç›–ç‡æŒ‡æ ‡è¾ƒä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç¡®å®šä»£ç çš„é‡è¦éƒ¨åˆ†æ²¡æœ‰ç»è¿‡æµ‹è¯•ï¼Œç„¶è€Œåè¿‡æ¥ä¸ä¸€å®šæ­£ç¡®ã€‚å…·æœ‰é«˜ä»£ç è¦†ç›–ç‡å¹¶ä¸èƒ½å……åˆ†è¡¨æ˜æˆ‘ä»¬çš„ä»£ç å·²ç»è¿‡å……åˆ†æµ‹è¯•ã€‚</p><p>å…¶æ¬¡ï¼Œ<code>100%</code> çš„ä»£ç è¦†ç›–ç‡ä¸åº”è¯¥æ˜¯æˆ‘ä»¬æ˜ç¡®åŠªåŠ›çš„ç›®æ ‡ä¹‹ä¸€ã€‚è¿™æ˜¯å› ä¸ºåœ¨å®ç° <code>100%</code> çš„ä»£ç è¦†ç›–ç‡ä¸å®é™…æµ‹è¯•é‡è¦çš„ä»£ç ä¹‹é—´æ€»æ˜¯éœ€è¦æƒè¡¡ã€‚è™½ç„¶å¯ä»¥æµ‹è¯•æ‰€æœ‰ä»£ç ï¼Œä½†è€ƒè™‘åˆ°ä¸ºäº†æ»¡è¶³è¦†ç›–ç‡è¦æ±‚è€Œç¼–å†™æ›´å¤šæ— æ„ä¹‰æµ‹è¯•çš„è¶‹åŠ¿ï¼Œå½“ä½ æ¥è¿‘æ­¤é™åˆ¶æ—¶ï¼Œæµ‹è¯•çš„ä»·å€¼ä¹Ÿå¾ˆå¯èƒ½ä¼šå‡å°‘ã€‚</p><p>å€Ÿ Martin Fowler åœ¨è¿™ç¯‡<a href="https://www.martinfowler.com/bliki/TestCoverage.html">æµ‹è¯•è¦†ç›–ç‡</a>çš„æ–‡ç« è¯´çš„ä¸€å¥è¯ï¼š</p><blockquote><p>ä»£ç è¦†ç›–ç‡æ˜¯æŸ¥æ‰¾ä»£ç åº“ä¸­æœªæµ‹è¯•éƒ¨åˆ†çš„æœ‰ç”¨å·¥å…·ï¼Œç„¶è€Œå®ƒä½œä¸ºä¸€ä¸ªæ•°å­—è¯´æ˜ä½ çš„æµ‹è¯•æœ‰å¤šå¥½ç”¨å¤„ä¸å¤§ã€‚</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote><p><a href="https://www.lambdatest.com/blog/code-coverage-vs-test-coverage/">https://www.lambdatest.com/blog/code-coverage-vs-test-coverage/</a><br><a href="https://www.atlassian.com/continuous-delivery/software-testing/code-coverage">https://www.atlassian.com/continuous-delivery/software-testing/code-coverage</a><br><a href="https://www.thoughtworks.com/insights/blog/are-test-coverage-metrics-overrated">https://www.thoughtworks.com/insights/blog/are-test-coverage-metrics-overrated</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Coverage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Code coverage testing of C/C++ projects using Gcov and LCOV</title>
      <link href="/2021/07/gcov-example/"/>
      <url>/2021/07/gcov-example/</url>
      
        <content type="html"><![CDATA[<p>This article shares how to use Gcov and LCOV to metrics code coverage for C&#x2F;C++ projects.<br>If you want to know how Gcov works, or you need to metrics code coverage for C&#x2F;C++ projects later,<br>I hope this article is useful to you.</p><h2 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h2><p>The problem Iâ€™m having: A C&#x2F;C++ project from decades ago has no unit tests, only regression tests,<br>but you want to know what code is tested by regression tests? Which code is untested?<br>What is the code coverage? Where do I need to improve automated test cases in the future?</p><p>Can code coverage be measured without unit tests? Yes.</p><h2 id="Code-coverage-tools-for-C-C"><a href="#Code-coverage-tools-for-C-C" class="headerlink" title="Code coverage tools for C&#x2F;C++"></a>Code coverage tools for C&#x2F;C++</h2><p>There are some tools on the market that can measure the code coverage of black-box testing,<br>such as Squish Coco, Bullseye, etc. Their principle is to insert instrumentation when build product.</p><p>Iâ€™ve done some research on <a href="https://shenxianpeng.github.io/2019/05/squishcoco/">Squish Coco</a>,<br>because of some unresolved compilation issues that I didnâ€™t buy a license for this expensive tool.</p><p>When I investigated code coverage again, I found out that GCC has a built-in code coverage tool called<br><a href="https://gcc.gnu.org/onlinedocs/gcc/Gcov.html">Gcov</a>.</p><h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>For those who want to use Gcov, to illustrate how it works, I have prepared a sample program that<br>requires GCC and LCOV to be installed before running the program.</p><p>If you donâ€™t have an environment or donâ€™t want to install it, you can check out this example<br><a href="https://github.com/shenxianpeng/gcov-example">repository</a></p><p>Note: The source code is under the <code>master</code> branch master, and code coverage result html under branch <code>coverage</code>.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># This is the version of GCC and lcov on my test environment.</span></span><br><span class="line">sh-4.2$ gcc --version</span><br><span class="line">gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-39)</span><br><span class="line">Copyright (C) 2015 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the <span class="built_in">source</span> <span class="keyword">for</span> copying conditions.  There is NO</span><br><span class="line">warranty; not even <span class="keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br><span class="line"></span><br><span class="line">sh-4.2$ lcov -v</span><br><span class="line">lcov: LCOV version 1.14</span><br></pre></td></tr></table></figure><h2 id="How-Gcov-works"><a href="#How-Gcov-works" class="headerlink" title="How Gcov works"></a>How Gcov works</h2><p>Gcov workflow diagram</p><p><img src="/2021/07/gcov-example/gcov-flow.jpg" alt="flow"></p><p>There are three main steps:</p><ol><li>Adding special compilation options to the GCC compilation to generate the executable, and <code>*.gcno</code>.</li><li>Running (testing) the generated executable, which generates the <code>*.gcda</code> data file.</li><li>With <code>*.gcno</code> and <code>*.gcda</code>, generate the <code>gcov</code> file from the source code, and finally generate the code coverage report.</li></ol><p>Hereâ€™s how each of these steps is done exactly.</p><h3 id="1-Compile"><a href="#1-Compile" class="headerlink" title="1. Compile"></a>1. Compile</h3><p>The first step is to compile. The parameters and files used for compilation are already written in the <code>makefile</code>.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make build</span><br></pre></td></tr></table></figure><details><summary>Click to see the output of the make command</summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ make build</span><br><span class="line">gcc -fPIC -fprofile-arcs -ftest-coverage -c -Wall -Werror main.c</span><br><span class="line">gcc -fPIC -fprofile-arcs -ftest-coverage -c -Wall -Werror foo.c</span><br><span class="line">gcc -fPIC -fprofile-arcs -ftest-coverage -o main main.o foo.o</span><br></pre></td></tr></table></figure></details><p>As you can see from the output, this program is compiled with two compile options <code>-fprofile-arcs</code> and <code>-ftest-coverage</code>.<br>After successful compilation, not only the <code>main</code> and <code>.o</code> files are generated, but also two <code>.gcno</code> files are generated.</p><blockquote><p>The <code>.gcno</code> record file is generated after adding the GCC compile option <code>-ftest-coverage</code>, which contains information<br>for reconstructing the base block map and assigning source line numbers to blocks during the compilation process.</p></blockquote><h3 id="2-Running-the-executable"><a href="#2-Running-the-executable" class="headerlink" title="2. Running the executable"></a>2. Running the executable</h3><p>After compilation, the executable <code>main</code> is generated, which is run (tested) as follows</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./main</span><br></pre></td></tr></table></figure><details><summary>Click to see the output when running main</summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ ./main</span><br><span class="line">Start calling foo() ...</span><br><span class="line">when num is equal to 1...</span><br><span class="line">when num is equal to 2...</span><br></pre></td></tr></table></figure></details><p>When <code>main</code> is run, the results are recorded in the <code>.gcda</code> data file, and if you look in the current directory,<br>you can see that two <code>.gcda</code> files have been generated.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">foo.c  foo.gcda  foo.gcno  foo.h  foo.o  img  main  main.c  main.gcda  main.gcno  main.o  makefile  README.md</span><br></pre></td></tr></table></figure><blockquote><p><code>.gcda</code> record data files are generated because the program is compiled with the <code>-fprofile-arcs</code> option introduced.<br>It contains arc transition counts, value distribution counts, and some summary information.</p></blockquote><h3 id="3-Generating-reports"><a href="#3-Generating-reports" class="headerlink" title="3. Generating reports"></a>3. Generating reports</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make report</span><br></pre></td></tr></table></figure><details><summary> Click to see the output of the generated report </summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ make report</span><br><span class="line">gcov main.c foo.c</span><br><span class="line">File <span class="string">&#x27;main.c&#x27;</span></span><br><span class="line">Lines executed:100.00% of 5</span><br><span class="line">Creating <span class="string">&#x27;main.c.gcov&#x27;</span></span><br><span class="line"></span><br><span class="line">File <span class="string">&#x27;foo.c&#x27;</span></span><br><span class="line">Lines executed:85.71% of 7</span><br><span class="line">Creating <span class="string">&#x27;foo.c.gcov&#x27;</span></span><br><span class="line"></span><br><span class="line">Lines executed:91.67% of 12</span><br><span class="line">lcov --capture --directory . --output-file coverage.info</span><br><span class="line">Capturing coverage data from .</span><br><span class="line">Found gcov version: 4.8.5</span><br><span class="line">Scanning . <span class="keyword">for</span> .gcda files ...</span><br><span class="line">Found 2 data files <span class="keyword">in</span> .</span><br><span class="line">Processing foo.gcda</span><br><span class="line">geninfo: WARNING: cannot find an entry <span class="keyword">for</span> main.c.gcov <span class="keyword">in</span> .gcno file, skipping file!</span><br><span class="line">Processing main.gcda</span><br><span class="line">Finished .info-file creation</span><br><span class="line">genhtml coverage.info --output-directory out</span><br><span class="line">Reading data file coverage.info</span><br><span class="line">Found 2 entries.</span><br><span class="line">Found common filename prefix <span class="string">&quot;/workspace/coco&quot;</span></span><br><span class="line">Writing .css and .png files.</span><br><span class="line">Generating output.</span><br><span class="line">Processing file gcov-example/main.c</span><br><span class="line">Processing file gcov-example/foo.c</span><br><span class="line">Writing directory view page.</span><br><span class="line">Overall coverage rate:</span><br><span class="line">  lines......: 91.7% (11 of 12 lines)</span><br><span class="line">  <span class="built_in">functions</span>..: 100.0% (2 of 2 <span class="built_in">functions</span>)</span><br></pre></td></tr></table></figure></details><p>Executing <code>make report</code> to generate an HTML report actually performs two main steps behind this command.</p><ol><li><p>With the <code>.gcno</code> and <code>.gcda</code> files generated at compile and run time, execute the command<br><code>gcov main.c foo.c</code> to generate the <code>.gcov</code> code coverage file.</p></li><li><p>With the code coverage <code>.gcov</code> file, generate a visual code coverage report via<br><a href="http://ltp.sourceforge.net/coverage/lcov.php">LCOV</a>.</p></li></ol><p>The steps to generate the HTML result report are as follows.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. Generate the coverage.info data file</span></span><br><span class="line">lcov --capture --directory . --output-file coverage.info</span><br><span class="line"><span class="comment"># 2. Generate a report from this data file</span></span><br><span class="line">genhtml coverage.info --output-directory out</span><br></pre></td></tr></table></figure><h3 id="Delete-all-generated-files"><a href="#Delete-all-generated-files" class="headerlink" title="Delete all generated files"></a>Delete all generated files</h3><p>All the generated files can be removed by executing <code>make clean</code> command.</p><details><summary> Click to see the output of the make clean command </summary><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-4.2$ make clean</span><br><span class="line"><span class="built_in">rm</span> -rf main *.o *.so *.gcno *.gcda *.gcov coverage.info out</span><br></pre></td></tr></table></figure></details><h2 id="Code-coverage-report"><a href="#Code-coverage-report" class="headerlink" title="Code coverage report"></a>Code coverage report</h2><p><img src="/2021/07/gcov-example/index.png" alt="index"></p><p>The home page is displayed in a directory structure</p><p><img src="/2021/07/gcov-example/example.png" alt="example"></p><p>After entering the directory, the source files in that directory are displayed</p><p><img src="/2021/07/gcov-example/main.c.png" alt="main.c"></p><p>The blue color indicates that these statements are overwritten</p><p><img src="/2021/07/gcov-example/foo.c.png" alt="foo.c"></p><p>Red indicates statements that are not overridden</p><blockquote><p>LCOV supports statement, function, and branch coverage metrics.</p></blockquote><p>Side notes:</p><p>There is another tool for generating HTML reports called <a href="https://github.com/gcovr/gcovr">gcovr</a>, developed in Python,<br>whose reports are displayed slightly differently from LCOV. For example, LCOV displays it in a directory structure,<br>while gcovr displays it in a file path, which is always the same as the code structure, so I prefer to use the former.</p>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gcov </tag>
            
            <tag> LCOV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to make Jenkins job fail after timeout? (Resolved)</title>
      <link href="/2021/06/jenkins-timeout/"/>
      <url>/2021/06/jenkins-timeout/</url>
      
        <content type="html"><![CDATA[<p>Iâ€™ve run into some situations when the build fails, perhaps because some processes donâ€™t finish, and even setting a timeout doesnâ€™t make the Jenkins job fail.</p><p>So, to fix this problem, I used <code>try</code> .. <code>catch</code> and <code>error</code> to make my Jenkins job failed, hopes this also helps you.</p><p>Please see the following example:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent none</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&#x27;Hello&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                script &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        timeout(time: <span class="number">1</span>, unit: <span class="string">&#x27;SECONDS&#x27;</span>) &#123;</span><br><span class="line">                            echo <span class="string">&quot;timeout step&quot;</span></span><br><span class="line">                            sleep <span class="number">2</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">                        <span class="comment">// timeout reached</span></span><br><span class="line">                        println err</span><br><span class="line">                        echo <span class="string">&#x27;Time out reached.&#x27;</span></span><br><span class="line">                        error <span class="string">&#x27;build timeout failed&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here is the output log</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">00:00:01.326  [Pipeline] Start of Pipeline</span><br><span class="line">00:00:01.475  [Pipeline] stage</span><br><span class="line">00:00:01.478  [Pipeline] &#123; (Hello)</span><br><span class="line">00:00:01.516  [Pipeline] script</span><br><span class="line">00:00:01.521  [Pipeline] &#123;</span><br><span class="line">00:00:01.534  [Pipeline] timeout</span><br><span class="line">00:00:01.534  Timeout set to expire in 1 sec</span><br><span class="line">00:00:01.537  [Pipeline] &#123;</span><br><span class="line">00:00:01.547  [Pipeline] echo</span><br><span class="line">00:00:01.548  timeout step</span><br><span class="line">00:00:01.555  [Pipeline] sleep</span><br><span class="line">00:00:01.558  Sleeping for 2 sec</span><br><span class="line">00:00:02.535  Cancelling nested steps due to timeout</span><br><span class="line">00:00:02.546  [Pipeline] &#125;</span><br><span class="line">00:00:02.610  [Pipeline] // timeout</span><br><span class="line">00:00:02.619  [Pipeline] echo</span><br><span class="line">00:00:02.621  org.jenkinsci.plugins.workflow.steps.FlowInterruptedException</span><br><span class="line">00:00:02.625  [Pipeline] echo</span><br><span class="line">00:00:02.627  Time out reached.</span><br><span class="line">00:00:02.630  [Pipeline] error</span><br><span class="line">00:00:02.638  [Pipeline] &#125;</span><br><span class="line">00:00:02.656  [Pipeline] // script</span><br><span class="line">00:00:02.668  [Pipeline] &#125;</span><br><span class="line">00:00:02.681  [Pipeline] // stage</span><br><span class="line">00:00:02.696  [Pipeline] End of Pipeline</span><br><span class="line">00:00:02.709  ERROR: build timeout failed</span><br><span class="line">00:00:02.710  Finished: FAILURE</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³åœ¨ AIX ä¸Š Git Clone å¤±è´¥çš„ä¸¤ä¸ªé—®é¢˜</title>
      <link href="/2021/06/git-clone-failed-on-aix/"/>
      <url>/2021/06/git-clone-failed-on-aix/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬ç¯‡è®°å½•ä¸¤ä¸ªåœ¨åš Jenkins ä¸ AIX åšæŒç»­é›†æˆå¾—æ—¶å€™é‡åˆ°çš„ Git clone ä»£ç å¤±è´¥çš„é—®é¢˜ï¼Œå¹¶å·²è§£å†³ï¼Œåˆ†äº«å‡ºæ¥æˆ–è®¸èƒ½æœ‰æ‰€å¸®åŠ©ã€‚</p><ol><li>Dependent module &#x2F;usr&#x2F;lib&#x2F;libldap.a(libldap-2.4.so.2) could not be loaded.</li><li>é€šè¿‡ SSH è¿›è¡Œ git clone å‡ºç° Authentication failed</li></ol><h2 id="é—®é¢˜1ï¼šDependent-module-usr-lib-libldap-a-libldap-2-4-so-2-could-not-be-loaded"><a href="#é—®é¢˜1ï¼šDependent-module-usr-lib-libldap-a-libldap-2-4-so-2-could-not-be-loaded" class="headerlink" title="é—®é¢˜1ï¼šDependent module &#x2F;usr&#x2F;lib&#x2F;libldap.a(libldap-2.4.so.2) could not be loaded"></a>é—®é¢˜1ï¼šDependent module &#x2F;usr&#x2F;lib&#x2F;libldap.a(libldap-2.4.so.2) could not be loaded</h2><p>Jenkins é€šè¿‡ <strong>HTTPS</strong> æ¥ checkout ä»£ç çš„æ—¶å€™ï¼Œå‡ºç°äº†å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[2021-06-20T14:50:25.166Z] ERROR: Error cloning remote repo <span class="string">&#x27;origin&#x27;</span></span><br><span class="line">[2021-06-20T14:50:25.166Z] hudson.plugins.git.GitException: Command <span class="string">&quot;git fetch --tags --force --progress --depth=1 -- https://git.company.com/scm/vas/db.git +refs/heads/*:refs/remotes/origin/*&quot;</span> returned status code 128:</span><br><span class="line">[2021-06-20T14:50:25.166Z] stdout:</span><br><span class="line">[2021-06-20T14:50:25.166Z] stderr: <span class="built_in">exec</span>(): 0509-036 Cannot load program /opt/freeware/libexec64/git-core/git-remote-https because of the following errors:</span><br><span class="line">[2021-06-20T14:50:25.166Z] 0509-150   Dependent module /usr/lib/libldap.a(libldap-2.4.so.2) could not be loaded.</span><br><span class="line">[2021-06-20T14:50:25.166Z] 0509-153   File /usr/lib/libldap.a is not an archive or</span><br><span class="line">[2021-06-20T14:50:25.166Z]    the file could not be <span class="built_in">read</span> properly.</span><br><span class="line">[2021-06-20T14:50:25.166Z] 0509-026 System error: Cannot run a file that does not have a valid format.</span><br><span class="line">[2021-06-20T14:50:25.166Z]</span><br><span class="line">[2021-06-20T14:50:25.166Z] at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2450)</span><br><span class="line">[2021-06-20T14:50:25.166Z] at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandWithCredentials(CliGitAPIImpl.java:2051)</span><br><span class="line">[2021-06-20T14:50:25.166Z] at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.access<span class="variable">$500</span>(CliGitAPIImpl.java:84)</span><br><span class="line">[2021-06-20T14:50:25.167Z] at org.jenkinsci.plugins.gitclient.CliGitAPIImpl<span class="variable">$1</span>.execute(CliGitAPIImpl.java:573)</span><br><span class="line">[2021-06-20T14:50:25.167Z] at org.jenkinsci.plugins.gitclient.CliGitAPIImpl<span class="variable">$2</span>.execute(CliGitAPIImpl.java:802)</span><br><span class="line">[2021-06-20T14:50:25.167Z] at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler<span class="variable">$GitCommandMasterToSlaveCallable</span>.call(RemoteGitImpl.java:161)</span><br><span class="line">[2021-06-20T14:50:25.167Z] at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler<span class="variable">$GitCommandMasterToSlaveCallable</span>.call(RemoteGitImpl.java:154)</span><br><span class="line">..........................</span><br><span class="line">[2021-06-20T14:50:25.167Z] Suppressed: hudson.remoting.Channel<span class="variable">$CallSiteStackTrace</span>: Remote call to aix-devasbld-01</span><br><span class="line">[2021-06-20T14:50:25.167Z] at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1800)</span><br><span class="line">..........................</span><br><span class="line">[2021-06-20T14:50:25.168Z] at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">[2021-06-20T15:21:20.525Z] Cloning repository https://git.company.com/scm/vas/db.git</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç›´æ¥åœ¨è™šæ‹Ÿæœºä¸Šé€šè¿‡å‘½ä»¤ <code>git clone https://git.company.com/scm/vas/db.git</code> ï¼Œå¯ä»¥æˆåŠŸä¸‹è½½ï¼Œæ²¡æœ‰å‡ºç°ä»»ä½•é—®é¢˜ã€‚</p><ul><li>å¦‚æœå°† <code>LIBPATH</code> è®¾ç½®ä¸º <code>LIBPATH=/usr/lib</code> å°±èƒ½é‡ç°ä¸Šé¢çš„é”™è¯¯ï¼Œè¿™è¯´æ˜é€šè¿‡ Jenkins ä¸‹è½½ä»£ç çš„æ—¶å€™å®ƒæ˜¯å» <code>/usr/lib/</code> ä¸‹é¢æ‰¾ <code>libldap.a</code></li><li>å¦‚æœå°†å˜é‡ <code>LIBPATH</code> è®¾ç½®ä¸ºç©º <code>export LIBPATH=</code> æˆ– <code>unset LIBPATH</code>ï¼Œæ‰§è¡Œ <code>git clone https://...</code> å°±æ­£å¸¸äº†ã€‚</li></ul><blockquote><p>å°è¯•åœ¨ Jenkins å¯åŠ¨ agent çš„æ—¶å€™ä¿®æ”¹ <code>LIBPATH</code> å˜é‡è®¾ç½®ä¸ºç©ºï¼Œä½†éƒ½ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆä¸è¡Œï¼ï¼Ÿ</p></blockquote><p>é‚£å°±çœ‹çœ‹ <code>/usr/lib/libldap.a</code> æ˜¯ä»€ä¹ˆé—®é¢˜äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ldd çš„æ—¶å€™å‘ç°è¿™ä¸ªé™æ€åº“æœ‰é—®é¢˜</span></span><br><span class="line">$ ldd /usr/lib/libldap.a</span><br><span class="line">/usr/lib/libldap.a needs:</span><br><span class="line">         /opt/IBM/ldap/V6.4/lib/libibmldapdbg.a</span><br><span class="line">         /usr/lib/threads/libc.a(shr.o)</span><br><span class="line">Cannot find libpthreads.a(shr_xpg5.o)</span><br><span class="line">         /opt/IBM/ldap/V6.4/lib/libidsldapiconv.a</span><br><span class="line">Cannot find libpthreads.a(shr_xpg5.o)</span><br><span class="line">Cannot find libc_r.a(shr.o)</span><br><span class="line">         /unix</span><br><span class="line">         /usr/lib/libcrypt.a(shr.o)</span><br><span class="line">Cannot find libpthreads.a(shr_xpg5.o)</span><br><span class="line">Cannot find libc_r.a(shr.o)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹åˆ°å®ƒé“¾æ¥åˆ°æ˜¯ IBM LDAP</span></span><br><span class="line">$ <span class="built_in">ls</span> -l /usr/lib/libldap.a</span><br><span class="line">lrwxrwxrwx    1 root     system           35 Jun 10 2020  /usr/lib/libldap.a -&gt; /opt/IBM/ldap/V6.4/lib/libidsldap.a</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†çœ‹çœ‹åŒæ ·çš„ libldap.a åœ¨ /opt/freeware/lib/ æ˜¯æ²¡é—®é¢˜çš„</span></span><br><span class="line">$ ldd /opt/freeware/lib/libldap.a</span><br><span class="line">ldd: /opt/freeware/lib/libldap.a: File is an archive.</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span> -l /opt/freeware/lib/libldap.a</span><br><span class="line">lrwxrwxrwx    1 root     system           13 May 27 2020  /opt/freeware/lib/libldap.a -&gt; libldap-2.4.a</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜1ï¼šè§£å†³åŠæ³•"><a href="#é—®é¢˜1ï¼šè§£å†³åŠæ³•" class="headerlink" title="é—®é¢˜1ï¼šè§£å†³åŠæ³•"></a>é—®é¢˜1ï¼šè§£å†³åŠæ³•</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°è¯•æ›¿æ¢</span></span><br><span class="line"><span class="comment"># å…ˆå°† libldap.a é‡åä¸º libldap.a.oldï¼ˆä¸åˆ é™¤ä»¥é˜²éœ€è¦æ¢å¤ï¼‰</span></span><br><span class="line">$ sudo <span class="built_in">mv</span> /usr/lib/libldap.a /usr/lib/libldap.a.old</span><br><span class="line"><span class="comment"># é‡æ–°é“¾æ¥</span></span><br><span class="line">$ sudo <span class="built_in">ln</span> -s /opt/freeware/lib/libldap.a /usr/lib/libldap.a</span><br><span class="line">$ <span class="built_in">ls</span> -l /usr/lib/libldap.a</span><br><span class="line">lrwxrwxrwx    1 root     system           27 Oct 31 23:27 /usr/lib/libldap.a -&gt; /opt/freeware/lib/libldap.a</span><br></pre></td></tr></table></figure><p>é‡æ–°é“¾æ¥å®Œæˆåï¼Œé‡æ–°è¿æ¥ AIX agentï¼Œå†æ¬¡æ‰§è¡Œ Jenkins job æ¥ clone ä»£ç ï¼ŒæˆåŠŸäº†ï¼</p><h2 id="é—®é¢˜2ï¼šé€šè¿‡-SSH-è¿›è¡Œ-git-clone-å‡ºç°-Authentication-failed"><a href="#é—®é¢˜2ï¼šé€šè¿‡-SSH-è¿›è¡Œ-git-clone-å‡ºç°-Authentication-failed" class="headerlink" title="é—®é¢˜2ï¼šé€šè¿‡ SSH è¿›è¡Œ git clone å‡ºç° Authentication failed"></a>é—®é¢˜2ï¼šé€šè¿‡ SSH è¿›è¡Œ git clone å‡ºç° Authentication failed</h2><p>ç”±äº AIX 7.1-TL4-SP1 å³å°† End of Service Pack Supportï¼Œå› æ­¤éœ€è¦å‡çº§ã€‚ä½†æ˜¯å‡çº§åˆ° AIX 7.1-TL5-SP6 åæ— æ³•é€šè¿‡ SSH ä¸‹è½½ä»£ç ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> ssh://git@git.company.com:7999/vas/db.git</span><br><span class="line">Cloning into <span class="string">&#x27;db&#x27;</span>...</span><br><span class="line">Authentication failed.</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><p>åƒè¿™æ ·çš„é”™è¯¯ï¼Œåœ¨ä½¿ç”¨ Git SSH æ–¹å¼æ¥ clone ä»£ç ç»å¸¸ä¼šé‡åˆ°ï¼Œé€šå¸¸éƒ½æ˜¯æ²¡æœ‰è®¾ç½® public keyã€‚åªè¦æ‰§è¡Œ <code>ssh-keygen -t rsa -C your@email.com</code> ç”Ÿæˆ <code>id_rsa</code> keysï¼Œç„¶åå°† <code>id_rsa.pub</code> çš„å€¼æ·»åŠ åˆ° GitHub&#x2F;Bitbucket&#x2F;GitLab çš„ public key ä¸­ä¸€èˆ¬å°±èƒ½è§£å†³ã€‚</p><p>ä½†è¿™æ¬¡ä¸ä¸€æ ·ï¼Œå°½ç®¡å·²ç»è®¾ç½®äº† public keyï¼Œä½†é”™è¯¯ä¾æ—§å­˜åœ¨ã€‚å¥‡å¿«çš„æ˜¯ä¹‹å‰ AIX 7.1-TL4-SP1 æ˜¯å¥½ç”¨çš„ï¼Œå‡çº§åˆ° AIX 7.1-TL5-SP6 å°±ä¸å¥½ç”¨äº†å‘¢ï¼Ÿ</p><p>ä½¿ç”¨å‘½ä»¤ <code>ssh -vvv &lt;git-url&gt;</code> æ¥çœ‹çœ‹ä»–ä»¬åœ¨è¯·æ±‚ git æœåŠ¡å™¨æ—¶å€™ debug ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># AIX 7.1-TL4-SP1</span></span><br><span class="line">bash-4.3$ oslevel -s</span><br><span class="line">7100-04-01-1543</span><br><span class="line">bash-4.3$ ssh -vvv git.company.com</span><br><span class="line">OpenSSH_6.0p1, OpenSSL 1.0.1e 11 Feb 2013</span><br><span class="line">debug1: Reading configuration data /etc/ssh/ssh_config</span><br><span class="line">debug1: Failed dlopen: /usr/krb5/lib/libkrb5.a(libkrb5.a.so):   0509-022 Cannot load module /usr/krb5/lib/libkrb5.a(libkrb5.a.so).</span><br><span class="line">        0509-026 System error: A file or directory <span class="keyword">in</span> the path name does not exist.</span><br><span class="line"></span><br><span class="line">debug1: Error loading Kerberos, disabling Kerberos auth.</span><br><span class="line">.......</span><br><span class="line">.......</span><br><span class="line">ssh_exchange_identification: <span class="built_in">read</span>: Connection reset by peer</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># New machine AIX 7.1-TL5-SP6</span></span><br><span class="line">$ oslevel -s</span><br><span class="line">7100-05-06-2015</span><br><span class="line">$ ssh -vvv git.company.com</span><br><span class="line">OpenSSH_7.5p1, OpenSSL 1.0.2t  10 Sep 2019</span><br><span class="line">debug1: Reading configuration data /etc/ssh/ssh_config</span><br><span class="line">debug1: Failed dlopen: /usr/krb5/lib/libkrb5.a(libkrb5.a.so):   0509-022 Cannot load module /usr/krb5/lib/libkrb5.a(libkrb5.a.so).</span><br><span class="line">        0509-026 System error: A file or directory <span class="keyword">in</span> the path name does not exist.</span><br><span class="line"></span><br><span class="line">debug1: Error loading Kerberos, disabling Kerberos auth.</span><br><span class="line">.......</span><br><span class="line">.......</span><br><span class="line">ssh_exchange_identification: <span class="built_in">read</span>: Connection reset by peer</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°çš„å·®åˆ«æ˜¯ OpenSSH çš„ç‰ˆæœ¬ä¸åŒï¼Œå¯èƒ½æ˜¯å› æ­¤å¯¼è‡´çš„ï¼Œæ ¹æ®è¿™ä¸ªæ¨æµ‹å¾ˆå¿«å°±æ‰¾åˆ°äº†ç±»ä¼¼çš„é—®é¢˜å’Œç­”æ¡ˆï¼ˆStackoverflow <a href="https://stackoverflow.com/questions/54191112/bitbucket-ssh-clone-on-aix-7-1-fails">é“¾æ¥</a>)</p><h2 id="é—®é¢˜2ï¼šè§£å†³åŠæ³•"><a href="#é—®é¢˜2ï¼šè§£å†³åŠæ³•" class="headerlink" title="é—®é¢˜2ï¼šè§£å†³åŠæ³•"></a>é—®é¢˜2ï¼šè§£å†³åŠæ³•</h2><p>åœ¨ <code>~/.ssh/config</code> æ–‡ä»¶é‡Œæ·»åŠ é€‰é¡¹ <code>AllowPKCS12keystoreAutoOpen no</code></p><p>ä½†é—®é¢˜åˆæ¥äº†ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯ AIX ä¸Šçš„ä¸€ä¸ªå®šåˆ¶é€‰é¡¹ï¼Œåœ¨ Linux ä¸Šæ˜¯æ²¡æœ‰çš„ã€‚</p><p>è¿™ä¼šå¯¼è‡´åŒä¸€ä¸ªåŸŸè´¦æˆ·åœ¨ AIX é€šè¿‡ SSH å¯ä»¥ git clone æˆåŠŸï¼Œä½†åœ¨ Linux ä¸Š git clone ä¼šå¤±è´¥ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Linux ä¸Šä¸è¯†åˆ«æ”¹é€‰é¡¹</span></span><br><span class="line">stderr: /home/****/.ssh/config: line 1: Bad configuration option: allowpkcs12keystoreautoopen</span><br><span class="line">/home/****/.ssh/config: terminating, 1 bad configuration options</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br></pre></td></tr></table></figure><ol><li>å¦‚æœ <code>config</code> æ–‡ä»¶å¯ä»¥æ”¯æŒæ¡ä»¶é€‰é¡¹å°±å¥½äº†ï¼Œå³å½“ä¸º AIX æ˜¯æ·»åŠ é€‰é¡¹ <code>AllowPKCS12keystoreAutoOpen no</code>ï¼Œå…¶ä»–ç³»ç»Ÿåˆ™æ²¡æœ‰è¯¥é€‰é¡¹ã€‚å¯æƒœ <code>config</code> å¹¶ä¸æ”¯æŒã€‚</li><li>å¦‚æœèƒ½å•ç‹¬çš„è®¾ç½®å½“å‰ AIX çš„ ssh config æ–‡ä»¶å°±å¥½äº†ã€‚å°è¯•å°† <code>/etc/ssh/ssh_config</code> æ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼Œé‡å¯æœåŠ¡ï¼Œå†æ¬¡é€šè¿‡ SSH cloneï¼ŒæˆåŠŸ~ï¼</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host *</span><br><span class="line">  AllowPKCS12keystoreAutoOpen no</span><br><span class="line"><span class="comment">#   ForwardAgent no</span></span><br><span class="line"><span class="comment">#   ForwardX11 no</span></span><br><span class="line"><span class="comment">#   RhostsRSAAuthentication no</span></span><br><span class="line"><span class="comment">#   RSAAuthentication yes</span></span><br><span class="line"><span class="comment">#   PasswordAuthentication yes</span></span><br><span class="line"><span class="comment">#   HostbasedAuthentication no</span></span><br><span class="line"><span class="comment">#   GSSAPIAuthentication no</span></span><br><span class="line"><span class="comment">#   GSSAPIDelegateCredentials no</span></span><br><span class="line"><span class="comment">#   GSSAPIKeyExchange no</span></span><br><span class="line"><span class="comment">#   GSSAPITrustDNS no</span></span><br><span class="line"><span class="comment">#   ....çœç•¥</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> AIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Jenkins </tag>
            
            <tag> AIX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡è§£é™¤æ–‡ä»¶èµ„æºé™åˆ¶ï¼šè§£å†³åœ¨ AIX ä½¿ç”¨ Git ä¸‹è½½å¤§å®¹é‡ä»“åº“å¤±è´¥é—®é¢˜</title>
      <link href="/2021/06/aix-ulimit/"/>
      <url>/2021/06/aix-ulimit/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ä½¿ç”¨ AIX 7.1 ä» Bitbucket ä¸‹è½½ä»£ç çš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªé”™è¯¯ï¼š</p><p><code>fatal: write error: A file cannot be larger than the value set by ulimit.</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> -b dev https://&lt;username&gt;:&lt;password&gt;@git.company.com/scm/vmcc/opensrc.git --depth 1</span><br><span class="line">Cloning into <span class="string">&#x27;opensrc&#x27;</span>...</span><br><span class="line">remote: Counting objects: 2390, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (1546/1546), <span class="keyword">done</span>.</span><br><span class="line">fatal: write error: A file cannot be larger than the value <span class="built_in">set</span> by <span class="built_in">ulimit</span>.</span><br><span class="line">fatal: index-pack failed</span><br></pre></td></tr></table></figure><p>åœ¨ AIX 7.3 æˆ‘é‡åˆ°çš„æ˜¯è¿™ä¸ªé”™è¯¯ï¼š</p><p><code>fatal: fetch-pack: invalid index-pack output</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> -b dev https://&lt;username&gt;:&lt;password&gt;@git.company.com/scm/vmcc/opensrc.git --depth 1</span><br><span class="line">Cloning into <span class="string">&#x27;opensrc&#x27;</span>...</span><br><span class="line">remote: Counting objects: 2390, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (1546/1546), <span class="keyword">done</span>.</span><br><span class="line">fatal: write error: File too large68), 1012.13 MiB | 15.38 MiB/s</span><br><span class="line">fatal: fetch-pack: invalid index-pack output</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ç”±äºè¿™ä¸ªä»“åº“é‡Œçš„æ–‡ä»¶å¤ªå¤§ï¼Œè¶…è¿‡äº† AIX å¯¹äºç”¨æˆ·æ–‡ä»¶èµ„æºä½¿ç”¨çš„ä¸Šé™ã€‚</p><p>é€šè¿‡ <code>ulimit -a</code> å¯ä»¥æ¥æŸ¥çœ‹ã€‚æ›´å¤šå…³äº <code>ulimit</code> å‘½ä»¤çš„ä½¿ç”¨ <a href="https://www.ibm.com/docs/en/aix/7.1?topic=u-ulimit-command">ulimit Command</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ulimit</span> -a</span><br><span class="line">time(seconds)        unlimited</span><br><span class="line">file(blocks)         2097151</span><br><span class="line">data(kbytes)         unlimited</span><br><span class="line">stack(kbytes)        32768</span><br><span class="line">memory(kbytes)       32768</span><br><span class="line">coredump(blocks)     2097151</span><br><span class="line">nofiles(descriptors) 2000</span><br><span class="line">threads(per process) unlimited</span><br><span class="line">processes(per user)  unlimited</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° file æœ‰ä¸€ä¸ªä¸Šé™å€¼ 2097151ã€‚å¦‚æœå°†å®ƒä¹Ÿæ”¹æˆ unlimited åº”è¯¥å°±å¥½äº†ã€‚</p><p>é€šè¿‡ root ç”¨æˆ·å¯ä»¥è®¿é—®åˆ° limits æ–‡ä»¶ <code>/etc/security/limits</code>(æ™®é€šç”¨æˆ·æ²¡æƒé™è®¿é—®)ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯è¿™ä¸ªæ–‡ä»¶é‡Œçš„éƒ¨åˆ†å†…å®¹</span></span><br><span class="line"></span><br><span class="line">default:</span><br><span class="line">        fsize = 2097151</span><br><span class="line">        core = 2097151</span><br><span class="line">        cpu = -1</span><br><span class="line">        data = -1</span><br><span class="line">        rss = 65536</span><br><span class="line">        stack = 65536</span><br><span class="line">        nofiles = 2000</span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°çš„å€¼ fsize &#x3D; 2097151 æ”¹æˆ fsize &#x3D; -1 å°±å°†è§£é™¤äº†æ–‡ä»¶å—å¤§å°çš„é™åˆ¶äº†ã€‚ä¿®æ”¹å®Œæˆåï¼Œ<strong>é‡æ–°ç™»å½•</strong>æ¥è®©è¿™æ¬¡ä¿®æ”¹ç”Ÿæ•ˆã€‚</p><p>å†æ¬¡æ‰§è¡Œ <code>ulimit -a</code>ï¼Œå·²ç»ç”Ÿæ•ˆäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ulimit</span> -a</span><br><span class="line">time(seconds)        unlimited</span><br><span class="line">file(blocks)         unlimited</span><br><span class="line">data(kbytes)         unlimited</span><br><span class="line">stack(kbytes)        32768</span><br><span class="line">memory(kbytes)       32768</span><br><span class="line">coredump(blocks)     2097151</span><br><span class="line">nofiles(descriptors) 2000</span><br><span class="line">threads(per process) unlimited</span><br><span class="line">processes(per user)  unlimited</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ file(blocks) å·²ç»å˜æˆ unlimited äº†ã€‚å†æ¬¡å°è¯• git clone</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b dev https://&lt;username&gt;:&lt;password&gt;@git.company.com/scm/vmcc/opensrc.git --depth 1</span><br><span class="line">Cloning into <span class="string">&#x27;opensrc&#x27;</span>...</span><br><span class="line">remote: Counting objects: 2390, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (1546/1546), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 2390 (delta 763), reused 2369 (delta 763)</span><br><span class="line">Receiving objects: 100% (2390/2390), 3.80 GiB | 3.92 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (763/763), <span class="keyword">done</span>.</span><br><span class="line">Checking out files: 100% (3065/3065), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><p>è¿™æ¬¡å°±æˆåŠŸäº†ï¼</p>]]></content>
      
      
      <categories>
          
          <category> AIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> AIX </tag>
            
            <tag> ulimit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº Artifactory ä¸Šä¼ åˆ¶å“å˜å¾—éå¸¸ç¼“æ…¢ï¼Œå¶å°”å¤±è´¥çš„é—®é¢˜åˆ†äº«</title>
      <link href="/2021/06/artifactory-slow-upload/"/>
      <url>/2021/06/artifactory-slow-upload/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æˆ‘ä½¿ç”¨ Artifactory Enterprise é‡åˆ°äº†ä¸Šä¼ åˆ¶å“éå¸¸ç¼“æ…¢çš„é—®é¢˜ï¼Œåœ¨ç»è¿‡ä¸ ITï¼ŒArtifactory ç®¡ç†å‘˜ä¸€èµ·åˆä½œç»ˆäºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨æ­¤åˆ†äº«ä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„è§£å†³è¿‡ç¨‹ã€‚</p><p>å¦‚æœä½ ä¹Ÿé‡åˆ°ç±»ä¼¼æˆ–è®¸æœ‰æ‰€å¸®åŠ©ã€‚</p><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>æœ€è¿‘å‘ç°é€šè¿‡ Jenkins å¾€ Artifactory é‡Œä¸Šä¼ åˆ¶å“çš„æ—¶å€™å¶å°”å‡ºç°ä¸Šä¼ éå¸¸ç¼“æ…¢çš„æƒ…å†µï¼Œå°¤å…¶æ˜¯å½“ä¸€ä¸ª Jenkins stage é‡Œæœ‰å¤šæ¬¡ä¸Šä¼ ï¼Œå¾€å¾€ä¼šåœ¨ç¬¬äºŒæ¬¡ä¸Šä¼ çš„æ—¶å€™å‡ºç°ä¼ è¾“é€Ÿåº¦æä¸ºç¼“æ…¢ï¼ˆKB&#x2F;s ï¼‰ã€‚</p><h2 id="é—®é¢˜æ’æŸ¥å’Œè§£å†³"><a href="#é—®é¢˜æ’æŸ¥å’Œè§£å†³" class="headerlink" title="é—®é¢˜æ’æŸ¥å’Œè§£å†³"></a>é—®é¢˜æ’æŸ¥å’Œè§£å†³</h2><p>æˆ‘çš„æ„å»ºç¯å¢ƒå’Œ Jenkins éƒ½æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ï¼Œæ‰€æœ‰çš„æ„å»ºä»»åŠ¡éƒ½å‡ºç°äº†ä¸Šä¼ ç¼“æ…¢çš„æƒ…å†µï¼Œä¸ºäº†æ’é™¤å¯èƒ½æ˜¯ä½¿ç”¨ Artifactory plugin çš„å¯¼è‡´åŸå› ï¼Œé€šè¿‡ curl å‘½ä»¤æ¥è¿›è¡Œä¸Šä¼ æµ‹è¯•ï¼Œä¹ŸåŒæ ·ä¸Šä¼ é€Ÿåº¦ç»å¸¸å¾ˆæ…¢ã€‚</p><p>é‚£ä¹ˆé—®é¢˜å°±åœ¨ Artifactory ä¸Šé¢ã€‚</p><ol><li>æ˜¯ Artifactory æœ€è¿‘å‡çº§äº†ï¼Ÿ</li><li>è¿˜æ˜¯ Artifactory æœ€è¿‘ä¿®æ”¹äº†ä»€ä¹ˆè®¾ç½®ï¼Ÿ</li><li>ä¹Ÿè®¸æ˜¯ Artifactory æœåŠ¡å™¨çš„é—®é¢˜ï¼Ÿ</li></ol><p>åœ¨è·Ÿ Artifactory ç®¡ç†å‘˜è¿›è¡Œäº†æ²Ÿé€šä¹‹åï¼Œæ’é™¤äº†ä»¥ä¸Š 1ï¼Œ2 çš„å¯èƒ½ã€‚ä¸ºäº†å½»åº•æ’é™¤æ˜¯ Artifactory çš„é—®é¢˜ï¼Œé€šè¿‡ scp è¿›è¡Œæ‹·è´çš„æ—¶å€™åŒæ ·ä¹Ÿå‡ºç°äº†ä¼ è¾“é€Ÿåº¦éå¸¸æ…¢çš„æƒ…å†µï¼Œè¿™é—®é¢˜å°±å‡ºç°åœ¨ç½‘ç»œä¸Šäº†ã€‚</p><p>è¿™æ ·éœ€è¦ IT æ¥å¸®åŠ©æ’æŸ¥ç½‘ç»œé—®é¢˜äº†ï¼Œæœ€ç»ˆ IT å»ºè®®æ›´æ¢ç½‘å¡è¿›è¡Œå°è¯•ï¼ˆå› ä¸ºä»–ä»¬ä¹‹å‰æœ‰é‡åˆ°ç±»ä¼¼çš„æƒ…å†µï¼‰ï¼Œä½†è¿™ç§æƒ…å†µä¼šæœ‰çŸ­æš‚çš„ç½‘ç»œä¸­æ–­ï¼Œä¸è¿‡æœ€ç»ˆè¿˜æ˜¯å¾—åˆ°äº†ç®¡ç†è€…çš„åŒæ„ã€‚</p><p>å¹¸è¿çš„æ˜¯åœ¨æ›´æ¢ç½‘å¡ä¹‹åï¼ŒJenkins å¾€ Artifactory ä¼ è¾“åˆ¶å“çš„é€Ÿåº¦æ¢å¤äº†æ­£å¸¸ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¤„ç†æ¬¡äº‹ä»¶çš„ä¸€ç‚¹ç‚¹å°å°çš„æ€»ç»“ï¼š</p><p>ç”±äºè¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ°å‡ ä¸ªå›¢é˜Ÿï¼Œä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿæ¨è¿›ï¼Œæ­¤æ—¶æ˜ç¡®è¯´æ˜é—®é¢˜ï¼Œæ¨æµ‹è¦æœ‰ç†æœ‰æ®ï¼Œä»¥åŠè¯¥é—®é¢˜å¯¼è‡´äº†ä»€ä¹ˆæ ·çš„ä¸¥é‡åæœï¼ˆæ¯”å¦‚å½±å“å‘å¸ƒï¼‰æ‰èƒ½è®©ç›¸å…³äººé‡è§†èµ·æ¥ï¼Œå¦åˆ™å¤§å®¶éƒ½ç­‰ç€ï¼Œæ²¡äººå›æ¥è§£å†³é—®é¢˜ã€‚</p><p>å½“ Artifactory ç®¡ç†æ¨èä½¿ç”¨å…¶ä»–æ•°æ®ä¸­å¿ƒ instanceï¼Œå»ºè®®ä»–ä»¬å…ˆå°è¯•æ›´æ¢ç½‘å¡ï¼›å¦‚æœé—®é¢˜æ²¡æœ‰å¾—åˆ°è§£å†³ï¼Œåœ¨åŒä¸€ä¸ªæ•°æ®ä¸­å¿ƒåˆ›å»ºå¦å¤–ä¸€å°æœåŠ¡å™¨ã€‚å¦‚æœé—®é¢˜è¿˜åœ¨ï¼Œæ­¤æ—¶å†è€ƒè™‘è¿ç§»åˆ°å…¶ä»–æ•°æ®ä¸­å¿ƒinstanceã€‚è¿™å¤§å¤§å‡å°‘äº†ä½œä¸ºç”¨æˆ·å»è¯•é”™æ‰€å¸¦æ¥çš„é¢å¤–å·¥ä½œé‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JFrog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Troubleshooting </tag>
            
            <tag> Artifactory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Resolved problem that ESlint HTML report is not displayed correctly in Jenkins job</title>
      <link href="/2021/06/eslint-jenkins/"/>
      <url>/2021/06/eslint-jenkins/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Iâ€™m just documenting to myself that it was solved by following.</p></blockquote><p>When I want to integrate the ESlint report with Jenkins. I encourage a problem</p><p>That is eslint-report.html display different with it on my local machine, and I also log to Jenkins server and grab the eslint-report.html to local, it works well.</p><p>I used <a href="https://plugins.jenkins.io/htmlpublisher/">HTML Publisher</a> plugin to display the HTML report, but only the ESlint HTML report has problems other report work well, so I guess this problem may be caused by Jenkins.</p><p>Finally, I find it. (Stackoverflow <a href="https://stackoverflow.com/questions/34315723/jenkins-error-blocked-script-execution-in-url-because-the-documents-frame/46197356?stw=2#46197356">URL</a>)</p><h2 id="Follow-the-below-steps-for-solution"><a href="#Follow-the-below-steps-for-solution" class="headerlink" title="Follow the below steps for solution"></a>Follow the below steps for solution</h2><ol><li>Open the Jenkin home page.</li><li>Go to Manage Jenkins.</li><li>Now go to Script Console.</li><li>And in that console paste the below statement and click on Run.</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.setProperty(<span class="string">&quot;hudson.model.DirectoryBrowserSupport.CSP&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure><ol start="5"><li>After that, it will load CSS and JS.</li></ol><p>According to Jenkinsâ€™s new <a href="https://www.jenkins.io/doc/book/security/configuring-content-security-policy/">Content Security Policy</a> and I saw <code>No frames allowed</code>.</p><p>That is exactly the error I get on chrome by right-clicking on Elements.</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Troubleshooting </tag>
            
            <tag> ESlint </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git å¸¸è§è®¾ç½®æŒ‡åŒ—</title>
      <link href="/2021/05/git-guidelines/"/>
      <url>/2021/05/git-guidelines/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ Git æäº¤ä»£ç ä¹‹å‰ï¼Œå»ºè®®åšä»¥ä¸‹è¿™äº›è®¾ç½®ã€‚</p><p>å«æŒ‡å—æœ‰ç‚¹å¤¸å¼ ï¼Œå› ä¸ºå®ƒåœ¨æœ‰äº›æƒ…å†µä¸‹ä¸‹ä¸é€‚ç”¨ï¼Œæ¯”å¦‚ä½ å·²ç»æœ‰äº† <code>.gitattributes</code> æˆ– <code>.editorconfig</code> ç­‰æ–‡ä»¶ï¼Œé‚£ä¹ˆæœ‰äº›è®¾ç½®å°±ä¸ç”¨åšäº†ã€‚</p><p>å› æ­¤æš‚ä¸”å«ä»–æŒ‡åŒ—å§ï¼Œå®ƒé€šå¸¸æƒ…å†µä¸‹è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œçœ‹çœ‹éƒ½éœ€è¦å“ªäº›è®¾ç½®å§ã€‚</p><h2 id="1-é…ç½®-name-å’Œ-email"><a href="#1-é…ç½®-name-å’Œ-email" class="headerlink" title="1. é…ç½® name å’Œ email"></a>1. é…ç½® name å’Œ email</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„ï¼Œä½ éœ€è¦å°†ä¸‹é¢ç¤ºä¾‹ä¸­æˆ‘çš„ name å’Œ email æ¢æˆä½ è‡ªå·±çš„</span></span><br><span class="line">$ git config --global user.name <span class="string">&quot;shenxianpeng&quot;</span></span><br><span class="line">$ git config --global user.email <span class="string">&quot;xianpeng.shen@gmail.com&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºï¼Œæˆ‘è¿˜æ¨èä½ è®¾ç½®å¤´åƒï¼Œè¿™æ ·æ–¹ä¾¿åŒäº‹é—´çš„å¿«é€Ÿè¯†åˆ«ã€‚</p><p>å½“ä½ ä¸è®¾ç½®å¤´åƒçš„æ—¶å€™ï¼Œåªæœ‰æŠŠé¼ æ ‡æ”¾åˆ°å¤´åƒä¸Šæ‰çŸ¥é“ Pull Request çš„ Reviewers æ˜¯è°ï¼ˆæ¥è‡ªäºBitubkcetï¼‰ã€‚</p><p><img src="/2021/05/git-guidelines/avatar.png" alt="Bitbucketå¤´åƒ"></p><h2 id="2-è®¾ç½®-core-autocrlf-false"><a href="#2-è®¾ç½®-core-autocrlf-false" class="headerlink" title="2. è®¾ç½® core.autocrlf&#x3D;false"></a>2. è®¾ç½® core.autocrlf&#x3D;false</h2><p>ä¸ºäº†é˜²æ­¢ CRLF(windows) å’Œ LF(UNIX&#x2F;Linux&#x2F;Mac) çš„è½¬æ¢é—®é¢˜ã€‚ä¸ºäº†é¿å…åœ¨ä½¿ç”¨ Git æäº¤ä»£ç æ—¶å‡ºç°å†å²è¢«æ©ç›–çš„é—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®æ¯ä¸ªä½¿ç”¨ Git çš„äººæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥å¹¶æŸ¥çœ‹æ˜¯å¦è¾“å‡º &quot;core.autocrlf=false&quot;ï¼Œè¿™æ„å‘³ç€å‘½ä»¤è®¾ç½®æˆåŠŸã€‚</span></span><br><span class="line">$ git config --list</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„é¡¹ç›®åº•ä¸‹å·²ç»æœ‰äº† <code>.gitattributes</code> æˆ– <code>.editorconfig</code> æ–‡ä»¶ï¼Œé€šå¸¸è¿™äº›æ–‡ä»¶é‡Œé¢éƒ½æœ‰æ”¾ç½® CRLF å’Œ LF çš„è½¬æ¢é—®é¢˜çš„è®¾ç½®é¡¹ã€‚</p><p>è¿™æ—¶å€™ä½ å°±ä¸å¿…ç‰¹æ„æ‰§è¡Œå‘½ä»¤ <code>git config --global core.autocrlf false</code></p><h2 id="3-ç¼–å†™æœ‰è§„èŒƒçš„æäº¤"><a href="#3-ç¼–å†™æœ‰è§„èŒƒçš„æäº¤" class="headerlink" title="3. ç¼–å†™æœ‰è§„èŒƒçš„æäº¤"></a>3. ç¼–å†™æœ‰è§„èŒƒçš„æäº¤</h2><p>æˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« é‡Œåˆ†äº«è¿‡å…³äºå¦‚ä½•è®¾ç½®æäº¤ä¿¡æ¯è§„èŒƒï¼Œè¯·å‚çœ‹<a href="https://shenxianpeng.github.io/2020/09/commit-messages-specification/">ã€ŠGitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒã€‹</a>ã€‚</p><h2 id="4-æäº¤å†å²çš„å‹ç¼©"><a href="#4-æäº¤å†å²çš„å‹ç¼©" class="headerlink" title="4. æäº¤å†å²çš„å‹ç¼©"></a>4. æäº¤å†å²çš„å‹ç¼©</h2><p>æ¯”å¦‚ä½ ä¿®æ”¹ä¸€ä¸ª bugï¼Œå‡è®¾ä½ é€šè¿‡ 3 æ¬¡æäº¤åˆ°ä½ çš„ä¸ªäººåˆ†æ”¯æ‰æŠŠå®ƒæ”¹å¥½ã€‚è¿™æ—¶å€™ä½ æ Pull Request å°±ä¼šæ˜¾ç¤ºæœ‰ä¸‰ä¸ªæäº¤ã€‚</p><p>å¦‚æœæäº¤å†å²ä¸è¿›è¡Œå‹ç¼©ï¼Œè¿™ä¸ª PR è¢«åˆå¹¶åˆ°ä¸»åˆ†æ”¯åï¼Œä»¥ååˆ«äººçœ‹åˆ°ä½ è¿™ä¸ª bug çš„ä¿®å¤å°±æ˜¯å»è¿™ä¸‰ä¸ª commits é‡Œå»ä¸€ä¸€æŸ¥çœ‹ï¼Œè¿›è¡Œå¯¹æ¯”ï¼Œæ‰èƒ½çŸ¥é“åˆ°åº•ä¿®æ”¹äº†ä»€ä¹ˆã€‚</p><p>å‹ç¼©æäº¤å†å²å°±æ˜¯å°†ä¸‰æ¬¡æäº¤å‹ç¼©æˆä¸€æ¬¡æäº¤ã€‚</p><p>å¯ä»¥é€šè¿‡ git rebase å‘½ä»¤è¿›è¡Œ commit çš„å‹ç¼©ï¼Œæ¯”å¦‚å°†æœ€è¿‘ä¸‰æ¬¡æäº¤å‹ç¼©æˆä¸€æ¬¡å¯ä»¥æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rebase -i HEAD~3</span><br></pre></td></tr></table></figure><h2 id="5-åˆ é™¤å·²ç»-merge-çš„åˆ†æ”¯"><a href="#5-åˆ é™¤å·²ç»-merge-çš„åˆ†æ”¯" class="headerlink" title="5. åˆ é™¤å·²ç» merge çš„åˆ†æ”¯"></a>5. åˆ é™¤å·²ç» merge çš„åˆ†æ”¯</h2><p>æœ‰äº› SCMï¼Œæ¯”å¦‚ Bitbucket ä¸æ”¯æŒé»˜è®¤å‹¾é€‰ <code>Delete source branch after merging</code>ï¼Œè¿™ä¸ªé—®é¢˜ç»ˆäºåœ¨ Bitbucket 7.3 ç‰ˆæœ¬ä¿®å¤äº†ã€‚è¯¦è§ <a href="https://jira.atlassian.com/browse/BSERV-9254">BSERV-9254</a> å’Œ <a href="https://jira.atlassian.com/browse/BSERV-3272">BSERV-3272</a> ï¼ˆ2013å¹´åˆ›å»ºçš„ï¼‰ã€‚</p><p>æ³¨æ„åœ¨åˆå¹¶ä»£ç æ—¶å‹¾é€‰åˆ é™¤æºåˆ†æ”¯è¿™ä¸€é€‰é¡¹ï¼Œå¦åˆ™ä¼šé€ æˆå¤§é‡çš„å¼€å‘åˆ†æ”¯ç•™åœ¨ Git ä»“åº“ä¸‹ã€‚</p><hr><p>å¦‚æœè¿˜éœ€è¦å“ªäº›è®¾ç½®è¿™é‡Œæ²¡æœ‰æåˆ°çš„ï¼Œæ¬¢è¿è¡¥å……ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Branch Naming Convention</title>
      <link href="/2021/05/branch-naming-convention/"/>
      <url>/2021/05/branch-naming-convention/</url>
      
        <content type="html"><![CDATA[<h2 id="Why-need-branching-naming-convention"><a href="#Why-need-branching-naming-convention" class="headerlink" title="Why need branching naming convention"></a>Why need branching naming convention</h2><p>To better manage the branches on Git(I sued Bitbucket), integration with CI tool, Artifactory, and automation will be more simple and clear.</p><p>For example, good unified partition naming can help the team easily find and integrate without special processing. Therefore, you should unify the partition naming rules for all repositories.</p><h2 id="Branches-naming-convention"><a href="#Branches-naming-convention" class="headerlink" title="Branches naming convention"></a>Branches naming convention</h2><h3 id="main-branch-naming"><a href="#main-branch-naming" class="headerlink" title="main branch naming"></a>main branch naming</h3><p>In general, the mainâ€™s branch names most like <code>master</code> or <code>main</code>.</p><h3 id="Development-branch-naming"><a href="#Development-branch-naming" class="headerlink" title="Development branch naming"></a>Development branch naming</h3><p>I would name my development branch just called <code>develop</code>.</p><h3 id="Bugfix-and-feature-branches-naming"><a href="#Bugfix-and-feature-branches-naming" class="headerlink" title="Bugfix and feature branches naming"></a>Bugfix and feature branches naming</h3><p>For Bitbucket, it has default types of branches for use, like <code>bugfix/</code>, <code>feature/</code>.<br>So my <code>bugfix</code>, <code>feature</code> combine with the Jira key together, such as <code>bugfix/ABC-1234</code> or <code>feature/ABC-2345</code>.</p><h3 id="Hotfix-and-release-branches-naming"><a href="#Hotfix-and-release-branches-naming" class="headerlink" title="Hotfix and release branches naming"></a>Hotfix and release branches naming</h3><p>For hotfix and release, my naming convention always like <code>release/1.1.0</code>, <code>hotfix/1.1.0.HF1</code>.</p><h3 id="Other-branches"><a href="#Other-branches" class="headerlink" title="Other branches"></a>Other branches</h3><p>Maybe your Jira task ticket you donâ€™t want to make it in <code>bugfix</code> or <code>feature</code>, you can name it to start with <code>task</code>, so the branch name is <code>task/ABC-3456</code>.</p><p>If you have to provide diagnostic build to custom, you can name your branch <code>diag/ABC-5678</code>.</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Anyway, having a unified branch naming convention is very important for implement CI&#x2F;CD and your whole team.</p><blockquote><p>Related Reading: <a href="https://shenxianpeng.github.io/2019/07/git-branching-strategy/">Git Branch Strategy</a> (Chinese)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Branch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to download the entire folder artifacts when Artifactory &quot;Download Folder functionality is disabled&quot;?</title>
      <link href="/2021/05/artifactory-api-search/"/>
      <url>/2021/05/artifactory-api-search/</url>
      
        <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>When you do CI with JFrog Artifactory when you want to download the entire folder artifacts, but maybe your IT doesnâ€™t enable this function, whatever some seasons.</p><p>You can try the below JFrog Artifactory API to know if youâ€™re using Artifactory whether allowed to download the entire folder artifacts.</p><p>just visit this API URL: <code>https://den-artifactory.company.com/artifactory/api/archive/download/team-generic-release-den/project/abc/main/?archiveType=zip</code></p><p>You will see an error message returned if the Artifactory is not allowed to download the entire folder.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">403</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Download Folder functionality is disabled.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>More details about the API could find here <a href="https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-RetrieveFolderorRepositoryArchive">Retrieve Folder or Repository Archive</a></p></blockquote><h2 id="Workaround"><a href="#Workaround" class="headerlink" title="Workaround"></a>Workaround</h2><p>So to be enabled to download entire folder artifacts, I found other JFrog Artifactory APIs provide a workaround.</p><p>How to download the entire folder artifacts programmatically? this post will show you how to use other <a href="https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API">Artifactory REST API</a> to get a workaround.</p><h3 id="1-Get-All-Artifacts-Created-in-Date-Range"><a href="#1-Get-All-Artifacts-Created-in-Date-Range" class="headerlink" title="1. Get All Artifacts Created in Date Range"></a>1. Get All Artifacts Created in Date Range</h3><p>API URL: <a href="https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-ArtifactsCreatedinDateRange">Artifacts Created in Date Range</a></p><p>This is the snippet code I use this API</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># download.sh</span></span><br><span class="line"></span><br><span class="line">USERNAME=<span class="variable">$1</span></span><br><span class="line">PASSWORD=<span class="variable">$2</span></span><br><span class="line">REPO=<span class="variable">$3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># which day ago do you want to download</span></span><br><span class="line">N_DAY_AGO=<span class="variable">$4</span></span><br><span class="line"><span class="comment"># today</span></span><br><span class="line">START_TIME=$(($(date --date=&quot;<span class="variable">$N_DAY_AGO</span> days ago&quot; +%s%N)/<span class="number">1000000</span>))</span><br><span class="line">END_TIME=$(($(date +%s%N)/<span class="number">1000000</span>))</span><br><span class="line"></span><br><span class="line">ARTIFACTORY=https://den-artifactory.company.com/artifactory</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -x <span class="string">&quot;`which sha1sum`&quot;</span> ]; <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;You need to have the &#x27;sha1sum&#x27; command in your path.&quot;</span>; <span class="built_in">exit</span> 1; <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">RESULTS=`curl -s -X GET -u <span class="variable">$USERNAME</span>:<span class="variable">$PASSWORD</span> <span class="string">&quot;<span class="variable">$ARTIFACTORY</span>/api/search/creation?from=<span class="variable">$START_TIME</span>&amp;to=<span class="variable">$END_TIME</span>&amp;repos=<span class="variable">$REPO</span>&quot;</span> | grep uri | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span> | sed s<span class="string">&#x27;/.$//&#x27;</span> | sed s<span class="string">&#x27;/.$//&#x27;</span> | sed -r <span class="string">&#x27;s/^.&#123;1&#125;//&#x27;</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$RESULTS</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> RESULT <span class="keyword">in</span> <span class="variable">$RESULTS</span> ; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;fetching path from <span class="variable">$RESULT</span>&quot;</span></span><br><span class="line">    PATH_TO_FILE=`curl -s -X GET -u <span class="variable">$USERNAME</span>:<span class="variable">$PASSWORD</span> <span class="variable">$RESULT</span> | grep downloadUri | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span> | sed s<span class="string">&#x27;/.$//&#x27;</span> | sed s<span class="string">&#x27;/.$//&#x27;</span> | sed -r <span class="string">&#x27;s/^.&#123;1&#125;//&#x27;</span>`</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;download file path <span class="variable">$PATH_TO_FILE</span>&quot;</span></span><br><span class="line">  curl -u <span class="variable">$USERNAME</span>:<span class="variable">$PASSWORD</span> -O <span class="variable">$PATH_TO_FILE</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>Then you just use this as: <code>sh download.sh $&#123;USERNAME&#125; $&#123;PASSWORD&#125; $&#123;REPO_PATH&#125; $&#123;N_DAY_AGO&#125;</code></p><h3 id="2-Get-all-artifacts-matching-the-given-Ant-path-pattern"><a href="#2-Get-all-artifacts-matching-the-given-Ant-path-pattern" class="headerlink" title="2. Get all artifacts matching the given Ant path pattern"></a>2. Get all artifacts matching the given Ant path pattern</h3><p>More about this API see: <a href="https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-PatternSearch">Pattern Search</a></p><p>Take an example screenshot of pattern search:</p><p><img src="/2021/05/artifactory-api-search/pattern-search.png" alt="é€šè¿‡æ¨¡å¼æ¥æœç´¢"></p><p>Then you can use Shell, Python language to get the file path from the response, then use <code>curl -u $USERNAME:$PASSWORD -O $PATH_TO_FILE</code> command to download the file one by one.</p><p>If you have better solutions, suggestions, or questions, you can leave a comment.</p>]]></content>
      
      
      <categories>
          
          <category> JFrog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Artifactory </tag>
            
            <tag> JFrog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Why Windows Installer pop up? (Resolved)</title>
      <link href="/2021/04/why-windows-installer-pop-up/"/>
      <url>/2021/04/why-windows-installer-pop-up/</url>
      
        <content type="html"><![CDATA[<h2 id="Whatâ€™s-the-problem"><a href="#Whatâ€™s-the-problem" class="headerlink" title="Whatâ€™s the problem?"></a>Whatâ€™s the problem?</h2><p>Today I am having a problem where the Windows installer I created is not installing, and the following Windows installer box pops up.</p><p><img src="/2021/04/why-windows-installer-pop-up/windows-installer.png" alt="Windows Installer"></p><p>But it works well in the previous build, and I didnâ€™t make any code changes. It is strange, actually fix this problem is very easy but not easy to find.</p><h2 id="How-to-fix-it"><a href="#How-to-fix-it" class="headerlink" title="How to fix it?"></a>How to fix it?</h2><p>In my case, I just remove the space from my build folder naming. I have made follow mistakes:</p><p>My previous build name is <code>v2.2.2.3500-da121sa-Developer</code>, but for this build, I named it to <code>v2.2.2.3500-32jkjdk - Developer</code></p><h2 id="How-to-find-the-solution"><a href="#How-to-find-the-solution" class="headerlink" title="How to find the solution?"></a>How to find the solution?</h2><p>This problem takes me several hours until I google this <a href="https://community.spiceworks.com/topic/874022-msiexec-just-returns-a-pop-up">article</a> which inspired me.</p><p>Just like the above article, if I try to use the command line <code>msiexec.exe other-commands ...</code>, compare with the works installer will also quick to find the root cause.</p><p>I realized it immediately I should try to remove the spaces from the build folderâ€¦ Wow, the installer back to work.</p><p>If this happens to you, I hope it also works for you, and leave a comment if it works for you.</p>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JaCoCo ä»£ç è¦†ç›–ç‡å®è·µåˆ†äº«</title>
      <link href="/2021/04/jacoco-imp/"/>
      <url>/2021/04/jacoco-imp/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡é€‚ç”¨çš„æ˜¯ Gradle æ¥æ„å»ºå’Œé€‚ç”¨ JaCoCoã€‚</p><p>åˆ†åˆ«ä»‹ç»äº† <code>build.gradle</code> çš„æ–‡ä»¶é…ç½®ï¼Œæ‰§è¡Œæµ‹è¯•å’Œç”ŸæˆæŠ¥å‘Šï¼ŒæŠ¥å‘Šå‚æ•°è¯´æ˜ï¼Œä»¥åŠå¦‚ä½•å¿½ç•¥æŒ‡å®šçš„åŒ…æˆ–ç±»ä»è€Œå½±å“æµ‹è¯•è¦†ç›–ç‡çš„ç»“æœã€‚</p><h2 id="build-gradle-æ–‡ä»¶é…ç½®"><a href="#build-gradle-æ–‡ä»¶é…ç½®" class="headerlink" title="build.gradle æ–‡ä»¶é…ç½®"></a>build.gradle æ–‡ä»¶é…ç½®</h2><p>æ¯”å¦‚ä½¿ç”¨ gradle æ¥ç®¡ç†çš„é¡¹ç›®å¯ä»¥åœ¨ <code>build.gradle</code> é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;jacoco&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jacoco &#123;</span><br><span class="line">    toolVersion = <span class="string">&quot;0.8.5&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test &#123;</span><br><span class="line">    useJUnitPlatform()</span><br><span class="line">    exclude <span class="string">&#x27;**/**IgnoreTest.class&#x27;</span>  <span class="comment">// å¦‚æœæœ‰ test case ä¸é€šè¿‡ï¼Œå¦‚æœ‰å¿…è¦å¯ä»¥é€šè¿‡è¿™æ ·å¿½ç•¥æ‰</span></span><br><span class="line">    finalizedBy jacocoTestReport       <span class="comment">// report is always generated after tests run</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jacocoTestReport &#123;</span><br><span class="line">    dependsOn test <span class="comment">// tests are required to run before generating the report</span></span><br><span class="line">    reports &#123;</span><br><span class="line">        xml.enabled <span class="literal">true</span></span><br><span class="line">        csv.enabled <span class="literal">false</span></span><br><span class="line">        html.destination <span class="title function_">file</span><span class="params">(<span class="string">&quot;$&#123;buildDir&#125;/reports/jacoco&quot;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰§è¡Œæµ‹è¯•ï¼Œç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š"><a href="#æ‰§è¡Œæµ‹è¯•ï¼Œç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š" class="headerlink" title="æ‰§è¡Œæµ‹è¯•ï¼Œç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š"></a>æ‰§è¡Œæµ‹è¯•ï¼Œç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š</h2><p>ç„¶åæ‰§è¡Œ <code>gradle test</code> å°±å¯ä»¥äº†ã€‚ä¹‹åå¯ä»¥å¯ä»¥åœ¨ <code>build\reports\jacoco</code> ç›®å½•ä¸‹æ‰¾åˆ°æŠ¥å‘Šäº†ã€‚</p><p><img src="/2021/04/jacoco-imp/reports.png" alt="JaCoCoæŠ¥å‘Š"></p><p>é‡ç‚¹æ˜¯å¦‚ä½•åˆ†ææŠ¥å‘Šã€‚æ‰“å¼€ index.htmlï¼ŒæŠ¥å‘Šæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="/2021/04/jacoco-imp/index.png" alt="JaCoCoæŠ¥å‘Šé¦–é¡µ"></p><h2 id="æŠ¥å‘Šå‚æ•°è¯´æ˜"><a href="#æŠ¥å‘Šå‚æ•°è¯´æ˜" class="headerlink" title="æŠ¥å‘Šå‚æ•°è¯´æ˜"></a>æŠ¥å‘Šå‚æ•°è¯´æ˜</h2><span id="more"></span><h3 id="Coverage-Countersï¼ˆè¦†ç›–è®¡æ•°å™¨ï¼‰"><a href="#Coverage-Countersï¼ˆè¦†ç›–è®¡æ•°å™¨ï¼‰" class="headerlink" title="Coverage Countersï¼ˆè¦†ç›–è®¡æ•°å™¨ï¼‰"></a>Coverage Countersï¼ˆè¦†ç›–è®¡æ•°å™¨ï¼‰</h3><p>JaCoCo ä½¿ç”¨ä¸€ç»„ä¸åŒçš„è®¡æ•°å™¨æ¥è®¡ç®—è¦†ç›–ç‡æŒ‡æ ‡ï¼Œæ‰€æœ‰è¿™äº›è®¡æ•°å™¨éƒ½æ¥è‡ªäº Java ç±»æ–‡ä»¶ä¸­åŒ…å«çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åŸºæœ¬ä¸Šæ˜¯ Java å­—èŠ‚ç æŒ‡ä»¤å’ŒåµŒå…¥ç±»æ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯ã€‚è¿™ç§æ–¹æ³•å¯ä»¥åœ¨æ²¡æœ‰æºä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæœ‰æ•ˆçš„å³æ—¶æ£€æµ‹å’Œåˆ†æã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ”¶é›†åˆ°çš„ä¿¡æ¯å¯ä»¥æ˜ å°„åˆ°æºä»£ç ï¼Œå¹¶å¯è§†åŒ–åˆ°è¡Œçº§ç²’åº¦ã€‚</p><p>è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå°±æ˜¯ç±»æ–‡ä»¶å¿…é¡»ä¸è°ƒè¯•ä¿¡æ¯ä¸€èµ·ç¼–è¯‘ï¼Œä»¥è®¡ç®—è¡Œçº§è¦†ç›–ç‡å¹¶æä¾›æºç é«˜äº®ã€‚ä½†ä¸æ˜¯æ‰€æœ‰çš„ Java è¯­è¨€ç»“æ„éƒ½å¯ä»¥ç›´æ¥ç¼–è¯‘æˆç›¸åº”çš„å­—èŠ‚ç ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJava ç¼–è¯‘å™¨ä¼šåˆ›å»ºæ‰€è°“çš„åˆæˆä»£ç ï¼Œæœ‰æ—¶ä¼šå¯¼è‡´æ„å¤–çš„ä»£ç è¦†ç›–ç‡ç»“æœã€‚</p><h3 id="Instructions-C0-Coverage-æŒ‡ä»¤ï¼ˆC0è¦†ç›–ç‡ï¼‰"><a href="#Instructions-C0-Coverage-æŒ‡ä»¤ï¼ˆC0è¦†ç›–ç‡ï¼‰" class="headerlink" title="Instructions (C0 Coverage) - æŒ‡ä»¤ï¼ˆC0è¦†ç›–ç‡ï¼‰"></a>Instructions (C0 Coverage) - æŒ‡ä»¤ï¼ˆC0è¦†ç›–ç‡ï¼‰</h3><p>æœ€å°çš„å•ä½ JaCoCo è®¡æ•°æ˜¯å•ä¸ª Java å­—èŠ‚ç æŒ‡ä»¤ï¼ŒæŒ‡ä»¤è¦†ç›–ç‡æä¾›äº†å…³äºè¢«æ‰§è¡Œæˆ–é—æ¼çš„ä»£ç é‡çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæŒ‡æ ‡å®Œå…¨ç‹¬ç«‹äºæºç æ ¼å¼åŒ–ï¼Œå³ä½¿åœ¨ç±»æ–‡ä»¶ä¸­æ²¡æœ‰è°ƒè¯•ä¿¡æ¯çš„æƒ…å†µä¸‹ä¹Ÿå§‹ç»ˆå¯ç”¨ã€‚</p><h3 id="Branches-C1-Coverage-åˆ†æ”¯ï¼ˆC1è¦†ç›–ç‡ï¼‰"><a href="#Branches-C1-Coverage-åˆ†æ”¯ï¼ˆC1è¦†ç›–ç‡ï¼‰" class="headerlink" title="Branches (C1 Coverage) - åˆ†æ”¯ï¼ˆC1è¦†ç›–ç‡ï¼‰"></a>Branches (C1 Coverage) - åˆ†æ”¯ï¼ˆC1è¦†ç›–ç‡ï¼‰</h3><p>JaCoCo è¿˜è®¡ç®—æ‰€æœ‰ if å’Œ switch è¯­å¥çš„åˆ†æ”¯è¦†ç›–ç‡ï¼Œè¿™ä¸ªæŒ‡æ ‡è®¡ç®—ä¸€ä¸ªæ–¹æ³•ä¸­æ­¤ç±»åˆ†æ”¯çš„æ€»æ•°ï¼Œå¹¶ç¡®å®šæ‰§è¡Œæˆ–é—æ¼çš„åˆ†æ”¯æ•°é‡ã€‚å³ä½¿åœ¨ç±»æ–‡ä»¶ä¸­æ²¡æœ‰è°ƒè¯•ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œåˆ†æ”¯è¦†ç›–ç‡æ€»æ˜¯å¯ç”¨çš„ã€‚ä½†è¯·æ³¨æ„åœ¨è¿™ä¸ªè®¡æ•°å™¨å®šä¹‰çš„ä¸Šä¸‹æ–‡ä¸­<strong>å¼‚å¸¸å¤„ç†ä¸è¢«è®¤ä¸ºæ˜¯åˆ†æ”¯ã€‚</strong></p><p>å¦‚æœç±»æ–‡ä»¶æ²¡æœ‰ç¼–è¯‘è°ƒè¯•ä¿¡æ¯ï¼Œå†³ç­–ç‚¹å¯ä»¥è¢«æ˜ å°„åˆ°æºè¡Œå¹¶ç›¸åº”åœ°é«˜äº®æ˜¾ç¤ºã€‚</p><ul><li>æ²¡æœ‰è¦†ç›–ã€‚è¡Œä¸­æ²¡æœ‰åˆ†æ”¯è¢«æ‰§è¡Œï¼ˆçº¢è±å½¢</li><li>éƒ¨åˆ†è¦†ç›–ã€‚ä»…æ‰§è¡Œäº†è¯¥çº¿çš„éƒ¨åˆ†åˆ†æ”¯ï¼ˆé»„é’»</li><li>å…¨è¦†ç›–ã€‚çº¿è·¯ä¸­çš„æ‰€æœ‰åˆ†æ”¯éƒ½å·²æ‰§è¡Œï¼ˆç»¿è‰²è±å½¢ï¼‰</li></ul><h3 id="Cyclomatic-Complexity-ç¯å½¢å¤æ‚åº¦"><a href="#Cyclomatic-Complexity-ç¯å½¢å¤æ‚åº¦" class="headerlink" title="Cyclomatic Complexity - ç¯å½¢å¤æ‚åº¦"></a>Cyclomatic Complexity - ç¯å½¢å¤æ‚åº¦</h3><p>JaCoCo è¿˜è®¡ç®—äº†æ¯ä¸ªéæŠ½è±¡æ–¹æ³•çš„å¾ªç¯å¤æ‚åº¦å¹¶æ€»ç»“äº†ç±»ã€åŒ…å’Œç»„çš„å¤æ‚åº¦ã€‚å¾ªç¯å¤æ‚åº¦æ˜¯æŒ‡åœ¨ï¼ˆçº¿æ€§ï¼‰ç»„åˆä¸­ï¼Œèƒ½å¤Ÿäº§ç”Ÿé€šè¿‡ä¸€ä¸ªæ–¹æ³•çš„æ‰€æœ‰å¯èƒ½è·¯å¾„çš„æœ€å°è·¯å¾„æ•°ã€‚<br>å› æ­¤å¤æ‚åº¦å€¼å¯ä»¥ä½œä¸ºå®Œå…¨è¦†ç›–æŸä¸ªè½¯ä»¶çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹æ•°é‡çš„æŒ‡ç¤ºï¼Œå³ä½¿åœ¨ç±»æ–‡ä»¶ä¸­æ²¡æœ‰è°ƒè¯•ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥è®¡ç®—å‡ºå¤æ‚åº¦æ•°å­—ã€‚</p><p>å¾ªç¯å¤æ‚åº¦v(G)çš„æ­£å¼å®šä¹‰æ˜¯åŸºäºå°†æ–¹æ³•çš„æ§åˆ¶æµå›¾è¡¨ç¤ºä¸ºä¸€ä¸ªæœ‰å‘å›¾ã€‚</p><p>v(G) &#x3D; E - N + 2</p><p>å…¶ä¸­Eä¸ºè¾¹æ•°ï¼ŒNä¸ºèŠ‚ç‚¹æ•°ã€‚JaCoCoæ ¹æ®åˆ†æ”¯æ•°(B)å’Œå†³ç­–ç‚¹æ•°(D)è®¡ç®—æ–¹æ³•çš„å¾ªç¯å¤æ‚åº¦ï¼Œå…¶ç­‰ä»·å…¬å¼å¦‚ä¸‹ã€‚</p><p>v(G) &#x3D; B - D + 1</p><p>æ ¹æ®æ¯ä¸ªåˆ†æ”¯çš„è¦†ç›–çŠ¶æ€ï¼ŒJaCoCoè¿˜è®¡ç®—æ¯ä¸ªæ–¹æ³•çš„è¦†ç›–å’Œé—æ¼å¤æ‚åº¦ã€‚é—æ¼çš„å¤æ‚åº¦å†æ¬¡è¡¨æ˜äº†å®Œå…¨è¦†ç›–ä¸€ä¸ªæ¨¡å—æ‰€ç¼ºå°‘çš„æµ‹è¯•ç”¨ä¾‹æ•°é‡ã€‚è¯·æ³¨æ„ï¼Œç”±äºJaCoCoä¸è€ƒè™‘å¼‚å¸¸å¤„ç†ä½œä¸ºåˆ†æ”¯ï¼Œå°è¯•&#x2F;æ•è·å—ä¹Ÿä¸ä¼šå¢åŠ å¤æ‚æ€§ã€‚</p><h3 id="Lines-è¡Œ"><a href="#Lines-è¡Œ" class="headerlink" title="Lines - è¡Œ"></a>Lines - è¡Œ</h3><p>å¯¹äºæ‰€æœ‰å·²ç»ç¼–è¯‘è¿‡è°ƒè¯•ä¿¡æ¯çš„ç±»æ–‡ä»¶ï¼Œå¯ä»¥è®¡ç®—å‡ºå„ä¸ªè¡Œçš„è¦†ç›–ç‡ä¿¡æ¯ã€‚å½“è‡³å°‘æœ‰ä¸€æ¡åˆ†é…ç»™è¯¥è¡Œçš„æŒ‡ä»¤è¢«æ‰§è¡Œæ—¶ï¼Œå°±è®¤ä¸ºè¯¥æºè¡Œå·²è¢«æ‰§è¡Œã€‚</p><p>ç”±äºå•è¡Œé€šå¸¸ä¼šç¼–è¯‘æˆå¤šæ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œæºç é«˜äº®æ˜¾ç¤ºæ¯è¡ŒåŒ…å«æºç çš„ä¸‰ç§ä¸åŒçŠ¶æ€ã€‚</p><ul><li>No coverage: è¯¥è¡Œæ²¡æœ‰æŒ‡ä»¤è¢«æ‰§è¡Œï¼ˆçº¢è‰²èƒŒæ™¯ï¼‰ã€‚</li><li>éƒ¨åˆ†è¦†ç›–ã€‚è¯¥è¡Œä¸­åªæœ‰éƒ¨åˆ†æŒ‡ä»¤è¢«æ‰§è¡Œï¼ˆé»„è‰²èƒŒæ™¯ï¼‰ã€‚</li><li>å…¨è¦†ç›–ã€‚è¯¥è¡Œçš„æ‰€æœ‰æŒ‡ä»¤éƒ½å·²æ‰§è¡Œï¼ˆç»¿è‰²èƒŒæ™¯ï¼‰ã€‚</li></ul><p>æ ¹æ®æºç çš„æ ¼å¼ï¼Œä¸€ä¸ªæºç çš„ä¸€è¡Œå¯èƒ½æ¶‰åŠå¤šä¸ªæ–¹æ³•æˆ–å¤šä¸ªç±»ã€‚å› æ­¤ï¼Œæ–¹æ³•çš„è¡Œæ•°ä¸èƒ½ç®€å•åœ°ç›¸åŠ æ¥è·å¾—åŒ…å«ç±»çš„æ€»è¡Œæ•°ã€‚åŒæ ·çš„é“ç†ä¹Ÿé€‚ç”¨äºä¸€ä¸ªæºæ–‡ä»¶ä¸­å¤šä¸ªç±»çš„è¡Œæ•°ã€‚JaCoCoæ ¹æ®å®é™…çš„æºä»£ç è¡Œæ•°æ¥è®¡ç®—ç±»å’Œæºä»£ç æ–‡ä»¶çš„è¡Œæ•°ã€‚</p><h3 id="Method-æ–¹æ³•"><a href="#Method-æ–¹æ³•" class="headerlink" title="Method - æ–¹æ³•"></a>Method - æ–¹æ³•</h3><p>æ¯ä¸ªéæŠ½è±¡æ–¹æ³•è‡³å°‘åŒ…å«ä¸€æ¡æŒ‡ä»¤ã€‚å½“è‡³å°‘æœ‰ä¸€æ¡æŒ‡ä»¤è¢«æ‰§è¡Œæ—¶ï¼Œä¸€ä¸ªæ–¹æ³•å°±è¢«è®¤ä¸ºæ˜¯è¢«æ‰§è¡Œçš„ã€‚ç”±äº JaCoCo å·¥ä½œåœ¨å­—èŠ‚ä»£ç å±‚é¢ï¼Œæ„é€ å‡½æ•°å’Œé™æ€åˆå§‹åŒ–å™¨ä¹Ÿè¢«ç®—ä½œæ–¹æ³•ï¼Œå…¶ä¸­ä¸€äº›æ–¹æ³•åœ¨ Java æºä»£ç ä¸­å¯èƒ½æ²¡æœ‰ç›´æ¥çš„å¯¹åº”å…³ç³»ï¼Œæ¯”å¦‚éšå¼çš„ï¼Œå› æ­¤ç”Ÿæˆäº†é»˜è®¤çš„æ„é€ å‡½æ•°æˆ–å¸¸é‡çš„åˆå§‹åŒ–å™¨ã€‚</p><h3 id="Classes-ç±»"><a href="#Classes-ç±»" class="headerlink" title="Classes - ç±»"></a>Classes - ç±»</h3><p>å½“ä¸€ä¸ªç±»ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ–¹æ³•è¢«æ‰§è¡Œæ—¶ï¼Œè¯¥ç±»è¢«è®¤ä¸ºæ˜¯è¢«æ‰§è¡Œçš„ã€‚è¯·æ³¨æ„ï¼ŒJaCoCo è®¤ä¸ºæ„é€ å‡½æ•°å’Œé™æ€åˆå§‹åŒ–å™¨éƒ½æ˜¯æ–¹æ³•ã€‚ç”±äº Java æ¥å£ç±»å‹å¯èƒ½åŒ…å«é™æ€åˆå§‹åŒ–å™¨ï¼Œè¿™ç§æ¥å£ä¹Ÿè¢«è§†ä¸ºå¯æ‰§è¡Œç±»ã€‚</p><p><a href="https://www.eclemma.org/jacoco/trunk/doc/counters.html">è¦†ç›–ç‡çš„è®¡ç®—åŸæ–‡</a></p><h2 id="ä»ä»£ç è¦†ç›–ç‡æŠ¥å‘Šä¸­å¿½ç•¥æŒ‡å®šçš„åŒ…æˆ–ä»£ç "><a href="#ä»ä»£ç è¦†ç›–ç‡æŠ¥å‘Šä¸­å¿½ç•¥æŒ‡å®šçš„åŒ…æˆ–ä»£ç " class="headerlink" title="ä»ä»£ç è¦†ç›–ç‡æŠ¥å‘Šä¸­å¿½ç•¥æŒ‡å®šçš„åŒ…æˆ–ä»£ç "></a>ä»ä»£ç è¦†ç›–ç‡æŠ¥å‘Šä¸­å¿½ç•¥æŒ‡å®šçš„åŒ…æˆ–ä»£ç </h2><p>å¯¹äºæœ‰äº›åŒ…å’Œä»£ç å¯èƒ½ä¸å±äºä½ çš„é¡¹ç›®ï¼Œä½†ä¹Ÿè¢«ç»Ÿè®¡åœ¨å†…ï¼Œå¯ä»¥é€šä¿®æ”¹åœ¨ <code>build.gradle</code> å°†æŒ‡å®šçš„ä»£ç æˆ–æ˜¯åŒ…ä» JaCoCo æŠ¥å‘Šä¸­å¿½ç•¥æ‰ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line">jacocoTestReport &#123;</span><br><span class="line">    dependsOn test <span class="comment">// tests are required to run before generating the report</span></span><br><span class="line">    reports &#123;</span><br><span class="line">        xml.enabled <span class="literal">true</span></span><br><span class="line">        csv.enabled <span class="literal">false</span></span><br><span class="line">        html.destination <span class="title function_">file</span><span class="params">(<span class="string">&quot;$&#123;buildDir&#125;/reports/jacoco&quot;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">    afterEvaluate &#123;</span><br><span class="line">        classDirectories.setFrom(files(classDirectories.files.collect &#123;</span><br><span class="line">            fileTree(dir: it, exclude: [</span><br><span class="line"><span class="string">&#x27;com/vmware/antlr4c3/**&#x27;</span>])</span><br><span class="line"><span class="string">&#x27;com/vmware/antlr4c3/**&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;com/basic/parser/BasicParser*&#x27;</span></span><br><span class="line">            ])</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coverage </tag>
            
            <tag> JaCoCo </tag>
            
            <tag> Gradle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ çš„ Python ä»£ç å¤Ÿä¸å¤Ÿ Pythonicï¼Ÿ</title>
      <link href="/2021/03/pythonic/"/>
      <url>/2021/03/pythonic/</url>
      
        <content type="html"><![CDATA[<p>Python ä¸å¿…å¤šè¯´ï¼Œå®ƒæ˜¯ä¼—å¤šç¼–ç¨‹è¯­è¨€ä¸­æœ€å®¹æ˜“å­¦ä¹ çš„åŠ¨æ€ç±»å‹è¯­è¨€ã€‚å®ƒçš„è·¨å¹³å°ã€æ˜“è¯»ã€æ˜“å†™ã€ä¸°å¯Œçš„ Packages ç­‰ä¼—å¤šç‰¹æ€§ï¼Œä¹Ÿæ˜¯ä¼—å¤šDevOps&#x2F;æµ‹è¯•&#x2F;å¼€å‘å·¥ç¨‹å¸ˆæ˜¯æœ€å¸¸ç”¨çš„è¯­è¨€ä¹‹ä¸€ã€‚</p><p>ç›¸ä¿¡ä¸å°‘äººç”¨å®ƒå®Œæˆäº†å¾ˆå¤šå·¥ä½œï¼Œä½†ä½ æ˜¯ä¸æ˜¯ä»…ä»…æ­¢æ­¥äºåŠŸèƒ½çš„å®ç°è€Œå¿½ç•¥äº†å»å†™å‡ºæ›´åŠ ç®€æ´ï¼Œä¼˜ç¾çš„ <code>Pythonic</code> ä»£ç å‘¢ï¼Ÿ</p><p>åœ¨æˆ‘æœ€å¼€å§‹ç”¨ Python æ—¶ï¼Œæˆ‘è¿˜ä¸çŸ¥é“ <code>Pythonic</code> è¿™ä¸ªè¯ï¼Œç›´åˆ°å¤šå¹´å‰ä¸€ä½èµ„æ·±çš„ç¨‹åºå‘˜åœ¨ç»™æˆ‘åŸ¹è®­çš„æ—¶å€™æåˆ°äº†é¡¹ç›®ä¸­æœ‰ä¸€äº›ä»£ç ä¸å¤Ÿ <code>Pythonic</code>ï¼Œéœ€è¦é‡æ„ã€‚æ ¹æ®è¯­å¢ƒï¼Œæˆ‘ç†è§£ä»–çš„æ„æ€ï¼šå°±æ˜¯ Python çš„ä»£ç æ²¡æœ‰æŒ‰ç…§ Python çš„æ–¹å¼æ¥å†™ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Pythonic"><a href="#ä»€ä¹ˆæ˜¯-Pythonic" class="headerlink" title="ä»€ä¹ˆæ˜¯ Pythonic"></a>ä»€ä¹ˆæ˜¯ Pythonic</h2><p>å……åˆ†åˆ©ç”¨ Python è¯­è¨€çš„ç‰¹æ€§æ¥äº§ç”Ÿæ¸…æ™°ã€ç®€æ´å’Œå¯ç»´æŠ¤çš„ä»£ç ã€‚<code>Pythonic</code> çš„æ„æ€æ˜¯æŒ‡ä»£ç ä¸ä»…ä»…æ˜¯è¯­æ³•æ­£ç¡®ï¼Œè€Œæ˜¯éµå¾ª Python ç¤¾åŒºçš„æƒ¯ä¾‹ï¼Œå¹¶ä»¥å…¶é¢„æœŸçš„æ–¹å¼ä½¿ç”¨è¯¥è¯­è¨€ã€‚</p><h2 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><p>ä»¥ä¸‹æ˜¯ C&#x2F;C++ ç¨‹åºå‘˜çš„ä¸€æ®µä»£ç :</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> total_sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (b &gt;= a) &#123;</span><br><span class="line">    total_sum += a;</span><br><span class="line">    a++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å­¦ä¹  Python ç¼–ç¨‹æ¨¡å¼ï¼Œé‚£ä¹ˆå°†ä¸Šé¢çš„ä»£ç æ”¹ç”¨ Python æ¥å†™å¯èƒ½ä¼šæ˜¯è¿™æ ·ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">100</span></span><br><span class="line">total_sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> b &gt;= a:</span><br><span class="line">    total_sum += a</span><br><span class="line">    a += <span class="number">1</span></span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨ Pythonic çš„æ–¹å¼æ¥å†™ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">total_sum = <span class="built_in">sum</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">101</span>))</span><br></pre></td></tr></table></figure><p>å†ä¸¾ä¸ªå¸¸è§çš„ä¾‹å­ï¼Œå¦‚æœç”¨ Java å¯èƒ½æ˜¯è¿™æ ·å†™å‡ºæ¥ä¸€ä¸ª For å¾ªç¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> index=<span class="number">0</span>; index &lt; items.length; index++) &#123;</span><br><span class="line">    items[index].performAction();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ Pythonä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¼šæ›´å¹²å‡€ä¸€äº›ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">    item.perform_action()</span><br></pre></td></tr></table></figure><p>ç”šè‡³æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(item.some_attribute <span class="keyword">for</span> item <span class="keyword">in</span> items)</span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œä»æœ¬è´¨ä¸Šè®²ï¼Œå½“æœ‰äººè¯´æŸä»¶äº‹æƒ…ä¸ç¬¦åˆ <code>pythonic</code> æ—¶ï¼Œä»–ä»¬æ˜¯åœ¨è¯´è¿™æ®µä»£ç å¯ä»¥ç”¨ä¸€ç§æ›´é€‚åˆ Python ç¼–ç é£æ ¼çš„æ–¹å¼æ¥é‡æ–°ç¼–å†™ã€‚<br>å¦å¤–ï¼Œå»äº†è§£ Python <a href="https://docs.python.org/3/library/functions.html">Built-in Functions</a>ï¼Œè€Œä¸æ˜¯é‡æ–°é€ è½®å­ã€‚</p><h2 id="å…³äº-Pythonic-çš„â€œå®˜æ–¹ä»‹ç»â€"><a href="#å…³äº-Pythonic-çš„â€œå®˜æ–¹ä»‹ç»â€" class="headerlink" title="å…³äº Pythonic çš„â€œå®˜æ–¹ä»‹ç»â€"></a>å…³äº Pythonic çš„â€œå®˜æ–¹ä»‹ç»â€</h2><p>å…¶å®ï¼ŒPython å‘½ä»¤è¡Œé‡Œå·²ç»ç§˜å¯†â€œéšè—â€äº†å…³äº <code>Pythonic</code> çš„ä»‹ç»ã€‚åªè¦æ‰“å¼€ Python æ§åˆ¶å°ï¼Œè¾“å…¥ <code>import this</code>ï¼Œä½ å°±èƒ½çœ‹åˆ°ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">C:\Users\xshen&gt;python</span><br><span class="line">Python 3.8.6 (tags/v3.8.6:db45529, Sep 23 2020, 15:52:53) [MSC v.1927 64 bit (AMD64)] on win32</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import this</span><br><span class="line">The Zen of Python, by Tim Peters</span><br><span class="line"></span><br><span class="line">Beautiful is better than ugly.</span><br><span class="line">Explicit is better than implicit.</span><br><span class="line">Simple is better than complex.</span><br><span class="line">Complex is better than complicated.</span><br><span class="line">Flat is better than nested.</span><br><span class="line">Sparse is better than dense.</span><br><span class="line">Readability counts.</span><br><span class="line">Special cases aren&#x27;t special enough to break the rules.</span><br><span class="line">Although practicality beats purity.</span><br><span class="line">Errors should never pass silently.</span><br><span class="line">Unless explicitly silenced.</span><br><span class="line">In the face of ambiguity, refuse the temptation to guess.</span><br><span class="line">There should be one-- and preferably only one --obvious way to do it.</span><br><span class="line">Although that way may not be obvious at first unless you&#x27;re Dutch.</span><br><span class="line">Now is better than never.</span><br><span class="line">Although never is often better than *right* now.</span><br><span class="line">If the implementation is hard to explain, it&#x27;s a bad idea.</span><br><span class="line">If the implementation is easy to explain, it may be a good idea.</span><br><span class="line">Namespaces are one honking great idea -- let&#x27;s do more of those!</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>ç›´è¯‘è¿‡æ¥æ˜¯ï¼šTim Peters çš„ã€ŠPythonçš„ç¦…æ„ã€‹</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">ç¾ä¸½çš„æ¯”ä¸‘é™‹çš„å¥½ã€‚</span><br><span class="line">æ˜ç¡®çš„æ¯”å«è“„çš„å¥½ã€‚</span><br><span class="line">ç®€å•çš„æ¯”å¤æ‚çš„å¥½</span><br><span class="line">å¤æ‚çš„æ¯”å¤æ‚çš„å¥½</span><br><span class="line">æ‰å¹³çš„æ¯”åµŒå¥—çš„å¥½ã€‚</span><br><span class="line">ç¨€ç–æ¯”å¯†é›†å¥½ã€‚</span><br><span class="line">å¯è¯»æ€§å¾ˆé‡è¦ã€‚</span><br><span class="line">ç‰¹æ®Šæƒ…å†µä¸ç‰¹æ®Šï¼Œä¸è¶³ä»¥æ‰“ç ´è§„åˆ™ã€‚</span><br><span class="line">è™½ç„¶å®ç”¨æ€§èƒœè¿‡çº¯ç²¹æ€§ã€‚</span><br><span class="line">é”™è¯¯æ°¸è¿œä¸åº”è¯¥é»˜é»˜åœ°é€šè¿‡ã€‚</span><br><span class="line">é™¤éæ˜ç¡®æ²‰é»˜ã€‚</span><br><span class="line">åœ¨é¢å¯¹æ¨¡æ£±ä¸¤å¯çš„æƒ…å†µä¸‹ï¼Œæ‹’ç»çŒœæµ‹çš„è¯±æƒ‘ã€‚</span><br><span class="line">åº”è¯¥æœ‰ä¸€ä¸ª--æœ€å¥½åªæœ‰ä¸€ä¸ª--æ˜æ˜¾çš„æ–¹æ³•ã€‚</span><br><span class="line">è™½ç„¶è¿™ç§æ–¹å¼ä¸€å¼€å§‹å¯èƒ½å¹¶ä¸æ˜æ˜¾ï¼Œé™¤éä½ æ˜¯è·å…°äººã€‚</span><br><span class="line">ç°åœ¨æ€»æ¯”ä¸åšè¦å¥½ã€‚</span><br><span class="line">è™½ç„¶ä»ä¸æ¯”ç°åœ¨*å¥½ã€‚</span><br><span class="line">å¦‚æœå®ç°å¾ˆéš¾è§£é‡Šï¼Œé‚£å°±æ˜¯ä¸ªåä¸»æ„ã€‚</span><br><span class="line">å¦‚æœå®ç°å¾ˆå®¹æ˜“è§£é‡Šï¼Œå®ƒå¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚</span><br><span class="line">å‘½åç©ºé—´æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„æƒ³æ³•--è®©æˆ‘ä»¬åšæ›´å¤šçš„å‘½åç©ºé—´!</span><br></pre></td></tr></table></figure><p>å…³äº <code>Pythonic</code> ä½  get åˆ°äº†å—ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> Language </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pythonic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Different branches have different default parameters in Jenkins</title>
      <link href="/2021/03/jenkins-dynamic-default-parameters/"/>
      <url>/2021/03/jenkins-dynamic-default-parameters/</url>
      
        <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>When you use Jenkins multibranch pipeline, you may want to have different default parameters settings for defferent branches build.</p><p>For example:</p><p>For develop&#x2F;hotfix&#x2F;release branches, except regular build, you also want to do some code analyzes, like code scanning, etc.<br>For other branches, like feature&#x2F;bugfix or Pull Request that you just want to do a regular build.</p><p>So you need to have dynamic parameter settings for your multibranch pipeline job.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>So for these cases, how to deal with Jenkins multibranch pipeline. Here are some code snippet that is works well in my Jenkinsfile.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">def polarisValue = <span class="literal">false</span></span><br><span class="line">def blackduckValue = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (env.BRANCH_NAME.startsWith(<span class="string">&quot;develop&quot;</span>) || env.BRANCH_NAME.startsWith(<span class="string">&quot;hotfix&quot;</span>)</span><br><span class="line"> || env.BRANCH_NAME.startsWith(<span class="string">&quot;release&quot;</span>)) &#123;</span><br><span class="line">polarisValue = <span class="literal">true</span></span><br><span class="line">blackduckValue = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> pipeline &#123;</span><br><span class="line">   agent &#123; node &#123; label <span class="string">&#x27;gradle&#x27;</span> &#125; &#125;</span><br><span class="line"></span><br><span class="line">   parameters &#123;</span><br><span class="line">       booleanParam defaultValue: polarisValue, name: <span class="string">&#x27;Polaris&#x27;</span>,  description: <span class="string">&#x27;Uncheck to disable Polaris&#x27;</span></span><br><span class="line">       booleanParam defaultValue: blackduckValue, name: <span class="string">&#x27;BlackDuck&#x27;</span>, description: <span class="string">&#x27;Uncheck to disable BD scan&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   stages &#123;</span><br><span class="line">     // ...</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºè°·æ­Œä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰æ³•åˆ™çš„æ€è€ƒä¸å®è·µ</title>
      <link href="/2021/03/code-review/"/>
      <url>/2021/03/code-review/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰ï¼Œå°±æ˜¯è®©åˆ«äººæ¥å®¡æŸ¥ä½ çš„ä»£ç ï¼Œå…¶ç›®çš„å°±æ˜¯ç¡®ä¿ä»£ç åº“çš„æ•´ä½“ä»£ç è¿è¡ŒçŠ¶å†µéšç€æ—¶é—´æ¨ç§»è€Œä¸æ–­æ”¹å–„ã€‚</p><p>ä¸­å›½æœ‰å¥å¤è¯ï¼šä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆã€‚</p><p>ä»£ç å®¡æŸ¥åŒæ ·å¦‚æ­¤ï¼š</p><ul><li>ä»–äººçš„å®¡æŸ¥æˆ–è®¸ä¼šæœ‰ä¸ä¸€æ ·çš„æ€è€ƒå’Œå»ºè®®ï¼›</li><li>äººéƒ½ä¼šçŠ¯é”™ï¼Œå¤šä¸€ä¸ªäººæ£€æŸ¥å°±å‡å°‘çŠ¯é”™çš„æœºç‡ã€‚</li></ul><p>å› æ­¤ä»£ç å®¡æŸ¥æ˜¯ä½ ç¼–å†™çš„ä»£ç åœ¨åˆå¹¶åˆ°ä¸»åˆ†æ”¯å‰æœ€é‡è¦çš„ä¸€é¡¹æ£€æŸ¥å·¥ä½œï¼Œä¹Ÿæ˜¯ä¸€é¡¹æœ€ç›´æ¥ã€æœ€ä½æˆæœ¬çš„å‘ç°è½¯ä»¶ä¸­çš„é”™è¯¯ç»ä½³æ–¹å¼ã€‚</p><p>æ—¢ç„¶ä»£ç å®¡æŸ¥è¿™ä¹ˆé‡è¦ï¼Œè€Œä¸”æœ‰è¿™æ ·æ˜¾è€Œæ˜“è§çš„æ”¶ç›Šï¼Œä½†æ€»èƒ½å¬åˆ°ä»£ç å®¡æŸ¥åœ¨å›¢é˜Ÿé‡Œæ‰§è¡Œèµ·æ¥ä¸å®¹æ˜“ã€æ•ˆæœä¸ç†æƒ³çš„é—®é¢˜ã€‚é—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿ</p><p>æ®æˆ‘è§‚å¯Ÿæœ‰ä¸¤ç‚¹åŸå› ï¼š</p><p>ç¬¬ä¸€ï¼Œè¯»åˆ«äººä»£ç éœ€è¦èŠ±æ—¶é—´ï¼Œå¾€å¾€è¿˜éœ€è¦ä»£ç æäº¤è€…å¸¦ç€ä¸šåŠ¡ä¸ºå®¡æŸ¥è€…è®²ä¸€éï¼ŒåŒæ—¶å ç”¨åŒæ–¹æ—¶é—´ï¼›<br>å…¶æ¬¡ï¼Œå¦‚æœä»£ç å®¡æŸ¥è€…å·¥ä½œç¹é‡ã€å‹åŠ›å¤§è€Œæ²¡æœ‰æ—¶é—´ï¼Œä¹Ÿå¾ˆå®¹æ˜“é€ æˆæ‰§è¡Œä¸åˆ°ä½ï¼Œèµ°è¿‡åœºï¼›</p><p>å¦‚ä½•æ‰èƒ½æ¯”è¾ƒå¥½çš„å¼€å±•ä»£ç å®¡æŸ¥ï¼Ÿè®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¤§å…¬å¸æ˜¯æ€ä¹ˆåšçš„ï¼ŒGoogle çš„è¿™ç¯‡å…³äºä»£ç å®¡æŸ¥çš„æ–‡ç« é‡Œç»™å‡ºäº†å…·ä½“æ³•åˆ™ã€‚</p><h2 id="Google-çš„ä»£ç å®¡æŸ¥æ³•åˆ™"><a href="#Google-çš„ä»£ç å®¡æŸ¥æ³•åˆ™" class="headerlink" title="Google çš„ä»£ç å®¡æŸ¥æ³•åˆ™"></a>Google çš„ä»£ç å®¡æŸ¥æ³•åˆ™</h2><p>åœ¨è¿›è¡Œä»£ç å®¡æŸ¥æ—¶ï¼Œåº”ç¡®ä¿ï¼š</p><ul><li>ä»£ç ç»è¿‡ç²¾å¿ƒè®¾è®¡</li><li>è¯¥åŠŸèƒ½å¯¹ä»£ç ç”¨æˆ·å¾ˆæœ‰å¸®åŠ©</li><li>ä»»ä½• UI æ›´æ”¹éƒ½æ˜¯æ˜æ™ºçš„ï¼Œå¹¶ä¸”çœ‹èµ·æ¥ä¸é”™</li><li>ä»»ä½•å¹¶è¡Œç¼–ç¨‹éƒ½æ˜¯å®‰å…¨å®Œæˆçš„</li><li>ä»£ç æ²¡æœ‰æ¯”éœ€è¦çš„å¤æ‚</li><li>å¼€å‘äººå‘˜æ²¡æœ‰å®ç°ä»–ä»¬å°†æ¥å¯èƒ½éœ€è¦çš„ä¸œè¥¿</li><li>ä»£ç å…·æœ‰é€‚å½“çš„å•å…ƒæµ‹è¯•</li><li>æµ‹è¯•ç»è¿‡ç²¾å¿ƒè®¾è®¡</li><li>å¼€å‘äººå‘˜å¯¹æ‰€æœ‰å†…å®¹ä½¿ç”¨äº†æ¸…æ™°çš„åç§°</li><li>æ³¨é‡Šæ¸…æ™°å®ç”¨ï¼Œå¹¶ä¸”ä¸»è¦è¯´æ˜Whyè€Œä¸æ˜¯What</li><li>ä»£ç å·²æ­£ç¡®æ–‡æ¡£åŒ–</li><li>è¯¥ä»£ç ç¬¦åˆæˆ‘ä»¬çš„æ ·å¼æŒ‡å—</li></ul><p>ç¡®ä¿æ£€æŸ¥è¦æ±‚ä½ æ£€æŸ¥çš„æ¯ä¸€è¡Œä»£ç ï¼ŒæŸ¥çœ‹ä¸Šä¸‹æ–‡ï¼Œç¡®ä¿ä½ åœ¨æ”¹å–„ä»£ç è¿è¡ŒçŠ¶å†µï¼Œå¹¶ç§°èµå¼€å‘äººå‘˜æ‰€åšçš„å‡ºè‰²å·¥ä½œã€‚</p><blockquote><p>åŸæ–‡ï¼š<a href="https://google.github.io/eng-practices/review/reviewer/looking-for.html">https://google.github.io/eng-practices/review/reviewer/looking-for.html</a></p></blockquote><h2 id="ä»£ç å®¡æŸ¥æ³•çš„è½åœ°"><a href="#ä»£ç å®¡æŸ¥æ³•çš„è½åœ°" class="headerlink" title="ä»£ç å®¡æŸ¥æ³•çš„è½åœ°"></a>ä»£ç å®¡æŸ¥æ³•çš„è½åœ°</h2><p>å¯è§ï¼Œæƒ³è¦æ›´å¥½çš„è½åœ°ä»£ç å®¡æŸ¥ï¼Œéœ€è¦å…ˆè¦ç¡®ç«‹æ³•åˆ™ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µå¯¹ä¸Šè¿°æ³•åˆ™è¿›è¡Œå€Ÿé‰´ã€åˆ å‡æˆ–è¡¥å……ï¼›</p><p>ç¬¬äºŒï¼Œä½œä¸ºæŠ€æœ¯é¢†å¯¼åº”å½“ç§¯æå¸ƒé“ï¼Œè®©å¼€å‘è€…äº†è§£ç»Ÿä¸€çš„ä»£ç å®¡æŸ¥æ³•åˆ™ï¼›</p><p>ç¬¬ä¸‰ï¼Œåº”å½“æŠŠæ³•åˆ™é‡Œçš„å…·ä½“è§„åˆ™å°½å¯èƒ½åœ°é€šè¿‡æµç¨‹æ§åˆ¶ã€è‡ªåŠ¨åŒ–æ£€æŸ¥åˆ™çº³å…¥åˆ° Pull Request ä¸­ã€‚</p><p>å¦å¤–æé†’ä½œä¸º Reviewer è¦ Peaceful ï¼ï¼ï¼åœ¨ä»£ç å®¡æŸ¥æ—¶æ³¨æ„ä¸è¦å¸¦æœ‰â€œæ•™è‚²â€æ€§è´¨çš„å»ç»™åˆ«äººæå‡ºä¿®æ”¹å»ºè®®ï¼Œé‚£æ ·å¾ˆå®¹æ˜“é€‚å¾—å…¶åã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä¸å®Œå…¨å®è·µï¼Œä¾›å‚è€ƒã€‚</p><h3 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h3><h3 id="è§„é¿ä»»ä½•ä¸ç»-Review-çš„ä»£ç è¿›å…¥åˆ°ä¸»åˆ†æ”¯"><a href="#è§„é¿ä»»ä½•ä¸ç»-Review-çš„ä»£ç è¿›å…¥åˆ°ä¸»åˆ†æ”¯" class="headerlink" title="è§„é¿ä»»ä½•ä¸ç» Review çš„ä»£ç è¿›å…¥åˆ°ä¸»åˆ†æ”¯"></a>è§„é¿ä»»ä½•ä¸ç» Review çš„ä»£ç è¿›å…¥åˆ°ä¸»åˆ†æ”¯</h3><blockquote><p>ä»¥ Bitucket ä¸ºä¾‹ã€‚GitHubï¼ŒGitLab åœ¨è®¾ç½®ä¸Šå¤§åŒå°å¼‚ã€‚</p></blockquote><ul><li><p>æ‰“å¼€åˆ†æ”¯æƒé™è®¾ç½®é‡Œçš„é€‰é¡¹ <code>Prevent changes without a pull request</code> æ‰“å¼€å®ƒã€‚å½“ç„¶å¦‚æœæœ‰éœ€è¦å¯ä»¥åœ¨è¿™ä¸ªé€‰é¡¹é‡Œæ·»åŠ  Exceptionï¼Œè¢«æ·»åŠ çš„äººå¯ä»¥ä¸é€šè¿‡ Pull Reuqest æ¥æäº¤ä»£ç ã€‚</p></li><li><p>åœ¨ Merge Check é‡Œå¼€å¯ <code>Minimum approvals</code> è¿™ä¸ªé€‰é¡¹ã€‚æ¯”å¦‚è®¾ç½® Number of approvals &#x3D; 1ï¼Œè¿™æ ·éœ€è¦è‡³å°‘æœ‰ä¸€ä¸ª Reviewers ç‚¹å‡» Approve æŒ‰é’®æ‰å…è®¸ Mergeã€‚</p></li></ul><h3 id="è‡ªåŠ¨åŒ–æ£€æŸ¥"><a href="#è‡ªåŠ¨åŒ–æ£€æŸ¥" class="headerlink" title="è‡ªåŠ¨åŒ–æ£€æŸ¥"></a>è‡ªåŠ¨åŒ–æ£€æŸ¥</h3><h3 id="é€šè¿‡CIæµæ°´çº¿éªŒè¯ç¼–è¯‘å’Œæµ‹è¯•"><a href="#é€šè¿‡CIæµæ°´çº¿éªŒè¯ç¼–è¯‘å’Œæµ‹è¯•" class="headerlink" title="é€šè¿‡CIæµæ°´çº¿éªŒè¯ç¼–è¯‘å’Œæµ‹è¯•"></a>é€šè¿‡CIæµæ°´çº¿éªŒè¯ç¼–è¯‘å’Œæµ‹è¯•</h3><ul><li><p>å»ºç«‹è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯• Pipelineï¼Œè¿™æ ·åœ¨åˆ›å»º Pull Request çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨æ„å»ºã€æµ‹è¯•ä»¥åŠæ£€æŸ¥ã€‚Jenkins çš„ Multi-branch pipeline å¯ä»¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚</p></li><li><p>å¼€å¯ Bitucket çš„ Merge Check é‡Œ <code>Minimum successful builds</code> é€‰é¡¹ï¼ŒéªŒè¯æ„å»º&#x2F;æµ‹è¯•ç»“æœï¼Œä»¥é˜²æ­¢ä»»ä½•æ²¡æœ‰é€šè¿‡æ„å»ºå’Œæµ‹è¯•çš„ä»£ç å¯ä»¥ Merge åˆ°ä¸»åˆ†æ”¯ã€‚</p></li><li><p>å¦å¤–ï¼Œå¯ä»¥é€šè¿‡è‡ªè¡Œç¼–å†™å·¥å…·æ¥å®ç°ï¼Œæˆ–å¯ä»¥é›†æˆå…¶ä»– CI å·¥å…·æ¥åšæ£€æŸ¥ï¼Œä¾‹å¦‚ï¼š</p><ul><li>é’ˆå¯¹ Pull Request çš„ä¿®æ”¹å†å²æ¥åˆ†ææäº¤å†å²å¹¶æ¨è Reiewerï¼›</li><li>é€šè¿‡ Lint å·¥å…·æ¥æ£€æŸ¥ç¼–ç è§„èŒƒï¼›</li><li>é€šè¿‡ REST API æ£€æŸ¥æ˜¯å¦éœ€è¦å‹ç¼© Commits æ¥ä¿è¯æ¸…æ™°çš„æäº¤å†å²ï¼›</li><li>é€šè¿‡ SonarQube æ£€æŸ¥ Quality Gate ç­‰ã€‚</li></ul></li></ul><p>å®ç°è‡ªåŠ¨åŒ–æ£€æŸ¥ï¼Œå¯ä»¥å¸®åŠ© Reviewers å°†å®¡æŸ¥çš„å·¥ä½œç²¾åŠ›æ”¾åœ¨ä»£ç çš„å…·ä½“å®ç°ä¸Šï¼Œå…¶ä»–çš„äº¤ç»™å·¥å…·ã€‚</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ä»£ç å®¡æŸ¥åšçš„å¥½ä¸å¥½ï¼Œè·Ÿä¸€ä¸ªå›¢é˜Ÿæœ‰æ²¡æœ‰è‰¯å¥½çš„æŠ€æœ¯æ°›å›´ï¼Œæˆ–è€…æ˜¯å¦å­˜åœ¨æœ‰æŠ€æœ¯é¢†å¯¼åŠ›ï¼Œæœ‰â€œå“ä½â€çš„æŠ€æœ¯å¤§ç‰›ä¹Ÿæ˜¯æ­£ç›¸å…³çš„ã€‚</p><ul><li>å¦‚æœå›¢é˜Ÿé‡Œå¤§å¤šæ•°éƒ½æ˜¯æœ‰â€œå“ä½â€çš„å·¥ç¨‹å¸ˆï¼Œä»–ä»¬ä¼šä»¥å†™å‡ºä¼˜ç§€çš„ä»£ç ï¼ˆæˆ–æŒ‘åˆºï¼‰ä¹æ­¤ä¸ç–²ã€‚</li><li>ç›¸åå¦‚æœå›¢é˜Ÿä¸é‡è§†è§„èŒƒï¼Œåªè¿½æ±‚çŸ­æœŸçš„ç»©æ•ˆè¾¾æˆï¼Œåªä¼šè®©æŠ€æœ¯å€ºè¶Šæ¬ è¶Šå¤šï¼Œäº§å“è¶Šåšè¶Šçƒ‚ã€‚</li></ul><p>æ¬¢è¿ç•™è¨€åˆ†äº«ä½ çš„æ„è§æˆ–å»ºè®®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CodeReview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins upgrade issue &quot;Windows agents won&#39;t start&quot; workaround</title>
      <link href="/2021/02/jenkins-windows-agent-cannot-start/"/>
      <url>/2021/02/jenkins-windows-agent-cannot-start/</url>
      
        <content type="html"><![CDATA[<p>Today, when I tried to upgrade my teamâ€™s Jenkins server from Jenkins 2.235.1 to Jenkins 2.263.3, I met a problem that can not launch the Windows agent.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[2021-01-29 23:50:40] [windows-agents] Connecting to xxx.xxx.xxx.xxx</span><br><span class="line">Checking if Java exists</span><br><span class="line">java -version returned 11.0.2.</span><br><span class="line">[2021-01-29 23:50:40] [windows-agents] Installing the Jenkins agent service</span><br><span class="line">[2021-01-29 23:50:40] [windows-agents] Copying jenkins-agent.exe</span><br><span class="line">ERROR: Unexpected error in launching an agent. This is probably a bug in Jenkins</span><br><span class="line">Also: java.lang.Throwable: launched here</span><br><span class="line">at hudson.slaves.SlaveComputer._connect(SlaveComputer.java:286)</span><br><span class="line">at hudson.model.Computer.connect(Computer.java:435)</span><br><span class="line">at hudson.slaves.SlaveComputer.doLaunchSlaveAgent(SlaveComputer.java:790)</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">java.lang.NullPointerException</span><br><span class="line">at hudson.os.windows.ManagedWindowsServiceLauncher.launch(ManagedWindowsServiceLauncher.java:298)</span><br></pre></td></tr></table></figure><p>This issue had been raised in the Jenkins Jira project: <a href="https://issues.jenkins.io/browse/JENKINS-63198">JENKINS-63198</a> and <a href="https://issues.jenkins.io/browse/JENKINS-63198">JENKINS-63198</a></p><p>There is also a Windows Support Updates guide <a href="https://www.jenkins.io/blog/2020/07/23/windows-support-updates/">here</a> that mentioned this problem.</p><p>Finally, I fixed this problem by the following steps:</p><ol><li>Update <a href="https://github.com/jenkinsci/windows-slaves-plugin">windows-slaves-plugin</a> to the lastest version 1.7 (fixes for Jenkins 2.248+)</li></ol><p>Then the error should be like this</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[2021-01-30 23:53:40] [windows-agents] Connecting to xxx.xxx.xxx.xxx</span><br><span class="line">Checking if Java exists</span><br><span class="line">java -version returned 11.0.2.</span><br><span class="line">[2021-01-30 23:53:47] [windows-agents] Copying jenkins-agent.xml</span><br><span class="line">[2021-01-30 23:53:48] [windows-agents] Copying agent.jar</span><br><span class="line">[2021-01-30 23:53:48] [windows-agents] Starting the service</span><br><span class="line">ERROR: Unexpected error in launching an agent. This is probably a bug in Jenkins</span><br><span class="line">org.jinterop.dcom.common.JIException: Unknown Failure</span><br><span class="line">at org.jvnet.hudson.wmi.Win32Service$Implementation.start(Win32Service.java:149)</span><br><span class="line">Caused: java.lang.reflect.InvocationTargetException</span><br><span class="line">at sun.reflect.GeneratedMethodAccessor219.invoke(Unknown Source)</span><br><span class="line">at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">at org.kohsuke.jinterop.JInteropInvocationHandler.invoke(JInteropInvocationHandler.java:140)</span><br><span class="line">Also:   java.lang.Throwable: launched here</span><br></pre></td></tr></table></figure><ol start="2"><li>Then change <code>jenkins-agent.exe.config</code> file. remove or comment out this line <code>&lt;supportedRuntime version=&quot;v2.0.50727&quot; /&gt;</code> as below</li></ol><blockquote><p>also do this for <code>jenkins-slave.exe.config</code> in case it also exists.</p></blockquote><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">runtime</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- see http://support.microsoft.com/kb/936707 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">generatePublisherEvidence</span> <span class="attr">enabled</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">runtime</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">startup</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- this can be hosted either on .NET 2.0 or 4.0 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;supportedRuntime version=&quot;v2.0.50727&quot; /&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">supportedRuntime</span> <span class="attr">version</span>=<span class="string">&quot;v4.0&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>Then try to Launch agent.</li></ol><p>If it still does not work and has this error message â€œ.NET Framework 2.0 or later is required on this computer to run a Jenkins agent as a Windows serviceâ€, you need to upgrade your .NET Framework.</p><blockquote><p>Here is a <a href="https://shenxianpeng.github.io/2020/07/jenkins-windows-agent-connect-problem/">link</a> for update .NET Framework.</p></blockquote><p>Hopefully, this could help you to fix connect the issue of the Windows agent. Let me know in case of any questions.</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å¹´DevOpså·¥ç¨‹å¸ˆçš„å­¦ä¹ è·¯çº¿</title>
      <link href="/2021/01/devops-roadmap-2021/"/>
      <url>/2021/01/devops-roadmap-2021/</url>
      
        <content type="html"><![CDATA[<p>DevOps å®é™…ä¸Šæ˜¯ä»€ä¹ˆæ„æ€ï¼ŸğŸ¤”</p><p>DevOps æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œæ¶‰åŠæŒç»­å¼€å‘ï¼ŒæŒç»­æµ‹è¯•ï¼ŒæŒç»­é›†æˆï¼Œéƒ¨ç½²å’Œç›‘è§†ã€‚è¿™ä¸€ç³»åˆ—è¿‡ç¨‹è·¨è¶Šäº†ä¼ ç»Ÿä¸Šå­¤ç«‹çš„å¼€å‘å’Œè¿è¥å›¢é˜Ÿï¼ŒDevOps è¯•å›¾æ¶ˆé™¤å®ƒä»¬ä¹‹é—´çš„éšœç¢ã€‚</p><p>å› æ­¤ï¼ŒDevOps å·¥ç¨‹å¸ˆåŸºæœ¬ä¸Šä¸ Development å’Œ Operations å›¢é˜Ÿåˆä½œã€‚å®ƒæ˜¯è¿™ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ä¹‹é—´çš„é“¾æ¥ã€‚</p><h2 id="æ¦‚å¿µä¸å·¥å…·"><a href="#æ¦‚å¿µä¸å·¥å…·" class="headerlink" title="æ¦‚å¿µä¸å·¥å…·"></a>æ¦‚å¿µä¸å·¥å…·</h2><p>DevOps åŒ…æ‹¬è¯¸å¦‚æ„å»ºè‡ªåŠ¨åŒ–ã€CI&#x2F;CDã€åŸºç¡€æ¶æ„å³ä»£ç ç­‰æ¦‚å¿µï¼Œå¹¶ä¸”æœ‰è®¸å¤šå·¥å…·å¯ä»¥å®ç°è¿™äº›æ¦‚å¿µã€‚ç”±äºè¿™äº›å·¥å…·æ•°é‡ä¼—å¤šï¼Œå› æ­¤å¯èƒ½ä¼šé€ æˆæ··ä¹±å’Œå‹å€’æ€§çš„ç»“æœã€‚</p><p>æœ€é‡è¦çš„æ˜¯è¦äº†è§£æ¦‚å¿µï¼Œå¹¶ä¸ºæ¯ä¸ªç±»åˆ«çš„å­¦ä¹ æ‰¾ä¸€ç§ç‰¹å®šçš„å·¥å…·ã€‚ä¾‹å¦‚ï¼Œå½“ä½ å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯ CI&#x2F;CD å¹¶çŸ¥é“å¦‚ä½•ä½¿ç”¨ Jenkins æ—¶ï¼Œä¹Ÿå°†å¾ˆå®¹æ˜“å­¦ä¹ åŒç±»å‹çš„å…¶ä»–æ›¿ä»£å·¥å…·ã€‚</p><p>æ¥ä¸‹æ¥è®©å°±æ¥çœ‹çœ‹å­¦ä¹  DevOps éœ€è¦æŒæ¡å“ªäº›æŠ€èƒ½ã€‚</p><h3 id="1ï¼‰è½¯ä»¶å¼€å‘çš„æ¦‚å¿µ"><a href="#1ï¼‰è½¯ä»¶å¼€å‘çš„æ¦‚å¿µ" class="headerlink" title="1ï¼‰è½¯ä»¶å¼€å‘çš„æ¦‚å¿µ"></a>1ï¼‰è½¯ä»¶å¼€å‘çš„æ¦‚å¿µ</h3><p>ä½œä¸ºä¸€å DevOps å·¥ç¨‹å¸ˆï¼Œä½ ä¸ä¼šç›´æ¥å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œç¼–ç¨‹ï¼Œä½†æ˜¯å½“ä½ ä¸å¼€å‘å›¢é˜Ÿç´§å¯†åˆä½œä»¥æ”¹å–„å’Œè‡ªåŠ¨åŒ–ä»–ä»¬çš„ä»»åŠ¡æ—¶ï¼Œä½ éœ€è¦äº†è§£ä»¥ä¸‹æ¦‚å¿µï¼š</p><ul><li>å¼€å‘äººå‘˜çš„å·¥ä½œæ–¹å¼</li><li>ä»–ä»¬æ­£åœ¨ä½¿ç”¨å“ªä¸ª git å·¥ä½œæµç¨‹</li><li>å¦‚ä½•é…ç½®åº”ç”¨ç¨‹åº</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•</li></ul><h3 id="2ï¼‰æ“ä½œç³»ç»Ÿ"><a href="#2ï¼‰æ“ä½œç³»ç»Ÿ" class="headerlink" title="2ï¼‰æ“ä½œç³»ç»Ÿ"></a>2ï¼‰æ“ä½œç³»ç»Ÿ</h3><p>ä½œä¸º DevOps å·¥ç¨‹å¸ˆï¼Œä½ è´Ÿè´£å‡†å¤‡åœ¨æ“ä½œç³»ç»Ÿä¸Šéƒ¨ç½²åº”ç”¨ç¨‹åºçš„æ‰€éœ€è¦çš„åŸºç¡€ç»“æ„ç¯å¢ƒã€‚å¹¶ä¸”ç”±äºå¤§å¤šæ•°æœåŠ¡å™¨æ˜¯ Linux æœåŠ¡å™¨ï¼Œå› æ­¤ä½ éœ€è¦äº†è§£ Linux æ“ä½œç³»ç»Ÿï¼Œå¹¶å–„äºä½¿ç”¨å‘½ä»¤è¡Œï¼Œæ‰€ä»¥ä½ éœ€è¦çŸ¥é“ï¼š</p><ul><li>åŸºæœ¬çš„ Shell å‘½ä»¤</li><li>Linux æ–‡ä»¶ç³»ç»Ÿ</li><li>ç®¡ç†æœåŠ¡å™¨çš„åŸºç¡€çŸ¥è¯†</li><li>SSH å¯†é’¥ç®¡ç†</li><li>åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ä¸åŒçš„å·¥å…·</li></ul><h3 id="3ï¼‰ç½‘ç»œä¸å®‰å…¨"><a href="#3ï¼‰ç½‘ç»œä¸å®‰å…¨" class="headerlink" title="3ï¼‰ç½‘ç»œä¸å®‰å…¨"></a>3ï¼‰ç½‘ç»œä¸å®‰å…¨</h3><p>ä½ è¿˜éœ€è¦äº†è§£ç½‘ç»œå’Œå®‰å…¨æ€§çš„åŸºç¡€çŸ¥è¯†æ‰èƒ½é…ç½®åŸºç¡€æ¶æ„ï¼Œä¾‹å¦‚ï¼š</p><ul><li>é…ç½®é˜²ç«å¢™ä»¥ä¿æŠ¤åº”ç”¨ç¨‹åº</li><li>äº†è§£ IP åœ°å€ï¼Œç«¯å£å’Œ DNS çš„å·¥ä½œæ–¹å¼</li><li>è´Ÿè½½å‡è¡¡å™¨</li><li>ä»£ç†æœåŠ¡å™¨</li><li>HTTP&#x2F;HTTPS</li></ul><p>ä½†æ˜¯ï¼Œè¦åœ¨ DevOps å’Œ IT Operations ä¹‹é—´åˆ’æ¸…ç•Œçº¿ï¼Œä½ ä¸æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ã€‚å› æ­¤ï¼Œåœ¨è¿™é‡Œä¸éœ€è¦é«˜çº§çŸ¥è¯†ï¼Œç†è§£å’Œäº†è§£åŸºæœ¬çŸ¥è¯†å°±å¤Ÿäº†ã€‚IT æ–¹é¢æ˜¯è¿™äº› SysAdminsï¼ŒNetworking æˆ– Security Engineers äººçš„ä¸“é•¿ã€‚</p><h3 id="4ï¼‰å®¹å™¨åŒ–"><a href="#4ï¼‰å®¹å™¨åŒ–" class="headerlink" title="4ï¼‰å®¹å™¨åŒ–"></a>4ï¼‰å®¹å™¨åŒ–</h3><p>éšç€å®¹å™¨æˆä¸ºæ–°æ ‡å‡†ï¼Œä½ å¯èƒ½ä¼šå°†åº”ç”¨ç¨‹åºä½œä¸ºå®¹å™¨è¿è¡Œï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦å¤§è‡´äº†è§£ï¼š</p><ul><li>è™šæ‹ŸåŒ–çš„æ¦‚å¿µ</li><li>å®¹å™¨çš„æ¦‚å¿µ</li><li>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼Ÿ Docker - å½“ä»Šæœ€å—æ¬¢è¿çš„å®¹å™¨æŠ€æœ¯</li></ul><h3 id="5ï¼‰æŒç»­é›†æˆå’Œéƒ¨ç½²"><a href="#5ï¼‰æŒç»­é›†æˆå’Œéƒ¨ç½²" class="headerlink" title="5ï¼‰æŒç»­é›†æˆå’Œéƒ¨ç½²"></a>5ï¼‰æŒç»­é›†æˆå’Œéƒ¨ç½²</h3><p>åœ¨ DevOps ä¸­ï¼Œæ‰€æœ‰ä»£ç æ›´æ”¹ï¼ˆä¾‹å¦‚å¼€å‘äººå‘˜çš„æ–°åŠŸèƒ½å’Œé”™è¯¯ä¿®å¤ï¼‰éƒ½åº”é›†æˆåˆ°ç°æœ‰åº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶ä»¥è‡ªåŠ¨åŒ–æ–¹å¼è¿ç»­åœ°éƒ¨ç½²åˆ°æœ€ç»ˆç”¨æˆ·ã€‚å› æ­¤ï¼Œå»ºç«‹å®Œæ•´çš„ CI&#x2F;CD ç®¡é“æ˜¯ DevOps å·¥ç¨‹å¸ˆçš„ä¸»è¦ä»»åŠ¡å’ŒèŒè´£ã€‚</p><p>åœ¨å®ŒæˆåŠŸèƒ½æˆ–é”™è¯¯ä¿®æ­£åï¼Œåº”è‡ªåŠ¨è§¦å‘åœ¨ CI æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ Jenkins ï¼‰ä¸Šè¿è¡Œçš„ç®¡é“ï¼Œè¯¥ç®¡é“ï¼š</p><ul><li>è¿è¡Œæµ‹è¯•</li><li>æ‰“åŒ…åº”ç”¨ç¨‹åº</li><li>æ„å»º Docker é•œåƒ</li><li>å°† Docker Image æ¨é€åˆ°å·¥ä»¶å­˜å‚¨åº“ï¼Œæœ€å</li><li>å°†æ–°ç‰ˆæœ¬éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆå¯ä»¥æ˜¯å¼€å‘ï¼Œæµ‹è¯•æˆ–ç”Ÿäº§æœåŠ¡å™¨ï¼‰</li></ul><p>å› æ­¤ï¼Œä½ éœ€è¦åœ¨æ­¤å¤„å­¦ä¹ æŠ€èƒ½ï¼š</p><ul><li>è®¾ç½® CI&#x2F;CD æœåŠ¡å™¨</li><li>æ„å»ºå·¥å…·å’Œç¨‹åºåŒ…ç®¡ç†å™¨å·¥å…·ä»¥æ‰§è¡Œæµ‹è¯•å¹¶æ‰“åŒ…åº”ç”¨ç¨‹åº</li><li>é…ç½®å·¥ä»¶å­˜å‚¨åº“ï¼ˆä¾‹å¦‚ Nexusï¼ŒArtifactoryï¼‰</li></ul><p>å½“ç„¶ï¼Œå¯ä»¥é›†æˆæ›´å¤šçš„æ­¥éª¤ï¼Œä½†æ˜¯æ­¤æµç¨‹ä»£è¡¨ CI&#x2F;CD ç®¡é“çš„æ ¸å¿ƒï¼Œå¹¶ä¸”æ˜¯ DevOps ä»»åŠ¡å’ŒèŒè´£çš„æ ¸å¿ƒã€‚</p><p>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼ŸJenkins æ˜¯æœ€å—æ¬¢è¿çš„äººä¹‹ä¸€ã€‚å…¶ä»–ï¼šBambooï¼ŒGitlabï¼ŒTeamCityï¼ŒCircleCIï¼ŒTravisCIã€‚</p><h3 id="6ï¼‰äº‘æä¾›å•†"><a href="#6ï¼‰äº‘æä¾›å•†" class="headerlink" title="6ï¼‰äº‘æä¾›å•†"></a>6ï¼‰äº‘æä¾›å•†</h3><p>å¦‚ä»Šï¼Œè®¸å¤šå…¬å¸æ­£åœ¨ä½¿ç”¨äº‘ä¸Šçš„è™šæ‹ŸåŸºç¡€æ¶æ„ï¼Œè€Œä¸æ˜¯ç®¡ç†è‡ªå·±çš„åŸºç¡€æ¶æ„ã€‚è¿™äº›æ˜¯åŸºç¡€æ¶æ„å³æœåŠ¡ï¼ˆIaaSï¼‰å¹³å°ï¼Œå¯æä¾›ä¸€ç³»åˆ—æœåŠ¡ï¼Œä¾‹å¦‚å¤‡ä»½ï¼Œå®‰å…¨æ€§ï¼Œè´Ÿè½½å¹³è¡¡ç­‰ã€‚</p><p>å› æ­¤ï¼Œä½ éœ€è¦å­¦ä¹ äº‘å¹³å°çš„æœåŠ¡ã€‚ä¾‹å¦‚ã€‚å¯¹äº AWSï¼Œä½ åº”è¯¥äº†è§£ä»¥ä¸‹åŸºæœ¬çŸ¥è¯†ï¼š</p><ul><li>IAM æœåŠ¡-ç®¡ç†ç”¨æˆ·å’Œæƒé™</li><li>VPC æœåŠ¡-ä½ çš„ä¸“ç”¨ç½‘ç»œ</li><li>EC2 æœåŠ¡-è™šæ‹ŸæœåŠ¡å™¨</li><li>AWS æä¾›äº†æ›´å¤šçš„æœåŠ¡ï¼Œä½†æ˜¯ä½ åªéœ€è¦äº†è§£ä½ å®é™…éœ€è¦çš„æœåŠ¡å³å¯ã€‚ä¾‹å¦‚ï¼Œå½“ K8s é›†ç¾¤åœ¨ AWS ä¸Šè¿è¡Œæ—¶ï¼Œä½ è¿˜éœ€è¦å­¦ä¹  EKS æœåŠ¡ã€‚</li></ul><p>AWS æ˜¯åŠŸèƒ½æœ€å¼ºå¤§ï¼Œä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ï¼Œä½†ä¹Ÿæ˜¯æœ€å›°éš¾çš„ä¸€ç§ã€‚</p><p>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼ŸAWS æ˜¯æœ€å—æ¬¢è¿çš„ä¸€ç§ã€‚å…¶ä»–çƒ­é—¨ï¼šAzureï¼ŒGoogle Cloudï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ã€‚</p><h3 id="7ï¼‰å®¹å™¨ç¼–æ’"><a href="#7ï¼‰å®¹å™¨ç¼–æ’" class="headerlink" title="7ï¼‰å®¹å™¨ç¼–æ’"></a>7ï¼‰å®¹å™¨ç¼–æ’</h3><p>å¦‚å‰æ‰€è¿°ï¼Œå®¹å™¨å·²è¢«å¹¿æ³›ä½¿ç”¨ï¼Œåœ¨å¤§å…¬å¸ä¸­ï¼Œæˆç™¾ä¸Šåƒä¸ªå®¹å™¨æ­£åœ¨å¤šå°æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œè¿™æ„å‘³ç€éœ€è¦ä»¥æŸç§æ–¹å¼ç®¡ç†è¿™äº›å®¹å™¨ã€‚</p><p>ä¸ºæ­¤ç›®çš„ï¼Œæœ‰ä¸€äº›å®¹å™¨ç¼–æ’å·¥å…·ï¼Œè€Œæœ€å—æ¬¢è¿çš„æ˜¯ Kubernetesã€‚å› æ­¤ï¼Œä½ éœ€è¦å­¦ä¹ ï¼š</p><ul><li>Kubernetes å¦‚ä½•å·¥ä½œ</li><li>ç®¡ç†å’Œç®¡ç† Kubernetes é›†ç¾¤</li><li>å¹¶åœ¨å…¶ä¸­éƒ¨ç½²åº”ç”¨ç¨‹åº</li></ul><p>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼ŸKubernetes - æœ€å—æ¬¢è¿ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p><h3 id="8ï¼‰ç›‘è§†å’Œæ—¥å¿—ç®¡ç†"><a href="#8ï¼‰ç›‘è§†å’Œæ—¥å¿—ç®¡ç†" class="headerlink" title="8ï¼‰ç›‘è§†å’Œæ—¥å¿—ç®¡ç†"></a>8ï¼‰ç›‘è§†å’Œæ—¥å¿—ç®¡ç†</h3><p>è½¯ä»¶æŠ•å…¥ç”Ÿäº§åï¼Œå¯¹å…¶è¿›è¡Œç›‘è§†ä»¥è·Ÿè¸ªæ€§èƒ½ï¼Œå‘ç°åŸºç¡€ç»“æ„ä»¥åŠåº”ç”¨ç¨‹åºä¸­çš„é—®é¢˜éå¸¸é‡è¦ã€‚å› æ­¤ï¼Œä½œä¸º DevOps å·¥ç¨‹å¸ˆçš„èŒè´£ä¹‹ä¸€æ˜¯ï¼š</p><ul><li>è®¾ç½®è½¯ä»¶ç›‘æ§</li><li>è®¾ç½®åŸºç¡€æ¶æ„ç›‘æ§ï¼Œä¾‹å¦‚ç”¨äºä½ çš„ Kubernetes é›†ç¾¤å’Œåº•å±‚æœåŠ¡å™¨ã€‚</li></ul><p>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼ŸPrometheus, Grafanaâ€¦</p><h3 id="9ï¼‰åŸºç¡€è®¾æ–½å³ä»£ç "><a href="#9ï¼‰åŸºç¡€è®¾æ–½å³ä»£ç " class="headerlink" title="9ï¼‰åŸºç¡€è®¾æ–½å³ä»£ç "></a>9ï¼‰åŸºç¡€è®¾æ–½å³ä»£ç </h3><p>æ‰‹åŠ¨åˆ›å»ºå’Œç»´æŠ¤åŸºç¡€æ¶æ„éå¸¸è€—æ—¶ä¸”å®¹æ˜“å‡ºé”™ï¼Œå°¤å…¶æ˜¯å½“ä½ éœ€è¦å¤åˆ¶åŸºç¡€æ¶æ„æ—¶ï¼Œä¾‹å¦‚ç”¨äºå¼€å‘ï¼Œæµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒã€‚</p><p>åœ¨ DevOps ä¸­ï¼Œå¸Œæœ›å°½å¯èƒ½åœ°è‡ªåŠ¨åŒ–ï¼Œé‚£å°±æ˜¯å°†â€œåŸºç¡€ç»“æ„å³ä»£ç ï¼ˆInfrastructure as Configurationï¼‰â€å¼•å…¥å…¶ä¸­ã€‚å› æ­¤ä½¿ç”¨ IaC ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»£ç æ¥åˆ›å»ºå’Œé…ç½®åŸºç¡€ç»“æ„ï¼Œä½ éœ€è¦äº†è§£ä¸¤ç§ IaC æ–¹å¼ï¼š</p><ul><li>åŸºç¡€è®¾æ–½é…ç½®</li><li>é…ç½®ç®¡ç†</li></ul><p>ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¯ä»¥è½»æ¾åœ°å¤åˆ¶å’Œæ¢å¤åŸºç¡€ç»“æ„ã€‚å› æ­¤ï¼Œä½ åº”è¯¥åœ¨æ¯ä¸ªç±»åˆ«ä¸­éƒ½çŸ¥é“ä¸€ç§å·¥å…·ï¼Œä»¥ä½¿è‡ªå·±çš„å·¥ä½œæ›´æœ‰æ•ˆç‡ï¼Œå¹¶æ”¹å–„ä¸åŒäº‹çš„åä½œã€‚</p><p>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼Ÿ</p><p>åŸºç¡€æ¶æ„è®¾ç½®ï¼šTerraform æ˜¯æœ€å—æ¬¢è¿çš„ä¸€ç§ã€‚<br>é…ç½®ç®¡ç†ï¼šAnsibleï¼ŒPuppetï¼ŒChefã€‚</p><h3 id="10ï¼‰è„šæœ¬è¯­è¨€"><a href="#10ï¼‰è„šæœ¬è¯­è¨€" class="headerlink" title="10ï¼‰è„šæœ¬è¯­è¨€"></a>10ï¼‰è„šæœ¬è¯­è¨€</h3><p>ä½œä¸º DevOps å·¥ç¨‹å¸ˆå°±å¸¸è§çš„å·¥ä½œå°±æ˜¯ç¼–å†™è„šæœ¬å’Œå°å‹çš„åº”ç”¨ç¨‹åºä»¥è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚ä¸ºäº†èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦äº†è§£ä¸€ç§è„šæœ¬æˆ–ç¼–ç¨‹è¯­è¨€ã€‚</p><p>è¿™å¯èƒ½æ˜¯ç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„è„šæœ¬è¯­è¨€ï¼Œä¾‹å¦‚ bash æˆ– Powershellã€‚</p><p>è¿˜éœ€è¦æŒæ¡ä¸€ç§ç‹¬ç«‹äºæ“ä½œç³»ç»Ÿçš„è¯­è¨€ï¼Œä¾‹å¦‚ Python æˆ– Goã€‚è¿™äº›è¯­è¨€åŠŸèƒ½æ›´å¼ºå¤§ï¼Œæ›´çµæ´»ã€‚å¦‚æœä½ å–„äºä½¿ç”¨å…¶ä¸­ä¹‹ä¸€ï¼Œå®ƒå°†ä½¿ä½ åœ¨å°±ä¸šå¸‚åœºä¸Šæ›´å…·ä»·å€¼ã€‚</p><p>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼ŸPythonï¼šç›®å‰æ˜¯æœ€éœ€è¦çš„ä¸€ä¸ªï¼Œå®ƒæ˜“äºå­¦ä¹ ï¼Œæ˜“äºé˜…è¯»å¹¶ä¸”å…·æœ‰è®¸å¤šå¯ç”¨çš„åº“ã€‚å…¶ä»–ï¼šGoï¼ŒNodeJSï¼ŒRubyã€‚</p><h3 id="11ï¼‰ç‰ˆæœ¬æ§åˆ¶"><a href="#11ï¼‰ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="11ï¼‰ç‰ˆæœ¬æ§åˆ¶"></a>11ï¼‰ç‰ˆæœ¬æ§åˆ¶</h3><p>ä¸Šè¿°æ‰€æœ‰è¿™äº›è‡ªåŠ¨åŒ–é€»è¾‘éƒ½ä½œä¸ºä»£ç ç¼–å†™ï¼Œä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆä¾‹å¦‚Gitï¼‰æ¥ç®¡ç†è¿™äº›ä»£ç å’Œé…ç½®æ–‡ä»¶ã€‚</p><p>å­¦ä¹ å“ªä¸ªå·¥å…·ï¼ŸGit - æœ€å—æ¬¢è¿å’Œå¹¿æ³›ä½¿ç”¨ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p><blockquote><p><a href="https://dev.to/techworld_with_nana/devops-roadmap-2021-how-to-become-a-devops-engineer-1n9p">DevOps Roadmap [2021] - How to become a DevOps Engineer</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢„æµ‹ 2021 å¹´çš„ DevOps è¶‹åŠ¿</title>
      <link href="/2021/01/devops-trends-in-2021/"/>
      <url>/2021/01/devops-trends-in-2021/</url>
      
        <content type="html"><![CDATA[<p>DevOps å·²ç»èµ°äº†å¾ˆé•¿ä¸€æ®µè·¯ï¼Œæ¯«æ— ç–‘é—®ï¼Œå®ƒå°†åœ¨ä»Šå¹´ç»§ç»­å‘å…‰ã€‚ç”±äºè®¸å¤šå…¬å¸éƒ½åœ¨å¯»æ±‚æœ‰å…³æ•°å­—åŒ–è½¬å‹çš„æœ€ä½³å®è·µï¼Œå› æ­¤é‡è¦çš„æ˜¯è¦äº†è§£é¢†å¯¼è€…è®¤ä¸ºè¡Œä¸šå‘å±•çš„æ–¹å‘ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼Œä»¥ä¸‹æ–‡ç« æ˜¯ DevOps é¢†å¯¼è€…å¯¹ DevOps è¶‹åŠ¿çš„å›åº”çš„é›†åˆï¼Œéœ€è¦åœ¨ 2021 å¹´å…³æ³¨ã€‚</p><p>è®©æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬æ¯ä¸ªäººå¯¹æ¥å¹´çš„ DevOps æœ‰ä½•è¯„ä»·ã€‚</p><ol><li>è¿ç§»åˆ°å¾®æœåŠ¡å°†æˆä¸ºå¿…é¡» â€”â€” Wipro Limited é¦–å¸­ DevOps å·¥ç¨‹å¸ˆ</li></ol><p>â€œä»æ•´ä½“è¿ç§»åˆ°å¾®æœåŠ¡å’Œå®¹å™¨åŒ–æ¶æ„å¯¹äºæ‰€æœ‰å…¬å¸çš„æ•°å­—åŒ–è½¬å‹ä¹‹æ—…éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå®ƒä¸å†æ˜¯ä¸€ä¸ªé€‰æ‹©æˆ–é€‰é¡¹ã€‚è¿™å°±æ˜¯Kubernetes çš„é‡‡ç”¨ç‡å°†ä¸Šå‡çš„åœ°æ–¹ï¼Œå½“ç»„ç»‡è¿ç§»åˆ°å¤šé‡äº‘æ—¶ï¼ŒTerraform å°†æˆä¸ºå®ç°åŸºç¡€æ¶æ„è‡ªåŠ¨åŒ–çš„æœ€ç»ˆé€‰æ‹©ã€‚â€</p><ol start="2"><li>Hybridå°†æˆä¸ºéƒ¨ç½²è§„èŒƒ â€”â€” JFrog å¼€å‘äººå‘˜å…³ç³» VP</li></ol><p>â€œ2020å¹´å°†åŠ é€Ÿè¿œç¨‹å·¥ä½œï¼ŒåŠ å¿«å‘äº‘çš„è¿ç§»ï¼Œå¹¶å°† DevOps ä»æœ€ä½³å®è·µè½¬å˜ä¸ºæ¯ä¸ªä¸šåŠ¡çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚éšç€æˆ‘ä»¬è¿›å…¥2021å¹´ï¼Œè¯¥è¡Œä¸šå°†åœ¨å¤šä¸ªæ–¹é¢æ‹¥æŠ±Hybridã€‚é¦–å…ˆï¼Œä¼ä¸šå°†å®Œå…¨é‡‡ç”¨æ··åˆå‹åŠ³åŠ¨åŠ›ï¼Œå°†è¿œç¨‹å·¥ä½œå’Œç°åœºå›¢é˜Ÿåä½œçš„ä¼˜åŠ¿ç›¸ç»“åˆã€‚ å…¶æ¬¡ï¼Œå•†ä¸šæ¨¡å¼å°†å˜å¾—æ··åˆï¼Œä¾‹å¦‚å°†è™šæ‹Ÿè§„æ¨¡ä¸æœ¬åœ°ç½‘ç»œåˆå¹¶çš„ä¼šè®®ã€‚æœ€ç»ˆï¼Œéšç€å…¬å¸å¯¹å †æ ˆè¿›è¡Œç°ä»£åŒ–ä»¥åˆ©ç”¨äº‘åŸç”ŸæŠ€æœ¯çš„ä¼˜åŠ¿ï¼Œæ··åˆå°†æˆä¸ºéƒ¨ç½²è§„èŒƒï¼Œä½†è¦æ„è¯†åˆ°å¹¶éæ‰€æœ‰äº‹ç‰©éƒ½å¯ä»¥è¿ç§»åˆ°å¤–éƒ¨ã€‚2021å¹´çš„èµ¢å®¶å°†æ˜¯æ‹¥æŠ±ä¸šåŠ¡ï¼Œæ¨¡å‹å’Œäº§å“æ··åˆçš„å…¬å¸ã€‚â€</p><ol start="3"><li>DataOpså°†è“¬å‹ƒå‘å±• - ä¹å¤©é«˜çº§ DevOps å·¥ç¨‹å¸ˆ</li></ol><p>â€œDataOps è‚¯å®šä¼šåœ¨ 2021 å¹´è“¬å‹ƒå‘å±•ï¼ŒCOVID å¯èƒ½ä¼šåœ¨å…¶ä¸­å‘æŒ¥ä½œç”¨ã€‚ç”±äº COVID å’Œ WFH çš„æƒ…å†µï¼Œæ•°å­—å†…å®¹çš„æ¶ˆè´¹é‡çŒ›å¢ï¼Œè¿™è¦æ±‚è‡ªåŠ¨ç¼©æ”¾å’Œè‡ªæˆ‘ä¿®å¤ç³»ç»Ÿçš„è‡ªåŠ¨åŒ–è¾¾åˆ°æ–°æ°´å¹³ï¼Œä»¥æ»¡è¶³å¢é•¿å’Œéœ€æ±‚ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒDevOps è®¾ç½®çš„ç³»ç»Ÿä»…ç”¨äºæ—¥å¿—è®°å½•ï¼Œç›‘è§†å’Œè­¦æŠ¥ï¼ˆELK&#x2F;EFK å †æ ˆï¼ŒPrometheus&#x2F;Grafana&#x2F;Alertmanagerç­‰ï¼‰ã€‚ç°åœ¨ï¼ŒDevOps ç°åœ¨åº”è¯¥åŠ å¼ºå¹¶ä½¿ç”¨å¯ç”¨æ•°æ®å’ŒæŒ‡æ ‡æ¥ äº§ç”Ÿæœ‰ä»·å€¼çš„è§è§£ï¼Œå­¦ä¹ å¹¶åº”ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹æ¥é¢„æµ‹äº‹ä»¶æˆ–ä¸­æ–­ï¼Œå¼€å‘ä»æ•°æ®ä¸­å­¦ä¹ è‡ªèº«å¹¶é¢„æµ‹èƒ½åŠ›çš„è‡ªåŠ¨åŒ–ä»¥æ”¹è¿›é¢„ç®—è®¡åˆ’ã€‚è®¸å¤šäººå·²ç»å¼€å§‹å¯¹æ­¤éƒ¨åˆ†è°ƒç”¨ MLOps&#x2F;AIOpsã€‚â€</p><ol start="4"><li>å¼¹æ€§æµ‹è¯•å°†æˆä¸ºä¸»æµ â€”â€” Neotys äº§å“è´Ÿè´£äºº</li></ol><p>ä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œå¯è§‚å¯Ÿæ€§ï¼Œæ€§èƒ½æµ‹è¯•å’Œå¼¹æ€§æµ‹è¯•ä¹‹é—´çš„äº¤å‰ç‚¹å°†æˆä¸ºä¸»æµã€‚ éšç€ AWS å’Œ Google ç­‰ WW é¢†å¯¼è€…æœ€è¿‘å‘å¸ƒçš„ Ops é—®é¢˜ï¼Œä»¥åŠå„ä¸ªé¢†åŸŸçš„æ•°å­—åŒ–è½¬å‹éƒ½åœ¨åŠ é€Ÿå‘å±•ï¼Œå¸‚åœºå°†é€æ¸æ„è¯†åˆ°ï¼Œå…¬å…±æˆ–ç§æœ‰äº‘å½¢å¼æä¾›çš„æ— é™å¯æ‰©å±•æ€§æ˜¯ä¸å¤Ÿçš„ã€‚â€ - Neotys äº§å“è´Ÿè´£äºº Patrick Wolf</p><ol start="5"><li>GitOps å°†æˆä¸ºå¸¸æ€ â€”â€” æ¢…è¥¿ç™¾è´§çš„é¦–å¸­æ¶æ„å¸ˆ</li></ol><p>â€œä¸€ä¸ªâ€œæ„å»ºï¼Œæ‹¥æœ‰ï¼Œæ‹¥æœ‰â€çš„å¼€å‘è¿‡ç¨‹éœ€è¦å¼€å‘äººå‘˜çŸ¥é“å’Œç†è§£çš„å·¥å…·ã€‚GitOps æ˜¯ DevOps å¦‚ä½•ä½¿ç”¨å¼€å‘äººå‘˜å·¥å…·æ¥é©±åŠ¨æ“ä½œçš„åç§°ã€‚</p><p>GitOps æ˜¯ä¸€ç§è¿›è¡ŒæŒç»­äº¤ä»˜çš„æ–¹æ³•ã€‚ æ›´å…·ä½“åœ°è¯´ï¼Œå®ƒæ˜¯ç”¨äºæ„å»ºç»Ÿä¸€éƒ¨ç½²ï¼Œç›‘è§†å’Œç®¡ç†çš„ Cloud Native åº”ç”¨ç¨‹åºçš„æ“ä½œæ¨¡å‹ã€‚ å®ƒé€šè¿‡å°† Git ç”¨ä½œå£°æ˜æ€§åŸºç¡€ç»“æ„å’Œåº”ç”¨ç¨‹åºçš„çœŸå®æ¥æºæ¥å·¥ä½œã€‚ å½“åœ¨ Git ä¸­æ¨é€å’Œæ‰¹å‡†æäº¤æ—¶ï¼Œè‡ªåŠ¨åŒ–çš„ CI&#x2F;CD ç®¡é“å°†å¯¹ä½ çš„åŸºç¡€æ¶æ„è¿›è¡Œæ›´æ”¹ã€‚å®ƒè¿˜åˆ©ç”¨å·®å¼‚å·¥å…·å°†å®é™…ç”Ÿäº§çŠ¶æ€ä¸æºä»£ç æ§åˆ¶ä¸‹çš„ç”Ÿäº§çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åœ¨å‡ºç°å·®å¼‚æ—¶æé†’ä½ ã€‚GitOps çš„æœ€ç»ˆç›®æ ‡æ˜¯åŠ å¿«å¼€å‘é€Ÿåº¦ï¼Œä»¥ä¾¿ä½ çš„å›¢é˜Ÿå¯ä»¥å®‰å…¨å¯é åœ°å¯¹ Kubernetes ä¸­è¿è¡Œçš„å¤æ‚åº”ç”¨ç¨‹åºè¿›è¡Œæ›´æ”¹å’Œæ›´æ–°ã€‚â€ -æ¢…è¥¿ç™¾è´§ï¼ˆMacyâ€™sï¼‰é¦–å¸­å»ºç­‘å¸ˆ Soumen Sarkar</p><ol start="6"><li>å°†ä¼šæœ‰æ›´å¤šçš„è¿ç§»åˆ°æ— æœåŠ¡å™¨ â€”â€” ADP Lifion çš„ç«™ç‚¹ SRE ç»ç†</li></ol><p>â€œ2021 å¹´å°†æ˜¯æ³¨è§†æ›´å¤šè¿ç§»åˆ°æ— æœåŠ¡å™¨çš„ä¸€å¹´ã€‚å¦‚æœå®¹å™¨å’Œä¸šåŠ¡æµç¨‹æ˜¯ Z ä»£.. é‚£ä¹ˆæ— æœåŠ¡å™¨çš„å®æ—¶è´Ÿè½½å°†æ˜¯ Gen+ .. ä»…åœ¨ä½ ä½¿ç”¨æ—¶ä½¿ç”¨å’Œä»˜æ¬¾å¯èƒ½çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„.. ä½†è¯·è€ƒè™‘è¿è¡ŒåŸºäº k8s pod çš„å¾®æœåŠ¡ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶åœ¨æ— æœåŠ¡å™¨ä¸Šè¿è¡Œç›¸åŒçš„æœåŠ¡ã€‚â€ - ADP Lifion ç½‘ç«™å¯é æ€§å·¥ç¨‹ç»ç† Shivaramakrishnan G</p><ol start="7"><li>NoOps å‡ºç° â€”â€” ClickIT Smart Technologies çš„ CEO</li></ol><p>â€œæˆ‘å¸Œæœ›å‡ºç°æ›´å¤šæ‰˜ç®¡æœåŠ¡ï¼Œå¹¶å‡å°‘æˆ‘ä»¬çš„ DevOps è¿è¥å¹¶å‡å°‘å®¢æˆ·çš„è¿è¥æ”¯å‡ºã€‚æ›´å¤šæ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œæ›´å¤šæ— æœåŠ¡å™¨æœåŠ¡ï¼Œä¾‹å¦‚ Aurora æ— æœåŠ¡å™¨ï¼ŒFargateï¼ŒAmazon S3 å’Œæ— æœåŠ¡å™¨é™æ€ç½‘ç«™ã€‚æ•°æ®ä¸­å¿ƒä¸­çš„ Amazon ECS&#x2F;EKSï¼ˆæ–°ç‰ˆæœ¬ reï¼šinvent 2020ï¼‰ä»¥åŠäº‘ç®¡ç†æœåŠ¡ï¼Œå¯è®©ä½ å‡å°‘æ•°æ®ä¸­å¿ƒçš„ç»´æŠ¤å’Œå¼€å‘ã€‚åŒæ ·ï¼Œå°†æ›´å¤šäº‘åŸç”Ÿçš„åŸç†å’ŒåŠŸèƒ½ç§»æ¤åˆ°æ•°æ®ä¸­å¿ƒï¼Œä¾‹å¦‚ã€‚äº²æˆšã€‚â€  - ClickIT Smart Technologies é¦–å¸­æ‰§è¡Œå®˜ Alfonso Valdes</p><ol start="8"><li>BizDevOps å°†å¤§æ”¾å¼‚å½© â€”â€” Petco çš„ DevOps ç»ç†</li></ol><p>â€œåœ¨æ¶æ„å’Œå…¬å¸å±‚æ¬¡ç»“æ„æ–¹é¢æœç€æˆæœ¬ä¼˜åŒ–çš„æ–¹å‘å‘å±•-éšç€ä¸šåŠ¡çš„å‘å±•ï¼ŒDevOps çš„ä»·å€¼ä¸æ–­æé«˜ã€‚</p><p>ä¸“æ³¨äºçµæ´»çš„ï¼Œäº‘åŸç”Ÿçš„æ¶æ„å’Œå·¥å…·ï¼Œè¿™äº›åŠŸèƒ½ä¸€æ—¦å…·å¤‡äº†â€œå¤§ä½¬â€çš„èƒ½åŠ›ï¼Œå°±å¯ä»¥æ‰“åŒ…æˆå°å‹ä¼ä¸šä½¿ç”¨çš„åŒ…è£…ï¼ˆSnowflake æˆ– Hazelcast ä¸ Oracle&#x2F;Teradataï¼‰</p><p>FaaS æ‰åˆšåˆšèµ·æ­¥ï¼ˆæ— æœåŠ¡å™¨ï¼ŒLambda ç­‰ï¼‰- è¿è¥é—®é¢˜æ­£åœ¨å¾—åˆ°è§£å†³ï¼Œäººä»¬æ­£åœ¨æ„è¯†åˆ°æ½œåŠ›ã€‚â€</p><ol start="9"><li>åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰çš„åœ°ä½å°†æ›´é«˜ â€”â€” æ²ƒå°”æ²ƒé«˜çº§è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆ</li></ol><p>â€œåŸºç¡€æ¶æ„å³ä»£ç ï¼ˆIaCï¼‰ï¼šäº‘ä¸­ DevOps çš„æ ¸å¿ƒåŸåˆ™ã€‚ä½ çš„åŸºç¡€æ¶æ„æœ¬åœ°æˆ–äº‘ä¸­çš„æœåŠ¡å™¨ï¼Œç½‘ç»œå’Œå­˜å‚¨è®¾å¤‡ï¼ˆå®šä¹‰ä¸ºä»£ç ï¼‰ã€‚è¿™ä½¿å…¬å¸å¯ä»¥è‡ªåŠ¨åŒ–å¹¶ç®€åŒ–å…¶åŸºç¡€æ¶æ„ã€‚ IaC è¿˜æä¾›äº†ä¸€ä¸ªç®€å•çš„åŸºç¡€ç»“æ„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå¯è®©å›¢é˜Ÿåœ¨å‘ç”Ÿç¾éš¾æ€§æ•…éšœæ—¶å›é€€åˆ°â€œæœ‰æ•ˆçš„æœ€åé…ç½®â€ã€‚è¿™æ„å‘³ç€å¯ä»¥å¿«é€Ÿæ¢å¤å¹¶å‡å°‘åœæœºæ—¶é—´ã€‚â€</p><ol start="10"><li>è‡ªåŠ¨åŒ–å’Œæ··ä¹±å·¥ç¨‹å˜å¾—éå¸¸é‡è¦ â€”â€” ç›´å¸ƒç½—é™€å°åº¦å¼€å‘ä¸­å¿ƒçš„é›†å›¢å¼€å‘ç»ç†</li></ol><p>â€œä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨åŒ–çš„-æ„å»ºï¼Œéƒ¨ç½²ï¼Œæµ‹è¯•ï¼ŒåŸºç¡€æ¶æ„å’Œå‘å¸ƒã€‚</p><p>å…·æœ‰æ‰€éœ€è´¨é‡é—¨çš„ç”Ÿäº§çº¿ã€‚æ›´å¿«ï¼Œå¯é‡å¤ï¼Œå¯è‡ªå®šä¹‰å’Œå¯é çš„è‡ªåŠ¨åŒ–æ˜¯ä»»ä½•é¡¹ç›®æˆåŠŸçš„å…³é”®ã€‚æ··æ²Œå·¥ç¨‹-åœ¨å½“ä»Šæ··åˆåŸºç¡€è®¾æ–½ä¸–ç•Œä¸­éå¸¸å…³é”®çš„æ–¹é¢ã€‚ç³»ç»Ÿè¡Œä¸ºå’Œå®¢æˆ·ä½“éªŒç´§å¯†ç»“åˆåœ¨ä¸€èµ·ï¼Œä½ è¶Šæ—©å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œå°±è¶Šèƒ½ä¸ºå®¢æˆ·æä¾›æ›´å¥½çš„ä½“éªŒã€‚â€</p><ol start="11"><li>äº‘åŸç”Ÿæ–¹æ³•å°†è¢«æ ‡å‡†åŒ– â€”â€” Ben Sapp</li></ol><p>â€œç”±äºäº‘ç©ºé—´å·²ç»çœŸæ­£åœ°å‘å±•èµ·æ¥ï¼ˆæœ€è¿‘åå¹´å·¦å³ï¼‰ï¼Œå¹¶ä¸”å®¹å™¨åŒ–å·²æˆä¸ºè§„èŒƒï¼Œæ‰€ä»¥ä¸€åˆ‡éƒ½éå¸¸æ ‡å‡†åŒ–ï¼Œå‡ ä¹å°±åƒå¤§å‹æœºæ—¶ä»£ä¸€æ ·ã€‚</p><p>å½“ç„¶ï¼Œä¼šæœ‰è¶‹åŠ¿å’Œèµšé’±çš„æœºä¼šã€‚ä½†æ˜¯æˆ‘ä¸çŸ¥é“ä¸‹ä¸€ä¸ªå¤§ç ´åè€…æ˜¯ä»€ä¹ˆã€‚ç°åœ¨çš„ä¸€åˆ‡åŸºæœ¬ä¸Šéƒ½ä¸äº”å¹´å‰çš„æœ€ä½³åšæ³•ç›¸åŒï¼Œä½†æ›´åŠ å¯é ã€‚æˆ‘æƒ³è¶Šæ¥è¶Šå¤šçš„äººå°†ç»§ç»­ä»å® ç‰©è½¬ç§»åˆ°ç‰›èº«ä¸Šï¼Œå‰©ä¸‹è¯¸å¦‚ Ansible å’Œ puppet ä¹‹ç±»çš„å·¥å…·ä»…ç”¨äºæ‰“åŒ…ç¨‹åºå’Œäº‘ init æ¥æ„å»ºå®¹å™¨ä¸»æœºã€‚</p><p>imo æ˜¯è½¯ä»¶å¼€å‘çš„é»„é‡‘æ—¶ä»£ã€‚ DevOps å’Œäº‘åŸç”Ÿæ–¹æ³•å·²ç»å®ç°äº†è®¸å¤šç›®æ ‡ã€‚ç®¡é“ï¼Œæ‰˜ç®¡ï¼Œå­˜å‚¨ï¼Œè´Ÿè½½å¹³è¡¡â€¦â€¦è¿™äº›éƒ½åœ¨ 5 åˆ†é’Ÿä¹‹å†…è§£å†³äº†ã€‚â€</p><ol start="12"><li>å®‰å…¨å°†æˆä¸ºé‡ä¸­ä¹‹é‡ â€”â€” CloudSkiff</li></ol><p>â€œä» DevSecOps è§’åº¦ç»å¯¹è·Ÿè¸ªåŸºç¡€è®¾æ–½ä¸­ä¸å—æ§åˆ¶çš„å˜åŒ–ã€‚ä½œä¸ºä»£ç çš„åŸºç¡€æ¶æ„å¾ˆæ£’ï¼Œä½†æ˜¯æœ‰å¤ªå¤šå¯ç§»åŠ¨çš„éƒ¨åˆ†ï¼šä»£ç åº“ï¼ŒçŠ¶æ€æ–‡ä»¶ï¼Œå®é™…äº‘çŠ¶æ€ã€‚äº‹æƒ…å€¾å‘äºæ¼‚ç§»ã€‚è¿™äº›æ›´æ”¹å¯èƒ½æœ‰å¤šç§åŸå› ï¼šä»å¼€å‘äººå‘˜é€šè¿‡ Web æ§åˆ¶å°åˆ›å»ºæˆ–æ›´æ–°åŸºç¡€æ¶æ„è€Œä¸å‘ŠçŸ¥ä»»ä½•äººï¼Œåˆ°äº‘æä¾›å•†æ–¹é¢ä¸å—æ§åˆ¶çš„æ›´æ–°ã€‚å¤„ç†åŸºç¡€æ¶æ„æ¼‚ç§»ä¸ä»£ç åº“ä¹‹é—´çš„æŒ‘æˆ˜å¯èƒ½ä¼šå……æ»¡æŒ‘æˆ˜ã€‚â€ - CloudSkiff</p><ol start="13"><li>Chaos Engineering å°†å˜å¾—è¶Šæ¥è¶Šé‡è¦ â€”â€” International Technology Ventures çš„ CTO</li></ol><p>â€œåœ¨æ›´å¤šç»„ç»‡ä¸­çš„ DevOps è§„åˆ’è®¨è®ºä¸­ï¼Œæ··æ²Œå·¥ç¨‹å°†å˜å¾—è¶Šæ¥è¶Šé‡è¦ï¼ˆä¸”æ›´å¸¸è§ï¼‰ã€‚å¤§å¤šæ•°ç»„ç»‡é€šå¸¸ä¸æ‰§è¡Œæ··æ²Œå·¥ç¨‹å­¦ï¼ˆChaos Engineeringï¼‰ï¼Œå³åœ¨ç”Ÿäº§ä¸­å¯¹è½¯ä»¶ç³»ç»Ÿè¿›è¡Œå®éªŒä»¥å»ºç«‹å¯¹ç³»ç»ŸæŠµå¾¡åŠ¨è¡å’Œæ„å¤–æƒ…å†µèƒ½åŠ›çš„ä¿¡å¿ƒã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨ä¼ ç»Ÿçš„äº”ä¸ªæˆç†Ÿåº¦æ¨¡å‹æ¡†æ¶å†…è€ƒè™‘ DevOpsï¼Œé‚£ä¹ˆ Chaos Engineering å°†æ˜¯ç¬¬ 4 æˆ–ç¬¬ 5 çº§å­¦ç§‘ï¼Œå°†åŒ…å«åœ¨ DevOps å®è·µçš„ä¿æŠ¤èŒƒå›´å†…ã€‚æ­£å¦‚å°†å•ç‹¬çš„æµ‹è¯•&#x2F;è´¨é‡ä¿è¯å°ç»„çš„ä¼ ç»Ÿè§’è‰²çº³å…¥ DevOops çš„å­¦ç§‘ä¸€æ ·ï¼ŒChaos Engineering ä¹Ÿåº”å¦‚æ­¤ã€‚â€</p><ol start="14"><li>æ›´å…³æ³¨å³æ—¶æ—¥å¿—ä»¥å¿«é€ŸéªŒè¯æˆåŠŸæˆ–å¤±è´¥ â€”â€” ADESA å¹³å°ç¨³å®šæ€§æ€»ç›‘</li></ol><p>â€œåœ¨åæœŸéƒ¨ç½²ä¸­ä½¿ç”¨æ—¥å¿—æ¥éªŒè¯å‘å¸ƒæ˜¯å¦æˆåŠŸï¼Œæˆ–å­˜åœ¨ä¸¥é‡é”™è¯¯ã€‚äººä»¬éœ€è¦å»ºç«‹çš„æœ€å¤§è”ç³»æ˜¯å®šä¹‰æ‰‹åŠ¨æµç¨‹ï¼Œç„¶åå®ç°è‡ªåŠ¨åŒ–çš„å·¨å¤§é£è·ƒã€‚ä¸€é”®éƒ¨ç½²ï¼Œå³æ—¶æ—¥å¿—å¯å¿«é€ŸéªŒè¯æˆåŠŸæˆ–å¤±è´¥ï¼Œç„¶åè§¦å‘å›æ»šã€‚éšä¹‹è€Œæ¥çš„æ˜¯å¤æ‚æ€§ä»¥åŠè·¨æœåŠ¡ä¾èµ–æ€§ï¼Œæ˜¯å¦å¯ä»¥å›æ»šæŸäº›å†…å®¹ï¼Œæˆ–è€…æ˜¯å¦éœ€è¦å¯¹å…¶ä»–æœåŠ¡è¿›è¡Œè¿›ä¸€æ­¥æµ‹è¯•ã€‚æƒ³è±¡ä¸€ä¸‹ 100 ç§å¾®æœåŠ¡ï¼ˆåˆç§°ç®¡é“ï¼Œç”šè‡³è¿˜æœ‰ 100 ä¸ªå®¹å™¨ï¼‰ã€‚</p><p>ä½œä¸ºä¸€é¡¹ï¼Œæˆ‘æ€»æ˜¯åº†ç¥æˆåŠŸçš„å›æ»šï¼Œå› ä¸ºå®ƒä¸ä¼šå¯¹æœåŠ¡äº§ç”Ÿå½±å“ï¼Œè€Œä¸”æ˜¯æˆåŠŸçš„ã€‚â€ -ADESAå¹³å°ç¨³å®šæ€§æ€»ç›‘Craig Schultz</p><ol start="15"><li>DevSecOps å°†æˆä¸º DevOps çš„é»˜è®¤éƒ¨åˆ† â€”â€” JFrog çš„ DevOps æ¶æ„å¸ˆ</li></ol><p>DevSecOps çš„ â€œSecâ€ éƒ¨åˆ†å°†è¶Šæ¥è¶Šæˆä¸ºè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼ŒçœŸæ­£çš„å®‰å…¨æ€§ â€œå‘å·¦ç§»åŠ¨â€ æ–¹æ³•å°†æˆä¸ºæ–°çš„è§„èŒƒï¼ŒCI&#x2F;CD ç®¡é“ä¸­çš„ä¸“ç”¨å®‰å…¨æ€§æ­¥éª¤å°†æ›´å°‘ä»å¼€å‘äººå‘˜çš„ IDE åˆ°ä¾èµ–å…³ç³»å’Œé™æ€ä»£ç åˆ†æï¼Œå®‰å…¨å’Œè‡ªåŠ¨è¯†åˆ«å’Œé‡‡å–æªæ–½å°†æ˜¯æ‰€æœ‰æµç¨‹æ­¥éª¤çš„ä¸€éƒ¨åˆ†ã€‚åœ¨æ²¡æœ‰é€‚å½“ï¼ˆè‡ªåŠ¨ï¼Ÿï¼‰è§£å†³è¿™äº›é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå‘å¸ƒè½¯ä»¶ç»„ä»¶ã€‚çœŸæ­£çš„å®‰å…¨é—®é¢˜æ˜¯å…è´¹è½¯ä»¶ã€‚â€</p><p>å¸Œæœ›ä½ å–œæ¬¢æˆ‘ä»¬å¯¹ DevOps è¶‹åŠ¿çš„ä¸“å®¶ç»¼è¿°ï¼Œå¹¶åœ¨ 2021 å¹´å…³æ³¨ã€‚å¦‚æœä½ è®¤ä¸ºè¿™é‡Œç¼ºå°‘åº”è€ƒè™‘çš„å†…å®¹ï¼Œè¯·åœ¨è¯„è®ºä¸­åˆ†äº«ä½ çš„è§‚ç‚¹ã€‚</p><blockquote><p>åŸæ–‡ <a href="https://dzone.com/articles/15-devops-trends-to-expect-in-2021">15 DevOps Trends to Expect in 2021</a> çš„ç¿»è¯‘ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What&#39;s the difference between result and currentResult in Jenkins?</title>
      <link href="/2021/01/result-vs-currentresult/"/>
      <url>/2021/01/result-vs-currentresult/</url>
      
        <content type="html"><![CDATA[<blockquote><p>This is just a note to myself about the difference between Jenkins <code>result</code> and <code>currentResult</code>.</p></blockquote><h2 id="Declarative-Pipeline"><a href="#Declarative-Pipeline" class="headerlink" title="Declarative Pipeline"></a>Declarative Pipeline</h2><p>Here is a test code from this ticket <a href="https://issues.jenkins.io/browse/JENKINS-46325">JENKINS-46325</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent any</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage (<span class="string">&#x27;Init&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;Init result: <span class="variable">$&#123;currentBuild.result&#125;</span>&quot;</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;Init currentResult: <span class="variable">$&#123;currentBuild.currentResult&#125;</span>&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">            post &#123;</span><br><span class="line">                always &#123;</span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;Post-Init result: <span class="variable">$&#123;currentBuild.result&#125;</span>&quot;</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;Post-Init currentResult: <span class="variable">$&#123;currentBuild.currentResult&#125;</span>&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage (<span class="string">&#x27;Build&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;During Build result: <span class="variable">$&#123;currentBuild.result&#125;</span>&quot;</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;During Build currentResult: <span class="variable">$&#123;currentBuild.currentResult&#125;</span>&quot;</span></span><br><span class="line">                sh <span class="string">&#x27;exit 1&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            post &#123;</span><br><span class="line">                always &#123;</span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;Post-Build result: <span class="variable">$&#123;currentBuild.result&#125;</span>&quot;</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;Post-Build currentResult: <span class="variable">$&#123;currentBuild.currentResult&#125;</span>&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    post &#123;</span><br><span class="line">        always &#123;</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Pipeline result: <span class="variable">$&#123;currentBuild.result&#125;</span>&quot;</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Pipeline currentResult: <span class="variable">$&#123;currentBuild.currentResult&#125;</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Output</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Init result: null</span><br><span class="line">Init currentResult: SUCCESS</span><br><span class="line">Post-Init result: null</span><br><span class="line">Post-Init currentResult: SUCCESS</span><br><span class="line">During Build result: null</span><br><span class="line">During Build currentResult: SUCCESS</span><br><span class="line">[test-pipeline] Running shell script</span><br><span class="line">+ <span class="built_in">exit</span> 1</span><br><span class="line">Post-Build result: FAILURE</span><br><span class="line">Post-Build currentResult: FAILURE</span><br><span class="line">Pipeline result: FAILURE</span><br><span class="line">Pipeline currentResult: FAILURE</span><br><span class="line">ERROR: script returned <span class="built_in">exit</span> code 1</span><br><span class="line">Finished: FAILURE</span><br></pre></td></tr></table></figure><h2 id="Scripted-Pipeline"><a href="#Scripted-Pipeline" class="headerlink" title="Scripted Pipeline"></a>Scripted Pipeline</h2><p>Here is a test code from <a href="https://support.cloudbees.com/hc/en-us/articles/218554077-How-to-set-current-build-result-in-Pipeline-">cloudbees support case</a></p><p>Example that forces a failure then prints result:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        // <span class="keyword">do</span> something that fails</span><br><span class="line">        sh <span class="string">&quot;exit 1&quot;</span></span><br><span class="line">        currentBuild.result = <span class="string">&#x27;SUCCESS&#x27;</span></span><br><span class="line">    &#125; catch (Exception err) &#123;</span><br><span class="line">        currentBuild.result = <span class="string">&#x27;FAILURE&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;RESULT: <span class="variable">$&#123;currentBuild.result&#125;</span>&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Started by user anonymous</span><br><span class="line">[Pipeline] Allocate node : Start</span><br><span class="line">Running on master <span class="keyword">in</span> /tmp/example/workspace/test</span><br><span class="line">[Pipeline] node &#123;</span><br><span class="line">[Pipeline] sh</span><br><span class="line">[<span class="built_in">test</span>] Running shell script</span><br><span class="line">+ <span class="built_in">exit</span> 1</span><br><span class="line">[Pipeline] <span class="built_in">echo</span></span><br><span class="line">RESULT: FAILURE</span><br><span class="line">[Pipeline] &#125; //node</span><br><span class="line">[Pipeline] Allocate node : End</span><br><span class="line">[Pipeline] End of Pipeline</span><br><span class="line">Finished: FAILURE</span><br></pre></td></tr></table></figure><p>Example that doesnâ€™t fail then prints result:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        // <span class="keyword">do</span> something that does not fail</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Im not going to fail&quot;</span></span><br><span class="line">        currentBuild.result = <span class="string">&#x27;SUCCESS&#x27;</span></span><br><span class="line">    &#125; catch (Exception err) &#123;</span><br><span class="line">        currentBuild.result = <span class="string">&#x27;FAILURE&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;RESULT: <span class="variable">$&#123;currentBuild.result&#125;</span>&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Started by user anonymous</span><br><span class="line">[Pipeline] Allocate node : Start</span><br><span class="line">Running on master <span class="keyword">in</span> /tmp/example/workspace/test</span><br><span class="line">[Pipeline] node &#123;</span><br><span class="line">[Pipeline] <span class="built_in">echo</span></span><br><span class="line">Im not going to fail</span><br><span class="line">[Pipeline] <span class="built_in">echo</span></span><br><span class="line">RESULT: SUCCESS</span><br><span class="line">[Pipeline] &#125; //node</span><br><span class="line">[Pipeline] Allocate node : End</span><br><span class="line">[Pipeline] End of Pipeline</span><br><span class="line">Finished: SUCCESS</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>These settings in Bitbucket/GitHub recommends enable</title>
      <link href="/2021/01/git-repository-settings/"/>
      <url>/2021/01/git-repository-settings/</url>
      
        <content type="html"><![CDATA[<p>As I have management our teamâ€™s git repositories for more than two years, and as my daily work using Bitbucket, so Iâ€™ll take it as an example.</p><p>Here are some settings recommend you to enable.</p><ol><li>Set Reject Force Push</li><li>Set Branch Prevent deletion</li><li>Set tags for each hotfix&#x2F;GA releases</li><li>Merge Check -&gt; Minimum approvals (1)</li><li>Yet Another Commit Checker</li></ol><h2 id="Reject-Force-Push"><a href="#Reject-Force-Push" class="headerlink" title="Reject Force Push"></a>Reject Force Push</h2><p>This is the first setting I highly recommend you&#x2F;your team to open it. if not, when someone using the <code>git push -f</code> command to the git repository, you may lost commits if his local code is old then remote repository.</p><p>you have to recover the lost commits manually, I have heard 3 times around me. so enable the hook: Reject Force Push ASAP!</p><h2 id="Set-Branch-Prevent-deletion"><a href="#Set-Branch-Prevent-deletion" class="headerlink" title="Set Branch Prevent deletion"></a>Set Branch Prevent deletion</h2><p>If some branch is very important, you donâ€™t want to lost it, set Branch Prevent deletion ASAP!</p><h2 id="Set-tags-for-each-hotfix-GA-releases"><a href="#Set-tags-for-each-hotfix-GA-releases" class="headerlink" title="Set tags for each hotfix&#x2F;GA releases"></a>Set tags for each hotfix&#x2F;GA releases</h2><p>For each hotfix&#x2F;GA release, highly recommend create tags after release.</p><h2 id="Merge-Check"><a href="#Merge-Check" class="headerlink" title="Merge Check"></a>Merge Check</h2><p>Pull Request is a very good workflow process for each team. in case of commits were merged directly without review, we enable Minimum approvals (1).</p><p>So, every branch wants to be merged to the main branch MUST add a reviewer (not allow yourself) and the review must click the Approve button otherwise the merge button is disabled.</p><h2 id="Yet-Another-Commit-Checker"><a href="#Yet-Another-Commit-Checker" class="headerlink" title="Yet Another Commit Checker"></a>Yet Another Commit Checker</h2><p>This is a very powerful feature. it helps to standardize commit messages and create a branch.</p><p>More details about this tool you can refer to <a href="https://mohamicorp.atlassian.net/wiki/spaces/DOC/pages/1442119700/Yet+Another+Commit+Checker+YACC+for+Bitbucket">this introduction</a></p><p>I have a Chinese article to describe how to use Yet Another Commit Checker implement. if you interest it, you can see the post <a href="https://shenxianpeng.github.io/2020/09/commit-messages-specification/">here</a></p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Bitbucket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to open port 22 and make it listening on Windows</title>
      <link href="/2021/01/open-port-22/"/>
      <url>/2021/01/open-port-22/</url>
      
        <content type="html"><![CDATA[<p>Recently our Bamboo server has an error when connecting to the Windows build system.</p><p>Some errors like: Can not connect to the host XXXX 22 port.</p><p>I log into the build machine find port 22 with the below command</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstat -aon|findstr <span class="string">&quot;22&quot;</span></span><br></pre></td></tr></table></figure><p>but not found port 22 is inbound.</p><h2 id="Inbound-port-22"><a href="#Inbound-port-22" class="headerlink" title="Inbound port 22"></a>Inbound port 22</h2><p>Thereâ€™s a lot of articles will tell you how to open ports on Windows. see this one</p><p><a href="https://www.windowscentral.com/how-open-port-windows-firewall">https://www.windowscentral.com/how-open-port-windows-firewall</a></p><h2 id="But-still-not-works-for-me"><a href="#But-still-not-works-for-me" class="headerlink" title="But still not works for me"></a>But still not works for me</h2><p>My problem is when I inbound port 22, execute the above command still canâ€™t see the port 22 is listening.</p><p>So I install the <a href="https://github.com/PowerShell/Win32-OpenSSH">Win32-OpenSSH</a>, this will lanch two services, then port 22 is listening.</p><p>Here are the wiki page about download and installation <a href="https://github.com/PowerShell/Win32-OpenSSH/wiki/Install-Win32-OpenSSH">https://github.com/PowerShell/Win32-OpenSSH/wiki/Install-Win32-OpenSSH</a></p>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> OpenSSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git sparse-checkout enable and disable</title>
      <link href="/2021/01/sparse-checkout/"/>
      <url>/2021/01/sparse-checkout/</url>
      
        <content type="html"><![CDATA[<p>This post just a note to myself and it works on my environment. it has not been widely tested.</p><h2 id="Enable-git-sparse-checkout"><a href="#Enable-git-sparse-checkout" class="headerlink" title="Enable git sparse-checkout"></a>Enable git sparse-checkout</h2><p>Just in my case, I cloned a git repo exists problems on the Windows platform with some folder, in order to work on the Windows platform we get a work around solution as following:</p><p>Case 1: when you not already cloned a repository</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> git-src</span><br><span class="line"><span class="built_in">cd</span> git-src</span><br><span class="line">git init</span><br><span class="line">git config core.sparseCheckout <span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/assets/&quot;</span> &gt;&gt; .git/info/sparse-checkout</span><br><span class="line">git remote add origin git@github.com:shenxianpeng/shenxianpeng.git</span><br><span class="line">git fetch</span><br><span class="line">git checkout master</span><br></pre></td></tr></table></figure><p>Case 2: when you already cloned a repository</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> git-src</span><br><span class="line">git config core.sparseCheckout <span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/assets/&quot;</span> &gt;&gt; .git/info/sparse-checkout</span><br><span class="line"><span class="built_in">rm</span> -rf &lt;other-file/folder-you-dont-need&gt;</span><br><span class="line">git checkout</span><br></pre></td></tr></table></figure><h2 id="Disable-git-sparse-checkout"><a href="#Disable-git-sparse-checkout" class="headerlink" title="Disable git sparse-checkout"></a>Disable git sparse-checkout</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config core.sparseCheckout <span class="literal">false</span></span><br><span class="line">git read-tree --empty</span><br><span class="line">git reset --hard</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ Code Sign é»˜è®¤æ—¶é—´æˆ³æœåŠ¡å™¨ http://timestamp.verisign.com/scripts/timstamp.dll ä¸å¯ç”¨</title>
      <link href="/2021/01/verisign-server-not-working/"/>
      <url>/2021/01/verisign-server-not-working/</url>
      
        <content type="html"><![CDATA[<p>ç›¸ä¿¡è®¸å¤šç¨‹åºå‘˜åœ¨æ–°å¹´å¼€å§‹åœ¨åš code sign (æ•°å­—ç­¾å)çš„æ—¶å€™å¯èƒ½é‡åˆ° Verisign Timestamp æœåŠ¡å™¨ä¸å¥½ç”¨äº† <a href="http://timestamp.verisign.com/scripts/timstamp.dll">http://timestamp.verisign.com/scripts/timstamp.dll</a> çš„æƒ…å†µã€‚å‡ºç°äº†å¦‚ä¸‹é”™è¯¯ï¼š</p><p><img src="/2021/01/verisign-server-not-working/failed.png" alt="Code Sign å¤±è´¥äº†"></p><p>åŸå› æ˜¯ code sign é»˜è®¤çš„æ—¶é—´æˆ³æœåŠ¡å™¨æ— æ³•è®¿é—®äº†ã€‚</p><p>åœ¨ Stack overflow è¿™ä¸ª <a href="https://stackoverflow.com/questions/65541786/is-the-verisign-timestamp-server-down">post</a> é‡Œä¸Šé¢æœ‰äººç»™å‡ºäº†ç­”æ¡ˆï¼Œæ˜¯æ¥è‡ªäº Verisign Support çš„å›å¤ï¼š</p><blockquote><p>ä»–ä»¬çš„èº«ä»½éªŒè¯æœåŠ¡å·²å‡ºå”®ç»™èµ›é—¨é“å…‹(Symante)ï¼Œç°åœ¨çš„æœåŠ¡å•†æ˜¯ Digicertã€‚è¯¥æœåŠ¡å™¨å·²å¼ƒç”¨äº†ã€‚</p><p>ä»–ä»¬å»ºè®®è”ç³» Digicert æˆ–åœ¨ç½‘ç»œä¸Šæ‰¾å…è´¹çš„ timestamp servers</p></blockquote><p>ä»¥ä¸Šæ˜¯åˆ«äººçš„å›å¤ï¼Œæˆ‘åœ¨ç½‘ç»œä¸Šæ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå®˜æ–¹å›å¤ï¼Œå› æ­¤æ‰“ç®—å‘é‚®ä»¶æ­£å¼ç¡®è®¤ä¸€ä¸‹ï¼Œå‘å®Œä¸ä¸€ä¼šå°±å¾—åˆ°äº†å›å¤ï¼š</p><p><img src="/2021/01/verisign-server-not-working/reply.png" alt="Verisign çš„å›å¤"></p><p>å’Œä¸Šé¢çš„å›å¤ç±»ä¼¼ï¼šå‡ å¹´å‰ï¼ŒVerisign çš„èº«ä»½éªŒè¯å’Œè¯ä¹¦ä¸šåŠ¡è¢«å‡ºå”®ç»™èµ›é—¨é“å…‹(Symantec)ï¼Œç›®å‰å·²è¿‡æ¸¡åˆ°Digicertã€‚æ‚¨å°†éœ€è¦ä¸å½“å‰ä¾›åº”å•†åˆä½œä»¥è·å¾—æ”¯æŒæˆ–æ›´æ–°çš„æ—¶é—´æˆ³URLã€‚è¯·è®¿é—® <a href="http://www.digicert.com/">http://www.digicert.com</a> äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>å¥½äº†ï¼Œè¿™ä¸‹å®é”¤äº†ï¼Œæ”¾å¿ƒå¤§èƒ†çš„å¼€å§‹åŠ¨æ‰‹ä¿®æ”¹åˆ°æ–°çš„æ—¶é—´æˆ³äº†ã€‚</p><p>æˆ‘æ‰¾åˆ°äº† Digicert çš„æ—¶é—´æˆ³æœåŠ¡å™¨æ˜¯ <code>http://timestamp.digicert.com</code>ã€‚æ›´æ¢åˆ°æ–°çš„æ—¶é—´æˆ³æœåŠ¡å™¨åï¼Œæ•°å­—ç­¾åæ¢å¤æ­£å¸¸ã€‚</p><p>é™¤äº†ä¸Šé¢ Digicert é‚£ä¸ªç½‘å€ï¼Œè¿˜æœ‰å¦‚ä¸‹ç½‘å€å¯ä»¥ä½œä¸ºæ›¿æ¢:</p><ul><li><a href="http://timestamp.comodoca.com/authenticode">http://timestamp.comodoca.com/authenticode</a></li><li><a href="http://timestamp.globalsign.com/scripts/timestamp.dll">http://timestamp.globalsign.com/scripts/timestamp.dll</a></li><li><a href="http://tsa.starfieldtech.com/">http://tsa.starfieldtech.com</a></li></ul><p>ä½†æˆ‘éƒ½æ²¡æœ‰é€‰ç”¨ï¼Œæˆ‘è¿˜æ˜¯é€‰æ‹©äº†å®˜æ–¹çš„æ—¶é—´æˆ³æœåŠ¡ï¼Œç•™ä½œå¤‡ç”¨å§ã€‚ä¸€æ—¦åˆæŠ½é£ â€œå®˜æ–¹â€ å“ªå¤©åˆè¢«å–äº†å‘¢ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CodeSign </tag>
            
            <tag> Timestamp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021 å¹´å›½å¤– IT å…¬å¸å¯¹äº DevOps å·¥ç¨‹å¸ˆçš„è¦æ±‚æœ‰å“ªäº›ï¼Ÿ</title>
      <link href="/2021/01/2021-devops-job-requirement/"/>
      <url>/2021/01/2021-devops-job-requirement/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è‡ª 2020 å¹´å› ç–«æƒ…å¼€å§‹ï¼Œè¶Šæ¥è¶Šå¤šçš„ IT å…¬å¸éƒ½å› ä¸å¾—ä¸åœ¨å®¶åŠå…¬ä»è€Œå½»åº•è½¬ä¸º WFHï¼ˆWork From Homeï¼‰ å…¬å¸ï¼Œå› æ­¤å¯¹äº IT ä»ä¸šè€…æ¥è¯´ï¼Œå·¥ä½œæœºä¼šä»Šåå°†ä¼šæ˜¯å…¨çƒæ€§çš„ã€‚</p><p>å¦‚æœä½ æœ‰æ„æƒ³è¿›å…¥ä¸€ä¸ªè·¨å›½å…¬å¸å·¥ä½œï¼Œæƒ³ä¸ä¸–ç•Œå„åœ°çš„äººåœ¨ä¸€èµ·å·¥ä½œï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»…ä»…çš„å…³æ³¨å›½å†…çš„è¿™äº›å¤§å‚ï¼Œè¦å°†çœ¼å…‰æ”¾çœ¼åˆ°å…¨ä¸–ç•Œï¼Œçœ‹çœ‹è¿™äº›è€³ç†Ÿèƒ½è¯¦çš„å…¬å¸å¯¹äºå·¥ç¨‹å¸ˆçš„èŒä½è¦æ±‚æœ‰å“ªäº›ã€‚</p><p>ä»Šå¤©å°±å…ˆæ¥çœ‹çœ‹ DevOps å²—ä½çš„éœ€æ±‚æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œäº†è§£è¿™äº›ï¼Œä¸€æ¥å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨2021 å¹´æ ‘ç«‹å­¦ä¹ æ–¹å‘ï¼Œè€Œæ¥å¦‚æœä½ æœ‰æ„å‘å»è¿™äº›å…¬å¸ï¼Œäº†è§£å¹¶ææ—©åšå‡†å¤‡æ‰èƒ½æœ‰æœºä¼šè·å–ä½ æƒ³è¦çš„å²—ä½ã€‚</p><p>ç”±äºè¿™äº›èŒä½çš„ä»‹ç»å’Œè¦æ±‚ä¼šå¾ˆé•¿ï¼Œå› æ­¤æˆ‘å°±å…ˆè¯´ç»“è®ºã€‚</p><h2 id="ä¸»è¦æŠ€èƒ½"><a href="#ä¸»è¦æŠ€èƒ½" class="headerlink" title="ä¸»è¦æŠ€èƒ½"></a>ä¸»è¦æŠ€èƒ½</h2><ul><li>å›½å¤–å¾ˆå¤šå…¬å¸ä»–ä»¬ä½¿ç”¨çš„äº‘æœåŠ¡å•†ä¸»è¦æ˜¯ AWSï¼Œå› æ­¤ç†Ÿæ‚‰å’Œä½¿ç”¨ AWS</li><li>ç†Ÿç»ƒä½¿ç”¨ DevOps å·¥å…·ï¼Œå¦‚ Jenkins, Ansibleï¼ˆChefï¼‰, Git ç­‰</li><li>Docker å’Œ Kubernetes æ˜¯æ¯ä¸ªæƒ³ä»äº‹ DevOps éœ€è¦æŒæ¡çš„</li><li>ç†Ÿæ‚‰æ“ä½œç³»ç»Ÿï¼Œè‡³å°‘è¦ Linux</li><li>å¤§å¤šæ•°éƒ½æ˜¯è¦æ±‚ Python å¾ˆç†Ÿç»ƒï¼Œé«˜çº§ä¸€äº›çš„å²—ä½ä¼šè¦æ±‚ç†Ÿæ‚‰ Go, Java è¯­è¨€</li><li>æœ€åï¼Œä¹äºå­¦ä¹ ï¼Œç§¯æä¸»åŠ¨ï¼Œå…·æœ‰åˆ›é€ æ€§æ€ç»´æ˜¯æ¯ä¸ª DevOps æœ€é‡è¦çš„ç‰¹è´¨ï¼Œå› æ­¤æ–°çš„æŠ€æœ¯å’Œå·¥å…·å±‚å‡ºä¸ç©·ï¼Œæˆ‘ä»¬éœ€è¦ä¿æŒå’Œæ–°è¿›åŒè¡Œ</li></ul><p>å…·ä½“çš„èŒä½è¦æ±‚ç»†èŠ‚ï¼Œè¯·çœ‹åé¢çš„èŒä½ä»‹ç»å§ â€¦</p><span id="more"></span><h2 id="ZOOMï¼šDevOps-Engineer"><a href="#ZOOMï¼šDevOps-Engineer" class="headerlink" title="ZOOMï¼šDevOps Engineer"></a>ZOOMï¼šDevOps Engineer</h2><p>å·¥ä½œåœ°ç‚¹ï¼šSan Jose, CA</p><p>å²—ä½é“¾æ¥ <a href="https://www.linkedin.com/jobs/view/2337488435">https://www.linkedin.com/jobs/view/2337488435</a></p><p>ZOOM ä¸ç”¨è¿‡å¤šä»‹ç»äº†ï¼Œ2020 å¹´å› ä¸ºç–«æƒ…ï¼Œä¸šåŠ¡æå…·å¢é•¿çš„ä¸€å®¶è§†é¢‘ä¼šè®®çš„å…¬å¸ã€‚ä¹Ÿå¤šæ¬¡è¢«æ¨èä¸ºæœ€ä½³é›‡ä¸»ï¼Œä»¥åŠæœ€ä½³çš„å·¥ä½œåœºæ‰€ã€‚</p><p>å²—ä½èŒè´£</p><ul><li>è®¾è®¡ã€éƒ¨ç½²ã€ç›‘æ§ ZOOM å¹³å°æœåŠ¡</li><li>æå‡ ZOOM å¹³å°æœåŠ¡ä»è§„åˆ’åˆ°ä¸Šçº¿çš„å…¨ç”Ÿå‘½å‘¨æœŸç­–ç•¥</li><li>ä¸è·¨èŒèƒ½å¹²ç³»äººç´§å¯†åˆä½œï¼Œåˆ†æå’Œè§£å†³å¤æ‚çš„ç”Ÿäº§é—®é¢˜</li><li>æ„å»ºå¼¹æ€§å’Œå¯æ‰©å±•çš„æœåŠ¡åŸºç¡€è®¾æ–½ï¼Œä»¥é€‚åº”åŸºäºåŒºåŸŸçš„æ•°æ®ä¸­å¿ƒ</li><li>ä¼˜åŒ–å½“å‰CI&#x2F;CDæµç¨‹ï¼Œç®€åŒ–æœåŠ¡å™¨é…ç½®å’Œéƒ¨ç½²çš„è‡ªåŠ¨åŒ–å·¥ä½œ</li><li>æ”¯æŒæµ‹è¯•è‡ªåŠ¨åŒ–å’Œéƒ¨ç½²ç­–ç•¥ï¼Œä»¥ä¼˜åŒ–æœåŠ¡æ€§èƒ½ï¼Œç¡®ä¿äº§å“è´¨é‡</li></ul><p>èŒä½è¦æ±‚</p><ul><li>æœ¬ç§‘&#x2F;ç¡•å£«(CSæˆ–ç›¸å…³ä¸“ä¸šä¼˜å…ˆ)</li><li>è‡³å°‘ 5 å¹´ DevOps æˆ– SRE ç»éªŒ</li><li>å¯¹ AWS åŸºç¡€æ¶æ„(å¦‚DynamoDB, S3, Nginx, CloudWatch)ï¼ŒLinux æ‰¹å¤„ç†å‘½ä»¤ï¼ŒELK å †æ ˆå’Œå®¹å™¨ç¼–æ’(å¦‚ K8s, Docker)æœ‰æ·±å…¥çš„äº†è§£</li><li>ç†Ÿç»ƒä½¿ç”¨ Jenkins, Ansible å’Œ Git ä»“åº“</li><li>èƒ½å¤Ÿç›‘æ§ï¼Œè°ƒè¯•å’Œè‡ªåŠ¨åŒ–æ—¥å¸¸ä»»åŠ¡</li><li>ç†Ÿæ‚‰äº‘åŸºç¡€è®¾æ–½æŠ€æœ¯å’ŒåŸºäºäº‘çš„æµ‹è¯•è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ</li><li>ä¹äºå­¦ä¹ ï¼Œç§¯æä¸»åŠ¨ï¼Œå…·æœ‰åˆ›é€ æ€§æ€ç»´</li></ul><h2 id="è‹¹æœï¼šDevOps-Engineer-CI-CD"><a href="#è‹¹æœï¼šDevOps-Engineer-CI-CD" class="headerlink" title="è‹¹æœï¼šDevOps Engineer (CI&#x2F;CD)"></a>è‹¹æœï¼šDevOps Engineer (CI&#x2F;CD)</h2><p>åœ°ç‚¹ï¼šCupertino, CA</p><p>å²—ä½é“¾æ¥ï¼š<a href="https://www.linkedin.com/jobs/view/2346233023/?eBP=JOB_SEARCH_ORGANIC&recommendedFlavor=COMPANY_RECRUIT&refId=RA+GKQ6QNrbwK1PHj3opBQ==&trackingId=/CHeWxW/Hm+ULb2XD5Yyyg==&trk=flagship3_search_srp_jobs">https://www.linkedin.com/jobs/view/2346233023/?eBP=JOB_SEARCH_ORGANIC&amp;recommendedFlavor=COMPANY_RECRUIT&amp;refId=RA%2BGKQ6QNrbwK1PHj3opBQ%3D%3D&amp;trackingId=%2FCHeWxW%2FHm%2BULb2XD5Yyyg%3D%3D&amp;trk=flagship3_search_srp_jobs</a></p><p>æˆ‘ä»¬çš„å›¢é˜Ÿä¸ºè‹¹æœçš„åº”ç”¨ç¨‹åºè¿è¡Œ CI&#x2F;C Dç®¡é“ï¼Œæ”¯æŒå…¨çƒæˆåƒä¸Šä¸‡çš„å¼€å‘è€…ã€‚æˆ‘ä»¬å¯¹ä¸æ–­æ”¹è¿›è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼å……æ»¡çƒ­æƒ…ï¼Œå¹¶ä¸ºå¤§è§„æ¨¡å·¥ç¨‹é—®é¢˜é‡æ–°å‘æ˜å‰æ²¿è§£å†³æ–¹æ¡ˆå¼€è¾Ÿè¾¹ç•Œã€‚ä½œä¸ºå›¢é˜Ÿçš„ä¸€å‘˜ï¼Œä½ å°†å¼€å‘åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡æ¥æ„å»ºå’Œæ”¹è¿›æˆ‘ä»¬çš„ä¸‹ä¸€ä»£ CI&#x2F;CD ç®¡é“ã€‚</p><p>èŒä½è¦æ±‚</p><ul><li>ç²¾é€š Python ç¼–ç¨‹</li><li>æœ‰ Unix&#x2F;Linux å¹³å°å·¥ä½œç»éªŒ</li><li>ç†Ÿç»ƒä½¿ç”¨ DevOps å·¥å…·ï¼Œå¦‚ Chef, Docker, Kubernetes</li><li>å…·æœ‰è½¯ä»¶å¼€å‘è¿‡ç¨‹çš„ç»éªŒï¼Œå¦‚æ„å»ºã€å•å…ƒæµ‹è¯•ã€ä»£ç åˆ†æã€å‘å¸ƒè¿‡ç¨‹å’Œä»£ç è¦†ç›–</li><li>æœ‰ CI&#x2F;CD æµç¨‹å’Œå¹³å°ç»éªŒï¼Œå¦‚ Jenkins</li><li>è¾ƒå¼ºçš„åˆ†æå’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›</li><li>ä¼˜ç§€çš„ä¹¦é¢å’Œå£å¤´æ²Ÿé€šèƒ½åŠ›ï¼Œèƒ½å¤Ÿä¸å¤§å‹å¼€å‘å›¢é˜Ÿåˆä½œ</li></ul><p>å·¥ä½œå†…å®¹</p><ul><li>å¼€å‘å’Œç»´æŠ¤åº”ç”¨å¼€å‘å›¢é˜Ÿçš„ CI&#x2F;CD æµç¨‹</li><li>è·¨å›¢é˜Ÿåˆä½œï¼Œæ”¹è¿›äº§å“çš„æ„å»ºã€é›†æˆå’Œå‘å¸ƒæµç¨‹</li><li>å¼€å‘å’Œç»´æŠ¤åº”ç”¨æœåŠ¡ CI&#x2F;CD ç®¡é“çš„æœåŠ¡å’Œé›†æˆ</li><li>ç»´æŠ¤å’Œç®¡ç†åŒ…å« Linux&#x2F;Unix&#x2F;macOS ç³»ç»Ÿçš„åŠ¨æ€æ„å»ºåœº</li><li>èƒ½å¤Ÿå‚ä¸ä¸‹ç­åçš„è½®ç­å·¥ä½œ</li></ul><p>æ•™è‚²å’Œç»éªŒ</p><ul><li>è®¡ç®—æœºç§‘å­¦æˆ–åŒç­‰å­¦å†</li></ul><p>å…¶ä»–è¦æ±‚</p><ul><li>æœ‰ä½¿ç”¨ Django&#x2F;Flask å¼€å‘åŸºäº Python çš„å¾®æœåŠ¡çš„ç»éªŒ</li><li>ç†Ÿæ‚‰GitHubå¼€å‘æµç¨‹</li><li>æœ‰ Jenkins ç®¡ç†å’Œæ‰©å±•çš„ç»éªŒ</li><li>å…·å¤‡æ‰©å±• CI&#x2F;CD ç³»ç»Ÿå’Œå¾®æœåŠ¡çš„ç»éªŒ</li><li>æœ‰ Xcode å’Œå¼€å‘ iOS, macOS å’Œå…¶ä»–è‹¹æœå¹³å°åº”ç”¨çš„ç»éªŒ</li></ul><h2 id="Oracleï¼šSoftware-Developer-4-for-DevOps"><a href="#Oracleï¼šSoftware-Developer-4-for-DevOps" class="headerlink" title="Oracleï¼šSoftware Developer 4 for DevOps"></a>Oracleï¼šSoftware Developer 4 for DevOps</h2><p>å·¥ä½œåœ°ç‚¹ï¼šPleasanton, CA<br>èŒä½é“¾æ¥ï¼š<a href="https://www.linkedin.com/jobs/view/2351849053/?eBP=JOB_SEARCH_ORGANIC&recommendedFlavor=COMPANY_RECRUIT&refId=RA+GKQ6QNrbwK1PHj3opBQ==&trackingId=XQXcRFZiVeqSGJApqI4Grw==&trk=flagship3_search_srp_jobs">https://www.linkedin.com/jobs/view/2351849053/?eBP=JOB_SEARCH_ORGANIC&amp;recommendedFlavor=COMPANY_RECRUIT&amp;refId=RA%2BGKQ6QNrbwK1PHj3opBQ%3D%3D&amp;trackingId=XQXcRFZiVeqSGJApqI4Grw%3D%3D&amp;trk=flagship3_search_srp_jobs</a></p><p>ä½œä¸º Oracle Analytics Cloud å›¢é˜Ÿçš„å¼€å‘äººå‘˜ï¼Œä½ å°†æœ‰æœºä¼šåœ¨å¹¿æ³›åˆ†å¸ƒçš„å¤šç§Ÿæˆ·äº‘ç¯å¢ƒä¸­æ„å»ºå’Œè¿è¡Œä¸€å¥—å¤§è§„æ¨¡é›†æˆäº‘æœåŠ¡ã€‚ä½ å°†éœ€è¦åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ–¹é¢æœ‰ä¸°å¯Œçš„ç»éªŒï¼Œç†Ÿç»ƒåœ°è§£å†³å¤§å‹æ•°æ®ç³»ç»Ÿä¸­çš„å®é™…æŒ‘æˆ˜ï¼Œå¯¹å¦‚ä½•æ„å»ºå…·æœ‰å¼¹æ€§ï¼Œé«˜å¯ç”¨æ€§ï¼Œå¯æ‰©å±•æ€§çš„è§£å†³æ–¹æ¡ˆæœ‰æ·±åˆ»çš„äº†è§£ï¼Œå¹¶ä¸”éœ€è¦å…·æœ‰å¯é çš„è®¾è®¡ï¼Œå¼€å‘å’Œäº¤ä»˜å›æº¯èƒ½åŠ›ï¼Œç»ˆç«¯ç³»ç»Ÿã€‚</p><p>èŒä½è¦æ±‚</p><ul><li>è®¡ç®—æœºç§‘å­¦ï¼Œè®¡ç®—æœºå·¥ç¨‹å­¦å£«å­¦ä½æˆ–æ›´é«˜å­¦ä½ï¼Œæˆ–å…·æœ‰8å¹´ä»¥ä¸Šåº”ç”¨ç»éªŒçš„åŒç­‰å­¦å†</li><li>å…³äº Oracle Cloud Infrastructure çš„åŠ¨æ‰‹ç»éªŒâ€“ç”¨æˆ·&#x2F;ç­–ç•¥ç®¡ç†ï¼Œåˆ›å»ºèµ„æºï¼Œé…ç½®å’Œéƒ¨ç½²è½¯ä»¶ï¼Œè‡ªåŠ¨åŒ–ç«¯åˆ°ç«¯åˆ°ç«¯ä¾›åº”</li><li>ç²¾é€š Python ç¼–ç¨‹æŠ€å·§</li><li>ç²¾é€šå…³ç³»æ•°æ®åº“ï¼Œæ“…é•¿ SQL</li><li>æœ‰ä½¿ç”¨å®¹å™¨æŠ€æœ¯çš„ç»éªŒï¼Œå°¤å…¶æ˜¯ Docker</li><li>åœ¨ Linux ç¯å¢ƒä¸­çš„ç»éªŒ</li><li>æœ‰é…ç½® Git ç­‰æºä»£ç ç³»ç»Ÿçš„ç»éªŒ</li><li>æˆä¸º CI&#x2F;CD å’Œå¼€å‘æœ€ä½³å®è·µçš„æ‹¥æŠ¤è€…ï¼Œå°¤å…¶æ˜¯åœ¨è‡ªåŠ¨åŒ–å’Œæµ‹è¯•æ–¹é¢</li><li>å…·æœ‰æ„å»ºé«˜æ€§èƒ½ï¼Œå¼¹æ€§ï¼Œå¯æ‰©å±•æ€§å’Œç²¾å¿ƒè®¾è®¡çš„ç³»ç»Ÿçš„ç»éªŒ</li><li>è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›ï¼Œèƒ½å¤Ÿæ¸…æ¥šåœ°é˜æ˜å·¥ç¨‹è®¾è®¡</li><li>æ•æ·è½¯ä»¶å¼€å‘ç»éªŒ</li></ul><p>æ‰€éœ€æŠ€èƒ½ï¼š</p><ul><li>ç†Ÿæ‚‰ Kubernetesï¼ŒMesos ç­‰ï¼ˆç¼–æ’ï¼‰</li><li>èº«ä»½ç®¡ç†ï¼Œå®‰å…¨æ€§ï¼Œç½‘ç»œç­‰</li></ul><h2 id="NVIDIA-DevOps-Engineer"><a href="#NVIDIA-DevOps-Engineer" class="headerlink" title="NVIDIA DevOps Engineer"></a>NVIDIA DevOps Engineer</h2><p>å·¥ä½œåœ°ç‚¹ï¼šSanta Clara, CA<br>èŒä½é“¾æ¥ï¼š<a href="https://www.linkedin.com/jobs/view/2249840303/?alternateChannel=search&refId=Y17t502dpy/AU43SIQPRIA==">https://www.linkedin.com/jobs/view/2249840303/?alternateChannel=search&amp;refId=Y17t502dpy%2FAU43SIQPRIA%3D%3D</a></p><p>å·¥ä½œå†…å®¹</p><ul><li>ä¸ºå¤šä¸ªå†…éƒ¨æœåŠ¡å¼€å‘å’Œæ”¯æŒæš‚å­˜å’Œç”Ÿäº§ç¯å¢ƒ</li><li>ä¸å…¨çƒå„åœ°çš„å„ä¸ªå›¢é˜Ÿè¿›è¡Œåè°ƒï¼Œä»¥ä¿ƒè¿›å’Œæ”¹è¿› CI&#x2F;CD çš„å®è·µ</li><li>ä½¿ç”¨å†…éƒ¨ Kubernetes å’Œå•†ä¸šäº‘å¸®åŠ©æ„å»ºæœåŠ¡</li><li>ä½ å°†åœ¨å›¢é˜Ÿä¸­çµæ´»åœ°åšå‡ºæŠ€æœ¯å†³ç­–</li></ul><p>å²—ä½è¦æ±‚</p><ul><li>è®¡ç®—æœºå·¥ç¨‹ï¼Œè®¡ç®—æœºç§‘å­¦æˆ–ç›¸å…³æŠ€æœ¯å­¦ç§‘çš„ç†å­¦å­¦å£«å­¦ä½æˆ–åŒç­‰å·¥ä½œç»éªŒ</li><li>6å¹´ä»¥ä¸Šç»éªŒ</li><li>å‡ºè‰²çš„è„šæœ¬è¯­è¨€ç¼–ç¨‹å’Œè°ƒè¯•æŠ€èƒ½</li><li>æˆç†Ÿçš„ Linux ç³»ç»Ÿç®¡ç†ç»éªŒï¼ˆå¼ºçƒˆå»ºè®®ä½¿ç”¨ CentOS å’Œ Ubuntuï¼‰</li><li>å¯¹ CI&#x2F;CDç®¡é“å’Œå·¥å…·æœ‰å¾ˆå¥½çš„äº†è§£ï¼ˆGitLab æˆ–ç±»ä¼¼çš„å·¥å…·ï¼‰</li><li>æ•°æ®åº“ç®¡ç†å’Œæ€§èƒ½è°ƒä¼˜ç»éªŒ</li><li>å…·æœ‰å®¹å™¨ï¼ˆDockerï¼ŒKubernetesï¼‰WebæœåŠ¡ï¼ˆSOAP&#x2F;RESTï¼‰å’Œå¯æ‰©å±•å­˜å‚¨ï¼ˆHDFS&#x2F;Cephï¼‰çš„ç»éªŒ</li></ul><p>ä»äººç¾¤ä¸­è„±é¢–è€Œå‡ºçš„æ–¹æ³•</p><ul><li>ä½ å…·æœ‰ Python ç¼–ç¨‹æ–¹é¢çš„ä¸“ä¸šçŸ¥è¯†</li><li>ç†Ÿæ‚‰ Windows ç³»ç»Ÿç®¡ç†æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜åŠ¿</li><li>ä½ æ›¾ç»ä½¿ç”¨è¿‡äº‘æœåŠ¡ï¼ˆAWSï¼ŒAzureç­‰ï¼‰</li></ul><h2 id="Cisco-CX-Cloud-Senior-DevOps-Release-Engineer"><a href="#Cisco-CX-Cloud-Senior-DevOps-Release-Engineer" class="headerlink" title="Cisco CX Cloud - Senior DevOps Release Engineer"></a>Cisco CX Cloud - Senior DevOps Release Engineer</h2><p>å·¥ä½œåœ°ç‚¹ï¼šSan Jose, CA<br>èŒä½é“¾æ¥ï¼š<a href="https://www.linkedin.com/jobs/view/2310027987/?alternateChannel=search&refId=COCpYBYNZm9w483i3SERXg==&trackingId=FpZJedsrgIhNxlm961X75Q==">https://www.linkedin.com/jobs/view/2310027987/?alternateChannel=search&amp;refId=COCpYBYNZm9w483i3SERXg%3D%3D&amp;trackingId=FpZJedsrgIhNxlm961X75Q%3D%3D</a></p><p>å·¥ä½œèŒƒå›´</p><ul><li>ä½ å¯ä»¥è·¨ CX E&amp;PI å’Œæ›´å¹¿æ³›çš„å®¢æˆ·ä½“éªŒï¼ˆCXï¼‰ç»„ç»‡è¿›è¡Œåä½œï¼Œä»¥å¯ç”¨æˆ‘ä»¬çš„DevOps Releaseè½¬æ¢åŠŸèƒ½</li><li>ä½ å°†ä»¥æ€æƒ³å’Œå®è·µçš„å¼€å‘äººå‘˜çš„èº«ä»½å¼€å±•å·¥ä½œï¼Œä»–ä¸ä»…ä¼šè®¤è¯†å¹¶å»ºç«‹æˆ‘ä»¬çš„ç»„ç»‡å®åŠ›ï¼Œè¿˜å°†ä¸ºå›¢é˜Ÿå¸¦æ¥æ–°çš„è§‚ç‚¹å’Œæƒ³æ³•</li><li>ä¸å¤šå…ƒåŒ–çš„åŒ…å®¹æ€§è½¯ä»¶å·¥ç¨‹å¸ˆå›¢é˜Ÿåˆä½œï¼Œåœ¨å‘å¸ƒè¿‡ç¨‹ä¸­å®ç°ç«¯åˆ°ç«¯çš„DevOpsï¼Œä»¥ç¡®ä¿åŠ é€Ÿçš„ååé‡å’Œç³»ç»Ÿå¯é æ€§</li><li>ä¸å®‰å…¨ï¼Œåº”ç”¨ç¨‹åºå’ŒåŸºç¡€æ¶æ„å›¢é˜Ÿåˆä½œï¼Œä»å¼€å‘ï¼Œæµ‹è¯•ï¼Œé˜¶æ®µï¼Œé¢„ç”Ÿäº§å’Œç”Ÿäº§ç¯å¢ƒä¸­æ£€æµ‹ç®€åŒ–çš„å˜æ›´ç”Ÿå‘½å‘¨æœŸ</li><li>è¿ç”¨ä½ çš„ç»éªŒå°†åŸºç¡€æ¶æ„å®ç°ä¸ºä»£ç ï¼Œè½¬æ¢å‘å¸ƒç®¡é“ï¼Œå¹¶åœ¨é«˜æ€§èƒ½ DevOps ç®¡é“ä¸Šä»¥ NoOps çš„å¿ƒæ€éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­</li><li>ä¿ƒè¿›çºªå¾‹ä¸¥æ˜çš„æ–¹æ³•ä»¥ç¡®ä¿éƒ¨ç½²çš„å¯é¢„æµ‹æ€§å’Œè´¨é‡</li><li>åŸºå‡†åŒ–å’Œä¼˜åŒ–å…³é”®è¿è¥æŒ‡æ ‡ï¼Œç¡®ä¿æˆ‘ä»¬ç¬¦åˆè¿è¥SLA</li><li>æµ‹è¯•å¹¶æ§åˆ¶å®‰å…¨æ€§ï¼Œå¯é æ€§ï¼Œå¯ä¼¸ç¼©æ€§å’Œæ€§èƒ½æ ‡å‡†</li><li>ç§¯æå¯»æ±‚æŒç»­æ”¹è¿›å’Œå­¦ä¹ çš„æœºä¼š</li></ul><p>å²—ä½è¦æ±‚</p><ul><li>è‡³å°‘ 10 å¹´ä»¥ä¸Šçš„è®¾è®¡ï¼Œæ¶æ„ï¼Œå¯ç”¨å’Œæ‰§è¡Œ DevOps ç®¡é“</li><li>ä»¥è¯šä¿¡ï¼Œä¿¡ä»»å’Œé€æ˜çš„æ€åº¦è¿›è¡Œé“å¾·é¢†å¯¼</li><li>å…·æœ‰åœ¨é¢å‘æ•æ· DevOps çš„å›¢é˜Ÿå’Œæ–‡åŒ–ä¸­æ‹…ä»»é«˜çº§ä¸»ç®¡çš„ç»éªŒï¼Œå¹¶ä½¿ç”¨ç°ä»£æ¡†æ¶ï¼ŒæŠ€æœ¯ï¼Œå°†åŸºç¡€æ¶æ„ç”¨ä½œä»£ç å·¥å…·çš„ DevOps å®è·µ</li><li>å°†è‡ªåŠ¨è¿›è¡Œé…ç½®ç®¡ç†ï¼ˆä½¿ç”¨Ansibleç­‰å·¥å…·ï¼‰</li><li>ç²¾é€š DevOpsï¼ŒBlue&#x2F;Green å’Œ Canary éƒ¨ç½²ä»¥åŠäº‘å·¥ç¨‹ä¸­çš„æœ€ä½³å®è·µ</li><li>å·²ç»è¯æ˜äº†å¾®æœåŠ¡ï¼Œä½œä¸ºä»£ç çš„åŸºç¡€æ¶æ„ï¼Œç›‘è§†å’Œæ—¥å¿—è®°å½•æ–¹é¢çš„ä¸“ä¸šçŸ¥è¯†</li><li>å°†ç¼–å†™ä»£ç ï¼Œåˆ—å‡ºåœ¨ AWS ä¸Šè¿è¡Œçš„æ¡†æ¶å’Œæ¶æ„</li><li>ä¸è·¨èŒèƒ½å›¢é˜Ÿåˆä½œæ—¶ï¼Œä½ åœ¨å¤æ‚äº§å“ä½“ç³»ç»“æ„çš„æŒç»­é›†æˆå’Œè¿ç»­éƒ¨ç½²æ–¹é¢æ‹¥æœ‰æ·±åšçš„ä¸“ä¸šçŸ¥è¯†</li><li>å…·æœ‰å‡ºè‰²çš„èƒ½åŠ›ï¼Œå¯ä»¥ä¸ºæ”¯æŒå…¨çƒå®¢æˆ·ç¾¤çš„äº‘åŸç”Ÿ SaaS åº”ç”¨ç¨‹åºå®ç°é«˜å¯ç”¨æ€§ï¼Œç¾éš¾æ¢å¤ï¼Œç›‘è§†å’Œè­¦æŠ¥ï¼Œè‡ªåŠ¨åŒ–ä»¥åŠæŒç»­çš„é«˜æ€§èƒ½</li><li>å…·æœ‰ Terraform å’Œ CloudFormation æ¨¡æ¿çš„ä¸“ä¸šçŸ¥è¯†</li><li>åœ¨ä»£ç ç®¡é“è§£å†³æ–¹æ¡ˆæ–¹é¢æ‹¥æœ‰æ·±åšçš„ä¸“ä¸šçŸ¥è¯†</li><li>ä½¿ç”¨ Docker å’Œ Kubernetes ç®¡ç†å®¹å™¨</li><li>ä½¿ç”¨ Jenkins ç­‰å¹³å°ç®¡ç†æ„å»ºç®¡é“</li><li>å…·æœ‰å‡ºè‰²çš„ç»„ç»‡å’Œäººé™…å…³ç³»æŠ€å·§ï¼Œå¯ä»¥ä¿ƒè¿›åä½œï¼›åœ¨å¤šåŠŸèƒ½çŸ©é˜µç®¡ç†ç¯å¢ƒä¸­å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œ</li><li>åº”è¯¥èƒ½å¤Ÿä¸º AWS ç¼–å†™ Terraform æ¨¡å—</li><li>å·²ç»å±•ç¤ºäº†é¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†ï¼Œå¯ä»¥ä½¿ç”¨ SaaS æˆ–æ¶ˆè´¹è€…äº‘è½¯ä»¶å…¬å¸çš„ DevOps å›¢é˜Ÿä½¿ç”¨AWSä¹‹ç±»çš„æŠ€æœ¯æ‰§è¡Œå‘å¸ƒç®¡é“è½¬æ¢</li><li>åœ¨æ•´åˆå¤æ‚çš„ï¼Œè·¨å…¬å¸çš„æµç¨‹å’Œä¿¡æ¯ç­–ç•¥æ–¹é¢æ‹¥æœ‰ä¸°å¯Œçš„ç»éªŒï¼ŒåŒ…æ‹¬æŠ€æœ¯è§„åˆ’å’Œæ‰§è¡Œä»¥åŠç­–ç•¥åˆ¶å®šå’Œç»´æŠ¤</li><li>å¯¹ä¸´æ—¶æ€§å·¥ä½œè´Ÿè½½å…·æœ‰ä¸°å¯Œçš„ç»éªŒ</li><li>ä½“éªŒ Kubernetes</li><li>æœ‰ Atlantis çŸ¥è¯†è€…ä¼˜å…ˆ+</li><li>åœ¨ DevOps æ‰§è¡Œæˆ–å·¥ç¨‹èŒä½ä¸Šæœ‰10å¹´ä»¥ä¸Šçš„ç»éªŒ</li><li>å…·æœ‰ä¸°å¯Œçš„ç»éªŒï¼Œå¯åœ¨äº‘ä½“ç³»ç»“æ„ä¸Šå®ç°å‘å¸ƒç®¡é“ï¼Œå¹¶ç¬¦åˆä»£ç å’Œä¸´æ—¶å·¥ä½œè´Ÿè½½</li><li>å°†åŸºç¡€æ¶æ„ä½œä¸ºä»£ç å’Œå°†é…ç½®ä½œä¸ºä»£ç æŠ€æœ¯çš„ä¸°å¯Œç»éªŒ</li><li>ä½¿ç”¨ Terraformï¼ŒKubernetes å’Œ Docker ç­‰å·¥å…·æ„å»ºï¼Œæ‰©å±•å’Œä¿æŠ¤åº”ç”¨ç¨‹åºäº‘åŸºç¡€æ¶æ„çš„ä¸°å¯Œç»éªŒ</li><li>åœ¨ GitHub ä¸­ç®¡ç†å¤šä¸ªä»£ç åº“çš„ä¸°å¯Œç»éªŒ</li><li>åœ¨å¤§å‹å…¬å…±äº‘ä¸­æ„å»º Cloud Native åº”ç”¨ç¨‹åºçš„ä¸°å¯Œç»éªŒ</li><li>å…·æœ‰å®æ–½å¯è§‚å¯Ÿæ€§ï¼Œåº”ç”¨ç¨‹åºç›‘è§†å’Œæ—¥å¿—èšåˆè§£å†³æ–¹æ¡ˆçš„ç»éªŒ</li><li>ä¸è·¨èŒèƒ½å›¢é˜Ÿåˆä½œå¹¶æŒ‡å¯¼è·¨éƒ¨é—¨å›¢é˜Ÿæä¾›æ¿€æƒ…å’Œç»éªŒï¼Œä»¥æä¾›å— DevOps å¯å‘çš„è§£å†³æ–¹æ¡ˆ</li><li>ä¸ºå¤§å‹æ•°æ®ç®¡é“å¼€å‘é«˜åº¦å¯æ‰©å±•çš„äº‘åŸç”Ÿæ¶æ„</li><li>å°†å¼‚æ„æ„å»ºï¼Œæµ‹è¯•ï¼Œéƒ¨ç½²å’Œå‘å¸ƒæ´»åŠ¨è½¬æ¢ä¸ºåœ¨AWSä¸Šè¿è¡Œçš„åŒç±»ä¼ä¸šçº§ DevOps å®æ–½</li><li>äº¤ä»˜å’Œåˆ›ä½œæŒç»­é›†æˆæ„å»ºå’Œéƒ¨ç½²è‡ªåŠ¨åŒ–æ–¹é¢çš„ä¸°å¯Œç»éªŒï¼Œä¾‹å¦‚ CI&#x2F;CD ç®¡é“å¯¹ CloudFormation æ¨¡æ¿ï¼ŒAnsible å’Œç±»ä¼¼æ¡†æ¶ç­‰è§£å†³æ–¹æ¡ˆçš„ä¸°å¯Œç»éªŒ</li><li>ä¸åº”ç”¨ç¨‹åºå’ŒåŸºç¡€æ¶æ„éƒ¨ç½²ç›¸å…³çš„ AWS å¹³å°çš„ä¸°å¯Œç»éªŒ</li><li>èƒ½å¤Ÿåœ¨ Pythonï¼ŒGoå’Œ Java ä¸­æµç•…å¼€å‘</li></ul>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020 å¹´ç»ˆæ€»ç»“</title>
      <link href="/2020/12/2020-summary/"/>
      <url>/2020/12/2020-summary/</url>
      
        <content type="html"><![CDATA[<p>æ—¶é—´é£å¿«ï¼Œé©¬ä¸Šå°±è¿æ¥äº† 2021 å¹´ï¼Œåˆåˆ°äº†æ€»ç»“è‡ªå·±è¿™ä¸€å¹´æ¥çš„æ‰€æœ‰çš„ç»å†å’Œæ”¶è·çš„æ—¶å€™äº†ã€‚</p><p>2020 æ˜¯éæ¯”å¯»å¸¸çš„ä¸€å¹´ï¼Œå¯¹äºæ¯ä¸ªäººä¸è®ºæ˜¯ç”Ÿæ´»è¿˜æ˜¯å·¥ä½œï¼Œéƒ½å› ä¸ºæ–°å† ç—…æ¯’è¢«å½±å“ç€ã€‚</p><p>ä½†ç”Ÿæ´»æ€»å½’è¦ç»§ç»­ã€‚åˆ·å¾®åšã€æŠ–éŸ³å„ç§ç¤¾äº¤åª’ä½“æ˜¯ä¸€å¤©ï¼›å·¥ä½œå­¦ä¹ ä¹Ÿæ˜¯ä¸€å¤©ã€‚æˆ‘æ˜¯é‚£ç§ä¸€æ®µæ—¶é—´æ„Ÿè§‰æ²¡è¿›æ­¥å°±ç‰¹åˆ«ææ…Œçš„äººï¼Œåšå®Œåè€…æ€»ä¼šè®©æˆ‘æ„Ÿè§‰æ›´å®‰å¿ƒä¸€äº›ã€‚</p><h2 id="å›é¡¾-2020"><a href="#å›é¡¾-2020" class="headerlink" title="å›é¡¾ 2020"></a>å›é¡¾ 2020</h2><h3 id="å…³äºå·¥ä½œ"><a href="#å…³äºå·¥ä½œ" class="headerlink" title="å…³äºå·¥ä½œ"></a>å…³äºå·¥ä½œ</h3><p>å¯¹äº 2020 å¹´ï¼Œæˆ‘ä¸€ç›´åŠªåŠ›æƒ³è¦å»åšåˆ°æœ€å¥½ï¼Œå¹´å°¾å›å¤´çœ‹çœ‹ï¼Œè¿˜ç®—æ»¡æ„å§ã€‚</p><p>åœ¨å¹´åº•å†™ä¸‹å·¥ä½œå·¥ä½œæ€»ç»“çš„æ—¶å€™ï¼Œå‘ç°è‡ªå·±è¿™ä¸€å¹´ç¡®å®åšäº†å¾ˆå¤šå·¥ä½œã€‚é™¤äº†åšå¥½æ„å»ºå’Œå‘å¸ƒçš„æœ¬èŒå·¥ä½œä¹‹å¤–ï¼Œåšäº†å¾ˆå¤šæ”¹è¿›æµç¨‹å’Œæé«˜æ•ˆç‡å·¥ä½œï¼Œæ¡ä¸€äº›é‡è¦çš„æ¥è¯´ï¼š</p><ul><li><p>é€šè¿‡ Jenkins Shared Libraries å’Œ Multi-branch Pipeline å®Œæˆäº†æ— äººå€¼å®ˆçš„è‡ªåŠ¨åŒ–æ„å»ºï¼Œä¸ºå›¢é˜Ÿå’Œæˆ‘èŠ‚çœäº†å¤§é‡çš„æ—¶é—´ï¼›åŒæ—¶ä¹Ÿé€šè¿‡éªŒè¯ PR æ„å»ºå’Œæµ‹è¯•ï¼Œæé«˜ç­¾å…¥ä»£ç çš„ç¨³å®šå’Œè´¨é‡ã€‚</p><blockquote><p>è¾“å‡ºæ–‡ç«  <a href="https://shenxianpeng.github.io/2020/07/jenkins-best-practice-cn/">æ¯ä¸ª Jenkins ç”¨æˆ·éƒ½åº”è¯¥çŸ¥é“è¿™ä¸‰ä¸ªæœ€ä½³å®è·µ</a></p></blockquote></li><li><p>æ¨åŠ¨å›¢é˜Ÿè¿ç§»åˆ°ä¼ä¸šçº§çš„ Artifactory æ¥ä¸‹è½½å’Œå­˜å‚¨æ„å»ºï¼Œä»è€Œæ”¹è¿› CI&#x2F;CD çš„æ•ˆç‡å’Œæ— äººå€¼å®ˆçš„èƒ½åŠ›ã€‚ä¸ºæ›´å¥½çš„è‡ªåŠ¨åŒ–ä¸‹è½½ã€å®‰è£…ã€æµ‹è¯•ç­‰æä¾›æ–¹ä¾¿ã€‚</p><blockquote><p>è¾“å‡ºæ–‡ç«  <a href="https://shenxianpeng.github.io/2020/10/what-is-artifactory/">å†™ç»™é‚£äº›æƒ³ä½¿ç”¨ JFrog Artifactory ç®¡ç†åˆ¶å“çš„äºº</a></p></blockquote></li><li><p>ä½¿ç”¨ Python æ¥åšäº†å¾ˆå¤šå…³äº Jira, BitBucket çš„é›†æˆï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æé«˜æ•ˆç‡ã€‚å¦å¤–è¿˜å‘å¸ƒäº†ä¸€ä¸ª Python é¡¹ç›® <a href="https://pypi.org/project/uopy/">UOPY</a>ã€‚</p><blockquote><p>è¾“å‡ºæ–‡ç«  <a href="https://shenxianpeng.github.io/2020/09/how-to-release-python-project/">åœ¨ GitHub ä¸Šå‘å¸ƒä¸€ä¸ª Python é¡¹ç›®éœ€è¦æ³¨æ„å“ªäº›</a></p></blockquote></li><li><p>è½åœ°äº† Git æäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒï¼Œç»Ÿä¸€äº† Git æäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒã€‚</p><blockquote><p>è¾“å‡ºæ–‡ç«  <a href="https://shenxianpeng.github.io/2020/09/commit-messages-specification/">ç¨‹åºå‘˜è‡ªæˆ‘ä¿®å…»ä¹‹Gitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒ</a></p></blockquote></li><li><p>å­¦ä¹ å’Œä½¿ç”¨äº†ä¸€äº›æ–°å·¥å…·ï¼Œæ¯”å¦‚ Ansible playbookã€ELKã€JaCoCo ç­‰å¹¶åº”ç”¨åˆ°é¡¹ç›®ä¸­ã€‚</p><blockquote><p>è¾“å‡ºæ–‡ç«  <a href="https://shenxianpeng.github.io/2020/09/getting-to-know-ansible/">åˆè¯† Ansible</a>ï¼Œ<a href="https://shenxianpeng.github.io/2020/11/jacoco-imp/">JaCoCo å®è·µ</a></p></blockquote></li></ul><p>ä½œä¸º DevOps&#x2F;è½¯ä»¶å·¥ç¨‹å¸ˆè¿˜éœ€è¦æœ‰è‰¯å¥½çš„è¡¨è¾¾èƒ½åŠ›ï¼Œå¦åˆ™ä½ åšçš„ä¸œè¥¿å†å¥½ï¼Œä½†æ— æ³•å¾ˆæ¸…æ™°çš„è·ŸåŒäº‹åŠé¢†å¯¼åˆ†äº«å‡ºæ¥ä¹Ÿæ˜¯äº‹å€åŠŸåŠã€‚å°¤å…¶åƒæˆ‘åœ¨å¤–ä¼ï¼Œè¿˜éœ€è¦ç”¨è‹±æ–‡å»åšåˆ†äº«ã€‚</p><p>å¦å¤–ï¼Œæˆ‘æƒ³é€šè¿‡åšæŒé˜…è¯»å’Œå®è·µï¼Œè®©è‡ªå·±åœ¨æŠ€æœ¯ä¸Šæœ‰æ¯”è¾ƒå¤§çš„æé«˜ã€‚æœ‰ä¸€æ®µæ—¶é—´æˆ‘åšæŒçš„æ¯”è¾ƒå¥½ï¼Œå®Œæˆäº†å¥½å‡ æœ¬æŠ€æœ¯ä¹¦ç±çš„é˜…è¯»ï¼Œä½†å¥½çš„ä¹ æƒ¯å°±æ€•è¢«æ‰“ç ´ï¼Œä¸€æ—¦è¢«æ‰“ç ´å°±å¾ˆéš¾åšæŒäº†ã€‚ä¹‹å‰ä¸€èˆ¬éƒ½æ˜¯ä¸­åˆåˆä¼‘çš„æ—¶é—´ä¼šé˜…è¯»åŠä¸ªå°æ—¶ä»¥ä¸Šçš„æŠ€æœ¯ä¹¦ï¼Œåæ¥å¸¸å¸¸å› ä¸ºä¸­åˆè¦å»æ–°æˆ¿ç›¯è£…ä¿®ï¼ŒåŠ ä¸Šæ¯å¤©è¦åšçš„äº‹æƒ…å¾ˆå¤šï¼ˆå·¥ä½œã€å­¦è‹±è¯­ã€é˜…è¯»ã€è£…ä¿®ï¼‰çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™å¾€å¾€æ˜¯äº‹æƒ…åšäº†ï¼Œä½†æ•ˆæœå¹¶æ²¡æœ‰è¾¾åˆ°é¢„æœŸã€‚</p><h3 id="åˆ†äº«ä¸Š"><a href="#åˆ†äº«ä¸Š" class="headerlink" title="åˆ†äº«ä¸Š"></a>åˆ†äº«ä¸Š</h3><p>2020 å¹´<a href="https://shenxianpeng.github.io/">åšå®¢</a>ä¸Šä¸€å…±æ›´æ–°äº† 41 ç¯‡æ–‡ç« ï¼Œåœ¨å…¬ä¼—å·ã€DevOpsæ”»åŸç‹®ã€ä¸Šé¢ä¸€å…±æ›´æ–°äº† 26 ç¯‡æ–‡ç« ã€‚</p><p>è¿™ä¸ªæ•°é‡å’Œè´¨é‡è·Ÿä¸€äº›å…¶ä»–çš„æŠ€æœ¯å…¬ä¼—å·çœŸçš„æ²¡æ³•æ¯”ï¼Œä½†å¯¹äºæˆ‘ä¸ªäººï¼šä¸€ä¸ªä¸ä»¥å†™ä½œä¸ºç”Ÿã€åªå†™åŸåˆ›æ–‡ç« çš„æ”»åŸç‹®ï¼Œåªè¦èƒ½ä¸é—´æ–­çš„è¾“å‡ºï¼Œè¾¾åˆ°è¿™ä¸ªæ•°é‡æˆ‘å·²ç»æ¯”è¾ƒæ»¡æ„äº†ã€‚</p><p>è€Œä¸”åœ¨å¹´åˆæœ‰ä¸€ä¸ªæ¸…åå¤§å­¦çš„ç¼–è¾‘è€å¸ˆæ‰¾åˆ°æˆ‘ï¼Œæƒ³è®©æˆ‘å‡ºä¸€æœ¬ä¹¦ï¼Œè¿™çœŸæ˜¯è®©æˆ‘å—å® è‹¥æƒŠã€‚æˆ‘çŸ¥é“è‡ªå·±å‡ æ–¤å‡ ä¸¤ï¼Œä½†èƒ½å¤Ÿå—åˆ°é‚€è¯·ï¼Œå¹¶å¯„ç»™æˆ‘åˆåŒï¼Œå°±å·²ç»æ˜¯å¯¹æˆ‘å†™ä½œçš„æœ€å¤§é¼“åŠ±äº†ã€‚</p><p>å½“æ—¶æ‰“ç®—å†™ä¸€æœ¬ã€ŠJenkins 2å®è·µæŒ‡å—ã€‹ï¼Œå¦‚æœç­¾äº†åˆåŒï¼Œæˆ‘å°±éœ€è¦æŠ•å…¥è‡³å°‘ä¸€å¹´çš„ä¸šä½™æ—¶é—´æ­»ç£•è‡ªå·±æ‰æœ‰å¯èƒ½å®Œæˆã€‚</p><p>æœ€åè€ƒè™‘åˆ°è‡ªå·±å½“æ—¶çš„çŠ¶å†µï¼šä¼˜å…ˆåšå¥½å·¥ä½œï¼›å…¶æ¬¡è¿˜æœ‰æ¯”Jenkinsæ›´é‡è¦çš„æŠ€æœ¯æˆ‘éœ€è¦å»å­¦ä¹ ï¼›å¦å¤–å‘¨æœ«è¦è£…ä¿®ç­‰ä¸€ç³»åˆ—çš„äº‹æƒ…â€¦æˆ‘æœ€ç»ˆæ”¾å¼ƒäº†è¿™ä¸ªæœºä¼šã€‚</p><p>æˆ‘çŸ¥é“è‡ªå·±è¿˜å¤„åœ¨è¾“å…¥æ¯”è¾“å‡ºæ›´åŠ è¿«åˆ‡çš„é˜¶æ®µï¼Œæˆ‘æƒ³åªè¦å¿ƒä¸­çš„å°ç«è‹—è¿˜åœ¨ï¼Œä½†è¡Œå¥½äº‹ï¼Œè«é—®å‰ç¨‹ã€‚</p><h2 id="å·¥ä½œ-flag"><a href="#å·¥ä½œ-flag" class="headerlink" title="å·¥ä½œ flag"></a>å·¥ä½œ flag</h2><p>å¯¹äºä¸ªäººå¹´ç»ˆæ€»ç»“ï¼Œä¸ä»…å¯ä»¥å›é¡¾è‡ªå·±è¿‡å»çš„ä¸€å¹´åšäº†å“ªäº›ï¼Œå“ªäº›æ²¡åšå¥½ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥æ”¹è¿›çš„ï¼Œè¿˜èƒ½é€šè¿‡å›é¡¾å’Œæ€»ç»“ä¸ºæ–°å¹´ç«‹ä¸€ä¸ª flagã€‚</p><p>2021 æˆ‘å¸Œæœ›è‡ªå·±èƒ½æ›´åŠ ä¸“æ³¨ï¼Œåˆ©ç”¨å¥½æ—¶é—´ï¼Œæ›´åŠ æœ‰æ•ˆçš„å·¥ä½œå’Œå­¦ä¹ ã€‚</p><p>é™¤äº†åšå¥½å·¥ä½œï¼Œæœ€é‡è¦çš„æ˜¯<strong>æé«˜è‹±è¯­å£è¯­</strong>å’Œ<strong>æ·±å…¥å­¦ä¹ æŠ€æœ¯</strong>ï¼Œå…¶æ¬¡æ‰æ˜¯è¾“å‡ºã€‚</p><p>å…‰æœ‰ flag ä¸è¡Œï¼Œè¿˜è¦è½åˆ°å…·ä½“çš„è¡ŒåŠ¨ä¸Šã€‚</p><h3 id="æé«˜è‹±è¯­å£è¯­"><a href="#æé«˜è‹±è¯­å£è¯­" class="headerlink" title="æé«˜è‹±è¯­å£è¯­"></a>æé«˜è‹±è¯­å£è¯­</h3><p>ğŸš© 2021 ç»§ç»­åšæŒè‡³å°‘æ¯å¤©åŠå°æ—¶å£è¯­æ‰“å¡ç»ƒä¹ ï¼›å¦å¤–æ¯å‘¨ä¸€æ¬¡ 50 åˆ†é’Ÿçš„ä¸å¤–æ•™çš„å£è¯­äº¤æµã€‚å¸Œæœ›èƒ½å¤Ÿè„±ç¨¿è¿›è¡Œè‹±æ–‡åˆ†äº«ï¼ŒåŒæ—¶èƒ½é€šè¿‡è‹±è¯­æ‰˜ä¸šè€ƒè¯•ã€‚</p><h3 id="æ·±å…¥å­¦ä¹ æŠ€æœ¯"><a href="#æ·±å…¥å­¦ä¹ æŠ€æœ¯" class="headerlink" title="æ·±å…¥å­¦ä¹ æŠ€æœ¯"></a>æ·±å…¥å­¦ä¹ æŠ€æœ¯</h3><p>æˆ‘ç°åœ¨å­¦ä¹ æŠ€æœ¯çš„æ–¹å¼æœ‰è¿™ä¹ˆå‡ ç§ï¼šç›´æ¥å»å®˜ç½‘é˜…è¯»è‹±æ–‡æ–‡æ¡£ï¼›å¦‚æœè¯»å®Œè¿˜æ˜¯æ²¡ææ˜ç™½ï¼Œå°±å» Linkedin Learning æˆ–æ˜¯ Udemy ä¸Šå»æœç›¸åº”çš„æŠ€æœ¯ï¼Œä¸ä½†å­¦ä¹ äº†æŠ€æœ¯ï¼ŒåŒæ—¶ä¹Ÿç»ƒä¹ äº†è‹±æ–‡å¬åŠ›ï¼›å¦‚æœéœ€è¦æ·±å…¥ç³»ç»Ÿçš„å»å­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä»¥åŠä¸€äº›åº•å±‚æŠ€æœ¯ï¼Œä¼šå»è¯»ä¸€äº›ç»å…¸æŠ€æœ¯ä¹¦ç±ã€‚</p><p>ğŸš© 2021 å¹´åšæŒæ¯å¤©ä¹Ÿè‡³å°‘åŠä¸ªå°æ—¶æ¥é˜…è¯»æŠ€æœ¯ï¼Œä¸€ä¸ªæœˆè‡³å°‘è¯»å®Œä¸€æœ¬æŠ€æœ¯ä¹¦ç±å¹¶ä¸”æœ‰è¾“å‡ºã€‚</p><h2 id="ç”Ÿæ´»-flag"><a href="#ç”Ÿæ´»-flag" class="headerlink" title="ç”Ÿæ´» flag"></a>ç”Ÿæ´» flag</h2><p>ç”Ÿæ´»ä¸Šå¸Œæœ›å®¶äººå’Œæœ‹å‹éƒ½èƒ½èº«ä½“å¥åº·ï¼Œç”Ÿæ´»å¹¸ç¦ã€‚</p><p>ğŸš© è´¢åŠ¡ç¨³å®šï¼Œæœ€å¥½èƒ½å¢é•¿ï¼›è‡ªå·±èƒ½å¤Ÿå¥åº·ç”Ÿæ´»ï¼Œå‡é‡ 10 æ–¤ã€‚</p><p>æœ€åï¼Œä¸æ—¶çš„æ¥å›é¡¾è‡ªå·± 2021 å¹´çš„ flagï¼Œæ—¶ä¸æ—¶çš„çœ‹çœ‹è‡ªå·±æ˜¯å¦åç¦»äº†æœ€åˆçš„æ–¹å‘ã€‚2021 æˆ‘æ¥äº†ï¼</p><blockquote><h2 id="è¿‡å»çš„å¹´ç»ˆæ€»ç»“"><a href="#è¿‡å»çš„å¹´ç»ˆæ€»ç»“" class="headerlink" title="è¿‡å»çš„å¹´ç»ˆæ€»ç»“"></a>è¿‡å»çš„å¹´ç»ˆæ€»ç»“</h2><p><a href="https://shenxianpeng.github.io/2019/12/2019-summary/">2019 å¹´ç»ˆæ€»ç»“</a><br><a href="https://shenxianpeng.github.io/2018/12/from-qa-to-dev/">2018 ä»æµ‹è¯•åˆ°å¼€å‘çš„äº”ä¸ªæœˆ</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Thought </tag>
            
            <tag> Summary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to backup Jenkins</title>
      <link href="/2020/11/jenkins-backup/"/>
      <url>/2020/11/jenkins-backup/</url>
      
        <content type="html"><![CDATA[<p>I believe most of you have used the Jenkins configuration as code principle, so you build&#x2F;test&#x2F;release process will be described in code.</p><p>It looks like all is good, but not all of the configuration is in code, same of the Jenkins system configuration is store in the Jenkins service, so we also need to backup Jenkins in case of any disaster.</p><p>There are two ways to backup Jenkins, one used Jenkins plugin, the other is create shell scripts.</p><h2 id="Using-plug-in-backup"><a href="#Using-plug-in-backup" class="headerlink" title="Using plug-in backup"></a>Using plug-in backup</h2><p>I used the <code>ThinBackup</code> plugin, here is my thinBackup configuration.</p><p><img src="/2020/11/jenkins-backup/thinBackup-Configuration.png" alt="ThinBackup Configuration"></p><span id="more"></span><ul><li><p>backup to a folder which user <code>jenkins</code> has permission to write. this is important.</p><blockquote><p>Previously I backup Jenkins to a mount folder, but it doesnâ€™t work recently. so I use user <code>jenkins</code> to log in on the Jenkins server and found my <code>jenkins</code> canâ€™t access the directory, but I personal user can.</p></blockquote></li><li><p>I will daily backup my Jenkins server, from Monday to Saturday.</p></li><li><p>Fo me max number of backup sets is 3, because every backup archive more than 400 MB.</p></li><li><p>Others check boxs</p><ul><li>Backup build results</li><li>Backup â€˜userContentâ€™ folder</li><li>Backup next build number file</li><li>Backup plugins archives</li><li>Move old backups to ZIP files</li></ul></li></ul><h2 id="Using-shell-script-backup"><a href="#Using-shell-script-backup" class="headerlink" title="Using shell script backup"></a>Using shell script backup</h2><p>Here is a popular repository and code for your reference.</p><ul><li>repository: <a href="https://github.com/sue445/jenkins-backup-script">https://github.com/sue445/jenkins-backup-script</a></li><li>gist: <a href="https://gist.github.com/abayer/527063a4519f205efc74">https://gist.github.com/abayer/527063a4519f205efc74</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Jenkins </tag>
            
            <tag> Backup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JaCoCo å®ç°åŸç† (JaCoCo Implementation Design)</title>
      <link href="/2020/11/jacoco/"/>
      <url>/2020/11/jacoco/</url>
      
        <content type="html"><![CDATA[<p>æƒ³è¦å¯¹ Java é¡¹ç›®è¿›è¡Œä»£ç è¦†ç›–ç‡çš„æµ‹è¯•ï¼Œå¾ˆå®¹æ˜“å°±æ‰¾åˆ° JaCoCo è¿™ä¸ªå¼€æºä»£ç è¦†ç›–ç‡åˆ†æå·¥å…·æ˜¯ä¼—å¤šå·¥å…·ä¸­æœ€åæ¬¢è¿çš„å“ªä¸€ä¸ªã€‚</p><p>æœ¬ç¯‡ä»…ä»…æ˜¯åœ¨å­¦ä¹  JaCoCo æ—¶å¯¹å…¶å®ç°è®¾è®¡æ–‡æ¡£ <a href="https://www.jacoco.org/jacoco/trunk/doc/implementation.html">https://www.jacoco.org/jacoco/trunk/doc/implementation.html</a> çš„ç²—ç•¥ç¿»è¯‘ã€‚</p><h2 id="å®ç°è®¾è®¡-Implementation-Design"><a href="#å®ç°è®¾è®¡-Implementation-Design" class="headerlink" title="å®ç°è®¾è®¡(Implementation Design)"></a>å®ç°è®¾è®¡(Implementation Design)</h2><p>è¿™æ˜¯å®ç°è®¾è®¡å†³ç­–çš„ä¸€ä¸ªæ— åºåˆ—è¡¨ï¼Œæ¯ä¸ªä¸»é¢˜éƒ½è¯•å›¾éµå¾ªè¿™æ ·çš„ç»“æ„:</p><ul><li>é—®é¢˜é™ˆè¿°</li><li>å»ºè®®çš„è§£å†³æ–¹æ¡ˆ</li><li>é€‰æ‹©å’Œè®¨è®º</li></ul><h3 id="è¦†ç›–ç‡åˆ†ææœºåˆ¶-Coverage-Analysis-Mechanism"><a href="#è¦†ç›–ç‡åˆ†ææœºåˆ¶-Coverage-Analysis-Mechanism" class="headerlink" title="è¦†ç›–ç‡åˆ†ææœºåˆ¶(Coverage Analysis Mechanism)"></a>è¦†ç›–ç‡åˆ†ææœºåˆ¶(Coverage Analysis Mechanism)</h3><blockquote><p>è¦†ç›–ç‡ä¿¡æ¯å¿…é¡»åœ¨è¿è¡Œæ—¶æ”¶é›†ã€‚ä¸ºæ­¤ï¼ŒJaCoCo åˆ›å»ºåŸå§‹ç±»å®šä¹‰çš„æ’è£…ç‰ˆæœ¬ï¼Œæ’è£…è¿‡ç¨‹å‘ç”Ÿåœ¨åŠ è½½ç±»æœŸé—´ä½¿ç”¨ä¸€ä¸ªå«åš Java agents åŠ¨æ€åœ°å®Œæˆã€‚</p></blockquote><p>æœ‰å‡ ç§æ”¶é›†è¦†ç›–ç‡ä¿¡æ¯çš„ä¸åŒæ–¹æ³•ã€‚æ¯ç§æ–¹æ³•éƒ½æœ‰ä¸åŒçš„å®ç°æŠ€æœ¯ã€‚ä¸‹é¢çš„å›¾è¡¨ç»™å‡ºäº† JaCoCo ä½¿ç”¨çš„æŠ€æœ¯çš„æ¦‚è¿°:</p><p><img src="/2020/11/jacoco/implementation.png" alt="å®ç°"></p><p>å­—èŠ‚ç æ’è£…éå¸¸å¿«ï¼Œå¯ä»¥ç”¨çº¯ Java å®ç°ï¼Œå¹¶ä¸”å¯ä»¥ä¸æ¯ä¸ª Java VM ä¸€èµ·å·¥ä½œã€‚å¯ä»¥å°†å¸¦æœ‰ Java ä»£ç†é’©å­çš„åŠ¨æ€æ’è£…æ·»åŠ åˆ° JVM ä¸­ï¼Œè€Œæ— éœ€å¯¹ç›®æ ‡åº”ç”¨ç¨‹åºè¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚</p><p>Java ä»£ç†é’©å­è‡³å°‘éœ€è¦ 1.5 ä¸ª JVMsã€‚ç”¨è°ƒè¯•ä¿¡æ¯(è¡Œå·)ç¼–è¯‘çš„ç±»æ–‡ä»¶å…è®¸çªå‡ºæ˜¾ç¤ºæºä»£ç ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä¸€äº› Java è¯­è¨€ç»“æ„è¢«ç¼–è¯‘æˆå­—èŠ‚ä»£ç ï¼Œä»è€Œäº§ç”Ÿæ„å¤–çš„çªå‡ºæ˜¾ç¤ºç»“æœï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨éšå¼ç”Ÿæˆçš„ä»£ç æ—¶ï¼ˆå¦‚ç¼ºçœæ„é€ å‡½æ•°æˆ– finally è¯­å¥çš„æ§åˆ¶ç»“æ„ï¼‰ã€‚</p><span id="more"></span><h3 id="è¦†ç›–-Agent-éš”ç¦»-Coverage-Agent-Isolation"><a href="#è¦†ç›–-Agent-éš”ç¦»-Coverage-Agent-Isolation" class="headerlink" title="è¦†ç›– Agent éš”ç¦»(Coverage Agent Isolation)"></a>è¦†ç›– Agent éš”ç¦»(Coverage Agent Isolation)</h3><blockquote><p>Java ä»£ç†ç”±åº”ç”¨ç¨‹åºç±»è£…å…¥å™¨è£…å…¥ï¼Œå› æ­¤ä»£ç†çš„ç±»ä¸åº”ç”¨ç¨‹åºç±»ç”Ÿæ´»åœ¨ç›¸åŒçš„åç§°ç©ºé—´ä¸­ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å†²çªï¼Œç‰¹åˆ«æ˜¯ä¸ç¬¬ä¸‰æ–¹åº“ ASMã€‚å› æ­¤ï¼ŒJoCoCo æ„å»ºå°†æ‰€æœ‰ä»£ç†ç±»ç§»åŠ¨åˆ°ä¸€ä¸ªå”¯ä¸€çš„åŒ…ä¸­ã€‚</p></blockquote><p>JaCoCo æ„å»ºå°†åŒ…å«åœ¨ <code>jacocoagent.jar</code> ä¸­çš„æ‰€æœ‰ç±»é‡å‘½åä¸ºå…·æœ‰ <code>org.jacoco.agent.rt_&lt;randomid&gt;</code> å‰ç¼€ï¼ŒåŒ…æ‹¬æ‰€éœ€çš„ ASM åº“ç±»ã€‚æ ‡è¯†ç¬¦æ˜¯ä»ä¸€ä¸ªéšæœºæ•°åˆ›å»ºçš„ï¼Œç”±äºä»£ç†ä¸æä¾›ä»»ä½• APIï¼Œå› æ­¤æ²¡æœ‰äººä¼šå—åˆ°æ­¤é‡å‘½åçš„å½±å“ï¼Œè¿™ä¸ªæŠ€å·§è¿˜å…è®¸ä½¿ç”¨ JaCoCo éªŒè¯ JaCoCo æµ‹è¯•ã€‚</p><h3 id="æœ€ä½çš„Javaç‰ˆæœ¬-Minimal-Java-Version"><a href="#æœ€ä½çš„Javaç‰ˆæœ¬-Minimal-Java-Version" class="headerlink" title="æœ€ä½çš„Javaç‰ˆæœ¬(Minimal Java Version)"></a>æœ€ä½çš„Javaç‰ˆæœ¬(Minimal Java Version)</h3><blockquote><p>JaCoCo éœ€è¦ Java 1.5 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚</p></blockquote><p>Java 1.5 VMs æä¾›äº†ç”¨äºåŠ¨æ€æ’è£…çš„ Java ä»£ç†æœºåˆ¶ã€‚ä½¿ç”¨ Java 1.5 è¯­è¨€çº§åˆ«è¿›è¡Œç¼–ç å’Œæµ‹è¯•æ¯”ä½¿ç”¨æ—§ç‰ˆæœ¬æ›´æœ‰æ•ˆã€æ›´å°‘å‡ºé”™â€”â€”è€Œä¸”æ›´æœ‰è¶£ã€‚JaCoCo ä»ç„¶å…è®¸è¿è¡Œé’ˆå¯¹è¿™äº›ç¼–è¯‘çš„ Java ä»£ç ã€‚</p><h3 id="å­—èŠ‚ç æ“çºµ-Byte-Code-Manipulation"><a href="#å­—èŠ‚ç æ“çºµ-Byte-Code-Manipulation" class="headerlink" title="å­—èŠ‚ç æ“çºµ(Byte Code Manipulation)"></a>å­—èŠ‚ç æ“çºµ(Byte Code Manipulation)</h3><blockquote><p>æ’è£…éœ€è¦ä¿®æ”¹å’Œç”Ÿæˆ Java å­—èŠ‚ç çš„æœºåˆ¶ã€‚JaCoCo åœ¨å†…éƒ¨ä½¿ç”¨ ASM åº“æ¥å®ç°è¿™ä¸ªç›®çš„ã€‚</p></blockquote><p>å®ç° Java å­—èŠ‚ç è§„èŒƒå°†æ˜¯ä¸€é¡¹å¹¿æ³›ä¸”å®¹æ˜“å‡ºé”™çš„ä»»åŠ¡ã€‚å› æ­¤ï¼Œåº”è¯¥ä½¿ç”¨ç°æœ‰çš„åº“ã€‚ASMåº“æ˜¯è½»é‡çº§çš„ï¼Œæ˜“äºä½¿ç”¨ï¼Œåœ¨å†…å­˜å’Œ CPU ä½¿ç”¨æ–¹é¢éå¸¸é«˜æ•ˆï¼Œå®ƒè¢«ç§¯æåœ°ç»´æŠ¤å¹¶åŒ…å«ä¸ºä¸€ä¸ªå·¨å¤§çš„å›å½’æµ‹è¯•å¥—ä»¶ï¼Œå®ƒçš„ç®€åŒ– BSD è®¸å¯è¯å¾—åˆ°äº† Eclipse åŸºé‡‘ä¼šçš„æ‰¹å‡†ï¼Œå¯ä»¥ä¸ EPL äº§å“ä¸€èµ·ä½¿ç”¨ã€‚</p><h3 id="Javaç±»çš„èº«ä»½-Java-Class-Identity"><a href="#Javaç±»çš„èº«ä»½-Java-Class-Identity" class="headerlink" title="Javaç±»çš„èº«ä»½(Java Class Identity)"></a>Javaç±»çš„èº«ä»½(Java Class Identity)</h3><blockquote><p>åœ¨è¿è¡Œæ—¶åŠ è½½çš„æ¯ä¸ªç±»éƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ¥å…³è”è¦†ç›–ç‡æ•°æ®ï¼ŒJaCoCo é€šè¿‡åŸå§‹ç±»å®šä¹‰çš„ CRC64 å“ˆå¸Œä»£ç åˆ›å»ºè¿™æ ·çš„æ ‡è¯†ã€‚</p></blockquote><p>åœ¨å¤šç±»åŠ è½½å™¨ç¯å¢ƒä¸­ï¼Œç±»çš„çº¯åç§°ä¸èƒ½æ˜ç¡®åœ°æ ‡è¯†ç±»ã€‚ä¾‹å¦‚ï¼ŒOSGi å…è®¸åœ¨ç›¸åŒçš„è™šæ‹Ÿæœºä¸­åŠ è½½ç›¸åŒç±»çš„ä¸åŒç‰ˆæœ¬ã€‚åœ¨å¤æ‚çš„éƒ¨ç½²åœºæ™¯ä¸­ï¼Œæµ‹è¯•ç›®æ ‡çš„å®é™…ç‰ˆæœ¬å¯èƒ½ä¸å½“å‰å¼€å‘ç‰ˆæœ¬ä¸åŒã€‚ä»£ç è¦†ç›–ç‡æŠ¥å‘Šåº”è¯¥ä¿è¯æ‰€å‘ˆç°çš„æ•°å­—æ˜¯ä»æœ‰æ•ˆçš„æµ‹è¯•ç›®æ ‡ä¸­æå–å‡ºæ¥çš„ã€‚ç±»å®šä¹‰çš„æ•£åˆ—ä»£ç å…è®¸åŒºåˆ†ç±»å’Œç±»çš„ç‰ˆæœ¬ã€‚CRC64 å“ˆå¸Œè®¡ç®—ç®€å•è€Œå¿«é€Ÿï¼Œç»“æœå¾—åˆ°ä¸€ä¸ªå°çš„64ä½æ ‡è¯†ç¬¦ã€‚</p><p>ç±»åŠ è½½å™¨å¯èƒ½åŠ è½½ç›¸åŒçš„ç±»å®šä¹‰ï¼Œè¿™å°†å¯¼è‡´ Java è¿è¡Œæ—¶ç³»ç»Ÿäº§ç”Ÿä¸åŒçš„ç±»ã€‚å¯¹äºè¦†ç›–ç‡åˆ†ææ¥è¯´ï¼Œè¿™ç§åŒºåˆ«åº”è¯¥æ˜¯ä¸ç›¸å…³çš„ã€‚ç±»å®šä¹‰å¯èƒ½ä¼šè¢«å…¶ä»–åŸºäºæ’è£…çš„æŠ€æœ¯(ä¾‹å¦‚ AspectJ)æ”¹å˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå“ˆå¸Œç å°†æ”¹å˜ï¼Œæ ‡è¯†å°†ä¸¢å¤±ã€‚å¦ä¸€æ–¹é¢ï¼ŒåŸºäºè¢«æ”¹å˜çš„ç±»çš„ä»£ç è¦†ç›–ç‡åˆ†æå°†ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœã€‚CRC64 ä»£ç å¯èƒ½ä¼šäº§ç”Ÿæ‰€è°“çš„å†²çªï¼Œå³ä¸ºä¸¤ä¸ªä¸åŒçš„ç±»åˆ›å»ºç›¸åŒçš„å“ˆå¸Œä»£ç ã€‚å°½ç®¡ CRC64 åœ¨å¯†ç å­¦ä¸Šå¹¶ä¸å¼ºï¼Œè€Œä¸”å¾ˆå®¹æ˜“è®¡ç®—ç¢°æ’ç¤ºä¾‹ï¼Œä½†å¯¹äºå¸¸è§„ç±»æ–‡ä»¶ï¼Œç¢°æ’æ¦‚ç‡éå¸¸ä½ã€‚</p><h3 id="è¦†ç›–è¿è¡Œæ—¶ä¾èµ–-Coverage-Runtime-Dependency"><a href="#è¦†ç›–è¿è¡Œæ—¶ä¾èµ–-Coverage-Runtime-Dependency" class="headerlink" title="è¦†ç›–è¿è¡Œæ—¶ä¾èµ–(Coverage Runtime Dependency)"></a>è¦†ç›–è¿è¡Œæ—¶ä¾èµ–(Coverage Runtime Dependency)</h3><blockquote><p>æ’è£…ä»£ç é€šå¸¸ä¾èµ–äºè´Ÿè´£æ”¶é›†å’Œå­˜å‚¨æ‰§è¡Œæ•°æ®çš„è¦†ç›–è¿è¡Œæ—¶ã€‚JaCoCo åªåœ¨ç”Ÿæˆçš„æ’è£…ä»£ç ä¸­ä½¿ç”¨ JRE ç±»å‹ã€‚</p></blockquote><p>åœ¨ä½¿ç”¨è‡ªå·±çš„ç±»åŠ è½½æœºåˆ¶çš„æ¡†æ¶ä¸­ï¼Œä½¿è¿è¡Œæ—¶åº“å¯¹æ‰€æœ‰æ’è£…ç±»å¯ç”¨å¯èƒ½æ˜¯ä¸€é¡¹ç—›è‹¦æˆ–ä¸å¯èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚è‡ª Java 1.6 <code>java.lang.instrument.Instrumentation</code>ã€‚æ’è£…æœ‰ä¸€ä¸ªæ‰©å±•å¼•å¯¼å¸¦åŠ è½½å™¨çš„APIã€‚å› ä¸ºæˆ‘ä»¬çš„æœ€ä½ç›®æ ‡æ˜¯ Java 1.5ï¼Œæ‰€ä»¥ JaCoCo åªé€šè¿‡å®˜æ–¹çš„ JRE API ç±»å‹æ¥è§£è€¦æ’è£…ç±»å’Œè¦†ç›–è¿è¡Œæ—¶ã€‚æ’è£…çš„ç±»é€šè¿‡ <code>Object.equals(Object)</code> æ–¹æ³•ä¸è¿è¡Œæ—¶é€šä¿¡ã€‚æ’è£…ç±»å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ£€ç´¢å…¶æ¢æµ‹æ•°ç»„å®ä¾‹ã€‚æ³¨æ„ï¼Œåªä½¿ç”¨ JRE APIs:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">access</span> <span class="operator">=</span> ...                          <span class="comment">// Retrieve instance</span></span><br><span class="line"></span><br><span class="line">Object[] args = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">3</span>];</span><br><span class="line">args[<span class="number">0</span>] = Long.valueOf(<span class="number">8060044182221863588</span>); <span class="comment">// class id</span></span><br><span class="line">args[<span class="number">1</span>] = <span class="string">&quot;com/example/MyClass&quot;</span>;             <span class="comment">// class name</span></span><br><span class="line">args[<span class="number">2</span>] = Integer.valueOf(<span class="number">24</span>);               <span class="comment">// probe count</span></span><br><span class="line"></span><br><span class="line">access.equals(args);</span><br><span class="line"></span><br><span class="line"><span class="type">boolean</span>[] probes = (<span class="type">boolean</span>[]) args[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><p>æœ€æ£˜æ‰‹çš„éƒ¨åˆ†å‘ç”Ÿåœ¨ç¬¬ 1 è¡Œï¼Œä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå¿…é¡»è·å¾—é€šè¿‡ equals() æ–¹æ³•æä¾›å¯¹è¦†ç›–è¿è¡Œæ—¶è®¿é—®çš„å¯¹è±¡å®ä¾‹ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»å®æ–½å’Œæµ‹è¯•äº†ä¸åŒçš„æ–¹æ³•:</p><ul><li><code>SystemPropertiesRuntime</code>: è¿™ç§æ–¹æ³•å°†å¯¹è±¡å®ä¾‹å­˜å‚¨åœ¨ç³»ç»Ÿå±æ€§ä¸‹ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆæ‰“ç ´äº†ç³»ç»Ÿå±æ€§å¿…é¡»åªåŒ…å« <code>java.lang.String</code> çš„çº¦å®šã€‚å­—ç¬¦ä¸²å€¼ï¼Œå› æ­¤ä¼šåœ¨ä¾èµ–äºæ­¤å®šä¹‰çš„åº”ç”¨ç¨‹åº(å¦‚Ant)ä¸­é€ æˆéº»çƒ¦ã€‚</li><li><code>LoggerRuntime</code>: è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å…±äº«çš„ <code>java.util.logging.Logger</code>ã€‚å¹¶é€šè¿‡æ—¥å¿—å‚æ•°æ•°ç»„è€Œä¸æ˜¯ equals() æ–¹æ³•è¿›è¡Œé€šä¿¡ã€‚è¦†ç›–è¿è¡Œæ—¶æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰å¤„ç†ç¨‹åºæ¥æ¥æ”¶å‚æ•°æ•°ç»„ã€‚è¿™ç§æ–¹æ³•å¯èƒ½ä¼šç ´åå®‰è£…è‡ªå·±æ—¥å¿—ç®¡ç†å™¨çš„ç¯å¢ƒ(ä¾‹å¦‚Glassfish)ã€‚</li><li><code>ModifiedSystemClassRuntime</code>: è¿™ç§æ–¹æ³•é€šè¿‡æ’è£…å°†å…¬å…±é™æ€å­—æ®µæ·»åŠ åˆ°ç°æœ‰çš„ JRE ç±»ä¸­ã€‚ä¸ä¸Šé¢çš„å…¶ä»–æ–¹æ³•ä¸åŒï¼Œæ­¤æ–¹æ³•ä»…é€‚ç”¨äºæ´»åŠ¨ Java ä»£ç†çš„ç¯å¢ƒã€‚</li><li><code>InjectedClassRuntime</code>ï¼šè¿™ä¸ªæ–¹æ³•ä½¿ç”¨ Java 9 ä¸­å¼•å…¥çš„ <code>java.lang.invoke.MethodHandles.Lookup.defineClass</code> å®šä¹‰äº†ä¸€ä¸ªæ–°ç±»ã€‚</li></ul><p>ä» 0.8.3 ç‰ˆæœ¬å¼€å§‹ï¼Œåœ¨ JRE 9 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸Šè¿è¡Œæ—¶ï¼ŒJaCoCo Java ä»£ç†å®ç°ä½¿ç”¨ <code>InjectedClassRuntime</code> åœ¨å¼•å¯¼ç±»è£…å…¥å™¨ä¸­å®šä¹‰æ–°ç±»ï¼Œå¦åˆ™ä½¿ç”¨<code>ModifiedSystemClassRuntime</code> å‘ç°æœ‰ JRE ç±»æ·»åŠ å­—æ®µã€‚ä»ç‰ˆæœ¬ 0.8.0 å¼€å§‹ï¼Œå­—æ®µè¢«æ·»åŠ åˆ°ç±» <code>java.lang.UnknownError</code> ä¸­ã€‚version 0.5.0 - 0.7.9 å‘ç±» <code>java.util.UUID</code> ä¸­æ·»åŠ äº†å­—æ®µï¼Œä¸å…¶ä»–ä»£ç†å‘ç”Ÿå†²çªçš„å¯èƒ½æ€§è¾ƒå¤§ã€‚</p><h3 id="å†…å­˜ä½¿ç”¨-Memory-Usage"><a href="#å†…å­˜ä½¿ç”¨-Memory-Usage" class="headerlink" title="å†…å­˜ä½¿ç”¨(Memory Usage)"></a>å†…å­˜ä½¿ç”¨(Memory Usage)</h3><blockquote><p>å¯¹äºå…·æœ‰æ•°åƒç±»æˆ–æ•°åä¸‡è¡Œä»£ç çš„å¤§å‹é¡¹ç›®ï¼Œè¦†ç›–ç‡åˆ†æåº”è¯¥æ˜¯å¯èƒ½çš„ã€‚ä¸ºäº†å…è®¸åˆç†çš„å†…å­˜ä½¿ç”¨ï¼Œè¦†ç›–ç‡åˆ†ææ˜¯åŸºäºæµæ¨¡å¼å’Œâ€œæ·±åº¦ä¼˜å…ˆâ€éå†çš„ã€‚</p></blockquote><p>ä¸€ä¸ªåºå¤§çš„è¦†ç›–ç‡æŠ¥å‘Šçš„å®Œæ•´æ•°æ®æ ‘å¤ªå¤§äº†ï¼Œæ— æ³•é€‚åˆåˆç†çš„å †å†…å­˜é…ç½®ã€‚å› æ­¤ï¼Œè¦†ç›–ç‡åˆ†æå’ŒæŠ¥å‘Šç”Ÿæˆè¢«å®ç°ä¸ºâ€œæ·±åº¦ä¼˜å…ˆâ€éå†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä»»ä½•æ—¶é—´ç‚¹ï¼Œå·¥ä½œè®°å¿†ä¸­åªéœ€è¦ä¿å­˜ä»¥ä¸‹æ•°æ®:</p><ul><li>å½“å‰æ­£åœ¨å¤„ç†çš„å•ä¸ªç±»ã€‚</li><li>è¿™ä¸ªç±»çš„æ‰€æœ‰çˆ¶ç±»(åŒ…ã€ç»„)çš„æ±‡æ€»ä¿¡æ¯ã€‚</li></ul><h3 id="Javaå…ƒç´ æ ‡è¯†ç¬¦-Java-Element-Identifiers"><a href="#Javaå…ƒç´ æ ‡è¯†ç¬¦-Java-Element-Identifiers" class="headerlink" title="Javaå…ƒç´ æ ‡è¯†ç¬¦(Java Element Identifiers)"></a>Javaå…ƒç´ æ ‡è¯†ç¬¦(Java Element Identifiers)</h3><blockquote><p>Java è¯­è¨€å’Œ Java VM å¯¹Java å…ƒç´ ä½¿ç”¨ä¸åŒçš„å­—ç¬¦ä¸²è¡¨ç¤ºæ ¼å¼ã€‚ä¾‹å¦‚ï¼ŒJava ä¸­çš„ç±»å‹å¼•ç”¨è¯»èµ·æ¥åƒ <code>java.lang.Object</code>ã€‚å¯¹è±¡ï¼ŒVM å¼•ç”¨çš„ç±»å‹ä¸ <code>Ljava/lang/Object</code> ç›¸åŒã€‚JaCoCo API ä»…åŸºäºVMæ ‡è¯†ç¬¦ã€‚</p></blockquote><p>ç›´æ¥ä½¿ç”¨ VM æ ‡è¯†ç¬¦ä¸ä¼šåœ¨è¿è¡Œæ—¶é€ æˆä»»ä½•è½¬æ¢å¼€é”€ã€‚æœ‰å‡ ç§åŸºäº Java VM çš„ç¼–ç¨‹è¯­è¨€å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç¬¦å·ã€‚å› æ­¤ï¼Œç‰¹å®šçš„è½¬æ¢åº”è¯¥åªåœ¨ç”¨æˆ·ç•Œé¢çº§åˆ«å‘ç”Ÿï¼Œä¾‹å¦‚åœ¨æŠ¥è¡¨ç”ŸæˆæœŸé—´ã€‚</p><h3 id="JaCoCoå®ç°çš„æ¨¡å—åŒ–-Modularization-of-the-JaCoCo-implementation"><a href="#JaCoCoå®ç°çš„æ¨¡å—åŒ–-Modularization-of-the-JaCoCo-implementation" class="headerlink" title="JaCoCoå®ç°çš„æ¨¡å—åŒ–(Modularization of the JaCoCo implementation)"></a>JaCoCoå®ç°çš„æ¨¡å—åŒ–(Modularization of the JaCoCo implementation)</h3><blockquote><p>JaCoCo æ˜¯åœ¨æä¾›ä¸åŒåŠŸèƒ½çš„å‡ ä¸ªæ¨¡å—ä¸­å®ç°çš„ã€‚è¿™äº›æ¨¡å—æ˜¯ä½œä¸ºå¸¦æœ‰é€‚å½“æ¸…å•æ–‡ä»¶çš„ OSGi åŒ…æä¾›çš„ã€‚ä½†æ˜¯å®ƒä¸ä¾èµ–äº OSGi æœ¬èº«ã€‚</p></blockquote><p>ä½¿ç”¨ OSGi bundle å…è®¸åœ¨å¼€å‘æ—¶å’Œè¿è¡Œæ—¶åœ¨ OSGi å®¹å™¨ä¸­å®šä¹‰è‰¯å¥½çš„ä¾èµ–å…³ç³»ã€‚ç”±äºå¯¹ OSGi æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œæ†ç»‘åŒ…ä¹Ÿå¯ä»¥åƒæ™®é€šçš„ JAR æ–‡ä»¶ä¸€æ ·ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Coverage </tag>
            
            <tag> JaCoCo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ansible å®è·µ</title>
      <link href="/2020/10/ansible-practice/"/>
      <url>/2020/10/ansible-practice/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æ€è€ƒå¦‚ä½•å°†å›¢é˜Ÿé‡Œçš„æ‰€æœ‰çš„è™šæ‹Ÿæœºéƒ½å¾ˆå¥½çš„ç®¡ç†å¹¶ç›‘æ§èµ·æ¥ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬çš„è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿç¹å¤šï¼ŒåŒ…æ‹¬ Windows, Linux, AIX, HP-UX, Solaris SPARC å’Œ Solaris x86. åˆ°åº•é€‰æ‹©å“ªç§æ–¹å¼æ¥ç®¡ç†æ¯”è¾ƒå¥½å‘¢ï¼Ÿè¿™éœ€è¦ç»“åˆå…·ä½“åœºæ™¯æ¥è€ƒè™‘ã€‚</p><h2 id="Ansible-å’Œå…¶ä»–å·¥å…·çš„å¯¹æ¯”"><a href="#Ansible-å’Œå…¶ä»–å·¥å…·çš„å¯¹æ¯”" class="headerlink" title="Ansible å’Œå…¶ä»–å·¥å…·çš„å¯¹æ¯”"></a>Ansible å’Œå…¶ä»–å·¥å…·çš„å¯¹æ¯”</h2><p>è¿™é‡Œæœ‰ä¸€ä¸ªå…³äº Chefï¼ŒPuppetï¼ŒAnsible å’Œ Saltstack çš„å¯¹æ¯”æ–‡ç« </p><blockquote><p><a href="https://www.edureka.co/blog/chef-vs-puppet-vs-ansible-vs-saltstack/">https://www.edureka.co/blog/chef-vs-puppet-vs-ansible-vs-saltstack/</a></p></blockquote><h2 id="é€‰æ‹©åˆé€‚çš„å·¥å…·"><a href="#é€‰æ‹©åˆé€‚çš„å·¥å…·" class="headerlink" title="é€‰æ‹©åˆé€‚çš„å·¥å…·"></a>é€‰æ‹©åˆé€‚çš„å·¥å…·</h2><h3 id="ä»…ç®¡ç†-Windows-å’Œ-Linux"><a href="#ä»…ç®¡ç†-Windows-å’Œ-Linux" class="headerlink" title="ä»…ç®¡ç† Windows å’Œ Linux"></a>ä»…ç®¡ç† Windows å’Œ Linux</h3><p>å¦‚æœä½ çš„è™šæ‹Ÿæœºæ²¡æœ‰è¿™ä¹ˆå¤šå¹³å°ï¼Œåªæ˜¯ Windows å’Œ Linuxï¼Œå‡å¦‚ä½ å·²ç»æœ‰äº† VMware vSphere æ¥ç®¡ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ VMware vSphere API æ¥æŸ¥çœ‹è¿™äº›æœºå™¨çš„çŠ¶æ€ã€‚</p><p>è¿™é‡Œæ˜¯ VMware å®˜æ–¹çš„ API Library ä¾›ä½¿ç”¨ï¼š</p><ul><li><a href="https://github.com/vmware/pyvmomi">VMware vSphere API Python Bindings</a></li><li><a href="https://github.com/vmware/govmomi">Go library for the VMware vSphere API</a></li></ul><h3 id="ç®¡ç†å¤šä¸ªæ“ä½œç³»ç»Ÿ"><a href="#ç®¡ç†å¤šä¸ªæ“ä½œç³»ç»Ÿ" class="headerlink" title="ç®¡ç†å¤šä¸ªæ“ä½œç³»ç»Ÿ"></a>ç®¡ç†å¤šä¸ªæ“ä½œç³»ç»Ÿ</h3><p>å¦‚æœä½ å’Œæˆ‘çš„æƒ…å†µä¸€ä¸‹ï¼Œæƒ³ç›‘æ§å¾ˆå¤šä¸ªæ“ä½œæ“ä½œç³»ç»Ÿï¼Œé‚£ä¹ˆå°±åªèƒ½é€šè¿‡ ssh æ¥ç™»å½•åˆ°æ¯ä¸€å°æœºå™¨ä¸Šå»æŸ¥çœ‹ï¼Œæ¯”å¦‚æ‰§è¡Œ <code>uptime</code> ç­‰å‘½ä»¤ã€‚å¯ä»¥å†™ shell è„šæœ¬æ¥å®Œæˆè¿™äº›ç™»å½•ã€æ£€æµ‹ç­‰æ“ä½œã€‚</p><p>å¦å¤–å°±æ˜¯ä½¿ç”¨ Ansible çš„ Playbookã€‚Playbook é‡Œæè¿°äº†ä½ è¦åšçš„æ“ä½œï¼Œè¿™æ˜¯ä¸€ä¸ªæƒè¡¡ï¼Œå­¦ä¹  Ansible çš„ Playbook éœ€è¦èŠ±äº›æ—¶é—´çš„ã€‚</p><p>å¦‚æœæƒ³äº†è§£ä¸‹ Ansible é‚£ä¹ˆå¯ä»¥è¯•è¯• Ansible Playbookã€‚ä»¥ä¸‹æ˜¯æˆ‘ä½¿ç”¨ Ansible åšäº†ä¸€äº›ç»ƒä¹ ã€‚</p><h4 id="Playbookç»“æ„"><a href="#Playbookç»“æ„" class="headerlink" title="Playbookç»“æ„"></a>Playbookç»“æ„</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">+- vars</span><br><span class="line">|   +- vars.yml</span><br><span class="line">|   +- ...</span><br><span class="line">+- hosts               <span class="comment"># save all hosts you want to monitor</span></span><br><span class="line">+- run.yml             <span class="comment"># ansible executable file</span></span><br></pre></td></tr></table></figure><h4 id="Playbookå…·ä½“ä»£ç "><a href="#Playbookå…·ä½“ä»£ç " class="headerlink" title="Playbookå…·ä½“ä»£ç "></a>Playbookå…·ä½“ä»£ç </h4><span id="more"></span><p>vars&#x2F;vars.yml</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># system</span></span><br><span class="line"><span class="attr">ip:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; ansible_default_ipv4[&#x27;address&#x27;] &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">host_name:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; ansible_hostname &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">os:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; ansible_distribution &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; ansible_distribution_version &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">total_mb:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; ansible_memtotal_mb &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">vcpus:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; ansible_processor_vcpus &#125;&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><p>hosts</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line">[<span class="string">unix-vm</span>]</span><br><span class="line"><span class="string">aix</span> <span class="string">ansible_host=walbld01.dev.company.com</span> <span class="string">ansible_user=test</span> <span class="string">ansible_become_pass=test</span></span><br><span class="line"><span class="string">hp-ux</span>  <span class="string">ansible_host=walbld04.dev.company.com</span> <span class="string">ansible_user=test</span> <span class="string">ansible_become_pass=test</span></span><br><span class="line"><span class="string">linux</span> <span class="string">ansible_host=walbld05.dev.company.com</span> <span class="string">ansible_user=test</span> <span class="string">ansible_become_pass=test</span></span><br><span class="line"></span><br><span class="line">[<span class="string">win-vm</span>]</span><br><span class="line"><span class="string">win-bld02</span> <span class="string">ansible_host=walbld02.dev.company.com</span> <span class="string">ansible_user=Administrator</span> <span class="string">ansible_password=admin</span> <span class="string">ansible_port=5985</span> <span class="string">ansible_connection=winrm</span> <span class="string">ansible_winrm_server_cert_validation=ignore</span></span><br><span class="line"></span><br><span class="line">[<span class="string">other-vm</span>]</span><br><span class="line"><span class="string">solaris</span> <span class="string">ansible_host=walbld07.dev.company.com</span> <span class="string">ansible_user=test</span> <span class="string">ansible_become_pass=test</span></span><br><span class="line"><span class="string">win-udb03</span> <span class="string">ansible_host=walbld03.dev.company.com</span> <span class="string">ansible_user=administrator</span> <span class="string">ansible_become_pass=admin</span></span><br></pre></td></tr></table></figure><p>run.yml</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># this playbook is simple test</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;get unix build machine info&quot;</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">unix-vm</span></span><br><span class="line">  <span class="attr">gather_facts:</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">get</span> <span class="string">uname,</span> <span class="string">hostname</span> <span class="string">and</span> <span class="string">uptime</span></span><br><span class="line">    <span class="attr">shell:</span> <span class="string">&quot;uname &amp;&amp; hostname &amp;&amp; uptime&quot;</span></span><br><span class="line">    <span class="attr">register:</span> <span class="string">output</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">debug:</span> <span class="string">var=output[&#x27;stdout_lines&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;get windows build machine os info&quot;</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">win-vm</span></span><br><span class="line">  <span class="attr">gather_facts:</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">debug:</span> <span class="string">var=hostvars[&#x27;win-bld02&#x27;].ansible_facts.hostname</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">debug:</span> <span class="string">var=hostvars[&#x27;win-bld02&#x27;].ansible_distribution</span></span><br></pre></td></tr></table></figure><h4 id="å¦‚ä½•æ‰§è¡Œ"><a href="#å¦‚ä½•æ‰§è¡Œ" class="headerlink" title="å¦‚ä½•æ‰§è¡Œ"></a>å¦‚ä½•æ‰§è¡Œ</h4><p>é¦–å…ˆéœ€è¦å®‰è£…äº† ansibleï¼Œç„¶åæ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># run with playbook</span></span><br><span class="line">ansible-playbook -i hosts run.yml</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šä¸Šé¢çš„ä»£ç æ˜¯è„±æ•è¿‡çš„ï¼Œéœ€è¦æ ¹æ®ä½ çš„ç¯å¢ƒè¿›è¡Œè°ƒæ•´æ‰èƒ½æ‰§è¡ŒæˆåŠŸã€‚</p></blockquote><h2 id="Ansible-TroubleShotting"><a href="#Ansible-TroubleShotting" class="headerlink" title="Ansible TroubleShotting"></a>Ansible TroubleShotting</h2><p><code>&quot;msg&quot;: &quot;winrm or requests is not installed: No module named winrm&quot;</code></p><p>Need install <code>pywinrm</code> on your master server.</p><p>â€œmsgâ€: â€œplaintext: auth method plaintext requires a passwordâ€</p><p>when I run <code>ansible mywin -i hosts -m win_ping -vvv</code>, I notice the output used Python2.7, so I install <code>pywinrm</code> with command <code>sudo pip2 install pywinrm</code>, then my problem was resolved.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">mywin | UNREACHABLE! =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;changed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;plaintext: auth method plaintext requires a password&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;unreachable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Result: You should be using ansible_password and not ansible_pass. <a href="https://github.com/ansible/ansible/issues/16858#issuecomment-250908554">link</a></p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†™ç»™é‚£äº›æƒ³ä½¿ç”¨ JFrog Artifactory ç®¡ç†åˆ¶å“çš„äºº</title>
      <link href="/2020/10/what-is-artifactory/"/>
      <url>/2020/10/what-is-artifactory/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘åœ¨ä½¿ç”¨ Artifactory åšæŒç»­é›†æˆå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¯¹ä¼ä¸šçº§ Artifactory ä¹Ÿæœ‰äº†ä¸€äº›ç»éªŒå’Œæ€»ç»“ï¼Œå¸Œæœ›èƒ½é€šè¿‡æœ¬ç¯‡çš„åˆ†äº«å¸®åŠ©åˆšæ¥è§¦è¿™ä¸ªå·¥å…·çš„äººäº†è§£ä»€ä¹ˆæ˜¯Artifactoryï¼Œå®ƒèƒ½åšä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦é€‰æ‹©å®ƒï¼Œä»¥åŠåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åº”è¯¥æ³¨æ„ä»€ä¹ˆã€‚</p><h2 id="ä»€ä¹ˆæ˜¯Artifactory"><a href="#ä»€ä¹ˆæ˜¯Artifactory" class="headerlink" title="ä»€ä¹ˆæ˜¯Artifactory"></a>ä»€ä¹ˆæ˜¯Artifactory</h2><p>ä¸€å¥è¯æ¦‚æ‹¬ï¼šArtifactory æ˜¯ä¸€ä¸ªå­˜æ”¾åˆ¶å“ï¼ˆArtifactsï¼‰çš„å·¥å…·ã€‚å½“å‰ï¼ŒArtifactory æ˜¯ä¸€ä¸ªéå¸¸æœ‰å½±å“åŠ›ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§çš„å·¥å…·ã€‚</p><h2 id="Artifactoryæœ‰å“ªäº›ä¼˜åŠ¿"><a href="#Artifactoryæœ‰å“ªäº›ä¼˜åŠ¿" class="headerlink" title="Artifactoryæœ‰å“ªäº›ä¼˜åŠ¿"></a>Artifactoryæœ‰å“ªäº›ä¼˜åŠ¿</h2><p>å¯èƒ½ä½ çš„å›¢é˜Ÿå·²ç»æœ‰äº†è‡ªå·±çš„ç®¡ç†åˆ¶å“çš„æ–¹å¼ï¼Œæ¯”å¦‚ FTP ç­‰ã€‚Artifactory èƒ½å¸¦æ¥ä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘å…ˆæ¥çœ‹çœ‹å®ƒæœ‰å“ªäº›ä¼˜åŠ¿ã€‚</p><blockquote><p>æ³¨ï¼šä»¥ä¸‹ä¼˜åŠ¿éƒ½æ˜¯é’ˆå¯¹ JFrog Aritifacvtory ä¼ä¸šç‰ˆæ¥ä»‹ç»çš„ã€‚å¼€æºç‰ˆï¼Œå³ OSS ç‰ˆæœ¬ä¸å…·å¤‡ä»¥ä¸‹ä¸°å¯Œçš„åŠŸèƒ½ã€‚</p></blockquote><h3 id="ä¼˜åŠ¿1ï¼šå®ƒæ˜¯ä¸€ä¸ªé€šç”¨ç®¡ç†ä»“åº“"><a href="#ä¼˜åŠ¿1ï¼šå®ƒæ˜¯ä¸€ä¸ªé€šç”¨ç®¡ç†ä»“åº“" class="headerlink" title="ä¼˜åŠ¿1ï¼šå®ƒæ˜¯ä¸€ä¸ªé€šç”¨ç®¡ç†ä»“åº“"></a>ä¼˜åŠ¿1ï¼šå®ƒæ˜¯ä¸€ä¸ªé€šç”¨ç®¡ç†ä»“åº“</h3><p>JFrog Artifactory ä¼ä¸šç‰ˆå®Œå…¨æ”¯æŒæ‰€æœ‰ä¸»è¦åŒ…æ ¼å¼çš„å­˜å‚¨åº“ç®¡ç†å™¨ã€‚å®ƒä¸ä½†å¯ä»¥ç®¡ç†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å¯¹å¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰è¯­è¨€çš„åŒ…çš„ä¾èµ–è¿›è¡Œç®¡ç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/2020/10/what-is-artifactory/support-package-formats.png" alt="ä¸»è¦çš„åŒ…æ ¼å¼"></p><p>å› æ­¤ï¼Œä½¿ç”¨ Artifactory èƒ½å¤Ÿå°†æ‰€æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶å’ŒåŒ…å­˜å‚¨åœ¨<strong>ä¸€ä¸ªåœ°æ–¹</strong>ã€‚</p><span id="more"></span><h3 id="ä¼˜åŠ¿2ï¼šè·Ÿ-CI-å·¥å…·æ›´å¥½çš„é›†æˆ"><a href="#ä¼˜åŠ¿2ï¼šè·Ÿ-CI-å·¥å…·æ›´å¥½çš„é›†æˆ" class="headerlink" title="ä¼˜åŠ¿2ï¼šè·Ÿ CI å·¥å…·æ›´å¥½çš„é›†æˆ"></a>ä¼˜åŠ¿2ï¼šè·Ÿ CI å·¥å…·æ›´å¥½çš„é›†æˆ</h3><p>å®ƒæ”¯æŒæ‰€æœ‰ä¸»æµ CI å·¥å…·ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œå¹¶åœ¨éƒ¨ç½²æœŸé—´èƒ½æ•è·è¯¦å°½çš„æ„å»ºç¯å¢ƒä¿¡æ¯ï¼Œä»¥å®ç°å¯å®Œå…¨å¤åˆ¶çš„æ„å»º</p><p><img src="/2020/10/what-is-artifactory/ci-tools.png" alt="æ”¯æŒçš„ CI å·¥å…·"></p><p>å¦å¤–é€šè¿‡æä¾›çš„ä¸°å¯Œçš„ REST APIï¼Œå› æ­¤ GUI é¡µé¢ä¸Šçš„ä»»ä½•æ“ä½œéƒ½å¯ä»¥é€šè¿‡ä»£ç ä»¥ç¼–ç¨‹æ–¹å¼å®Œæˆï¼Œæ–¹ä¾¿å®ç° CI&#x2F;CDã€‚</p><h3 id="ä¼˜åŠ¿3ï¼šæä¾›å¼ºå¤§çš„æœç´¢åŠŸèƒ½"><a href="#ä¼˜åŠ¿3ï¼šæä¾›å¼ºå¤§çš„æœç´¢åŠŸèƒ½" class="headerlink" title="ä¼˜åŠ¿3ï¼šæä¾›å¼ºå¤§çš„æœç´¢åŠŸèƒ½"></a>ä¼˜åŠ¿3ï¼šæä¾›å¼ºå¤§çš„æœç´¢åŠŸèƒ½</h3><p>å¦‚æœä½ çš„æ„å»ºæ˜¯å­˜å‚¨åœ¨ FTP ä¸Šï¼Œæƒ³ä»å¤§é‡çš„åˆ¶å“ä¸­æ‰¾åˆ°ä½ è¦æ‰¾çš„é‚£ä¸€ä¸ªï¼Œå¦‚æœä¸çŸ¥é“å®ƒçš„åå­—ï¼Œé‚£ä¹ˆçœŸçš„å¾ˆéš¾æ‰¾åˆ°å®ƒã€‚</p><p>Artifactory æä¾›äº†å¼ºå¤§çš„æœç´¢åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å¸¦æœ‰æ­£åˆ™è¡¨è¾¾çš„åå­—è¿›è¡Œæœç´¢ï¼›è¿˜å¯ä»¥é€šè¿‡æ–‡ä»¶çš„ checksumï¼›ä»¥åŠé€šè¿‡å±æ€§ï¼ˆPropertiesï¼‰ç­‰æ–¹å¼è¿›è¡Œå¿«é€Ÿæœç´¢ï¼Œå¦‚ä¸‹ç¤ºä¾‹</p><h4 id="ä¾‹1ï¼šé€šè¿‡åå­—æœç´¢"><a href="#ä¾‹1ï¼šé€šè¿‡åå­—æœç´¢" class="headerlink" title="ä¾‹1ï¼šé€šè¿‡åå­—æœç´¢"></a>ä¾‹1ï¼šé€šè¿‡åå­—æœç´¢</h4><p>ä½ æƒ³æ‰¾æŸä¸€ä¸ªæäº¤ç‚¹çš„æ„å»ºåˆ¶å“ï¼Œæ¯”å¦‚é‚£ä¸ªæäº¤ç‚¹çš„ commit hash æ˜¯ <code>a422912</code>ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ç›´æ¥è¾“å…¥ <code>*a422912*</code> å›è½¦ï¼Œå°±èƒ½å¿«é€Ÿçš„ä»ä¼—å¤šçš„åˆ¶å“ä¸­æ‰¾åˆ°ï¼Œä¾‹å¦‚ Demo_Linux_bin_a422912.zip</p><p><img src="/2020/10/what-is-artifactory/search-by-name.png" alt="é€šè¿‡åå­—æ¥æœç´¢"></p><h4 id="ä¾‹2ï¼šé€šè¿‡å±æ€§æœç´¢"><a href="#ä¾‹2ï¼šé€šè¿‡å±æ€§æœç´¢" class="headerlink" title="ä¾‹2ï¼šé€šè¿‡å±æ€§æœç´¢"></a>ä¾‹2ï¼šé€šè¿‡å±æ€§æœç´¢</h4><p>æ¯”å¦‚è¦æ‰¾å±æ€§ <code>release.status</code> ä¸º <code>released</code> çš„æ‰€æœ‰æ„å»ºé‚£ä¹ˆå°±å¯ä»¥è¿™æ ·æœç´¢ã€‚</p><p><img src="/2020/10/what-is-artifactory/search-by-property.png" alt="é€šè¿‡å±æ€§æ¥æœç´¢"></p><h4 id="ä¾‹3ï¼šé€šè¿‡-checksum-æœç´¢"><a href="#ä¾‹3ï¼šé€šè¿‡-checksum-æœç´¢" class="headerlink" title="ä¾‹3ï¼šé€šè¿‡ checksum æœç´¢"></a>ä¾‹3ï¼šé€šè¿‡ checksum æœç´¢</h4><p>å¦‚æœåªçŸ¥é“æ–‡ä»¶çš„ <code>checksum</code>ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥è¿›è¡Œæœç´¢ã€‚ä¾‹å¦‚é€šè¿‡ <code>sha1sum</code> è®¡ç®—å‡ºæ–‡ä»¶çš„ <code>checksum</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sha1sum</span> test.zip</span><br><span class="line">ad62c72fb097fc4aa7723e1fc72b08a6ebcacfd1 *test.zip</span><br></pre></td></tr></table></figure><p><img src="/2020/10/what-is-artifactory/search-by-checksum.png" alt="é€šè¿‡ Checksum æ¥æœç´¢"></p><h3 id="ä¼˜åŠ¿4ï¼šç®¡ç†åˆ¶å“çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ä¼˜åŠ¿4ï¼šç®¡ç†åˆ¶å“çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä¼˜åŠ¿4ï¼šç®¡ç†åˆ¶å“çš„ç”Ÿå‘½å‘¨æœŸ"></a>ä¼˜åŠ¿4ï¼šç®¡ç†åˆ¶å“çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>é€šè¿‡å®šä¹‰ä¸åŒæˆç†Ÿåº¦å­˜å‚¨åº“ï¼Œç„¶åä½¿ç”¨ Artifactory <code>Promote</code> åŠŸèƒ½å¯ä»¥å°†åˆ¶å“ç§»åŠ¨åˆ°ä¸åŒçš„æˆç†Ÿåº¦å­˜å‚¨åº“ï¼Œä»¥åŠé€šè¿‡å…ƒæ•°æ®å±æ€§ï¼Œæ›´å¥½çš„ç®¡ç†å’Œç»´æŠ¤åˆ¶å“çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>é™¤äº†è¿™äº›ä¼˜åŠ¿ä¹‹å¤–ï¼ŒArtifactory è¿˜æœ‰æ›´å¤šçš„ç‰¹ç‚¹ï¼Œæˆ‘å°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚</p><blockquote><p>æ›´å¤šåŠŸèƒ½å¯ä»¥æµè§ˆ JFrog Artifactory çš„å®˜æ–¹ä»‹ç» <a href="https://jfrog.com/artifactory/features/">https://jfrog.com/artifactory/features/</a></p></blockquote><p>æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ª Demo æ¥ä»‹ç» Artifactory åº”è¯¥æ€ä¹ˆä½¿ç”¨ï¼Œä»¥åŠå…¶ä¸­æœ‰å“ªäº›æœ€ä½³å®è·µï¼Œé¿å…èµ°å¼¯è·¯ã€‚</p><h2 id="Artifactoryé¦–é¡µä»‹ç»"><a href="#Artifactoryé¦–é¡µä»‹ç»" class="headerlink" title="Artifactoryé¦–é¡µä»‹ç»"></a>Artifactoryé¦–é¡µä»‹ç»</h2><p><img src="/2020/10/what-is-artifactory/artifactory-home.png" alt="Artifactory Home"></p><h3 id="é¡µé¢é¡¶éƒ¨"><a href="#é¡µé¢é¡¶éƒ¨" class="headerlink" title="é¡µé¢é¡¶éƒ¨"></a>é¡µé¢é¡¶éƒ¨</h3><p>ä½ å¯ä»¥çœ‹åˆ°è¿™ä¸ª Artifactory å·²ç»æœåŠ¡äº†è¶…è¿‡ 5000 ä»¶çš„åˆ¶å“ã€‚è¿˜å¯ä»¥çœ‹åˆ° Artifactory çš„å½“å‰ç‰ˆæœ¬å·ï¼Œä»¥åŠæœ€æ–°ç‰ˆæœ¬ã€‚</p><h3 id="é¡µé¢ä¸­éƒ¨ï¼Œä»å·¦åˆ°å³"><a href="#é¡µé¢ä¸­éƒ¨ï¼Œä»å·¦åˆ°å³" class="headerlink" title="é¡µé¢ä¸­éƒ¨ï¼Œä»å·¦åˆ°å³"></a>é¡µé¢ä¸­éƒ¨ï¼Œä»å·¦åˆ°å³</h3><ol><li><p>æœ€å·¦è¾¹æ˜¯æœç´¢åŠŸèƒ½ï¼Œé€šè¿‡ä¸°å¯Œçš„æœç´¢æ¡ä»¶å¯ä»¥è½»æ¾æ‰¾åˆ°åˆ¶å“ã€‚ç„¶åæ˜¯ä¸€äº›ç”¨æˆ·æ‰‹å†Œã€è§†é¢‘ã€REST API æ–‡æ¡£ç­‰ä¿¡æ¯ã€‚</p></li><li><p>ä¸­é—´æ˜¯ Set Me Upï¼Œä½¿ç”¨å®ƒå¯ä»¥é€‰æ‹©å’Œç­›é€‰ä½ æƒ³è¦æ“ä½œçš„å­˜å‚¨åº“ï¼Œç‚¹å‡»ç‰¹å®šçš„å­˜å‚¨åº“å¯ä»¥å¼¹å‡ºå…³äºå¦‚ä½•ä½¿ç”¨å®ƒçš„è¯¦ç»†è¯´æ˜ã€‚</p></li><li><p>æœ€å³è¾¹æ˜¯æ˜¾ç¤ºçš„æ˜¯æœ€è¿‘éƒ¨ç½²çš„æ„å»ºå’Œæœ€å¤šä¸‹è½½é‡çš„åˆ¶å“ï¼ˆ<code>95</code>ä»£è¡¨çš„æ˜¯ä¸‹è½½æ¬¡æ•°ï¼‰</p></li></ol><h3 id="é¡µé¢åº•éƒ¨"><a href="#é¡µé¢åº•éƒ¨" class="headerlink" title="é¡µé¢åº•éƒ¨"></a>é¡µé¢åº•éƒ¨</h3><p>åœ¨åº•éƒ¨æ˜¯ä¸€äº›ä¸ Artifactory é›†æˆçš„ç›¸å…³å·¥å…·å’ŒæŠ€æœ¯ç”¨æˆ·æ–‡æ¡£ï¼Œæ–¹ä¾¿åšé›†æˆæ—¶å¿«é€Ÿæ‰¾åˆ°æ‰¾åˆ°æœ€æƒå¨çš„æŠ€æœ¯èµ„æ–™ã€‚</p><h2 id="å®è·µå’Œå·¥ä½œæµ"><a href="#å®è·µå’Œå·¥ä½œæµ" class="headerlink" title="å®è·µå’Œå·¥ä½œæµ"></a>å®è·µå’Œå·¥ä½œæµ</h2><h3 id="è®¾ç½®å…³æ³¨çš„ä»“åº“"><a href="#è®¾ç½®å…³æ³¨çš„ä»“åº“" class="headerlink" title="è®¾ç½®å…³æ³¨çš„ä»“åº“"></a>è®¾ç½®å…³æ³¨çš„ä»“åº“</h3><p>åœ¨é¦–é¡µçš„ Set Me Up é‡Œä½ ä¹Ÿçœ‹åˆ°äº†æˆ‘ä»¬æœ‰å¾ˆå¤šä»“åº“ï¼ˆRepositoryï¼‰ï¼Œç„¶è€Œåœ¨ä¼—å¤šä»“åº“ä¸­ï¼Œå¤§å¤šæ•°æˆå‘˜åªå¯¹å…¶ä¸­ä¸€äº›ä»“åº“æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆå°±å¯ä»¥åªå…³æ³¨éƒ¨åˆ†ä»“åº“ã€‚æ·»åŠ å–œæ¬¢ï¼Œç„¶åç‚¹å‡»å–œæ¬¢æŒ‰é’®å°±å¯ä»¥åªåˆ—å‡ºä½ å…³æ³¨çš„ Artifact Repository äº†ã€‚</p><p><img src="/2020/10/what-is-artifactory/artifactory-artifacts.png" alt="Artifacts"></p><h3 id="ä»“åº“æƒé™ä¸ä¿ç•™ç­–ç•¥"><a href="#ä»“åº“æƒé™ä¸ä¿ç•™ç­–ç•¥" class="headerlink" title="ä»“åº“æƒé™ä¸ä¿ç•™ç­–ç•¥"></a>ä»“åº“æƒé™ä¸ä¿ç•™ç­–ç•¥</h3><table><thead><tr><th>ä»“åº“(maturity)</th><th>ä¿ç•™ç­–ç•¥(Retention)</th><th>ä¸ªäººè´¦æˆ·(Personal Account)</th><th>æœåŠ¡è´¦æˆ·(Service Account)</th><th>ç®¡ç†å‘˜(Admin)</th></tr></thead><tbody><tr><td>dev</td><td>é€šå¸¸ä¸æ¸…ç†</td><td>read&#x2F;write</td><td>read&#x2F;write</td><td>all</td></tr><tr><td>int</td><td>ä¸€å‘¨æˆ–æ˜¯å‡ å¤©</td><td>read</td><td>read&#x2F;write</td><td>all</td></tr><tr><td>stage</td><td>æ°¸ä¸æ¸…ç†</td><td>read</td><td>read&#x2F;write</td><td>all</td></tr><tr><td>release</td><td>æ°¸ä¸æ¸…ç†</td><td>read</td><td>read&#x2F;write</td><td>all</td></tr></tbody></table><p>é€šè¿‡è¡¨æ ¼å¾ˆå®¹æ˜“äº†è§£è¿™ä¸ªæƒé™çš„è®¾ç½®å’Œä¿ç•™ç­–ç•¥ï¼Œè¿™é€‚åˆå¤§å¤šæ•°çš„æƒ…å†µï¼Œä½†ä¸ä¸€å®šé€‚åˆæ‰€æœ‰ä¼ä¸šæƒ…å†µã€‚</p><h3 id="Artifactoryä»“åº“å‘½åæ–¹æ³•"><a href="#Artifactoryä»“åº“å‘½åæ–¹æ³•" class="headerlink" title="Artifactoryä»“åº“å‘½åæ–¹æ³•"></a>Artifactoryä»“åº“å‘½åæ–¹æ³•</h3><p>åœ¨è¿™ä¸ªåˆ—è¡¨ä»“åº“ä¸­ï¼Œä½ å¯ä»¥ä»è¿™äº›ä»“åº“çš„åç§°ä¸­çœ‹åˆ°éµå¾ªäº†æŸäº›å‘½åçº¦å®šï¼Œè¿™é‡Œéµå¾ªäº† <a href="https://jfrog.com/whitepaper/best-practices-structuring-naming-artifactory-repositories/">JFrog Artifactory æ¨èçš„å®˜æ–¹å‘½å</a> æ–¹æ³•ï¼Œå¼ºçƒˆå»ºè®®ä½ ä¹Ÿè¿™ä¹ˆåšã€‚å®ƒæ˜¯ç”±å››éƒ¨åˆ†ç»„æˆï¼š</p><p><code>&lt;team&gt;-&lt;technology&gt;-&lt;maturity&gt;-&lt;locator&gt;</code></p><ul><li>å›¾ä¸Šçš„ team æˆ‘åšäº†è„±æ•ï¼Œæˆ‘ä»¬å«å®ƒå« team1 å§ã€‚</li><li>ç„¶åæ˜¯æŠ€æœ¯ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šå¯é€‰çš„ï¼Œæ¯”å¦‚ generic, Docker, Maven, NPM ç­‰ç­‰ã€‚æˆ‘ç”¨çš„ genericï¼Œè¿™æ˜¯ç”±äºæˆ‘ä»¬çš„äº§å“æ˜¯ C&#x2F;C++ ç¼–è¯‘å‡ºæ¥çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒå±äº generic ç±»åˆ«ã€‚</li><li>æ¥ä¸‹æ¥æ˜¯æˆç†Ÿåº¦ï¼ˆmaturityï¼‰ï¼Œä¸€ä¸ªä»“åº“é€šå¸¸ç”±å››ä¸ªçº§åˆ«çš„æˆç†Ÿåº¦ç»„æˆï¼Œä»ä½åˆ°é«˜è¿™é‡Œåˆ†åˆ«æ˜¯ <code>dev</code>, <code>int</code>, <code>stage</code> å’Œ <code>release</code>ã€‚</li><li>æœ€åæ˜¯è¡¨ç¤ºåˆ¶å“çš„æ‰€åœ¨ä½ç½®ã€‚æ¯”å¦‚ä¸€ä¸ªè·¨å›½å…¬å¸ï¼Œå®ƒå¯èƒ½åœ¨ä¸åŒåŒºåŸŸéƒ½æœ‰ Aritfacotory å®ä¾‹æ¥ä¿è¯ä¸Šä¼ &#x2F;ä¸‹è½½é€Ÿåº¦ç­‰éœ€æ±‚ã€‚å›¾ä¸Šçš„ den å°±æ˜¯å½“å‰ Artifactory æ‰€åœ¨ä½ç½®çš„ç¼©å†™ã€‚</li></ul><h3 id="ä»æ„å»ºç”Ÿæˆåˆ°å‘å¸ƒäº†è§£å®ƒçš„å·¥ä½œæµ"><a href="#ä»æ„å»ºç”Ÿæˆåˆ°å‘å¸ƒäº†è§£å®ƒçš„å·¥ä½œæµ" class="headerlink" title="ä»æ„å»ºç”Ÿæˆåˆ°å‘å¸ƒäº†è§£å®ƒçš„å·¥ä½œæµ"></a>ä»æ„å»ºç”Ÿæˆåˆ°å‘å¸ƒäº†è§£å®ƒçš„å·¥ä½œæµ</h3><p><code>dev</code> æ„å‘³ç€ developmentï¼ˆå¼€å‘ï¼‰ï¼Œè¯¥ä»“åº“å¯¹æ‰€æœ‰äº§å“æˆå‘˜éƒ½å…·æœ‰è¯»å†™æƒé™ï¼Œä»–ä»¬å¯ä»¥ä¸Šä¼ ä¸€äº›åº“æˆ–å…¶ä»–ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p><code>int</code> è¡¨ç¤º integrationï¼ˆé›†æˆï¼‰ï¼Œæ¯”å¦‚ä» Jenkins é‡ŒæˆåŠŸæ„å»ºçš„åˆ¶å“å°†é¦–å…ˆæ”¾åœ¨è¿™ä¸ªå­˜å‚¨åº“ä¸‹ï¼Œå¦‚æœæ„å»ºå¤±è´¥ï¼Œå®ƒå°†ä¸ä¼šè¢«ä¸Šä¼ åˆ° Artifactoryã€‚</p><p><code>stage</code> è¡¨ç¤ºé¢„å‘å¸ƒä»“åº“ï¼Œé€šè¿‡ Unit Test&#x2F;Smoke Test çš„åˆ¶å“ä¼šè¢« <code>Promote</code> è¿™ä¸ªä»“åº“å¾…è¿›ä¸€æ­¥æµ‹è¯•ï¼Œæ¯”å¦‚æ‰‹åŠ¨æµ‹è¯•ã€‚</p><p><code>release</code> é€šè¿‡æµ‹è¯•çš„åˆ¶å“ä¼šè¢« <code>Promote</code> åˆ°è¿™ä¸ªä»“åº“ä¸‹ã€‚</p><p>ä¸ºäº†æ›´å¥½çš„ç®¡ç†Artifactoryç›®å½•å’Œåˆ¶å“çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘å»ºè®®<strong>è§„èŒƒåˆ†æ”¯å‘½å</strong>å’Œå¯¹ä¸åŒé˜¶æ®µçš„åˆ¶å“<strong>æ·»åŠ å±æ€§</strong>ã€‚</p><h4 id="1-è§„èŒƒåˆ†æ”¯å‘½åæœ‰åˆ©äºArtifactoryçš„ç›®å½•æ¸…æ™°"><a href="#1-è§„èŒƒåˆ†æ”¯å‘½åæœ‰åˆ©äºArtifactoryçš„ç›®å½•æ¸…æ™°" class="headerlink" title="1. è§„èŒƒåˆ†æ”¯å‘½åæœ‰åˆ©äºArtifactoryçš„ç›®å½•æ¸…æ™°"></a>1. è§„èŒƒåˆ†æ”¯å‘½åæœ‰åˆ©äºArtifactoryçš„ç›®å½•æ¸…æ™°</h4><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªäº§å“å« ARTï¼Œå®ƒçš„ Git ä»“åº“ä¹Ÿå« ARTï¼Œå®ƒä¸‹é¢æœ‰è¿™æ ·ä¸€ä¸ªåˆ†æ”¯ <code>feature/ART-1234</code>ã€‚</p><p>Jenkins Pipeline é‡Œçš„ç¯å¢ƒå˜é‡è®¾ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">environment &#123;</span><br><span class="line">  INT_REPO_PATH = &quot;team1-generic-int-den/ART/$&#123;BRANCH_NAME&#125;/$&#123;BUILD_NUMBER&#125;/&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªåˆ†æ”¯æ„å»ºæ˜¯å¦‚ä½•æµè½¬çš„ã€‚</p><p>è¿™ä¸ªåˆ†æ”¯é€šè¿‡ Jenkins ç¬¬1æ„å»ºæˆåŠŸåï¼Œå®ƒé¦–å…ˆä¼šè¢« <code>team1-generic-int-den</code> ä»“åº“ä¸‹çš„ <code>ART/feature/ART-1234/1/</code> çš„ç›®å½•ä¸‹é¢ï¼Œå¦‚æœè¿›è¡Œç¬¬2æ¬¡æ„å»ºï¼Œå¹¶æˆåŠŸï¼Œé‚£ä¹ˆå®ƒçš„åˆ¶å“ç›®å½•ä¼šæ˜¯ï¼š<br><code>team1-generic-int-den/ART/feature/ART-1234/2/</code> ä»¥æ­¤ç±»æ¨ã€‚</p><p>ä¸ºäº†æ›´å¥½çš„ç®¡ç†ä»“åº“ä¸‹é¢çš„ç›®å½•ï¼Œå»ºè®®å›¢é˜Ÿäº‹å…ˆçº¦å®šåˆ†æ”¯å‘½åè§„èŒƒï¼Œè¿™æ ·åŒä¸€ç§ç±»å‹çš„åˆ†æ”¯çš„æ‰€æœ‰æ„å»ºéƒ½ä¼šå‡ºç°åœ¨ä¸€ä¸ªç›®å½•ä¸‹é¢ã€‚</p><p>å…³äºå‘½åè§„èŒƒå¯å‚è§è¿™ç¯‡æ–‡ç« <a href="https://shenxianpeng.github.io/2020/09/commit-messages-specification/">ç¨‹åºå‘˜è‡ªæˆ‘ä¿®å…»ä¹‹Gitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒ</a></p><p>å¯¹äº Pull Request Build å¦‚æœä¹Ÿæƒ³æ”¾åˆ° Artifactory ä¸Šé¢ï¼Œå»ºè®®åƒä¸‹é¢è¿™æ ·è®¾ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">environment &#123;</span><br><span class="line">  PR_INT_REPO_PATH = &quot;team1-generic-int-den/ART/PRs/$&#123;BRANCH_NAME&#125;/$&#123;BUILD_NUMBER&#125;/&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ‰€æœ‰çš„ Pull Request Build æ„å»ºæˆåŠŸåéƒ½ä¼šè¢«æ”¾åˆ° <code>PRs</code> è¿™ä¸ªç›®å½•ä¸‹ï¼Œæ–¹ä¾¿æŸ¥æ‰¾å’Œç®¡ç†ã€‚</p><h4 id="2-ä¸åŒé˜¶æ®µæ·»åŠ ä¸åŒçš„å±æ€§"><a href="#2-ä¸åŒé˜¶æ®µæ·»åŠ ä¸åŒçš„å±æ€§" class="headerlink" title="2. ä¸åŒé˜¶æ®µæ·»åŠ ä¸åŒçš„å±æ€§"></a>2. ä¸åŒé˜¶æ®µæ·»åŠ ä¸åŒçš„å±æ€§</h4><p>å¦‚æœä»¥ä¸Šçš„æ„å»ºé€šè¿‡äº†ä¸€äº›è´¨é‡å…³å¡ï¼Œæ¯”å¦‚é€šè¿‡äº†å•å…ƒæµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯•ä»¥åŠ SonaQube çš„æ‰«æç­‰ç­‰ï¼Œå»ºè®®æ·»åŠ ä¸åŒçš„å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><p><code>unit.test.status=passed</code><br><code>automated.test.status=passed</code><br><code>sonaqube.scan.status=passed</code></p><p>ç„¶åæ ¹æ®ä¸Šé¢çš„çŠ¶æ€ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„åˆ¶å“ä» <code>int</code> ä»“åº“ Promote åˆ° <code>stage</code> ä»“åº“ï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆè¿›å» <code>stage</code> ä»“åº“ä¸‹å»è·å–æ„å»ºå¹¶è¿›è¡Œæµ‹è¯•ã€‚é€šè¿‡æµ‹è¯•åï¼Œå¯¹åˆ¶å“æ·»åŠ ç›¸åº”çš„å±æ€§çŠ¶æ€ï¼Œæ¯”å¦‚åœ¨ Property ä¸­æ·»åŠ  <code>manual.test.status=passed</code>ã€‚</p><p>ä¹‹åå‘å¸ƒæµæ°´çº¿ä¸­å»åˆ° stage ä»“åº“é‡Œå»æ‰¾æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„æ„å»ºè¿›è¡Œå‘å¸ƒã€‚</p><p><code>unit.test.status=passed</code><br><code>automated.test.status=passed</code><br><code>sonaqube.scan.status=passed</code><br><code>manual.test.status=passed</code></p><p>å‘å¸ƒæˆåŠŸåï¼Œå°†æ„å»ºä» <code>stage</code> ä»“åº“ promote åˆ° <code>release</code> ä»“åº“ä¸­ï¼Œå¹¶æ·»åŠ å±æ€§ <code>release.status=released</code>ï¼Œè¿™æ ·å°±å®Œæˆäº†å‘å¸ƒã€‚</p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>åœ¨è½¯ä»¶äº¤ä»˜ä¸­ï¼Œè´¨é‡å¯ä¿¡ã€å®‰å…¨å¯ä¿¡æ˜¯è¯„ä¼°ç‰ˆæœ¬å¯é æ€§çš„ä¸¤ä¸ªé‡è¦æ ‡å‡†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå°±åƒä½¿ç”¨æ¼æ–—ä¸€æ ·å°†æ„å»ºé€šè¿‡å±‚å±‚ç­›é€‰ï¼Œä» <code>int</code> ä»“åº“åˆ° <code>stage</code> ä»“åº“ï¼Œæœ€ååˆ° <code>release</code> ä»“åº“å®Œæˆäº†åˆ¶å“çš„å‘å¸ƒã€‚é€šè¿‡ Artifactory ä¸ºåˆ¶å“ç®¡ç†çš„æ‰“é€ ä¸€ä¸ªå•ä¸€å¯ä¿¡æºï¼Œä»è€Œä¸ºè½¯ä»¶çš„æŒç»­äº¤ä»˜é“ºè·¯ã€‚</p><h2 id="å¾€æœŸç›¸å…³æ–‡ç« "><a href="#å¾€æœŸç›¸å…³æ–‡ç« " class="headerlink" title="å¾€æœŸç›¸å…³æ–‡ç« "></a>å¾€æœŸç›¸å…³æ–‡ç« </h2><ul><li><a href="https://shenxianpeng.github.io/2019/11/Artifactory-install-and-upgrade/">åˆè¯† JFrog Artifactory</a></li><li><a href="https://shenxianpeng.github.io/2019/11/Artifactory-integrate-with-Jenkins/">Artifactory ä¸ Jenkins é›†æˆ</a></li><li><a href="https://shenxianpeng.github.io/2020/06/Java-net-SocketException-on-AIX/">è§£å†³ Jenkins Artifactory Plugin ä»…åœ¨ AIX ä¸Šä¼ åˆ¶å“åˆ° https åè®®çš„ Artifactory å¤±è´¥çš„é—®é¢˜</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JFrog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Artifactory </tag>
            
            <tag> JFrog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¨‹åºå‘˜è‡ªæˆ‘ä¿®å…»ä¹‹Gitæäº¤ä¿¡æ¯å’Œåˆ†æ”¯åˆ›å»ºè§„èŒƒ</title>
      <link href="/2020/09/commit-messages-specification/"/>
      <url>/2020/09/commit-messages-specification/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦åˆ¶å®šè§„èŒƒ"><a href="#ä¸ºä»€ä¹ˆè¦åˆ¶å®šè§„èŒƒ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ¶å®šè§„èŒƒ"></a>ä¸ºä»€ä¹ˆè¦åˆ¶å®šè§„èŒƒ</h2><p>å¤è¯è¯´ï¼Œæ²¡æœ‰è§„çŸ©ä¸æˆæ–¹åœ†ã€‚åœ¨å›¢é˜Ÿåä½œå¼€å‘æ—¶ï¼Œæ¯ä¸ªäººæäº¤ä»£ç æ—¶éƒ½ä¼šå†™ commit messageï¼Œä½†å¦‚æœæ²¡æœ‰è§„èŒƒï¼Œæ¯ä¸ªäººéƒ½ä¼šæœ‰è‡ªå·±çš„ä¹¦å†™é£æ ¼ï¼Œå› æ­¤åœ¨ç¿»çœ‹ git log æ—¶ç»å¸¸çœ‹åˆ°çš„æ˜¯äº”èŠ±å…«é—¨ï¼Œååˆ†ä¸åˆ©äºé˜…è¯»å’Œç»´æŠ¤ã€‚</p><p>é€šè¿‡ä¸‹é¢ä¸¤ä¸ªä¾‹å­æ¥çœ‹çœ‹æ²¡è§„èŒƒå’Œæœ‰è§„èŒƒçš„å¯¹æ¯”ï¼Œä»¥åŠæœ‰è§„èŒƒèƒ½å¸¦æ¥å“ªäº›å¥½å¤„ã€‚</p><h3 id="æäº¤ä¿¡æ¯-æ²¡è§„èŒƒ-vs-æœ‰è§„èŒƒ"><a href="#æäº¤ä¿¡æ¯-æ²¡è§„èŒƒ-vs-æœ‰è§„èŒƒ" class="headerlink" title="æäº¤ä¿¡æ¯ æ²¡è§„èŒƒ vs æœ‰è§„èŒƒ"></a>æäº¤ä¿¡æ¯ æ²¡è§„èŒƒ vs æœ‰è§„èŒƒ</h3><p><img src="/2020/09/commit-messages-specification/bad-commit-message.png" alt="æ²¡æœ‰è§„èŒƒçš„ Git æäº¤ä¿¡æ¯"></p><p>ä»è¿™ä¸ªæäº¤ä¿¡æ¯é‡Œä½ ä¸çŸ¥é“ä»–ä¿®æ”¹äº†ä»€ä¹ˆï¼Œä¿®æ”¹æ„å›¾æ˜¯ä»€ä¹ˆã€‚</p><span id="more"></span><p><img src="/2020/09/commit-messages-specification/angular-commit-message.png" alt="æœ‰è§„èŒƒçš„ Git æäº¤ä¿¡æ¯"></p><p>è¿™æ˜¯ Angular çš„æäº¤ä¿¡æ¯ï¼Œå®ƒéµå¾ªäº† <a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a>ï¼Œç›´è¯‘è¿‡æ¥ä¸ºå¸¸è§„æäº¤ã€‚</p><p>è¿™ä¹Ÿæ˜¯è¡Œä¸šå†…ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ Git æäº¤ä¿¡æ¯è§„èŒƒï¼Œå·²ç»æœ‰ä¸å°‘çš„é¡¹ç›®åœ¨ä½¿ç”¨ï¼Œå¦‚æœä½ çš„é¡¹ç›®è¿˜æ²¡æœ‰åˆ¶å®š Git æäº¤ä¿¡æ¯è§„èŒƒï¼Œå»ºè®®ç…§æ¬æˆ–å‚è€ƒè¿™ä¸ªè§„èŒƒæ¥åˆ¶å®šã€‚</p><p>å¯¹äºä¸€ä¸ªå›¢é˜Ÿï¼Œå½“å¾ˆå¤šäººåœ¨ä¸€èµ·åˆä½œå¼€å‘ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œé¢„å…ˆåˆ¶å®šå¥½æäº¤ä¿¡æ¯è§„èŒƒï¼Œå¯¹äºé¡¹ç›®çš„é•¿è¿œå‘å±•ä»¥åŠåç»­äººå‘˜åŠ å…¥å’Œç»´æŠ¤éƒ½éå¸¸æœ‰å¸®åŠ©ã€‚</p><p>æ€»ç»“æœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š</p><ol><li>æœ‰åŠ©äºä»–äººæ›´å¥½çš„ç†è§£ä½ çš„å˜æ›´æ„å›¾ï¼Œæ›´å®¹æ˜“è´¡çŒ®&#x2F;ä¿®æ”¹ä»£ç ã€‚</li><li>ç»“æ„åŒ–çš„æäº¤ä¿¡æ¯æœ‰åŠ©äºè‡ªåŠ¨åŒ–è„šæœ¬çš„è¯†åˆ«å’Œ CI&#x2F;CDã€‚</li><li>æä¾›è‡ªåŠ¨åŒ–ç”Ÿæˆ <code>CHANGELOGs</code> çš„èƒ½åŠ›ã€‚</li><li>æœ€åï¼Œè¿™ä¹Ÿæ˜¯ä½“ç°äº†ä¸€ä¸ªç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‚</li></ol><h3 id="åˆ†æ”¯åˆ›å»º-æ²¡è§„èŒƒ-vs-æœ‰è§„èŒƒ"><a href="#åˆ†æ”¯åˆ›å»º-æ²¡è§„èŒƒ-vs-æœ‰è§„èŒƒ" class="headerlink" title="åˆ†æ”¯åˆ›å»º æ²¡è§„èŒƒ vs æœ‰è§„èŒƒ"></a>åˆ†æ”¯åˆ›å»º æ²¡è§„èŒƒ vs æœ‰è§„èŒƒ</h3><p>å¦‚æœåˆ›å»ºåˆ†æ”¯æ²¡æœ‰è§„èŒƒï¼Œä¸åŠ ä»¥é™åˆ¶ï¼Œå¾ˆå¤šåˆ†æ”¯ä¼šæ˜¯è¿™æ ·çš„ <code>ABC-1234-Test</code>, <code>ABC-2345-demo</code>, <code>Hotfix-ABC-3456</code>, <code>Release-1.0</code>ï¼Œç”šè‡³æ›´ç³Ÿã€‚å½“åˆ†æ”¯å¾ˆå¤šçš„æ—¶å€™ä¼šæ˜¾å¾—æ··ä¹±ï¼Œå¹¶ä¸”ä¸æ–¹ä¾¿æ£€ç´¢ã€‚</p><p>å¦‚æœåˆ¶å®šåˆ†æ”¯åˆ›å»ºè§„èŒƒï¼Œæ¯”å¦‚ä¸Šé¢çš„åˆ†æ”¯åœ¨åˆ›å»ºæ—¶ï¼Œé€šè¿‡ Hook å¼ºåˆ¶é™åˆ¶åˆ†æ”¯å¼€å¤´å¿…é¡»ä»¥ç±»å‹å¼€å§‹ï¼Œé‚£ä¹ˆæ–°åˆ›å»ºçš„åˆ†æ”¯å°†ä¼šæ˜¯è¿™æ ·çš„ï¼š<code>bugfix/ABC-1234</code>, <code>feature/ABC-2345</code>, <code>hotfix/ABC-3456</code>, <code>release/1.0</code> è¿™ä¸ä½†æœ‰åŠ©äºæ£€ç´¢ï¼Œè¿˜æ–¹ä¾¿ä»–äººé€šè¿‡ç±»å‹äº†è§£åˆ†æ”¯ç”¨é€”ï¼Œä»¥åŠæ–¹ä¾¿åç»­çš„ CI&#x2F;CD æµæ°´çº¿çš„å¼€å‘ã€‚</p><h2 id="å¦‚ä½•è§£å†³è§„èŒƒé—®é¢˜"><a href="#å¦‚ä½•è§£å†³è§„èŒƒé—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³è§„èŒƒé—®é¢˜"></a>å¦‚ä½•è§£å†³è§„èŒƒé—®é¢˜</h2><p>åº”è¯¥ä»ä¸¤æ–¹é¢ç€æ‰‹ï¼š</p><ul><li>é¦–å…ˆï¼Œä¸ºå›¢é˜Ÿåˆ¶å®šæäº¤ä¿¡æ¯ä»¥åŠåˆ›å»ºåˆ†æ”¯è§„èŒƒï¼Œè®©å›¢é˜Ÿæˆå‘˜äº†è§£è§„èŒƒå¹¶éµå®ˆã€‚</li><li>ç„¶åï¼Œåœ¨æäº¤ä»£ç æˆ–åˆ›å»ºåˆ†æ”¯æ—¶ï¼Œé€šè¿‡è®¾ç½®çš„ Git Hook å°†ä¸è§„èŒƒçš„ç¦æ­¢æäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚</li></ul><h3 id="åˆ¶å®šGitæäº¤ä¿¡æ¯è§„èŒƒ"><a href="#åˆ¶å®šGitæäº¤ä¿¡æ¯è§„èŒƒ" class="headerlink" title="åˆ¶å®šGitæäº¤ä¿¡æ¯è§„èŒƒ"></a>åˆ¶å®šGitæäº¤ä¿¡æ¯è§„èŒƒ</h3><p>åˆ¶å®šåˆç†çš„è§„èŒƒï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯å‚è€ƒè½¯ä»¶è¡Œä¸šé‡Œæ˜¯å¦æœ‰é€šç”¨çš„è§„èŒƒã€‚ç›®å‰è¡Œä¸šæœ€ä¸ºå¹¿æ³›è§„èŒƒæ˜¯ <a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a> å¾ˆå¤šé¡¹ç›®åŒ…æ‹¬ Auglar ä¹Ÿåœ¨ä½¿ç”¨ã€‚</p><p>å¯ä»¥æ ¹æ®ä»¥ä¸Šè§„èŒƒåˆ¶å®šé€‚åˆè‡ªå·±å›¢é˜Ÿçš„è§„èŒƒï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">JIRA-1234 feat: support for async execution</span><br><span class="line"></span><br><span class="line">^-------^ ^--^: ^-------------------------^</span><br><span class="line">|         |     |</span><br><span class="line">|         |     +--&gt; Summary in present tense.</span><br><span class="line">|         |</span><br><span class="line">|         +--&gt; Type: feat, fix, docs, style, refactor, perf, test or chore.</span><br><span class="line">|</span><br><span class="line">+--&gt; Jira ticket number</span><br><span class="line"></span><br><span class="line">Type Must be one of the following:</span><br><span class="line"></span><br><span class="line">    feat: A new feature</span><br><span class="line">    fix: A bug fix</span><br><span class="line">    docs: Documentation only changes</span><br><span class="line">    style: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)</span><br><span class="line">    refactor: A code change that neither fixes a bug nor adds a feature</span><br><span class="line">    perf: A code change that improves performance</span><br><span class="line">    test: Adding missing or correcting existing tests</span><br><span class="line">    chore: Changes to the build process, .gitignore or auxiliary tools and libraries such as documentation generation, etc.</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®-Git-Hooks"><a href="#è®¾ç½®-Git-Hooks" class="headerlink" title="è®¾ç½® Git Hooks"></a>è®¾ç½® Git Hooks</h2><p>è¿™é‡Œä»¥ Bitbuket ä¸ºä¾‹ï¼Œå…¶ä»– Git å·¥å…·æ¯”å¦‚ GitHubï¼ŒGitlab éƒ½æœ‰ç±»ä¼¼çš„åŠŸèƒ½ã€‚</p><p>Bitbucket ä½¿ç”¨çš„æ˜¯ <a href="https://mohamicorp.atlassian.net/wiki/spaces/DOC/pages/1442119700/Yet+Another+Commit+Checker+YACC+for+Bitbucket">Yet Another Commit Checker</a> è¿™ä¸ªå…è´¹æ’ä»¶ã€‚</p><p>é¦–å…ˆï¼Œå¼€å¯ Yet Another Commit Checkerã€‚</p><p><img src="/2020/09/commit-messages-specification/git-hook.png" alt="å¼€å¯ Yet Another Commit Checker"></p><p>ç„¶åé€ä¸€ä»‹ç» Yet Another Commit Checker çš„ä¸€äº›å¸¸ç”¨çš„è®¾ç½®ã€‚</p><p><img src="/2020/09/commit-messages-specification/commit-checker.png" alt="Yet Another Commit Checker æ’ä»¶çš„å…¶ä»–è®¾ç½®é€‰é¡¹"></p><h3 id="1-å¼€å¯-Require-Valid-JIRA-Issue-s"><a href="#1-å¼€å¯-Require-Valid-JIRA-Issue-s" class="headerlink" title="1. å¼€å¯ Require Valid JIRA Issue(s)"></a>1. å¼€å¯ Require Valid JIRA Issue(s)</h3><p>å¼€å¯è¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨æäº¤ä¿¡æ¯çš„æ—¶é€šè¿‡ Hook è‡ªåŠ¨éªŒè¯æ˜¯å¦æœ‰ Jira å•å·ï¼Œå•å·æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœæ˜¯å¦å®šçš„ï¼Œæäº¤å¤±è´¥ã€‚è¿™æ ·å°±å¼ºåˆ¶åœ¨æäº¤ä»£ç æ—¶ commit message ä¸ Jira å•å·è¿›è¡Œå…³è”ã€‚</p><h3 id="2-Commit-Message-Regex"><a href="#2-Commit-Message-Regex" class="headerlink" title="2. Commit Message Regex"></a>2. Commit Message Regex</h3><p>æ¯”å¦‚è®¾ç½®ä¸€ä¸ªè¿™æ ·ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼ <code>[A-Z\-0-9]+ .*</code> ï¼Œè¿™è¦æ±‚ Jira å•å·å¿…é¡»ä»¥è¿™ç§æ ¼å¼ <code>ABCD-1234</code> å¼€å¤´ï¼Œå¹¶ä¸”æè¿°ä¿¡æ¯è¦ä¸ Jira å•å·ä¹‹é—´ç•™ä¸€ä¸ªç©ºæ ¼ã€‚</p><p>é€šè¿‡ä»¥ä¸Šè®¾ç½®ï¼Œå°±å°†æäº¤ä¿¡æ¯é™å®šä¸ºå¦‚ä¸‹æ ¼å¼ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">ABCD-1234 Balabala......</span><br></pre></td></tr></table></figure><p>å†æ¯”å¦‚è¿™ä¸ªæ›´ä¸ºå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">^[A-Z-0-9]+ .*(?&lt;type&gt;chore|ci|docs|feat|fix|perf|refactor|revert|style|test|Bld|Â¯\\_\(ãƒ„\)_\/Â¯)(?&lt;scope&gt;\(\w+\)?((?=:\s)|(?=!:\s)))?(?&lt;breaking&gt;!)?(?&lt;subject&gt;:\s.*)?|^(?&lt;merge&gt;Merge.* \w+)|^(?&lt;revert&gt;Revert.* \w+)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸ä½†é™åˆ¶äº†å¼€å¤´å¿…é¡»ä»¥ JIRA å•å·å¼€å§‹ï¼Œä¸­é—´æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œè¿˜å¿…é¡»åœ¨æè¿°ä¿¡æ¯é‡Œå¡«å†™ type ç±»å‹ï¼Œæœ€åæ‰æ˜¯æè¿°ä¿¡æ¯ã€‚å¦å¤–è¿˜æ”¯æŒå¦‚æœæ˜¯å¦‚æœæ˜¯ Merge æˆ–æ˜¯ Revert ä¼šäº§ç”Ÿå…¶ä»–çš„æè¿°ä¿¡æ¯ã€‚</p><p>é€šè¿‡ä¸‹é¢çš„æµ‹è¯•ç”¨ä¾‹æ¥å…·ä½“ç†è§£ä¸Šè¿°çš„æ­£åˆ™è¡¨è¾¾å¼ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„æäº¤ä¿¡æ¯è§„èŒƒé™åˆ¶ã€‚</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># æµ‹è¯•é€šè¿‡çš„ç”¨ä¾‹</span><br><span class="line">NV-1234 chore: change build progress</span><br><span class="line">DT-123456 docs: update xdemo usage</span><br><span class="line">QA-123 ci: update jenkins automatic backup</span><br><span class="line">CC-1234 feat: new fucntional about sync</span><br><span class="line">Merge branch master into develop</span><br><span class="line">Reverted: Revert support feature &amp; bugfix branches build</span><br><span class="line">Merge pull request from develop to master</span><br><span class="line"></span><br><span class="line"># æµ‹è¯•ä¸é€šè¿‡çš„ç”¨ä¾‹</span><br><span class="line">NV-1234 build: update</span><br><span class="line">NV-1234 Chore: change progress</span><br><span class="line">DT-123456 Docs: update xdemo</span><br><span class="line">QA-123ci: update jenkins automatic backup</span><br><span class="line">CC-1234 Feat: new fucntional about sync</span><br><span class="line">DT-17734: 8.2.2 merge from CF1/2- Enhance PORT.STATUS</span><br><span class="line">DT-17636 fix AIX cord dump issue</span><br><span class="line">DT-18183 Fix the UDTHOME problem for secure telnet</span><br><span class="line">DT-18183 Add new condition to get UDTHOME</span><br><span class="line">DT-15567 code merge by Peter Shen.</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœä¹Ÿå¯ä»¥åœ¨è¿™é‡Œ <a href="https://regex101.com/r/5m0SIJ/10">https://regex101.com/r/5m0SIJ/10</a> æ‰¾åˆ°â€‹ã€‚â€‹</p><p>å»ºè®®ï¼šå¦‚æœä½ è¦åœ¨ä½ çš„ Git ä»“åº“é‡Œä¹Ÿè¦è®¾ç½®è¿™æ ·ä¸¥æ ¼å¹¶ä¸”å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå»ºè®®ä¸€å®šè¦ç»è¿‡å……åˆ†çš„è€ƒè™‘å’Œæµ‹è¯•æ‰æŠŠå®ƒæ­£å¼æ”¾å…¥ä½ çš„ Git ä»“åº“çš„ Hooks è®¾ç½®ä¸­ã€‚</p><h3 id="3-Commit-Regex-Error"><a href="#3-Commit-Regex-Error" class="headerlink" title="3. Commit Regex Error"></a>3. Commit Regex Error</h3><p>è¿™ä¸ªè®¾ç½®æ˜¯ç”¨æ¥æç¤ºé”™è¯¯ä¿¡æ¯çš„ã€‚å½“å›¢é˜Ÿæˆå‘˜åœ¨æäº¤æ—¶ï¼Œå¦‚æœä¸ç¬¦åˆè§„èŒƒæäº¤å¤±è´¥äº†ï¼Œä¼šç»™å‡ºåˆç†çš„æç¤ºä¿¡æ¯ï¼Œè¿™æœ‰åŠ©äºæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚æ¯”å¦‚æäº¤å¤±è´¥äº†ï¼Œä¼šåœ¨å‘½ä»¤è¡Œé‡Œçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Commit Message Specifications:</span><br><span class="line"></span><br><span class="line">&lt;Jira-ticket-number&gt; &lt;type&gt;: &lt;Description&gt;</span><br><span class="line"></span><br><span class="line">Example:</span><br><span class="line"></span><br><span class="line">ABC-1234 feat: Support for async execution</span><br><span class="line"></span><br><span class="line">1. Between Jira ticket number and type MUST has one space.</span><br><span class="line">2. Between type and description MUST has a colon and a space.</span><br><span class="line"></span><br><span class="line">Type MUST be one of the following and lowercase</span><br><span class="line"></span><br><span class="line">feat: A new feature</span><br><span class="line">fix: A bug fix</span><br><span class="line">docs: Documentation only changes</span><br><span class="line">style: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)</span><br><span class="line">refactor: A code change that neither fixes a bug nor adds a feature</span><br><span class="line">perf: A code change that improves performance</span><br><span class="line">test: Adding missing or correcting existing tests</span><br><span class="line">chore: Changes to the build process, .gitignore or auxiliary tools and libraries such as documentation generation, etc.</span><br></pre></td></tr></table></figure><p>æ ¹æ®è¿™ä¸ªæè¿°ä¿¡æ¯ï¼Œæäº¤è€…å°±èƒ½å¾ˆå®¹æ˜“çŸ¥é“æ­£ç¡®çš„è§„èŒƒæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œç„¶åé€šè¿‡ <code>git commit --amend</code> å‘½ä»¤å¯¹è‡ªå·±æœ€è¿‘ä¸€æ¬¡æäº¤ä¿¡æ¯åšå‡ºä¿®æ”¹ã€‚</p><h3 id="4-Branch-Name-Regex"><a href="#4-Branch-Name-Regex" class="headerlink" title="4. Branch Name Regex"></a>4. Branch Name Regex</h3><p>è¿™ä¸ªæ˜¯å¯¹åˆ›å»ºåˆ†æ”¯æ—¶åšå‡ºçš„è§„èŒƒé™åˆ¶ã€‚åœ¨è®¾ç½®äº†ç›¸åº”çš„æ­£åˆ™è¡¨è¾¾åï¼Œå¼€å‘åœ¨åˆ›å»ºåˆ†æ”¯æ—¶ï¼Œåªæœ‰ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„æ¡ä»¶æ‰å¯ä»¥æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚</p><p>ä¾‹å¦‚è¿™ä¸ªåˆ›å»ºåˆ†æ”¯çš„æ­£åˆ™è¡¨è¾¾å¼ <code>^(bugfix|feature|release|hotfix).*|(master)|(.*-dev)</code></p><p>è¿™é‡Œé™åˆ¶äº†æ‰€æœ‰çš„åˆ†æ”¯å¿…é¡»ä»¥ <code>bugfix</code>, <code>feature</code>, <code>release</code>, <code>hotfix</code> å¼€å¤´æˆ–æ˜¯ä¹Ÿå¯ä»¥è¿™æ ·çš„ <code>v1.0-dev</code> è¿™ç§ç±»ã€‚</p><p>ä½ å¯ä»¥æ ¹æ®ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼æ¥è®¾è®¡å±äºè‡ªå·±é¡¹ç›®çš„åˆ†æ”¯æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h3 id="5-Branch-Name-Regex-Error"><a href="#5-Branch-Name-Regex-Error" class="headerlink" title="5. Branch Name Regex Error"></a>5. Branch Name Regex Error</h3><p>è¿™ä¸ªè®¾ç½®æ˜¯æç¤ºæ¨é€ä¸è§„èŒƒçš„åˆ†æ”¯æ—¶çš„é”™è¯¯ä¿¡æ¯ã€‚é¢„å…ˆè®¾ç½®å¥½ç›¸åº”çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼Œæœ‰åŠ©äºç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°æ¨é€å¤±è´¥çš„åŸå› ã€‚æ¯”å¦‚ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Branches must begin with these types: bugfix/ feature/ release/ hotfix/</span><br></pre></td></tr></table></figure><p>å‘Šè¯‰ç”¨æˆ·ï¼Œåˆ†æ”¯å¿…é¡»ä»¥ <code>bugfix/</code> <code>feature/</code> <code>release/</code> <code>hotfix/</code> å¼€å¤´ã€‚</p><h3 id="6-å…¶ä»–è®¾ç½®"><a href="#6-å…¶ä»–è®¾ç½®" class="headerlink" title="6. å…¶ä»–è®¾ç½®"></a>6. å…¶ä»–è®¾ç½®</h3><p>å¦å¤–è¿˜æœ‰ä¸€äº›å…¶ä»–è®¾ç½®ï¼Œæ¯”å¦‚å…³è”çš„ Jira å•å­å¿…é¡»å¤„äºä»€ä¹ˆæ ·çš„çŠ¶æ€ã€‚è¿™ä¸ªå¯ä»¥é˜²æ­¢å·²ç»æ˜¯å…³é—­çŠ¶æ€ Jira å•å­ï¼Œå¼€å‘è¿˜å¾€ä¸Šé¢å·å·çš„æäº¤ä»£ç ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æœªç»æµ‹è¯•çš„ä»£ç è¿›å…¥ä»“åº“ã€‚</p><p>è¿˜æœ‰ Require Matching Committer Email å’Œ Require Matching Committer Name æ¥é™å®šå¼€å‘è€…å¿…é¡»é…ç½®å¥½ä¸ç™»å½•ç”¨æˆ·åå’Œé‚®ç®±ç›¸åŒ¹é…çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œæ¥è§„èŒƒæäº¤ä¿¡æ¯é‡Œæ˜¾ç¤ºçš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œä¹Ÿæ–¹ä¾¿è¿›è¡Œ Git ä¿¡æ¯çš„ç»Ÿè®¡ç­‰åç»­æ•°æ®çš„æ”¶é›†ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><blockquote><p>Conventional Commits <a href="https://www.conventionalcommits.org/en/v1.0.0/">https://www.conventionalcommits.org/en/v1.0.0/</a> <br>Angular Commit Guidelines: <a href="https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#commits">https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#commits</a> <br>Projects Using Conventional Commits: <a href="https://www.conventionalcommits.org/en/v1.0.0/#projects-using-conventional-commits">https://www.conventionalcommits.org/en/v1.0.0/#projects-using-conventional-commits</a> <br>Yet Another Commit Checker: <a href="https://mohamicorp.atlassian.net/wiki/spaces/DOC/pages/1442119700/Yet+Another+Commit+Checker+YACC+for+Bitbucket">https://mohamicorp.atlassian.net/wiki/spaces/DOC/pages/1442119700/Yet+Another+Commit+Checker+YACC+for+Bitbucket</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Branch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ GitHub ä¸Šå‘å¸ƒä¸€ä¸ª Python é¡¹ç›®éœ€è¦æ³¨æ„å“ªäº›</title>
      <link href="/2020/09/how-to-release-python-project/"/>
      <url>/2020/09/how-to-release-python-project/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ä»‹ç»ä¸ªäººæˆ–ä¼ä¸šåœ¨ GitHub ä¸Šå‘å¸ƒä¸€ä¸ª Python é¡¹ç›®éœ€è¦äº†è§£å’Œæ³¨æ„å“ªäº›å†…å®¹</p><ol><li><a href="#%E9%85%8D%E7%BD%AEsetup.py">å¦‚ä½•é…ç½®setup.py</a></li><li><a href="#%E5%8F%91%E5%B8%83%E5%88%B0PyPI">å¦‚ä½•å‘å¸ƒåˆ°PyPI</a></li><li><a href="#%E5%85%B3%E4%BA%8Epydoc">ç”Ÿæˆpydoc</a></li><li><a href="#%E5%85%B3%E4%BA%8E%E7%89%88%E6%9C%AC%E5%8F%B7">ç‰ˆæœ¬å·çš„é€‰æ‹©</a></li><li><a href="#%E9%80%89%E6%8B%A9License">Licenseçš„é€‰æ‹©</a></li></ol><h2 id="é…ç½®setup-py"><a href="#é…ç½®setup-py" class="headerlink" title="é…ç½®setup.py"></a>é…ç½®setup.py</h2><p>æ‰“åŒ…å’Œå‘å¸ƒä¸€é¡¹éƒ½æ˜¯é€šè¿‡å‡†å¤‡ä¸€ä¸ª <code>setup.py</code> æ–‡ä»¶æ¥å®Œæˆçš„ã€‚å‡è®¾ä½ çš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">demo</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ MANIFEST.<span class="keyword">in</span> <span class="comment"># æ‰“åŒ…æ—¶ï¼Œç”¨æ¥å®šåˆ¶åŒ–ç”Ÿæˆ `dist/*.tar.gz` é‡Œçš„å†…å®¹</span></span><br><span class="line">â”œâ”€â”€ demo</span><br><span class="line">â”‚   â””â”€â”€ __init__.py</span><br><span class="line">â”œâ”€â”€ setup.py</span><br><span class="line">â”œâ”€â”€ tests</span><br><span class="line">â”‚   â””â”€â”€ __init__.py</span><br><span class="line">â”‚   â””â”€â”€ __pycache__/</span><br><span class="line">â””â”€â”€ docs</span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨æ‰“åŒ…å‘½ä»¤ <code>python setup.py sdist bdist_wheel</code>ï¼Œå°†ä¼šç”Ÿæˆåœ¨ dist ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ <code>demo-1.0.0-py3-none-any.whl</code> å’Œ <code>demo-1.0.0.tar.gz</code></p><ul><li><p><code>.whl</code> æ–‡ä»¶æ˜¯ç”¨äºæ‰§è¡Œ <code>pip install dist/demo-1.0.0-py3-none-any.whl</code> å°†å…¶å®‰è£…åˆ° <code>...\Python38\Lib\site-packages\demo</code> ç›®å½•æ—¶ä½¿ç”¨çš„æ–‡ä»¶ã€‚</p></li><li><p><code>.tar.gz</code> æ˜¯æ‰“åŒ…åçš„æºä»£ç çš„å­˜æ¡£æ–‡ä»¶ã€‚è€Œ <code>MANIFEST.in</code> åˆ™æ˜¯ç”¨æ¥æ§åˆ¶è¿™ä¸ªæ–‡ä»¶é‡Œåˆ°åº•è¦æœ‰å“ªäº›å†…å®¹ã€‚</p></li></ul><span id="more"></span><p>ä¸‹é¢ä¾‹å­æ˜¯å¦‚ä½•ä½¿ç”¨ <code>MANIFEST.in</code> æ¥å®šåˆ¶åŒ–ç”Ÿæˆ <code>dist/*.tar.gz</code> é‡Œçš„å†…å®¹ã€‚<code>MANIFEST.in</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">include LICENSE</span><br><span class="line">include README.md</span><br><span class="line">include MANIFEST.<span class="keyword">in</span></span><br><span class="line">graft demo</span><br><span class="line">graft tests</span><br><span class="line">graft docs</span><br><span class="line"><span class="keyword">global</span>-exclude __pycache__</span><br><span class="line"><span class="keyword">global</span>-exclude *.log</span><br><span class="line"><span class="keyword">global</span>-exclude *.pyc</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä»¥ä¸Šæ–‡ä»¶å†…å®¹ï¼Œåœ¨ä½¿ç”¨å‘½ä»¤ <code>python setup.py sdist bdist_wheel</code> ç”Ÿæˆ <code>demo-1.0.0.tar.gz</code> æ–‡ä»¶æ—¶ä¼šåŒ…å« <code>LICENSE</code>, <code>README.md</code>, <code>MANIFEST.in</code> è¿™ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¿˜ä¼šåŒ…å« <code>demo</code>, <code>tests</code>, <code>docs</code> ä¸‰ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæœ€åæ’é™¤æ‰æ‰€æœ‰çš„ <code>__pycache__</code>, <code>*.log</code>, <code>*.pyc</code> æ–‡ä»¶ã€‚</p><p>æ›´å¤šå…³äº  <code>MANIFEST.in</code> æ–‡ä»¶çš„è¯­æ³•è¯·å‚çœ‹ <a href="https://packaging.python.org/guides/using-manifest-in/">https://packaging.python.org/guides/using-manifest-in/</a></p><blockquote><p>å®˜æ–¹æœ‰è¯¦ç»†çš„ç¤ºä¾‹å’Œæ–‡æ¡£ <a href="https://packaging.python.org/tutorials/packaging-projects/">https://packaging.python.org/tutorials/packaging-projects/</a></p><p>Python sample é¡¹ç›®ä¾›ä½ å‚è€ƒ <a href="https://github.com/pypa/sampleproject">https://github.com/pypa/sampleproject</a></p></blockquote><p>æ”’ç‚¹è€å¿ƒå°†ä¸Šé¢çš„é“¾æ¥çœ‹å®Œï¼Œå°±å®Œå…¨æ»¡è¶³ä¸€èˆ¬é¡¹ç›®çš„å‘å¸ƒè¦æ±‚äº†ã€‚</p><h2 id="å‘å¸ƒåˆ°PyPI"><a href="#å‘å¸ƒåˆ°PyPI" class="headerlink" title="å‘å¸ƒåˆ°PyPI"></a>å‘å¸ƒåˆ°PyPI</h2><p>ä½¿ç”¨ Python å¤§å®¶éƒ½çŸ¥é“å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ä¸‹è½½ä½ è¦æ˜¯ä½¿ç”¨çš„å¤–éƒ¨åº“ï¼ŒPython æœ‰ç€å¤§é‡çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå°†å¼€æºé¡¹ç›®å‘å¸ƒåˆ° PyPI ä¸Šæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install xxxx</span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯-PyPI"><a href="#ä»€ä¹ˆæ˜¯-PyPI" class="headerlink" title="ä»€ä¹ˆæ˜¯ PyPI"></a>ä»€ä¹ˆæ˜¯ PyPI</h3><p>PyPI æ˜¯ The Python Package Index çš„ç¼©å†™ï¼Œæ„æ€æ˜¯ Python åŒ…ç´¢å¼•ä»“åº“ï¼Œç”¨æ¥æŸ¥æ‰¾ã€å®‰è£…å’Œå‘å¸ƒ Python åŒ…ã€‚</p><p>PyPI æœ‰ä¸¤ä¸ªç¯å¢ƒ</p><ul><li>æµ‹è¯•ç¯å¢ƒ <a href="https://test.pypi.org/">TestPyPI</a></li><li>æ­£å¼ç¯å¢ƒ <a href="https://pypi.org/">PyPI</a></li></ul><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><ol><li>å¦‚æœæƒ³ç†Ÿæ‚‰ PyPI å‘å¸ƒå·¥å…·å’Œå‘å¸ƒæµç¨‹å¯ä»¥ä½¿ç”¨æµ‹è¯•ç¯å¢ƒ <a href="https://test.pypi.org/">TestPyPI</a></li><li>å¦‚æœå·²ç»ç†Ÿæ‚‰äº† PyPI çš„å‘å¸ƒå·¥å…·å’Œæµç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨æ­£å¼ç¯å¢ƒ <a href="https://pypi.org/">PyPI</a></li><li>TestPyPI å’Œ PyPI éœ€è¦å•ç‹¬æ³¨å†Œï¼Œå³åœ¨æ­£å¼ç¯å¢ƒæ³¨å†Œäº†ï¼Œå¦‚æœå»ä½¿ç”¨æµ‹è¯•ç¯å¢ƒä¹ŸåŒæ ·éœ€è¦æ³¨å†Œã€‚æ³¨æ„ï¼šåŒä¸€ä¸ªè´¦å·ä¸èƒ½åœ¨ PyPI å’Œ TestPyPI åŒæ—¶æ³¨å†Œã€‚</li></ol><p>å‡è®¾ä½ çš„é¡¹ç›®å·²ç»å®Œæˆäº†ï¼Œå‡†å¤‡è¦å‘å¸ƒåˆ° PyPI äº†ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å°†é¡¹ç›®å‘å¸ƒåˆ° PyPI ä¸Šäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> dist/*</span><br><span class="line"><span class="comment"># ç”Ÿæˆä»£ç å­˜æ¡£ .tar.gz æ–‡ä»¶å’Œæ„å»ºæ–‡ä»¶ .whl æ–‡ä»¶</span></span><br><span class="line">python setup.py sdist bdist_wheel</span><br><span class="line"><span class="comment"># å¦‚æœå‘å¸ƒåˆ°TestPyPIä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line">twine upload --repository testpypi dist/*</span><br><span class="line"><span class="comment"># å¦‚æœå‘å¸ƒåˆ°PyPIä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line">twine upload dist/*</span><br></pre></td></tr></table></figure><h2 id="å…³äºpydoc"><a href="#å…³äºpydoc" class="headerlink" title="å…³äºpydoc"></a>å…³äºpydoc</h2><p>Python å†…ç½®äº† doc çš„åŠŸèƒ½ï¼Œå« <code>pydoc</code>ã€‚æ‰§è¡Œ <code>python -m pydoc</code> å¯ä»¥çœ‹åˆ°å®ƒæœ‰å“ªäº›é€‰é¡¹å’ŒåŠŸèƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> docs</span><br><span class="line">python -m pydoc -w ..\   <span class="comment"># ç”Ÿæˆå…¨éƒ¨æ–‡æ¡£</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>python -m pydoc -b</code> å¯ä»¥åœ¨æœ¬åœ°ç«‹å³å¯åŠ¨ä¸€ä¸ª web é¡µé¢æ¥è®¿é—®ä½  <code>...\Python38\Lib\site-packages\</code> ç›®å½•ä¸‹æ‰€æœ‰ Libraries æ–‡æ¡£ã€‚</p><p><img src="/2020/09/how-to-release-python-project/pydoc-es.png" alt="ä»¥ elasticsearch æ–‡æ¡£ä¸ºä¾‹"></p><p>è¿™äº›æœ¬åœ°çš„ web æ–‡æ¡£å¦‚ä½•åœ¨å¤–ç½‘è¿›è¡Œè®¿é—®ï¼Ÿå¯ä»¥é€šè¿‡ GitHub æœ‰å†…ç½®çš„ GitHub Pages åŠŸèƒ½ï¼Œå¾ˆå®¹æ˜“æä¾›ä¸€ä¸ªåœ¨çº¿ç½‘å€ã€‚</p><p>æ‰“å¼€ä½ çš„ GitHub python é¡¹ç›®è®¾ç½®é€‰é¡¹ -&gt; æ‰¾åˆ° GitHub Pages -&gt; Source é€‰æ‹©ä½ çš„åˆ†æ”¯å’Œè·¯å¾„ï¼Œä¿å­˜åå°±ç«‹åˆ»æ‹¥æœ‰äº†ä¸€ä¸ªç½‘å€ã€‚ä¾‹å¦‚ï¼š</p><ul><li><a href="https://xxxxx.github.io/demo/">https://xxxxx.github.io/demo/</a> æ˜¯ä½ çš„é¡¹ç›®ä¸»é¡µï¼Œæ˜¾ç¤ºæ˜¯ README.md ä¿¡æ¯</li><li><a href="https://xxxxx.github.io/demo/docs/demo.html">https://xxxxx.github.io/demo/docs/demo.html</a> æ˜¯ä½ çš„é¡¹ç›®çš„ pydoc æ–‡æ¡£</li></ul><h2 id="å…³äºç‰ˆæœ¬å·"><a href="#å…³äºç‰ˆæœ¬å·" class="headerlink" title="å…³äºç‰ˆæœ¬å·"></a>å…³äºç‰ˆæœ¬å·</h2><p>å¦å¤–å¦‚æœæ˜¯æ­£å¼ç‰ˆæœ¬ï¼Œåœ¨å‘å¸ƒè¿˜éœ€è¦æ³¨æ„ç‰ˆæœ¬å·çš„é€‰æ‹©ã€‚</p><ul><li>å¦‚æœæ˜¯åŠŸèƒ½ç®€å•ï¼Œå®Œæˆåº¦ä¹Ÿä¸é«˜ï¼Œå»ºè®®ä» 0.0.1 ç‰ˆæœ¬å¼€å§‹ã€‚</li><li>å¦‚æœæ˜¯åŠŸèƒ½å®Œå–„ï¼Œä¸”å®Œæˆåº¦å¾ˆé«˜ï¼Œé‚£ä¹ˆå¯ä»¥ä» 1.0.0 ç‰ˆæœ¬å¼€å§‹ã€‚</li></ul><p>æ¯”å¦‚ä¸€ä¸ªé¡¹ç›®ä»å‡†å¤‡å‘å¸ƒåˆ°æ­£å¼å‘å¸ƒæœ‰å››ä¸ªé˜¶æ®µï¼šAlpha, Beta, å€™é€‰å‘å¸ƒä»¥åŠæ­£å¼å‘å¸ƒã€‚å‡å¦‚æ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬å·æ˜¯ 1.1.0 ç‰ˆæœ¬ï¼Œæ ¹æ®ä»¥ä¸‹çš„ç‰ˆæœ¬æ ‡è¯†çš„è§„èŒƒï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">X.YaN   # Alpha release</span><br><span class="line">X.YbN   # Beta release</span><br><span class="line">X.YrcN  # Release Candidate</span><br><span class="line">X.Y     # Final release</span><br></pre></td></tr></table></figure><p>å¾—åˆ° Alpha, Beta, å€™é€‰å‘å¸ƒåŠæ­£å¼å‘å¸ƒç‰ˆæœ¬åˆ†åˆ«å¦‚ä¸‹ï¼š</p><p>Alpha release ç‰ˆæœ¬å·æ˜¯ <code>1.1.0a1, 1.1.0a1, 1.1.0aN...</code><br>Beta release  ç‰ˆæœ¬å·æ˜¯ <code>1.1.0b1, 1.1.0b1, 1.1.0bN...</code><br>Release Candidate ç‰ˆæœ¬å·æ˜¯ <code>1.1.0rc1, 1.1.0rc2, 1.1.0rcN...</code><br>Final release ç‰ˆæœ¬å· <code>1.1.0, 1.1.1, 1.1.N...</code></p><blockquote><p>Python å®˜æ–¹çš„<a href="https://www.python.org/dev/peps/pep-0440/">ç‰ˆæœ¬æ ‡è¯†å’Œä¾èµ–è§„èŒƒæ–‡æ¡£</a></p></blockquote><h2 id="é€‰æ‹©License"><a href="#é€‰æ‹©License" class="headerlink" title="é€‰æ‹©License"></a>é€‰æ‹©License</h2><p>ä¼ä¸šçº§çš„é¡¹ç›® License ä¸€èˆ¬ç”±å…¬å¸çš„æ³•å¾‹å›¢é˜Ÿæ¥æä¾›ï¼Œå‘å¸ƒè€…åªéœ€æ‹¿åˆ° License æ–‡ä»¶åšä¸€äº›æ ¼å¼åŒ–å·¥ä½œï¼ˆæ¯”å¦‚å°† license.txt æ–‡ä»¶æ ¼å¼åŒ–ä¸ºæ¯è¡Œ 70~80 ä¸ªå­—ç¬¦ï¼‰ã€‚</p><p>å¦‚æœæ˜¯ä¸ªäººé¡¹ç›®æˆ–æ˜¯æƒ³äº†è§£å¼€æºè®¸å¯ç›¸å…³çš„ä»‹ç»ï¼Œå¸¸è§çš„è½¯ä»¶å¼€æºè®¸å¯è¯ï¼ˆä»¥ä¸‹è®¸å¯è¯æ˜¯æŒ‰æ¡ä»¶æ•°é‡æ’åºçš„ï¼‰</p><ul><li>GNU AGPLv3</li><li>GNU GPLv3</li><li>GNU LGPLv3</li><li>Mozilla Public License 2.0</li><li>Apache License 2.0</li><li>MIT License</li><li>Boost Software License 1.0</li><li>The Unlicense</li></ul><p>è¿™é‡Œæœ‰ä¸€ç¯‡å…³äºã€Š<a href="https://mp.weixin.qq.com/s/CjeWol3BdGkmGZi-zMnDkQ">Githubä»“åº“å¦‚ä½•é€‰æ‹©å¼€æºè®¸å¯è¯</a>ã€‹æ–‡ç« ä¾›å‚è€ƒã€‚</p><blockquote><p>å¦‚ä½•é€‰é¡¹ License <a href="https://choosealicense.com/licenses/">https://choosealicense.com/licenses\</a><br>å¦‚ä½•é€‰é¡¹ License GitHub ä»“åº“ <a href="https://github.com/github/choosealicense.com/">https://github.com/github/choosealicense.com\</a><br>å¦‚ä½•é€‰é¡¹ License é™„å½• <a href="https://choosealicense.com/appendix">https://choosealicense.com/appendix</a> \</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Release </tag>
            
            <tag> PyPI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>About Python pip install and versioning</title>
      <link href="/2020/08/about-pip-install-and-versioning/"/>
      <url>/2020/08/about-pip-install-and-versioning/</url>
      
        <content type="html"><![CDATA[<h2 id="Backgroup"><a href="#Backgroup" class="headerlink" title="Backgroup"></a>Backgroup</h2><p>If you want to release python project on PyPI, you must need to know about PyPI usage characteristics, then I did some test about pip install command.</p><p>For example: I have a Python project called <code>demo-pip</code>. and beta release would like <code>1.1.0.xxxx</code>, offical release version is <code>1.1.0</code> to see if could success upgrade when using <code>pip</code> command.</p><p>Base on the below test results, I summarized as follows:</p><ol><li>   Install a specific version of demo-pip from PyPI, with <code>--upgrade</code> option or not, theyâ€™ll all both success.</li><li>   Install the latest package version of demo-pip from PyPI that version is large than the locally installed package version, with <code>--upgrade</code> option installs successfully. without <code>--upgrade</code> option install failed.</li><li>   Install the latest package version of demo-pip from PyPI that version is less than the locally installed package version, with <code>--upgrade</code> option or not, install failed.</li><li>   1.1.0.xxxx version naming is OK, but when the beta version is larger than 1.1.0, for example, the beta version is 1.1.0.1000, pip install with <code>--upgrade</code> not work when our official release version is 1.1.0.<br>a.One option is the official release version start from 1.1.0.1000, beta version starts from 1.1.0.0001, 1.1.0.0002â€¦ Or the beta version should be less than 1.1.0, maybe 1.0.0.xxxx<br>b.Another option is follow up <a href="https://www.python.org/dev/peps/pep-0440/">python official versioning</a> that is the best practice, then the beta release version will be 1.1.b1, 1.1.b2, 1.1.bNâ€¦ (it passed No.5 test below)</li></ol><h2 id="My-Test-Case"><a href="#My-Test-Case" class="headerlink" title="My Test Case"></a>My Test Case</h2><span id="more"></span><table><thead><tr><th>&lt;No.&gt;</th><th>&lt;Test Case Steps&gt;</th><th>&lt;Test Output&gt;</th><th>&lt;Test Results&gt;</th></tr></thead><tbody><tr><td>1</td><td>1.build and install demo-pip-1.0.5<br>2.install from PyPI. on PyPI, the latest version is 1.0.4</td><td>C:\workspace\demo-pip&gt;pip install dist\demo-pip-1.0.5-py3-none-any.whl<br>Processing c:\workspace\demo-pip\dist\demo-pip-1.0.5-py3-none-any.whl<br>Installing collected packages: demo-pip<br>  Attempting uninstall: demo-pip<br>    Found existing installation: demo-pip 1.0.4<br>    Uninstalling demo-pip-1.0.4:<br>      Successfully uninstalled demo-pip-1.0.4<br>Successfully installed demo-pip-1.0.5<br> <br>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a> â€“upgrade demo-pip<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Requirement already up-to-date: demo-pip in c:\program files\python38\lib\site-packages (1.0.5)</td><td>install with <code>--upgrade</code> option failed when the installed version number is less than the current version number</td></tr><tr><td>2</td><td>1.rebuild and install demo-pip-1.0.3<br>2.install from PyPI again with <code>--upgrade</code> option</td><td>C:\workspace\demo-pip&gt;pip install dist\demo-pip-1.0.3-py3-none-any.whl<br>Processing c:\workspace\demo-pip\dist\demo-pip-1.0.3-py3-none-any.whl<br>Installing collected packages: demo-pip<br>  Attempting uninstall: demo-pip<br>    Found existing installation: demo-pip 1.0.5<br>    Uninstalling demo-pip-1.0.5:<br>      Successfully uninstalled demo-pip-1.0.5<br>Successfully installed demo-pip-1.0.3<br> <br>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a> â€“upgrade demo-pip<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Collecting demo-pip<br>  Downloading <a href="https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl">https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl</a> (51 kB)<br>     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 51 kB 362 kB&#x2F;s<br>Installing collected packages: demo-pip<br>  Attempting uninstall: demo-pip<br>    Found existing installation: demo-pip 1.0.3<br>    Uninstalling demo-pip-1.0.3:<br>      Successfully uninstalled demo-pip-1.0.3<br>Successfully installed demo-pip-1.0.4</td><td>install with <code>--upgrade</code> option success from PyPI when install version number is larger than the current version number</td></tr><tr><td>3</td><td>1. create a new build demo-pip-1.0.3.1000<br>2. install demo-pip-1.0.3.1000 with <code>--upgrade</code> option<br>3. install demo-pip-1.0.3.1000, without <code>--upgrade</code> option</td><td>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a> â€“upgrade demo-pip<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Collecting demo-pip<br>  Downloading <a href="https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl">https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl</a> (51 kB)<br>     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 51 kB 83 kB&#x2F;s<br>Installing collected packages: demo-pip<br>  Attempting uninstall: demo-pip<br>    Found existing installation: demo-pip 1.0.3.1000<br>    Uninstalling demo-pip-1.0.3.1000:<br>      Successfully uninstalled demo-pip-1.0.3.1000<br>Successfully installed demo-pip-1.0.4<br> <br>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a> demo-pip<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Requirement already satisfied: demo-pip in c:\program files\python38\lib\site-packages (1.0.3.1000)</td><td>1. install with <code>--upgrade</code> option success<br> 2. install without <code>--upgrade</code> option failed</td></tr><tr><td>4</td><td>1. create a new build demo-pip-1.0.4.1000<br>2. install demo-pip-1.0.4.1000 with <code>--upgrade</code> option.<br>3. install specific version of demo-pip</td><td>C:\workspace\demo-pip&gt;pip install dist\demo-pip-1.0.4.1000-py3-none-any.whl<br>Processing c:\workspace\demo-pip\dist\demo-pip-1.0.4.1000-py3-none-any.whl<br>Installing collected packages: demo-pip<br>  Attempting uninstall: demo-pip<br>    Found existing installation: demo-pip 1.0.4<br>    Uninstalling demo-pip-1.0.4:<br>      Successfully uninstalled demo-pip-1.0.4<br>Successfully installed demo-pip-1.0.4.1000<br> <br>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a> â€“upgrade demo-pip<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Requirement already up-to-date: demo-pip in c:\program files\python38\lib\site-packages (1.0.4.1000)<br> <br>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a>  demo-pip&#x3D;&#x3D;1.0.4<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Collecting demo-pip&#x3D;&#x3D;1.0.4<br>  Downloading <a href="https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl">https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl</a> (51 kB)<br>     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 51 kB 362 kB&#x2F;s<br>Installing collected packages: demo-pip<br>  Attempting uninstall: demo-pip<br>    Found existing installation: demo-pip 1.0.4.1000<br>    Uninstalling demo-pip-1.0.4.1000:<br>      Successfully uninstalled demo-pip-1.0.4.1000<br>Successfully installed demo-pip-1.0</td><td>Install failed when the install version number is less than the currently installed version number<br> <br>if install a specific version of demo-pip with <code>--upgrade</code> option or not. will both works.</td></tr><tr><td>5</td><td>1. Follow up python official version naming for beta-version, create a new build demo-pip-1.0.b1<br>2. install from PyPi without <code>--upgrade</code> option<br>3. install from PyPi with <code>--upgrade</code> option</td><td>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a> demo-pip<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Requirement already satisfied: demo-pip in c:\program files\python38\lib\site-packages (1.0b1)<br> <br>C:\workspace\demo-pip&gt;pip install -i <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a> â€“upgrade demo-pip<br>Looking in indexes: <a href="https://test.pypi.org/simple/">https://test.pypi.org/simple/</a><br>Collecting demo-pip<br>  Downloading <a href="https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl">https://test-files.pythonhosted.org/packages/41/c5/fe16fdc482927b2831c36f96d6e5a1c5b7a2a676ddc4c00c67a9ccf644e9/demo-pip-1.0.4-py3-none-any.whl</a> (51 kB)<br>     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 51 kB 362 kB&#x2F;s<br>Installing collected packages: demo-pip<br>  Attempting uninstall: demo-pip<br>    Found existing installation: demo-pip 1.0b1<br>    Uninstalling demo-pip-1.0b1:<br>      Successfully uninstalled demo-pip-1.0b1<br>Successfully installed demo-pip-1.0.4</td><td>install successful with <code>--upgrade</code> option<br>so it means 1.0.b1 version number is less than 1.0.4 version</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Language </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Update Jira server account avatar with rest API</title>
      <link href="/2020/08/update-jira-server-account-avatar-with-rest-api/"/>
      <url>/2020/08/update-jira-server-account-avatar-with-rest-api/</url>
      
        <content type="html"><![CDATA[<h2 id="Backgroud"><a href="#Backgroud" class="headerlink" title="Backgroud"></a>Backgroud</h2><p>When you are using a server account for CI&#x2F;CD, if you want to make the server account avatar to looks professional on Jira update but the server account may not allowed to log to Jira, so you can not update the avatar though GUI, you could use Jira REST API to do this.</p><p>I assume you have an account called <code>robot</code>, here are the examples of how to update though REST API.</p><h2 id="Example-in-Python"><a href="#Example-in-Python" class="headerlink" title="Example in Python"></a>Example in Python</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> http.client</span><br><span class="line"></span><br><span class="line">conn = http.client.HTTPSConnection(<span class="string">&quot;jira.your-company.com&quot;</span>)</span><br><span class="line"></span><br><span class="line">payload = <span class="string">&quot;&#123;\r\n\t\&quot;id\&quot;: \&quot;24880\&quot;,\r\n\t\&quot;isSelected\&quot;: false,\r\n\t\&quot;isSystemAvatar\&quot;: true,\r\n\t\&quot;urls\&quot;: &#123;\r\n\t\t\&quot;16x16\&quot;: \&quot;https://jira.your-company.com/secure/useravatar?size=xsmall&amp;avatarId=24880\&quot;,\r\n\t\t\&quot;24x24\&quot;: \&quot;https://jira.your-company.com/secure/useravatar?size=small&amp;avatarId=24880\&quot;,\r\n\t\t\&quot;32x32\&quot;: \&quot;https://jira.your-company.com/secure/useravatar?size=medium&amp;avatarId=24880\&quot;,\r\n\t\t\&quot;48x48\&quot;: \&quot;https://jira.your-company.com/secure/useravatar?avatarId=24880\&quot;&#125;\r\n&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;authorization&#x27;</span>: <span class="string">&quot;Basic Ymx3bXY6SzhNcnk5ZGI=&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;cache-control&#x27;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;postman-token&#x27;</span>: <span class="string">&quot;ecfc3260-9c9f-e80c-e3e8-d413f48dfbf4&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">conn.request(<span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;/rest/api/latest/user/avatar?username=robot&quot;</span>, payload, headers)</span><br><span class="line"></span><br><span class="line">res = conn.getresponse()</span><br><span class="line">data = res.read()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br></pre></td></tr></table></figure><h2 id="Example-in-Postman"><a href="#Example-in-Postman" class="headerlink" title="Example in Postman"></a>Example in Postman</h2><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># URL and Method is PUT</span></span><br><span class="line">https://jira.your-company.com/rest/api/latest/user/avatar?username=robot</span><br><span class="line"></span><br><span class="line"><span class="comment"># Authorization</span></span><br><span class="line"><span class="comment"># Type: Basic Auth</span></span><br><span class="line"><span class="comment"># Username: server-account-username</span></span><br><span class="line"><span class="comment"># Password: server-accoutn-password</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Body</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;id&quot;</span>: <span class="string">&quot;24880&quot;</span>,</span><br><span class="line"><span class="string">&quot;isSelected&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">&quot;isSystemAvatar&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;urls&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;16x16&quot;</span>: <span class="string">&quot;https://jira.your-company.com/secure/useravatar?size=xsmall&amp;avatarId=24880&quot;</span>,</span><br><span class="line"><span class="string">&quot;24x24&quot;</span>: <span class="string">&quot;https://jira.your-company.com/secure/useravatar?size=small&amp;avatarId=24880&quot;</span>,</span><br><span class="line"><span class="string">&quot;32x32&quot;</span>: <span class="string">&quot;https://jira.your-company.com/secure/useravatar?size=medium&amp;avatarId=24880&quot;</span>,</span><br><span class="line"><span class="string">&quot;48x48&quot;</span>: <span class="string">&quot;https://jira.your-company.com/secure/useravatar?avatarId=24880&quot;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="How-to-find-the-avatar-id"><a href="#How-to-find-the-avatar-id" class="headerlink" title="How to find the avatar id"></a>How to find the avatar id</h2><p>You replace other avatar ids you like. Here is how to find you avatar id you want <img src="/2020/08/update-jira-server-account-avatar-with-rest-api/find-avatar-id.png" alt="find avatar id"></p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jira </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Fixed &quot;Remote session was disconnected because there are no Remote Desktop client access licenses available&quot;</title>
      <link href="/2020/08/rdp-problem/"/>
      <url>/2020/08/rdp-problem/</url>
      
        <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Sometimes my Windows server 2012 R2 has RDP connect problem below:</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">The remote session was disconnected because there are no Remote Desktop client access licenses available for this computer.</span><br><span class="line">Please contact the server administrator.</span><br></pre></td></tr></table></figure><p><img src="/2020/08/rdp-problem/rdp-failed.png" alt="RDP connect problem"></p><span id="more"></span><h2 id="How-to-Fix"><a href="#How-to-Fix" class="headerlink" title="How to Fix"></a>How to Fix</h2><p>You could log in to the vSphere Web Client if you have via console or have some other way to log in to the machine.</p><ol><li><p>Open regedit.exe and navigate to</p><p> <img src="/2020/08/rdp-problem/regedit.jpg" alt="Regedit"></p></li><li><p>Search and Delete <code>LicensingGracePeriod</code> and <code>LicensingGracePeriodExpirationWarningDays</code></p></li><li><p>If deletion failed, this failure message appears <code>unable to delete all specified values</code>, you need change permission. Refer to the related <a href="https://www.youtube.com/results?search_query=unable+to+delete+all+specified+values">videos</a> on YouTuBe.</p></li><li><p>Reboot the system if it is still doesnâ€™t work.</p></li></ol><p>In my case, every 90 to 120 days, the RDP end of grace period shows up, this is not the final solution. please let me know if you have a better solution.</p><blockquote><p>Finally, thanks to Bill K. shared with me the above solution.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> RDP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡ generic-webhook-trigger æ’ä»¶å®æ—¶è·å– Bitbucket Repository Events</title>
      <link href="/2020/08/bitbucket-pull-request-event/"/>
      <url>/2020/08/bitbucket-pull-request-event/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ¬ç¯‡è®¨è®ºå¦‚ä½•é€šè¿‡ Jenkins generic webhook trigger æ’ä»¶æ¥è·å– Git ä»“åº“äº‹ä»¶ï¼ˆEventsï¼‰ã€‚æ¯”å¦‚è·å–ä»“åº“çš„ Pull Request ID ç­‰ã€‚</p><p>ä½¿ç”¨è¿‡ Jenkins Multi-branch pipeline Job çš„ç”¨æˆ·çŸ¥é“ï¼Œè¿™ä¸ª Job ç±»å‹çš„ç¯å¢ƒå˜é‡ä¸­å¯ä»¥å¾—åˆ° Pull Request çš„ç›¸å…³ä¿¡æ¯å¦‚ä¸‹</p><p><img src="/2020/08/bitbucket-pull-request-event/pull-request-env.png" alt="Multi-branch pipeline Job ç¯å¢ƒå˜é‡"></p><p>ä¸ºäº†è·å–è¿™ä¸ªå˜é‡éœ€è¦åˆ›å»ºè¿™ç§ç±»å‹çš„ Jobï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦ clone è¯¥ä»“åº“çš„ä»£ç ï¼Œæœ‰ç‚¹æ€é¸¡å®°ç‰›çš„æ„æ€ï¼Œçœ‹èµ·æ¥å¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹åˆ«æ°å½“çš„åŠæ³•ã€‚</p><p>å¦‚ä½•é€šè¿‡åˆ›å»ºä¸€ä¸ªæ™®é€šçš„ Jenkins Job å°±èƒ½å®æ—¶è·å– Bitbucket ä»“åº“ä»¥åŠ Pull Request äº‹ä»¶å‘¢ï¼Ÿé€šè¿‡ä»¥ä¸‹åŠŸèƒ½å’Œæ’ä»¶å¯ä»¥å®ç°ã€‚</p><span id="more"></span><ol><li>é…ç½® Bitucket çš„ Webhook</li><li>é€šè¿‡ Jenkins generic-webhook-trigger æ’ä»¶æ¥æ”¶ Webhook çš„ Event äº‹ä»¶</li></ol><h2 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h2><h3 id="è®¾ç½®-Bitbucket-Webhook"><a href="#è®¾ç½®-Bitbucket-Webhook" class="headerlink" title="è®¾ç½® Bitbucket Webhook"></a>è®¾ç½® Bitbucket Webhook</h3><p>åœ¨éœ€è¦ç›‘å¬çš„ Bitbucket ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ª webhookï¼Œå¦‚ä¸‹ï¼š</p><ul><li>Name: <code>test-demo</code></li><li>URL: <code>http://JENKINS_URL/generic-webhook-trigger/invoke?token=test-demo</code></li></ul><p><img src="/2020/08/bitbucket-pull-request-event/webhook.png" alt="åˆ›å»ºä¸€ä¸ª webhook"></p><p>å¤‡æ³¨ï¼šBitbucket ä¸­è¿˜æœ‰ä¸€ä¸ªå¦å¤–ä¸€ä¸ªè®¾ç½®é¡¹ï¼Œæ ¹æ®æˆ‘çš„æµ‹è¯•ï¼Œè¯¥è®¾ç½®é¡¹ <strong>Post Webhooks</strong> ä¸ä¸Šé¢çš„ <strong>Webhooks</strong> éƒ½èƒ½å®ç°æœ¬æ–‡è¦å®ç°çš„åŠŸèƒ½ã€‚</p><h3 id="2-é…ç½®-Jenkins-Job"><a href="#2-é…ç½®-Jenkins-Job" class="headerlink" title="2. é…ç½® Jenkins Job"></a>2. é…ç½® Jenkins Job</h3><p><img src="/2020/08/bitbucket-pull-request-event/generic-config.png" alt="é…ç½® Jenkins: è·å– Pull Request ID"></p><p>æƒ³è·å–å…¶ä»– Event ä¿¡æ¯ï¼Œæ¯”å¦‚ PR title, commit ç­‰ï¼Œè¯·å‚è€ƒè¿™ä¸ªé“¾æ¥ <a href="https://github.com/jenkinsci/generic-webhook-trigger-plugin/blob/master/src/test/resources/org/jenkinsci/plugins/gwt/bdd/bitbucket-server/bitbucket-server-pull-request.feature">bitbucket-server-pull-request.feature</a>ï¼ŒæŒ‰ç…§ä¸Šé¢çš„è®¾ç½®å³å¯ã€‚</p><p><img src="/2020/08/bitbucket-pull-request-event/generic-config-token.png" alt="é…ç½® Jenkins: token"></p><p>è¿™é‡Œçš„ token å€¼ <code>test-demo</code> å¯ä»¥ä»»æ„èµ·åï¼Œä½†è¦ä¸ Bitbucket event URL ä¸­çš„ token ä¿æŒä¸€è‡´ã€‚</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><ol><li><p>åœ¨ Jenkins Job pipeline é‡Œæ·»åŠ äº†è¿™ä¸ªä»£ç ç‰‡æ®µ <code>echo pr_id is $&#123;pr_id&#125;</code> ç”¨æ¥æ£€æŸ¥è¾“å‡º Pull Request ID æ˜¯å¦å¦‚é¢„æœŸã€‚</p></li><li><p>ç„¶ååœ¨é…ç½®å¥½çš„ Bitbucket ä»“åº“ä¸‹é¢åˆ›å»ºä¸€ä¸ª Pull Request</p></li><li><p>Jenkins Job è¢« Pull Request Open äº‹ä»¶è‡ªåŠ¨è§¦å‘å¹¶æ‰§è¡Œäº†</p><p> <img src="/2020/08/bitbucket-pull-request-event/auto-trigger-jenkins.png" alt="Jenkins é€šè¿‡äº‹ä»¶åˆ«è‡ªåŠ¨æ‰§è¡Œ"></p></li><li><p>é€šè¿‡ Jenkins çš„è¾“å‡ºæ—¥å¿—çœ‹åˆ°æˆåŠŸè·å–åˆ°äº†è¿™ä¸ª Pull Request ID å€¼</p><p> <img src="/2020/08/bitbucket-pull-request-event/pull-request-id.png" alt="è·å–åˆ°äº† Pull Request ID"></p></li></ol><h2 id="ä½¿ç”¨æ‰©å±•"><a href="#ä½¿ç”¨æ‰©å±•" class="headerlink" title="ä½¿ç”¨æ‰©å±•"></a>ä½¿ç”¨æ‰©å±•</h2><p>å‡å¦‚ä½ æœ‰ä¸ªç¨‹åºï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥çš„ Pull Request ID å¹¶å€ŸåŠ© Bitbucket REST API æ¥è·å–å¹¶åˆ†ææŒ‡å®š Pull Request çš„å†…å®¹çš„ã€‚æ¯”å¦‚è·å–ç›¸å…³æ–‡ä»¶çš„å†å²è®°å½•ï¼Œä»è€ŒçŸ¥é“è¿™äº›æ–‡ä»¶è°ä¿®æ”¹çš„æœ€å¤šä»¥åŠè¿™æ¬¡ä¿®æ”¹æ¶‰åŠåˆ°äº†å“ªäº› Jira å•å·ï¼Œä»è€Œåšä¸€äº› Review æˆ–æ˜¯æ‰§è¡Œå›å½’æµ‹è¯•çš„æ¨èç­‰ç­‰ã€‚</p><p>æœ‰äº†è¿™ä¸ª PR ID å°±å¯ä»¥é€šè¿‡ Jenkins æ¥è‡ªåŠ¨è§¦å‘å»æ‰§è¡Œä½ ç¨‹åºäº†ã€‚</p><p>ä»¥ä¸Šçš„è¿™ç§æ–¹æ³•é€‚åˆä¸æƒ³æˆ–æ˜¯ä¸çŸ¥é“å¦‚ä½•ç›‘å¬ Git æœåŠ¡å™¨ï¼ˆBitbucketã€GitHub æˆ–æ˜¯ GitLab ç­‰ï¼‰äº‹ä»¶è€Œéœ€è¦è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªæœåŠ¡è€Œå‡†å¤‡çš„ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆå¾ˆå¥½çš„å®è·µï¼ŒæœŸå¾…ä½ çš„ç•™è¨€åˆ†äº«ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Bitbucket </tag>
            
            <tag> Webhook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Annual work summary from 2019.03 - 2020.07</title>
      <link href="/2020/07/annual-work-summary/"/>
      <url>/2020/07/annual-work-summary/</url>
      
        <content type="html"><![CDATA[<p>Summarize what did I do from 2019.03 to 2020.07 when I became a Build Release&#x2F;DevOps engineer.</p><h2 id="Build-automation"><a href="#Build-automation" class="headerlink" title="Build automation"></a>Build automation</h2><ul><li>Support all server windows platform build manual to auto.</li><li>Support clients build from manual to auto.</li><li>Switch Linux&#x2F;Unix build from Bamboo to Jenkins.</li><li>Support all platforms branches&#x2F;Pull Request build.</li><li>Provide auto-build as self-service for a developer, no need to involve build engineer, they could build themselves.</li></ul><h2 id="Integration"><a href="#Integration" class="headerlink" title="Integration"></a>Integration</h2><ul><li><p>Integration with Jenkins</p><ul><li>Self-service installation.</li><li>Blackduck, Polaris integration.</li><li>Git stats, analyze Bitbucket data with Elastic stack.</li><li>Monitor legacy build machines status.</li><li>Product escrow, sync xdemo, provide NFS and SYNC mvopensrc, update Bitbucket Jenkins build status, etc.</li></ul></li><li><p>Integration with JFrog Ariifactory</p><ul><li>Establish deploy strategy and directory structure organization.</li><li>Handle artifacts(build, etc) with different maturity.</li></ul></li></ul><h2 id="Infrastructure-management"><a href="#Infrastructure-management" class="headerlink" title="Infrastructure management"></a>Infrastructure management</h2><ul><li>Manage Jenkins for setting, update and backup.</li><li>Ariifactory artifacts cleanup, retention, backup.</li><li>Git branches&#x2F;hooks management.</li><li>VMs tracking, management build machines.</li></ul>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Work </tag>
            
            <tag> Summary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins æ‰§è¡Œ Shell å¦‚æœè¿”å›å€¼ä¸ä¸º0ï¼Œä½œä¸š(Job)åœæ­¢å¹¶å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</title>
      <link href="/2020/07/jenkins-tips-3/"/>
      <url>/2020/07/jenkins-tips-3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã€ŠJenkins Tips 3ã€‹â€”â€” æ¯æœŸç”¨ç®€çŸ­çš„å›¾æ–‡æè¿°ä¸€ä¸ª Jenkins å°æŠ€å·§ã€‚</p></blockquote><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨ä½¿ç”¨ Jenkins pipeline æ—¶ï¼Œå¦‚æœ Shell çš„è¿”å›å€¼ä¸ä¸ºé›¶ï¼ˆä¹Ÿå°±æ˜¯ Shell å‘½ä»¤æ‰§è¡Œæ—¶æœ‰é”™è¯¯ï¼‰ï¼ŒJenkins Job é»˜è®¤ä¼šæ ‡è®°å½“å‰çš„ stage ä¸ºå¤±è´¥ã€‚å› æ­¤æ•´ä¸ª Job ä¹Ÿä¼šå¤±è´¥ã€‚</p><p>åœ¨æœ‰äº›æ—¶å€™æˆ‘ä»¬å¸Œæœ› Shell è™½ç„¶æ‰§è¡Œå¤±è´¥è¿”å›çš„ä¸ä¸ºé›¶ï¼Œä½†å¸Œæœ›Jenkins Job åœ¨æ‰§è¡ŒæˆåŠŸåï¼Œè¦æ˜¾ç¤ºæˆåŠŸçŠ¶æ€ã€‚</p><span id="more"></span><p>ä¾‹å¦‚ï¼šé€šè¿‡ Shell å‘½ä»¤åˆ—å‡ºä»¥ <code>fail-list-</code> å¼€å¤´çš„æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åˆ™é€šçŸ¥ç”¨æˆ·ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸é€šçŸ¥ç”¨æˆ·ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> -a fail-list-*</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µæ˜¯æ‰§è¡Œå¦‚ä¸Šå‘½ä»¤å¯¼è‡´äº†æ•´ä¸ª Job å¤±è´¥ã€‚</p><p><img src="/2020/07/jenkins-tips-3/error.png" alt="å¤±è´¥ log"></p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>ç»è¿‡ä¸€ç•ªè°ƒæŸ¥ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç ç‰‡æ®µè§£å†³äº†å¦‚ä¸Šé—®é¢˜ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">stage(<span class="string">&quot;Send notification&quot;</span>) &#123;</span><br><span class="line">  steps &#123;</span><br><span class="line">    script &#123;</span><br><span class="line">      <span class="type">def</span> <span class="variable">fileExist</span> <span class="operator">=</span> sh script: <span class="string">&quot;ls -a fail-list-* &gt; /dev/null 2&gt;&amp;1&quot;</span>, returnStatus: <span class="literal">true</span></span><br><span class="line">      <span class="title function_">if</span> <span class="params">( fileExist == <span class="number">0</span> )</span> &#123;</span><br><span class="line">        <span class="comment">// send email to user</span></span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// if not found fail-list-* file, make build status success.</span></span><br><span class="line">        currentBuild.result = <span class="string">&#x27;SUCCESS&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>åœ¨æ‰§è¡Œ Shell æ—¶ï¼Œæ·»åŠ äº† <code>returnStatus: true</code>ã€‚è¿™æ˜¯å°†çŠ¶æ€ç è¿”å›å¹¶ä¿å­˜èµ·æ¥ï¼Œç„¶åä¸ 0 è¿›è¡Œæ¯”è¾ƒã€‚</p><p>å¦‚æœä¸ç­‰äº 0ï¼Œå¦‚æœä¸æ·»åŠ  <code>currentBuild.result = &#39;SUCCESS&#39;</code>ï¼ŒJenkins çš„æ•´ä¸ª Job è¿˜æ˜¯ä¼šæ ‡è®°ä¸ºå¤±è´¥çŠ¶æ€ã€‚æ·»åŠ åï¼Œäººä¸ºçš„å¿½ç•¥é”™è¯¯ï¼Œå°† Job çŠ¶æ€ç½®ä¸ºæˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to fix &quot;.NET Framework 2.0 or later is required on this computer to run a Jenkins agent as a Windows service&quot;</title>
      <link href="/2020/07/jenkins-windows-agent-connect-problem/"/>
      <url>/2020/07/jenkins-windows-agent-connect-problem/</url>
      
        <content type="html"><![CDATA[<p>When I upgrade Jenkins 2.176.3 to Jenkins 2.235.1, my Windows agent can not connect with master successfully and outcome this warning message â€œ.NET Framework 2.0 or later is required on this computer to run a Jenkins agent as a Windows serviceâ€.</p><span id="more"></span><p>It means I need to upgrade my Windows agent .NET Framework. Here are steps about how to upgrade .NET Framework to version 3.5.</p><h2 id="Install-NET-Framework-3-5"><a href="#Install-NET-Framework-3-5" class="headerlink" title="Install .NET Framework 3.5"></a>Install .NET Framework 3.5</h2><ol><li><p>Open Programs and Features</p><p><img src="/2020/07/jenkins-windows-agent-connect-problem/1.png" alt="Programs and Features"></p></li><li><p>Select .NET Framework 3.5 Features (In my screenshot, it had already installed)</p><p> <img src="/2020/07/jenkins-windows-agent-connect-problem/2.png" alt="Features"></p></li></ol><p>Then try to reconnect the Jenkins agent, then it should back to work.</p><h2 id="Install-Jenkins-agent-service"><a href="#Install-Jenkins-agent-service" class="headerlink" title="Install Jenkins agent service"></a>Install Jenkins agent service</h2><p>If you can not found a <code>Jenkins agent</code> like me,</p><p><img src="/2020/07/jenkins-windows-agent-connect-problem/4.png" alt="Jenkins agent service"></p><p>You can try these steps to install <code>Jenkins agent</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># install Jenkins agent service</span></span><br><span class="line"><span class="built_in">cd</span> c:\\jenkins</span><br><span class="line">.\jenkins-agent.exe install</span><br><span class="line">net start jenkinsslave-C__agent</span><br><span class="line"></span><br><span class="line"><span class="comment"># unstall Jenkins agent service</span></span><br><span class="line">sc delete jenkinsslave-C__agent</span><br></pre></td></tr></table></figure><h2 id="Manual-install-NET-Framework-3-5"><a href="#Manual-install-NET-Framework-3-5" class="headerlink" title="Manual install .NET Framework 3.5"></a>Manual install .NET Framework 3.5</h2><p>Btw, if you could not install .NET Framework 3.5 successfully. you can try to install manually by this step</p><ol><li><p>Manually download <a href="https://androidfilehost.com/?fid=1322778262904003837">microsoft-windows-netfx3-ondemand-package.cab</a></p></li><li><p>Specify the path like below to install(note: the path is the directory where the file located)</p><p> <img src="/2020/07/jenkins-windows-agent-connect-problem/3.png" alt="microsoft-windows-netfx3-ondemand-package.cab file path"></p></li></ol><p>In my case no need to reboot the Windows agent.</p><p>Hopefully, this also works for you. Let me know in case you have any comments.</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯ä¸ª Jenkins ç”¨æˆ·éƒ½åº”è¯¥çŸ¥é“è¿™ä¸‰ä¸ªæœ€ä½³å®è·µ</title>
      <link href="/2020/07/jenkins-best-practice-cn/"/>
      <url>/2020/07/jenkins-best-practice-cn/</url>
      
        <content type="html"><![CDATA[<p>â€‹åœ¨ä½¿ç”¨ Jenkins å®æ–½äº†ä¼ä¸šçº§çš„ CI&#x2F;CD å·¥ä½œï¼Œæœ‰å¦‚ä¸‹ä¸‰ä¸ªæœ€é‡è¦çš„å®è·µå’Œæ€»ç»“ã€‚</p><p>ç¬¬ä¸€ï¼ŒConfiguration as Codeï¼ˆé…ç½®å³ä»£ç ï¼‰<br>å…¶æ¬¡ï¼ŒJenkins shared librariesï¼ˆJenkins å…±äº«åº“ï¼‰<br>æœ€åï¼ŒMulti-Branch Pipelineï¼ˆå¤šåˆ†æ”¯æµæ°´çº¿ï¼‰</p><h2 id="é…ç½®å³ä»£ç "><a href="#é…ç½®å³ä»£ç " class="headerlink" title="é…ç½®å³ä»£ç "></a>é…ç½®å³ä»£ç </h2><p>é…ç½®å³ä»£ç (Configuration as Code)æ˜¯ä¸€ç§åœ¨ä»£ç ä»“åº“é‡Œç®¡ç†é…ç½®çš„æ–¹æ³•ã€‚</p><h3 id="å®ƒæœ‰ä»€ä¹ˆå¥½å¤„"><a href="#å®ƒæœ‰ä»€ä¹ˆå¥½å¤„" class="headerlink" title="å®ƒæœ‰ä»€ä¹ˆå¥½å¤„"></a>å®ƒæœ‰ä»€ä¹ˆå¥½å¤„</h3><h4 id="ä½œä¸šé€æ˜åŒ–"><a href="#ä½œä¸šé€æ˜åŒ–" class="headerlink" title="ä½œä¸šé€æ˜åŒ–"></a>ä½œä¸šé€æ˜åŒ–</h4><span id="more"></span><p>å¦‚æœä½ ä½¿ç”¨è¿‡ Bamboo æˆ– Jenkins 1.x ç‰ˆæœ¬ï¼Œä½ çŸ¥é“æƒ³è¦ä»é…ç½®é¡µé¢(GUI)æ¥å¿«é€Ÿäº†è§£ä¸€ä¸ªä½œä¸šçš„é€»è¾‘æ˜¯å¤šä¹ˆçš„å›°éš¾ï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›ä¸å¤ªäº†è§£ CI å·¥å…·çš„äººæ›´æ˜¯éš¾ä¸ŠåŠ éš¾ã€‚</p><p>å› æ­¤å¦‚æœä½ å‡†å¤‡ä½¿ç”¨ Jenkins æ¥ä½œä¸ºå›¢é˜Ÿçš„ CI å·¥å…·ï¼Œä¸€å®šè¦ä½¿ç”¨é…ç½®å³ä»£ç ï¼Œå› ä¸ºä»£ç å¯¹äºå·¥ç¨‹å¸ˆæ¥è¯´æ›´æ˜“è¯»å’Œäº†è§£èƒŒåçš„é€»è¾‘ã€‚</p><h4 id="å¯è¿½æº¯æ€§"><a href="#å¯è¿½æº¯æ€§" class="headerlink" title="å¯è¿½æº¯æ€§"></a>å¯è¿½æº¯æ€§</h4><p>å¯¹äº GUI é¡µé¢é…ç½®å¸¦æ¥çš„å¦å¤–ä¸€ä¸ªé‡è¦é—®é¢˜å°±æ˜¯æ— æ³•è¿½æº¯ä¿®æ”¹å†å²ï¼Œæ¥çœ‹åˆ«äººåšäº†ä»€ä¹ˆä¿®æ”¹ã€‚èƒ½æŸ¥çœ‹å…¶ä»–äººçš„ä¿®æ”¹å¯¹äºä¸€äº›å¾ˆé‡è¦çš„ Job æ˜¯éå¸¸é‡è¦çš„ï¼Œæ¯”å¦‚åƒæ˜¯ Build Jobs ç­‰ã€‚æŠŠ Jenkins çš„é…ç½®å½“ä½œé¡¹ç›®ä»£ç æ¥ç®¡ç†ï¼Œè¿™æ ·åšçš„å¥½å¤„ä¸ä»…åœ¨äºå¯è·Ÿè¸ªæ€§ï¼Œè¿˜åœ¨äºåœ¨éœ€è¦æ—¶å¯ä»¥å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ã€‚</p><h4 id="å¿«é€Ÿæ¢å¤"><a href="#å¿«é€Ÿæ¢å¤" class="headerlink" title="å¿«é€Ÿæ¢å¤"></a>å¿«é€Ÿæ¢å¤</h4><p>é…ç½®å³ä»£ç çš„ä½¿ç”¨è¿˜æœ‰å¦ä¸€ä¸ªå¥½å¤„ï¼šå¤Ÿåœ¨ç¡¬ä»¶æˆ–æ˜¯ç³»ç»Ÿå‡ºäº†é—®é¢˜åå¿«é€Ÿæ¢å¤ Jenkinsã€‚ä½†æ˜¯ï¼Œå¦‚æœ Jenkins ä½œä¸šæ˜¯é€šè¿‡ GUI é…ç½®çš„ï¼Œå½“æ‰˜ç®¡ Jenkins çš„æœåŠ¡å™¨æŸåæ—¶ï¼Œä½ çš„ä¸šåŠ¡å¯èƒ½é¢ä¸´ä¸¢å¤±çš„é£é™©ã€‚å› æ­¤ï¼Œä»ä¸šåŠ¡è¿ç»­æ€§è§’åº¦æ¥çœ‹ï¼Œå®ƒä¹Ÿæš—ç¤ºæˆ‘ä»¬è¦ä½¿ç”¨é…ç½®å³ä»£ç ã€‚</p><h2 id="Jenkins-å…±äº«åº“"><a href="#Jenkins-å…±äº«åº“" class="headerlink" title="Jenkins å…±äº«åº“"></a>Jenkins å…±äº«åº“</h2><p>å°±åƒç¼–å†™ä»»ä½•åº”ç”¨ç¨‹åºä»£ç ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå‡½æ•°ã€å­ä¾‹ç¨‹ä»¥å®ç°é‡ç”¨å’Œå…±äº«ã€‚åŒæ ·çš„é€»è¾‘ä¹Ÿé€‚ç”¨äº Jenkins Pipeline é…ç½®ã€‚æ¯”å¦‚å‘é€ç”µå­é‚®ä»¶ã€æ‰“å°æ—¥å¿—ã€å°† build æ”¾åˆ° FTP æˆ–Artifactory ç­‰åŠŸèƒ½éƒ½å¯ä»¥æ”¾åˆ° Jenkins å…±äº«åº“ä¸­ã€‚</p><p>å¦‚ä½ æ‰€è§ï¼Œä»¥ä¸‹è¿™äº› groovy æ–‡ä»¶å°±æ˜¯ Jenkins å…±äº«åº“çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬ç”¨æ¥å®Œæˆå‘é€ç”µå­é‚®ä»¶ã€git ç­‰æ“ä½œã€æ›´æ–°å¼€æºã€ä»£ç æ‰«æï¼ˆPolarisï¼‰åŠè§¦å‘å…¶ä»–ä»»åŠ¡ç­‰å·¥ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xshen@localhost MINGW64 /c/workspace/cicd/src/org/devops (develop)</span><br><span class="line">$ <span class="built_in">ls</span> -l</span><br><span class="line">total 28</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 5658 Jun 18 09:23 email.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089  898 Jun 13 20:05 git.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 1184 Jun  8 12:10 opensrc.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 1430 Jul  3 10:33 polaris.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 2936 Jul  3 10:32 trigger.groovy</span><br><span class="line">drwxr-xr-x 1 xshen 1049089    0 Jun  8 12:10 utils/</span><br><span class="line">-rw-r--r-- 1 xshen 1049089  787 May 12 13:24 utils.groovy</span><br></pre></td></tr></table></figure><h3 id="å¥½å¤„"><a href="#å¥½å¤„" class="headerlink" title="å¥½å¤„"></a>å¥½å¤„</h3><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…±äº«åº“ï¼Œå®ƒä¸ä½†å¯ä»¥å‡å°‘é‡å¤ä»£ç ï¼Œä¹Ÿæ›´å®¹æ˜“ç»´æŠ¤ã€‚æ¯”å¦‚å½“ä½ éœ€è¦ç®¡ç†å¾ˆå¤šä¸ªä»“åº“é‡Œçš„è‡ªåŠ¨åŒ–æµæ°´çº¿çš„æ—¶å€™ï¼Œä½¿ç”¨ Jenkins å…±äº«åº“ä¸éœ€è¦æ›´æ–°æ¯ä¸ªä»£ç ä»“åº“é‡Œçš„ Jenkinsfileï¼Œåªæ›´æ”¹å…±äº«åº“é‡Œçš„ä»£ç å³å¯ã€‚</p><p>è¿™æ ·çš„æ–¹å¼ä¹Ÿé¼“åŠ±é‡ç”¨å’Œè·¨å›¢é˜Ÿå…±äº«ã€‚ä¾‹å¦‚ï¼Œæˆ‘åˆ›å»ºçš„å…±äº«åº“ä¹Ÿè¢«å…¬å¸å…¶ä»–å›¢é˜Ÿåœ¨ä½¿ç”¨ã€‚</p><h2 id="åˆ†æ”¯æµæ°´çº¿"><a href="#åˆ†æ”¯æµæ°´çº¿" class="headerlink" title="åˆ†æ”¯æµæ°´çº¿"></a>åˆ†æ”¯æµæ°´çº¿</h2><p>åœ¨ä¸‹é¢è¿™å¼ å›¾ä¸­ï¼Œå¼€å‘çš„æ¯ä¸ª Pull Request é€šè¿‡ Webhook è§¦å‘è‡ªåŠ¨æ„å»ºå’Œå†’çƒŸæµ‹è¯•ï¼Œåªæœ‰é€šè¿‡<strong>æ„å»ºæµ‹è¯•</strong>å’Œ<strong>å†’çƒŸæµ‹è¯•</strong>çš„ä¿®æ”¹æ‰å…è®¸è¢«åˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ä¸Šã€‚</p><p><img src="/2020/07/jenkins-best-practice-cn/pull-request.png" alt="Pull Request æµç¨‹å›¾"></p><p>ä»¥ä¸Šçš„å·¥ä½œæµç¨‹æ˜¯åˆ©ç”¨ Jenkins å¤šåˆ†æ”¯æµæ°´çº¿æ¥å®ç°çš„ã€‚åœ¨è¿›å…¥ç»†èŠ‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p><p><img src="/2020/07/jenkins-best-practice-cn/multi-branches.png" alt="Multi-Branch Pepeline Branches"></p><p>åœ¨è¿™ä¸ªé¡µé¢çœ‹åˆ°çš„æ‰€æœ‰åˆ†æ”¯éƒ½æ˜¯åœ¨ä»£ç ä»“åº“é‡Œåˆ›å»ºåå°±è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè¿™æ ·å¼€å‘è€…éƒ½é€šè¿‡è¿™ä¸ª Jenkins Job å¯ä»¥åœ¨è‡ªå·±çš„åˆ†æ”¯è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•ã€‚</p><blockquote><p>æ³¨ï¼šå¦‚æœåˆ†æ”¯å·²ç»ä»ä»£ç ä»“åº“åˆ æ‰äº†ï¼Œè¿™äº›åˆ†æ”¯åˆ™ä¹Ÿä¼šç›¸åº”ä»è¿™ä¸ª Jenkins Job é‡Œåˆ é™¤æ‰æˆ–æ˜¯åƒä¸Šé¢é‚£æ ·æ˜¾ç¤ºåˆ’æ‰çŠ¶æ€ï¼ˆè¿™é‡Œå–å†³ä½  Jenkins çš„è®¾ç½®ï¼‰ã€‚Pull Request ä¹Ÿæ˜¯åŒç†ã€‚</p></blockquote><p><img src="/2020/07/jenkins-best-practice-cn/multi-pull-request.png" alt="Multi-Branch Pepeline Pull Requests"></p><p>è¿™æ ·ï¼Œå½“å¼€å‘äººå‘˜å®Œæˆä»–ä»¬çš„å·¥ä½œæ—¶ï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨è¿™äº› Jenkins Job æ¥è‡ªå·±åˆ›å»ºæ­£å¼çš„ Buildï¼Œè€Œä¸å†éœ€è¦ Build å·¥ç¨‹å¸ˆçš„å‚ä¸ã€‚è¿™åœ¨å¼•å…¥å¤šåˆ†æ”¯æµæ°´çº¿ä¹‹å‰æ‰€è¾¾ä¸åˆ°çš„ï¼Œä»¥å‰å¼€å‘æ€»æ˜¯éœ€è¦ Build å·¥ç¨‹å¸ˆä¸ºä»–ä»¬åˆ›å»º Build ç”¨æ¥æµ‹è¯•ï¼Œå¯¹äºä¸€ä¸ª 20 å¤šäººçš„å¼€å‘å›¢é˜Ÿï¼Œå¯ä»¥æƒ³è±¡æ»¡è¶³è¿™äº›éœ€æ±‚æ‰€è¦èŠ±è´¹å¤šå°‘åŠªåŠ›ã€‚</p><h3 id="å¥½å¤„-1"><a href="#å¥½å¤„-1" class="headerlink" title="å¥½å¤„"></a>å¥½å¤„</h3><p>ä»¥ä¸Šä»‹ç»äº†è¿™ä¸ªå¤šåˆ†æ”¯æµæ°´çº¿çš„ç¬¬ä¸€ä¸ªå¥½å¤„ï¼šä¸ºå›¢é˜Ÿåˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ©æœåŠ¡ï¼ŒèŠ‚çœäº†å¼€å‘çš„æ—¶é—´ï¼Œä¹ŸèŠ‚çœäº† Build å·¥ç¨‹å¸ˆçš„æ—¶é—´ã€‚</p><p>å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼šä½¿ä¸»åˆ†æ”¯å°†æ›´åŠ ç¨³å®šï¼Œå†ä¹Ÿä¸ç”¨èŠ±å¤§é‡æ—¶é—´å»æŸ¥æ‰¾æ˜¯è°çš„æäº¤ç ´åäº†ä¸»å¹²åˆ†æ”¯çš„æ„å»ºæˆ–æ˜¯åŠŸèƒ½ã€‚å› ä¸ºåªæœ‰é€šè¿‡æ„å»ºã€å®‰è£…ä»¥åŠå†’çƒŸæµ‹è¯•çš„ä»£ç æ‰ä¼šè¢«åˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ä¸Šã€‚</p><h3 id="ä»·å€¼"><a href="#ä»·å€¼" class="headerlink" title="ä»·å€¼"></a>ä»·å€¼</h3><p>ä»äººåŠ›æˆæœ¬ï¼šè¿™æ ·çš„è‡ªåŠ©æœåŠ¡ï¼ŒèŠ‚çœäº†è‡³å°‘ 0.5 äººä»¥ä¸Šçš„äººåŠ›æˆæœ¬ã€‚è®©è¿‡å»çš„é‡å¤åŠ³åŠ¨è€…ï¼Œå˜æˆç°åœ¨åŸºç¡€è®¾æ–½çš„ç»´æŠ¤è€…å’Œå¼€å‘è€…ã€‚</p><p>ä»è´¨é‡æˆæœ¬ï¼šä»¥æˆ‘çš„é¡¹ç›®æœ€è¿‘ä¸€ä¸ªæœˆå¤§çº¦ 30 ä¸ª Pull Request ä¸ºä¾‹ï¼Œå‘ç°å…¶ä¸­ 6 ä¸ªåœ¨æŸäº›å¹³å°ä¸Šå­˜åœ¨ Build é—®é¢˜ã€‚ä½ çŸ¥é“å¦‚æœèƒ½åœ¨å¼€å‘é˜¶æ®µå°±å‘ç°é—®é¢˜ï¼Œè€Œä¸æ˜¯è¢«æµ‹è¯•ã€Support äººå‘˜ç”šè‡³æ˜¯å®¢æˆ·å‘ç°é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ç§å‘ç°ç¼ºé™·çš„æˆæœ¬å°±ä¼šéå¸¸ä½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins Top 3 best practice</title>
      <link href="/2020/07/jenkins-best-practice/"/>
      <url>/2020/07/jenkins-best-practice/</url>
      
        <content type="html"><![CDATA[<p>I am Xianpeng, a build engineer. Today, I am going to share with you three Jenkins Practice.</p><p>I will talk about Configuration as code, followed up with shared libraries, and then Multi-Branch Pipeline in the end.</p><h2 id="Configuration-as-Code"><a href="#Configuration-as-Code" class="headerlink" title="Configuration as Code"></a>Configuration as Code</h2><p>What is Configuration as Code?</p><p>Configuration as code (CAC) is an approach that managing configuration resources in a bitbucket repository</p><h3 id="What-are-the-benefits"><a href="#What-are-the-benefits" class="headerlink" title="What are the benefits?"></a>What are the benefits?</h3><h4 id="First-Jenkins-Job-Transparency"><a href="#First-Jenkins-Job-Transparency" class="headerlink" title="First, Jenkins Job Transparency"></a>First, Jenkins Job Transparency</h4><span id="more"></span><p>To those who have experience with Bamboo jobs, you know how hard it is to grasp the logic from the GUI, this is especially true to people who donâ€™t know the tools very well. So, when we migrated Bamboo jobs to Jenkins, we decided to use Configuration as code, because the code is more readable and very easy for engineers to understand the logic and flow.</p><h4 id="Secondly-Traceability"><a href="#Secondly-Traceability" class="headerlink" title="Secondly, Traceability"></a>Secondly, Traceability</h4><p>Another drawback of configuring Jenkins Jobs through GUI is that it cannot trace the history and see who did what. The ability to see who made changes is very very important for some critical Jenkins jobs, such as build jobs. With Configuration as code, we treat the Jenkins job code the same way as other application code, the benefits are not only on traceability-wise, but also the ability to roll-back to a specific version if needed.</p><h4 id="Thirdly-Quick-Recovery"><a href="#Thirdly-Quick-Recovery" class="headerlink" title="Thirdly, Quick Recovery"></a>Thirdly, Quick Recovery</h4><p>Using Configuration as code has another benefit, which is the ability to quickly recover Jenkinsâ€™s job upon hardware issues. However, if Jenkins Job is configured through GUI, when the server that host the Jenkins corrupted, you might at risk of losing everything relates to Jenkins. So, from the business continuity  perspective, it is also suggesting us to use configuration as code.</p><h2 id="Jenkins-Shared-Libraries"><a href="#Jenkins-Shared-Libraries" class="headerlink" title="Jenkins Shared Libraries"></a>Jenkins Shared Libraries</h2><p>Just like writing any application code, that we need to create functions, subroutines for reuse and sharing purpose. The same logic applies to the Jenkins configuration code. Functionalities such as sending emails, printing logs, deploying the build to FTP&#x2F;Artifactory can be put into Jenkins Shared Libraries. Jenkins Shared Libraries is managed in Bitbucket.</p><p>So, letâ€™s take a look, â€¦</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xshen@localhost MINGW64 /c/workspace/cicd/src/org/devops (develop)</span><br><span class="line">$ <span class="built_in">ls</span> -l</span><br><span class="line">total 28</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 5658 Jun 18 09:23 email.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089  898 Jun 13 20:05 git.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 1184 Jun  8 12:10 opensrc.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 1430 Jul  3 10:33 polaris.groovy</span><br><span class="line">-rw-r--r-- 1 xshen 1049089 2936 Jul  3 10:32 trigger.groovy</span><br><span class="line">drwxr-xr-x 1 xshen 1049089    0 Jun  8 12:10 utils/</span><br><span class="line">-rw-r--r-- 1 xshen 1049089  787 May 12 13:24 utils.groovy</span><br></pre></td></tr></table></figure><p>As you can see, these groovy files are so-called shared libraries that complete works such as sending emails, git operations, updating opensource and so on.<br>So, it is becoming very clear why we want to use shared libraries because it can reduce duplicate code.</p><p>It is also easier to maintain because instead of updating several places, we just need to update the shared libraries if any changes required. The last but not least, it encourages reuse and sharing cross teams. For example, the shared libraries I created are also used other team.</p><h2 id="Multi-branch-pipeline"><a href="#Multi-branch-pipeline" class="headerlink" title="Multi-branch pipeline"></a>Multi-branch pipeline</h2><p>Next, Multi-branch pipeline. Some of you may have seen the same diagram like this.</p><p><img src="/2020/07/jenkins-best-practice/pull-request.png" alt="Pull Request diagram"></p><p>In this picture, the pull request will trigger an automatic build, which is very helpful to engineers because their changes will not be merged to the main branch unless it passes the build test and smoke test.</p><p>So, I will share more detailed information here with you.</p><p>The thing works behind the scene is called Jenkins Multi-branch Pipeline. Before getting into the details, letâ€™s first see what it looks like.</p><p><img src="/2020/07/jenkins-best-practice/multi-branches.png" alt="Multi-Branch Pipeline Branches"></p><blockquote><p>Note: If your branch or Pull Request has been deleted, the branch or Pull Request will either be removed from the multi-branch Job or show a crossed-out status as shown above, this depending on your Jenkins setting.</p></blockquote><p><img src="/2020/07/jenkins-best-practice/multi-pull-request.png" alt="Multi-Branch Pipeline Pull Requests"></p><p>So, as you can see from this page, there are multi Jenkins jobs. That is because for each bugfix or feature branch in Bitbucket, this multi-branch pipeline will automatically create a Jenkins job for them.</p><p>So, when developers complete their works, they can use these Jenkins jobs to create official build by themselves without the need of involving a build engineer. However, this was not the case in the past. At the time that we did not have these self-service jobs, developers always ask help from me, the build engineer to create a build for them. We have around twenty U2 developers in the team, you can image the efforts needed to satisfy these requirements.</p><p>So, I just covered the first benefit of this multi-branch pipeline, which creates a self-service for the team, save their time, save my time.</p><p>Another benefit of this self-service build and install is that our main branch will be more stable and save us from the time spent on investigating whose commit was problematic because only changes passed build, install and smoke test will be merged into the main branch.</p><p>Now, you may wonder the value of this work, like how many issues have been discovered by this auto build and install test.</p><p>Taking our current development as an example, there were about 30 pull requests merged last month, and six of them were found has built problems on some platforms.</p><p>As you all know, the cost of quality will be very low if we can find issues during the development phase, rather than being found by QA, Support or even customer.</p><p>Please comments in case you have any questions.</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°† Jenkins Shell è¿”å›çš„å­—ç¬¦ä¸²å¤„ç†ä¸ºå­—ç¬¦æ•°ç»„</title>
      <link href="/2020/06/jenkins-tips-2/"/>
      <url>/2020/06/jenkins-tips-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã€ŠJenkins Tips 2ã€‹ â€”â€” æ¯æœŸç”¨ç®€çŸ­çš„å›¾æ–‡æè¿°ä¸€ä¸ª Jenkins å°æŠ€å·§ã€‚</p></blockquote><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>æƒ³è¦æŠŠ Linux ä¸Šä¸åŒçš„æ–‡æœ¬æ•°æ®é€šè¿‡ Jenkins å‘é€é‚®ä»¶ç»™ä¸åŒçš„äººã€‚</p><span id="more"></span><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æƒ³é€šè¿‡ Shell å…ˆå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åè¿”å›åˆ° Jenkins pipeline é‡Œï¼Œä½†åªèƒ½å¾—åˆ° Shell è¿”å›çš„å­—ç¬¦ä¸²ï¼Œå› æ­¤éœ€è¦åœ¨ Jenkinsfile é‡ŒæŠŠå­—ç¬¦ä¸²å¤„ç†æˆæ•°ç»„ï¼Œç„¶åé€šè¿‡ä¸€ä¸ª for å¾ªç¯å¯¹æ•°ç»„ä¸­çš„å€¼è¿›è¡Œå¤„ç†ã€‚</p><p>ä»¥ä¸‹æ˜¯è¦å¤„ç†çš„æ–‡æœ¬æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Example</span></span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">fail-list-user1.txt  fail-list-user2.txt  fail-list-user3.txt</span><br></pre></td></tr></table></figure><p>è¦å°†ä»¥ä¸Šæ–‡ä»¶é€šè¿‡ Jenkins åˆ†åˆ«è¿›è¡Œå¤„ç†ï¼Œå¾—åˆ°ç”¨æˆ· user1ï¼Œuser2ï¼Œuser3 ç„¶åå‘é€é‚®ä»¶ã€‚</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><h3 id="å­—ç¬¦ä¸²æˆªå–"><a href="#å­—ç¬¦ä¸²æˆªå–" class="headerlink" title="å­—ç¬¦ä¸²æˆªå–"></a>å­—ç¬¦ä¸²æˆªå–</h3><p>é€šè¿‡ Shell è¡¨è¾¾å¼åªè¿‡æ»¤å‡º user1 user2 user3</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># list æ‰€æœ‰ä»¥ fail-list å¼€å¤´çš„æ–‡ä»¶ï¼Œå¹¶èµ‹ç»™ä¸€ä¸ªæ•°ç»„ l</span></span><br><span class="line">l=$(<span class="built_in">ls</span> -a fail-list-*)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> <span class="variable">$l</span>;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  f=<span class="variable">$&#123;f#fail-list-&#125;</span> <span class="comment"># ä½¿ç”¨#å·æˆªå–å·¦è¾¹å­—ç¬¦</span></span><br><span class="line">  f=<span class="variable">$&#123;f%.txt&#125;</span>       <span class="comment"># ä½¿ç”¨%å·æˆªå–å³è¾¹å­—ç¬¦</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$f</span>           <span class="comment"># æœ€ç»ˆè¾“å‡ºä»…åŒ…å« user çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">fail-list-user1.txt  fail-list-user2.txt  fail-list-user3.txt</span><br><span class="line">$ l=$(<span class="built_in">ls</span> -a fail-list-*) &amp;&amp; <span class="keyword">for</span> f <span class="keyword">in</span> <span class="variable">$l</span>; <span class="keyword">do</span> f=<span class="variable">$&#123;f#fail-list-&#125;</span>; f=<span class="variable">$&#123;f%.txt&#125;</span>; <span class="built_in">echo</span> <span class="variable">$f</span> ; <span class="keyword">done</span>;</span><br><span class="line">user1</span><br><span class="line">user2</span><br><span class="line">user3</span><br></pre></td></tr></table></figure><h3 id="å¤„ç†å­—ç¬¦ä¸²ä¸ºæ•°ç»„"><a href="#å¤„ç†å­—ç¬¦ä¸²ä¸ºæ•°ç»„" class="headerlink" title="å¤„ç†å­—ç¬¦ä¸²ä¸ºæ•°ç»„"></a>å¤„ç†å­—ç¬¦ä¸²ä¸ºæ•°ç»„</h3><p>ä»¥ä¸‹åœ¨ Jenkinsfile ä½¿ç”¨ groovy å°† Shell è¿”å›çš„å­—ç¬¦ä¸²å¤„ç†æˆå­—ç¬¦æ•°ç»„ã€‚</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Jenkinsfile</span></span><br><span class="line"><span class="comment">// å¿½ç•¥ stage, steps ç­‰å…¶ä»–æ— å…³æ­¥éª¤</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">scripts &#123;</span><br><span class="line">  <span class="comment">// å°† Shell è¿”å›å­—ç¬¦ä¸²èµ‹ç»™ owners è¿™ä¸ªå˜é‡ã€‚æ³¨æ„åœ¨ $ å‰é¢éœ€è¦åŠ ä¸Š \ è¿›è¡Œè½¬ä¹‰ã€‚</span></span><br><span class="line">  <span class="keyword">def</span> owners = sh(<span class="attr">script:</span> <span class="string">&quot;l=\$(ls -a fail-list-*) &amp;&amp; for f in \$l; do f=\$&#123;f#fail-list-&#125;; f=\$&#123;f%.txt&#125;; echo \$f ; done;&quot;</span>, <span class="attr">returnStdout:</span><span class="literal">true</span>).trim()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŸ¥çœ‹ owners æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼ŒisEmpty() æ˜¯ groovy å†…ç½®æ–¹æ³•ã€‚</span></span><br><span class="line">  <span class="keyword">if</span> ( ! owners.isEmpty() ) &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ .split() å¯¹ owners string è¿›è¡Œåˆ†è§£ï¼Œè¿”å›å­—ç¬¦ä¸²æ•°ç»„ã€‚ç„¶åé€šè¿‡ .each() å¯¹è¿”å›çš„å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œå¾ªç¯ã€‚</span></span><br><span class="line">    owners.split().each &#123; owner -&gt;</span><br><span class="line">      <span class="comment">// æ‰“å°æœ€ç»ˆçš„ç”¨æˆ·è¿”å›</span></span><br><span class="line">      println <span class="string">&quot;owner is $&#123;owner&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// å‘é€é‚®ä»¶ï¼Œä¾‹å­</span></span><br><span class="line">      email.SendEx([</span><br><span class="line">          <span class="string">&#x27;buildStatus&#x27;</span>  : currentBuild.currentResult,</span><br><span class="line">          <span class="string">&#x27;buildExecutor&#x27;</span>: <span class="string">&quot;$&#123;owner&#125;&quot;</span>,</span><br><span class="line">          <span class="string">&#x27;attachment&#x27;</span>   : <span class="string">&quot;fail-list-$&#123;owner&#125;.txt&quot;</span></span><br><span class="line">      ])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå®Œæˆäº†é€šè¿‡ Groovy å°† Shell è¿”å›çš„å­—ç¬¦ä¸²å¤„ç†æˆå­—ç¬¦æ•°ç»„ï¼Œå®ç°ä¸Šè¿°ä¾‹å­ä¸­å¯¹ä¸åŒäººè¿›è¡Œé‚®ä»¶é€šçŸ¥çš„éœ€æ±‚ã€‚</p><p>å¸Œæœ›ä»¥ä¸Šä¾‹å­å¯¹ä½ åšå…¶ä»–ç±»ä¼¼éœ€æ±‚çš„æ—¶å€™æœ‰æ‰€å¯ç¤ºå’Œå¸®åŠ©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿½ç•¥ Jenkins Shell æ­¥éª¤ä¸­çš„æ•…éšœ</title>
      <link href="/2020/06/jenkins-tips-1/"/>
      <url>/2020/06/jenkins-tips-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã€ŠJenkins Tips 1ã€‹ â€”â€” æ¯æœŸç”¨ç®€çŸ­çš„å›¾æ–‡æè¿°ä¸€ä¸ª Jenkins å°æŠ€å·§ã€‚</p></blockquote><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ul><li>ä¸å¸Œæœ› Shell è„šæœ¬å› å¤±è´¥è€Œä¸­æ­¢</li><li>æƒ³ä¸€ç›´è¿è¡Œ Shell è„šæœ¬å¹¶æŠ¥å‘Šå¤±è´¥</li></ul><span id="more"></span><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>è¿è¡Œ Shell æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å†…ç½®çš„ <code>+e</code> é€‰é¡¹æ¥æ§åˆ¶æ‰§è¡Œä½ çš„è„šæœ¬é”™è¯¯ã€‚è¿™å¯ä»¥ç¦ç”¨â€œé 0 é€€å‡ºâ€çš„é»˜è®¤è¡Œä¸ºã€‚</p><p>è¯·å‚è€ƒå¦‚ä¸‹å››ä¸ªç¤ºä¾‹ä¸­çš„æµ‹è¯• Shell å’Œæµ‹è¯•ç»“æœ Console Outputã€‚</p><h4 id="ç¤ºä¾‹ä¸€"><a href="#ç¤ºä¾‹ä¸€" class="headerlink" title="ç¤ºä¾‹ä¸€"></a>ç¤ºä¾‹ä¸€</h4><p>æ‰§è¡Œçš„æ—¶å€™å¦‚æœå‡ºç°äº†è¿”å›å€¼ä¸ºéé›¶ï¼ˆå³å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼‰å°†ä¼šå¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„è„šæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> +e</span><br><span class="line"><span class="built_in">ls</span> no-exit-file</span><br><span class="line"><span class="built_in">whoami</span></span><br></pre></td></tr></table></figure><p><img src="/2020/06/jenkins-tips-1/1.png" alt="ç¤ºä¾‹ä¸€ï¼šæµ‹è¯•ç»“æœ"></p><h4 id="ç¤ºä¾‹äºŒ"><a href="#ç¤ºä¾‹äºŒ" class="headerlink" title="ç¤ºä¾‹äºŒ"></a>ç¤ºä¾‹äºŒ</h4><p>æ‰§è¡Œçš„æ—¶å€™å¦‚æœå‡ºç°äº†è¿”å›å€¼ä¸ºéé›¶ï¼Œæ•´ä¸ªè„šæœ¬å°±ä¼šç«‹å³é€€å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"><span class="built_in">ls</span> no-exit-file</span><br><span class="line"><span class="built_in">whoami</span></span><br></pre></td></tr></table></figure><p><img src="/2020/06/jenkins-tips-1/2.png" alt="ç¤ºä¾‹äºŒï¼šæµ‹è¯•ç»“æœ"></p><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><h4 id="ç¤ºä¾‹ä¸‰"><a href="#ç¤ºä¾‹ä¸‰" class="headerlink" title="ç¤ºä¾‹ä¸‰"></a>ç¤ºä¾‹ä¸‰</h4><p>è¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œå¦‚æœä¸æƒ³åœæ­¢å¤±è´¥çš„å¦ä¸€ç§æ–¹æ³•æ˜¯æ·»åŠ  <code>|| true</code> åˆ°ä½ çš„å‘½ä»¤ç»“å°¾ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åšå¯èƒ½ä¼šå¤±è´¥ï¼Œä½†å¹¶ä¸å…³æ³¨å¤±è´¥çš„å‘½ä»¤æ—¶</span></span><br><span class="line"><span class="built_in">ls</span> no-exit-file || <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="/2020/06/jenkins-tips-1/3.png" alt="ç¤ºä¾‹ä¸‰ï¼šæµ‹è¯•ç»“æœ"></p><h4 id="ç¤ºä¾‹å››"><a href="#ç¤ºä¾‹å››" class="headerlink" title="ç¤ºä¾‹å››"></a>ç¤ºä¾‹å››</h4><p>å¦‚æœè¦åœ¨å¤±è´¥æ—¶æ‰§è¡ŒæŸäº›æ“ä½œåˆ™æ·»åŠ  <code>|| &lt;doSomethingOnFailure&gt;</code> ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åšå¯èƒ½ä¼šå¤±è´¥çš„äº‹æƒ…ï¼Œå¹¶å…³æ³¨å¤±è´¥çš„å‘½ä»¤</span></span><br><span class="line"><span class="comment"># å¦‚æœå­˜åœ¨é”™è¯¯ï¼Œåˆ™ä¼šåˆ›å»ºå˜é‡ error å¹¶å°†å…¶è®¾ç½®ä¸º true</span></span><br><span class="line"><span class="built_in">ls</span> no-exit-file || error=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åå»åˆ¤æ–­ error å˜é‡çš„å€¼ã€‚å¦‚æœä¸ºçœŸï¼Œåˆ™é€€å‡º Shell</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$error</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">exit</span> -1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p><img src="/2020/06/jenkins-tips-1/4.png" alt="ç¤ºä¾‹å››ï¼šæµ‹è¯•ç»“æœ"></p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿™ä¹Ÿèƒ½ç”¨Jenkinsï¼Ÿå¿«é€Ÿå®ç°ä¸€ä¸ªå®šæœŸæ‰¹é‡ç™»å½•è¿œç¨‹è™šæ‹Ÿæœºå¹¶æ”¯æŒæ·»åŠ æ–°çš„ä¸»æœºåç§°çš„Job</title>
      <link href="/2020/06/vm-status-check-via-jenkins/"/>
      <url>/2020/06/vm-status-check-via-jenkins/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å®ç°å®šæœŸæ‰¹é‡ç™»å½•è¿œç¨‹è™šæ‹Ÿæœºç„¶åè¿›è¡Œä¸€äº›æŒ‡å®šçš„æ“ä½œï¼Œè¿˜æ”¯æŒç”¨æˆ·æ·»åŠ æ–°çš„ hostnameã€‚</p><span id="more"></span><h2 id="éœ€æ±‚åˆ†è§£"><a href="#éœ€æ±‚åˆ†è§£" class="headerlink" title="éœ€æ±‚åˆ†è§£"></a>éœ€æ±‚åˆ†è§£</h2><p>é€šè¿‡ä¸€ä¸ªç®€å•çš„ shell è„šæœ¬å¯å®ç°å®šæœŸè¿›è¡Œ ssh ç™»å½•æ“ä½œï¼Œä½†å¦‚ä½•å®ç°çš„æ›´ä¼˜é›…ä¸€äº›å°±éœ€è¦èŠ±ç‚¹æ—¶é—´äº†ï¼Œæ¯”å¦‚ï¼š</p><ol><li>å®šæœŸè‡ªåŠ¨æ‰§è¡Œ</li><li>è¾“å‡ºæ¯”è¾ƒç›´è§‚çš„ç™»å½•æµ‹è¯•ç»“æœ</li><li>æ”¯æŒç”¨æˆ·æ·»åŠ æ–°çš„è™šæ‹Ÿæœº hostname åˆ°æ£€æŸ¥åˆ—è¡¨ä¸­</li><li>æ‰§è¡Œå®Œæˆåï¼Œé€šçŸ¥ç”¨æˆ·ç­‰ç­‰</li></ol><p>å¸Œæœ›åœ¨ä¸å¼•å…¥å…¶ä»– Web é¡µé¢çš„æƒ…å†µä¸‹é€šè¿‡ç°æœ‰çš„å·¥å…· Jenkins ä½¿ç”¨ Shell è„šæœ¬å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><ol><li>å†™ä¸€ä¸ªè„šæœ¬å»å¾ªç¯ä¸€ä¸ª list é‡Œæ‰€æœ‰çš„ hostnameï¼Œç»è€ƒè™‘è¿™ä¸ª list æœ€å¥½æ˜¯ä¸€ä¸ª fileï¼Œè¿™æ ·æ–¹ä¾¿åç»­å¤„ç†ã€‚</li><li>è¿™æ ·å½“ç”¨æˆ·é€šè¿‡æ‰§è¡Œ Jenkins job ä¼ å…¥æ–°çš„ hostname æ—¶ï¼Œä½¿ç”¨æ–°çš„ hostname åˆ° file é‡Œè¿›è¡Œ grepï¼ŒæŸ¥çœ‹æ˜¯å¦å·²å­˜åœ¨ã€‚</li><li>å¦‚æœ grep åˆ°ï¼Œä¸æ·»åŠ ï¼›å¦‚æœæ²¡æœ‰ grep åˆ°ï¼Œå°†è¿™ä¸ª hostname æ·»åŠ åˆ° file é‡Œã€‚</li><li>å°†ä¿®æ”¹åçš„ file æ·»åŠ åˆ° git ä»“åº“é‡Œï¼Œè¿™æ ·ä¸‹æ¬¡ Jenkins çš„å®šæ—¶ä»»åŠ¡å°±ä¼šæ‰§è¡Œæœ€è¿‘æ·»åŠ çš„ hostname äº†ã€‚</li></ol><h2 id="å®ç°é‡ç‚¹"><a href="#å®ç°é‡ç‚¹" class="headerlink" title="å®ç°é‡ç‚¹"></a>å®ç°é‡ç‚¹</h2><ol><li><p>ä½¿ç”¨ <code>expect</code>ã€‚åœ¨ä½¿ç”¨ ssh è¿æ¥è¿œç¨‹è™šæ‹Ÿæœºçš„æ—¶å€™éœ€è¦å®ç°ä¸è¿œç¨‹è¿æ¥æ—¶å®ç°äº¤äº’ï¼Œä¾‹å¦‚ï¼šå¯ä»¥æœŸå¾…å±å¹•ä¸Šçš„è¾“å‡ºï¼Œç„¶åè¿›è€Œè¿›è¡Œç›¸åº”çš„è¾“å…¥ã€‚åœ¨ä½¿ç”¨ <code>expect</code> ä¹‹å‰éœ€è¦å…ˆå®‰è£…ï¼Œä»¥ Redhat çš„å®‰è£…å‘½ä»¤ä¸ºä¾‹ï¼š <code>sudo yum install expect</code> æ¥è¿›è¡Œå®‰è£…ã€‚</p><blockquote><p>æ›´å¤šæœ‰å…³ <code>expect</code> ä½¿ç”¨çš„å¯ä»¥å‚çœ‹è¿™ä¸ªè¿æ¥ï¼š<a href="http://xstarcd.github.io/wiki/shell/expect.html">http://xstarcd.github.io/wiki/shell/expect.html</a></p></blockquote></li><li><p>ä½¿ç”¨äº† Shell æ•°ç»„ã€‚ä½¿ç”¨ Shell è¯»å–æ–‡ä»¶æ•°æ®ï¼Œè¿›è¡Œç™»å½•æ“ä½œï¼Œå°†æ“ä½œå¤±è´¥çš„è®°å½•åˆ°ä¸€ä¸ªæ•°ç»„é‡Œï¼Œç„¶åæ‰“å°å‡ºæ¥ã€‚</p></li><li><p>åœ¨é€šè¿‡ Jenkins æäº¤æ–°çš„ hostname åˆ° Git ä»“åº“æ—¶ï¼Œorigin çš„ URL éœ€è¦æ˜¯ <code>https://$&#123;USERNAME&#125;:$&#123;PASSWORD&#125;@git.company.com/scm/vmm.git</code> æˆ– <code>git@company.com:scm/vmm.git</code>ï¼ˆéœ€è¦æå‰åœ¨æ‰§è¡Œæœºå™¨ä¸Šç”Ÿæˆäº† id_rsa.pubï¼‰</p></li></ol><blockquote><p>ä»£ç å·²ç»ä¸Šä¼  GitHub è¯·å‚çœ‹ <a href="https://github.com/shenxianpeng/vmm.git">https://github.com/shenxianpeng/vmm.git</a></p></blockquote><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><h3 id="å¼€å§‹æ‰§è¡Œï¼Œæä¾›è¾“å…¥æ–°çš„-hostname"><a href="#å¼€å§‹æ‰§è¡Œï¼Œæä¾›è¾“å…¥æ–°çš„-hostname" class="headerlink" title="å¼€å§‹æ‰§è¡Œï¼Œæä¾›è¾“å…¥æ–°çš„ hostname"></a>å¼€å§‹æ‰§è¡Œï¼Œæä¾›è¾“å…¥æ–°çš„ hostname</h3><p><img src="/2020/06/vm-status-check-via-jenkins/pipeline-start.png" alt="Bulid with parameters"></p><h3 id="æ‰§è¡Œå®Œæˆï¼Œå°†æ‰§è¡Œç»“æœå½’æ¡£ä»¥ä¾¿æŸ¥çœ‹"><a href="#æ‰§è¡Œå®Œæˆï¼Œå°†æ‰§è¡Œç»“æœå½’æ¡£ä»¥ä¾¿æŸ¥çœ‹" class="headerlink" title="æ‰§è¡Œå®Œæˆï¼Œå°†æ‰§è¡Œç»“æœå½’æ¡£ä»¥ä¾¿æŸ¥çœ‹"></a>æ‰§è¡Œå®Œæˆï¼Œå°†æ‰§è¡Œç»“æœå½’æ¡£ä»¥ä¾¿æŸ¥çœ‹</h3><p><img src="/2020/06/vm-status-check-via-jenkins/pipeline-result.png" alt="VM æ£€æŸ¥ç»“æœ"></p><h3 id="æ‰“å¼€å½’æ¡£ç»“æœå¦‚ä¸‹"><a href="#æ‰“å¼€å½’æ¡£ç»“æœå¦‚ä¸‹" class="headerlink" title="æ‰“å¼€å½’æ¡£ç»“æœå¦‚ä¸‹"></a>æ‰“å¼€å½’æ¡£ç»“æœå¦‚ä¸‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#####################################################</span></span><br><span class="line"><span class="comment">######### VM login check via SSH results ############</span></span><br><span class="line"><span class="comment">#####################################################</span></span><br><span class="line"><span class="comment">#                                                   #</span></span><br><span class="line"><span class="comment"># Compelted (success) 14/16 (total) login vm check. #</span></span><br><span class="line"><span class="comment">#                                                   #</span></span><br><span class="line"><span class="comment"># Below 2 host(s) login faied, need to check.       #</span></span><br><span class="line"><span class="comment">#                                                   #</span></span><br><span class="line">      abc.company.com</span><br><span class="line">      xyz.company.com</span><br><span class="line"><span class="comment">#                                                   #</span></span><br><span class="line"><span class="comment">#####################################################</span></span><br></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>ç°åœ¨æŠ€æœ¯çš„æ›´æ–°éå¸¸å¿«ï¼Œå°¤å…¶ä½œä¸º DevOps å·¥ç¨‹å¸ˆï¼Œå„ç§å·¥å…·å±‚å‡ºä¸ç©·ï¼Œæƒ³è¦æ¯ä¸€æ ·å·¥å…·éƒ½æŒæ¡å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>åªä¼šå·¥å…·ä¸äº†è§£å…¶èƒŒåçš„åŸç†ï¼Œç­‰åˆ°æ–°å·¥å…·å‡ºç°æ›¿æ¢æ‰æ—§çš„å·¥å…·ï¼Œå…¶å®è¿™äº›å¹´æ˜¯æ²¡æœ‰è¿›æ­¥çš„ã€‚</p><p>åªæœ‰è®¤çœŸçš„æŠŠåœ¨å·¥ä½œä¸­é‡åˆ°çš„æ¯ä¸ªé—®é¢˜èƒŒåæ¥é¾™å»è„‰å»ææ‡‚ï¼Œæ‰èƒ½åœ°åŸºæ‰“çš„ç¨³ï¼Œè¿™æ ·ä¸è®ºå·¥å…·æ€ä¹ˆå˜ï¼Œå­¦ä¹ èµ·æ¥éƒ½ä¼šå¾ˆå¿«ã€‚</p><p>æŒæ¡æ“ä½œç³»ç»Ÿï¼ŒShellï¼Œä»¥åŠä¸€é—¨æ“…é•¿çš„ç¼–ç¨‹è¯­è¨€ä¹‹åå†å»å­¦ä¹ é‚£äº›å·¥å…·ï¼Œè¦ä¸æ°¸è¿œéƒ½æ˜¯æ¼‚æµ®åœ¨ç©ºä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ Jenkins Artifactory Plugin ä»…åœ¨ AIX ä¸Šä¼ åˆ¶å“åˆ° https åè®®çš„ Artifactory å¤±è´¥çš„é—®é¢˜</title>
      <link href="/2020/06/java-net-socketexception-on-aix/"/>
      <url>/2020/06/java-net-socketexception-on-aix/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡å¯¹äºåŒæ ·åœ¨ AIX é‡åˆ°è¿™ä¸ªé—®é¢˜çš„äººä¼šéå¸¸æœ‰å¸®åŠ©ã€‚å¦å¤–ï¼Œä¸è¦è¢«æ ‡é¢˜æ— èŠåˆ°ï¼Œè§£å†³é—®é¢˜çš„è¿‡ç¨‹å€¼å¾—å‚è€ƒã€‚</p></blockquote><p>åˆ†äº«ä¸€ä¸ªèŠ±äº†ä¸¤å¤©æ—¶é—´æ‰è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼šä½¿ç”¨ Jenkins Artifactory æ’ä»¶ä¸Šä¼ åˆ¶å“åˆ° https åè®®çš„ä¼ä¸šçº§çš„ Artifactory å¤±è´¥ã€‚è¯¥é—®é¢˜åªåœ¨ AIX å¹³å°ä¸Šå‡ºç°çš„ï¼Œå…¶ä»– Windowsï¼ŒLinux, Unix å‡æ­£å¸¸ã€‚</p><span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘è®¡åˆ’å°†ä¹‹å‰ä½¿ç”¨çš„ Artifactory OSSï¼ˆå¼€æºç‰ˆï¼‰è¿ç§»åˆ° Artifactory Enterpriseï¼ˆä¼ä¸šç‰ˆï¼‰ä¸Šã€‚ä¸ºä»€ä¹ˆè¦åšè¿ç§»ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ª Artifactory å¯¹æ¯”çš„çŸ©é˜µå›¾ <a href="https://www.jfrog.com/confluence/display/JFROG/Artifactory+Comparison+Matrix">https://www.jfrog.com/confluence/display/JFROG/Artifactory+Comparison+Matrix</a></p><p>ç®€å•æ¥è¯´ï¼Œå¼€æºç‰ˆç¼ºå°‘ä¸ CI å·¥å…·é›†æˆæ—¶å¸¸ç”¨çš„ REST API åŠŸèƒ½ï¼Œæ¯”å¦‚ä»¥ä¸‹å¸¸ç”¨åŠŸèƒ½</p><ul><li>è®¾ç½®ä¿ç•™ç­–ç•¥(Retention)ã€‚è®¾ç½®ä¸Šä¼ çš„åˆ¶å“ä¿ç•™å‡ å¤©ç­‰ï¼Œè¾¾åˆ°å®šæœŸæ¸…ç†çš„ç›®çš„ã€‚</li><li>æå‡(Promote)ã€‚é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•çš„åˆ¶å“ä¼šè¢«æå‡åˆ° stageï¼ˆå¾…æµ‹è¯•ï¼‰ä»“åº“ï¼Œé€šè¿‡æ‰‹å·¥æµ‹è¯•çš„æå‡åˆ° releaseï¼ˆå‘å¸ƒï¼‰ä»“åº“ã€‚</li><li>è®¾ç½®å±æ€§(set properties)ã€‚å¯¹äºé€šè¿‡ä¸åŒé˜¶æ®µçš„åˆ¶å“é€šè¿‡ CI é›†æˆè¿›è¡Œå±æ€§çš„è®¾ç½®ã€‚</li></ul><p>æ­£å¥½å…¬å¸å·²ç»æœ‰ä¼ä¸šç‰ˆäº†ï¼Œé‚£å°±å¼€å§‹è¿ç§»å§ã€‚æœ¬ä»¥ä¸ºä¼šå¾ˆé¡ºåˆ©çš„å®Œæˆï¼Œæ²¡æƒ³åˆ°å”¯ç‹¬åœ¨ IBM çš„ AIX å‡ºç°ä¸Šä¼ åˆ¶å“å¤±è´¥çš„é—®é¢˜ã€‚</p><blockquote><p>ç¯å¢ƒä¿¡æ¯</p><ul><li>Jenkins ver. 2.176.3</li><li>Artifactory Plugin 3.6.2</li><li>Enterprise Artifactory 6.9.060900900</li><li>AIX 7.1 &amp;&amp; java version 1.8.0</li></ul></blockquote><p>ä»¥ä¸‹æ˜¯å»æ‰äº†æ— ç›¸å…³çš„ä¿¡æ¯çš„é”™è¯¯æ—¥å¿—ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[consumer_0] Deploying artifact: https:<span class="comment">//artifactory.company.com/artifactory/generic-int-den/database/develop/10/database2_cdrom_opt_AIX_24ec6f9.tar.Z</span></span><br><span class="line">Error occurred <span class="keyword">for</span> request GET /artifactory/api/system/version HTTP/<span class="number">1.1</span>: A system call received a parameter that is not valid. (Read failed).</span><br><span class="line">Error occurred <span class="keyword">for</span> request PUT /artifactory/generic-<span class="type">int</span>-den/database/develop/<span class="number">10</span>/database2_cdrom_opt_AIX_24ec6f9.tar.Z;build.timestamp=<span class="number">1591170116591</span>;build.name=develop;build.number=<span class="number">10</span> HTTP/<span class="number">1.1</span>: A system call received a parameter that is not valid. (Read failed).</span><br><span class="line">Error occurred <span class="keyword">for</span> request PUT /artifactory/generic-<span class="type">int</span>-den/database/develop/<span class="number">10</span>/database2_cdrom_opt_AIX_24ec6f9.tar.Z;build.timestamp=<span class="number">1591170116591</span>;build.name=develop;build.number=<span class="number">10</span> HTTP/<span class="number">1.1</span>: A system call received a parameter that is not valid. (Read failed).</span><br><span class="line">[consumer_0] An exception occurred during execution:</span><br><span class="line"> java.lang.RuntimeException: java.net.SocketException: A system call received a parameter that is not valid. (Read failed)</span><br><span class="line"> at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:<span class="number">44</span>)</span><br><span class="line"> at org.jfrog.build.extractor.producerConsumer.ConsumerRunnableBase.run(ConsumerRunnableBase.java:<span class="number">11</span>)</span><br><span class="line"> at java.lang.Thread.run(Thread.java:<span class="number">785</span>)</span><br><span class="line"> Caused by: java.net.SocketException: A system call received a parameter that is not valid. (Read failed)</span><br><span class="line"> at java.net.SocketInputStream.socketRead(SocketInputStream.java:<span class="number">127</span>)</span><br><span class="line"> at java.net.SocketInputStream.read(SocketInputStream.java:<span class="number">182</span>)</span><br><span class="line"> at java.net.SocketInputStream.read(SocketInputStream.java:<span class="number">152</span>)</span><br><span class="line"> at com.ibm.jsse2.a.a(a.java:<span class="number">227</span>)</span><br><span class="line"> at com.ibm.jsse2.a.a(a.java:<span class="number">168</span>)</span><br><span class="line"> at com.ibm.jsse2.as.a(as.java:<span class="number">702</span>)</span><br><span class="line"> at com.ibm.jsse2.as.i(as.java:<span class="number">338</span>)</span><br><span class="line"> at com.ibm.jsse2.as.a(as.java:<span class="number">711</span>)</span><br><span class="line"> at com.ibm.jsse2.as.startHandshake(as.java:<span class="number">454</span>)</span><br><span class="line"> at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:<span class="number">436</span>)</span><br><span class="line"> at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:<span class="number">384</span>)</span><br><span class="line"> at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:<span class="number">142</span>)</span><br><span class="line"> at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:<span class="number">374</span>)</span><br><span class="line"> at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:<span class="number">393</span>)</span><br><span class="line"> at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:<span class="number">236</span>)</span><br><span class="line"> at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:<span class="number">186</span>)</span><br><span class="line"> at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:<span class="number">89</span>)</span><br><span class="line"> at org.apache.http.impl.execchain.ServiceUnavailableRetryExec.execute(ServiceUnavailableRetryExec.java:<span class="number">85</span>)</span><br><span class="line"> at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:<span class="number">110</span>)</span><br><span class="line"> at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:<span class="number">185</span>)</span><br><span class="line"> at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:<span class="number">83</span>)</span><br><span class="line"> at org.jfrog.build.client.PreemptiveHttpClient.execute(PreemptiveHttpClient.java:<span class="number">89</span>)</span><br><span class="line"> at org.jfrog.build.client.ArtifactoryHttpClient.execute(ArtifactoryHttpClient.java:<span class="number">253</span>)</span><br><span class="line"> at org.jfrog.build.client.ArtifactoryHttpClient.upload(ArtifactoryHttpClient.java:<span class="number">249</span>)</span><br><span class="line"> at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.uploadFile(ArtifactoryBuildInfoClient.java:<span class="number">692</span>)</span><br><span class="line"> at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.doDeployArtifact(ArtifactoryBuildInfoClient.java:<span class="number">379</span>)</span><br><span class="line"> at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.deployArtifact(ArtifactoryBuildInfoClient.java:<span class="number">367</span>)</span><br><span class="line"> at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:<span class="number">39</span>)</span><br><span class="line"> ... <span class="number">2</span> more</span><br><span class="line">Failed uploading artifacts by spec</span><br></pre></td></tr></table></figure><p>å¾ˆå¥‡æ€ªä¼šå‡ºç°ä¸Šè¿°é—®é¢˜ï¼Œä»å¼€æºç‰ˆçš„ Artifactory è¿ç§»åˆ°ä¼ä¸šç‰ˆçš„ Artifactoryï¼Œå®ƒä»¬ä¹‹é—´æœ€ç›´æ¥çš„åŒºåˆ«æ˜¯ä½¿ç”¨äº†ä¸åŒçš„ä¼ è¾“åè®®ï¼Œå‰è€…æ˜¯ http åè€…æ˜¯ httpsã€‚</p><blockquote><p>HTTPS å…¶å®æ˜¯æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼šHTTP + SSL&#x2F;TLSï¼Œä¹Ÿå°±æ˜¯åœ¨ HTTP ä¸ŠåˆåŠ äº†ä¸€å±‚å¤„ç†åŠ å¯†ä¿¡æ¯çš„æ¨¡å—ï¼Œå› æ­¤æ›´å®‰å…¨ã€‚</p></blockquote><p>æœ¬ä»¥ä¸º Google ä¸€ä¸‹å°±èƒ½æ‰¾åˆ°æ­¤ç±»é—®é¢˜çš„è§£å†³åŠæ³•ï¼Œå¯æƒœè¿™ä¸ªé—®é¢˜åœ¨å…¶ä»–å¹³å°éƒ½æ²¡æœ‰ï¼Œåªæœ‰ AIX ä¸Šæ‰æœ‰ï¼Œè‚¯å®šè¿™ä¸ª AIX æœ‰ä»€ä¹ˆâ€œè¿‡äººä¹‹å¤„â€å’Œå…¶ä»– Linux&#x2F;Unix ä¸ä¸€æ ·ã€‚</p><h2 id="ä½¿ç”¨-curl-æ¥æ›¿ä»£"><a href="#ä½¿ç”¨-curl-æ¥æ›¿ä»£" class="headerlink" title="ä½¿ç”¨ curl æ¥æ›¿ä»£"></a>ä½¿ç”¨ <code>curl</code> æ¥æ›¿ä»£</h2><p>ç”±äºä¸Šè¿°é—®é¢˜é‡ç°åœ¨éœ€è¦é‡æ–°æ„å»ºï¼Œæ¯”è¾ƒèŠ±æ—¶é—´ï¼Œå°±å…ˆè¯•è¯•ç›´æ¥ç”¨ <code>curl</code> å‘½ä»¤æ¥è°ƒç”¨ Artifactory REST API çœ‹çœ‹ç»“æœã€‚</p><p>åšäº†ä»¥ä¸‹æµ‹è¯•ï¼ŒæŸ¥çœ‹ Artifactory çš„ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl  https://artifactory.company.com/artifactory/api/system/version</span><br><span class="line">curl: (35) Unknown SSL protocol error <span class="keyword">in</span> connection to artifactory.company.com:443</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€ -v æ¨¡å¼ï¼Œè¾“å‡ºæ›´å¤šä¿¡æ¯</span></span><br><span class="line">bash-4.3$ curl -v  https://artifactory.company.com/artifactory/api/system/version</span><br><span class="line">*   Trying 10.18.12.95...</span><br><span class="line">* Connected to artifactory.company.com (10.18.12.95) port 443 (<span class="comment">#0)</span></span><br><span class="line">* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH</span><br><span class="line">* TLSv1.2 (OUT), TLS handshake, Client hello (1):</span><br><span class="line">* TLSv1.2 (IN), TLS handshake, Server hello (2):</span><br><span class="line">* NPN, negotiated HTTP1.1</span><br><span class="line">* TLSv1.2 (IN), TLS handshake, Certificate (11):</span><br><span class="line">* TLSv1.2 (OUT), TLS alert, Server hello (2):</span><br><span class="line">* Unknown SSL protocol error <span class="keyword">in</span> connection to artifactory.company.com:443</span><br><span class="line">* Closing connection 0</span><br><span class="line">curl: (35) Unknown SSL protocol error <span class="keyword">in</span> connection to artifactory.company.com:443</span><br></pre></td></tr></table></figure><p>æœç„¶ä¹Ÿå‡ºé”™äº†ï¼Œ<code>curl</code> ä¹Ÿä¸è¡Œï¼Œå¯èƒ½å°±æ˜¯æ‰§è¡Œ <code>curl</code> å‘½ä»¤çš„æ—¶å€™æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šè¯ä¹¦ï¼ŒæŸ¥äº† <code>curl</code> çš„ helpï¼Œæœ‰ <code>--cacert</code> å‚æ•°å¯ä»¥æŒ‡å®š cacert.pem æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-4.3$ curl --cacert /var/ssl/cacert.pem https://artifactory.company.com/artifactory/api/system/version</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;version&quot;</span> : <span class="string">&quot;6.9.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;revision&quot;</span> : <span class="string">&quot;60900900&quot;</span>,</span><br><span class="line">  <span class="string">&quot;addons&quot;</span> : [ <span class="string">&quot;build&quot;</span>, <span class="string">&quot;docker&quot;</span>, <span class="string">&quot;vagrant&quot;</span>, <span class="string">&quot;replication&quot;</span>, <span class="string">&quot;filestore&quot;</span>, <span class="string">&quot;plugins&quot;</span>, <span class="string">&quot;gems&quot;</span>, <span class="string">&quot;composer&quot;</span>, <span class="string">&quot;npm&quot;</span>, <span class="string">&quot;bower&quot;</span>, <span class="string">&quot;git-lfs&quot;</span>, <span class="string">&quot;nuget&quot;</span>, <span class="string">&quot;debian&quot;</span>, <span class="string">&quot;opkg&quot;</span>, <span class="string">&quot;rpm&quot;</span>, <span class="string">&quot;cocoapods&quot;</span>, <span class="string">&quot;conan&quot;</span>, <span class="string">&quot;vcs&quot;</span>, <span class="string">&quot;pypi&quot;</span>, <span class="string">&quot;release-bundle&quot;</span>, <span class="string">&quot;replicator&quot;</span>, <span class="string">&quot;keys&quot;</span>, <span class="string">&quot;chef&quot;</span>, <span class="string">&quot;cran&quot;</span>, <span class="string">&quot;go&quot;</span>, <span class="string">&quot;helm&quot;</span>, <span class="string">&quot;rest&quot;</span>, <span class="string">&quot;conda&quot;</span>, <span class="string">&quot;license&quot;</span>, <span class="string">&quot;puppet&quot;</span>, <span class="string">&quot;ldap&quot;</span>, <span class="string">&quot;sso&quot;</span>, <span class="string">&quot;layouts&quot;</span>, <span class="string">&quot;properties&quot;</span>, <span class="string">&quot;search&quot;</span>, <span class="string">&quot;filtered-resources&quot;</span>, <span class="string">&quot;p2&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;webstart&quot;</span>, <span class="string">&quot;support&quot;</span>, <span class="string">&quot;xray&quot;</span> ],</span><br><span class="line">  <span class="string">&quot;license&quot;</span> : <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯•äº†ä¸‹æˆåŠŸäº†ã€‚</p><p>åˆ°è¿™é‡Œé—®é¢˜å·²ç»è§£å†³äº†ï¼Œåªè¦ä½¿ç”¨ <code>curl</code> è°ƒç”¨ Artifactory REST API å°±èƒ½å®Œæˆä¸Šä¼ æ“ä½œäº†ã€‚ä½†æˆ‘ç”¨çš„ Jenkins Artifactory Pluginï¼Œå¦‚æœä½¿ç”¨ <code>curl</code> æˆ‘éœ€è¦æŠŠä¹‹å‰çš„ä»£ç é‡æ–°å†å®ç°ä¸€éï¼Œç„¶åå†æµ‹è¯•ï¼Œå°±ä¸ºäº† AIX ä¸€ä¸ªå¹³å°çš„é—®é¢˜ï¼Œå®åœ¨æ˜¯â€œæ‡’â€çš„é‡æ–°å¼€å§‹ã€‚æœ¬ç€è¿™æ ·æ‡’æƒ°çš„æ€§æ ¼ï¼Œè¿˜å¾—ç»§ç»­è§£å†³ Jenkins è°ƒç”¨ agent å»æ‰§è¡Œä¸Šä¼ å¤±è´¥çš„é—®é¢˜ã€‚</p><h2 id="æœ€ç»ˆè§£å†³åŠæ³•"><a href="#æœ€ç»ˆè§£å†³åŠæ³•" class="headerlink" title="æœ€ç»ˆè§£å†³åŠæ³•"></a>æœ€ç»ˆè§£å†³åŠæ³•</h2><h3 id="å°è¯•è®¾ç½®-SSL-CERT-FILE-ç¯å¢ƒå˜é‡"><a href="#å°è¯•è®¾ç½®-SSL-CERT-FILE-ç¯å¢ƒå˜é‡" class="headerlink" title="å°è¯•è®¾ç½® SSL_CERT_FILE ç¯å¢ƒå˜é‡"></a>å°è¯•è®¾ç½® <code>SSL_CERT_FILE</code> ç¯å¢ƒå˜é‡</h3><p>æƒ³è¯•è¯•ç”¨ä¸Šè¿°çš„åŠæ³•æ¥è§£å†³ Jenkins çš„é—®é¢˜ã€‚å¦‚æœèƒ½æœ‰ä¸€ä¸ªç¯å¢ƒå˜é‡èƒ½è®¾ç½®æŒ‡å®š cacert.pem æ–‡ä»¶çš„è·¯å¾„ï¼Œé‚£æ ·åœ¨ Jenkins è°ƒç”¨ agent æ‰§è¡Œä¸Šä¼ æ—¶å€™å°±èƒ½æ‰¾åˆ°è¯ä¹¦ï¼Œå¯èƒ½å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚æœç„¶æ˜¯æœ‰è¿™æ ·çš„ç¯å¢ƒå˜é‡çš„ <code>SSL_CERT_FILE</code>ï¼Œè®¾ç½®å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> SSL_CERT_FILE=/var/ssl/cacert.pem</span><br></pre></td></tr></table></figure><p>è®¾ç½®å¥½ç¯å¢ƒå˜é‡ä¹‹åï¼Œé€šè¿‡ <code>curl</code> è°ƒç”¨ï¼Œå†ä¸éœ€è¦ä½¿ç”¨ <code>--cacert</code> å‚æ•°äº†ã€‚è¿™ä¸‹çœ‹èµ·æ¥æœ‰æˆäº†ï¼Œå¸¦ç€å–œæ‚¦çš„å¿ƒæƒ…æŠŠè¿™ä¸ªç¯å¢ƒå˜é‡åŠ åˆ° agent æœºå™¨ä¸Šï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p><p><img src="/2020/06/java-net-socketexception-on-aix/configure-agent-environment-variable.png" alt="Jenkins agent ç¯å¢ƒå˜é‡è®¾ç½®"></p><p>æˆ–è€…å¯ä»¥ä¿®æ”¹ agent æœºå™¨ä¸Šçš„ <code>/etc/environment</code> æ–‡ä»¶ã€‚</p><p>ç»“æœç»æµ‹è¯•é”™è¯¯ä¿¡æ¯ä¾æ—§ï¼Œçœ‹æ¥ Jenkins æ‰§è¡Œçš„ remote.jar è¿›è¡Œä¸Šä¼ æ—¶è·Ÿæœ¬åœ°é…ç½®ç¯å¢ƒæ²¡æœ‰å…³è”ï¼Œçœ‹æ¥éœ€è¦ä»æ‰§è¡Œ remote.jar ç€æ‰‹ï¼ŒæŠŠç›¸åº”çš„è®¾ç½®æˆ–æ˜¯ç¯å¢ƒå˜é‡åœ¨å¯åŠ¨ remote.jar æ—¶ä¼ è¿›å»ã€‚</p><blockquote><p>Jenkins ç®¡ç† agent çš„åŸç†æ˜¯é€šè¿‡åœ¨ agent ä¸Šå¯åŠ¨ä¸€ä¸ª remote.jar å®ç°çš„</p></blockquote><h3 id="åœ¨å¯åŠ¨-remote-jar-æ—¶è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#åœ¨å¯åŠ¨-remote-jar-æ—¶è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="åœ¨å¯åŠ¨ remote.jar æ—¶è®¾ç½®ç¯å¢ƒå˜é‡"></a>åœ¨å¯åŠ¨ remote.jar æ—¶è®¾ç½®ç¯å¢ƒå˜é‡</h3><p><code>java</code> çš„ <code>-D</code> å‚æ•°å¯ä»¥å®Œæˆè¿™ä¸€ç‚¹ã€‚</p><p>è¿›è¡Œäº†å¤§é‡çš„æœç´¢å’Œå°è¯•ï¼Œæœ€ç»ˆåœ¨ IBM çš„å®˜æ–¹æ‰¾åˆ°äº†è¿™ç¯‡æ–‡æ¡£ <a href="https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.security.component.80.doc/security-component/jsse2Docs/matchsslcontext_tls.html">https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.security.component.80.doc/security-component/jsse2Docs/matchsslcontext_tls.html</a></p><p>æ–‡æ¡£å¤§æ„æ˜¯ï¼ŒIBM SDK ç³»ç»Ÿå±æ€§ <code>com.ibm.jsse2.overrideDefaultTLS=[true|false]</code> æœ‰ <code>true</code> å’Œ <code>false</code> ä¸¤ä¸ªå€¼ï¼Œå¦‚æœæƒ³è¦ä¸ Oracle <code>SSLContext.getInstance(&quot;TLS&quot;)</code> çš„è¡Œä¸ºç›¸åŒ¹é…ï¼Œè¯·å°†æ­¤å±æ€§è®¾ç½®ä¸º <code>true</code>ï¼Œé»˜è®¤å€¼ä¸º <code>false</code>ã€‚</p><p>ä¸‹è¡¨æ˜¾ç¤ºäº†ç³»ç»Ÿå±æ€§å¯¹ SSLContext.getInstance(â€œTLSâ€) çš„å½±å“</p><table><thead><tr><th>Property value setting</th><th>Protocol enabled</th></tr></thead><tbody><tr><td>false</td><td>TLS V1.0</td></tr><tr><td>true</td><td>TLS V1.0, V1.1, and V1.2</td></tr></tbody></table><p>ç»å¤§å¤šæ•°çš„ Java åº”ç”¨éƒ½æ˜¯ä½¿ç”¨ Oracle çš„ JDK æ¥å¼€å‘çš„ï¼Œè¿™é‡Œè¦ä¸ Oracle çš„è¡Œä¸ºä¿æŒä¸€è‡´ï¼›å¦å¤– IBM çš„ SDK é»˜è®¤åè®®åªæœ‰ TLS V1.0ï¼Œè€Œä¸Šé¢çš„ log å¯ä»¥çœ‹åˆ°ä½¿ç”¨çš„ TLSv1.2 åè®®ï¼Œå› æ­¤éœ€è¦å°†å±æ€§è®¾ç½®ä¸º <code>true</code>ã€‚</p><p>æœ€ç»ˆåœ¨ Jenkins çš„ agent é…ç½®é‡Œå°† JVM Options åŒºåŸŸåŠ ä¸Šè¿™å¥ <code>-Dcom.ibm.jsse2.overrideDefaultTLS=true</code>ï¼Œæ–­å¼€è¿æ¥ï¼Œé‡æ–°å¯åŠ¨ agentï¼Œå†æ¬¡æ‰§è¡Œ Pipelineï¼ŒæˆåŠŸçš„æŠŠ AIX ä¸Šçš„åˆ¶å“ä¸Šä¼ åˆ° Artifactory ä¸Šäº†ï¼Œé—®é¢˜è§£å†³äº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é‡åˆ°é—®é¢˜å¹¶è§£å†³é—®é¢˜æ˜¯ä¸€ä»¶éå¸¸çˆ½çš„äº‹ï¼Œä»ä¸­ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šä¹‹å‰ä¸æ›¾äº†è§£è¿‡çš„çŸ¥è¯†ï¼Œè§£å†³é—®é¢˜çš„è¿‡ç¨‹æ¯” Google éšä¾¿æŸ¥æŸ¥æ›´è®©äººå°è±¡æ·±åˆ»ï¼Œå†é‡åˆ°æ­¤ç±»é—®é¢˜å¯èƒ½å°±ä¼šä¸¾ä¸€åä¸‰äº†ã€‚</p><p>å¦å¤–ï¼Œå‡¡äº‹å¦‚æœè§‰å¾—è‡ªå·±åœ¨çŸ­æ—¶é—´å†…æ²¡æœ‰å¤´ç»ªã€è‡ªå·±æä¸å®šçš„æ—¶å€™å°½å¿«å¯»æ±‚æœ‰ç»éªŒçš„åŒäº‹çš„å¸®åŠ©ã€‚æ„Ÿè°¢å¸®åŠ©æˆ‘çš„åŒäº‹ä»¬ï¼Œæ²¡æœ‰ä»–ä»¬çš„å¸®åŠ©å’ŒæŒ‡å¯¼å°±ä¸èƒ½è¿™ä¹ˆå¿«çš„è§£å†³é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Troubleshooting </tag>
            
            <tag> Artifactory </tag>
            
            <tag> JFrog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä» â€œä¼šå†™ç¨‹åºçš„å¹²ä¸è¿‡ä¼šå†™PPTçš„â€ â€”â€” èŠç¨‹åºå‘˜å†™ä½œ</title>
      <link href="/2020/05/programmers-read-and-write/"/>
      <url>/2020/05/programmers-read-and-write/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç¨‹åºå‘˜åœˆå­é‡Œæ¯”è¾ƒæµè¡Œè¿™æ ·ä¸€å¥è¯â€œä¼šå†™ç¨‹åºçš„å¹²ä¸è¿‡ä¼šå†™ PPT çš„â€ï¼Œè¿˜è®°å¾— 2019 å¹´æ–°ä¸œæ–¹å¹´ä¼šçš„ä¸€é¦–ã€Šæ”¾é£è‡ªæˆ‘ã€‹é‡Œæœ‰è¿™æ ·ä¸€å¥æ­Œè¯æˆ³ä¸­äº†ç»å¤§å¤§å¤šæ•°ç¨‹åºå‘˜çš„å†…å¿ƒ</p><p>â€œå¹²çš„ç´¯æ­»ç´¯æ´»ï¼Œæœ‰æˆæœé‚£åˆå¦‚ä½•ï¼Œåˆ°å¤´æ¥å¹²ä¸è¿‡å†™PPTçš„â€ã€‚</p><p>ä¸€æ—¶é—´å¤§å®¶å¥½åƒéƒ½è®¤åŒäº†è¿™ä¸ªè¯´æ³•ï¼Œè¡¨è¾¾ç€è‡ªå·±çš„ä¸æ»¡å’Œæ— å¥ˆã€‚</p><span id="more"></span><h2 id="ï¼ˆä¸€ï¼‰"><a href="#ï¼ˆä¸€ï¼‰" class="headerlink" title="ï¼ˆä¸€ï¼‰"></a>ï¼ˆä¸€ï¼‰</h2><p>éšç€è‡ªå·±ä»ä¸šè¶…è¿‡ 10 å¹´æœ‰ä½™ï¼Œä¸ç®¡æ˜¯ä»ç½‘ç»œä¸Šè¿˜æ˜¯å·¥ä½œä¸­è§è¯†äº†å„ç§å„æ ·çš„èƒ½äººä¹‹åï¼Œå¯¹äºçœŸæ­£çš„â€œèƒ½åŠ›â€ä¹Ÿæœ‰äº†æ–°çš„è®¤è¯†ã€‚</p><p>åœ¨ä¸€å¼€å§‹æˆ‘ä¼šè§‰å¾—é‚£äº›æ²‰é»˜å¯¡è¨€å¹¶ä¸”æŠ€æœ¯è¿˜å¥½çš„æ‰æ˜¯çœŸæ­£çš„å¤§ç¥ï¼Œé‚£äº›ä¼šç‚¹æŠ€æœ¯å°±å¼€å§‹ç»™äººè®²çš„æ˜¯åœ¨ç­é—¨å¼„æ–§ã€‚ç„¶è€Œï¼Œå½“ç»™å›¢é˜Ÿåˆ†äº«ä¸€äº›æŠ€æœ¯åˆ†äº«çš„æ—¶å€™ï¼Œå‘ç°æƒ³æŠŠä¸€ä»¶äº‹ç»™ç»å¤§å¤šæ•°ä¸äº†è§£çš„äººè¯´æ˜ç™½å…¶å®ä¹ŸåŒæ ·æ˜¯ä¸€ç§èƒ½åŠ›ã€‚</p><ul><li>é¦–å…ˆï¼Œåœ¨ç»™äººè®²ä¹‹å‰é¦–å…ˆå¾—è‡ªå·±å®Œå…¨å¼„æ˜ç™½</li><li>å…¶æ¬¡ï¼Œè¿˜è¦æƒ³åˆ«äººå¯èƒ½ä¼šé—®çš„é—®é¢˜è‡ªå·±å¦èƒ½ç­”å‡ºæ¥</li><li>æœ€åï¼Œæ•…äº‹çº¿æ˜¯ä»€ä¹ˆï¼Œæ€æ ·é€»è¾‘æ¸…æ™°çš„è®²å‡ºæ¥</li></ul><h2 id="ï¼ˆäºŒï¼‰"><a href="#ï¼ˆäºŒï¼‰" class="headerlink" title="ï¼ˆäºŒï¼‰"></a>ï¼ˆäºŒï¼‰</h2><p>æœ€è¿‘å´å†›è€å¸ˆåœ¨å¾—åˆ°ä¸Šå¼€è®¾äº†ä¸€é—¨ã€Šé˜…è¯»å’Œå†™ä½œã€‹é‡Œä»–ä¸¾äº†ä¸€ä¸ªä¾‹å­</p><p>ä¸€ä¸ªé¡¹ç›®ç»„ä¸­æœ‰ä¸‰ä¸ªäººï¼Œç¬¬ä¸€ä¸ªäººæ“…é•¿äºåšä¸“ä¸šå·¥ä½œï¼Œç»„é‡Œæœ€é‡è¦çš„å·¥ä½œéƒ½æ˜¯ä»–åšçš„ï¼Œå…¶ä»–äººä¹Ÿç»å¸¸è¦é ä»–æ¥æŒ‡å¯¼ï¼›ç¬¬äºŒä¸ªäººæ“…é•¿æŠŠå¤§å®¶ç»„ç»‡åˆ°ä¸€èµ·ï¼Œå½“å¤§å®¶é‡åˆ°å›°éš¾æ—¶ï¼Œä»–èƒ½å¤Ÿé¼“èˆå¤§å®¶çš„å£«æ°”ï¼Œå¸¦é¢†å¤§å®¶å…‹æœå›°éš¾å–å¾—èƒœåˆ©ï¼›ç¬¬ä¸‰ä¸ªäººèƒ½æŠŠä»–ä»¬ç»„çš„å·¥ä½œè®²æ¸…æ¥šã€‚</p><p>å¦‚æœè€æ¿è¦ä»è¿™å‡ ä¸ªäººä¸­ææ‹”ä¸€ä¸ªäººï¼Œè°çš„æœºä¼šæœ€å¤§å‘¢ï¼Ÿæˆ‘ç›¸ä¿¡å¾ˆå¤šäººä¼šè§‰å¾—æ˜¯é‚£ä¸ªä¸“ä¸šèƒ½åŠ›ç‰¹åˆ«å¼ºçš„ã€‚ä½†æ˜¯ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­å¾€å¾€æ˜¯ç¬¬ä¸‰ä¸ªäººæœ€å¤§ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å‡æƒ³ä¸€ä¸‹ä¸‰ä¸ªäººå»åšæ±‡æŠ¥çš„åœºæ™¯</p><ul><li><p>ç¬¬ä¸€ä¸ªäººå»åšæ±‡æŠ¥ï¼Œä»–è®²äº†ä¸€å †ä¸“ä¸šç»†èŠ‚ï¼Œé¢†å¯¼å¬å¾—æ— è¶£ï¼Œæœ€åä»–æ—¢æ²¡æœ‰è®©å…¨ç»„çš„å·¥ä½œè¢«ä¸Šçº§è®¤å¯ï¼Œä¹Ÿæ²¡æœ‰äº‰å–åˆ°ä»€ä¹ˆèµ„æºã€‚ä¹Ÿè®¸ç¬¬äºŒæ¬¡å¤§å®¶å°±ä¸æ¨ä¸¾ä»–åšä»£è¡¨äº†ï¼Œæˆ–è€…è¿™ä¸ªé¡¹ç›®å—ä¸åˆ°é‡è§†è§£æ•£äº†ã€‚</p></li><li><p>å¦‚æœæ˜¯é‚£ä¸ªå–„äºç»„ç»‡çš„äººå»ä½œæŠ¥å‘Šå‘¢ï¼Ÿä»–ç»™äººçš„å°è±¡å°±æ˜¯ä¸€ä¸ªè¡Œæ”¿ç®¡ç†äººå‘˜ï¼Œåœ¨å…·ä½“çš„é¡¹ç›®ä¸Šä¸€ç›´åœ¨å¤–å›´è½¬æ‚ ï¼ŒæŒ‡æ‰‹ç”»è„šï¼Œç»†èŠ‚æ ¹æœ¬è®²ä¸æ¸…æ¥šï¼Œå½“ç„¶æ±‡æŠ¥çš„æ•ˆæœä¹Ÿå¥½ä¸äº†ã€‚</p></li><li><p>å¦‚æœæ˜¯å¤§å®¶æ‰¾é‚£ä¸ªä¼šè®²çš„äººå»æ±‡æŠ¥ï¼Œé‚£ä¹ˆå…¨ç»„çš„å·¥ä½œæœ€æœ‰å¯èƒ½å¾—åˆ°è®¤å¯ï¼Œè€Œä¸”è¿˜äº‰å–æ¥å¾ˆå¤šèµ„æºã€‚äºæ˜¯å¤§å®¶éƒ½æœ‰å¥½å¤„ï¼Œæ¥ä¸‹æ¥è¿˜ä¼šè®©ä»–ä»£è¡¨å¤§å®¶å»æ±‡æŠ¥ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œåœ¨å¤–äººçš„å°è±¡é‡Œï¼Œä»–çš„åŠŸåŠ³ç¬¬ä¸€ã€‚</p></li></ul><p>è¿™ä¸æ˜¯ç¼–çš„æ•…äº‹ï¼Œå¤§å®¶åœ¨å•ä½é‡Œçœ‹çœ‹å‘¨å›´ï¼Œå°±ä¼šå‘ç°æƒ…å†µå’Œè¿™é‡Œè¯´çš„å¤§åŒå°å¼‚ï¼Œè¿™æ˜¯åœ¨ä¸€ä¸ªå•ä½é‡Œè‡ªç„¶é€‰æ‹©çš„ç»“æœã€‚é€šå¸¸ç”±è¡¨è¾¾èƒ½åŠ›å¥½çš„äººå»æ±‡æŠ¥å·¥ä½œå’Œä½œæŠ¥å‘Šï¼Œè¿™æ ·çš„äººä¹Ÿå› æ­¤æ›´å®¹æ˜“è¢«çœ‹è§ï¼Œè¢«ææ‹”ã€‚</p><h2 id="ï¼ˆä¸‰ï¼‰"><a href="#ï¼ˆä¸‰ï¼‰" class="headerlink" title="ï¼ˆä¸‰ï¼‰"></a>ï¼ˆä¸‰ï¼‰</h2><p>å¾ˆå¤šåœ¨å¤–ä¼å·¥ä½œçš„å°ä¼™ä¼´ä¼šæ³¨æ„åˆ°ï¼Œå¾ˆå¤šå…¬å¸çš„é«˜ç®¡éƒ½æ˜¯å°åº¦äººï¼Œæˆ‘è‡ªå·±ä¹Ÿå¬è¿‡å°åº¦äººåœ¨è·Ÿé¢†å¯¼æ±‡æŠ¥å·¥ä½œï¼Œå‘ç°ä»–ä»¬è®²çš„ç¡®å®æ¯”æˆ‘è®²çš„å¥½å¤ªå¤šï¼ŒæŠ›å¼€è‹±è¯­å±‚é¢ä¸è¯´ï¼Œåœ¨å†…å®¹å’Œå‡†å¤‡æ–¹é¢ï¼Œç¡®å®æœ‰è¿™ä¹ˆå‡ ç‚¹éœ€è¦åƒä»–ä»¬å­¦ä¹ çš„ã€‚</p><ul><li>PPT åšçš„å¾ˆå¥½ï¼Œç”¨ç»“æ„åŒ–çš„å›¾è¡¨è¾¾</li><li>æœ‰æ ¸å¿ƒï¼Œæœ‰é‡ç‚¹</li><li>èƒ½ä¸²èµ·ä¸€ä¸ªæ•…äº‹æ¥ï¼ŒæŠŠäº‹æƒ…è¯´æ¸…æ¥š</li></ul><p>æœ€åä½ å‘ç°å°åº¦äººåšçš„ä½ éƒ½æœ‰ï¼Œæ¯”ä»–åšçš„è¿˜å¥½ï¼Œä»–æ²¡æœ‰çš„ä½ ä¹Ÿæœ‰ã€‚ä½†æ˜¯ï¼Œä»–è®²çš„æ¯”ä½ å¥½ï¼Œå¦åœ¨åœºçš„æ‰€æœ‰äººéƒ½å°è±¡æ·±åˆ»ï¼Œéƒ½è§‰å¾—å¾ˆç‰›é€¼ï¼Œåªæœ‰ä½ å‘µå‘µä¸€ç¬‘ã€‚</p><p>ä½œä¸ºç¨‹åºå‘˜ï¼ŒåƒæŠ€æœ¯è¿™ç¢—é¥­ï¼Œæé«˜æŠ€æœ¯å›ºç„¶ä¸å¯ç¼ºå°‘ï¼Œä½†åŒæ—¶é”»ç‚¼è‡ªå·±çš„å†™ä½œå’Œè¡¨è¾¾çš„èƒ½åŠ›æ‰ä¼šæ›´æœ‰æœºä¼šæ‰“é€ è‡ªå·±çš„å“ç‰Œï¼Œè®©è‡ªå·±èµ°çš„æ›´é«˜æ›´è¿œã€‚</p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æœ€è¿‘è‡ªå·±è¦å‡†å¤‡ä¸€ä¸ªè‹±æ–‡çš„ PPT ç»™å›½å¤–çš„è€å¤§åšåˆ†äº«ï¼Œæˆ‘çš„é¢†å¯¼çš„å®¡æ ¸ç»™äº†æˆ‘æå¤§çš„å¸®åŠ©ï¼Œå¹¶æ·±åˆ»çš„å‘ç°ï¼ŒåŒæ ·æƒ³è¡¨è¾¾ä¸€ä¸ªæ„æ€ï¼Œè‡ªå·±çš„è¡¨è¾¾å’Œé¢†å¯¼çš„è¡¨è¾¾å­˜åœ¨ç›¸å½“å¤§çš„å·®å¼‚ã€‚</p><p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä¸ºä»€ä¹ˆç”¨ Jenkins å…±äº«åº“ï¼Ÿæ¥å¯¹æ¯”ä¿®æ”¹å‰åçš„å·®åˆ«</p><p>ä¿®æ”¹å‰ï¼šIn the early stage of doing this work one year ago, I wrote many duplicate code such as sending emails, printing logs. Shared Libraries could help to solve this problem â€¦</p><p>ä¿®æ”¹åï¼šJust like writing any application code, that we need to create functions, subroutines for reuse and sharing purpose. The same logic applies to Jenkins configuration code â€¦</p><p>å…¶å®æ²¡æœ‰å¿…è¦è¯´è‡ªå·±ä¸€å¼€å§‹èµ°çš„ä¸€äº›å¼¯è·¯å’Œé”™è¯¯ï¼Œè™½ç„¶å¾ˆè¯šå®ï¼Œä½†è¿™ç§è¡¨è¾¾å¯¹è‡ªå·±å¹¶æ²¡æœ‰ä»€ä¹ˆå¥½å¤„ã€‚å¦å¤–ï¼Œä»å¼€åœºç™½ï¼Œæ¯é¡µ PPT ä¹‹é—´çš„è¡”æ¥ï¼Œç»“æŸè¯­éƒ½ç»™å‡ºäº†ä¿®æ”¹æ„è§ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘å½»åº•æŠ›å¼€äº†å¯¹å†™ PPT æ›¾ç»æœ‰è¿‡çš„åè§ï¼Œå¹¶<strong>è®¤ä¸ºå†™å¥½ PPT æ˜¯ä¸€ç§èƒ½åŠ›</strong>ã€‚</p><p>ä¸è¯´äº†ï¼Œç»§ç»­æ”¹æˆ‘çš„ PPTã€èƒŒç¨¿å»äº† â€¦</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Writing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ç¡®ä¿åœ¨æäº¤ Jenkins Pipeline å‰æ²¡æœ‰è¯­æ³•é”™è¯¯</title>
      <link href="/2020/05/jenkins-pipeline-linter-connector/"/>
      <url>/2020/05/jenkins-pipeline-linter-connector/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘åœ¨åš Jenkins å£°æ˜å¼æµæ°´çº¿å¼€å‘æ—¶å¸¸ä¼šé‡åˆ°çš„é—®é¢˜æ˜¯ï¼šä¿®æ”¹åçš„ Pipeline çœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ï¼Œå½“æäº¤åˆ°ä»£ç ä»“åº“åè¿›è¡Œ Jenkins æ„å»ºæ—¶å‘ç°åŸæ¥æœ‰è¯­æ³•é”™è¯¯ï¼Œç„¶åå†å»ä¿®æ”¹ã€æäº¤ã€æ„å»ºï¼Œç»“æœå¯èƒ½è¿˜æœ‰æœ‰å…¶ä»–æ²¡æœ‰æ³¨æ„åˆ°çš„è¯­æ³•é—®é¢˜ã€‚</p><p>ä¸ºäº†å‡å°‘è¿™ç§å› ä¸ºè¯­æ³•é”™è¯¯è€Œéœ€è¦é¢‘ç¹åƒä»£ç åº“å»æäº¤çš„æƒ…å†µï¼Œå¦‚æœèƒ½åœ¨æäº¤ä¹‹å‰è¿›è¡ŒåŸºæœ¬çš„è¯­æ³•æ ¡éªŒï¼Œæ¥æ£€æŸ¥å½“å‰çš„ Pipeline æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯å°±å¥½äº†ã€‚</p><p>ç»è¿‡è°ƒæŸ¥å‘ç° Jenkins æœ¬èº«æä¾›äº†è¿™æ ·çš„è¯­æ³•æ£€æŸ¥ REST APIï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ª API æ¥å¯¹ Pipeline å£°æ˜å¼è¿›è¡Œè¯­æ³•æ ¡éªŒï¼Œè¿™ä¸ªæ–¹å¼éœ€è¦æ‰§è¡Œä¸€é•¿ä¸²çš„ <code>curl</code> å‘½ä»¤ï¼Œçœ‹èµ·æ¥ä¼¼ä¹å¾ˆéº»çƒ¦ï¼Œå¦‚æœèƒ½åœ¨ IDE é‡Œç›´æ¥è¿è¡Œå°±å¥½äº†ã€‚</p><p>VS Code ä½œä¸ºå½“å‰å½“å‰æœ€æµè¡Œ IDE å·¥å…·ï¼Œæœç„¶æ‰¾åˆ°äº†ç›¸å…³çš„æ’ä»¶ã€‚</p><p>ä»¥ä¸‹å°±ä»‹ç»ä¸¤ç§æ–¹æ³•ï¼šé’ˆå¯¹ Jenkins å£°æ˜å¼æµæ°´çº¿ä¸­çš„ Jenkinsfile æ–‡ä»¶è¿›è¡Œè¯­æ³•é”™è¯¯æ£€æŸ¥ï¼Œè¿™ä¸¤ç§æ–¹å¼çš„åŸç†éƒ½æ˜¯é€šè¿‡è°ƒç”¨ Jenkins REST API æ¥å®ç°çš„ã€‚</p><span id="more"></span><blockquote><p>æ³¨æ„ï¼š</p><p>å½“å‰åªæœ‰å£°æ˜å¼æµæ°´çº¿æ”¯æŒè¯­æ³•æ ¡éªŒï¼Œè„šæœ¬å¼æµæ°´çº¿ä¸æ”¯æŒã€‚</p><p>å¦‚æœä½¿ç”¨ Jenkins å›æ”¾åŠŸèƒ½æˆ–æ˜¯ä½¿ç”¨ Jenkins Web é¡µé¢å¼€å‘ Pipeline ä¸å­˜åœ¨ä¸Šè¿°é—®é¢˜ã€‚</p></blockquote><h2 id="REST-API"><a href="#REST-API" class="headerlink" title="REST API"></a>REST API</h2><p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº† Jenkins Shared Librariesï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ REST APIï¼Œé‚£ä¹ˆä¸å¦¨åœ¨è¯¥ä»“åº“ä¸‹é¢åˆ›å»ºä¸€ä¸ª linter.sh æ–‡ä»¶ï¼Œå¹¶å°†è¿™ä¸ªæ–‡ä»¶åŠ åˆ°ä½ çš„ .gitignore é‡Œï¼Œè¿™æ ·ä½ å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé…ç½®ä½ çš„ç”¨æˆ·åå’Œå¯†ç å°±ä¸ä¼šæ„å¤–çš„è¢«æäº¤åˆ° Git ä»“åº“ä¸­ã€‚</p><p>ä»¥ä¸‹æ˜¯ linter.sh è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼Œä¾›å‚è€ƒã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä½•ä½¿ç”¨</span></span><br><span class="line"><span class="comment"># sh linter.sh your-jenkinsfile-path</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›¿æ¢ä¸ºä½ çš„ Jenkins ç”¨æˆ·å</span></span><br><span class="line">username=admin</span><br><span class="line"><span class="comment"># æ›¿æ¢ä¸ºä½ çš„ Jenkins å¯†ç </span></span><br><span class="line">password=admin</span><br><span class="line"><span class="comment"># æ›¿æ¢ä¸ºä½ çš„ Jenkins URL</span></span><br><span class="line">JENKINS_URL=http://localhost:8080/</span><br><span class="line"></span><br><span class="line">PWD=`<span class="built_in">pwd</span>`</span><br><span class="line">JENKINS_FILE=<span class="variable">$1</span></span><br><span class="line"></span><br><span class="line">curl --user <span class="variable">$username</span>:<span class="variable">$password</span> -X POST -F <span class="string">&quot;jenkinsfile=&lt;<span class="variable">$PWD</span>/<span class="variable">$JENKINS_FILE</span>&quot;</span> <span class="variable">$JENKINS_URL</span>/pipeline-model-converter/validate</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœ <code>sh linter.sh your-jenkinsfile-path</code></p><p>å®ä¾‹ 1</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sh linter.sh Jenkinsfile</span><br><span class="line">Errors encountered validating Jenkinsfile:</span><br><span class="line">WorkflowScript: 161: Expected a stage @ line 161, column 9.</span><br><span class="line">           stages &#123;</span><br><span class="line">           ^</span><br></pre></td></tr></table></figure><p>å®ä¾‹ 2</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh linter.sh Jenkinsfile</span><br><span class="line">Errors encountered validating Jenkinsfile:</span><br><span class="line">WorkflowScript: 60: Invalid condition <span class="string">&quot;failed&quot;</span> - valid conditions are [always, changed, fixed, regression, aborted, success, unsuccessful, unstable, failure, notBuilt, cleanup] @ line 60, column 9.</span><br><span class="line">           failed&#123;</span><br><span class="line">           ^</span><br><span class="line"><span class="comment"># å°† failed æ”¹ä¸º failureï¼Œå†æ¬¡æ‰§è¡Œï¼ŒæˆåŠŸã€‚</span></span><br><span class="line">sh linter.sh Jenkinsfile</span><br><span class="line">Jenkinsfile successfully validated.</span><br></pre></td></tr></table></figure><p>å½“ Pipeline å†™çš„å¾ˆé•¿çš„æ—¶å€™ï¼Œæ€»æ˜¯å¾ˆéš¾å‘ç°æœ‰ä»€ä¹ˆåœ°æ–¹æ²¡æœ‰åŒ¹é…æˆ–æ˜¯ç¼ºäº†æ‹¬å·ä»€ä¹ˆçš„ã€‚æœ‰äº†è¿™ä¸ªè„šæœ¬å°±å¯ä»¥åœ¨æäº¤ä¹‹å‰æ£€æŸ¥æ˜¯å¦æœ‰é—®é¢˜ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Jenkinsfile successfully validated.</span><br></pre></td></tr></table></figure><h2 id="Jenkins-Pipeline-Linter-Connector-æ’ä»¶"><a href="#Jenkins-Pipeline-Linter-Connector-æ’ä»¶" class="headerlink" title="Jenkins Pipeline Linter Connector æ’ä»¶"></a><code>Jenkins Pipeline Linter Connector</code> æ’ä»¶</h2><p>ç¬¬äºŒç§æ–¹å¼å°±æ˜¯é€šç”¨äº†ï¼Œåªè¦æ˜¯å£°æ˜å¼æµæ°´çº¿ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶å»éªŒè¯æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯é—®é¢˜ã€‚</p><h3 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h3><p>åœ¨ VSCode æ’ä»¶é‡Œæœç´¢ <code>Jenkins Pipeline Linter Connector</code></p><h3 id="é…ç½®æ’ä»¶"><a href="#é…ç½®æ’ä»¶" class="headerlink" title="é…ç½®æ’ä»¶"></a>é…ç½®æ’ä»¶</h3><p>æ‰“å¼€ File -&gt; Preferences -&gt; Settings -&gt; Extensionsï¼Œ æ‰¾åˆ° <code>Jenkins Pipeline Linter Connector</code>ï¼Œå‚è€ƒå¦‚ä¸‹é…ç½®ã€‚</p><p><img src="/2020/05/jenkins-pipeline-linter-connector/settings.png" alt="Jenkins pipeline linter è®¾ç½®"></p><h3 id="è¿è¡Œæ’ä»¶"><a href="#è¿è¡Œæ’ä»¶" class="headerlink" title="è¿è¡Œæ’ä»¶"></a>è¿è¡Œæ’ä»¶</h3><p>å³é”® -&gt; Command Palette -&gt; Validate Jenkinsfile</p><p>æˆ–</p><p>æ‰§è¡Œå¿«æ·é”® Shift + Alt + V</p><h3 id="æ‰§è¡Œæ•ˆæœ"><a href="#æ‰§è¡Œæ•ˆæœ" class="headerlink" title="æ‰§è¡Œæ•ˆæœ"></a>æ‰§è¡Œæ•ˆæœ</h3><p><img src="/2020/05/jenkins-pipeline-linter-connector/example1.gif" alt="Example 1"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¦‚æœä½¿ç”¨ VSCode ä½œä¸ºå¼€å‘å·¥å…·ï¼Œæ¨èä½¿ç”¨ <code>Jenkins Pipeline Linter Connector</code> æ’ä»¶ã€‚</p><p>å¦‚æœæ˜¯ Jenkins Shared Libraries ä»“åº“ä¸å¦¨å¯ä»¥åˆ›å»ºä¸€ä¸ª shell è„šæœ¬ï¼Œé€šè¿‡æ‰§è¡Œè„šæœ¬æ¥è¿›è¡Œæ ¡éªŒã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„ä½¿ç”¨ Jenkinfile ä¹Ÿå¯ä»¥åœ¨ Jenkins Web Pipeline é¡µé¢é‡Œç¼–å†™ï¼Œé‚£é‡Œè‡ªå¸¦è¯­æ³•æ£€æŸ¥ã€‚</p><p>å¦‚æœæ‚¨è¿˜æœ‰åˆ«çš„æ–¹å¼ï¼Œæ¬¢è¿ç•™è¨€å‘Šè¯‰æˆ‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwarch v1.3 ä»‹ç»</title>
      <link href="/2020/05/nightwatch-v1-3/"/>
      <url>/2020/05/nightwatch-v1-3/</url>
      
        <content type="html"><![CDATA[<p>Nightwatch js æ˜¯æˆ‘ä¹‹å‰å†™è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ä½¿ç”¨äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„æµ‹è¯•æ¡†æ¶ï¼Œæˆ‘å½“æ—¶çš„ä½¿ç”¨ v0.9 ç‰ˆæœ¬å¹¶ä¸”å¯¹ä½¿ç”¨å’Œ API è¿›è¡Œäº†ç¿»è¯‘ã€‚ä½œä¸ºä¸€åå‰æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œå¯¹äºè‡ªåŠ¨åŒ–çš„çŸ¥è¯†ä¸èƒ½ä¸æ›´æ–°ä¸‹è‡ªå·±çš„çŸ¥è¯†åº“ï¼Œä¸€è½¬çœ¼ Nightwatch 1.3 ç‰ˆæœ¬å·²ç»å‘å¸ƒäº†ï¼Œå¯ä»¥çœ‹åˆ°å®ƒåœ¨ GitHub ä¸Šçš„ä½¿ç”¨å’Œå…³æ³¨åº¦è¿˜æ˜¯å¾ˆé«˜çš„ã€‚</p><p><img src="/2020/05/nightwatch-v1-3/nightwatch-star.png" alt="Nightwatch star æ•°é‡"></p><p>Nightwarch.js æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„åŸºäº Node.js ä½¿ç”¨ W3C Webdriver ï¼ˆä»¥å‰æ˜¯ Selenium ï¼‰çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ã€‚å®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„é›†æˆè§£å†³æ–¹æ¡ˆï¼Œç”¨äº web åº”ç”¨ç¨‹åºå’Œç½‘ç«™çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œä»¥åŠ Node.js å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚</p><span id="more"></span><p>æŸ¥çœ‹äº†ä¸€ä¸‹ Nightwatch çš„å‘å¸ƒå†å²ï¼ˆ<a href="https://github.com/nightwatchjs/nightwatch/releases%EF%BC%89%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%BF%99%E6%9C%9F%E9%97%B4%E4%BF%AE%E5%A4%8D%E4%BA%86%E4%B8%8D%E5%B0%91">https://github.com/nightwatchjs/nightwatch/releasesï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è¿™æœŸé—´ä¿®å¤äº†ä¸å°‘</a> Bugï¼Œè€Œä¸”åœ¨ v1.3 â€‹ç‰ˆæœ¬è¿˜æ–°å¢ä¸€äº›æ–°çš„åŠŸèƒ½ã€‚</p><ul><li><p>æ–°å¢ BDD describe Interface - å¯ä»¥åŒæ—¶è¿è¡Œä»¥ BDD æè¿°å’Œå¯¼å‡ºæ¥å£ç¼–å†™çš„æµ‹è¯•ï¼Œæ— éœ€å…¶ä»–é…ç½®ã€‚</p></li><li><p>æ–°å¢ <code>assert.not</code> æ–­è¨€</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸæ¥è¿™ä¹ˆå†™</span></span><br><span class="line">browser.<span class="property">assert</span>.<span class="title function_">elementNotPresent</span>()</span><br><span class="line"><span class="comment">// ç°åœ¨å¯ä»¥è¿™ä¹ˆå†™</span></span><br><span class="line">browser.<span class="property">assert</span>.<span class="property">not</span>.<span class="title function_">elementPresent</span>(<span class="string">&#x27;.not_present&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>æ–°å¢ä¸€äº› APIs - æ¯”å¦‚ <code>getElementProperty</code>, <code>domPropertyContains</code>, <code>domPropertyEquals</code>, <code>.property</code></p></li><li><p>æ–°å¢äº† CLI é€‰é¡¹</p><ul><li><code>--headless</code> - ä»¥æ— å¤´æ¨¡å¼å¯åŠ¨æµè§ˆå™¨ï¼ˆChromeæˆ–Firefoxï¼‰</li><li><code>--timeout</code> - è®¾ç½®æ–­è¨€å¤±è´¥ä¹‹å‰é‡è¯•æ–­è¨€çš„å…¨å±€è¶…æ—¶</li></ul></li></ul><p>å¦‚æœè¦ä» v1.0 ä¹‹å‰çš„ç‰ˆæœ¬å‡çº§ï¼Œå‚é˜…å¦‚ä¸‹å‡çº§æŒ‡å—ã€‚</p><h2 id="å‡çº§å’Œå¯åŠ¨"><a href="#å‡çº§å’Œå¯åŠ¨" class="headerlink" title="å‡çº§å’Œå¯åŠ¨"></a>å‡çº§å’Œå¯åŠ¨</h2><p>ä» NPM å®‰è£… Nightwatch</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install nightwatch --save-dev</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…æµè§ˆå™¨é©±åŠ¨ç¨‹åº"><a href="#å®‰è£…æµè§ˆå™¨é©±åŠ¨ç¨‹åº" class="headerlink" title="å®‰è£…æµè§ˆå™¨é©±åŠ¨ç¨‹åº"></a>å®‰è£…æµè§ˆå™¨é©±åŠ¨ç¨‹åº</h3><h4 id="Geckodriverï¼ˆFirefoxï¼‰"><a href="#Geckodriverï¼ˆFirefoxï¼‰" class="headerlink" title="Geckodriverï¼ˆFirefoxï¼‰"></a>Geckodriverï¼ˆFirefoxï¼‰</h4><p>Geckodriver æ˜¯ç”¨äºé©±åŠ¨ Mozilla Firefox æµè§ˆå™¨çš„ WebDriver æœåŠ¡ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install geckodriver --save-dev</span><br></pre></td></tr></table></figure><h4 id="Chromedriver"><a href="#Chromedriver" class="headerlink" title="Chromedriver"></a>Chromedriver</h4><p>Chromedriver æ˜¯ç”¨äºé©±åŠ¨ Google Chrome æµè§ˆå™¨çš„ WebDriver æœåŠ¡ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install chromedriver --save-dev</span><br></pre></td></tr></table></figure><p>æˆ–ç”¨ä¸€è¡Œå®‰è£…æ‰€æœ‰å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i nightwatch geckodriver chromedriver --save-dev</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œæ¼”ç¤ºæµ‹è¯•"><a href="#è¿è¡Œæ¼”ç¤ºæµ‹è¯•" class="headerlink" title="è¿è¡Œæ¼”ç¤ºæµ‹è¯•"></a>è¿è¡Œæ¼”ç¤ºæµ‹è¯•</h2><p>Nightwatch å¸¦æœ‰ä¸€ä¸ª example æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›ç¤ºä¾‹æµ‹è¯•ã€‚</p><p>ä¸‹é¢å°†è¿è¡Œä¸€ä¸ªåŸºæœ¬æµ‹è¯•ï¼Œè¯¥æµ‹è¯•æ‰“å¼€æœç´¢å¼•æ“ Ecosia.orgï¼Œæœç´¢ â€œnightwatchâ€ ä¸€è¯ï¼Œå¹¶éªŒè¯æœ¯è¯­ â€œç¬¬ä¸€ä¸ªç»“æœâ€ æ˜¯å¦æ˜¯ Nightwatch.js ç½‘ç«™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./node_modules/.bin/nightwatch node_modules/nightwatch/examples/tests/ecosia.js</span><br></pre></td></tr></table></figure><p>Windows ç”¨æˆ·å¯èƒ½éœ€è¦è¿è¡ŒèŠ‚ç‚¹ node node_modules&#x2F;.bin&#x2F;nightwatch</p><h2 id="æ‰‹åŠ¨ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ç¨‹åº"><a href="#æ‰‹åŠ¨ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ç¨‹åº" class="headerlink" title="æ‰‹åŠ¨ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ç¨‹åº"></a>æ‰‹åŠ¨ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ç¨‹åº</h2><p>Nightwatch ä½¿ç”¨å…¼å®¹ WebDriver çš„æœåŠ¡å™¨æ¥æ§åˆ¶æµè§ˆå™¨ã€‚ WebDriver æ˜¯ W3C è§„èŒƒå’Œè¡Œä¸šæ ‡å‡†ï¼Œæä¾›äº†ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„å¹³å°å’Œ HTTP åè®®ã€‚</p><p>Nightwatch åŒ…æ‹¬å¯¹è‡ªåŠ¨ç®¡ç†ä»¥ä¸‹æœåŠ¡çš„æ”¯æŒï¼š</p><h3 id="ChromeDriver"><a href="#ChromeDriver" class="headerlink" title="ChromeDriver"></a>ChromeDriver</h3><ul><li>é’ˆå¯¹ Chrome æµè§ˆå™¨è¿è¡Œæµ‹è¯•</li><li>ä¸‹è½½ç½‘å€ <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads%E3%80%82">https://sites.google.com/a/chromium.org/chromedriver/downloadsã€‚</a></li></ul><p>ä»ç‰ˆæœ¬ 75 å¼€å§‹ï¼ŒChromedriver é»˜è®¤å¯ç”¨ W3C Webdriver åè®®ã€‚å¦‚æœä½ ç°åœ¨æƒ³åšæŒä½¿ç”¨ JSONWireï¼Œè¯·è°ƒæ•´ chromeOptionsï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">desiredCapabilities : &#123;</span><br><span class="line">  browserName : <span class="string">&#x27;chrome&#x27;</span>,</span><br><span class="line">  chromeOptions: &#123;</span><br><span class="line">    w3c: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="GeckoDriver"><a href="#GeckoDriver" class="headerlink" title="GeckoDriver"></a>GeckoDriver</h3><p>é’ˆå¯¹ Mozilla Firefox æµè§ˆå™¨è¿è¡Œæµ‹è¯•ã€‚ä¸‹è½½ç½‘å€ï¼š<a href="https://github.com/mozilla/geckodriver/releases">https://github.com/mozilla/geckodriver/releases</a>.</p><h3 id="Selenium-Standalone-Server"><a href="#Selenium-Standalone-Server" class="headerlink" title="Selenium Standalone Server"></a>Selenium Standalone Server</h3><ul><li>åœ¨ä¸€ä¸ªåœ°æ–¹ç®¡ç†å¤šä¸ªæµè§ˆå™¨é…ç½®ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ Selenium Grid æœåŠ¡</li><li>å¯ä»¥ä» Selenium å‘å¸ƒé¡µé¢ä¸‹è½½ selenium æœåŠ¡å™¨ jar æ–‡ä»¶ selenium-server-standalone-3.x.x.jarï¼š<a href="https://selenium-release.storage.googleapis.com/index.html">https://selenium-release.storage.googleapis.com/index.html</a></li></ul><p>é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œå°½ç®¡è¾ƒæ—©çš„ Nightwatch ç‰ˆæœ¬ï¼ˆv0.9 åŠæ›´ä½ç‰ˆæœ¬ï¼‰éœ€è¦ Selenium Serverï¼Œä½†ä» 1.0 ç‰ˆæœ¬å¼€å§‹ä¸å†éœ€è¦ Seleniumã€‚</p><p>ç‰¹å®šçš„ WebDriver è®¾ç½®æŒ‡å—å¯åœ¨ Docs ç½‘ç«™ä¸Šæ‰¾åˆ°ã€‚æ—§ç‰ˆ Selenium é©±åŠ¨ç¨‹åºå®‰è£…æŒ‡å—ä»¥åŠè°ƒè¯•è¯´æ˜å¯ä»¥åœ¨ Wiki ä¸Šæ‰¾åˆ°ã€‚</p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p>ç¤ºä¾‹æ–‡ä»¶å¤¹ä¸­åŒ…å«ç¤ºä¾‹æµ‹è¯•ï¼Œè¿™äº›ç¤ºä¾‹æ¼”ç¤ºäº†å¤šä¸ª Nightwatch åŠŸèƒ½çš„ç”¨æ³•ã€‚</p><p>ä½ è¿˜å¯ä»¥æŸ¥çœ‹ nightwatch-website-tests (<a href="https://github.com/nightwatchjs/nightwatch-website-tests">https://github.com/nightwatchjs/nightwatch-website-tests</a>) å­˜å‚¨åº“ï¼Œä¾‹å¦‚é’ˆå¯¹ nightwatchjs.org (<a href="https://nightwatchjs.org/">https://nightwatchjs.org/</a>) ç½‘ç«™çš„æµ‹è¯•ã€‚</p><h2 id="Nightwatch-å•å…ƒæµ‹è¯•"><a href="#Nightwatch-å•å…ƒæµ‹è¯•" class="headerlink" title="Nightwatch å•å…ƒæµ‹è¯•"></a>Nightwatch å•å…ƒæµ‹è¯•</h2><p>Nightwatch çš„æµ‹è¯•æ˜¯ä½¿ç”¨ Mocha ç¼–å†™çš„ã€‚</p><p>1.å…‹éš†é¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/nightwatchjs/nightwatch.git</span><br><span class="line"><span class="built_in">cd</span> nightwatch</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>2.è¿è¡Œæµ‹è¯•</p><p>è¦è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>è¦æ£€æŸ¥æµ‹è¯•èŒƒå›´ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run mocha-coverage</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç”Ÿæˆçš„ coverage&#x2F;index.html æ–‡ä»¶ã€‚</p><h2 id="Nightwatch-ä½¿ç”¨ç¤ºä¾‹"><a href="#Nightwatch-ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="Nightwatch ä½¿ç”¨ç¤ºä¾‹"></a>Nightwatch ä½¿ç”¨ç¤ºä¾‹</h2><p>ä»¥ä¸‹æ˜¯æˆ‘å†™çš„ä¸€ä¸ªä½¿ç”¨ NightwatchJS å¯¹ Nightwatch å®˜ç½‘ <a href="https://nightwatchjs.org/">https://nightwatchjs.org</a> è¿›è¡Œæµ‹è¯•çš„ä¸€ä¸ªæµ‹è¯•ç¤ºä¾‹ï¼ˆå·²ç»å‡çº§åˆ° v1.3 ç‰ˆæœ¬ï¼‰ä»¥å±•ç¤ºåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ Nightwatchjs å¦‚ä½•ç»„ç»‡ç›®å½•ç»“æ„ï¼ŒåŒºåˆ«é…ç½®å…¨å±€å’Œæœ¬åœ°ç¯å¢ƒã€‚</p><p>ç¤ºä¾‹ä»“åº“çš„ GitHub åœ°å€æ˜¯ <a href="https://github.com/nightwatchjs-cn/nightwatch-e2e%EF%BC%8C%E6%AC%A2%E8%BF%8E">https://github.com/nightwatchjs-cn/nightwatch-e2eï¼Œæ¬¢è¿</a> Star å’Œ Forkã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to use JMeter to do Performance Testing</title>
      <link href="/2020/05/jmeter-performance-testing/"/>
      <url>/2020/05/jmeter-performance-testing/</url>
      
        <content type="html"><![CDATA[<h2 id="Record-JMeter-Scripts"><a href="#Record-JMeter-Scripts" class="headerlink" title="Record JMeter Scripts"></a>Record JMeter Scripts</h2><p>use JMeterâ€™s HTTP(S) Test Script Recorder, please refer to this official document <a href="https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html">https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html</a></p><h2 id="Running-JMeter-Scripts"><a href="#Running-JMeter-Scripts" class="headerlink" title="Running JMeter Scripts"></a>Running JMeter Scripts</h2><ul><li><p>Debug scripts on JMeter in GUI Mode</p><p>You can debug your record scripts in GUI Mode until there are no errors</p></li><li><p>run test scripts in Non-GUI Mode(Command Line mode) recommend</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jmeter -n -t ..\extras\Test.jmx -l Test.jtl</span><br></pre></td></tr></table></figure></li></ul><span id="more"></span><h2 id="Running-JMeter-Scripts-on-Jenkins"><a href="#Running-JMeter-Scripts-on-Jenkins" class="headerlink" title="Running JMeter Scripts on Jenkins"></a>Running JMeter Scripts on Jenkins</h2><h3 id="Need-Tools"><a href="#Need-Tools" class="headerlink" title="Need Tools"></a>Need Tools</h3><ol><li>Jmeter - Web Request Load Testing</li><li>Jmeter-plugins<ul><li>ServerAgent-2.2.1 - PerfMon Agent to use with Standard Set</li></ul></li></ol><h3 id="Test-server"><a href="#Test-server" class="headerlink" title="Test server"></a>Test server</h3><p>Two virtual machines</p><ul><li>System under test</li><li>Jmeter execution machine, this server is also Jenkins server</li></ul><h2 id="Implement"><a href="#Implement" class="headerlink" title="Implement"></a>Implement</h2><h3 id="Develop-test-script"><a href="#Develop-test-script" class="headerlink" title="Develop test script"></a>Develop test script</h3><p>Record Scripts - use JMeterâ€™s HTTP(S) Test Script Recorder, please refer to this official document <a href="https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html">https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html</a></p><h3 id="Create-Jenkins-job-for-running-JMeter-scripts"><a href="#Create-Jenkins-job-for-running-JMeter-scripts" class="headerlink" title="Create Jenkins job for running JMeter scripts"></a>Create Jenkins job for running JMeter scripts</h3><ol><li><p>Create a new item-&gt;select Freestyle project</p></li><li><p>Add build step-&gt;Execute Windows batch command</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//access to jenkins <span class="built_in">jobs</span> workspace, empty the last <span class="built_in">test</span> results</span><br><span class="line">cmd</span><br><span class="line"><span class="built_in">cd</span> C:\Users\peter\.jenkins\<span class="built_in">jobs</span>\TEST-122 Upload large data\workspace</span><br><span class="line">del /Q <span class="string">&quot;jtl&quot;</span>\*</span><br><span class="line">del /Q <span class="string">&quot;PerfMon Metrics Collector&quot;</span>\*</span><br></pre></td></tr></table></figure></li><li><p>Add build step-&gt;Execute Windows batch command</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//add first run jmeter script <span class="built_in">command</span>, <span class="keyword">if</span> you want run others script you can <span class="built_in">continue</span> to add <span class="string">&quot;Execute Windows batch command&quot;</span></span><br><span class="line">jmeter -n -t script/UploadLargeData-1.jmx -l jtl/UploadLargeData-1.jtl</span><br></pre></td></tr></table></figure></li><li><p>Configure build email - Configure System</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//Configure System, Extended E-mail Notification</span><br><span class="line">SMTP server: smtp.gmail.com</span><br><span class="line"></span><br><span class="line">//Job Configure, Enable <span class="string">&quot;Editable Email Notification&quot;</span></span><br><span class="line">Project Recipient List: xianpeng.shen@gmail.com</span><br><span class="line">Project Reply-To List: <span class="variable">$DEFAULT_REPLYTO</span></span><br><span class="line">Content Type: HTML (text/html)</span><br><span class="line">Default Subject:<span class="variable">$DEFAULT_SUBJECT</span></span><br><span class="line">Default Content: <span class="variable">$&#123;SCRIPT, template=&quot;groovy-html.template&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">//Advance setting</span><br><span class="line">Triggers: Always</span><br><span class="line">          Send to Recipient List</span><br></pre></td></tr></table></figure></li></ol><h3 id="Generate-test-report"><a href="#Generate-test-report" class="headerlink" title="Generate test report"></a>Generate test report</h3><p>JMeter-&gt;Add listener-&gt;add jp@gc - PerfMon Metrics Collector, browse Test.jtl, click right key on graph Export to CSV</p><h3 id="Analyze-test-results"><a href="#Analyze-test-results" class="headerlink" title="Analyze test results"></a>Analyze test results</h3><p>Introduction test scenarios</p><p>Using 1, 5, 10, 20, 30, (50) users loading test, record every group user test results</p><blockquote><p>Glossary</p><ul><li>Sample(label) - This indicates the number of virtual users per request.</li><li>Average - It is the average time taken by all the samples to execute specific label</li><li>Median - is a number which divides the samples into two equal halves.</li><li>%_line - is the value below which 90, 95, 99% of the samples fall.</li><li>Min - The shortest time taken by a sample for specific label.</li><li>Max - The longest time taken by a sample for specific label.</li><li>Error% - percentage of failed tests.</li><li>Throughput - how many requests per second does your server handle. Larger is better.</li><li>KB&#x2F;Sec - it is the Throughput measured in Kilobytes per second.</li></ul></blockquote><p>Example: Test results of each scenario shown in the following table</p><table><thead><tr><th>User</th><th># Samples</th><th>Average</th><th>Median</th><th>90% Line</th><th>95% LIne</th><th>Min</th><th>Max</th><th>Error %</th><th>Throughput</th><th>Received</th><th>Send KB&#x2F;sec</th></tr></thead><tbody><tr><td>1</td><td>31</td><td>348</td><td>345</td><td>452</td><td>517</td><td>773</td><td>5</td><td>773</td><td>0.00%</td><td>2.85215</td><td>2.5</td></tr><tr><td>5</td><td>155</td><td>1166</td><td>1164</td><td>1414</td><td>1602</td><td>1639</td><td>9</td><td>1821</td><td>0.00%</td><td>4.26445</td><td>3.73</td></tr><tr><td>10</td><td>310</td><td>2275</td><td>2299</td><td>2687</td><td>2954</td><td>3671</td><td>20</td><td>4104</td><td>0.00%</td><td>4.38547</td><td>3.84</td></tr><tr><td>20</td><td>620</td><td>4479</td><td>4620</td><td>5113</td><td>6152</td><td>6435</td><td>39</td><td>6571</td><td>0.00%</td><td>4.42826</td><td>3.88</td></tr><tr><td>30</td><td>930</td><td>6652</td><td>6899</td><td>7488</td><td>9552</td><td>10051</td><td>4</td><td>10060</td><td>0.00%</td><td>4.46776</td><td>3.91</td></tr></tbody></table><p>Test results analysis chart</p><p><img src="/2020/05/jmeter-performance-testing/response-chart.png" alt="Response Chart"> <img src="/2020/05/jmeter-performance-testing/permon-metrics.png" alt="PerMon Metrics"></p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JMeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Synchronize from Bitbucket to GitHub via Jenkins</title>
      <link href="/2020/05/sync-from-bitbucket-to-github/"/>
      <url>/2020/05/sync-from-bitbucket-to-github/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ€è¿‘æˆ‘ä»¬å›¢é˜Ÿéœ€è¦å°†ä¸€äº›ç¤ºä¾‹å’Œä¾‹å­ä»å†…éƒ¨çš„ Bitbucket åŒæ­¥åˆ° GitHubã€‚æˆ‘äº†è§£ GitHub å¯ä»¥åˆ›å»ºå…¬å…±çš„æˆ–æ˜¯ç§äººçš„ä»“åº“ï¼Œä½†æˆ‘ä»¬éœ€è¦ä¿æŒä»¥ä¸‹ä¸¤ç‚¹</p><ul><li>åªåˆ†äº«æˆ‘ä»¬æƒ³ç»™å®¢æˆ·åˆ†äº«çš„å†…å®¹</li><li>ä¸æ”¹å˜å½“å‰çš„å·¥ä½œæµç¨‹ï¼Œå³ç»§ç»­ä½¿ç”¨ Bitbucket</li></ul><span id="more"></span><p>å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ GitHub ä¸Šåˆ›å»ºç›¸åº”çš„ä»“åº“ï¼Œç„¶åå°†å†…éƒ¨ Bitbucket ä»“åº“ä¸­å¯¹åº”çš„ master åˆ†æ”¯å®šæœŸçš„é€šè¿‡ CI job åŒæ­¥åˆ° BitHub ä¸Šå»ã€‚</p><p><img src="/2020/05/sync-from-bitbucket-to-github/sync-diagrom.png" alt="åŒæ­¥"></p><h2 id="åˆ†æ”¯ç­–ç•¥"><a href="#åˆ†æ”¯ç­–ç•¥" class="headerlink" title="åˆ†æ”¯ç­–ç•¥"></a>åˆ†æ”¯ç­–ç•¥</h2><p>é¦–å…ˆï¼Œéœ€è¦å¯¹ Bitbucket è¿›è¡Œåˆ†æ”¯æƒé™è®¾ç½®</p><ul><li>master åˆ†æ”¯åªå…è®¸é€šè¿‡ Pull Request æ¥è¿›è¡Œä¿®æ”¹</li><li>Pull Request é»˜è®¤çš„ reviewer è‡³å°‘éœ€è¦ä¸€äººï¼Œå¹¶ä¸”åªæœ‰åŒæ„çŠ¶æ€æ‰å…è®¸åˆå¹¶</li></ul><p>å…¶æ¬¡ï¼Œä¸ºäº†æ–¹ä¾¿äº§å“ã€å”®åç­‰äººå‘˜ä½¿ç”¨ï¼Œç®€åŒ–åˆ†æ”¯ç­–ç•¥å¦‚ä¸‹</p><ol><li>ä» master åˆ†æ”¯ä¸Šåˆ›å»º feature æˆ–æ˜¯ bugfix åˆ†æ”¯ï¼ˆå–å†³äºä½ çš„ä¿®æ”¹ç›®çš„ï¼‰</li><li>ç„¶åå°†ä½ çš„æ›´æ”¹æäº¤åˆ°è‡ªå·±çš„ feature æˆ– bugfix åˆ†æ”¯</li><li>åœ¨ä½ è‡ªå·±çš„åˆ†æ”¯é€šè¿‡æµ‹è¯•åï¼Œæäº¤ Pull Request åˆ° master åˆ†æ”¯</li><li>å½“ reviewer åŒæ„çŠ¶æ€ï¼Œæ‰èƒ½è¿›è¡Œåˆå¹¶è¿›å…¥åˆ° master åˆ†æ”¯</li></ol><p><img src="/2020/05/sync-from-bitbucket-to-github/branch-strategy.png" alt="åˆ†æ”¯ç­–ç•¥"></p><h2 id="Jenkins-Pipeline"><a href="#Jenkins-Pipeline" class="headerlink" title="Jenkins Pipeline"></a>Jenkins Pipeline</h2><p>åŸºäºè¿™æ ·çš„å·¥ä½œä¸æ˜¯ç‰¹åˆ«çš„é¢‘ç¹ï¼Œä¹Ÿä¸ºäº†æ–¹ä¾¿ç»´æŠ¤ Jenkins Pipeline çš„ç®€å•å’Œæ˜“äºç»´æŠ¤ï¼Œæˆ‘æ²¡æœ‰åœ¨éœ€è¦åŒæ­¥çš„æ¯ä¸ªä»“åº“é‡Œæ·»åŠ  <code>Jenkinsfile</code> æˆ–åœ¨ Bitbucket é‡Œæ·»åŠ  <code>webhooks</code>ã€‚æœ‰ä»¥ä¸‹å‡ ç‚¹å¥½å¤„ï¼š</p><ul><li>åªåˆ›å»ºä¸€ä¸ª Jenkins Jobï¼Œç”¨ä¸€ä¸ª <code>Jenkinsfile</code> æ»¡è¶³æ‰€æœ‰ä»“åº“çš„åŒæ­¥</li><li>å‡å°‘äº†å†—ä½™çš„ <code>Jenkinsfile</code> çš„ä»£ç ï¼Œä¿®æ”¹æ—¶åªéœ€æ›´ç»´æŠ¤ä¸€ä¸ªæ–‡ä»¶</li><li>ä¸éœ€è¦åœ¨æ¯ä¸ªä»“åº“é‡Œæ·»åŠ ä¸€ä¸ª <code>Jenkinsfile</code>ï¼Œæ›´çº¯ç²¹çš„å±•ç¤ºç¤ºä¾‹ï¼Œé¿å…ç»™é IT äººå‘˜é€ æˆå›°æ‰°</li></ul><p>ä¸è¶³ä¹‹å¤„ï¼Œä¸èƒ½é€šè¿‡ SCM æ¥è§¦å‘æ„å»ºï¼Œå¦‚æœæƒ³é€šè¿‡ <code>webhooks</code> æ¥è§¦å‘ï¼Œæœ‰çš„å…¬å¸éœ€è¦ç”³è¯·æƒé™æ¥æ·»åŠ  <code>webhooks</code> æ¯”è¾ƒéº»çƒ¦ï¼›å¦å¤–å¯èƒ½æ— æ³•åŒºåˆ†ä»å“ªä¸ªä»“åº“å‘æ¥çš„è¯·æ±‚ï¼Œå®ç°æŒ‡å®šä»“åº“çš„åŒæ­¥ã€‚</p><p>å› æ­¤å¦‚æœä¸æ˜¯ç‰¹åˆ«é¢‘ç¹çš„éœ€è¦åŒæ­¥ï¼Œæä¾›æ‰‹åŠ¨æˆ–æ˜¯å®šæ—¶åŒæ­¥å³å¯ã€‚</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ª Jenkinsfile æ˜¯ç”¨æ¥å°† Bitbucket ä»“åº“çš„ master åˆ†æ”¯åŒæ­¥åˆ° GitHub ä»“åº“çš„ master åˆ†æ”¯</span></span><br><span class="line"><span class="comment">// This Jenkinsfile is used to synchronize Bitbucket repositories master branches to GitHub repositories master branches.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Library</span>(<span class="string">&#x27;jenkins-shared-library@develop&#x27;</span>) _</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> email = <span class="keyword">new</span> org.cicd.email()</span><br><span class="line"></span><br><span class="line">pipeline &#123;</span><br><span class="line"></span><br><span class="line">  agent &#123;</span><br><span class="line">    label <span class="string">&quot;main-slave&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  parameters &#123;</span><br><span class="line">    booleanParam(<span class="attr">defaultValue:</span> <span class="literal">false</span>, <span class="attr">name:</span> <span class="string">&#x27;git-repo-win&#x27;</span>, <span class="attr">description:</span> <span class="string">&#x27;Sync internal git-repo-win master branch with external git-repo-win on GitHub&#x27;</span>)</span><br><span class="line">    booleanParam(<span class="attr">defaultValue:</span> <span class="literal">true</span>,  <span class="attr">name:</span> <span class="string">&#x27;git-repo-lin&#x27;</span>, <span class="attr">description:</span> <span class="string">&#x27;Sync internal git-repo-lin master branch with external git-repo-lin on GitHub&#x27;</span>)</span><br><span class="line">    booleanParam(<span class="attr">defaultValue:</span> <span class="literal">false</span>, <span class="attr">name:</span> <span class="string">&#x27;git-repo-aix&#x27;</span>, <span class="attr">description:</span> <span class="string">&#x27;Sync internal git-repo-aix master branch with external git-repo-aix on GitHub&#x27;</span>)</span><br><span class="line">    booleanParam(<span class="attr">defaultValue:</span> <span class="literal">false</span>, <span class="attr">name:</span> <span class="string">&#x27;git-repo-sol&#x27;</span>, <span class="attr">description:</span> <span class="string">&#x27;Sync internal git-repo-sol master branch with external git-repo-sol on GitHub&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  options &#123;</span><br><span class="line">    timestamps()</span><br><span class="line">    buildDiscarder(logRotator(<span class="attr">numToKeepStr:</span><span class="string">&#x27;50&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(<span class="string">&quot;Synchronous master branch&quot;</span>)&#123;</span><br><span class="line">      steps&#123;</span><br><span class="line">        script &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            params.each &#123; key, value -&gt;</span><br><span class="line">              <span class="keyword">def</span> repoName = <span class="string">&quot;$key&quot;</span></span><br><span class="line">              <span class="keyword">if</span> ( value == <span class="literal">true</span>) &#123;</span><br><span class="line">                echo <span class="string">&quot;Start synchronizing $key Bitbucket repository.&quot;</span></span><br><span class="line">                sh <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                rm -rf $&#123;repoName&#125;</span></span><br><span class="line"><span class="string">                return_status=0</span></span><br><span class="line"><span class="string">                git clone -b master ssh://git@git.your-company.com:7999/~xshen/$&#123;repoName&#125;.git</span></span><br><span class="line"><span class="string">                cd $&#123;repoName&#125;</span></span><br><span class="line"><span class="string">                git config user.name &quot;Sync Bot&quot;</span></span><br><span class="line"><span class="string">                git config user.email &quot;bot@your-company.com&quot;</span></span><br><span class="line"><span class="string">                git remote add github git@github.com:shenxianpeng/$&#123;repoName&#125;.git</span></span><br><span class="line"><span class="string">                git push -u github master</span></span><br><span class="line"><span class="string">                return_status=&quot;\$?&quot;</span></span><br><span class="line"><span class="string">                if [ \$return_status -eq 0 ] ; then</span></span><br><span class="line"><span class="string">                  echo &quot;Synchronize $&#123;repoName&#125; from Bitbucket to GitHub success.&quot;</span></span><br><span class="line"><span class="string">                  cd ..</span></span><br><span class="line"><span class="string">                  rm -rf $&#123;repoName&#125;</span></span><br><span class="line"><span class="string">                  exit 0</span></span><br><span class="line"><span class="string">                else</span></span><br><span class="line"><span class="string">                  echo &quot;Synchronize $&#123;repoName&#125; from Bitbucket to GitHub failed.&quot;</span></span><br><span class="line"><span class="string">                  exit 1</span></span><br><span class="line"><span class="string">                fi&quot;&quot;&quot;</span></span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                echo <span class="string">&quot;$&#123;repoName&#125; parameter value is $value, skip it.&quot;</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cleanWs()</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            echo <span class="string">&quot;Some error occurs during synchronizing $key process.&quot;</span></span><br><span class="line">          &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            email.Send(currentBuild.currentResult, env.CHANGE_AUTHOR_EMAIL)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„ <code>Jenkinsfile</code> çš„ä¸»è¦å…³é”®ç‚¹æ˜¯è¿™å¥ <code>params.each &#123; key, value -&gt;  &#125;</code>ï¼Œå¯ä»¥é€šè¿‡å¯¹æ„å»ºæ—¶é€‰æ‹©å‚æ•°çš„è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ„å»ºæ—¶å‚æ•°å·²å‹¾é€‰ï¼Œåˆ™ä¼šæ‰§è¡ŒåŒæ­¥è„šæœ¬ï¼›å¦åˆ™è·³è¿‡åŒæ­¥è„šæœ¬ï¼Œå¾ªç¯åˆ°ä¸‹ä¸€ä¸ªå‚æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè¿™æ ·å°±å®ç°äº†å¯ä»¥å¯¹æŒ‡å®šä»“åº“è¿›è¡ŒåŒæ­¥ã€‚</p><hr><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Recently our team need to share code from internal Bitbucket to external GitHub. I know GitHub can create private and public repository, but we have these points want to keep.</p><ul><li>only share the code what we want to share</li><li>not change current work process, continue use Bitbucket.</li></ul><p>So we have created corresponding repositories in the internal Bitbucket, and the master branches of these repositories will periodically synchronize with the master branches of corresponding repositories on GitHub via Jenkins job.</p><h2 id="Branch-Strategy"><a href="#Branch-Strategy" class="headerlink" title="Branch Strategy"></a>Branch Strategy</h2><p>Then the work process will be like</p><ol><li><p>Create a feature or bugfix branch (it depends on the purpose of your modification).</p></li><li><p>Commit changes to your feature&#x2F;bugfix branch.</p></li><li><p>Please pass your feature&#x2F;bugfix branch test first then create a Pull Request from your branch to master branch, at least one reviewer is required by default.</p></li><li><p>After the reviewer approved, you or reviewer could merge the Pull Request, then the changes will be added to the master branch.</p></li></ol><p>Timing trigger CI job will sync code from internal repositories master branch to GitHub master branch by default. also support manual trigger.</p><p><img src="/2020/05/sync-from-bitbucket-to-github/branch-strategy.png" alt="Branch Strategy"></p><h2 id="Jenkins-Job"><a href="#Jenkins-Job" class="headerlink" title="Jenkins Job"></a>Jenkins Job</h2><p>Base on this work is not very frequency, so I want make the Jenkins job simple and easy to maintain, so I donâ€™t create every <code>Jenkinsfile</code> for every Bitbucket repositories.</p><p>Pros</p><ul><li>Only one <code>Jenkinsfile</code> for all Bitbucket repositories.</li><li>Less duplicate code, less need to change when maintenance.</li><li>Donâ€™t need to add <code>Jenkinsfile</code> into very Bitbucket repositories.</li></ul><p>Cons</p><ul><li>Can not support SCM trigger, in my view this need add <code>Jenkinsfile</code> into repository.</li></ul><p>The main part for this <code>Jenkinsfile</code> is below, use this function <code>params.each &#123; key, value -&gt; &#125;</code> can by passing in parameters when start Jenkins build.</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Bitbucket </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins ä¸ Bitbucket Webhooks çš„é…ç½®å’Œä½¿ç”¨</title>
      <link href="/2020/04/bitbucket-webhooks-cn/"/>
      <url>/2020/04/bitbucket-webhooks-cn/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>Jenkins çš„ multi-branch pipeline æƒ³å¿…å¾ˆå¤šäººå·²ç»åœ¨ç”¨äº†ï¼Œä½¿ç”¨è¿™ç§ç±»å‹çš„ Jenkins Job æœ€æ˜¾è‘—çš„ä½œç”¨å°±æ˜¯å¯ä»¥å¯¹ Git ä»“åº“é‡Œçš„ä»»ä½•åˆ†æ”¯å’Œä»»ä½• Pull Requestï¼ˆä»¥ä¸‹ç®€å†™ä¸º PRï¼‰è¿›è¡Œæ„å»ºã€‚</p><p>åœ¨åš Jenkins ä¸ Bitbucket çš„é›†æˆæ—¶ï¼Œéœ€è¦å®‰è£…æ’ä»¶ï¼šBitbucket Branch Sourceï¼Œå¯ä»¥é€šè¿‡è¯¥æ’ä»¶åœ¨ Jenkins é‡Œè¿›è¡Œ webhook çš„é…ç½®ã€‚è¿™ç§æ–¹å¼å¯¹äºæ²¡æœ‰ Bitbucket ä»“åº“çš„ç®¡ç†æƒé™ï¼ŒCI&#x2F;CD æš‚ä¸”å¤„äºå˜æ›´æ¯”è¾ƒé¢‘ç¹çš„é˜¶æ®µï¼Œä¸æƒ³éº»çƒ¦çš„å»ç”³è¯·æ·»åŠ  webhook çš„åŒå­¦æ¥è¯´æ˜¯éå¸¸å‹å¥½çš„ï¼Œå°±æ˜¯å¯ä»¥ä¸ç”¨é€šè¿‡ç®¡ç†å‘˜åœ¨ Bitbucket è®¾ç½®é‡Œæ·»åŠ  webhook ä¹Ÿå¯ä»¥å®ç°åˆ›å»º PR åè§¦å‘ Jenkins æ„å»ºã€‚</p><p>ä½†æˆ‘æœ€è¿‘é­é‡äº†ä¸¤æ¬¡ï¼šåœ¨åˆ›å»º PR åæ²¡æœ‰è§¦å‘ Jenkins è‡ªåŠ¨æ„å»ºï¼ŒæŸ¥äº† Jenkins å’Œ Bitbucket Branch Source æ’ä»¶çš„é…ç½®ï¼Œå¹¶æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ï¼Œä¹Ÿå„ç§ Google ä¹‹åä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„è§£å†³åŠæ³•ï¼ˆå¦‚æœæœ‰é‡åˆ°æ­¤æƒ…å†µçš„å°ä¼™ä¼´æ¬¢è¿ä¸€èµ·äº¤æµï¼‰ã€‚</p><p>é‚£æ—¢ç„¶è¿™æ¡è·¯ä¸ç¨³å®šï¼Œä¸å¥½èµ°ï¼Œé‚£å°±èµ°ä¸€æ¡å¯ä»¥èµ°é€šçš„è·¯ã€ç›´æ¥çš„ç¡¬è·¯ï¼Œå³åœ¨ Bitbucket å¯¹åº”çš„ä»“åº“ä¸­æ·»åŠ  webhooksã€‚</p><span id="more"></span><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>é€šè¿‡è®¾ç½® Webhook äº‹ä»¶ï¼Œå¯ä»¥ç›‘å¬ git pushï¼Œåˆ›å»º Pull Request ç­‰äº‹ä»¶ï¼Œåœ¨è¿™äº›äº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘ Jenkins æ‰«æï¼Œä»è€Œ Jenkins å¯ä»¥è·å–åˆ°æœ€æ–°çš„åˆ›å»ºï¼ˆæˆ–åˆ é™¤ï¼‰çš„åˆ†æ”¯ï¼ˆæˆ–Pull Requestï¼‰ï¼Œä»è€Œè‡ªåŠ¨æ„å»ºJenkins Jobã€‚</p><p><img src="/2020/04/bitbucket-webhooks-cn/scan-multibranch.png" alt="æ‰«æ Multibranch Pipeline"></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åœ¨ç”³è¯·æ·»åŠ  webhooks ä¹‹å‰ï¼Œæˆ‘å…ˆåœ¨ä¸ªäººçš„ç§äººä»“åº“ä¸‹ï¼Œåˆ›å»ºäº†æµ‹è¯•ä»“åº“å¯¹ webhook è¿›è¡Œäº†æµ‹è¯•ï¼Œåœ¨ç»è¿‡åå¤çš„æµ‹è¯•ï¼Œè§‰å¾—æ²¡æœ‰é—®é¢˜åï¼Œå°†ç›¸åº”çš„é…ç½®é€šè¿‡ç®¡ç†å‘˜æ·»åŠ åˆ°å¯¹åº”çš„ Repository ä¸­ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š</p><ul><li>Webhook name: test-multibranch</li><li>Webhook URL: <a href="http://localhost:8080/multibranch-webhook-trigger/invoke?token=test-multibranch">http://localhost:8080/multibranch-webhook-trigger/invoke?token=test-multibranch</a></li><li>Test connection: è¿”å› 200, è¿æ¥æµ‹è¯•é€šè¿‡ã€‚</li><li>Events:<ul><li>Repository: Push</li><li>Pull Request: Opened, Merged, Declined, Deleted.</li></ul></li><li>Active: enable</li></ul><p>æ”¾ä¸¤å¼ æˆªå›¾æ–¹ä¾¿å‚è€ƒ</p><p>Bitbucket webhooks è®¾ç½®</p><p><img src="/2020/04/bitbucket-webhooks-cn/webhook-setting.png" alt="Bitbucket webhooks è®¾ç½®"></p><p>Jenkins multi-branch pipeline è®¾ç½®</p><p><img src="/2020/04/bitbucket-webhooks-cn/jenkins-setting.png" alt="Jenkins multi-branch pipeline è®¾ç½®"></p><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>é€šè¿‡ä»¥ä¸Šçš„è®¾ç½®ï¼Œå¼€å‘äººå‘˜åœ¨æ¯æ¬¡åˆ›å»º PR éƒ½ä¼šç«‹å³è§¦å‘ Jenkins æ„å»ºï¼Œæ˜¾è‘—çš„å˜åŒ–æœ‰ä¸¤ä¸ªï¼š</p><ul><li>æ¯”ä»¥å‰ä¾èµ–æ’ä»¶å“åº”é€Ÿåº¦è¦å¿«å¾ˆå¤šï¼Œä¹‹å‰çš„å“åº”é€Ÿåº¦ä¸€èˆ¬åœ¨ 1~2 åˆ†æ”¯æ‰èƒ½è§¦å‘æ„å»º</li><li>ç¨³å®šç¨‹åº¦å¤§å¤§æé«˜ï¼Œç›®å‰ä¸ºæ­¢æ²¡æœ‰å†å‡ºç°åˆ›å»º PR ä¹‹åæ²¡æœ‰è§¦å‘ Jenkins æ„å»ºçš„æƒ…å†µ</li></ul><p>æœ€ç»ˆçš„ä¸ Jenkins çš„é›†æˆæ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å½“åˆ›å»º (Opened) ä¸€ä¸ª Pull Request æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨ Jenkins ä¸Šåˆ›å»ºç›¸åº”çš„ Pull Request ä»»åŠ¡ï¼ˆæ¯”å¦‚ PR-123ï¼‰å¹¶å¼€å§‹æ„å»ºã€‚</li><li>å½“åˆå¹¶ (Merged) è¿™ä¸ª Pull Request æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ Jenkins ä¸­çš„ PR-123 ä»»åŠ¡ã€‚</li><li>å½“æ‹’ç» (Declined) è¿™ä¸ª Pull Request æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ Jenkins ä¸­çš„ PR-123 ä»»åŠ¡ã€‚</li><li>å½“åˆ é™¤ (Deleted) è¿™ä¸ª Pull Request æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ Jenkins ä¸­çš„ PR-123 ä»»åŠ¡ã€‚</li></ul><p>å·²ç» Merge çš„åˆ†æ”¯ï¼Œä¼šæ˜¾ç¤ºå·²ç»åˆ’æ‰äº†ï¼Œç°è‰²çš„ï¼Œè¿™ç§åˆ†æ”¯ä¸å¯ä»¥å†è¿›è¡Œæ‰§è¡Œæ„å»ºï¼›è€Œ <code>develop</code> å’Œ <code>master</code> åˆ†æ”¯åˆ™å¯ä»¥ç»§ç»­æ‰‹åŠ¨æˆ–è‡ªåŠ¨æ„å»ºã€‚</p><p><img src="/2020/04/bitbucket-webhooks-cn/multi-branch.png" alt="Jenkins multi-branch pipeline è®¾ç½®"></p><p>å·²ç» Merge äº†çš„ Pull Request åŒæ ·æ˜¾ç¤ºä¸ºå·²ç»åˆ’æ‰äº†ï¼Œç°è‰²çš„ã€‚<code>PR-12</code>, <code>PR-13</code>, <code>PR-14</code> å¯ä»¥ç»§ç»­æ‰‹åŠ¨æˆ–è‡ªåŠ¨æ„å»ºã€‚</p><p><img src="/2020/04/bitbucket-webhooks-cn/multi-pr.png" alt="Jenkins multi-branch pipeline è®¾ç½®"></p><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p>è¿™é‡Œè¯´ä¸€ä¸‹æˆ‘ä¸ºä»€ä¹ˆæ²¡æœ‰æ·»åŠ  Modified äº‹ä»¶ã€‚æ­¤å‰æˆ‘æ˜¯æ·»åŠ äº† Modified äº‹ä»¶ï¼Œæˆ‘å‘ç°ä¸€äº›å¤„äºå¾…åˆå¹¶çš„åˆ†æ”¯ä¸çŸ¥ä¸è§‰è¢« webhook è§¦å‘äº†å¾ˆå¤šæ¬¡ï¼Œç”±äºæˆ‘ä»¬çš„å…¨å¹³å°æ„å»ºã€æ‰«æã€ä»¥åŠæµ‹è¯•éœ€è¦è‡³å°‘ 2~3 å°æ—¶çš„æ—¶é—´ï¼Œå½“å¤„äºå¾…åˆå¹¶çš„ Pull Request è¿‡å¤šæ—¶ï¼Œå¯¹æ„å»ºèµ„æºçš„å ç”¨å¯èƒ½ä¼šæ˜¯å…¨å¤©çš„ã€‚</p><p>æˆ‘æƒ³åº”è¯¥æ˜¯å…¶ä¸­çš„å“ªä¸ªäº‹ä»¶çš„ç‰¹æ€§æ‰€å¯¼è‡´å¼•èµ·çš„ï¼Œæœä¸å…¶ç„¶ï¼Œè¿™æ—¶å€™æ‰æ³¨æ„åˆ° Modified äº‹ä»¶çš„è¿™æ®µè§£é‡Šï¼šA pull requestâ€™s description, title, or target branch is changed. ä»è§£é‡Šé‡Œå¯ä»¥çœ‹åˆ° Modified äº‹ä»¶åŒ…å«ä¿®æ”¹ PR æè¿°ã€æ ‡é¢˜ã€è¿˜åŒ…æ‹¬äº†ç›®æ ‡åˆ†æ”¯çš„å˜æ›´éƒ½ä¼šè§¦å‘æ„å»ºã€‚</p><p>å…¶å®è¿™ä¸ª Modified äº‹ä»¶çš„è¿™ä¸ªç‰¹æ€§æœ¬èº«æ˜¯ç‰¹åˆ«å¥½çš„ï¼Œå¯ä»¥ä¸æ–­çš„å°†å·²ç»åˆå¹¶åˆ°ç›®æ ‡åˆ†æ”¯çš„ä»£ç æ‹‰å–åˆ°æºåˆ†æ”¯è¿›è¡Œæ„å»ºï¼Œä¿è¯æºåˆ†æ”¯çš„ä»£ç ä¸€ç›´æ˜¯ä¸æœ€æ–°çš„ä»£ç è¿›è¡Œé›†æˆã€æ„å»ºå’Œæµ‹è¯•ï¼Œè¿™æ ·é›†æˆçš„ç»“æœæ‰æ˜¯æœ€å‡†ç¡®å¯é çš„ã€‚ä½†åªæ˜¯ä¸é€‚åˆç›®å‰çš„æˆ‘ä»¬ï¼Œå› æ­¤æš‚ä¸”æ²¡æœ‰å¼€å¯ Modified äº‹ä»¶ã€‚</p><p>è¿™é‡Œæ²¡æœ‰æ·»åŠ å…¶ä»– webhook äº‹ä»¶ï¼Œæ¯”å¦‚å¯¹äºä¸»åˆ†æ”¯çš„è§¦å‘äº‹ä»¶ï¼Œè¿™ä¸ªå¯ä»¥æ ¹æ®å…·ä½“éœ€è¦è¿›è¡Œæ·»åŠ ã€‚å¦‚æœä¸æ˜¯é‚£ä¹ˆé¢‘ç¹ï¼Œæ¯æ—¥æ„å»ºæ»¡è¶³éœ€æ±‚ï¼Œé‚£ä¹ˆåœ¨ <code>Pipeline</code> é‡Œæ·»åŠ ä¸€ä¸ª <code>trigger</code> å°±å¯ä»¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Bitbucket </tag>
            
            <tag> Webhook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bitbucket Webhooks Configuration</title>
      <link href="/2020/04/bitbucket-webhooks/"/>
      <url>/2020/04/bitbucket-webhooks/</url>
      
        <content type="html"><![CDATA[<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>I have set several multi-branch pipeline and it can support Bitbucket Pull Request build. So, when developer create a Pull Request on Bitbucket, Jenkins can auto-trigger PR build. but this jenkins-plugin may not very stable, it had not work two times and I actually donâ€™t know why it does that. But I know the use Git webhook is a direct and hard approach could solve this problem. After my test, the answer is yes. it works as expect.</p><span id="more"></span><h2 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h2><p>By setting Webhook events, you can listen for git push, create Pull requests and other events, and automatically trigger Jenkins scan when these events occur, so that Jenkins can get the latest branch (or Pull Request) created (or deleted), and automatically build Jenkins Job.</p><p><img src="/2020/04/bitbucket-webhooks/scan-multibranch.png" alt="Scan Multibranch Pipeline"></p><h2 id="Setting"><a href="#Setting" class="headerlink" title="Setting"></a>Setting</h2><ul><li>Webhook name: test-multibranch</li><li>Webhook URL: <a href="http://localhost:8080/multibranch-webhook-trigger/invoke?token=test-multibranch">http://localhost:8080/multibranch-webhook-trigger/invoke?token=test-multibranch</a></li><li>Test connection: 200(green), it passed.</li><li>Events:<ul><li>Repository: N&#x2F;A</li><li>Pull Request: Opened, Merged, Declined, Deleted.</li></ul></li><li>Active: enable</li></ul><p>Here is setting screenshots.</p><p><img src="/2020/04/bitbucket-webhooks/webhook-setting.png" alt="Bitbucket webhooks setting"></p><p><img src="/2020/04/bitbucket-webhooks/jenkins-setting.png" alt="Jenkins multi-branch pipeline setting"></p><p>At first, I also enable Modified event, but I found when there is new merged commits into our develop branch(this is our PR target branch), the holding Pull Request will be triggered and merge develop branch back to source branch then re-build.</p><p>Then I notice the Modified description: A pull requestâ€™s description, title, or target branch is changed.</p><p>This is a nice feature to make sure the source code integrate with target branch and build passed, but  this is too frequent for our product builds, because our product pull request build on some Unix platform need almost 3 hours, if has 5 Pull Requests waiting to review, when new commits into develop branch, these 5 PR need to rebuild again, this takes up all the build machines, resulting in those that need to be built not getting the resources.</p><p>After enable above Pull Request event and have these functions.</p><ul><li>when open a new Pull Request on Bitbucket, auto create Pull Request branch and build in Jenkins.</li><li>when merge the Pull Request Bitbucket, auto delete Pull Request branch in Jenkins.</li><li>when decline the Pull Request Bitbucket, auto delete Pull Request branch in Jenkins.</li><li>when delete the Pull Request Bitbucket, auto delete Pull Request branch in Jenkins.</li></ul><p>For other specific branches build my Jenkins job support manually build and timing trigger, so this event settings currently good to me.</p><p>If there is new settings need to add, I will keep update this article in the future.</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bitbucket </tag>
            
            <tag> Webhook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰ç§æ–¹æ³•è§£å†³ Jenkins å£°æ˜å¼æµæ°´çº¿ Exception Method code too large !</title>
      <link href="/2020/04/jenkins-troubleshooting/"/>
      <url>/2020/04/jenkins-troubleshooting/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡åœ¨ä½¿ç”¨ Jenkins å£°æ˜å¼æµæ°´çº¿çš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€æ¬¡é‡åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™æ˜¯åœ¨ä¸€ä¸ª Pipeline é‡Œå¤§æ¦‚å†™åˆ° 600 å¤šè¡Œæ—¶å€™é‡åˆ°å¦‚ä¸‹é”™è¯¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:</span><br><span class="line">General error during <span class="keyword">class</span> <span class="title class_">generation</span>: Method code too large!</span><br><span class="line"></span><br><span class="line">java.lang.RuntimeException: Method code too large!</span><br><span class="line">at groovyjarjarasm.asm.MethodWriter.a(Unknown Source)</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure><span id="more"></span><p>å½“æ—¶æˆ‘ä¹Ÿä½¿ç”¨äº† Jenkins Shared Librariesï¼Œä½†é‚£æ—¶å€™çš„ä»£ç ç»„ç»‡çš„å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰ä¸å°‘æ­¥éª¤è¿˜æ²¡æ¥å¾—åŠå•ç‹¬æŠ½ç¦»å‡ºæ¥ä½œä¸ºå•ç‹¬çš„æ–¹æ³•ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»è¿‡ä¸€ç•ªé‡æ„ï¼Œæˆ‘å°†åŸæ¥çš„ 600 å¤šè¡Œçš„ Pipeline å˜æˆäº†ç°åœ¨çš„ 300 å¤šè¡Œï¼Œå¾ˆä¸å·§ï¼Œéšç€ç»§ç»­æ·»åŠ åŠŸèƒ½ï¼Œæœ€è¿‘åˆé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ Jenkins å°†æ•´ä¸ªå£°æ˜æ€§ç®¡é“æ”¾å…¥å•ä¸ªæ–¹æ³•ä¸­ï¼Œå¹¶ä¸”åœ¨ä¸€å®šå¤§å°ä¸‹ï¼ŒJVM å›  java.lang .RuntimeException å¤±è´¥ï¼šæ–¹æ³•ä»£ç å¤ªå¤§ï¼çœ‹æ¥æˆ‘è¿˜æ˜¯æœ‰ä»€ä¹ˆæ–¹æ³•è¶…è¿‡äº† 64kã€‚</p><p>Jenkins JIRA ä¸Šå·²ç»æœ‰äº†è¯¥é—®é¢˜çš„å•å­ï¼Œä½†ç›®å‰ä¸ºæ­¢è¿˜æ˜¯å°šæœªè§£å†³ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ç›®å‰æœ‰ä¸‰ç§æ–¹æ¡ˆï¼Œä½†ä»–ä»¬éƒ½æœ‰å„è‡ªçš„åˆ©å¼Šã€‚</p><h2 id="æ–¹æ³•1ï¼šå°†æ­¥éª¤æ”¾åˆ°ç®¡é“å¤–çš„æ–¹æ³•ä¸­"><a href="#æ–¹æ³•1ï¼šå°†æ­¥éª¤æ”¾åˆ°ç®¡é“å¤–çš„æ–¹æ³•ä¸­" class="headerlink" title="æ–¹æ³•1ï¼šå°†æ­¥éª¤æ”¾åˆ°ç®¡é“å¤–çš„æ–¹æ³•ä¸­"></a>æ–¹æ³•1ï¼šå°†æ­¥éª¤æ”¾åˆ°ç®¡é“å¤–çš„æ–¹æ³•ä¸­</h2><p>è‡ª2017å¹´ä¸­ä»¥æ¥ï¼Œä½ å¯ä»¥åœ¨ç®¡é“çš„æœ«å°¾å£°æ˜ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶ååœ¨å£°æ˜æ€§ç®¡é“ä¸­è°ƒç”¨å®ƒå³å¯ã€‚ è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è¾¾åˆ°ä¸å…±äº«åº“ç›¸åŒçš„æ•ˆæœï¼Œä½†æ˜¯é¿å…äº†ç»´æŠ¤å¼€é”€ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent any</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(&#x27;Test&#x27;) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                whateverFunction()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void whateverFunction() &#123;</span><br><span class="line">    sh &#x27;ls /&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>æ²¡æœ‰é¢å¤–çš„ç»´æŠ¤è´¹ç”¨</td><td>è¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸çŸ¥é“ä¼šä¸ä¼šä¸€ç›´æœ‰æ•ˆ</td></tr><tr><td>æ‰€æœ‰çš„åŠŸèƒ½éƒ½åæ˜ åœ¨Jenkinsfileä¸­</td><td>æœ‰çš„æ–¹æ³•åœ¨å¤šä¸ªJenkinsfileé‡Œç”¨åˆ°æ—¶ï¼Œè¿™ç§æ–¹æ³•è¿˜æ˜¯ä¼šå†™å¾ˆå¤šé‡å¤çš„ä»£ç </td></tr></tbody></table><h2 id="æ–¹æ³•2ï¼šä»å£°æ˜å¼è¿ç§»åˆ°è„šæœ¬å¼ç®¡é“"><a href="#æ–¹æ³•2ï¼šä»å£°æ˜å¼è¿ç§»åˆ°è„šæœ¬å¼ç®¡é“" class="headerlink" title="æ–¹æ³•2ï¼šä»å£°æ˜å¼è¿ç§»åˆ°è„šæœ¬å¼ç®¡é“"></a>æ–¹æ³•2ï¼šä»å£°æ˜å¼è¿ç§»åˆ°è„šæœ¬å¼ç®¡é“</h2><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥è¿ç§»åˆ°è„šæœ¬åŒ–çš„ç®¡é“ã€‚æœ‰äº†å®ƒï¼Œæˆ‘ä»¬å°±æœ‰äº†æ‰€æœ‰çš„è‡ªç”±ã€‚ä½†æ˜¯ä¹Ÿå°±ä¼šå¤±å»æˆ‘ä»¬æœ€åˆå†³å®šä½¿ç”¨å£°æ˜å¼ç®¡é“çš„åŸå› ã€‚æœ‰äº†ä¸“ç”¨çš„DSLï¼Œå°±å¾ˆå®¹æ˜“ç†è§£ç®¡é“æ˜¯å¦‚ä½•å·¥ä½œçš„</p><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å®Œå…¨æ²¡æœ‰é™åˆ¶</td><td>éœ€è¦æ¯”è¾ƒå¤§çš„é‡æ„</td></tr><tr><td></td><td>æ›´å®¹æ˜“å‡ºé”™</td></tr><tr><td></td><td>å¯èƒ½éœ€è¦æ›´å¤šçš„ä»£ç æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½</td></tr></tbody></table><h2 id="æ–¹æ³•3ï¼šä½¿ç”¨-Shared-Libraries"><a href="#æ–¹æ³•3ï¼šä½¿ç”¨-Shared-Libraries" class="headerlink" title="æ–¹æ³•3ï¼šä½¿ç”¨ Shared Libraries"></a>æ–¹æ³•3ï¼šä½¿ç”¨ Shared Libraries</h2><p>æˆ‘å½“å‰ä½¿ç”¨çš„å°±æ˜¯ Jenkins Shared Librariesï¼Œæœ‰ä¸€ä¸ªå…±äº«åº“æ¥æ‰§è¡Œä¸€äº›å¤æ‚çš„æ­¥éª¤ã€‚å…±äº«åº“ç›®å‰çœ‹æ¥ä½¿ç”¨çš„éå¸¸å¹¿æ³›ï¼Œå°¤å…¶æ˜¯åœ¨ç»´æŠ¤ä¸€äº›æ¯”è¾ƒå¤§å‹çš„ã€å¤æ‚çš„é¡¹ç›®é‡Œç”¨çš„å¾ˆå¤šã€‚</p><p>æœ€ç»ˆæˆ‘çš„è§£å†³åŠæ³•æ˜¯è¿›ä¸€æ­¥ç¼©å‡ Pipeline é‡Œçš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä¹Ÿç”¨åˆ° æ–¹æ³•1 çš„è§£å†³æ–¹æ¡ˆï¼Œå°†ä¸€äº›æ­¥éª¤æåˆ° Pipeline {} æ‹¬å·çš„å¤–é¢ï¼Œå°¤å…¶æ˜¯é‚£äº›é‡å¤è°ƒç”¨çš„â€‹æ­¥éª¤ã€‚â€‹</p><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å‡å°‘äº†å¤§é‡é‡å¤çš„ä»£ç </td><td>ä»»ä½•ä¸€ä¸ªä¿®æ”¹éƒ½ä¼šå½±å“åˆ°æ‰€æœ‰çš„å¼•ç”¨ï¼Œè¦æµ‹è¯•å¥½äº†å†å°†å˜æ›´æ”¾åˆ°å¼•ç”¨åˆ†æ”¯é‡Œ</td></tr><tr><td>å¯ä»¥åˆ†å—ä½¿ç”¨</td><td>ä¸ç†Ÿæ‚‰çš„è¯å¾ˆéš¾ç†è§£ä¸€ä¸ªæ­¥éª¤åˆ°åº•æ˜¯åšä»€ä¹ˆçš„</td></tr><tr><td>ç”Ÿæˆçš„Jenkinsfileå°†æ˜“äºé˜…è¯»</td><td></td></tr></tbody></table><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>æ–¹æ³•1ï¼šå¯¹äºå•ä¸€çš„ Repository çš„é›†æˆï¼Œå¯ä»¥å¿«é€Ÿå®ç°ï¼Œå¤§å¤šæ•°äººä¸Šæ‰‹ä¼šå¾ˆå¿«ã€‚<br>æ–¹æ³•2ï¼šè„šæœ¬åŒ–æä¾›äº†å¾ˆå°‘çš„é™åˆ¶ï¼Œé€‚åˆç†Ÿæ‚‰ Javaï¼ŒGroovy çš„é«˜çº§ç”¨æˆ·å’Œæœ‰æ›´å¤æ‚éœ€æ±‚çš„äººä½¿ç”¨ã€‚<br>æ–¹æ³•3ï¼šå¯¹äºä¼ä¸šçº§é¡¹ç›®ï¼Œæ‹¥æœ‰å¾ˆå¤š Repositoriesï¼Œéœ€è¦è¿›è¡Œå¤§é‡é›†æˆï¼Œå¹¶ä¸”æƒ³äº†è§£å…±äº«åº“ï¼Œæ¨èä½¿ç”¨æ­¤æ–¹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pipeline </tag>
            
            <tag> Troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DevOps Top 30+ é¢è¯•é—®é¢˜</title>
      <link href="/2020/04/top-30-devops-interview-questions/"/>
      <url>/2020/04/top-30-devops-interview-questions/</url>
      
        <content type="html"><![CDATA[<h2 id="DevOpsæœ¯è¯­å’Œå®šä¹‰"><a href="#DevOpsæœ¯è¯­å’Œå®šä¹‰" class="headerlink" title="DevOpsæœ¯è¯­å’Œå®šä¹‰"></a>DevOpsæœ¯è¯­å’Œå®šä¹‰</h2><ol><li><p>ä»€ä¹ˆæ˜¯DevOps</p><p> ç”¨æœ€ç®€å•çš„æœ¯è¯­æ¥è¯´ï¼ŒDevOpsæ˜¯äº§å“å¼€å‘è¿‡ç¨‹ä¸­å¼€å‘ï¼ˆDevï¼‰å’Œè¿è¥ï¼ˆOpsï¼‰å›¢é˜Ÿä¹‹é—´çš„ç°è‰²åŒºåŸŸã€‚ DevOpsæ˜¯ä¸€ç§åœ¨äº§å“å¼€å‘å‘¨æœŸä¸­å¼ºè°ƒæ²Ÿé€šï¼Œé›†æˆå’Œåä½œçš„æ–‡åŒ–ã€‚å› æ­¤ï¼Œå®ƒæ¶ˆé™¤äº†è½¯ä»¶å¼€å‘å›¢é˜Ÿå’Œè¿è¥å›¢é˜Ÿä¹‹é—´çš„å­¤å²›ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿå¿«é€Ÿï¼Œè¿ç»­åœ°é›†æˆå’Œéƒ¨ç½²äº§å“ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ</p><p> æŒç»­é›†æˆï¼ˆContinuous integrationï¼Œç¼©å†™ä¸º CIï¼‰æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µï¼Œå›¢é˜Ÿå¼€å‘æˆå‘˜ç»å¸¸é›†æˆä»–ä»¬çš„å·¥ä½œã€‚åˆ©ç”¨è‡ªåŠ¨æµ‹è¯•æ¥éªŒè¯å¹¶æ–­è¨€å…¶ä»£ç ä¸ä¼šä¸ç°æœ‰ä»£ç åº“äº§ç”Ÿå†²çªã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä»£ç æ›´æ”¹åº”è¯¥æ¯å¤©åœ¨CIå·¥å…·çš„å¸®åŠ©ä¸‹ï¼Œåœ¨æ¯æ¬¡æäº¤æ—¶è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºï¼ˆåŒ…æ‹¬ç¼–è¯‘ï¼Œå‘å¸ƒï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰ï¼Œä»è€Œå°½æ—©åœ°å‘ç°é›†æˆé”™è¯¯ï¼Œä»¥ç¡®ä¿åˆå¹¶çš„ä»£ç æ²¡æœ‰ç ´åä¸»åˆ†æ”¯ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯æŒç»­äº¤ä»˜</p></li></ol><span id="more"></span><pre><code>æŒç»­äº¤ä»˜ï¼ˆContinuous deliveryï¼Œç¼©å†™ä¸º CDï¼‰ä»¥åŠæŒç»­é›†æˆä¸ºäº¤ä»˜ä»£ç åŒ…æä¾›äº†å®Œæ•´çš„æµç¨‹ã€‚åœ¨æ­¤é˜¶æ®µï¼Œå°†ä½¿ç”¨è‡ªåŠ¨æ„å»ºå·¥å…·æ¥ç¼–è¯‘å·¥ä»¶ï¼Œå¹¶ä½¿å…¶å‡†å¤‡å¥½äº¤ä»˜ç»™æœ€ç»ˆç”¨æˆ·ã€‚å®ƒçš„ç›®æ ‡åœ¨äºè®©è½¯ä»¶çš„æ„å»ºã€æµ‹è¯•ä¸å‘å¸ƒå˜å¾—æ›´å¿«ä»¥åŠæ›´é¢‘ç¹ã€‚è¿™ç§æ–¹å¼å¯ä»¥å‡å°‘è½¯ä»¶å¼€å‘çš„æˆæœ¬ä¸æ—¶é—´ï¼Œå‡å°‘é£é™©ã€‚</code></pre><ol start="4"><li><p>ä»€ä¹ˆæ˜¯æŒç»­éƒ¨ç½²</p><p> æŒç»­éƒ¨ç½²ï¼ˆContinuous deploymentï¼‰é€šè¿‡é›†æˆæ–°çš„ä»£ç æ›´æ”¹å¹¶å°†å…¶è‡ªåŠ¨äº¤ä»˜åˆ°å‘å¸ƒåˆ†æ”¯ï¼Œä»è€Œå°†æŒç»­äº¤ä»˜æå‡åˆ°ä¸€ä¸ªæ–°çš„æ°´å¹³ã€‚ æ›´å…·ä½“åœ°è¯´ï¼Œä¸€æ—¦æ›´æ–°é€šè¿‡äº†ç”Ÿäº§æµç¨‹çš„æ‰€æœ‰é˜¶æ®µï¼Œä¾¿å°†å®ƒä»¬ç›´æ¥éƒ¨ç½²åˆ°æœ€ç»ˆç”¨æˆ·ï¼Œè€Œæ— éœ€äººå·¥å¹²é¢„ã€‚å› æ­¤ï¼Œè¦æˆåŠŸåˆ©ç”¨è¿ç»­éƒ¨ç½²ï¼Œè½¯ä»¶å·¥ä»¶å¿…é¡»å…ˆç»è¿‡ä¸¥æ ¼å»ºç«‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå·¥å…·ï¼Œç„¶åæ‰èƒ½éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯æŒç»­æµ‹è¯•åŠå…¶å¥½å¤„</p><p> è¿ç»­æµ‹è¯•æ˜¯ä¸€ç§åœ¨è½¯ä»¶äº¤ä»˜ç®¡é“ä¸­å°½æ—©ã€é€æ­¥å’Œé€‚å½“åœ°åº”ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•çš„å®è·µã€‚åœ¨å…¸å‹çš„CI&#x2F;CDå·¥ä½œæµç¨‹ä¸­ï¼Œå°†å°æ‰¹é‡å‘å¸ƒæ„å»ºã€‚å› æ­¤ï¼Œä¸ºæ¯ä¸ªäº¤ä»˜æ‰‹åŠ¨æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æ˜¯ä¸åˆ‡å®é™…çš„ã€‚è‡ªåŠ¨åŒ–çš„è¿ç»­æµ‹è¯•æ¶ˆé™¤äº†æ‰‹åŠ¨æ­¥éª¤ï¼Œå¹¶å°†å…¶è½¬å˜ä¸ºè‡ªåŠ¨åŒ–ä¾‹ç¨‹ï¼Œä»è€Œå‡å°‘äº†äººå·¥ã€‚å› æ­¤ï¼Œå¯¹äºDevOpsæ–‡åŒ–è€Œè¨€ï¼Œè‡ªåŠ¨è¿ç»­æµ‹è¯•è‡³å…³é‡è¦ã€‚</p><p> æŒç»­æµ‹è¯•çš„å¥½å¤„</p><ul><li>ç¡®ä¿æ„å»ºçš„è´¨é‡å’Œé€Ÿåº¦ã€‚</li><li>æ”¯æŒæ›´å¿«çš„è½¯ä»¶äº¤ä»˜å’ŒæŒç»­çš„åé¦ˆæœºåˆ¶ã€‚</li><li>ä¸€æ—¦ç³»ç»Ÿä¸­å‡ºç°é”™è¯¯ï¼Œè¯·ç«‹å³æ£€æµ‹ã€‚</li><li>é™ä½ä¸šåŠ¡é£é™©ã€‚ åœ¨æ½œåœ¨é—®é¢˜å˜æˆå®é™…é—®é¢˜ä¹‹å‰è¿›è¡Œè¯„ä¼°ã€‚</li></ul></li><li><p>ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶åŠå…¶ç”¨é€”ï¼Ÿ</p><p> ç‰ˆæœ¬æ§åˆ¶ï¼ˆæˆ–æºä»£ç æ§åˆ¶ï¼‰æ˜¯ä¸€ä¸ªå­˜å‚¨åº“ï¼Œæºä»£ç ä¸­çš„æ‰€æœ‰æ›´æ”¹éƒ½å§‹ç»ˆå­˜å‚¨åœ¨è¿™ä¸ªä»£ç ä»“åº“ä¸­ã€‚ç‰ˆæœ¬æ§ä»¶æä¾›äº†ä»£ç å¼€å‘çš„æ“ä½œå†å²è®°å½•ï¼Œè¿½è¸ªæ–‡ä»¶çš„å˜æ›´å†…å®¹ã€æ—¶é—´ã€äººç­‰ä¿¡æ¯å¿ å®åœ°äº†è®°å½•ä¸‹æ¥ã€‚ç‰ˆæœ¬æ§åˆ¶æ˜¯æŒç»­é›†æˆå’ŒæŒç»­æ„å»ºçš„æºå¤´ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯Gitï¼Ÿ</p><p> Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯è·Ÿè¸ªä»£ç å­˜å‚¨åº“ä¸­çš„æ›´æ”¹ã€‚åˆ©ç”¨GitHubæµï¼ŒGitå›´ç»•ç€ä¸€ä¸ªåŸºäºåˆ†æ”¯çš„å·¥ä½œæµï¼Œè¯¥å·¥ä½œæµéšç€å›¢é˜Ÿé¡¹ç›®çš„ä¸æ–­å‘å±•è€Œç®€åŒ–äº†å›¢é˜Ÿåä½œã€‚</p></li></ol><h2 id="å®æ–½DevOpsçš„åŸå› "><a href="#å®æ–½DevOpsçš„åŸå› " class="headerlink" title="å®æ–½DevOpsçš„åŸå› "></a>å®æ–½DevOpsçš„åŸå› </h2><ol start="8"><li><p>DevOpsä¸ºä»€ä¹ˆé‡è¦ï¼ŸDevOpså¦‚ä½•ä½¿å›¢é˜Ÿåœ¨è½¯ä»¶äº¤ä»˜æ–¹é¢å—ç›Šï¼Ÿ</p><p> åœ¨å½“ä»Šçš„æ•°å­—åŒ–ä¸–ç•Œä¸­ï¼Œç»„ç»‡å¿…é¡»é‡å¡‘å…¶äº§å“éƒ¨ç½²ç³»ç»Ÿï¼Œä½¿å…¶æ›´å¼ºå¤§ï¼Œæ›´çµæ´»ï¼Œä»¥è·Ÿä¸Šç«äº‰çš„æ­¥ä¼ã€‚</p><p> è¿™å°±æ˜¯DevOpsæ¦‚å¿µå‡ºç°çš„åœ°æ–¹ã€‚DevOpsåœ¨ä¸ºæ•´ä¸ªè½¯ä»¶å¼€å‘ç®¡é“ï¼ˆä»æ„æ€åˆ°éƒ¨ç½²ï¼Œå†åˆ°æœ€ç»ˆç”¨æˆ·ï¼‰äº§ç”Ÿç§»åŠ¨æ€§å’Œæ•æ·æ€§æ–¹é¢å‘æŒ¥ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚DevOpsæ˜¯å°†ä¸æ–­æ›´æ–°å’Œæ”¹è¿›äº§å“çš„æ›´ç®€åŒ–ï¼Œæ›´é«˜æ•ˆçš„æµç¨‹æ•´åˆåœ¨ä¸€èµ·çš„è§£å†³æ–¹æ¡ˆã€‚</p></li><li><p>è§£é‡ŠDevOpså¯¹å¼€å‘äººå‘˜æœ‰ä½•å¸®åŠ©</p><p> åœ¨æ²¡æœ‰DevOpsçš„ä¸–ç•Œä¸­ï¼Œå¼€å‘äººå‘˜çš„å·¥ä½œæµç¨‹å°†é¦–å…ˆå»ºç«‹æ–°ä»£ç ï¼Œäº¤ä»˜å¹¶é›†æˆå®ƒä»¬ï¼Œç„¶åï¼Œæ“ä½œå›¢é˜Ÿæœ‰è´£ä»»æ‰“åŒ…å’Œéƒ¨ç½²ä»£ç ã€‚ä¹‹åï¼Œä»–ä»¬å°†ä¸å¾—ä¸ç­‰å¾…åé¦ˆã€‚è€Œä¸”å¦‚æœå‡ºç°é—®é¢˜ï¼Œç”±äºé”™è¯¯ï¼Œä»–ä»¬å°†ä¸å¾—ä¸é‡æ–°æ‰§è¡Œä¸€æ¬¡ã€‚æ²¿çº¿æ˜¯é¡¹ç›®ä¸­æ¶‰åŠçš„ä¸åŒå›¢é˜Ÿä¹‹é—´çš„æ— æ•°æ‰‹åŠ¨æ²Ÿé€šã€‚</p><p> ç”±äºCI&#x2F;CDå®è·µå·²ç»åˆå¹¶å¹¶è‡ªåŠ¨åŒ–äº†å…¶ä½™ä»»åŠ¡ï¼Œå› æ­¤åº”ç”¨DevOpså¯ä»¥å°†å¼€å‘äººå‘˜çš„ä»»åŠ¡ç®€åŒ–ä¸ºä»…æ„å»ºä»£ç ã€‚éšç€æµç¨‹å˜å¾—æ›´åŠ é€æ˜å¹¶ä¸”æ‰€æœ‰å›¢é˜Ÿæˆå‘˜éƒ½å¯ä»¥è®¿é—®ï¼Œå°†å·¥ç¨‹å›¢é˜Ÿå’Œè¿è¥å›¢é˜Ÿç›¸ç»“åˆæœ‰åŠ©äºå»ºç«‹æ›´å¥½çš„æ²Ÿé€šå’Œåä½œã€‚</p></li><li><p>ä¸ºä»€ä¹ˆDevOpsæœ€è¿‘åœ¨è½¯ä»¶äº¤ä»˜æ–¹é¢å˜å¾—è¶Šæ¥è¶Šæµè¡Œï¼Ÿ</p><p>DevOpsåœ¨è¿‡å»å‡ å¹´ä¸­å—åˆ°å…³æ³¨ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒèƒ½å¤Ÿç®€åŒ–ç»„ç»‡è¿è¥çš„å¼€å‘ï¼Œæµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºä¸šåŠ¡ä»·å€¼ã€‚</p><p>æŠ€æœ¯å‘å±•è¿…é€Ÿã€‚å› æ­¤ï¼Œç»„ç»‡å¿…é¡»é‡‡ç”¨ä¸€ç§æ–°çš„å·¥ä½œæµç¨‹-DevOpså’ŒAgileæ–¹æ³•-æ¥ç®€åŒ–å’Œåˆºæ¿€å…¶è¿è¥ï¼Œè€Œä¸èƒ½è½åäºå…¶ä»–å…¬å¸ã€‚DevOpsçš„åŠŸèƒ½é€šè¿‡Facebookå’ŒNetflixçš„æŒç»­éƒ¨ç½²æ–¹æ³•æ‰€å–å¾—çš„æˆåŠŸå¾—åˆ°äº†æ¸…æ™°ä½“ç°ï¼Œè¯¥æ–¹æ³•æˆåŠŸåœ°ä¿ƒè¿›äº†å…¶å¢é•¿ï¼Œè€Œæ²¡æœ‰ä¸­æ–­æ­£åœ¨è¿›è¡Œçš„è¿è¥ã€‚</p></li><li><p>CI&#x2F;CDæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><p>CIå’ŒCDçš„ç»“åˆå°†æ‰€æœ‰ä»£ç æ›´æ”¹ç»Ÿä¸€åˆ°ä¸€ä¸ªå•ä¸€çš„å­˜å‚¨åº“ä¸­ï¼Œå¹¶é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œå®ƒä»¬ï¼Œä»è€Œåœ¨æ‰€æœ‰é˜¶æ®µå…¨é¢å¼€å‘äº§å“ï¼Œå¹¶éšæ—¶å‡†å¤‡éƒ¨ç½²ã€‚</p><p>CI&#x2F;CDä½¿ç»„ç»‡èƒ½å¤ŸæŒ‰ç…§å®¢æˆ·æœŸæœ›çš„é‚£æ ·å¿«é€Ÿï¼Œé«˜æ•ˆå’Œè‡ªåŠ¨åœ°æ¨å‡ºäº§å“æ›´æ–°ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œç²¾å¿ƒè§„åˆ’å’Œæ‰§è¡Œè‰¯å¥½çš„CI&#x2F;CDç®¡é“å¯åŠ å¿«å‘å¸ƒé€Ÿåº¦å’Œå¯é æ€§ï¼ŒåŒæ—¶å‡è½»äº§å“çš„ä»£ç æ›´æ”¹å’Œç¼ºé™·ã€‚è¿™æœ€ç»ˆå°†å¯¼è‡´æ›´é«˜çš„å®¢æˆ·æ»¡æ„åº¦ã€‚</p></li><li><p>æŒç»­äº¤ä»˜æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><p>é€šè¿‡æ‰‹åŠ¨å‘å¸ƒä»£ç æ›´æ”¹ï¼Œå›¢é˜Ÿå¯ä»¥å®Œå…¨æ§åˆ¶äº§å“ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¯¥äº§å“çš„æ–°ç‰ˆæœ¬å°†æ›´æœ‰å¸Œæœ›ï¼šå…·æœ‰æ˜ç¡®ä¸šåŠ¡ç›®çš„çš„ä¿ƒé”€ç­–ç•¥ã€‚</p><p>é€šè¿‡è‡ªåŠ¨æ‰§è¡Œé‡å¤æ€§å’Œå¹³å‡¡çš„ä»»åŠ¡ï¼ŒITä¸“ä¸šäººå‘˜å¯ä»¥æ‹¥æœ‰æ›´å¤šçš„æ€è€ƒèƒ½åŠ›æ¥ä¸“æ³¨äºæ”¹è¿›äº§å“ï¼Œè€Œä¸å¿…æ‹…å¿ƒé›†æˆè¿›åº¦ã€‚</p></li><li><p>æŒç»­éƒ¨ç½²æœ‰å“ªäº›å¥½å¤„ï¼Ÿ</p><p>é€šè¿‡æŒç»­éƒ¨ç½²ï¼Œå¼€å‘äººå‘˜å¯ä»¥å®Œå…¨ä¸“æ³¨äºäº§å“ï¼Œå› ä¸ºä»–ä»¬åœ¨ç®¡é“ä¸­çš„æœ€åä»»åŠ¡æ˜¯å®¡æŸ¥æ‹‰å–è¯·æ±‚å¹¶å°†å…¶åˆå¹¶åˆ°åˆ†æ”¯ã€‚é€šè¿‡åœ¨è‡ªåŠ¨æµ‹è¯•åç«‹å³å‘å¸ƒæ–°åŠŸèƒ½å’Œä¿®å¤ï¼Œæ­¤æ–¹æ³•å¯å®ç°å¿«é€Ÿéƒ¨ç½²å¹¶ç¼©çŸ­éƒ¨ç½²æŒç»­æ—¶é—´ã€‚</p><p>å®¢æˆ·å°†æ˜¯è¯„ä¼°æ¯ä¸ªç‰ˆæœ¬è´¨é‡çš„äººã€‚æ–°ç‰ˆæœ¬çš„é”™è¯¯ä¿®å¤æ›´æ˜“äºå¤„ç†ï¼Œå› ä¸ºç°åœ¨æ¯ä¸ªç‰ˆæœ¬éƒ½ä»¥å°æ‰¹é‡äº¤ä»˜ã€‚</p></li></ol><h2 id="å¦‚ä½•æœ‰æ•ˆå®æ–½DevOps"><a href="#å¦‚ä½•æœ‰æ•ˆå®æ–½DevOps" class="headerlink" title="å¦‚ä½•æœ‰æ•ˆå®æ–½DevOps"></a>å¦‚ä½•æœ‰æ•ˆå®æ–½DevOps</h2><ol start="14"><li><p>å®šä¹‰å…¸å‹çš„DevOpså·¥ä½œæµç¨‹</p><p>å…¸å‹çš„DevOpså·¥ä½œæµç¨‹å¯ä»¥ç®€åŒ–ä¸º4ä¸ªé˜¶æ®µï¼š</p><ul><li>ç‰ˆæœ¬æ§åˆ¶ï¼šè¿™æ˜¯å­˜å‚¨å’Œç®¡ç†æºä»£ç çš„é˜¶æ®µã€‚ ç‰ˆæœ¬æ§ä»¶åŒ…å«ä»£ç çš„ä¸åŒç‰ˆæœ¬ã€‚</li><li>æŒç»­é›†æˆï¼šåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œå¼€å‘äººå‘˜å¼€å§‹æ„å»ºç»„ä»¶ï¼Œå¹¶å¯¹å…¶è¿›è¡Œç¼–è¯‘ï¼ŒéªŒè¯ï¼Œç„¶åé€šè¿‡ä»£ç å®¡æŸ¥ï¼Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¿›è¡Œæµ‹è¯•ã€‚</li><li>æŒç»­äº¤ä»˜ï¼šè¿™æ˜¯æŒç»­é›†æˆçš„ä¸‹ä¸€ä¸ªå±‚æ¬¡ï¼Œå…¶ä¸­å‘å¸ƒå’Œæµ‹è¯•è¿‡ç¨‹æ˜¯å®Œå…¨è‡ªåŠ¨åŒ–çš„ã€‚ CDç¡®ä¿å°†æ–°ç‰ˆæœ¬å¿«é€Ÿï¼Œå¯æŒç»­åœ°äº¤ä»˜ç»™æœ€ç»ˆç”¨æˆ·ã€‚</li><li>æŒç»­éƒ¨ç½²ï¼šåº”ç”¨ç¨‹åºæˆåŠŸé€šè¿‡æ‰€æœ‰æµ‹è¯•è¦æ±‚åï¼Œå°†è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ä¸Šä»¥è¿›è¡Œå‘å¸ƒï¼Œè€Œæ— éœ€ä»»ä½•äººå·¥å¹²é¢„ã€‚</li></ul></li><li><p>DevOpsçš„æ ¸å¿ƒæ“ä½œæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>DevOpsåœ¨å¼€å‘å’ŒåŸºç¡€æ¶æ„æ–¹é¢çš„æ ¸å¿ƒè¿è¥æ˜¯ï¼š</p><p>Software development:</p><ul><li>Code building</li><li>Code coverage</li><li>Unit testing</li><li>Packaging</li><li>Deployment</li></ul><p>Infrastructure:</p><ul><li>Provisioning</li><li>Configuration</li><li>Orchestration</li><li>Deployment</li></ul></li><li><p>åœ¨å®æ–½DevOpsä¹‹å‰ï¼Œå›¢é˜Ÿéœ€è¦è€ƒè™‘å“ªäº›é¢„é˜²æªæ–½ï¼Ÿ</p><p>å½“ç»„ç»‡å°è¯•åº”ç”¨è¿™ç§æ–°æ–¹æ³•æ—¶ï¼Œå¯¹DevOpsåšæ³•å­˜åœ¨ä¸€äº›è¯¯è§£ï¼Œæœ‰å¯èƒ½å¯¼è‡´æ‚²æƒ¨çš„å¤±è´¥ï¼š</p><ul><li>DevOpsä¸ä»…ä»…æ˜¯ç®€å•åœ°åº”ç”¨æ–°å·¥å…·å’Œ&#x2F;æˆ–ç»„å»ºæ–°çš„â€œéƒ¨é—¨â€å¹¶æœŸæœ›å®ƒèƒ½æ­£å¸¸å·¥ä½œã€‚å®é™…ä¸Šï¼ŒDevOpsè¢«è®¤ä¸ºæ˜¯ä¸€ç§æ–‡åŒ–ï¼Œå¼€å‘å›¢é˜Ÿå’Œè¿è¥å›¢é˜Ÿéµå¾ªå…±åŒçš„æ¡†æ¶ã€‚</li><li>ä¼ä¸šæ²¡æœ‰ä¸ºå…¶DevOpså®è·µå®šä¹‰æ¸…æ™°çš„æ„¿æ™¯ã€‚å¯¹å¼€å‘å›¢é˜Ÿå’Œè¿è¥å›¢é˜Ÿè€Œè¨€ï¼Œåº”ç”¨DevOpsè®¡åˆ’æ˜¯ä¸€é¡¹æ˜¾ç€çš„å˜åŒ–ã€‚å› æ­¤ï¼Œæ‹¥æœ‰æ˜ç¡®çš„è·¯çº¿å›¾ï¼Œå°†DevOpsé›†æˆåˆ°æ‚¨çš„ç»„ç»‡ä¸­çš„ç›®æ ‡å’ŒæœŸæœ›å°†æ¶ˆé™¤ä»»ä½•æ··ä¹±ï¼Œå¹¶ä»æ—©æœŸå°±æä¾›æ¸…æ™°çš„æŒ‡å¯¼æ–¹é’ˆã€‚</li><li>åœ¨æ•´ä¸ªç»„ç»‡ä¸­åº”ç”¨DevOpsåšæ³•ä¹‹åï¼Œç®¡ç†å›¢é˜Ÿéœ€è¦å»ºç«‹æŒç»­çš„å­¦ä¹ å’Œæ”¹è¿›æ–‡åŒ–ã€‚ç³»ç»Ÿä¸­çš„æ•…éšœå’Œé—®é¢˜åº”è¢«è§†ä¸ºå›¢é˜Ÿä»é”™è¯¯ä¸­å­¦ä¹ å¹¶é˜²æ­¢è¿™äº›é”™è¯¯å†æ¬¡å‘ç”Ÿçš„å®è´µåª’ä»‹ã€‚</li></ul></li><li><p>SCMå›¢é˜Ÿåœ¨DevOpsä¸­æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ</p><p>è½¯ä»¶é…ç½®ç®¡ç†ï¼ˆSCMï¼‰æ˜¯è·Ÿè¸ªå’Œä¿ç•™å¼€å‘ç¯å¢ƒè®°å½•çš„å®è·µï¼ŒåŒ…æ‹¬åœ¨æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œçš„æ‰€æœ‰æ›´æ”¹å’Œè°ƒæ•´ã€‚</p><p>åœ¨DevOpsä¸­ï¼Œå°†SCMä½œä¸ºä»£ç æ„å»ºåœ¨åŸºç¡€æ¶æ„å³ä»£ç å®è·µçš„ä¿æŠ¤ä¸‹ã€‚</p><p>SCMä¸ºå¼€å‘äººå‘˜ç®€åŒ–äº†ä»»åŠ¡ï¼Œå› ä¸ºä»–ä»¬ä¸å†éœ€è¦æ‰‹åŠ¨ç®¡ç†é…ç½®è¿‡ç¨‹ã€‚ ç°åœ¨ï¼Œæ­¤è¿‡ç¨‹ä»¥æœºå™¨å¯è¯»çš„å½¢å¼æ„å»ºï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å¤åˆ¶å’Œæ ‡å‡†åŒ–ã€‚</p></li><li><p>è´¨é‡ä¿è¯ï¼ˆQAï¼‰å›¢é˜Ÿåœ¨DevOpsä¸­æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ</p><p>éšç€DevOpså®è·µåœ¨åˆ›æ–°ç»„ç»‡ä¸­å˜å¾—è¶Šæ¥è¶Šå—æ¬¢è¿ï¼ŒQAå›¢é˜Ÿçš„èŒè´£å’Œç›¸å…³æ€§åœ¨å½“ä»Šçš„è‡ªåŠ¨åŒ–ä¸–ç•Œä¸­å·²æ˜¾ç¤ºå‡ºä¸‹é™çš„è¿¹è±¡ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™å¯ä»¥è¢«è®¤ä¸ºæ˜¯ç¥è¯ã€‚ DevOpsçš„å¢åŠ å¹¶ä¸ç­‰äºQAè§’è‰²çš„ç»“æŸã€‚ è¿™ä»…æ„å‘³ç€ä»–ä»¬çš„å·¥ä½œç¯å¢ƒå’Œæ‰€éœ€çš„ä¸“ä¸šçŸ¥è¯†æ­£åœ¨å‘ç”Ÿå˜åŒ–ã€‚ å› æ­¤ï¼Œä»–ä»¬çš„ä¸»è¦é‡ç‚¹æ˜¯ä¸“ä¸šå‘å±•ä»¥è·Ÿä¸Šè¿™ç§ä¸æ–­å˜åŒ–çš„è¶‹åŠ¿ã€‚</p><p>åœ¨DevOpsä¸­ï¼Œè´¨é‡ä¿è¯å›¢é˜Ÿåœ¨ç¡®ä¿è¿ç»­äº¤ä»˜å®è·µçš„ç¨³å®šæ€§ä»¥åŠæ‰§è¡Œè‡ªåŠ¨é‡å¤æ€§æµ‹è¯•æ— æ³•å®Œæˆçš„æ¢ç´¢æ€§æµ‹è¯•ä»»åŠ¡æ–¹é¢å‘æŒ¥æˆ˜ç•¥ä½œç”¨ã€‚ ä»–ä»¬åœ¨è¯„ä¼°æµ‹è¯•å’Œæ£€æµ‹æœ€æœ‰ä»·å€¼çš„æµ‹è¯•æ–¹é¢çš„è§è¯†ä»ç„¶åœ¨ç¼“è§£å‘å¸ƒçš„æœ€åæ­¥éª¤ä¸­çš„é”™è¯¯æ–¹é¢èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p></li><li><p>DevOpsä½¿ç”¨å“ªäº›å·¥å…·ï¼Ÿ æè¿°æ‚¨ä½¿ç”¨ä»»ä½•è¿™äº›å·¥å…·çš„ç»éªŒ</p><p>åœ¨å…¸å‹çš„DevOpsç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæœ‰ä¸åŒçš„å·¥å…·æ¥æ”¯æŒäº§å“å¼€å‘çš„ä¸åŒé˜¶æ®µã€‚ å› æ­¤ï¼Œç”¨äºDevOpsçš„æœ€å¸¸ç”¨å·¥å…·å¯ä»¥åˆ†ä¸º6ä¸ªå…³é”®é˜¶æ®µï¼š</p><p>æŒç»­å¼€å‘ï¼šGit, SVN, Mercurial, CVS, Jira<br>æŒç»­æ•´åˆï¼šJenkins, Bamboo, CircleCI<br>æŒç»­äº¤ä»˜ï¼šNexus, Archiva, Tomcat<br>æŒç»­éƒ¨ç½²ï¼šPuppet, Chef, Docker<br>æŒç»­ç›‘æ§ï¼šSplunk, ELK Stack, Nagios<br>è¿ç»­æµ‹è¯•ï¼šSeleniumï¼ŒKatalon Studio</p></li><li><p>å¦‚ä½•åœ¨DevOpså®è·µä¸­è¿›è¡Œå˜æ›´ç®¡ç†</p><p>å…¸å‹çš„å˜æ›´ç®¡ç†æ–¹æ³•éœ€è¦ä¸DevOpsçš„ç°ä»£å®è·µé€‚å½“é›†æˆã€‚ ç¬¬ä¸€æ­¥æ˜¯å°†å˜æ›´é›†ä¸­åˆ°ä¸€ä¸ªå¹³å°ä¸­ï¼Œä»¥ç®€åŒ–å˜æ›´ï¼Œé—®é¢˜å’Œäº‹ä»¶ç®¡ç†æµç¨‹ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä¼ä¸šåº”å»ºç«‹é«˜é€æ˜åº¦æ ‡å‡†ï¼Œä»¥ç¡®ä¿æ¯ä¸ªäººéƒ½åœ¨åŒä¸€é¡µé¢ä¸Šï¼Œå¹¶ç¡®ä¿å†…éƒ¨ä¿¡æ¯å’Œæ²Ÿé€šçš„å‡†ç¡®æ€§ã€‚</p><p>å¯¹å³å°†åˆ°æ¥çš„å˜æ›´è¿›è¡Œåˆ†å±‚å¹¶å»ºç«‹å¯é çš„ç­–ç•¥ï¼Œå°†æœ‰åŠ©äºæœ€å¤§ç¨‹åº¦åœ°é™ä½é£é™©å¹¶ç¼©çŸ­å˜æ›´å‘¨æœŸã€‚ æœ€åï¼Œç»„ç»‡åº”å°†è‡ªåŠ¨åŒ–åº”ç”¨åˆ°å…¶æµç¨‹ä¸­ï¼Œå¹¶ä¸DevOpsè½¯ä»¶é›†æˆã€‚</p></li></ol><h2 id="å¦‚ä½•æœ‰æ•ˆå®æ–½CI-CD"><a href="#å¦‚ä½•æœ‰æ•ˆå®æ–½CI-CD" class="headerlink" title="å¦‚ä½•æœ‰æ•ˆå®æ–½CI&#x2F;CD"></a>å¦‚ä½•æœ‰æ•ˆå®æ–½CI&#x2F;CD</h2><ol start="21"><li><p>CI&#x2F;CDçš„ä¸€äº›æ ¸å¿ƒç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ç¨³å®šçš„CI&#x2F;CDç®¡é“éœ€è¦ç”¨ä½œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å­˜å‚¨åº“ç®¡ç†å·¥å…·ã€‚ è¿™æ ·å¼€å‘äººå‘˜å°±å¯ä»¥è·Ÿè¸ªè½¯ä»¶ç‰ˆæœ¬ä¸­çš„æ›´æ”¹ã€‚</p><p>åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œå¼€å‘äººå‘˜è¿˜å¯ä»¥åœ¨é¡¹ç›®ä¸Šè¿›è¡Œåä½œï¼Œåœ¨ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œæ¯”è¾ƒå¹¶æ¶ˆé™¤ä»–ä»¬çŠ¯çš„ä»»ä½•é”™è¯¯ï¼Œä»è€Œå‡è½»å¯¹æ‰€æœ‰å›¢é˜Ÿæˆå‘˜çš„å¹²æ‰°ã€‚</p><p>è¿ç»­æµ‹è¯•å’Œè‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯æˆåŠŸå»ºç«‹æ— ç¼CI &#x2F; CDç®¡é“çš„ä¸¤ä¸ªæœ€å…³é”®çš„å…³é”®ã€‚ è‡ªåŠ¨åŒ–æµ‹è¯•å¿…é¡»é›†æˆåˆ°æ‰€æœ‰äº§å“å¼€å‘é˜¶æ®µï¼ˆåŒ…æ‹¬å•å…ƒæµ‹è¯•ï¼Œé›†æˆæµ‹è¯•å’Œç³»ç»Ÿæµ‹è¯•ï¼‰ï¼Œä»¥æ¶µç›–æ‰€æœ‰åŠŸèƒ½ï¼Œä¾‹å¦‚æ€§èƒ½ï¼Œå¯ç”¨æ€§ï¼Œæ€§èƒ½ï¼Œè´Ÿè½½ï¼Œå‹åŠ›å’Œå®‰å…¨æ€§ã€‚</p></li><li><p>CI&#x2F;CDçš„ä¸€äº›å¸¸è§åšæ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ä»¥ä¸‹æ˜¯å»ºç«‹æœ‰æ•ˆçš„CI &#x2F; CDç®¡é“çš„ä¸€äº›æœ€ä½³å®è·µï¼š</p><ul><li>å‘å±•DevOpsæ–‡åŒ–</li><li>å®æ–½å’Œåˆ©ç”¨æŒç»­é›†æˆ</li><li>ä»¥ç›¸åŒçš„æ–¹å¼éƒ¨ç½²åˆ°æ¯ä¸ªç¯å¢ƒ</li><li>å¤±è´¥å¹¶é‡æ–°å¯åŠ¨ç®¡é“</li><li>åº”ç”¨ç‰ˆæœ¬æ§åˆ¶</li><li>å°†æ•°æ®åº“åŒ…å«åœ¨ç®¡é“ä¸­</li><li>ç›‘æ§æ‚¨çš„æŒç»­äº¤ä»˜æµç¨‹</li><li>ä½¿æ‚¨çš„CDæµæ°´çº¿æµç•…</li></ul></li><li><p>ä»€ä¹ˆæ—¶å€™æ˜¯å®æ–½CI&#x2F;CDçš„æœ€ä½³æ—¶é—´ï¼Ÿ</p><p>å‘DevOpsçš„è¿‡æ¸¡éœ€è¦å½»åº•é‡å¡‘å…¶è½¯ä»¶å¼€å‘æ–‡åŒ–ï¼ŒåŒ…æ‹¬å·¥ä½œæµï¼Œç»„ç»‡ç»“æ„å’ŒåŸºç¡€æ¶æ„ã€‚ å› æ­¤ï¼Œç»„ç»‡å¿…é¡»ä¸ºå®æ–½DevOpsçš„é‡å¤§å˜åŒ–åšå¥½å‡†å¤‡ã€‚</p></li><li><p>æœ‰å“ªäº›å¸¸è§çš„CI&#x2F;CDæœåŠ¡å™¨</p><p>Visual Studio<br>Visual Studioæ”¯æŒå…·æœ‰æ•æ·è®¡åˆ’ï¼Œæºä»£ç æ§åˆ¶ï¼ŒåŒ…ç®¡ç†ï¼Œæµ‹è¯•å’Œå‘å¸ƒè‡ªåŠ¨åŒ–ä»¥åŠæŒç»­ç›‘è§†çš„å®Œæ•´å¼€å‘çš„DevOpsç³»ç»Ÿã€‚</p><p>TeamCity<br>TeamCityæ˜¯ä¸€æ¬¾æ™ºèƒ½CIæœåŠ¡å™¨ï¼Œå¯æä¾›æ¡†æ¶æ”¯æŒå’Œä»£ç è¦†ç›–ï¼Œè€Œæ— éœ€å®‰è£…ä»»ä½•é¢å¤–çš„æ’ä»¶ï¼Œä¹Ÿæ— éœ€æ¨¡å—æ¥æ„å»ºè„šæœ¬ã€‚</p><p>Jenkins<br>å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„CIæœåŠ¡å™¨ï¼Œé€šè¿‡å…±äº«ç®¡é“å’Œé”™è¯¯è·Ÿè¸ªåŠŸèƒ½æ”¯æŒå¼€å‘å’Œè¿è¥å›¢é˜Ÿä¹‹é—´çš„åä½œã€‚ å®ƒä¹Ÿå¯ä»¥ä¸æ•°ç™¾ä¸ªä»ªè¡¨æ¿æ’ä»¶ç»“åˆä½¿ç”¨ã€‚</p><p>GitLab<br>GitLabçš„ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰å¹³å°ï¼Œä»¥è¿›è¡Œæœ‰æ•ˆçš„æŒç»­é›†æˆå’Œéƒ¨ç½²ã€‚ GitLabå¸®åŠ©CI &#x2F; CDå›¢é˜ŸåŠ å¿«ä»£ç äº¤ä»˜ï¼Œé”™è¯¯è¯†åˆ«å’Œæ¢å¤ç¨‹åºçš„é€Ÿåº¦ã€‚</p><p>Bamboo<br>Bambooæ˜¯ç”¨äºäº§å“å‘å¸ƒç®¡ç†è‡ªåŠ¨åŒ–çš„è¿ç»­é›†æˆæœåŠ¡å™¨ã€‚ Bambooè·Ÿè¸ªæ‰€æœ‰å·¥å…·ä¸Šçš„æ‰€æœ‰éƒ¨ç½²ï¼Œå¹¶å®æ—¶ä¼ è¾¾é”™è¯¯ã€‚</p></li><li><p>æè¿°æŒç»­é›†æˆçš„æœ‰æ•ˆå·¥ä½œæµç¨‹</p><p>å®æ–½æŒç»­é›†æˆçš„æˆåŠŸå·¥ä½œæµç¨‹åŒ…æ‹¬ä»¥ä¸‹å®è·µï¼š</p><ul><li>å®æ–½å’Œç»´æŠ¤é¡¹ç›®æºä»£ç çš„å­˜å‚¨åº“</li><li>è‡ªåŠ¨åŒ–æ„å»ºå’Œé›†æˆ</li><li>ä½¿æ„å»ºè‡ªæ£€</li><li>æ¯å¤©å°†æ›´æ”¹æäº¤åˆ°åŸºå‡†</li><li>æ„å»ºæ‰€æœ‰æ·»åŠ åˆ°åŸºå‡†çš„æäº¤</li><li>ä¿æŒå¿«é€Ÿæ„å»º</li><li>åœ¨ç”Ÿäº§ç¯å¢ƒçš„å…‹éš†ä¸­è¿è¡Œæµ‹è¯•</li><li>è½»æ¾è·å–æœ€æ–°äº¤ä»˜ç‰©</li><li>ä½¿æ„å»ºç»“æœæ˜“äºæ‰€æœ‰äººç›‘è§†</li><li>è‡ªåŠ¨åŒ–éƒ¨ç½²</li></ul></li></ol><h2 id="æ¯ç§æœ¯è¯­ä¹‹é—´çš„å·®å¼‚"><a href="#æ¯ç§æœ¯è¯­ä¹‹é—´çš„å·®å¼‚" class="headerlink" title="æ¯ç§æœ¯è¯­ä¹‹é—´çš„å·®å¼‚"></a>æ¯ç§æœ¯è¯­ä¹‹é—´çš„å·®å¼‚</h2><ol start="26"><li><p>æ•æ·å’ŒDevOpsä¹‹é—´æœ‰å“ªäº›ä¸»è¦åŒºåˆ«ï¼Ÿ</p><p>åŸºæœ¬ä¸Šï¼ŒDevOpså’Œæ•æ·æ˜¯ç›¸äº’è¡¥å……çš„ã€‚æ•æ·æ›´åŠ å…³æ³¨å¼€å‘æ–°è½¯ä»¶å’Œä»¥æ›´æœ‰æ•ˆçš„æ–¹å¼ç®¡ç†å¤æ‚è¿‡ç¨‹çš„ä»·å€¼å’ŒåŸåˆ™ã€‚åŒæ—¶ï¼ŒDevOpsæ—¨åœ¨å¢å¼ºç”±å¼€å‘äººå‘˜å’Œè¿è¥å›¢é˜Ÿç»„æˆçš„ä¸åŒå›¢é˜Ÿä¹‹é—´çš„æ²Ÿé€šï¼Œé›†æˆå’Œåä½œã€‚</p><p>å®ƒéœ€è¦é‡‡ç”¨æ•æ·æ–¹æ³•å’ŒDevOpsæ–¹æ³•æ¥å½¢æˆæ— ç¼å·¥ä½œçš„äº§å“å¼€å‘ç”Ÿå‘½å‘¨æœŸï¼šæ•æ·åŸç†æœ‰åŠ©äºå¡‘é€ å’Œå¼•å¯¼æ­£ç¡®çš„å¼€å‘æ–¹å‘ï¼Œè€ŒDevOpsåˆ©ç”¨è¿™äº›å·¥å…·æ¥ç¡®ä¿å°†äº§å“å®Œå…¨äº¤ä»˜ç»™å®¢æˆ·ã€‚</p></li><li><p>æŒç»­é›†æˆï¼ŒæŒç»­äº¤ä»˜å’ŒæŒç»­éƒ¨ç½²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>æŒç»­é›†æˆï¼ˆCIï¼‰æ˜¯ä¸€ç§å°†ä»£ç ç‰ˆæœ¬è¿ç»­é›†æˆåˆ°å…±äº«å­˜å‚¨åº“ä¸­çš„å®è·µã€‚è¿™ç§åšæ³•å¯ç¡®ä¿è‡ªåŠ¨æµ‹è¯•æ–°ä»£ç ï¼Œå¹¶èƒ½å¿«é€Ÿæ£€æµ‹å’Œä¿®å¤é”™è¯¯ã€‚</p><p>æŒç»­äº¤ä»˜ä½¿CIè¿›ä¸€æ­¥è¿ˆå‡ºäº†ä¸€æ­¥ï¼Œç¡®ä¿é›†æˆåï¼Œéšæ—¶å¯ä»¥åœ¨ä¸€ä¸ªæŒ‰é’®å†…å°±å¯ä»¥é‡Šæ”¾ä»£ç åº“ã€‚å› æ­¤ï¼ŒCIå¯ä»¥è§†ä¸ºæŒç»­äº¤ä»˜çš„å…ˆå†³æ¡ä»¶ï¼Œè¿™æ˜¯CI &#x2F; CDç®¡é“çš„å¦ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><p>å¯¹äºè¿ç»­éƒ¨ç½²ï¼Œä¸éœ€è¦ä»»ä½•æ‰‹åŠ¨æ­¥éª¤ã€‚è¿™äº›ä»£ç é€šè¿‡æµ‹è¯•åï¼Œä¾¿ä¼šè‡ªåŠ¨æ¨é€åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p><p>æ‰€æœ‰è¿™ä¸‰ä¸ªç»„ä»¶ï¼šæŒç»­é›†æˆï¼ŒæŒç»­äº¤ä»˜å’ŒæŒç»­éƒ¨ç½²æ˜¯å®æ–½DevOpsçš„é‡è¦é˜¶æ®µã€‚</p><p>ä¸€æ–¹é¢ï¼Œè¿ç»­äº¤ä»˜æ›´é€‚åˆäºæ´»è·ƒç”¨æˆ·å·²ç»å­˜åœ¨çš„åº”ç”¨ç¨‹åºï¼Œè¿™æ ·äº‹æƒ…å°±å¯ä»¥å˜æ…¢ä¸€äº›å¹¶è¿›è¡Œæ›´å¥½çš„è°ƒæ•´ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨æ‰“ç®—å‘å¸ƒä¸€ä¸ªå…¨æ–°çš„è½¯ä»¶å¹¶ä¸”å°†æ•´ä¸ªè¿‡ç¨‹æŒ‡å®šä¸ºå®Œå…¨è‡ªåŠ¨åŒ–çš„ï¼Œåˆ™è¿ç»­éƒ¨ç½²æ˜¯æ‚¨äº§å“çš„æ›´åˆé€‚é€‰æ‹©ã€‚</p></li><li><p>è¿ç»­äº¤ä»˜å’Œè¿ç»­éƒ¨ç½²ä¹‹é—´æœ‰å“ªäº›æ ¹æœ¬åŒºåˆ«ï¼Ÿ</p><p>åœ¨è¿ç»­äº¤ä»˜çš„æƒ…å†µä¸‹ï¼Œä¸»åˆ†æ”¯ä¸­çš„ä»£ç å§‹ç»ˆå¯ä»¥æ‰‹åŠ¨éƒ¨ç½²ã€‚ é€šè¿‡è¿™ç§åšæ³•ï¼Œå¼€å‘å›¢é˜Ÿå¯ä»¥å†³å®šä½•æ—¶å‘å¸ƒæ–°çš„æ›´æ”¹æˆ–åŠŸèƒ½ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°ä½¿ç»„ç»‡å—ç›Šã€‚</p><p>åŒæ—¶ï¼Œè¿ç»­éƒ¨ç½²å°†åœ¨æµ‹è¯•é˜¶æ®µä¹‹åç«‹å³å°†ä»£ç ä¸­çš„æ‰€æœ‰æ›´æ–°å’Œä¿®è¡¥ç¨‹åºè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè€Œæ— éœ€ä»»ä½•äººå·¥å¹²é¢„ã€‚</p></li><li><p>æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æŒç»­é›†æˆæœ‰åŠ©äºç¡®ä¿è½¯ä»¶ç»„ä»¶ç´§å¯†åä½œã€‚ æ•´åˆåº”è¯¥ç»å¸¸è¿›è¡Œï¼› æœ€å¥½æ¯å°æ—¶æˆ–æ¯å¤©ä¸€æ¬¡ã€‚ æŒç»­é›†æˆæœ‰åŠ©äºæé«˜ä»£ç æäº¤çš„é¢‘ç‡ï¼Œå¹¶é™ä½è¿æ¥å¤šä¸ªå¼€å‘äººå‘˜çš„ä»£ç çš„å¤æ‚æ€§ã€‚ æœ€ç»ˆï¼Œæ­¤è¿‡ç¨‹å‡å°‘äº†ä¸å…¼å®¹ä»£ç å’Œå†—ä½™å·¥ä½œçš„æœºä¼šã€‚</p><p>æŒç»­äº¤ä»˜æ˜¯CI &#x2F; CDæµç¨‹ä¸­çš„ä¸‹ä¸€æ­¥ã€‚ ç”±äºä»£ç ä¸æ–­é›†æˆåˆ°å…±äº«å­˜å‚¨åº“ä¸­ï¼Œå› æ­¤å¯ä»¥æŒç»­æµ‹è¯•è¯¥ä»£ç ã€‚ åœ¨ç­‰å¾…ä»£ç å®Œæˆä¹‹å‰ï¼Œæ²¡æœ‰é—´éš™å¯ä»¥è¿›è¡Œæµ‹è¯•ã€‚ è¿™æ ·å¯ç¡®ä¿æ‰¾åˆ°å°½å¯èƒ½å¤šçš„é”™è¯¯ï¼Œç„¶åå°†å…¶è¿ç»­äº¤ä»˜ç»™ç”Ÿäº§ã€‚</p></li><li><p>DevOpså’ŒæŒç»­äº¤ä»˜ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>DevOpsæ›´åƒæ˜¯ä¸€ç§ç»„ç»‡å’Œæ–‡åŒ–æ–¹æ³•ï¼Œå¯ä¿ƒè¿›å·¥ç¨‹å›¢é˜Ÿå’Œè¿è¥å›¢é˜Ÿä¹‹é—´çš„åä½œå’Œæ²Ÿé€šã€‚</p><p>åŒæ—¶ï¼ŒæŒç»­äº¤ä»˜æ˜¯æˆåŠŸå°†DevOpså®æ–½åˆ°äº§å“å¼€å‘å·¥ä½œæµç¨‹ä¸­çš„é‡è¦å› ç´ ã€‚ æŒç»­äº¤ä»˜å®è·µæœ‰åŠ©äºä½¿æ–°å‘è¡Œçš„ç‰ˆæœ¬æ›´åŠ ä¹å‘³å’Œå¯é ï¼Œå¹¶å»ºç«‹æ›´åŠ æ— ç¼å’ŒçŸ­çš„æµç¨‹ã€‚</p><p>DevOpsçš„ä¸»è¦ç›®çš„æ˜¯æœ‰æ•ˆåœ°ç»“åˆDevå’ŒOpsè§’è‰²ï¼Œæ¶ˆé™¤æ‰€æœ‰å­¤å²›ï¼Œå¹¶å®ç°ç‹¬ç«‹äºæŒç»­äº¤ä»˜å®è·µçš„ä¸šåŠ¡ç›®æ ‡ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœå·²ç»æœ‰DevOpsæµç¨‹ï¼Œåˆ™è¿ç»­äº¤ä»˜æ•ˆæœæœ€ä½³ã€‚ å› æ­¤ï¼Œå®ƒæ‰©å¤§äº†åä½œå¹¶ç®€åŒ–äº†ç»„ç»‡çš„ç»Ÿä¸€äº§å“å¼€å‘å‘¨æœŸã€‚</p></li><li><p>æ•æ·ï¼Œç²¾ç›ŠITå’ŒDevOpsä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>æ•æ·æ˜¯ä»…ä¸“æ³¨äºè½¯ä»¶å¼€å‘çš„æ–¹æ³•ã€‚ æ•æ·æ—¨åœ¨è¿­ä»£å¼€å‘ï¼Œå»ºç«‹æŒç»­äº¤ä»˜ï¼Œç¼©çŸ­åé¦ˆå¾ªç¯ä»¥åŠåœ¨æ•´ä¸ªè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸï¼ˆSDLCï¼‰ä¸­æ”¹å–„å›¢é˜Ÿåä½œã€‚</p><p>ç²¾ç›ŠITæ˜¯ä¸€ç§æ—¨åœ¨ç®€åŒ–äº§å“å¼€å‘å‘¨æœŸä»·å€¼æµçš„æ–¹æ³•ã€‚ ç²¾ç›Šä¸“æ³¨äºæ¶ˆé™¤ä¸å¿…è¦çš„è¿‡ç¨‹ï¼Œè¿™äº›è¿‡ç¨‹ä¸ä¼šå¢åŠ ä»·å€¼ï¼Œå¹¶åˆ›å»ºæµç¨‹æ¥ä¼˜åŒ–ä»·å€¼æµã€‚</p><p>DevOpsä¸“æ³¨äºå¼€å‘å’Œéƒ¨ç½²-äº§å“å¼€å‘è¿‡ç¨‹çš„Devå’ŒOpsã€‚ å…¶ç›®æ ‡æ˜¯æœ‰æ•ˆæ•´åˆè‡ªåŠ¨åŒ–å·¥å…·å’ŒITä¸“ä¸šäººå‘˜ä¹‹é—´çš„è§’è‰²ï¼Œä»¥å®ç°æ›´ç®€åŒ–å’Œè‡ªåŠ¨åŒ–çš„æµç¨‹ã€‚</p></li></ol><h2 id="å‡†å¤‡å¥½åœ¨ä¸‹ä¸€æ¬¡DevOpsé¢è¯•ä¸­å–å¾—æˆåŠŸå—ï¼Ÿ"><a href="#å‡†å¤‡å¥½åœ¨ä¸‹ä¸€æ¬¡DevOpsé¢è¯•ä¸­å–å¾—æˆåŠŸå—ï¼Ÿ" class="headerlink" title="å‡†å¤‡å¥½åœ¨ä¸‹ä¸€æ¬¡DevOpsé¢è¯•ä¸­å–å¾—æˆåŠŸå—ï¼Ÿ"></a>å‡†å¤‡å¥½åœ¨ä¸‹ä¸€æ¬¡DevOpsé¢è¯•ä¸­å–å¾—æˆåŠŸå—ï¼Ÿ</h2><p>ç›®å‰æœ‰æ— æ•°çš„DevOpsé¢è¯•é—®é¢˜ï¼Œæˆ‘ä»¬ç›®å‰è¿˜ä¸èƒ½å®Œå…¨è§£å†³ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™äº›é—®é¢˜å’Œå»ºè®®çš„ç­”æ¡ˆèƒ½ä½¿æ‚¨æŒæ¡DevOpså’ŒCI&#x2F;CDçš„å¤§é‡çŸ¥è¯†ï¼Œå¹¶æˆåŠŸåœ°å¸®åŠ©æ‚¨å®Œæˆé¢è¯•ã€‚</p><p>å°†æ¥ï¼Œæˆ‘ä»¬å°†åœ¨æ­¤åˆ—è¡¨ä¸­æ·»åŠ æ›´å¤šå†…å®¹ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨å¯¹æ­¤ä¸»é¢˜æœ‰ä»»ä½•å»ºè®®ï¼Œè¯·éšæ—¶ä¸æˆ‘ä»¬è”ç³»ã€‚æœ€åï¼Œæˆ‘ä»¬ç¥æ‚¨åœ¨æµ‹è¯•äº‹ä¸šä¸­ä¸€åˆ‡é¡ºåˆ©ï¼</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021 å¹´åŠ¡å¿…çŸ¥é“çš„æœ€å¥½ç”¨çš„ 14 æ¬¾ CI/CD å·¥å…·</title>
      <link href="/2020/03/ci-cd-tools/"/>
      <url>/2020/03/ci-cd-tools/</url>
      
        <content type="html"><![CDATA[<p>â€œQuality at Speedâ€ æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„æ–°è§„èŒƒã€‚</p><p>ä¼ä¸šæ­£åœ¨æœç€ DevOps æ–¹æ³•è®ºå’Œæ•æ·æ–‡åŒ–è¿ˆè¿›ï¼Œä»¥åŠ å¿«äº¤ä»˜é€Ÿåº¦å¹¶ç¡®ä¿äº§å“è´¨é‡ã€‚åœ¨ DevOps ä¸­ï¼Œè¿ç»­å’Œè‡ªåŠ¨åŒ–çš„äº¤ä»˜å‘¨æœŸä½¿å¿«é€Ÿå¯é çš„äº¤ä»˜æˆä¸ºå¯èƒ½çš„åŸºç¡€ã€‚</p><p>è¿™å¯¼è‡´æˆ‘ä»¬éœ€è¦é€‚å½“çš„æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI&#x2F;CDï¼‰å·¥å…·ã€‚ ä¸€ä¸ªå¥½çš„ CI&#x2F;CD å·¥å…·å¯ä»¥åˆ©ç”¨å›¢é˜Ÿå½“å‰çš„å·¥ä½œæµç¨‹ï¼Œä»¥æœ€ä½³åˆ©ç”¨è‡ªåŠ¨åŒ–åŠŸèƒ½å¹¶åˆ›å»ºå¯é çš„ CI&#x2F;CD ç®¡é“ä¸ºå›¢é˜Ÿå‘å±•æä¾›æ‰€éœ€çš„åŠ¨åŠ›ã€‚</p><p>éšç€å¸‚åœºä¸Šå¤§é‡ CI&#x2F;CD å·¥å…·çš„å‡ºç°ï¼Œå›¢é˜Ÿå¯èƒ½éš¾ä»¥åšå‡ºè‰°éš¾çš„å†³å®šæ¥æŒ‘é€‰åˆé€‚çš„å·¥å…·ã€‚è¯¥åˆ—è¡¨åŒ…å«å¸‚åœºä¸Šæœ€å¥½çš„ 14 ç§ CI&#x2F;CD å·¥å…·åŠå…¶ä¸»è¦ç‰¹æ€§ï¼Œä½¿ä½ å’Œå›¢é˜Ÿåœ¨é€‰æ‹©è¿‡ç¨‹ä¸­æ›´åŠ è½»æ¾ã€‚</p><span id="more"></span><p>ä»¥ä¸‹ç½—åˆ—å‡ºäº†ç›®å‰å¸‚åœºä¸Šæœ€æµè¡Œçš„ 14 ç§æœ€ä½³ CI&#x2F;CD å·¥å…·ï¼Œå¸Œæœ›è¯¥åˆ—è¡¨ä¸ºä½ åœ¨é€‰æ‹© CI&#x2F;CD å‰æä¾›äº†è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œæ›´å¤šè¯¦ç»†ä¿¡æ¯ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹å®˜ç½‘åšæ›´æ·±å…¥çš„äº†è§£ã€‚æœ€ç»ˆç»“åˆä½ çš„éœ€æ±‚ä»¥åŠç°æœ‰åŸºç¡€æ¶æ„ä»¥åŠæœªæ¥æ½œåŠ›å’Œæ”¹è¿›çš„ç©ºé—´æ˜¯å°†å½±å“ä½ æœ€ç»ˆé€‰æ‹©çš„å› ç´ ï¼Œå¸®åŠ©ä½ é€‰æ‹©åˆ°æœ€é€‚åˆä½ çš„è§„æ ¼çš„ CI&#x2F;CD è½¯ä»¶ã€‚</p><h2 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h2><p>Jenkins æ˜¯ä¸€ä¸ªå¼€æºè‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œåœ¨å…¶ä¸­è¿›è¡Œé›†ä¸­æ„å»ºå’ŒæŒç»­é›†æˆã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŸºäº Java çš„ç¨‹åºï¼Œå¸¦æœ‰ Windowsï¼ŒmacOSï¼ŒUnix çš„æ“ä½œç³»ç»Ÿçš„è½¯ä»¶åŒ…ã€‚Jenkins æ”¯æŒè½¯ä»¶å¼€å‘é¡¹ç›®çš„æ„å»ºï¼Œéƒ¨ç½²å’Œè‡ªåŠ¨åŒ–ï¼Œä»¥åŠæˆç™¾ä¸Šåƒçš„æ’ä»¶æ¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚å®ƒæ˜¯å¸‚åœºä¸Šæœ€å…·å½±å“åŠ›çš„ CI&#x2F;CD å·¥å…·ä¹‹ä¸€ã€‚</p><p>Jenkins ä¸»è¦ç‰¹æ€§ï¼š</p><ul><li>æ˜“äºåœ¨å„ç§æ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œå‡çº§</li><li>ç®€å•æ˜“ç”¨çš„ç•Œé¢</li><li>å¯é€šè¿‡ç¤¾åŒºæä¾›çš„å·¨å¤§æ’ä»¶èµ„æºè¿›è¡Œæ‰©å±•</li><li>åœ¨ç”¨æˆ·ç•Œé¢ä¸­è½»æ¾é…ç½®ç¯å¢ƒ</li><li>æ”¯æŒä¸»ä»æ¶æ„çš„åˆ†å¸ƒå¼æ„å»º</li><li>æ ¹æ®è¡¨è¾¾å¼æ„å»ºæ—¶é—´è¡¨</li><li>åœ¨é¢„æ„å»ºæ­¥éª¤ä¸­æ”¯æŒ Shell å’Œ Windows å‘½ä»¤æ‰§è¡Œ</li><li>æ”¯æŒæœ‰å…³æ„å»ºçŠ¶æ€çš„é€šçŸ¥</li></ul><p>è®¸å¯ï¼šå…è´¹ã€‚Jenkins æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ´»è·ƒç¤¾åŒºçš„å¼€æºå·¥å…·ã€‚</p><p>ä¸»é¡µï¼š<a href="https://jenkins.io/">https://jenkins.io/</a></p><h2 id="CircleCI"><a href="#CircleCI" class="headerlink" title="CircleCI"></a>CircleCI</h2><p>CircleCI æ˜¯ä¸€ç§ CI&#x2F;CD å·¥å…·ï¼Œæ”¯æŒå¿«é€Ÿçš„è½¯ä»¶å¼€å‘å’Œå‘å¸ƒã€‚CircleCI å…è®¸ä»ä»£ç æ„å»ºï¼Œæµ‹è¯•åˆ°éƒ¨ç½²çš„æ•´ä¸ªç”¨æˆ·ç®¡é“è‡ªåŠ¨åŒ–ã€‚</p><p>ä½ å¯ä»¥å°† CircleCI ä¸ GitHubï¼ŒGitHub Enterprise å’Œ Bitbucket é›†æˆï¼Œä»¥åœ¨æäº¤æ–°ä»£ç è¡Œæ—¶åˆ›å»ºå†…éƒ¨ç‰ˆæœ¬ã€‚CircleCI è¿˜å¯ä»¥é€šè¿‡äº‘æ‰˜ç®¡é€‰é¡¹æ‰˜ç®¡æŒç»­é›†æˆï¼Œæˆ–åœ¨ç§æœ‰åŸºç¡€æ¶æ„çš„é˜²ç«å¢™åé¢è¿è¡Œã€‚</p><p>CircleCI ä¸»è¦ç‰¹æ€§:</p><ul><li>ä¸ Bitbucketï¼ŒGitHub å’Œ GitHub Enterprise é›†æˆ</li><li>ä½¿ç”¨å®¹å™¨æˆ–è™šæ‹Ÿæœºè¿è¡Œæ„å»º</li><li>ç®€æ˜“è°ƒè¯•</li><li>è‡ªåŠ¨å¹¶è¡ŒåŒ–</li><li>å¿«é€Ÿæµ‹è¯•</li><li>ä¸ªæ€§åŒ–çš„ç”µå­é‚®ä»¶å’ŒIMé€šçŸ¥</li><li>è¿ç»­å’Œç‰¹å®šäºåˆ†æ”¯æœºæ„çš„éƒ¨ç½²</li><li>é«˜åº¦å¯å®šåˆ¶</li><li>è‡ªåŠ¨åˆå¹¶å’Œè‡ªå®šä¹‰å‘½ä»¤ä»¥ä¸Šä¼ è½¯ä»¶åŒ…</li><li>å¿«é€Ÿè®¾ç½®å’Œæ— é™æ„å»º</li></ul><p>è®¸å¯ï¼šLinux è®¡åˆ’ä»é€‰æ‹©ä¸è¿è¡Œä»»ä½•å¹¶è¡Œæ“ä½œå¼€å§‹ã€‚å¼€æºé¡¹ç›®è·å¾—äº†å¦å¤–ä¸‰ä¸ªå…è´¹å®¹å™¨ã€‚åœ¨æ³¨å†ŒæœŸé—´ï¼Œå°†çœ‹åˆ°ä»·æ ¼ä»¥å†³å®šæ‰€éœ€çš„è®¡åˆ’ã€‚</p><p>ä¸»é¡µï¼š <a href="https://circleci.com/">https://circleci.com/</a></p><h2 id="TeamCity"><a href="#TeamCity" class="headerlink" title="TeamCity"></a>TeamCity</h2><p>TeamCity æ˜¯ JetBrains çš„æ„å»ºç®¡ç†å’ŒæŒç»­é›†æˆæœåŠ¡å™¨ã€‚</p><p>TeamCity æ˜¯ä¸€ä¸ªæŒç»­é›†æˆå·¥å…·ï¼Œå¯å¸®åŠ©æ„å»ºå’Œéƒ¨ç½²ä¸åŒç±»å‹çš„é¡¹ç›®ã€‚ TeamCity åœ¨ Java ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶ä¸ Visual Studio å’Œ IDE é›†æˆã€‚è¯¥å·¥å…·å¯ä»¥å®‰è£…åœ¨ Windows å’Œ Linux æœåŠ¡å™¨ä¸Šï¼Œæ”¯æŒ .NET å’Œå¼€æ”¾å †æ ˆé¡¹ç›®ã€‚</p><p>TeamCity 2019.1 æä¾›äº†æ–°çš„UIå’Œæœ¬æœº GitLab é›†æˆã€‚å®ƒè¿˜æ”¯æŒ GitLab å’Œ Bitbucket æœåŠ¡å™¨æ‹‰å–è¯·æ±‚ã€‚è¯¥ç‰ˆæœ¬åŒ…æ‹¬åŸºäºä»¤ç‰Œçš„èº«ä»½éªŒè¯ï¼Œæ£€æµ‹ï¼ŒGoæµ‹è¯•æŠ¥å‘Šä»¥åŠ AWS Spot Fleet è¯·æ±‚ã€‚</p><p>TeamCityä¸»è¦ç‰¹æ€§:</p><ul><li>æä¾›å¤šç§æ–¹å¼å°†çˆ¶é¡¹ç›®çš„è®¾ç½®å’Œé…ç½®é‡ç”¨åˆ°å­é¡¹ç›®</li><li>åœ¨ä¸åŒç¯å¢ƒä¸‹åŒæ—¶è¿è¡Œå¹¶è¡Œæ„å»º</li><li>å¯ç”¨è¿è¡Œå†å²è®°å½•æ„å»ºï¼ŒæŸ¥çœ‹æµ‹è¯•å†å²è®°å½•æŠ¥å‘Šï¼Œå›ºå®šï¼Œæ ‡è®°ä»¥åŠå°†æ„å»ºæ·»åŠ åˆ°æ”¶è—å¤¹</li><li>æ˜“äºå®šåˆ¶ï¼Œäº¤äº’å’Œæ‰©å±•æœåŠ¡å™¨</li><li>ä¿æŒCIæœåŠ¡å™¨æ­£å¸¸è¿è¡Œ</li><li>çµæ´»çš„ç”¨æˆ·ç®¡ç†ï¼Œç”¨æˆ·è§’è‰²åˆ†é…ï¼Œå°†ç”¨æˆ·åˆ†ç»„ï¼Œä¸åŒçš„ç”¨æˆ·èº«ä»½éªŒè¯æ–¹å¼ä»¥åŠå¸¦æœ‰æ‰€æœ‰ç”¨æˆ·æ“ä½œçš„æ—¥å¿—ï¼Œä»¥é€æ˜åŒ–æœåŠ¡å™¨ä¸Šæ‰€æœ‰æ´»åŠ¨</li></ul><p>è®¸å¯ï¼šTeamCity æ˜¯å…·æœ‰å…è´¹å’Œä¸“æœ‰è®¸å¯è¯çš„å•†ä¸šå·¥å…·ã€‚</p><p>ä¸»é¡µï¼š <a href="https://www.jetbrains.com/teamcity/">https://www.jetbrains.com/teamcity/</a></p><h2 id="Bamboo"><a href="#Bamboo" class="headerlink" title="Bamboo"></a>Bamboo</h2><p>Bamboo æ˜¯ä¸€ä¸ªæŒç»­é›†æˆæœåŠ¡å™¨ï¼Œå¯è‡ªåŠ¨æ‰§è¡Œè½¯ä»¶åº”ç”¨ç¨‹åºç‰ˆæœ¬çš„ç®¡ç†ï¼Œä»è€Œåˆ›å»ºäº†æŒç»­äº¤ä»˜ç®¡é“ã€‚Bamboo æ¶µç›–äº†æ„å»ºå’ŒåŠŸèƒ½æµ‹è¯•ï¼Œåˆ†é…ç‰ˆæœ¬ï¼Œæ ‡è®°å‘è¡Œç‰ˆï¼Œåœ¨ç”Ÿäº§ä¸­éƒ¨ç½²å’Œæ¿€æ´»æ–°ç‰ˆæœ¬ã€‚</p><p>Bambooä¸»è¦ç‰¹æ€§:</p><ul><li>æ”¯æŒå¤šè¾¾ 100 ä¸ªè¿œç¨‹æ„å»ºä»£ç†</li><li>å¹¶è¡Œè¿è¡Œæ‰¹æ¬¡æµ‹è¯•å¹¶å¿«é€Ÿè·å¾—åé¦ˆ</li><li>åˆ›å»ºå›¾åƒå¹¶æ¨é€åˆ°æ³¨å†Œè¡¨</li><li>æ¯ä¸ªç¯å¢ƒçš„æƒé™ï¼Œä½¿å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜å¯ä»¥åœ¨ç”Ÿäº§ä¿æŒé”å®šçŠ¶æ€çš„æƒ…å†µä¸‹æŒ‰éœ€éƒ¨ç½²åˆ°ä»–ä»¬çš„ç¯å¢ƒä¸­</li><li>åœ¨ Gitï¼ŒMercurialï¼ŒSVN Repos ä¸­æ£€æµ‹æ–°åˆ†æ”¯ï¼Œå¹¶å°†ä¸»çº¿çš„CIæ–¹æ¡ˆè‡ªåŠ¨åº”ç”¨äºå®ƒä»¬</li><li>è§¦å‘å™¨åŸºäºåœ¨å­˜å‚¨åº“ä¸­æ£€æµ‹åˆ°çš„æ›´æ”¹æ„å»ºã€‚ æ¨é€æ¥è‡ª Bitbucket çš„é€šçŸ¥ï¼Œå·²è®¾ç½®çš„æ—¶é—´è¡¨ï¼Œå¦ä¸€ä¸ªæ„å»ºçš„å®Œæˆæˆ–å…¶ä»»ä½•ç»„åˆã€‚</li></ul><p>è®¸å¯ï¼šBamboo å®šä»·å±‚åŸºäºä»£ç†ï¼ˆSlaveï¼‰è€Œä¸æ˜¯ç”¨æˆ·ï¼Œä»£ç†è¶Šå¤šï¼ŒèŠ±è´¹è¶Šå¤šã€‚</p><p>ä¸»é¡µï¼š<a href="https://www.atlassian.com/software/bamboo">https://www.atlassian.com/software/bamboo</a></p><h2 id="GitLab"><a href="#GitLab" class="headerlink" title="GitLab"></a>GitLab</h2><p>GitLab æ˜¯ä¸€å¥—ç”¨äºç®¡ç†è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸå„ä¸ªæ–¹é¢çš„å·¥å…·ã€‚ æ ¸å¿ƒäº§å“æ˜¯åŸºäº Web çš„ Git å­˜å‚¨åº“ç®¡ç†å™¨ï¼Œå…·æœ‰é—®é¢˜è·Ÿè¸ªï¼Œåˆ†æå’Œ Wiki ç­‰åŠŸèƒ½ã€‚</p><p>GitLab å…è®¸ä½ åœ¨æ¯æ¬¡æäº¤æˆ–æ¨é€æ—¶è§¦å‘æ„å»ºï¼Œè¿è¡Œæµ‹è¯•å’Œéƒ¨ç½²ä»£ç ã€‚ä½ å¯ä»¥åœ¨è™šæ‹Ÿæœºï¼ŒDocker å®¹å™¨æˆ–å¦ä¸€å°æœåŠ¡å™¨ä¸Šæ„å»ºä½œä¸šã€‚</p><p>GitLabä¸»è¦ç‰¹æ€§:</p><ul><li>é€šè¿‡åˆ†æ”¯å·¥å…·æŸ¥çœ‹ï¼Œåˆ›å»ºå’Œç®¡ç†ä»£ç ä»¥åŠé¡¹ç›®æ•°æ®</li><li>é€šè¿‡å•ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè®¾è®¡ï¼Œå¼€å‘å’Œç®¡ç†ä»£ç å’Œé¡¹ç›®æ•°æ®ï¼Œä»è€Œå®ç°ä¸šåŠ¡ä»·å€¼çš„å¿«é€Ÿè¿­ä»£å’Œäº¤ä»˜</li><li>æä¾›çœŸå®æ€§å’Œå¯ä¼¸ç¼©æ€§çš„å•ä¸€æ¥æºï¼Œä»¥ä¾¿åœ¨é¡¹ç›®å’Œä»£ç ä¸Šè¿›è¡Œåä½œ</li><li>é€šè¿‡è‡ªåŠ¨åŒ–æºä»£ç çš„æ„å»ºï¼Œé›†æˆå’ŒéªŒè¯ï¼Œå¸®åŠ©äº¤ä»˜å›¢é˜Ÿå®Œå…¨æ¥å—CIã€‚</li><li>æä¾›å®¹å™¨æ‰«æï¼Œé™æ€åº”ç”¨ç¨‹åºå®‰å…¨æµ‹è¯•ï¼ˆSASTï¼‰ï¼ŒåŠ¨æ€åº”ç”¨ç¨‹åºå®‰å…¨æµ‹è¯•ï¼ˆDASTï¼‰å’Œä¾èµ–é¡¹æ‰«æï¼Œä»¥æä¾›å®‰å…¨çš„åº”ç”¨ç¨‹åºä»¥åŠè®¸å¯è¯åˆè§„æ€§</li><li>å¸®åŠ©è‡ªåŠ¨åŒ–å¹¶ç¼©çŸ­å‘å¸ƒå’Œäº¤ä»˜åº”ç”¨ç¨‹åºçš„æ—¶é—´</li></ul><p>è®¸å¯ï¼šGitLab æ˜¯ä¸€ä¸ªå•†ä¸šå·¥å…·å’Œå…è´¹è½¯ä»¶åŒ…ã€‚å®ƒæä¾›äº†åœ¨ GitLab æˆ–ä½ çš„æœ¬åœ°å®ä¾‹å’Œ&#x2F;æˆ–å…¬å…±äº‘ä¸Šæ‰˜ç®¡ SaaS çš„åŠŸèƒ½ã€‚</p><p>ä¸»é¡µï¼š<a href="https://about.gitlab.com/">https://about.gitlab.com/</a></p><h2 id="Buddy"><a href="#Buddy" class="headerlink" title="Buddy"></a>Buddy</h2><p>Buddy æ˜¯ä¸€ä¸ª CI&#x2F;CD è½¯ä»¶ï¼Œå®ƒä½¿ç”¨ GitHubï¼ŒBitbucket å’Œ GitLab çš„ä»£ç æ„å»ºï¼Œæµ‹è¯•ï¼Œéƒ¨ç½²ç½‘ç«™å’Œåº”ç”¨ç¨‹åºã€‚å®ƒä½¿ç”¨å…·æœ‰é¢„å®‰è£…è¯­è¨€å’Œæ¡†æ¶çš„ Docker å®¹å™¨ä»¥åŠ DevOps æ¥ç›‘è§†å’Œé€šçŸ¥æ“ä½œï¼Œå¹¶ä»¥æ­¤ä¸ºåŸºç¡€è¿›è¡Œæ„å»ºã€‚</p><p>Buddyä¸»è¦ç‰¹æ€§:</p><ul><li>æ˜“äºå°†åŸºäº Docker çš„æ˜ åƒè‡ªå®šä¹‰ä¸ºæµ‹è¯•ç¯å¢ƒ</li><li>æ™ºèƒ½å˜æ›´æ£€æµ‹ï¼Œæœ€æ–°çš„ç¼“å­˜ï¼Œå¹¶è¡Œæ€§å’Œå…¨é¢çš„ä¼˜åŒ–</li><li>åˆ›å»ºï¼Œå®šåˆ¶å’Œé‡ç”¨æ„å»ºå’Œæµ‹è¯•ç¯å¢ƒ</li><li>æ™®é€šå’ŒåŠ å¯†ï¼Œå›ºå®šå’Œå¯è®¾ç½®èŒƒå›´ï¼šå·¥ä½œç©ºé—´ï¼Œé¡¹ç›®ï¼Œç®¡é“ï¼Œæ“ä½œ</li><li>ä¸ Elasticï¼ŒMariaDBï¼ŒMemcachedï¼ŒMongoï¼ŒPostgreSQLï¼ŒRabbitMQï¼ŒRedisï¼ŒSelenium Chrome å’Œ Firefox å…³è”çš„æœåŠ¡</li><li>å®æ—¶ç›‘æ§è¿›åº¦å’Œæ—¥å¿—ï¼Œæ— é™å†å²è®°å½•</li><li>ä½¿ç”¨æ¨¡æ¿è¿›è¡Œå·¥ä½œæµç®¡ç†ï¼Œä»¥å…‹éš†ï¼Œå¯¼å‡ºå’Œå¯¼å…¥ç®¡é“</li><li>ä¸€æµçš„Gitæ”¯æŒå’Œé›†æˆ</li></ul><p>è®¸å¯ï¼šBuddy æ˜¯å…è´¹çš„å•†ä¸šå·¥å…·ã€‚</p><p>ä¸»é¡µï¼š<a href="https://buddy.works/">https://buddy.works/</a></p><h2 id="Travis-CI"><a href="#Travis-CI" class="headerlink" title="Travis CI"></a>Travis CI</h2><p>Travis CI æ˜¯ç”¨äºæ„å»ºå’Œæµ‹è¯•é¡¹ç›®çš„CIæœåŠ¡ã€‚Travis CI è‡ªåŠ¨æ£€æµ‹æ–°æäº¤å¹¶æ¨é€åˆ° GitHub å­˜å‚¨åº“çš„æäº¤ã€‚æ¯æ¬¡æäº¤æ–°ä»£ç åï¼ŒTravis CI éƒ½ä¼šæ„å»ºé¡¹ç›®å¹¶ç›¸åº”åœ°è¿è¡Œæµ‹è¯•ã€‚</p><p>è¯¥å·¥å…·æ”¯æŒè®¸å¤šæ„å»ºé…ç½®å’Œè¯­è¨€ï¼Œä¾‹å¦‚ Nodeï¼ŒPHPï¼ŒPythonï¼ŒJavaï¼ŒPerl ç­‰ã€‚</p><p>Travis ä¸»è¦ç‰¹æ€§:</p><ul><li>å¿«é€Ÿè®¾ç½®</li><li>GitHubé¡¹ç›®ç›‘æ§çš„å®æ—¶æ„å»ºè§†å›¾</li><li>æ‹‰å–è¯·æ±‚æ”¯æŒ</li><li>éƒ¨ç½²åˆ°å¤šä¸ªäº‘æœåŠ¡</li><li>é¢„è£…çš„æ•°æ®åº“æœåŠ¡</li><li>é€šè¿‡æ„å»ºæ—¶è‡ªåŠ¨éƒ¨ç½²</li><li>ä¸ºæ¯ä¸ªç‰ˆæœ¬æ¸…ç†è™šæ‹Ÿæœº</li><li>æ”¯æŒ macOSï¼ŒLinux å’Œ iOS</li><li>æ”¯æŒå¤šç§è¯­è¨€ï¼Œä¾‹å¦‚ Androidï¼ŒCï¼ŒCï¼ƒï¼ŒC ++ï¼ŒJavaï¼ŒJavaScriptï¼ˆå¸¦æœ‰Node.jsï¼‰ï¼ŒPerlï¼ŒPHPï¼ŒPythonï¼ŒRï¼ŒRuby ç­‰ã€‚</li></ul><p>è®¸å¯ï¼šTravis CI æ˜¯ä¸€é¡¹æ‰˜ç®¡çš„ CI&#x2F;CD æœåŠ¡ã€‚ç§äººé¡¹ç›®å¯ä»¥åœ¨ travis-ci.com ä¸Šè¿›è¡Œæ”¶è´¹æµ‹è¯•ã€‚å¯ä»¥åœ¨ travis-ci.org ä¸Šå…è´¹åº”ç”¨å¼€æºé¡¹ç›®ã€‚</p><p>ä¸»é¡µï¼š<a href="https://travis-ci.com/">https://travis-ci.com</a></p><h2 id="Codeship"><a href="#Codeship" class="headerlink" title="Codeship"></a>Codeship</h2><p>Codeship æ˜¯ä¸€ä¸ªæ‰˜ç®¡å¹³å°ï¼Œå¯å¤šæ¬¡æ”¯æŒæ—©æœŸå’Œè‡ªåŠ¨å‘å¸ƒè½¯ä»¶ã€‚é€šè¿‡ä¼˜åŒ–æµ‹è¯•å’Œå‘å¸ƒæµç¨‹ï¼Œå®ƒå¯ä»¥å¸®åŠ©è½¯ä»¶å…¬å¸æ›´å¿«åœ°å¼€å‘æ›´å¥½çš„äº§å“ã€‚</p><p>Codeship ä¸»è¦ç‰¹æ€§:</p><ul><li>ä¸æ‰€é€‰çš„ä»»ä½•å·¥å…·ï¼ŒæœåŠ¡å’Œäº‘ç¯å¢ƒé›†æˆ</li><li>æ˜“äºä½¿ç”¨ã€‚æä¾›å¿«é€Ÿè€Œå…¨é¢çš„å¼€å‘äººå‘˜æ”¯æŒã€‚</li><li>å€ŸåŠ©CodeShipçš„äº¤é’¥åŒ™ç¯å¢ƒå’Œç®€å•çš„UIï¼Œä½¿æ„å»ºå’Œéƒ¨ç½²å·¥ä½œæ›´å¿«</li><li>é€‰æ‹©AWSå®ä¾‹å¤§å°ï¼ŒCPUå’Œå†…å­˜çš„é€‰é¡¹</li><li>é€šè¿‡é€šçŸ¥ä¸­å¿ƒä¸ºç»„ç»‡å’Œå›¢é˜Ÿæˆå‘˜è®¾ç½®å›¢é˜Ÿå’Œæƒé™</li><li>æ— ç¼çš„ç¬¬ä¸‰æ–¹é›†æˆï¼Œæ™ºèƒ½é€šçŸ¥ç®¡ç†å’Œé¡¹ç›®ä»ªè¡¨æ¿ï¼Œå¯æä¾›æœ‰å…³é¡¹ç›®åŠå…¶è¿è¡ŒçŠ¶å†µçš„é«˜çº§æ¦‚è¿°ã€‚</li></ul><p>è®¸å¯ï¼šæ¯æœˆæœ€å¤šå…è´¹ä½¿ç”¨100ä¸ªç‰ˆæœ¬ï¼Œæ— é™ç‰ˆæœ¬ä»$49&#x2F;æœˆå¼€å§‹ã€‚ä½ å¯ä»¥ä¸ºæ›´å¤§çš„å®ä¾‹å¤§å°è´­ä¹°æ›´å¤šçš„å¹¶å‘æ„å»ºæˆ–æ›´å¤šçš„å¹¶è¡Œç®¡é“ã€‚</p><p>ä¸»é¡µï¼š <a href="https://codeship.com/">https://codeship.com/</a></p><h2 id="GoCD"><a href="#GoCD" class="headerlink" title="GoCD"></a>GoCD</h2><p>GoCD æ¥è‡ª ThoughtWorksï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç å·¥å…·ï¼Œç”¨äºæ„å»ºå’Œå‘å¸ƒæ”¯æŒ CI&#x2F;CD ä¸Šçš„ç°ä»£åŸºç¡€ç»“æ„çš„è½¯ä»¶ã€‚</p><ul><li>è½»æ¾é…ç½®ç›¸å…³æ€§ä»¥å®ç°å¿«é€Ÿåé¦ˆå’ŒæŒ‰éœ€éƒ¨ç½²</li><li>ä¿ƒè¿›å¯ä¿¡æ„ä»¶ï¼šæ¯ä¸ªç®¡é“å®ä¾‹éƒ½é”šå®šåˆ°ç‰¹å®šçš„å˜æ›´é›†</li><li>æä¾›å¯¹ç«¯åˆ°ç«¯å·¥ä½œæµç¨‹çš„æ§åˆ¶ï¼Œä¸€ç›®äº†ç„¶åœ°è·Ÿè¸ªä»æäº¤åˆ°éƒ¨ç½²çš„æ›´æ”¹</li><li>å®¹æ˜“çœ‹åˆ°ä¸Šæ¸¸å’Œä¸‹æ¸¸</li><li>éšæ—¶éƒ¨ç½²ä»»ä½•ç‰ˆæœ¬</li><li>å…è®¸å°†ä»»ä½•å·²çŸ¥çš„è‰¯å¥½ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ä½ å–œæ¬¢çš„ä»»ä½•ä½ç½®</li><li>é€šè¿‡æ¯”è¾ƒå†…éƒ¨ç‰ˆæœ¬åŠŸèƒ½è·å¾—ç”¨äºä»»ä½•éƒ¨ç½²çš„ç®€å•ç‰©æ–™æ¸…å•</li><li>é€šè¿‡ GoCD æ¨¡æ¿ç³»ç»Ÿé‡ç”¨ç®¡é“é…ç½®ï¼Œä½¿é…ç½®ä¿æŒæ•´æ´</li><li>å·²ç»æœ‰è®¸å¤šæ’ä»¶</li></ul><p>è®¸å¯ï¼šå…è´¹å’Œå¼€æº</p><p>ä¸»é¡µï¼š<a href="https://www.gocd.org/">https://www.gocd.org/</a></p><h2 id="Wercker"><a href="#Wercker" class="headerlink" title="Wercker"></a>Wercker</h2><p>å¯¹äºæ­£åœ¨ä½¿ç”¨æˆ–æ­£åœ¨è€ƒè™‘åŸºäº Docker å¯åŠ¨æ–°é¡¹ç›®çš„å¼€å‘äººå‘˜ï¼ŒWercker å¯èƒ½æ˜¯ä¸€ä¸ªåˆé€‚çš„é€‰æ‹©ã€‚Wercker æ”¯æŒç»„ç»‡åŠå…¶å¼€å‘å›¢é˜Ÿä½¿ç”¨ CI&#x2F;CDï¼Œå¾®æœåŠ¡å’Œ Dockerã€‚</p><p>2017 å¹´ 4 æœˆ 17 æ—¥ï¼Œç”²éª¨æ–‡å®£å¸ƒå·²ç­¾ç½²æœ€ç»ˆåè®®æ”¶è´­ Werckerã€‚</p><p>Wercker ä¸»è¦ç‰¹æ€§:</p><ul><li>Git é›†æˆï¼ŒåŒ…æ‹¬ GitHubï¼ŒBitbucketï¼ŒGitLab å’Œç‰ˆæœ¬æ§åˆ¶</li><li>ä½¿ç”¨ Wercker CLI åœ¨æœ¬åœ°å¤åˆ¶ SaaS ç¯å¢ƒï¼Œè¿™æœ‰åŠ©äºåœ¨éƒ¨ç½²ä¹‹å‰è°ƒè¯•å’Œæµ‹è¯•ç®¡é“</li><li>æ”¯æŒ Wercker çš„ Docker é›†æˆä»¥æ„å»ºæœ€å°‘çš„å®¹å™¨å¹¶ä½¿å°ºå¯¸å¯ç®¡ç†</li><li>Walterbot â€“ Wercker ä¸­çš„èŠå¤©æœºå™¨äºº â€“ å…è®¸ä½ ä¸é€šçŸ¥äº¤äº’ä»¥æ›´æ–°æ„å»ºçŠ¶æ€</li><li>ç¯å¢ƒå˜é‡æœ‰åŠ©äºä½¿æ•æ„Ÿä¿¡æ¯è¿œç¦»å­˜å‚¨åº“</li><li>Wercker åˆ©ç”¨å…³é”®å®‰å…¨åŠŸèƒ½ï¼ˆåŒ…æ‹¬æºä»£ç ä¿æŠ¤ï¼‰æ¥å…³é—­æµ‹è¯•æ—¥å¿—ï¼Œå—ä¿æŠ¤çš„ç¯å¢ƒå˜é‡ä»¥åŠç”¨æˆ·å’Œé¡¹ç›®çš„å¯è‡ªå®šä¹‰æƒé™</li></ul><p>è®¸å¯ï¼šç”²éª¨æ–‡åœ¨æ”¶è´­åæœªæä¾› Wercker çš„ä»·æ ¼ä¿¡æ¯ã€‚</p><p>ä¸»é¡µï¼š<a href="https://app.wercker.com/">https://app.wercker.com</a></p><h2 id="Semaphore"><a href="#Semaphore" class="headerlink" title="Semaphore"></a>Semaphore</h2><p>Semaphore æ˜¯ä¸€é¡¹æ‰˜ç®¡çš„ CI&#x2F;CD æœåŠ¡ï¼Œç”¨äºæµ‹è¯•å’Œéƒ¨ç½²è½¯ä»¶é¡¹ç›®ã€‚ Semaphore é€šè¿‡åŸºäºæ‹‰å–è¯·æ±‚çš„å¼€å‘è¿‡ç¨‹æ¥å»ºç«‹ CI&#x2F;CD æ ‡å‡†ã€‚</p><p>Semaphore ä¸»è¦ç‰¹æ€§:</p><ul><li>ä¸ GitHub é›†æˆ</li><li>è‡ªåŠ¨æ‰§è¡Œä»»ä½•è¿ç»­äº¤ä»˜æµç¨‹</li><li>åœ¨æœ€å¿«çš„ CI&#x2F;CD å¹³å°ä¸Šè¿è¡Œ</li><li>è‡ªåŠ¨ç¼©æ”¾ä½ çš„é¡¹ç›®ï¼Œä»¥ä¾¿ä½ ä»…éœ€æ”¯ä»˜ä½¿ç”¨è´¹ç”¨</li><li>æœ¬æœº Docker æ”¯æŒã€‚æµ‹è¯•å’Œéƒ¨ç½²åŸºäº Docker çš„åº”ç”¨ç¨‹åº</li><li>æä¾› Booster â€“ä¸€ç§åŠŸèƒ½ï¼Œç”¨äºé€šè¿‡è‡ªåŠ¨å¹¶è¡ŒåŒ–Rubyé¡¹ç›®çš„æ„å»ºæ¥å‡å°‘æµ‹è¯•å¥—ä»¶çš„è¿è¡Œæ—¶é—´</li></ul><p>è®¸å¯ï¼šçµæ´»ã€‚ä½¿ç”¨ä¼ ç»Ÿçš„CIæœåŠ¡ï¼Œä½ ä¼šå—åˆ°è®¡åˆ’å®¹é‡çš„é™åˆ¶ã€‚åŒæ—¶ï¼ŒSemaphore 2.0 å°†æ ¹æ®ä½ å›¢é˜Ÿçš„å®é™…éœ€æ±‚è¿›è¡Œæ‰©å±•ï¼Œå› æ­¤ä½ æ— éœ€ä½¿ç”¨è¯¥å·¥å…·å°±ä¸å¿…ä»˜è´¹</p><p>ä¸»é¡µï¼š<a href="https://semaphoreci.com/">https://semaphoreci.com/</a></p><h2 id="Nevercode"><a href="#Nevercode" class="headerlink" title="Nevercode"></a>Nevercode</h2><p>Nevercode æ”¯æŒç§»åŠ¨åº”ç”¨ç¨‹åºçš„ CI&#x2F;CDã€‚å®ƒæœ‰åŠ©äºæ›´â€‹â€‹å¿«åœ°æ„å»ºï¼Œæµ‹è¯•å’Œå‘å¸ƒæœ¬æœºå’Œè·¨å¹³å°åº”ç”¨ç¨‹åºã€‚</p><p>Nevercode ä¸»è¦ç‰¹æ€§:</p><ul><li>è‡ªåŠ¨é…ç½®å’Œè®¾ç½®</li><li>æµ‹è¯•è‡ªåŠ¨åŒ–ï¼šå•å…ƒå’ŒUIæµ‹è¯•ï¼Œä»£ç åˆ†æï¼ŒçœŸå®è®¾å¤‡æµ‹è¯•ï¼Œæµ‹è¯•å¹¶è¡ŒåŒ–</li><li>è‡ªåŠ¨å‘å¸ƒï¼šiTunes Connectï¼ŒGoogle Playï¼ŒCrashlyticsï¼ŒTâ€‹â€‹estFairyï¼ŒHockeyApp</li><li>ä½ çš„æ„å»ºå’Œæµ‹è¯•çŠ¶æ€çš„è¯¦ç»†æ¦‚è¿°</li></ul><p>è®¸å¯ï¼šçµæ´»ã€‚é’ˆå¯¹ä¸åŒéœ€æ±‚è¿›è¡ŒæŒç»­é›†æˆçš„ä¸åŒè®¡åˆ’ã€‚ä½ å¯ä»¥ä»æ ‡å‡†è®¡åˆ’ä¸­é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥è¯·æ±‚æ ¹æ®è‡ªå·±çš„éœ€æ±‚é‡èº«å®šåˆ¶çš„è®¡åˆ’ã€‚</p><p>ä¸»é¡µï¼š<a href="https://nevercode.io/">https://nevercode.io/</a></p><h2 id="Spinnaker"><a href="#Spinnaker" class="headerlink" title="Spinnaker"></a>Spinnaker</h2><p>Spinnaker æ˜¯ä¸€ä¸ªå¤šäº‘è¿ç»­äº¤ä»˜å¹³å°ï¼Œæ”¯æŒåœ¨ä¸åŒçš„äº‘æä¾›å•†ä¹‹é—´å‘å¸ƒå’Œéƒ¨ç½²è½¯ä»¶æ›´æ”¹ï¼ŒåŒ…æ‹¬ AWS EC2ï¼ŒKubernetesï¼ŒGoogle Compute Engineï¼ŒGoogle Kubernetes Engineï¼ŒGoogle App Engine ç­‰ã€‚</p><p>Spinnakerä¸»è¦ç‰¹æ€§:</p><ul><li>åˆ›å»ºéƒ¨ç½²ç®¡é“ï¼Œä»¥è¿è¡Œé›†æˆå’Œç³»ç»Ÿæµ‹è¯•ï¼Œæ—‹è½¬æœåŠ¡å™¨ç»„å’Œé™ä½æœåŠ¡å™¨ç»„ä»¥åŠç›‘è§†éƒ¨ç½²ã€‚é€šè¿‡ Git äº‹ä»¶ï¼ŒJenkinsï¼ŒTravis CIï¼ŒDockerï¼Œcron æˆ–å…¶ä»– Spinnaker ç®¡é“è§¦å‘ç®¡é“</li><li>åˆ›å»ºå’Œéƒ¨ç½²ä¸å¯å˜æ˜ åƒï¼Œä»¥å®ç°æ›´å¿«çš„éƒ¨ç½²ï¼Œæ›´è½»æ¾çš„å›æ»šä»¥åŠæ¶ˆé™¤éš¾ä»¥è°ƒè¯•çš„é…ç½®æ¼‚ç§»é—®é¢˜</li><li>ä½¿ç”¨å®ƒä»¬çš„æŒ‡æ ‡è¿›è¡Œé‡‘ä¸é›€åˆ†æï¼Œå°†ä½ çš„å‘è¡Œç‰ˆä¸è¯¸å¦‚ Datadogï¼ŒPrometheusï¼ŒStackdriver æˆ– SignalFx çš„ç›‘è§†æœåŠ¡ç›¸å…³è”</li><li>ä½¿ç”¨Halyard â€“ Spinnakerçš„CLIç®¡ç†å·¥å…·å®‰è£…ï¼Œé…ç½®å’Œæ›´æ–°ä½ çš„ Spinnaker å®ä¾‹</li><li>è®¾ç½®ç”µå­é‚®ä»¶ï¼ŒSlackï¼ŒHipChat æˆ– SMS çš„äº‹ä»¶é€šçŸ¥ï¼ˆé€šè¿‡ Twilioï¼‰</li></ul><p>è®¸å¯ï¼šå¼€æº</p><p>ä¸»é¡µï¼š<a href="https://www.spinnaker.io/">https://www.spinnaker.io/</a></p><h2 id="Buildbot"><a href="#Buildbot" class="headerlink" title="Buildbot"></a>Buildbot</h2><p>Buildbot æ˜¯ä¸€ä¸ªåŸºäº Python çš„ CI æ¡†æ¶ï¼Œå¯è‡ªåŠ¨æ‰§è¡Œç¼–è¯‘å’Œæµ‹è¯•å‘¨æœŸä»¥éªŒè¯ä»£ç æ›´æ”¹ï¼Œç„¶ååœ¨æ¯æ¬¡æ›´æ”¹åè‡ªåŠ¨é‡å»ºå¹¶æµ‹è¯•æ ‘ã€‚å› æ­¤ï¼Œå¯ä»¥å¿«é€ŸæŸ¥æ˜æ„å»ºé—®é¢˜ã€‚</p><p>Buildbot ä¸»è¦ç‰¹æ€§:</p><ul><li>è‡ªåŠ¨åŒ–æ„å»ºç³»ç»Ÿï¼Œåº”ç”¨ç¨‹åºéƒ¨ç½²ä»¥åŠå¤æ‚è½¯ä»¶å‘å¸ƒè¿‡ç¨‹çš„ç®¡ç†</li><li>æ”¯æŒè·¨å¤šä¸ªå¹³å°çš„åˆ†å¸ƒå¼å¹¶è¡Œæ‰§è¡Œï¼Œä¸ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„çµæ´»é›†æˆï¼Œå¹¿æ³›çš„çŠ¶æ€æŠ¥å‘Š</li><li>åœ¨å„ç§ä»å±å¹³å°ä¸Šè¿è¡Œæ„å»º</li><li>ä»»æ„æ„å»ºè¿‡ç¨‹å¹¶ä½¿ç”¨ C å’Œ Python å¤„ç†é¡¹ç›®</li><li>æœ€ä½ä¸»æœºè¦æ±‚ï¼šPython å’Œ Twisted</li><li>æ³¨æ„ï¼šBuildbot å°†åœæ­¢æ”¯æŒ Python 2.7ï¼Œå¹¶éœ€è¦è¿ç§»åˆ° Python 3ã€‚</li></ul><p>è®¸å¯ï¼šå¼€æº</p><p>ä¸»é¡µï¼š<a href="https://buildbot.net/">https://buildbot.net/</a></p><blockquote><p><a href="https://www.katalon.com/resources-center/blog/ci-cd-tools/">è‹±æ–‡åŸæ–‡</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ç»™ä½ çš„ Git ä»“åº“â€œç˜¦èº«â€</title>
      <link href="/2020/03/maintaining-git-repository/"/>
      <url>/2020/03/maintaining-git-repository/</url>
      
        <content type="html"><![CDATA[<p>å¯¹ Git ä»“åº“çš„ç»´æŠ¤é€šå¸¸æ˜¯ä¸ºäº†å‡å°‘ä»“åº“çš„å¤§å°ã€‚å¦‚æœä½ ä»å¦å¤–ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¯¼å…¥äº†ä¸€ä¸ªä»“åº“ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å¯¼å…¥åæ¸…é™¤æ‰ä¸å¿…è¦çš„æ–‡ä»¶ã€‚æœ¬æ–‡ä¸»è¦è®¨è®ºå¦‚ä½•ä» Git ä»“åº“ä¸­åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ã€‚</p><span id="more"></span><blockquote><p>è¯·æ ¼å¤–å°å¿ƒâ€¦..</p><p>æœ¬æ–‡ä¸­çš„æ­¥éª¤å’Œå·¥å…·ä½¿ç”¨çš„é«˜çº§æŠ€æœ¯æ¶‰åŠç ´åæ€§æ“ä½œã€‚ç¡®ä¿æ‚¨åœ¨å¼€å§‹ä¹‹å‰ä»”ç»†è¯»è¿‡å¹¶å¤‡ä»½äº†ä½ çš„ä»“åº“ï¼Œåˆ›å»ºä¸€ä¸ªå¤‡ä»½æœ€å®¹æ˜“çš„æ–¹å¼æ˜¯ä½¿ç”¨ â€“mirror æ ‡å¿—å¯¹ä½ çš„ä»“åº“å…‹éš†ï¼Œç„¶åå¯¹æ•´ä¸ªå…‹éš†çš„æ–‡ä»¶è¿›è¡Œæ‰“åŒ…å‹ç¼©ã€‚æœ‰äº†è¿™ä¸ªå¤‡ä»½ï¼Œå¦‚æœåœ¨ç»´æŠ¤æœŸé—´æ„å¤–æŸåäº†ä½ çš„ä»“åº“çš„å…³é”®å…ƒç´ ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å¤‡ä»½çš„ä»“åº“æ¥æ¢å¤ã€‚</p><p>è¯·è®°ä½ï¼Œä»“åº“ç»´æŠ¤å¯¹ä»“åº“çš„ç”¨æˆ·å¯èƒ½ä¼šæ˜¯æ¯ç­æ€§çš„ã€‚ä¸ä½ çš„å›¢é˜Ÿæˆ–è€…ä»“åº“çš„å…³æ³¨è€…è¿›è¡Œæ²Ÿé€šä¼šæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ç¡®ä¿æ¯ä¸ªäººéƒ½å·²ç»æ£€æŸ¥äº†ä»–ä»¬çš„ä»£ç ï¼Œå¹¶ä¸”åŒæ„åœ¨ä»“åº“ç»´æŠ¤æœŸé—´åœæ­¢å¼€å‘ã€‚</p></blockquote><h2 id="ç†è§£ä»-Git-çš„å†å²è®°å½•ä¸­åˆ é™¤æ–‡ä»¶"><a href="#ç†è§£ä»-Git-çš„å†å²è®°å½•ä¸­åˆ é™¤æ–‡ä»¶" class="headerlink" title="ç†è§£ä» Git çš„å†å²è®°å½•ä¸­åˆ é™¤æ–‡ä»¶"></a>ç†è§£ä» Git çš„å†å²è®°å½•ä¸­åˆ é™¤æ–‡ä»¶</h2><p>å›æƒ³ä¸€ä¸‹ï¼Œå…‹éš†ä»“åº“ä¼šå…‹éš†æ•´ä¸ªå†å²è®°å½•â€”â€”åŒ…æ‹¬æ¯ä¸ªæºä»£ç æ–‡ä»¶çš„æ‰€æœ‰ç‰ˆæœ¬ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·æäº¤äº†ä¸€ä¸ªè¾ƒå¤§çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸€ä¸ª JARï¼Œåˆ™éšåçš„æ¯æ¬¡å…‹éš†éƒ½ä¼šåŒ…å«è¿™ä¸ªæ–‡ä»¶ã€‚å³ä½¿ç”¨æˆ·æœ€ç»ˆåœ¨åé¢çš„æŸæ¬¡æäº¤ä¸­åˆ é™¤äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ä»¶ä»ç„¶å­˜åœ¨äºè¿™ä¸ªä»“åº“çš„å†å²è®°å½•ä¸­ã€‚è¦æƒ³å®Œå…¨çš„ä»ä½ çš„ä»“åº“ä¸­åˆ é™¤è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¿…é¡»ï¼š</p><ul><li>ä»ä½ çš„é¡¹ç›®çš„å½“å‰çš„æ–‡ä»¶æ ‘ä¸­åˆ é™¤è¯¥æ–‡ä»¶;</li><li>ä»ä»“åº“çš„å†å²è®°å½•ä¸­åˆ é™¤æ–‡ä»¶â€”â€”é‡å†™ Git å†å²è®°å½•ï¼Œä»åŒ…å«è¯¥æ–‡ä»¶çš„æ‰€æœ‰çš„æäº¤ä¸­åˆ é™¤è¿™ä¸ªæ–‡ä»¶;</li><li>åˆ é™¤æŒ‡å‘æ—§çš„æäº¤å†å²è®°å½•çš„æ‰€æœ‰ reflog å†å²è®°å½•;</li><li>é‡æ–°æ•´ç†ä»“åº“ï¼Œä½¿ç”¨ <code>git gc</code> å¯¹ç°åœ¨æ²¡æœ‰ä½¿ç”¨çš„æ•°æ®è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</li></ul><p>Git çš„ <code>gc</code>ï¼ˆåƒåœ¾å›æ”¶ï¼‰å°†é€šè¿‡ä½ çš„ä»»ä½•ä¸€ä¸ªåˆ†æ”¯æˆ–è€…æ ‡ç­¾æ¥åˆ é™¤ä»“åº“ä¸­æ‰€æœ‰çš„å®é™…æ²¡ç”¨çš„æˆ–è€…ä»¥æŸç§æ–¹å¼å¼•ç”¨çš„æ•°æ®ã€‚ä¸ºäº†ä½¿å…¶å‘æŒ¥ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦é‡å†™åŒ…å«ä¸éœ€è¦çš„æ–‡ä»¶çš„æ‰€æœ‰ Git ä»“åº“å†å²è®°å½•ï¼Œä»“åº“å°†ä¸å†å¼•ç”¨å®ƒ <code>git gc</code> å°†ä¼šä¸¢å¼ƒæ‰€æœ‰æ²¡ç”¨çš„æ•°æ®ã€‚</p><p>é‡å†™å­˜å‚¨åº“å†å²æ˜¯ä¸€ä¸ªæ£˜æ‰‹çš„äº‹æƒ…ï¼Œå› ä¸ºæ¯ä¸ªæäº¤éƒ½ä¾èµ–å®ƒçš„çˆ¶æäº¤ï¼Œæ‰€ä»¥ä»»ä½•ä¸€ä¸ªå¾ˆå°çš„æ”¹å˜éƒ½ä¼šæ”¹å˜å®ƒçš„æ¯ä¸€ä¸ªéšåçš„æäº¤çš„æäº¤ã€‚æœ‰ä¸¤ä¸ªè‡ªåŠ¨åŒ–çš„å·¥å…·å¯ä»¥å¸®åŠ©ä½ åšè¿™ä»¶äº‹ï¼š</p><ol><li><code>BFG Repo Cleaner</code> â€”â€” å¿«é€Ÿã€ç®€å•ä¸”æ˜“äºä½¿ç”¨ï¼Œéœ€è¦ Java 6 æˆ–è€…æ›´é«˜ç‰ˆæœ¬çš„è¿è¡Œç¯å¢ƒã€‚</li><li><code>git filter-branch</code> â€”â€” åŠŸèƒ½å¼ºå¤§ã€é…ç½®éº»çƒ¦ï¼Œç”¨äºå¤§äºä»“åº“æ—¶é€Ÿåº¦è¾ƒæ…¢ï¼Œæ˜¯æ ¸å¿ƒ Git å¥—ä»¶çš„ä¸€éƒ¨åˆ†ã€‚</li></ol><p>åˆ‡è®°ï¼Œå½“ä½ é‡å†™å†å²è®°å½•åï¼Œæ— è®ºä½ æ˜¯ä½¿ç”¨ BFG è¿˜æ˜¯ä½¿ç”¨ filter-branchï¼Œä½ éƒ½éœ€è¦åˆ é™¤æŒ‡å‘æ—§çš„å†å²è®°å½•çš„ <code>reflog</code> æ¡ç›®ï¼Œæœ€åè¿è¡Œåƒåœ¾å›æ”¶å™¨æ¥åˆ é™¤æ—§çš„æ•°æ®ã€‚</p><h2 id="ä½¿ç”¨-BFG-é‡å†™å†å²è®°å½•"><a href="#ä½¿ç”¨-BFG-é‡å†™å†å²è®°å½•" class="headerlink" title="ä½¿ç”¨ BFG é‡å†™å†å²è®°å½•"></a>ä½¿ç”¨ BFG é‡å†™å†å²è®°å½•</h2><p>BFG æ˜¯ä¸ºå°†åƒå¤§æ–‡ä»¶æˆ–è€…å¯†ç è¿™äº›ä¸æƒ³è¦çš„æ•°æ®ä» Git ä»“åº“ä¸­åˆ é™¤è€Œä¸“é—¨è®¾è®¡çš„ï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸€ä¸ªç®€å•çš„æ ‡å¿—ç”¨æ¥åˆ é™¤é‚£äº›å¤§çš„å†å²æ–‡ä»¶ï¼ˆä¸åœ¨å½“å‰çš„æäº¤é‡Œé¢ï¼‰ï¼š<code>--strip-blobs-bigger-than</code></p><p>BFG <a href="https://repo1.maven.org/maven2/com/madgag/bfg">ä¸‹è½½åœ°å€</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar bfg.jar --strip-blobs-than 100M</span><br></pre></td></tr></table></figure><p>å¤§å°è¶…è¿‡ 100MB çš„ä»»ä½•æ–‡ä»¶ï¼ˆä¸åŒ…å«åœ¨ä½ æœ€è¿‘çš„æäº¤ä¸­çš„æ–‡ä»¶â€”â€”å› ä¸º BFG é»˜è®¤ä¼šä¿æŠ¤ä½ çš„æœ€æ–°æäº¤çš„å†…å®¹ï¼‰å°†ä¼šä»ä½ çš„ Git ä»“åº“çš„å†å²è®°å½•ä¸­åˆ é™¤ã€‚å¦‚æœä½ æƒ³ç”¨åå­—æ¥æŒ‡æ˜å…·ä½“çš„æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar bfg.jar --delete-files *.mp4</span><br></pre></td></tr></table></figure><p>BFG çš„é€Ÿåº¦è¦æ¯” git filter-branch å¿« 10-1000 å€ï¼Œè€Œä¸”é€šå¸¸æ›´å®¹æ˜“ä½¿ç”¨â€”â€”æŸ¥çœ‹å®Œæ•´çš„<a href="https://rtyley.github.io/bfg-repo-cleaner/#usage">ä½¿ç”¨è¯´æ˜</a>å’Œ<a href="https://rtyley.github.io/bfg-repo-cleaner/#examples">ç¤ºä¾‹</a>è·å–æ›´å¤šç»†èŠ‚ã€‚</p><h2 id="æˆ–è€…ï¼Œä½¿ç”¨-git-filter-branch-æ¥é‡å†™å†å²è®°å½•"><a href="#æˆ–è€…ï¼Œä½¿ç”¨-git-filter-branch-æ¥é‡å†™å†å²è®°å½•" class="headerlink" title="æˆ–è€…ï¼Œä½¿ç”¨ git filter-branch æ¥é‡å†™å†å²è®°å½•"></a>æˆ–è€…ï¼Œä½¿ç”¨ git filter-branch æ¥é‡å†™å†å²è®°å½•</h2><p><code>filter-branch</code> å‘½ä»¤å¯ä»¥å¯¹ Git ä»“åº“çš„å†å²è®°å½•é‡å†™ï¼Œå°±åƒ BFG ä¸€æ ·ï¼Œä½†æ˜¯è¿‡ç¨‹æ›´æ…¢å’Œæ›´æ‰‹åŠ¨åŒ–ã€‚å¦‚æœä½ ä¸çŸ¥é“è¿™äº›å¤§æ–‡ä»¶åœ¨å“ªé‡Œï¼Œé‚£ä¹ˆä½ ç¬¬ä¸€æ­¥å°±éœ€è¦æ‰¾åˆ°å®ƒä»¬ï¼š</p><h3 id="æ‰‹åŠ¨æŸ¥çœ‹ä½ -Git-ä»“åº“ä¸­çš„å¤§æ–‡ä»¶"><a href="#æ‰‹åŠ¨æŸ¥çœ‹ä½ -Git-ä»“åº“ä¸­çš„å¤§æ–‡ä»¶" class="headerlink" title="æ‰‹åŠ¨æŸ¥çœ‹ä½  Git ä»“åº“ä¸­çš„å¤§æ–‡ä»¶"></a>æ‰‹åŠ¨æŸ¥çœ‹ä½  Git ä»“åº“ä¸­çš„å¤§æ–‡ä»¶</h3><p><a href="https://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/">Antony Stubbs</a> å†™äº†ä¸€ä¸ªå¯ä»¥å¾ˆå¥½åœ°å®Œæˆè¿™ä¸ªåŠŸèƒ½çš„ BASH è„šæœ¬ã€‚è¯¥è„šæœ¬å¯ä»¥æ£€æŸ¥ä½ çš„åŒ…æ–‡ä»¶çš„å†…å®¹å¹¶åˆ—å‡ºå¤§æ–‡ä»¶ã€‚åœ¨ä½ å¼€å§‹åˆ é™¤æ–‡ä»¶ä¹‹å‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œè·å–å¹¶å®‰è£…æ­¤è„šæœ¬ï¼š</p><ol><li><p><a href="https://confluence.atlassian.com/bitbucket/files/321848291/321979854/1/1360604134990/git_find_big.sh">ä¸‹è½½è„šæœ¬</a>åˆ°ä½ çš„æœ¬åœ°çš„ç³»ç»Ÿ</p></li><li><p>å°†å®ƒæ”¾åœ¨ä¸€ä¸ªå¯ä»¥è®¿é—®ä½ çš„ Git ä»“åº“çš„æ˜“äºæ‰¾åˆ°çš„ä½ç½®</p></li><li><p>è®©è„šæœ¬æˆä¸ºå¯æ‰§è¡Œæ–‡ä»¶</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 777 git_find_big.sh</span><br></pre></td></tr></table></figure></li><li><p>å…‹éš†ä»“åº“åˆ°ä½ æœ¬åœ°ç³»ç»Ÿ</p></li><li><p>æ”¹å˜å½“å‰ç›®å½•åˆ°ä½ çš„ä»“åº“æ ¹ç›®å½•</p></li><li><p>æ‰‹åŠ¨è¿è¡Œ Git åƒåœ¾å›æ”¶å™¨</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git gc --auto</span><br></pre></td></tr></table></figure></li><li><p>æ‰¾å‡º .git æ–‡ä»¶å¤¹çš„å¤§å°</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„æ–‡ä»¶å¤§å°ï¼Œä»¥ä¾¿éšåå‚è€ƒ</span></span><br><span class="line"><span class="built_in">du</span> -hs .git/objects</span><br><span class="line">45M .git/objects</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œ <code>git_find_big.sh</code> è„šæœ¬æ¥åˆ—å‡ºä½ çš„ä»“åº“ä¸­çš„å¤§æ–‡ä»¶</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git_find_big.sh</span><br><span class="line">All sizes are <span class="keyword">in</span> kB<span class="string">&#x27;s. The pack column is the size of the object, compressed, inside the pack file.</span></span><br><span class="line"><span class="string">size  pack  SHA                                       location</span></span><br><span class="line"><span class="string">592   580   e3117f48bc305dd1f5ae0df3419a0ce2d9617336  media/img/emojis.jar</span></span><br><span class="line"><span class="string">550   169   b594a7f59ba7ba9daebb20447a87ea4357874f43  media/js/aui/aui-dependencies.jar</span></span><br><span class="line"><span class="string">518   514   22f7f9a84905aaec019dae9ea1279a9450277130  media/images/screenshots/issue-tracker-wiki.jar</span></span><br><span class="line"><span class="string">337   92    1fd8ac97c9fecf74ba6246eacef8288e89b4bff5  media/js/lib/bundle.js</span></span><br><span class="line"><span class="string">240   239   e0c26d9959bd583e5ef32b6206fc8abe5fea8624  media/img/featuretour/heroshot.png</span></span><br></pre></td></tr></table></figure></li></ol><p>å¤§æ–‡ä»¶éƒ½æ˜¯ JAR æ–‡ä»¶ï¼ŒåŒ…çš„å¤§å°åˆ—æ˜¯æœ€ç›¸å…³çš„ã€‚aui-dependencies.jar è¢«å‹ç¼©åˆ° 169kbï¼Œä½†æ˜¯ emojis.jar åªå‹ç¼©åˆ° 500kbã€‚emojis.jar å°±æ˜¯ä¸€ä¸ªå¾…åˆ é™¤çš„å¯¹è±¡ã€‚</p><h3 id="è¿è¡Œ-filter-branch"><a href="#è¿è¡Œ-filter-branch" class="headerlink" title="è¿è¡Œ filter-branch"></a>è¿è¡Œ filter-branch</h3><p>ä½ å¯ä»¥ç»™è¿™ä¸ªå‘½ä»¤ä¼ é€’ä¸€ä¸ªç”¨äºé‡å†™ Git ç´¢å¼•çš„è¿‡æ»¤å™¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¿‡æ»¤å™¨å¯ä»¥å¯ä»¥å°†æ¯ä¸ªæ£€ç´¢çš„æäº¤åˆ é™¤ã€‚è¿™ä¸ªç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git filter-branch --index-filter <span class="string">&#x27;git rm --cached --ignore-unmatch&amp;nbsp; _pathname_ &#x27;</span> commitHASH</span><br></pre></td></tr></table></figure><p><code>--index-filter</code> é€‰é¡¹å¯ä»¥ä¿®æ”¹ä»“åº“çš„ç´¢å¼•ï¼Œ<code>--cached</code> é€‰é¡¹ä»ç´¢å¼•ä¸­è€Œä¸æ˜¯ç£ç›˜æ¥åˆ é™¤æ–‡ä»¶ã€‚è¿™æ ·ä¼šæ›´å¿«ï¼Œå› ä¸ºä½ ä¸éœ€è¦åœ¨è¿è¡Œè¿™ä¸ªè¿‡æ»¤å™¨å‰æ£€æŸ¥æ¯ä¸ªä¿®è®¢ç‰ˆæœ¬ã€‚<br><code>git rm</code> ä¸­çš„ <code>ignore-unmatch</code> é€‰é¡¹å¯ä»¥é˜²æ­¢åœ¨å°è¯•ç§»èµ°ä¸å­˜åœ¨çš„æ–‡ä»¶ pathname çš„æ—¶å€™å‘½ä»¤å¤±è´¥ã€‚é€šè¿‡æŒ‡å®šä¸€ä¸ªæäº¤ HASH å€¼ï¼Œä½ å¯ä»¥ä»æ¯ä¸ªä»¥è¿™ä¸ª HASH å€¼å¼€å§‹çš„æäº¤ä¸­åˆ é™¤ pathnameã€‚è¦ä»å¼€å§‹å¤„åˆ é™¤ï¼Œä½ å¯ä»¥çœç•¥è¿™ä¸ªå‚æ•°æˆ–è€…æŒ‡å®šä¸º HEADã€‚</p><p>å¦‚æœä½ çš„å¤§æ–‡ä»¶åœ¨ä¸åŒçš„åˆ†æ”¯ï¼Œä½ å°†éœ€è¦é€šè¿‡åå­—æ¥åˆ é™¤æ¯ä¸ªæ–‡ä»¶ã€‚å¦‚æœå¤§æ–‡ä»¶éƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„åˆ†æ”¯ï¼Œä½ å¯ä»¥ç›´æ¥åˆ é™¤è¿™ä¸ªåˆ†æ”¯æœ¬èº«ã€‚</p><h4 id="é€‰é¡¹-1ï¼šé€šè¿‡æ–‡ä»¶ååˆ é™¤æ–‡ä»¶"><a href="#é€‰é¡¹-1ï¼šé€šè¿‡æ–‡ä»¶ååˆ é™¤æ–‡ä»¶" class="headerlink" title="é€‰é¡¹ 1ï¼šé€šè¿‡æ–‡ä»¶ååˆ é™¤æ–‡ä»¶"></a>é€‰é¡¹ 1ï¼šé€šè¿‡æ–‡ä»¶ååˆ é™¤æ–‡ä»¶</h4><p>ä½¿ç”¨ä¸‹é¢çš„æ­¥éª¤æ¥åˆ é™¤å¤§æ–‡ä»¶ï¼š</p><ol><li><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥åˆ é™¤ä½ æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå¤§æ–‡ä»¶</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git filter-branch --index-filter <span class="string">&#x27;git rm --cached --ignore-unmatch filename&#x27;</span> HEAD</span><br></pre></td></tr></table></figure></li><li><p>é‡å¤æ­¥éª¤ 1 æ‰¾åˆ°å‰©ä¸‹çš„æ¯ä¸ªå¤§æ–‡ä»¶</p></li><li><p>åœ¨ä½ çš„ä»“åº“é‡Œæ›´æ–°å¼•ç”¨ã€‚ <code>filter-branch</code> ä¼šä¸ºä½ åŸå…ˆçš„å¼•ç”¨åˆ›å»ºä¸€ä¸ª <code>refs/original/</code> ä¸‹çš„å¤‡ä»½ã€‚ä¸€æ—¦ä½ ç¡®ä¿¡å·²ç»åˆ é™¤äº†æ­£ç¡®çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆ é™¤å¤‡ä»½æ–‡ä»¶ï¼ŒåŒæ—¶å¯ä»¥è®©åƒåœ¾å›æ”¶å™¨å›æ”¶å¤§çš„å¯¹è±¡</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git for-each-ref --format=<span class="string">&quot;%(refname)&quot;</span> refs/original/ | xargs -n 1 git update-ref -d</span><br></pre></td></tr></table></figure></li></ol><h4 id="é€‰é¡¹-2ï¼šç›´æ¥åˆ é™¤åˆ†æ”¯"><a href="#é€‰é¡¹-2ï¼šç›´æ¥åˆ é™¤åˆ†æ”¯" class="headerlink" title="é€‰é¡¹ 2ï¼šç›´æ¥åˆ é™¤åˆ†æ”¯"></a>é€‰é¡¹ 2ï¼šç›´æ¥åˆ é™¤åˆ†æ”¯</h4><p>å¦‚æœä½ æ‰€æœ‰çš„å¤§æ–‡ä»¶éƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„åˆ†æ”¯ä¸Šï¼Œä½ å¯ä»¥ç›´æ¥åˆ é™¤è¿™ä¸ªåˆ†æ”¯ã€‚åˆ é™¤è¿™ä¸ªåˆ†æ”¯ä¼šè‡ªåŠ¨åˆ é™¤æ‰€æœ‰çš„å¼•ç”¨ã€‚</p><ol><li><p>åˆ é™¤åˆ†æ”¯</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -D PROJ567bugfix</span><br></pre></td></tr></table></figure></li><li><p>ä»åé¢çš„åˆ†æ”¯ä¸­åˆ é™¤æ‰€æœ‰çš„ reflog å¼•ç”¨</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git reflog expire --expire=now PROJ567bugfix</span><br></pre></td></tr></table></figure></li></ol><h4 id="å¯¹ä¸ç”¨çš„æ•°æ®åƒåœ¾å›æ”¶"><a href="#å¯¹ä¸ç”¨çš„æ•°æ®åƒåœ¾å›æ”¶" class="headerlink" title="å¯¹ä¸ç”¨çš„æ•°æ®åƒåœ¾å›æ”¶"></a>å¯¹ä¸ç”¨çš„æ•°æ®åƒåœ¾å›æ”¶</h4><ol><li><p>åˆ é™¤ä»ç°åœ¨åˆ°åé¢çš„æ‰€æœ‰ reflog å¼•ç”¨ï¼ˆé™¤éä½ æ˜ç¡®åœ°åªåœ¨ä¸€ä¸ªåˆ†æ”¯ä¸Šæ“ä½œï¼‰</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git reflog expire --expire=now --all</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡è¿è¡Œåƒåœ¾å›æ”¶å™¨å’Œåˆ é™¤æ—§çš„å¯¹è±¡é‡æ–°æ‰“åŒ…ä»“åº“ã€‚</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git gc --prune=now</span><br></pre></td></tr></table></figure></li><li><p>æŠŠä½ æ‰€æœ‰çš„ä¿®æ”¹æ¨é€å›ä»“åº“</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push --all --force</span><br></pre></td></tr></table></figure></li><li><p>ç¡®ä¿ä½ æ‰€æœ‰çš„æ ‡ç­¾ä¹Ÿæ˜¯å½“å‰æœ€æ–°çš„</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push --tags --force</span><br></pre></td></tr></table></figure></li></ol><p><a href="https://confluence.atlassian.com/bitbucket/maintaining-a-git-repository-321848291.html">è‹±æ–‡åŸæ–‡åœ°å€</a></p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ¬¾å…è´¹çš„ C/C++ é™æ€ä»£ç åˆ†æå·¥å…· Cppcheck ä¸ Jenkins é›†æˆ</title>
      <link href="/2020/02/cppcheck/"/>
      <url>/2020/02/cppcheck/</url>
      
        <content type="html"><![CDATA[<p>ç”±äºå†å²é—ç•™åŸå› ï¼Œæˆ‘ä»¬å½“å‰äº§å“çš„ä»£ç ä»“åº“é‡Œé—ç•™å¾ˆå¤š Warningï¼Œè¿™äº› Warning ä¸æ˜¯ä¸€æ—¶åŠä¼šå¯ä»¥è§£å†³æ‰çš„ã€‚åªæœ‰é€šè¿‡ä¸æ–­çš„ä¸°å¯Œè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œæ¥ä¿éšœæœ€åçš„è´¨é‡å…³å¡ï¼Œæ‰æ•¢æœ‰æ¡ä¸ç´Šçš„è¿›è¡Œ Warining çš„ä¿®å¤ï¼Œåœ¨æ¬¡ä¹‹å‰ï¼Œå¦‚ä½•æœ‰æ•ˆæœç»ç»§ç»­å¼•å…¥æ›´å¤šçš„ Warining æ˜¯å½“ä¸‹åº”è¯¥åšçš„ã€‚</p><span id="more"></span><p>å› æ­¤æˆ‘æƒ³åœ¨ Pull Request é˜¶æ®µåŠ å…¥ C&#x2F;C++ çš„é™æ€ä»£ç æ‰«æçš„é›†æˆï¼Œä½†æ˜¯å¾ˆå¤šå·¥å…·åªè¦æ¶‰åŠçš„æ˜¯ C&#x2F;C++ ç»å¸¸éƒ½æ˜¯æ”¶è´¹çš„ï¼Œæ¯”å¦‚è¿™é‡Œé¦–é€‰çš„ SonarQubeï¼ŒCommunity ç‰ˆæœ¬ä¸æ”¯æŒ C&#x2F;C++ ä»£ç æ‰«æï¼Œåªæœ‰ Developer ä»¥åŠ Enterprise ç­‰ä»˜è´¹ç‰ˆæœ¬æ‰æ”¯æŒï¼Œåœ¨é™æ€ä»£ç æ‰«æè¿˜æ²¡æœ‰å¸¦æ¥æ”¶ç›Šä¹‹å‰ï¼Œç›²ç›®çš„ä»˜è´¹åªä¼šç»™äº§å“å¸¦æ¥æ›´å¤šçš„æˆæœ¬ï¼Œå› æ­¤å†³å®šå…ˆå¯»æ‰¾å…¶ä»–å¼€æºå·¥å…·æ¥æ›¿ä»£ã€‚</p><p>æœ€ç»ˆæˆ‘é€‰æ‹©äº† CPPCheckï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p><ol><li>è¿™æ˜¯ä¸ºæ•°ä¸å¤šçš„ C&#x2F;C++ å¼€æºé™æ€ä»£ç æ‰«æå·¥å…·</li><li>å¯ä»¥ä¸ Jenkins é›†æˆï¼Œå¯ä»¥åœ¨ Jenkins é‡ŒæŸ¥çœ‹ç»“æœæŠ¥å‘Š</li><li>æ”¯æŒ Jenkins Pipeline</li></ol><p>æœ¬æ–‡è®°å½•æˆ‘è°ƒæŸ¥å’Œä½¿ç”¨çš„ç»éªŒï¼Œå¦‚æœæ‚¨ä¹Ÿç›¸å…³çš„éœ€æ±‚ï¼Œæä¾›ä¸€ç‚¹å‚è€ƒã€‚</p><h2 id="å®‰è£…-Cppcheck"><a href="#å®‰è£…-Cppcheck" class="headerlink" title="å®‰è£… Cppcheck"></a>å®‰è£… Cppcheck</h2><p>å®‰è£…åˆ° Linux</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum install cppcheck.x86_64</span><br></pre></td></tr></table></figure><p>å…¶ä»–å¹³å°å®‰è£…è¯·å‚è€ƒ cppcheck <a href="http://cppcheck.sourceforge.net/">å®˜ç½‘</a></p><p>å¦‚æœä½ åœ¨ Linux æ— æ³•é€šè¿‡å‘½ä»¤ä¸€é”®å®‰è£…ï¼Œä¹Ÿå¯é€šè¿‡ä¸‹è½½æºä»£ç æ„å»º cppcheckã€‚ä»¥ä¸‹æ˜¯ä»ä»£ç æ‰‹åŠ¨æ„å»ºä¸€ä¸ª cppcheck å¯æ‰§è¡Œæ–‡ä»¶çš„æ­¥éª¤</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> opt &amp;&amp; <span class="built_in">mkdir</span> cppcheck &amp;&amp; <span class="built_in">cd</span> cppcheck</span><br><span class="line"><span class="comment"># ä¸‹è½½ä»£ç </span></span><br><span class="line">wget https://github.com/danmar/cppcheck/archive/1.90.tar.gz</span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvf 1.90.tar.gz</span><br><span class="line"><span class="comment"># make build</span></span><br><span class="line"><span class="built_in">cd</span> cppcheck-1.90</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">cmake --build .</span><br><span class="line"><span class="comment"># link</span></span><br><span class="line">sudo <span class="built_in">ln</span> -s /opt/cppcheck/cppcheck-1.90/cppcheck /usr/bin/cppcheck</span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line"><span class="built_in">which</span> cppcheck</span><br><span class="line">/usr/bin/cppcheck</span><br><span class="line">cppcheck --version</span><br><span class="line">Cppcheck 1.90</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-cppcheck-é™æ€ä»£ç æ‰«æ"><a href="#ä½¿ç”¨-cppcheck-é™æ€ä»£ç æ‰«æ" class="headerlink" title="ä½¿ç”¨ cppcheck é™æ€ä»£ç æ‰«æ"></a>ä½¿ç”¨ cppcheck é™æ€ä»£ç æ‰«æ</h2><p>åœ¨ä¸ Jenkins é›†æˆä¹‹å‰ï¼Œå…ˆçœ‹çœ‹è¿™ä¸ªå·¥å…·æ€ä¹ˆç”¨ã€‚é€šè¿‡æŸ¥é˜…<a href="http://cppcheck.sourceforge.net/manual.pdf">Cppcheck å®˜æ–¹æ–‡æ¡£</a>ï¼Œä¸€èˆ¬çš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚æ‰«æ src ä¸‹ public å’Œ themes ä¸¤ä¸ªç›®å½•ä¸‹çš„ä»£ç å°†ç»“æœè¾“å‡ºåˆ° cppcheck.xml</span></span><br><span class="line">cppcheck src/public src/themes --xml 2&gt; cppcheck.xml</span><br></pre></td></tr></table></figure><h2 id="Cppcheck-ä¸-Jenkins-é›†æˆ"><a href="#Cppcheck-ä¸-Jenkins-é›†æˆ" class="headerlink" title="Cppcheck ä¸ Jenkins é›†æˆ"></a>Cppcheck ä¸ Jenkins é›†æˆ</h2><p>é¦–å…ˆï¼Œä¸‹è½½ Cppcheck Jenkins <a href="https://plugins.jenkins.io/cppcheck/">æ’ä»¶</a>ï¼Œé€šè¿‡ Pipeline Syntax ç”Ÿæˆäº†æ­¤ä»£ç  <code>publishCppcheck pattern: &#39;cppcheck.xml&#39;</code></p><p>ä½†æ˜¯åœ¨è¯»å– xml æ–‡ä»¶è¿›è¡ŒæŠ¥å‘Šå±•ç¤ºæ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>é—®é¢˜1ï¼šåˆ†æ cppcheck.xml æˆ‘åœ¨æœ‰çš„ Linux æœºå™¨ä¸ŠæˆåŠŸï¼Œæœ‰çš„æœºå™¨ä¸Šä¼šå¤±è´¥ï¼Œæˆ‘æ€€ç–‘æ˜¯æˆ‘çš„ JDK ç‰ˆæœ¬ä¸åŒæ‰€è‡´ã€‚Jenkins JIRA æˆ‘ä¹Ÿæ‰¾åˆ°äº†æ¬¡é—®é¢˜ <a href="https://issues.jenkins-ci.org/browse/JENKINS-60077">JENKINS-60077</a> ä½†ç›®å‰è¿˜æ²¡æœ‰äººæ¥è§£å†³ã€‚</p><p>æˆ‘ä¹‹æ‰€ä»¥æ²¡æœ‰ç»§ç»­å°è¯•å»è§£å†³é—®é¢˜1ï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯å®ƒæœ‰ä¸€ä¸ªå¯¹æˆ‘æ¥è¯´æ˜¯æ›´è‡´å‘½çš„ç¼ºé™·ï¼Œé‚£å°±æ˜¯ä¸‹é¢è¯´çš„é—®é¢˜ã€‚</p><p>é—®é¢˜2ï¼š æ— æ³•é€šè¿‡ Cppcheck Results æŠ¥å‘Šç›´æ¥æŸ¥çœ‹ä»£ç ï¼Œè¿™æ ·å°±ç®—æ‰«æå‡ºæ¥äº†é—®é¢˜è¿˜éœ€è¦å» git æˆ–æ˜¯æœ¬åœ°çš„ IDE ä¸Šå»æŸ¥çœ‹å…·ä½“çš„é—®é¢˜ï¼Œå¤§å¤§é™ä½æ•ˆç‡ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ä»£ç æ–‡ä»¶æ—¶ä¼šå‡ºé”™</span></span><br><span class="line">Can<span class="string">&#x27;t read file: Can&#x27;</span>t access the file: file:/disk1/agent/workspace/cppcheck-ud113/src/public/dummy/err_printf.c</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”å®˜æ–¹ä¹Ÿç›¸åº”çš„ Ticket è®°å½•äº†è¯¥é—®é¢˜ <a href="https://issues.jenkins-ci.org/browse/JENKINS-42613">JENKINS-42613</a> å’Œ <a href="https://issues.jenkins-ci.org/browse/JENKINS-54209">JENKINS-54209</a>ï¼ŒJENKINS-42613 ä¸€ç›´åœ¨ç­‰å¾… mergeï¼Œæˆªæ­¢å‘æ–‡ï¼Œéƒ½è¿˜æ˜¯æš‚æ—¶æ²¡æœ‰è§£å†³ã€‚</p><p>æœ€åæˆ‘å‘ç° <a href="https://plugins.jenkins.io/warnings-ng/">Warnings Next Generation</a> è¿™ä¸ªæ’ä»¶å°†å–ä»£æ•´ä¸ª Jenkins é™æ€åˆ†æå¥—ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†è¿™äº›æ’ä»¶ Android Lint, CheckStyle, Dry, FindBugs, PMD, Warnings, Static Analysis Utilities, Static Analysis Collectorï¼Œæœ€åé€šè¿‡ Warnings Next Generation æ’ä»¶è§£å†³äº†æŠ¥å‘Šå±•ç¤ºçš„é—®é¢˜ã€‚</p><p>è¿™é‡Œå¯ä»¥é€šè¿‡ Pipeline Syntax ç”Ÿæˆè¯»å–æŠ¥å‘Šä»£ç  <code>recordIssues(tools: [codeAnalysis(pattern: &#39;cppcheck.xml&#39;)])</code></p><p>æ›´å¤šæœ‰å…³ Warnings Next Generation æ’ä»¶çš„ä½¿ç”¨ï¼Œè¯·å‚çœ‹<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/doc/Documentation.md">æ–‡æ¡£</a></p><h3 id="æœ€ç»ˆ-Pipeline-ç¤ºä¾‹å¦‚ä¸‹"><a href="#æœ€ç»ˆ-Pipeline-ç¤ºä¾‹å¦‚ä¸‹" class="headerlink" title="æœ€ç»ˆ Pipeline ç¤ºä¾‹å¦‚ä¸‹"></a>æœ€ç»ˆ Pipeline ç¤ºä¾‹å¦‚ä¸‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline&#123;</span><br><span class="line">  agent &#123;</span><br><span class="line">    node &#123;</span><br><span class="line">      label <span class="string">&#x27;cppcheck&#x27;</span></span><br><span class="line">      customWorkspace <span class="string">&quot;/agent/workspace/cppcheck&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  parameters &#123;</span><br><span class="line">    string(name: <span class="string">&#x27;Branch&#x27;</span>, defaultValue: <span class="string">&#x27;develop&#x27;</span>, description: <span class="string">&#x27;Which branch do you want to do cppcheck?&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  options &#123;</span><br><span class="line">    timestamps ()</span><br><span class="line">    buildDiscarder(logRotator(numToKeepStr:<span class="string">&#x27;50&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stage(<span class="string">&quot;Checkout&quot;</span>)&#123;</span><br><span class="line">    steps&#123;</span><br><span class="line">      checkout([<span class="variable">$class</span>: <span class="string">&#x27;GitSCM&#x27;</span>, branches: [[name: <span class="string">&#x27;*/$&#123;Branch&#125;&#x27;</span>]],</span><br><span class="line">      browser: [<span class="variable">$class</span>: <span class="string">&#x27;BitbucketWeb&#x27;</span>, repoUrl: <span class="string">&#x27;https://git.yourcompany.com/projects/repos/cppcheck-example/browse&#x27;</span>],</span><br><span class="line">      doGenerateSubmoduleConfigurations: <span class="literal">false</span>, extensions: [</span><br><span class="line">      [<span class="variable">$class</span>: <span class="string">&#x27;LocalBranch&#x27;</span>, localBranch: <span class="string">&#x27;**&#x27;</span>], [<span class="variable">$class</span>: <span class="string">&#x27;CheckoutOption&#x27;</span>, <span class="built_in">timeout</span>: 30], [<span class="variable">$class</span>: <span class="string">&#x27;CloneOption&#x27;</span>, depth: 1, noTags: <span class="literal">false</span>, reference: <span class="string">&#x27;&#x27;</span>, shallow: <span class="literal">true</span>,   <span class="built_in">timeout</span>: 30]], submoduleCfg: [],</span><br><span class="line">      userRemoteConfigs: [[credentialsId: <span class="string">&#x27;d1cbab74-823d-41aa-abb7&#x27;</span>, url: <span class="string">&#x27;https://git.yourcompany.com/scm/cppcheck-example.git&#x27;</span>]]])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  stage(<span class="string">&quot;Cppcheck&quot;</span>)&#123;</span><br><span class="line">    steps&#123;</span><br><span class="line">      script &#123;</span><br><span class="line">        sh <span class="string">&#x27;cppcheck src/public src/themes --xml 2&gt; cppcheck.xml&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  stage(<span class="string">&#x27;Publish results&#x27;</span>)&#123;</span><br><span class="line">    steps &#123;</span><br><span class="line">      recordIssues(tools: [cppCheck(pattern: <span class="string">&#x27;cppcheck.xml&#x27;</span>)])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŠ¥å‘Šå±•ç¤º"><a href="#æŠ¥å‘Šå±•ç¤º" class="headerlink" title="æŠ¥å‘Šå±•ç¤º"></a>æŠ¥å‘Šå±•ç¤º</h3><p>æˆ‘å°† CPPCheck åº”ç”¨åˆ°æ¯ä¸ª Pull Request é‡Œï¼Œå½“å¼€å‘æäº¤æ–°çš„ä»£ç æ—¶ï¼ŒCPPCheck å°±ä¼šå»æ‰«æä»£ç ï¼Œç„¶åè·Ÿä¹‹å‰çš„å†å²è®°å½•åšå¯¹æ¯”ã€‚CPPCheck æ‰§è¡ŒæˆåŠŸå¹¶ç”ŸæˆæŠ¥å‘Šï¼Œè¿™é‡Œä¼šå‡ºç°ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»è¿›å…¥ã€‚</p><p><img src="/2020/02/cppcheck/cppcheck-icon.png" alt="CPPCheck å…¥å£"></p><p>æ‰“å¼€ä¹‹åå°±ä¼šå½“å‰åˆ†æ”¯ä»£ç çš„æ‰«ç»“æœã€‚</p><p><img src="/2020/02/cppcheck/cppcheck-view.png" alt="CPPCheck å½“å‰çš„ç»“æœ"></p><p>CPPCheck æœ‰ä¸‰ä¸ªç»´åº¦æ¥æ¥å±•ç¤ºé™æ€ä»£ç æ‰«æç»“æœï¼š</p><ol><li><p>ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒï¼ˆSeverities Distributionï¼‰ï¼šè¿™é‡Œåˆ†ä¸º Highï¼ŒNormalï¼ŒLow ä¸‰ç§çº§åˆ«</p></li><li><p>å‚è€ƒæ¯”è¾ƒï¼ˆReference Comparisonï¼‰ï¼šè¿™é‡Œä¼šå‚è€ƒä¹‹å‰çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæœ‰æ–°å¢å°±ä¼šæ˜¾ç¤º Newï¼Œå¦‚æœæ˜¯ç°å­˜çš„å°±æ˜¾ç¤ºä¸º Outstandingï¼Œå¦‚æœå‡å°‘äº†å°±ä¼šæ˜¾ç¤º Fixed</p></li><li><p>å†å²ï¼ˆHistoryï¼‰ï¼šéšç€ä»£ç çš„å¢åŠ å’Œä¿®æ”¹ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä¸€ä¸ªå†å²è®°å½•çš„è¶‹åŠ¿</p></li></ol><p>æ³¨æ„ï¼šcppcheck ç›¸å…³çš„ xml æ˜¯å­˜å‚¨åœ¨ Jenkins master ä¸Šï¼Œåªæœ‰å½“å‰çš„ Jenkins Job è¢«äººä¸ºåˆ æ‰ï¼Œé‚£ä¹ˆ cppcheck xml æ‰ä¼šè¢«åˆ æ‰ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-sh-4.2$ <span class="built_in">ls</span> -l cppcheck*</span><br><span class="line">-rw-r--r-- 1 jenkins jenkins 418591 Feb 27 05:54 cppcheck-blames.xml</span><br><span class="line">-rw-r--r-- 1 jenkins jenkins    219 Feb 27 05:54 cppcheck-fixed-issues.xml</span><br><span class="line">-rw-r--r-- 1 jenkins jenkins 142298 Feb 27 05:54 cppcheck-forensics.xml</span><br><span class="line">-rw-r--r-- 1 jenkins jenkins    219 Feb 27 05:54 cppcheck-new-issues.xml</span><br><span class="line">-rw-r--r-- 1 jenkins jenkins 488636 Feb 27 05:54 cppcheck-outstanding-issues.xml</span><br></pre></td></tr></table></figure><p><img src="/2020/02/cppcheck/cppcheck-code.png" alt="æŸ¥çœ‹å…·ä½“ Warining ä»£ç "></p><p>ç‚¹å‡»ç›¸åº”çš„è¿æ¥å°±å¯ä»¥ç›´æ¥è·³è½¬åˆ°å…·ä½“çš„ä»£ç è­¦å‘Šä½ç½®äº†ã€‚</p><p>å®ƒæ˜¯ä¸æ˜¯è¿˜æŒºé¦™çš„ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Cppcheck </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨ VirtualBox é…ç½®ä¸€å° Linux è™šæ‹Ÿæœº</title>
      <link href="/2020/02/setup-linux-in-virtualbox/"/>
      <url>/2020/02/setup-linux-in-virtualbox/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½ æƒ³ä½¿ç”¨ Linux ä½†åˆä¸æƒ³ç§Ÿç”¨äº‘å‚å•†çš„è™šæ‹Ÿæœºï¼Œé‚£ä¹ˆ VirtualBox æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ VirtualBox å®‰è£…ä½ éœ€è¦çš„ç»å¤§æ•°çš„æ“ä½œç³»ç»Ÿã€‚</p><p>ä¸ºäº†ä¿è¯ä½¿ç”¨çš„æµç•…ï¼Œè¿™é‡Œæœ€å¥½ä½¿ç”¨å†…å­˜å»ºè®® 8G åŠä»¥ä¸Šï¼Œç¡¬ç›˜ 256 GB çš„ Windows ç”µè„‘ã€‚</p><span id="more"></span><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><ul><li>ä¸‹è½½å’Œå®‰è£… VirtualBox <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></li><li>CentOS é•œåƒä¸‹è½½åœ°å€ <a href="https://mirror.umd.edu/centos/7/isos/x86_64/">https://mirror.umd.edu/centos/7/isos/x86_64/</a></li><li>Ubuntu é•œåƒä¸‹è½½åœ°å€ <a href="https://ubuntu.com/#download">https://ubuntu.com/#download</a></li></ul><p>å®‰è£…å’Œé…ç½®</p><p><em>æœ¬æ–‡æ²¡æœ‰è¯¦ç»†ä»‹ç»æ¯ä¸ªå®‰è£…æ­¥éª¤ï¼Œåªåˆ—å‡ºä¸€äº›å…³é”®æ­¥éª¤ã€‚</em></p>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> VirtualBox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€æœ‰ç”¨çš„ Linux å‘½ä»¤è¡ŒæŠ€å·§</title>
      <link href="/2020/02/linux-tips/"/>
      <url>/2020/02/linux-tips/</url>
      
        <content type="html"><![CDATA[<h2 id="ls-å‘½ä»¤"><a href="#ls-å‘½ä»¤" class="headerlink" title="ls å‘½ä»¤"></a>ls å‘½ä»¤</h2><p>åˆ—å‡ºå½“å‰ç›®å½•çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚å‚æ•°:</p><p><code>-l</code> åˆ—å‡ºæ—¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</p><p><code>-a</code> æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—çš„å’Œä¸éšè—çš„</p><span id="more"></span><p>å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œåƒè¿™æ ·</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> -la</span><br></pre></td></tr></table></figure><h2 id="cp-å‘½ä»¤"><a href="#cp-å‘½ä»¤" class="headerlink" title="cp å‘½ä»¤"></a>cp å‘½ä»¤</h2><p>å°†æºæ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡ã€‚å‚æ•°ï¼š</p><p><code>-i</code> äº¤äº’æ¨¡å¼æ„å‘³ç€ç­‰å¾…ç¡®è®¤ï¼Œå¦‚æœç›®æ ‡ä¸Šæœ‰æ–‡ä»¶å°†è¢«è¦†ç›–ã€‚</p><p><code>-r</code> é€’å½’å¤åˆ¶ï¼Œæ„å‘³ç€åŒ…å«å­ç›®å½•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> â€“ir source_dir target_dir</span><br></pre></td></tr></table></figure><h2 id="tmp-ç©ºé—´ä¸å¤Ÿæ€ä¹ˆåŠ"><a href="#tmp-ç©ºé—´ä¸å¤Ÿæ€ä¹ˆåŠ" class="headerlink" title="&#x2F;tmp ç©ºé—´ä¸å¤Ÿæ€ä¹ˆåŠ"></a>&#x2F;tmp ç©ºé—´ä¸å¤Ÿæ€ä¹ˆåŠ</h2><p>åœ¨ &#x2F;etc&#x2F;fstab æ–‡ä»¶é‡Œå¢åŠ ä¸€è¡Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/fstab</span><br><span class="line"><span class="comment"># æ·»åŠ å¦‚ä¸‹ä¸€è¡Œ</span></span><br><span class="line">tmpfs                   /tmp                    tmpfs   defaults,size=4G          0 0</span><br></pre></td></tr></table></figure><p>é‡å¯ä¹‹åï¼Œ<code>df -h</code> æŸ¥çœ‹ï¼Œ&#x2F;tmp ç›®å½•å·²ç»å°±å˜æˆ 4G äº†ã€‚</p><p>More, Refer to these links</p><ul><li><a href="https://likegeeks.com/main-linux-commands-easy-guide/">https://likegeeks.com/main-linux-commands-easy-guide/</a></li><li><a href="https://dzone.com/articles/most-useful-linux-command-line-tricks">https://dzone.com/articles/most-useful-linux-command-line-tricks</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HP-UX å®‰è£…å·¥å…·ä»¥åŠä¸€äº›ä½¿ç”¨æ€»ç»“</title>
      <link href="/2020/02/hpxu-tips/"/>
      <url>/2020/02/hpxu-tips/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…-Java8"><a href="#å®‰è£…-Java8" class="headerlink" title="å®‰è£… Java8"></a>å®‰è£… Java8</h2><p>å®‰è£…åŒ…ä¸‹è½½é“¾æ¥æ˜¯ <a href="https://h20392.www2.hpe.com/portal/swdepot/displayProductInfo.do?productNumber=JDKJRE8018">https://h20392.www2.hpe.com/portal/swdepot/displayProductInfo.do?productNumber=JDKJRE8018</a></p><p>éœ€è¦å…ˆæ³¨å†Œï¼Œç„¶åç™»é™†åæ‰èƒ½ä¸‹è½½ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯ <code>Itanium_JDK_8.0.18_June_2019_Z7550-96733_java8_18018_ia.depot</code></p><p>åœ¨çº¿å®‰è£…æ–‡æ¡£ <a href="https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04481894">https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04481894</a></p><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">swinstall -s /tmp/Itanium_JDK_8.0.18_June_2019_Z7550-96733_java8_18018_ia.depot</span><br><span class="line"></span><br><span class="line"><span class="comment"># if swinstall not found</span></span><br><span class="line">/usr/sbin/swinstall -s /tmp/Itanium_JDK_8.0.18_June_2019_Z7550-96733_java8_18018_ia.depot</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œä¼šåœ¨æ ¹ç›®å½• opt ä¸‹å¤šäº†ä¸€ä¸ª java8 ç›®å½•ï¼Œæ£€æŸ¥ä¸‹ java ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-5.0$ <span class="built_in">pwd</span></span><br><span class="line">/opt/java8</span><br><span class="line">bash-5.0$ <span class="built_in">cd</span> bin</span><br><span class="line">bash-5.0$ java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0.18-hp-ux&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0.18-hp-ux-b1)</span><br><span class="line">Java HotSpot(TM) Server VM (build 25.18-b1, mixed mode)</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè½¯è¿æ¥</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /opt/java8/bin/java /bin/java</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-gzip-å’Œ-gunzip"><a href="#å®‰è£…-gzip-å’Œ-gunzip" class="headerlink" title="å®‰è£… gzip å’Œ gunzip"></a>å®‰è£… gzip å’Œ gunzip</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… gzip</span></span><br><span class="line">/usr/bin/sudo /usr/local/bin/depothelper gzip</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœºå™¨ä¸Šå·²ç»æœ‰ zip å’Œ gunzip äº†ï¼Œåªéœ€è¦è½¯è¿æ¥ä¸€ä¸‹å³å¯ï¼Œé˜²æ­¢å‡ºç°å‘½ä»¤æ‰¾ä¸åˆ°çš„é—®é¢˜</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/sudo <span class="built_in">ln</span> -s /usr/contrib/bin/gzip /usr/bin/gzip</span><br><span class="line">/usr/bin/sudo <span class="built_in">ln</span> -s /usr/contrib/bin/gunzip /usr/bin/gunzip</span><br></pre></td></tr></table></figure><h2 id="Can-not-use-bash-in-HP-UX"><a href="#Can-not-use-bash-in-HP-UX" class="headerlink" title="Can not use bash in HP-UX"></a>Can not use <code>bash</code> in HP-UX</h2><p>For example, when you run <code>bash</code> command, you have the following error:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bash</span><br><span class="line">/usr/lib/hpux64/dld.so: Unable to find library <span class="string">&#x27;libtermcap.so&#x27;</span>.</span><br></pre></td></tr></table></figure><p>Here is the solutionï¼š<a href="https://community.hpe.com/t5/HP-UX-General/Unable-to-use-bash-for-ia-machine-11-23/m-p/3980789#M128592">https://community.hpe.com/t5/HP-UX-General/Unable-to-use-bash-for-ia-machine-11-23/m-p/3980789#M128592</a></p><p>It bcasue the <code>LIBTERMCAP</code> is not installed, you can go <a href="http://hpux.connect.org.uk/hppd/hpux/Shells/bash-3.2/">here</a> to see <code>bash</code>â€˜s dependencies include <code>gettext</code> <code>libiconv</code> <code>termcap</code>, etc.</p><p>Here are two very useful commands of install and uninstall.</p><ul><li><p>Download <code>bash</code> to command <code>depothelper</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">depothelper bash</span><br></pre></td></tr></table></figure></li><li><p>If you wang to remove the package on your HP-UX system, you can run the command</p><p> <code>sudo /usr/sbin/swremove [package-name]</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HP-UX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡ Jenkins å®šæœŸè‡ªåŠ¨ç»™è€æ¿æä¾› Git ä»“åº“çš„å¤šç»´åº¦ä»£ç åˆ†ææŠ¥å‘Š</title>
      <link href="/2020/01/git-stats-jenkins/"/>
      <url>/2020/01/git-stats-jenkins/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡ï¼ˆGitStats - Git å†å²ç»Ÿè®¡ä¿¡æ¯å·¥å…·ï¼‰ï¼Œæˆ‘å·²ç»ç»™è€æ¿æä¾›äº†ä»–æƒ³çœ‹çš„æ‰€æœ‰ä»“åº“çš„ Git æäº¤å†å²åˆ†ææŠ¥å‘Šäº†ï¼Œå¹¶ä¸”æŠŠæŠ¥å‘Šéƒ½éƒ¨ç½²åˆ°äº†ä¸€å°è™šæ‹Ÿæœºçš„ tomcat ä¸Šäº†ï¼Œè€æ¿å¯ä»¥é€šè¿‡ç½‘å€è®¿é—®ç›´æ¥æŸ¥çœ‹æ¯ä¸ªä»“åº“çš„åˆ†ææŠ¥å‘Šäº†ï¼Œçœ‹çœ‹è°çš„è´¡çŒ®å¤§ï¼Œè°æ´»è·ƒï¼Œè°å·æ‡’äº†ï¼Œè°å‘¨æœ«å†™ä»£ç äº†ï¼ˆè¿™é‡Œä¸é¼“åŠ± 996ï¼‰ã€‚</p><p>æœ€è¿‘è€æ¿æéœ€æ±‚äº†ã€‚</p><p><em>è€æ¿ï¼šä½ å¼„ä¸ªè¿™ä¸ªç½‘å€çš„æ•°æ®å’‹ä¸æ›´æ–°å‘¢ï¼ŸæŠ¥å‘Šä¸Šå’‹æ²¡è§ä½ ä»¬æäº¤ä»£ç å‘¢ï¼Ÿ</em><br><em>å°å¼€ï¼šè€æ¿å„¿ï¼Œæ‚¨çœ‹åˆ°è¿™äº›ä¸€ä¸ªä¸ªä»“åº“çš„æ•°æ®éƒ½æ˜¯å°å¼€æˆ‘äººè‚‰æ‰‹åŠ¨ç”Ÿæˆçš„ï¼Œè¦ä¸æ‚¨ç»™æˆ‘ç‚¹æ—¶é—´ï¼Œæˆ‘æ¥åšä¸ªè‡ªåŠ¨åŒ–ä»»åŠ¡å§ã€‚</em></p><span id="more"></span><p>æˆ‘è¿™ä¹ˆç§¯æä¸»åŠ¨ï¼Œä¸æ˜¯æˆ‘å¥‰æ‰¿è€æ¿ï¼Œæˆ‘å¿ƒé‡Œä¹ŸçŸ¥é“è€æ¿å¦‚æœè§‰å¾— Git Stats è¿™ä¸ªå·¥å…·å¥½ç”¨ï¼Œè‚¯å®šå¸Œæœ›çœ‹åˆ°çš„åˆ†ææŠ¥å‘Šæ˜¯æœ€æ–°çš„ã€‚æ—¢ç„¶è€æ¿å…ˆæäº†ï¼Œé‚£æˆ‘å°±åˆ«ç£¨è¹­äº†ï¼Œèµ¶ç´§å¹²å§ã€‚</p><p>ä¸è¿‡ç”¨å•¥å®ç°å‘¢ï¼Ÿè‚¯å®šæ˜¯ Jenkins äº†ã€‚ä¸€æ¥æˆ‘å·²ç»åœ¨ Jenkins ä¸Šåšäº†å¾ˆå¤šçš„è‡ªåŠ¨åŒ–ä»»åŠ¡äº†ï¼Œè½»è½¦ç†Ÿè·¯ï¼›äºŒæ¥ä½¿ç”¨åŒä¸€å¥—ç³»ç»Ÿä¸ä½†å¯ä»¥å‡å°‘ç¹å¤šçš„ç³»ç»Ÿå…¥å£ï¼Œé™ä½å­¦ä¹ æˆæœ¬ï¼Œä¹Ÿæé«˜ Jenkins æœåŠ¡å™¨çš„åˆ©ç”¨ç‡ã€‚</p><p>è®¾èº«å¤„åœ°çš„è€ƒè™‘äº†ä¸‹è€æ¿çš„ä½¿ç”¨éœ€æ±‚ï¼Œä»–è‚¯å®šä¸å¸Œæœ›è‡ªå·±å» Jenkins æœåŠ¡å™¨ä¸Šå»è¿è¡Œ Job æ¥ç”Ÿæˆè¿™ä¸ªGit ä»“åº“çš„å¤šç»´åº¦ä»£ç åˆ†ææŠ¥å‘Šï¼Œé‚£ä¹ˆï¼Œå¦‚æœæˆ‘æ˜¯è€æ¿ï¼Œæˆ‘å¸Œæœ›ï¼š</p><ol><li>è¿™ä¸ª Jenkins ä»»åŠ¡è¦å®šæœŸæ‰§è¡Œï¼Œä¸éœ€è¦å¤ªé¢‘ç¹ï¼Œä¸€å‘¨æ›´æ–°ä¸€æ¬¡å°±è¡Œï¼›</li><li>å¦å¤–è¿˜è¦æ”¯æŒå¯¹å•ç‹¬ä»“åº“çš„å•ç‹¬æ‰§è¡Œï¼Œä¸€æ—¦è€æ¿è¦ç«‹å³é©¬ä¸ŠæŸ¥çœ‹æŸä¸ªä»“åº“çš„çš„åˆ†ææŠ¥å‘Šå‘¢ã€‚</li></ol><p>æœ€åå®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><h2 id="æ‰‹åŠ¨æ‰§è¡Œ"><a href="#æ‰‹åŠ¨æ‰§è¡Œ" class="headerlink" title="æ‰‹åŠ¨æ‰§è¡Œ"></a>æ‰‹åŠ¨æ‰§è¡Œ</h2><p>è€æ¿å¯ä»¥å‹¾é€‰ä»–æœ€å…³å¿ƒçš„ä»£ç ä»“åº“è¿›è¡Œæ›´æ–°</p><h2 id="æ¯å‘¨æœ«å®šæ—¶æ‰§è¡Œ"><a href="#æ¯å‘¨æœ«å®šæ—¶æ‰§è¡Œ" class="headerlink" title="æ¯å‘¨æœ«å®šæ—¶æ‰§è¡Œ"></a>æ¯å‘¨æœ«å®šæ—¶æ‰§è¡Œ</h2><p>è€æ¿åœ¨å‘¨ä¸€ä¸Šç­å°±èƒ½çœ‹åˆ°æœ€æ–°çš„åˆ†ææ•°æ®äº†ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªä»»åŠ¡ Started by timer</p><h2 id="æœ€ç»ˆçš„-Jenkinsfile-æ˜¯è¿™æ ·çš„"><a href="#æœ€ç»ˆçš„-Jenkinsfile-æ˜¯è¿™æ ·çš„" class="headerlink" title="æœ€ç»ˆçš„ Jenkinsfile æ˜¯è¿™æ ·çš„"></a>æœ€ç»ˆçš„ Jenkinsfile æ˜¯è¿™æ ·çš„</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline&#123;</span><br><span class="line">  agent&#123;</span><br><span class="line">    node &#123;</span><br><span class="line">      label <span class="string">&#x27;main-slave&#x27;</span></span><br><span class="line">      customWorkspace <span class="string">&quot;/workspace/gitstats&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  environment &#123;</span><br><span class="line">    USER_CRE = credentials(<span class="string">&quot;d1cbab74-823d-41aa-abb7&quot;</span>)</span><br><span class="line">    webapproot = <span class="string">&quot;/workspace/apache-tomcat-7.0.99/webapps/gitstats&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  parameters &#123;</span><br><span class="line">    booleanParam(defaultValue: <span class="literal">true</span>, name: <span class="string">&#x27;repo1&#x27;</span>, description: <span class="string">&#x27;uncheck to disable [repo1]&#x27;</span>)</span><br><span class="line">    booleanParam(defaultValue: <span class="literal">true</span>, name: <span class="string">&#x27;repo2&#x27;</span>, description: <span class="string">&#x27;uncheck to disable [repo2]&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  triggers &#123;</span><br><span class="line">    cron <span class="string">&#x27;0 3 * * 7&#x27;</span>    <span class="comment"># æ¯å‘¨æ—¥æ—©ä¸Šè¿›è¡Œå®šæ—¶è¿è¡Œï¼Œå› æ­¤æ­¤æ—¶æœºå™¨æ˜¯ç©ºé—²çš„ã€‚</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  options &#123;</span><br><span class="line">    buildDiscarder(logRotator(numToKeepStr:<span class="string">&#x27;10&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stages&#123;</span><br><span class="line">    stage(<span class="string">&quot;Checkout gitstats&quot;</span>)&#123;</span><br><span class="line">      steps&#123;</span><br><span class="line">        <span class="comment"># å‡†å¤‡å­˜æ”¾ html æŠ¥å‘Šç›®å½•</span></span><br><span class="line">        sh <span class="string">&quot;mkdir -p html&quot;</span></span><br><span class="line">        <span class="comment"># ä¸‹è½½ gitstats ä»£ç </span></span><br><span class="line">        sh <span class="string">&quot;rm -rf gitstats &amp;&amp; git clone https://github.com/hoxu/gitstats.git&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    stage(<span class="string">&quot;Under statistics&quot;</span>) &#123;</span><br><span class="line">      parallel &#123;</span><br><span class="line">        stage(<span class="string">&quot;reop1&quot;</span>) &#123;</span><br><span class="line">          when &#123;</span><br><span class="line">            expression &#123; <span class="built_in">return</span> params.repo1 &#125;  <span class="comment"># åˆ¤æ–­æ˜¯å¦å‹¾é€‰äº†</span></span><br><span class="line">          &#125;</span><br><span class="line">          steps &#123;</span><br><span class="line">            <span class="comment"># ä¸‹è½½è¦è¿›è¡Œåˆ†æçš„ä»“åº“ repo1</span></span><br><span class="line">            sh <span class="string">&#x27;git clone -b master https://$USER_CRE_USR:&quot;$USER_CRE_PSW&quot;@git.software.com/scm/repo1.git&#x27;</span></span><br><span class="line">            <span class="comment"># è¿›è¡Œä»“åº“ repo1 çš„å†å²è®°å½•åˆ†æ</span></span><br><span class="line">            sh <span class="string">&quot;cd gitstats &amp;&amp; ./gitstats ../repo1 ../html/repo1&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">          post &#123;</span><br><span class="line">            success &#123;</span><br><span class="line">              <span class="comment"># å¦‚æœåˆ†ææˆåŠŸï¼Œåˆ™å°†åˆ†æç»“æœæ”¾åˆ° apache-tomcat-7.0.99/webapps/gitstats ç›®å½•ä¸‹</span></span><br><span class="line">              sh <span class="string">&#x27;rm -rf $&#123;webapproot&#125;/repo1 &amp;&amp; mv html/repo1 $&#123;webapproot&#125;&#x27;</span></span><br><span class="line">              <span class="comment"># ç„¶ååˆ æ‰ repo1 çš„ä»£ç å’Œ html æŠ¥å‘Šï¼Œä»¥å…ä¸åŠæ—¶æ¸…ç†é€ æˆç£ç›˜ç©ºé—´çš„è¿‡åº¦å ç”¨</span></span><br><span class="line">              sh <span class="string">&quot;rm -rf repo1&quot;</span></span><br><span class="line">              sh <span class="string">&quot;rm -rf html/repo1&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      stage(<span class="string">&quot;repo2&quot;</span>) &#123;</span><br><span class="line">          when &#123;</span><br><span class="line">            expression &#123; <span class="built_in">return</span> params.repo2 &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          steps &#123;</span><br><span class="line">            sh <span class="string">&#x27;git clone -b master https://$USER_CRE_USR:&quot;$USER_CRE_PSW&quot;@git.software.com/scm/repo2.git&#x27;</span></span><br><span class="line">            sh <span class="string">&quot;cd gitstats &amp;&amp; ./gitstats ../repo2 ../html/repo2&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">          post &#123;</span><br><span class="line">            success &#123;</span><br><span class="line">              sh <span class="string">&#x27;rm -rf $&#123;webapproot&#125;/repo2 &amp;&amp; mv html/repo2 $&#123;webapproot&#125;&#x27;</span></span><br><span class="line">              sh <span class="string">&quot;rm -rf repo2&quot;</span></span><br><span class="line">              sh <span class="string">&quot;rm -rf html/repo2&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  post&#123;</span><br><span class="line">    always&#123;</span><br><span class="line">      <span class="comment"># æ€»æ˜¯ç»™æ‰§è¡Œè€…åˆ†é€é‚®ä»¶é€šçŸ¥ï¼Œä¸è®ºæ˜¯å¦æˆåŠŸéƒ½ä¼šå¯¹å·¥ä½œç©ºé—´è¿›è¡Œæ¸…ç†</span></span><br><span class="line">      script &#123;</span><br><span class="line">        def email = load <span class="string">&quot;vars/email.groovy&quot;</span></span><br><span class="line">        email.build(currentBuild.result, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      cleanWs()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å¦‚æœä½ æ˜¯æµ‹è¯•ã€DevOpsæˆ–æ˜¯ä»äº‹ç ”å‘æ•ˆèƒ½æ–¹é¢çš„å·¥ä½œï¼Œé‚£ä¹ˆåˆ©ç”¨å¥½å¼€æºå·¥å…·ï¼Œæ¯”å¦‚ Jenkins å’Œ Git Stats å°±å¯ä»¥å¿«é€Ÿå¸®åŠ©è€æ¿æˆ–æ˜¯ä½ è‡ªå·±æä¾›ä¸€ä¸ª Git ä»“åº“çš„å¤šç»´åº¦ä»£ç åˆ†ææŠ¥å‘Šï¼Œæœ‰åŠ©äºæ›´åŠ äº†è§£äº§å“çš„ä»£ç æƒ…å†µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Stats </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AIX ä¸Šå®‰è£…å·¥å…·ä»¥åŠä¸€äº›ä½¿ç”¨æ€»ç»“</title>
      <link href="/2020/01/aix-tips/"/>
      <url>/2020/01/aix-tips/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•åœ¨ä½¿ç”¨ AIX æ—¶æ‰€é‡åˆ°çš„é—®é¢˜å’Œè§£å†³åŠæ³•ï¼Œä»¥å¤‡ä»¥åé‡åˆ°åŒæ ·é—®é¢˜ä¸è¦å†å› ä¸ºè¿™äº›å†æµªè´¹æ—¶é—´ï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åŠ©åˆ°ä½ ã€‚</p><span id="more"></span><h2 id="åœ¨-AIX-ä¸Šæ— æ³•è§£å‹è¶…ä¸€ä¸ªå¤§çº¦-600-MB-æ–‡ä»¶"><a href="#åœ¨-AIX-ä¸Šæ— æ³•è§£å‹è¶…ä¸€ä¸ªå¤§çº¦-600-MB-æ–‡ä»¶" class="headerlink" title="åœ¨ AIX ä¸Šæ— æ³•è§£å‹è¶…ä¸€ä¸ªå¤§çº¦ 600 MB æ–‡ä»¶"></a>åœ¨ AIX ä¸Šæ— æ³•è§£å‹è¶…ä¸€ä¸ªå¤§çº¦ 600 MB æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-4.3$ <span class="built_in">ls</span></span><br><span class="line">data_cdrom_debug_AIX_05949fb.tar.Z</span><br><span class="line">bash-4.3$ gzip -d data_cdrom_debug_AIX_05949fb.tar.Z</span><br><span class="line"><span class="comment"># é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">gzip: data_cdrom_debug_AIX_05949fb.tar: File too large</span><br><span class="line"><span class="comment"># è§£å†³åŠæ³•</span></span><br><span class="line">bash-4.3$ sudo vi /etc/security/limits</span><br><span class="line"></span><br><span class="line">default:</span><br><span class="line">        fsize = -1 <span class="comment"># ä¿®æ”¹ä¸º -1</span></span><br><span class="line">        core = 2097151</span><br><span class="line">        cpu = -1</span><br><span class="line">        data = -1</span><br><span class="line">        rss = 65536</span><br><span class="line">        stack = 65536</span><br><span class="line">        nofiles = 2000</span><br><span class="line"></span><br><span class="line"><span class="comment"># éœ€è¦é‡å¯</span></span><br><span class="line">bash-4.3$ sudo reboot</span><br><span class="line"></span><br><span class="line">Rebooting . . .</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¹‹åï¼Œé‡å¯ï¼Œå†è§£å‹å°±æ²¡æœ‰é—®é¢˜äº†ã€‚</p><h2 id="å®‰è£…-Java-Standard-Edition-on-AIX"><a href="#å®‰è£…-Java-Standard-Edition-on-AIX" class="headerlink" title="å®‰è£… Java Standard Edition on AIX"></a>å®‰è£… Java Standard Edition on AIX</h2><p>ä¸‹è½½åœ°å€ <a href="https://developer.ibm.com/javasdk/support/aix-download-service/">https://developer.ibm.com/javasdk/support/aix-download-service/</a></p><ol><li>download Java8_64.sdk.8.0.0.600.tar.gz Java8_64.jre.8.0.0.600.tar.gz</li><li>gzip -d Java8_64.sdk.8.0.0.600.tar.gz and Java8_64.jre.8.0.0.600.tar.gz</li><li>tar -xvf Java8_64.sdk.8.0.0.600.tar  and Java8_64.jre.8.0.0.600.tar</li><li>installp -agXYd .  Java8_64.jre Java8_64.sdk 2&gt;&amp;1 | tee installp.log</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># install output</span></span><br><span class="line">Installation Summary</span><br><span class="line">--------------------</span><br><span class="line">Name                        Level           Part        Event       Result</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Java8_64.sdk                8.0.0.600       USR         APPLY       SUCCESS</span><br><span class="line">Java8_64.jre                8.0.0.600       USR         APPLY       SUCCESS</span><br><span class="line">Java8_64.jre                8.0.0.600       ROOT        APPLY       SUCCESS</span><br></pre></td></tr></table></figure><ol start="5"><li>smitty install_all</li><li>Input: Type â€œ.&#x2F;â€œ in the field</li><li>Acceptance Install the Agreement, then start install.</li></ol><p>Troubleshooting</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-4.4<span class="comment"># ./java -version</span></span><br><span class="line">Error: Port Library failed to initialize: -70</span><br><span class="line">Error: Could not create the Java Virtual Machine.</span><br><span class="line">Error: A fatal exception has occurred. Program will <span class="built_in">exit</span>.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AIX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solaris å®‰è£…å·¥å…·ä»¥åŠä¸€äº›ä½¿ç”¨æ€»ç»“</title>
      <link href="/2020/01/solaris-tips/"/>
      <url>/2020/01/solaris-tips/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•åœ¨ä½¿ç”¨ Solaris æ—¶æ‰€é‡åˆ°çš„é—®é¢˜å’Œè§£å†³åŠæ³•ï¼Œä»¥å¤‡ä»¥åé‡åˆ°åŒæ ·é—®é¢˜ä¸è¦å†å› ä¸ºè¿™äº›å†æµªè´¹æ—¶é—´ï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åŠ©åˆ°ä½ ã€‚</p><span id="more"></span><h2 id="install-packages-on-solaris"><a href="#install-packages-on-solaris" class="headerlink" title="install packages on solaris"></a>install packages on solaris</h2><p><a href="https://www.opencsw.org/get-it/packages/">https://www.opencsw.org/get-it/packages/</a></p><h3 id="Install-Git"><a href="#Install-Git" class="headerlink" title="Install Git"></a>Install Git</h3><p><a href="https://www.opencsw.org/packages/git/">https://www.opencsw.org/packages/git/</a></p>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Solaris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins Warnings Next Generation æ’ä»¶</title>
      <link href="/2019/12/jenkins-warnings-next-generation-plugin/"/>
      <url>/2019/12/jenkins-warnings-next-generation-plugin/</url>
      
        <content type="html"><![CDATA[<h2 id="Jenkins-Warnings-Next-Generation-æ’ä»¶"><a href="#Jenkins-Warnings-Next-Generation-æ’ä»¶" class="headerlink" title="Jenkins Warnings Next Generation æ’ä»¶"></a>Jenkins Warnings Next Generation æ’ä»¶</h2><p>Jenkins Warnings Next Generation æ’ä»¶å¯æ”¶é›†ç¼–è¯‘å™¨è­¦å‘Šæˆ–é™æ€åˆ†æå·¥å…·æŠ¥å‘Šçš„é—®é¢˜å¹¶å¯è§†åŒ–ç»“æœï¼Œå®ƒå†…ç½®äº†å¯¹ä¼—å¤šé™æ€åˆ†æå·¥å…·ï¼ˆåŒ…æ‹¬å¤šä¸ªç¼–è¯‘å™¨ï¼‰çš„æ”¯æŒï¼Œæ›´å¤š<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/SUPPORTED-FORMATS.md">æ”¯æŒçš„æŠ¥å‘Šæ ¼å¼</a>ã€‚</p><span id="more"></span><h3 id="æ”¯æŒçš„é¡¹ç›®ç±»å‹"><a href="#æ”¯æŒçš„é¡¹ç›®ç±»å‹" class="headerlink" title="æ”¯æŒçš„é¡¹ç›®ç±»å‹"></a>æ”¯æŒçš„é¡¹ç›®ç±»å‹</h3><p>Warnings Next Generation æ’ä»¶æ”¯æŒä»¥ä¸‹ Jenkins é¡¹ç›®ç±»å‹ï¼š</p><ul><li>è‡ªç”±å¼é¡¹ç›®</li><li>Maven é¡¹ç›®</li><li>çŸ©é˜µé¡¹ç›®</li><li>è„šæœ¬åŒ–ç®¡é“ï¼ˆé¡ºåºå’Œå¹¶è¡Œæ­¥éª¤ï¼‰</li><li>å£°æ˜å¼ç®¡é“ï¼ˆé¡ºåºæ­¥éª¤å’Œå¹¶è¡Œæ­¥éª¤ï¼‰</li><li>å¤šåˆ†æ”¯ç®¡é“</li></ul><h3 id="åŠŸèƒ½æ¦‚è¿°"><a href="#åŠŸèƒ½æ¦‚è¿°" class="headerlink" title="åŠŸèƒ½æ¦‚è¿°"></a>åŠŸèƒ½æ¦‚è¿°</h3><p>å½“ä½œä¸ºåç»­æ„å»ºä»»åŠ¡æ“ä½œï¼ˆæˆ–æ­¥éª¤ï¼‰æ·»åŠ æ—¶ï¼ŒWarnings Next Generation æ’ä»¶æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>è¯¥æ’ä»¶ä¼šæ‰«æ Jenkins ç‰ˆæœ¬çš„æ§åˆ¶å°æ—¥å¿—æˆ–ä½ å·¥ä½œåŒºä¸­çš„æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨ä»»ä½•é—®é¢˜ã€‚æ”¯æŒä¸€ç™¾å¤šç§<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/SUPPORTED-FORMATS.md">æŠ¥å‘Šæ ¼å¼</a>ï¼Œå®ƒå¯ä»¥æ£€æµ‹åˆ°çš„é—®é¢˜åŒ…æ‹¬ï¼š</li></ol><ul><li>æ¥è‡ªç¼–è¯‘å™¨çš„é”™è¯¯ï¼ˆCï¼ŒCï¼ƒï¼ŒJavaç­‰ï¼‰</li><li>æ¥è‡ªé™æ€åˆ†æå·¥å…·ï¼ˆCheckStyleï¼ŒStyleCopï¼ŒSpotBugs ç­‰ï¼‰çš„è­¦å‘Š</li><li>æ¥è‡ªå¤åˆ¶ç²˜è´´æ£€æµ‹å™¨ï¼ˆCPD, Simian ç­‰ï¼‰çš„é‡å¤</li><li>æ¼æ´</li><li>åœ¨æºæ–‡ä»¶çš„æ³¨é‡Šä¸­æ‰“å¼€ä»»åŠ¡</li></ul><ol start="2"><li>è¯¥æ’ä»¶ä¼šå‘å¸ƒæœ‰å…³åœ¨æ„å»ºä¸­å‘ç°çš„é—®é¢˜çš„æŠ¥å‘Šï¼Œå› æ­¤å¯ä»¥ä»ä»¥ä¸‹ä½ç½®å¯¼èˆªåˆ°æ‘˜è¦æŠ¥å‘Šï¼Œä¸»æ„å»ºé¡µé¢ã€‚ä½ è¿˜å¯ä»¥ä»é‚£é‡Œæ·±å…¥äº†è§£ç»†èŠ‚ï¼š</li></ol><ul><li>å‘è¡Œæ–°çš„ï¼Œå›ºå®šçš„å’Œæœªè§£å†³çš„é—®é¢˜</li><li>æŒ‰ä¸¥é‡æ€§ï¼Œç±»åˆ«ï¼Œç±»å‹ï¼Œæ¨¡å—æˆ–ç¨‹åºåŒ…åˆ†å‘é—®é¢˜</li><li>æ‰€æœ‰é—®é¢˜çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ¥è‡ªæŠ¥å‘Šå·¥å…·çš„æœ‰ç”¨è¯„è®º</li><li>å—å½±å“æ–‡ä»¶çš„å¸¦æ³¨é‡Šçš„æºä»£ç </li><li>é—®é¢˜è¶‹åŠ¿å›¾</li></ul><p>è¯¥æ’ä»¶ä¸ä¼šè¿è¡Œé™æ€åˆ†æï¼Œå®ƒåªæ˜¯å¯è§†åŒ–æ­¤ç±»å·¥å…·æŠ¥å‘Šçš„ç»“æœã€‚ä½ ä»ç„¶éœ€è¦åœ¨æ„å»ºæ–‡ä»¶æˆ– Jenkinsfile ä¸­å¯ç”¨å’Œé…ç½®é™æ€åˆ†æå·¥å…·ã€‚</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä½ å¯ä»¥åœ¨ Jenkins ä½œä¸šé…ç½®ç”¨æˆ·ç•Œé¢ä¸­é…ç½®æ’ä»¶çš„æ¯ä¸ªé€‰é¡¹ï¼ˆåœ¨è‡ªç”±å¼ï¼Œmaven æˆ–çŸ©é˜µä½œä¸šä¸­ï¼‰ã€‚åœ¨è¿™é‡Œä½ éœ€è¦åœ¨å·¥ä½œä¸­æ·»åŠ å¹¶å¯ç”¨ç”Ÿæˆåæ“ä½œâ€œè®°å½•ç¼–è¯‘å™¨è­¦å‘Šå’Œé™æ€åˆ†æç»“æœâ€ã€‚</p><p>åœ¨ç®¡é“ä¸­ï¼Œå°†é€šè¿‡æ·»åŠ  recordIssues æ¿€æ´»æ’ä»¶ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·ç•Œé¢æ¥é…ç½®æ­¤æ­¥éª¤ï¼ˆé€šè¿‡ä½¿ç”¨ Snippet ç¼–è¾‘å™¨ï¼‰ã€‚è¯·æ³¨æ„ï¼Œå¯¹äºè„šæœ¬åŒ–ç®¡é“ï¼Œä¸€äº›å…¶ä»–åŠŸèƒ½å¯ç”¨äºæ±‡æ€»å’Œåˆ†ç»„é—®é¢˜ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œé«˜çº§ç®¡é“é…ç½®â€éƒ¨åˆ†ã€‚</p><p>åœ¨ä»¥ä¸‹å„èŠ‚ä¸­ï¼Œå°†åŒæ—¶æ˜¾ç¤ºå›¾å½¢é…ç½®å’Œç®¡é“é…ç½®ã€‚</p><h3 id="å·¥å…·é€‰æ‹©"><a href="#å·¥å…·é€‰æ‹©" class="headerlink" title="å·¥å…·é€‰æ‹©"></a>å·¥å…·é€‰æ‹©</h3><p>ä¸‹å›¾æ˜¾ç¤ºäº†æ’ä»¶çš„åŸºæœ¬é…ç½®ï¼š</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/01.png" alt="é™æ€åˆ†æå·¥å…·"></p><p>é¦–å…ˆï¼Œä½ éœ€è¦æŒ‡å®šç”¨äºåˆ›å»ºé—®é¢˜çš„å·¥å…·ï¼Œæ ¹æ®æ‰€é€‰å·¥å…·ï¼Œä½ å¯èƒ½è¿˜ä¼šé…ç½®ä¸€äº›å…¶ä»–å‚æ•°ã€‚</p><p>å¯¹äºæ‰€æœ‰è¯»å–æŠ¥å‘Šæ–‡ä»¶çš„è§£æå™¨ï¼Œä½ éœ€è¦æŒ‡å®šåº”åˆ†æå’Œæ‰«æé—®é¢˜çš„æŠ¥å‘Šæ–‡ä»¶çš„æ¨¡å¼ã€‚å¦‚æœæœªæŒ‡å®šæ¨¡å¼ï¼Œåˆ™å°†æ‰«ææ„å»ºçš„æ§åˆ¶å°æ—¥å¿—ã€‚å¯¹äºå‡ ç§æµè¡Œçš„å·¥å…·ï¼Œæä¾›äº†é»˜è®¤æ¨¡å¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ¨¡å¼ä¸ºç©ºï¼Œåˆ™å°†ä½¿ç”¨é»˜è®¤æ¨¡å¼ã€‚</p><p>ä¸ºäº†è®©æ‰«æç¨‹åºæ­£ç¡®è§£æä½ çš„æŠ¥å‘Šï¼Œéœ€è¦è®¾ç½®æ–‡ä»¶çš„ç¼–ç ï¼Œå¦åˆ™å°†ä½¿ç”¨å¹³å°ç¼–ç ï¼Œè¿™å¯èƒ½ä¸æ­£ç¡®ã€‚</p><p>æ¯ä¸ªå·¥å…·éƒ½ç”±ä¸€ä¸ª ID æ ‡è¯†ï¼Œè¯¥ ID ç”¨ä½œåˆ†æç»“æœçš„ URLã€‚å¯¹äºæ¯ä¸ªå·¥å…·ï¼Œéƒ½æä¾›äº†ä¸€ä¸ªé»˜è®¤ URLï¼ˆå’Œåç§°ï¼‰ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ›´æ”¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ‰“ç®—å¤šæ¬¡ä½¿ç”¨è§£æå™¨ï¼Œåˆ™éœ€è¦ä¸ºæ¯ä¸ªè°ƒç”¨æŒ‡å®šä¸åŒçš„ IDã€‚</p><p>ä½ å¯ä»¥æŒ‡å®šå°†ç”¨äºåŒä¸€é…ç½®çš„å¤šä¸ªå·¥å…·ï¼ˆå’Œæ¨¡å¼ï¼‰ï¼Œç”±äº Jenkins çš„æŠ€æœ¯ï¼ˆæˆ–å¸‚åœºï¼‰é™åˆ¶ï¼Œæ— æ³•é€šè¿‡ä½¿ç”¨å¤šä¸ªåæœŸæ„å»ºæ“ä½œæ¥é€‰æ‹©ä¸åŒçš„é…ç½®ã€‚</p><p>é€šè¿‡ä½¿ç”¨â€œæ±‡æ€»ç»“æœâ€å¤é€‰æ¡†ï¼Œå¯ä»¥ä½¿ç”¨ä¸€é¡¹æ–°åŠŸèƒ½ã€‚å¦‚æœé€‰ä¸­æ­¤é€‰é¡¹ï¼Œåˆ™å°†åˆ›å»ºä¸€ä¸ªç»“æœï¼Œå…¶ä¸­åŒ…å«æ‰€é€‰å·¥å…·çš„æ‰€æœ‰é—®é¢˜çš„æ±‡æ€»ã€‚è¿™æ˜¯ä¹‹å‰é™æ€åˆ†ææ”¶é›†å™¨æ’ä»¶æä¾›çš„ã€‚æ¿€æ´»æ­¤é€‰é¡¹åï¼Œä½ å°†è·å¾—æ‰€æœ‰é—®é¢˜çš„å”¯ä¸€å…¥å£ç‚¹ã€‚ä»¥ä¸‹å±å¹•æˆªå›¾æ˜¾ç¤ºäº†æ­¤æ–°è¡Œä¸ºï¼š</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/02.png" alt="æ±‡æ€»ç»“æœ"></p><p>å¦‚æœæœªå¯ç”¨æ­¤é€‰é¡¹ï¼Œåˆ™å°†ä¸ºæ¯ä¸ªå·¥å…·åˆ›å»ºå•ç‹¬çš„ç»“æœã€‚æ­¤ç»“æœå…·æœ‰å”¯ä¸€çš„ URL å’Œå›¾æ ‡ï¼Œå› æ­¤ä½ å¯ä»¥å¿«é€ŸæŸ¥çœ‹åˆ›å»ºçš„æŠ¥å‘Šä¹‹é—´çš„åŒºåˆ«ï¼š</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/03.png" alt="åˆ†å¼€çš„ç»“æœ"></p><p>åœ¨åŸºæœ¬é…ç½®éƒ¨åˆ†ä¸­ï¼Œä½ è¿˜å¯ä»¥é€‰æ‹©æ˜¯å¦é’ˆå¯¹å¤±è´¥çš„æ„å»ºä¹Ÿè¿è¡Œè¯¥æ­¥éª¤ã€‚é»˜è®¤æƒ…å†µä¸‹ç¦ç”¨æ­¤é€‰é¡¹ï¼Œå› ä¸ºå¦‚æœæ„å»ºå¤±è´¥ï¼Œåˆ†æç»“æœå¯èƒ½ä¼šä¸å‡†ç¡®ã€‚</p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†å…·æœ‰è¿™äº›é€‰é¡¹çš„ç¤ºä¾‹ç®¡é“ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">recordIssues(</span><br><span class="line">    enabledForFailure: <span class="literal">true</span>, aggregatingResults: <span class="literal">true</span>,</span><br><span class="line">    tools: [java(), checkStyle(pattern: <span class="string">&#x27;checkstyle-result.xml&#x27;</span>, reportEncoding: <span class="string">&#x27;UTF-8&#x27;</span>)]</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨å•ä¸ªå·¥å…·ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å±æ€§å·¥å…·ä»£æ›¿å·¥å…·ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues enabledForFailure: <span class="literal">true</span>, aggregatingResults: <span class="literal">true</span>, tool: checkStyle(pattern: <span class="string">&#x27;checkstyle-result.xml&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå¯¹è‡ªå®šä¹‰å·¥å…·çš„æ”¯æŒ"><a href="#åˆ›å»ºå¯¹è‡ªå®šä¹‰å·¥å…·çš„æ”¯æŒ" class="headerlink" title="åˆ›å»ºå¯¹è‡ªå®šä¹‰å·¥å…·çš„æ”¯æŒ"></a>åˆ›å»ºå¯¹è‡ªå®šä¹‰å·¥å…·çš„æ”¯æŒ</h3><p>å¦‚æœä½ çš„é¡¹ç›®ä¸­æ²¡æœ‰å†…ç½®å·¥å…·ï¼Œåˆ™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ·»åŠ å…¶ä»–å·¥å…·ã€‚</p><h4 id="å°†é—®é¢˜å¯¼å‡ºä¸ºå—æ”¯æŒçš„æ ¼å¼"><a href="#å°†é—®é¢˜å¯¼å‡ºä¸ºå—æ”¯æŒçš„æ ¼å¼" class="headerlink" title="å°†é—®é¢˜å¯¼å‡ºä¸ºå—æ”¯æŒçš„æ ¼å¼"></a>å°†é—®é¢˜å¯¼å‡ºä¸ºå—æ”¯æŒçš„æ ¼å¼</h4><p>å°†å·¥å…·çš„åˆ†æç»“æœè·å–åˆ° Warnings æ’ä»¶ä¸­çš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯å°†ä¿¡æ¯å¯¼å‡ºä¸ºä¸€ç§å·²ç»æ”¯æŒçš„æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œå‡ ç§å·¥å…·å°†å…¶é—®é¢˜å¯¼å‡ºä¸º CheckStyle æˆ– PMD æ ¼å¼ã€‚å¦‚æœè¦ä½¿ç”¨è­¦å‘Šæ’ä»¶çš„æ‰€æœ‰åŠŸèƒ½ï¼Œåˆ™æœ€å¥½å°†ä¿¡æ¯å¯¼å‡ºä¸ºæœ¬æœº XML æˆ– JSON æ ¼å¼ï¼ˆæ­¤è§£æå™¨ä½¿ç”¨ ID é—®é¢˜ï¼‰ã€‚<br>è¿™äº›æ ¼å¼å·²ç»åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ³¨å†Œï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚ä½ ç”šè‡³å¯ä»¥åœ¨åŒ…å«å•è¡Œ JSON é—®é¢˜çš„ç®€å•æ—¥å¿—æ–‡ä»¶ä¸­æä¾›é—®é¢˜ï¼Œè¯·å‚è§ç¤ºä¾‹ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ­¥éª¤ï¼Œå¯ç”¨äºè§£ææœ¬æœº JSONï¼ˆæˆ– XMLï¼‰æ ¼å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues(tool: issues())</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶éƒ¨ç½²æ–°å·¥å…·"><a href="#ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶éƒ¨ç½²æ–°å·¥å…·" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶éƒ¨ç½²æ–°å·¥å…·"></a>ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶éƒ¨ç½²æ–°å·¥å…·</h4><p>æœ€çµæ´»çš„æ–¹æ³•æ˜¯é€šè¿‡ç¼–å†™å°†åœ¨ä½ è‡ªå·±çš„å°å‹ Jenkins æ’ä»¶ä¸­éƒ¨ç½²çš„ Java ç±»æ¥å®šä¹‰æ–°å·¥å…·ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æ–‡æ¡£â€œä¸ºè‡ªå®šä¹‰é™æ€åˆ†æå·¥å…·æä¾›æ”¯æŒâ€ã€‚</p><h4 id="ä½¿ç”¨Groovyè§£æå™¨åˆ›å»ºæ–°å·¥å…·"><a href="#ä½¿ç”¨Groovyè§£æå™¨åˆ›å»ºæ–°å·¥å…·" class="headerlink" title="ä½¿ç”¨Groovyè§£æå™¨åˆ›å»ºæ–°å·¥å…·"></a>ä½¿ç”¨Groovyè§£æå™¨åˆ›å»ºæ–°å·¥å…·</h4><p>å¦‚æœæ—¥å¿—æ¶ˆæ¯çš„æ ¼å¼éå¸¸ç®€å•ï¼Œåˆ™å¯ä»¥é€šè¿‡åœ¨ Jenkins çš„ç”¨æˆ·ç•Œé¢ä¸­åˆ›å»ºç®€å•çš„å·¥å…·é…ç½®æ¥å®šä¹‰å¯¹å·¥å…·çš„æ”¯æŒã€‚ å‡ºäºå®‰å…¨åŸå› ï¼ˆGroovy è„šæœ¬å¯èƒ½ä¼šå±å®³ä½ çš„ä¸»æœåŠ¡å™¨ï¼‰ï¼Œæ­¤é…ç½®ä»…åœ¨ç³»ç»Ÿé…ç½®ä¸­å¯ç”¨ã€‚ æ–°è§£æå™¨çš„é…ç½®é‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¯¥æ­£åˆ™è¡¨è¾¾å¼å°†ç”¨äºåŒ¹é…æŠ¥å‘Šæ ¼å¼ã€‚ å¦‚æœè¡¨è¾¾å¼åŒ¹é…ï¼Œåˆ™å°†è°ƒç”¨ Groovy è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†åŒ¹é…çš„æ–‡æœ¬è½¬æ¢ä¸ºé—®é¢˜å®ä¾‹ã€‚ è¿™æ˜¯åŸºäº Groovy çš„è§£æå™¨çš„ç¤ºä¾‹ï¼š</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/04.png" alt="Groovy è§£æå™¨"></p><h4 id="ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»º-Groovy-è§£æå™¨"><a href="#ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»º-Groovy-è§£æå™¨" class="headerlink" title="ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»º Groovy è§£æå™¨"></a>ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»º Groovy è§£æå™¨</h4><p>è¿˜å¯ä»¥ä½¿ç”¨ Groovy è„šæœ¬ä»ç®¡é“ï¼ŒJenkins å¯åŠ¨è„šæœ¬æˆ–è„šæœ¬æ§åˆ¶å°ä¸­åˆ›å»ºåŸºäº Groovy çš„è§£æå™¨ï¼Œè¯·å‚è§ä»¥ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">def config = io.jenkins.plugins.analysis.warnings.groovy.ParserConfiguration.getInstance()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!config.contains(<span class="string">&#x27;pep8-groovy&#x27;</span>))&#123;</span><br><span class="line">  def newParser = new io.jenkins.plugins.analysis.warnings.groovy.GroovyParser(</span><br><span class="line">    <span class="string">&#x27;pep8-groovy&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Pep8 Groovy Parser&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;(.*):(\\d+):(\\d+): (\\D\\d*) (.*)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;return builder.setFileName(matcher.group(1)).setCategory(matcher.group(4)).setMessage(matcher.group(5)).buildOptional()&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;optparse.py:69:11: E401 multiple imports on one line&quot;</span></span><br><span class="line">  )</span><br><span class="line">  config.setParsers(config.getParsers().plus(newParser))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨é…ç½®ä½œä¸ºä»£ç å¯¼å…¥è§£æå™¨ï¼ˆJCasCï¼‰"><a href="#ä½¿ç”¨é…ç½®ä½œä¸ºä»£ç å¯¼å…¥è§£æå™¨ï¼ˆJCasCï¼‰" class="headerlink" title="ä½¿ç”¨é…ç½®ä½œä¸ºä»£ç å¯¼å…¥è§£æå™¨ï¼ˆJCasCï¼‰"></a>ä½¿ç”¨é…ç½®ä½œä¸ºä»£ç å¯¼å…¥è§£æå™¨ï¼ˆJCasCï¼‰</h4><p>è¿˜å¯ä»¥ä½¿ç”¨ JCasC yaml æ–‡ä»¶ä¸­çš„éƒ¨åˆ†æ¥æŒ‡å®šåŸºäº Groovy çš„è§£æå™¨ã€‚è¿™æ˜¯ä¸€ä¸ªå°ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•æ·»åŠ è¿™æ ·çš„è§£æå™¨ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">unclassified:</span></span><br><span class="line">  <span class="attr">warningsParsers:</span></span><br><span class="line">    <span class="attr">parsers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;Example parser&quot;</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">example-id</span></span><br><span class="line">        <span class="attr">regexp:</span> <span class="string">&quot;^\\s*(.*):(\\d+):(.*):\\s*(.*)$&quot;</span></span><br><span class="line">        <span class="attr">script:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          import edu.hm.hafner.analysis.Severity</span></span><br><span class="line"><span class="string">          builder.setFileName(matcher.group(1))</span></span><br><span class="line"><span class="string">                  .setLineStart(Integer.parseInt(matcher.group(2)))</span></span><br><span class="line"><span class="string">                  .setSeverity(Severity.WARNING_NORMAL)</span></span><br><span class="line"><span class="string">                  .setCategory(matcher.group(3))</span></span><br><span class="line"><span class="string">                  .setMessage(matcher.group(4))</span></span><br><span class="line"><span class="string">          return builder.buildOptional();</span></span><br><span class="line"><span class="string"></span>        <span class="attr">example:</span> <span class="string">&quot;somefile.txt:2:SeriousWarnings:SomethingWentWrong&quot;</span></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨å®šä¹‰çš„å·¥å…·"><a href="#ä½¿ç”¨å®šä¹‰çš„å·¥å…·" class="headerlink" title="ä½¿ç”¨å®šä¹‰çš„å·¥å…·"></a>ä½¿ç”¨å®šä¹‰çš„å·¥å…·</h4><p>ä¸€æ—¦æ³¨å†Œäº† Groovy è§£æå™¨ï¼Œå°±å¯ä»¥åœ¨ä½œä¸šçš„å·¥å…·é…ç½®éƒ¨åˆ†ä¸­ä½¿ç”¨å®ƒï¼š</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/05.png" alt="Groovy é…ç½®"></p><p>é¦–å…ˆï¼Œä½ éœ€è¦é€‰æ‹©å·¥å…· â€œGroovy Parserâ€ ä»¥è·å– Groovy è§£æå™¨çš„é…ç½®å±å¹•ã€‚ ç„¶åï¼Œä½ å¯ä»¥ä»å¯ç”¨è§£æå™¨åˆ—è¡¨ä¸­é€‰æ‹©è§£æå™¨ã€‚ è¯¥åˆ—è¡¨æ˜¯æ ¹æ® Jenkins çš„â€œç³»ç»Ÿé…ç½®â€éƒ¨åˆ†ä¸­å®šä¹‰çš„è§£æå™¨åŠ¨æ€åˆ›å»ºçš„ã€‚å¯ä»¥ä½¿ç”¨ä¸å…¶ä»–å·¥å…·ç›¸åŒçš„æ–¹å¼æ¥è®¾ç½®è‡ªå®šä¹‰ ID å’Œåç§°å±æ€§ã€‚</p><p>ä¸ºäº†åœ¨ç®¡é“ä¸­ä½¿ç”¨ Groovy è§£æå™¨ï¼Œä½ éœ€è¦ä½¿ç”¨ä»¥ä¸‹å½¢å¼çš„è„šæœ¬è¯­å¥ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues sourceCodeEncoding: <span class="string">&#x27;UTF-8&#x27;</span>,</span><br><span class="line">    tool: groovyScript(parserId: <span class="string">&#x27;groovy-id-in-system-config&#x27;</span>, pattern:<span class="string">&#x27;**/*report.log&#x27;</span>, reportEncoding:<span class="string">&#x27;UTF-8&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="å¤„ç†å—å½±å“çš„æºä»£ç æ–‡ä»¶çš„å±æ€§"><a href="#å¤„ç†å—å½±å“çš„æºä»£ç æ–‡ä»¶çš„å±æ€§" class="headerlink" title="å¤„ç†å—å½±å“çš„æºä»£ç æ–‡ä»¶çš„å±æ€§"></a>å¤„ç†å—å½±å“çš„æºä»£ç æ–‡ä»¶çš„å±æ€§</h3><p>ä¸ºäº†è®©æ’ä»¶è§£æå¹¶æ˜¾ç¤ºä½ çš„æºä»£ç æ–‡ä»¶ï¼Œéœ€è¦ä¸ºè¿™äº›æ–‡ä»¶è®¾ç½®æ­£ç¡®çš„ç¼–ç ã€‚ æ­¤å¤–ï¼Œå¦‚æœä½ çš„æºä»£ç ä¸åœ¨å·¥ä½œåŒºä¸­ï¼ˆä¾‹å¦‚ï¼Œå®ƒå·²ç­¾å‡ºåˆ°å…±äº«ä»£ç†æ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œåˆ™è¯¥æ’ä»¶å°†ä¸ä¼šè‡ªåŠ¨æ‰¾åˆ°ä½ çš„æºæ–‡ä»¶ã€‚ ä¸ºäº†è®©æ’ä»¶æ˜¾ç¤ºè¿™äº›æ–‡ä»¶ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªé™„åŠ çš„æºç›®å½•ï¼š</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/06.png" alt="å—å½±å“æ–‡ä»¶"></p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†å¸¦æœ‰è¿™äº›é€‰é¡¹çš„ç¤ºä¾‹ç®¡é“ï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥ä¸åŒåœ°è®¾ç½®æŠ¥å‘Šæ–‡ä»¶çš„ç¼–ç ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues sourceCodeEncoding: <span class="string">&#x27;ISO-8859-1&#x27;</span>, sourceDirectory: <span class="string">&#x27;/path/to/sources&#x27;</span>, tool: java(reportEncoding: <span class="string">&#x27;UTF-8&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œå·¥ä½œåŒºå¤–éƒ¨çš„æ–‡ä»¶å†…å®¹å¯èƒ½å¾ˆæ•æ„Ÿã€‚ ä¸ºäº†é˜²æ­¢æ„å¤–æ˜¾ç¤ºæ­¤ç±»æ–‡ä»¶ï¼Œä½ éœ€è¦åœ¨ Jenkins ç³»ç»Ÿé…ç½®å±å¹•ä¸­æä¾›å…è®¸çš„æºä»£ç ç›®å½•çš„ç™½åå•ï¼š</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/07.png" alt="æºä»£ç ç›®å½•çš„ç™½åå•"></p><p>å¦å¤–ï¼Œæ­¤é…ç½®è®¾ç½®å¯ä»¥ç”± JCasC yaml æ–‡ä»¶ä¸­çš„ä»¥ä¸‹å­èŠ‚æä¾›</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">unclassified:</span></span><br><span class="line">  <span class="attr">warningsPlugin:</span></span><br><span class="line">    <span class="attr">sourceDirectories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">&quot;C:\\Temp&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">&quot;/mnt/sources&quot;</span></span><br></pre></td></tr></table></figure><h3 id="æ§åˆ¶å‚è€ƒæ„å»ºçš„é€‰æ‹©ï¼ˆåŸºå‡†ï¼‰"><a href="#æ§åˆ¶å‚è€ƒæ„å»ºçš„é€‰æ‹©ï¼ˆåŸºå‡†ï¼‰" class="headerlink" title="æ§åˆ¶å‚è€ƒæ„å»ºçš„é€‰æ‹©ï¼ˆåŸºå‡†ï¼‰"></a>æ§åˆ¶å‚è€ƒæ„å»ºçš„é€‰æ‹©ï¼ˆåŸºå‡†ï¼‰</h3><p>è­¦å‘Šä¸‹ä¸€ä»£æ’ä»¶çš„ä¸€é¡¹é‡è¦åŠŸèƒ½æ˜¯å°†é—®é¢˜åˆ†ç±»ä¸ºæ–°é—®é¢˜ï¼Œæœªè§£å†³é—®é¢˜å’Œå·²è§£å†³é—®é¢˜ï¼š</p><ul><li>æ–°å¢ï¼šæ‰€æœ‰é—®é¢˜ï¼Œå±äºå½“å‰æŠ¥å‘Šçš„ä¸€éƒ¨åˆ†ï¼Œä½†æœªåœ¨å‚è€ƒæŠ¥å‘Šä¸­æ˜¾ç¤º</li><li>å·²ä¿®å¤ï¼šæ‰€æœ‰é—®é¢˜ï¼Œå±äºå‚è€ƒæŠ¥å‘Šçš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸å†å­˜åœ¨äºå½“å‰æŠ¥å‘Šä¸­</li><li>æœªè§£å†³ï¼šæ‰€æœ‰é—®é¢˜ï¼Œæ˜¯å½“å‰æŠ¥å‘Šå’Œå‚è€ƒæŠ¥å‘Šçš„ä¸€éƒ¨åˆ†</li></ul><p>ä¸ºäº†è®¡ç®—æ­¤åˆ†ç±»ï¼Œæ’ä»¶éœ€è¦å‚è€ƒæ„å»ºï¼ˆåŸºå‡†ï¼‰ã€‚ ç„¶åï¼Œé€šè¿‡æ¯”è¾ƒå½“å‰ç‰ˆæœ¬å’ŒåŸºå‡†ä¸­çš„é—®é¢˜æ¥è®¡ç®—æ–°çš„ï¼Œå·²ä¿®å¤çš„å’Œæœªè§£å†³çš„é—®é¢˜ã€‚ æœ‰ä¸‰ä¸ªé€‰é¡¹å¯æ§åˆ¶å‚è€ƒæ„å»ºçš„é€‰æ‹©ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/08.png" alt="å‚è€ƒ"></p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†å…·æœ‰è¿™äº›é€‰é¡¹çš„ç¤ºä¾‹ç®¡é“ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues tool: java(), ignoreQualityGate: <span class="literal">false</span>, ignoreFailedBuilds: <span class="literal">true</span>, referenceJobName: <span class="string">&#x27;my-project/master&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="ç­›é€‰é—®é¢˜"><a href="#ç­›é€‰é—®é¢˜" class="headerlink" title="ç­›é€‰é—®é¢˜"></a>ç­›é€‰é—®é¢˜</h3><p>åˆ›å»ºçš„é—®é¢˜æŠ¥å‘Šå¯ä»¥éšåè¿›è¡Œè¿‡æ»¤ã€‚ ä½ å¯ä»¥æŒ‡å®šä»»æ„æ•°é‡çš„åŒ…å«æˆ–æ’é™¤è¿‡æ»¤å™¨ã€‚ å½“å‰ï¼Œæ”¯æŒæŒ‰æ¨¡å—åç§°ï¼Œç¨‹åºåŒ…æˆ–åç§°ç©ºé—´åç§°ï¼Œæ–‡ä»¶åï¼Œç±»åˆ«æˆ–ç±»å‹è¿‡æ»¤é—®é¢˜ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/09.png" alt="ç­›é€‰"></p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†å…·æœ‰è¿™äº›é€‰é¡¹çš„ç¤ºä¾‹ç®¡é“ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues tool: java(pattern: <span class="string">&#x27;*.log&#x27;</span>), filters: [includeFile(<span class="string">&#x27;MyFile.*.java&#x27;</span>), excludeCategory(<span class="string">&#x27;WHITESPACE&#x27;</span>)]</span><br></pre></td></tr></table></figure><h3 id="Quality-gate-é…ç½®"><a href="#Quality-gate-é…ç½®" class="headerlink" title="Quality gate é…ç½®"></a>Quality gate é…ç½®</h3><p>ä½ å¯ä»¥å®šä¹‰å‡ ä¸ª Quality gate (è´¨é‡é—¨)ï¼Œåœ¨æŠ¥å‘Šé—®é¢˜åå°†å¯¹å…¶è¿›è¡Œæ£€æŸ¥ã€‚è¿™äº›è´¨é‡é—¨ä½¿ä½ å¯ä»¥ä¿®æ”¹è©¹é‡‘æ–¯çš„ç”Ÿäº§çŠ¶æ€ï¼Œä»¥ä¾¿ç«‹å³æŸ¥çœ‹æ˜¯å¦æ»¡è¶³æ‰€éœ€çš„äº§å“è´¨é‡ã€‚å¯¹äºè¿™äº›è´¨é‡é—¨ä¸­çš„æ¯ä¸€ä¸ªï¼Œéƒ½å¯ä»¥å°†æ„å»ºè®¾ç½®ä¸ºä¸ç¨³å®šæˆ–å¤±è´¥ã€‚æ‰€æœ‰è´¨é‡é—¨éƒ½ä½¿ç”¨ä¸€ä¸ªç®€å•çš„åº¦é‡æ ‡å‡†ï¼šç»™å®šè´¨é‡é—¨å°†å¤±è´¥çš„é—®é¢˜æ•°é‡ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/10.png" alt="è´¨é‡é—¨"></p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†å…·æœ‰è¿™äº›é€‰é¡¹çš„ç¤ºä¾‹ç®¡é“ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues tool: java(pattern: <span class="string">&#x27;*.log&#x27;</span>), qualityGates: [[threshold: 1, <span class="built_in">type</span>: <span class="string">&#x27;TOTAL&#x27;</span>, unstable: <span class="literal">true</span>]]</span><br></pre></td></tr></table></figure><p>ç±»å‹ç¡®å®šå°†ç”¨æ¥è¯„ä¼°è´¨é‡é—¨çš„å±æ€§ã€‚è¯·å‚é˜…æšä¸¾ QualityGateType ä»¥æŸ¥çœ‹æ”¯æŒå“ªäº›ä¸åŒç±»å‹ã€‚</p><h3 id="å¥åº·æŠ¥å‘Šé…ç½®"><a href="#å¥åº·æŠ¥å‘Šé…ç½®" class="headerlink" title="å¥åº·æŠ¥å‘Šé…ç½®"></a>å¥åº·æŠ¥å‘Šé…ç½®</h3><p>è¯¥æ’ä»¶å¯ä»¥å‚ä¸ä½ é¡¹ç›®çš„è¿è¡ŒçŠ¶å†µæŠ¥å‘Šã€‚ä½ å¯ä»¥æ›´æ”¹å°†è¿è¡ŒçŠ¶å†µæ›´æ”¹ä¸º 0ï¼… å’Œ 100ï¼… çš„é—®é¢˜æ•°ã€‚æ­¤å¤–ï¼Œå¯ä»¥é€‰æ‹©åœ¨åˆ›å»ºè¿è¡ŒçŠ¶å†µæŠ¥å‘Šæ—¶åº”è€ƒè™‘çš„ä¸¥é‡æ€§ã€‚</p><p><a href="jenkins-warnings-next-generation-plugin/11.png">å¥åº·æŠ¥å‘Šé…ç½®!</a></p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†å…·æœ‰è¿™äº›é€‰é¡¹çš„ç¤ºä¾‹ç®¡é“ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues tool: java(pattern: <span class="string">&#x27;*.log&#x27;</span>), healthy: 10, unhealthy: 100, minimumSeverity: <span class="string">&#x27;HIGH&#x27;</span></span><br></pre></td></tr></table></figure><p>è¯¥ä½œä¸šæ ¹æ®ä¸¥é‡æ€§ä¸º HIGH å’Œé”™è¯¯çš„æ‰€æœ‰è­¦å‘Šæ¥è°ƒæ•´æ„å»ºè¿è¡ŒçŠ¶å†µã€‚å¦‚æœå†…éƒ¨ç‰ˆæœ¬åŒ…å« 10 æ¡æˆ–æ›´å°‘çš„è­¦å‘Šï¼Œåˆ™è¿è¡ŒçŠ¶å†µä¸º 100ï¼…ã€‚å¦‚æœå†…éƒ¨ç‰ˆæœ¬æœ‰ 100 ä¸ªä»¥ä¸Šçš„è­¦å‘Šï¼Œåˆ™è¿è¡ŒçŠ¶å†µä¸º 0ï¼…ã€‚</p><h3 id="ç®¡é“é…ç½®"><a href="#ç®¡é“é…ç½®" class="headerlink" title="ç®¡é“é…ç½®"></a>ç®¡é“é…ç½®</h3><p>åœ¨ Jenkins Pipeline ä¸­ä½¿ç”¨ Warnings æ’ä»¶çš„è¦æ±‚å¯èƒ½å¾ˆå¤æ‚ï¼Œæœ‰æ—¶ä¼šå¼•èµ·äº‰è®®ã€‚ä¸ºäº†å°½å¯èƒ½çµæ´»ï¼Œæˆ‘å†³å®šå°†ä¸»è¦æ­¥éª¤åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œç„¶åå¯ä»¥å½¼æ­¤ç‹¬ç«‹ä½¿ç”¨ã€‚</p><h4 id="ç®€å•çš„ç®¡é“é…ç½®"><a href="#ç®€å•çš„ç®¡é“é…ç½®" class="headerlink" title="ç®€å•çš„ç®¡é“é…ç½®"></a>ç®€å•çš„ç®¡é“é…ç½®</h4><p>æ­¥éª¤ recordIssues æä¾›äº†ç®€å•çš„ç®¡é“é…ç½®ï¼Œå®ƒæä¾›äº†ä¸æ„å»ºåæ“ä½œç›¸åŒçš„å±æ€§ï¼ˆè¯·å‚è§ä¸Šæ–‡ï¼‰ã€‚æ­¤æ­¥éª¤æ‰«æç»™å®šæ–‡ä»¶é›†ï¼ˆæˆ–æ§åˆ¶å°æ—¥å¿—ï¼‰ä¸­çš„é—®é¢˜ï¼Œå¹¶åœ¨æ„å»ºä¸­æŠ¥å‘Šè¿™äº›é—®é¢˜ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»£ç ç‰‡æ®µç”Ÿæˆå™¨æ¥åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆçš„ä»£ç ç‰‡æ®µï¼Œä»¥è°ƒç”¨æ­¤æ­¥éª¤ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†æ­¤æ­¥éª¤çš„å…¸å‹ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues(</span><br><span class="line">    enabledForFailure: <span class="literal">true</span>,</span><br><span class="line">    tool: java(pattern: <span class="string">&#x27;*.log&#x27;</span>),</span><br><span class="line">    filters: [includeFile(<span class="string">&#x27;MyFile.*.java&#x27;</span>), excludeCategory(<span class="string">&#x27;WHITESPACE&#x27;</span>)]</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå°†æ‰«ææ–‡ä»¶ <code>* .log</code> ä¸­çš„ Java é—®é¢˜ã€‚ä»…åŒ…æ‹¬æ–‡ä»¶åä¸æ¨¡å¼ <code>MyFile.*.java</code> åŒ¹é…çš„é—®é¢˜ã€‚ç±»åˆ« <code>WHITESPACE</code> çš„é—®é¢˜å°†è¢«æ’é™¤ï¼Œå³ä½¿æ„å»ºå¤±è´¥ï¼Œä¹Ÿä¼šæ‰§è¡Œè¯¥æ­¥éª¤ã€‚</p><p>ä¸ºäº†æŸ¥çœ‹æ‰€æœ‰é…ç½®é€‰é¡¹ï¼Œä½ å¯ä»¥ç ”ç©¶<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesRecorder.java">æ­¥éª¤å®ç°</a>ã€‚</p><h4 id="å£°æ˜å¼ç®¡é“é…ç½®"><a href="#å£°æ˜å¼ç®¡é“é…ç½®" class="headerlink" title="å£°æ˜å¼ç®¡é“é…ç½®"></a>å£°æ˜å¼ç®¡é“é…ç½®</h4><p>å£°æ˜æ€§ç®¡é“ä½œä¸šä¸­çš„æ’ä»¶é…ç½®ä¸è„šæœ¬ç®¡é“ä¸­çš„é…ç½®ç›¸åŒï¼Œè¯·å‚è§ä»¥ä¸‹ç¤ºä¾‹ï¼Œè¯¥ç¤ºä¾‹åœ¨ Jenkins ä¸Šæ„å»ºåˆ†ææ¨¡å‹åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent <span class="string">&#x27;any&#x27;</span></span><br><span class="line">    tools &#123;</span><br><span class="line">        maven <span class="string">&#x27;mvn-default&#x27;</span></span><br><span class="line">        jdk <span class="string">&#x27;jdk-default&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage (<span class="string">&#x27;Build&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;$&#123;M2_HOME&#125;/bin/mvn --batch-mode -V -U -e clean verify -Dsurefire.useFile=false -Dmaven.test.failure.ignore&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage (<span class="string">&#x27;Analysis&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;$&#123;M2_HOME&#125;/bin/mvn --batch-mode -V -U -e checkstyle:checkstyle pmd:pmd pmd:cpd findbugs:findbugs spotbugs:spotbugs&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    post &#123;</span><br><span class="line">        always &#123;</span><br><span class="line">            junit testResults: <span class="string">&#x27;**/target/surefire-reports/TEST-*.xml&#x27;</span></span><br><span class="line"></span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tools: [mavenConsole(), java(), javaDoc()]</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: checkStyle()</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: spotBugs()</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: cpd(pattern: <span class="string">&#x27;**/target/cpd.xml&#x27;</span>)</span><br><span class="line">            recordIssues enabledForFailure: <span class="literal">true</span>, tool: pmdParser(pattern: <span class="string">&#x27;**/target/pmd.xml&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é«˜çº§ç®¡é“é…ç½®"><a href="#é«˜çº§ç®¡é“é…ç½®" class="headerlink" title="é«˜çº§ç®¡é“é…ç½®"></a>é«˜çº§ç®¡é“é…ç½®</h4><p>æœ‰æ—¶ä»…ä½¿ç”¨ä¸€ä¸ªæ­¥éª¤å‘å¸ƒå’ŒæŠ¥å‘Šé—®é¢˜æ˜¯ä¸å¤Ÿçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä½¿ç”¨å¤šä¸ªå¹¶è¡Œæ­¥éª¤æ¥æ„å»ºäº§å“ï¼Œå¹¶ä¸”æƒ³è¦å°†æ‰€æœ‰è¿™äº›æ­¥éª¤ä¸­çš„é—®é¢˜åˆå¹¶ä¸ºä¸€ä¸ªç»“æœã€‚ç„¶åï¼Œä½ éœ€è¦æ‹†åˆ†æ‰«æå’Œèšåˆã€‚è¯¥æ’ä»¶æä¾›ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul><li>scanForIssues æ­¤æ­¥éª¤ä½¿ç”¨ç‰¹å®šçš„è§£æå™¨æ‰«ææŠ¥å‘Šæ–‡ä»¶æˆ–æ§åˆ¶å°æ—¥å¿—ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåŒ…å«æŠ¥å‘Šçš„ä¸­ é—´ AnnotatedReport å¯¹è±¡ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æ­¥éª¤å®ç°ã€‚</li><li>publishIssuesï¼šæ­¤æ­¥éª¤åœ¨ä½ çš„æ„å»ºä¸­å‘å¸ƒä¸€ä¸ªæ–°æŠ¥å‘Šï¼Œå…¶ä¸­åŒ…å«å‡ ä¸ª scanForIssues æ­¥éª¤çš„æ±‡æ€»ç»“æœã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æ­¥éª¤å®ç°ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node &#123;</span><br><span class="line">  stage (<span class="string">&#x27;Checkout&#x27;</span>) &#123;</span><br><span class="line">      git branch:<span class="string">&#x27;5.0&#x27;</span>, url: <span class="string">&#x27;git@github.com:jenkinsci/warnings-plugin.git&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  stage (<span class="string">&#x27;Build&#x27;</span>) &#123;</span><br><span class="line">    def mvnHome = tool <span class="string">&#x27;mvn-default&#x27;</span></span><br><span class="line"></span><br><span class="line">    sh <span class="string">&quot;<span class="variable">$&#123;mvnHome&#125;</span>/bin/mvn --batch-mode -V -U -e clean verify -Dsurefire.useFile=false&quot;</span></span><br><span class="line"></span><br><span class="line">    junit testResults: <span class="string">&#x27;**/target/*-reports/TEST-*.xml&#x27;</span></span><br><span class="line"></span><br><span class="line">    def java = scanForIssues tool: java()</span><br><span class="line">    def javadoc = scanForIssues tool: javaDoc()</span><br><span class="line"></span><br><span class="line">    publishIssues issues: [java, javadoc], filters: [includePackage(<span class="string">&#x27;io.jenkins.plugins.analysis.*&#x27;</span>)]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stage (<span class="string">&#x27;Analysis&#x27;</span>) &#123;</span><br><span class="line">    def mvnHome = tool <span class="string">&#x27;mvn-default&#x27;</span></span><br><span class="line"></span><br><span class="line">    sh <span class="string">&quot;<span class="variable">$&#123;mvnHome&#125;</span>/bin/mvn --batch-mode -V -U -e checkstyle:checkstyle pmd:pmd pmd:cpd findbugs:findbugs&quot;</span></span><br><span class="line"></span><br><span class="line">    def checkstyle = scanForIssues tool: checkStyle(pattern: <span class="string">&#x27;**/target/checkstyle-result.xml&#x27;</span>)</span><br><span class="line">    publishIssues issues: [checkstyle]</span><br><span class="line"></span><br><span class="line">    def pmd = scanForIssues tool: pmdParser(pattern: <span class="string">&#x27;**/target/pmd.xml&#x27;</span>)</span><br><span class="line">    publishIssues issues: [pmd]</span><br><span class="line"></span><br><span class="line">    def cpd = scanForIssues tool: cpd(pattern: <span class="string">&#x27;**/target/cpd.xml&#x27;</span>)</span><br><span class="line">    publishIssues issues: [cpd]</span><br><span class="line"></span><br><span class="line">    def spotbugs = scanForIssues tool: spotBugs(pattern: <span class="string">&#x27;**/target/findbugsXml.xml&#x27;</span>)</span><br><span class="line">    publishIssues issues: [spotbugs]</span><br><span class="line"></span><br><span class="line">    def maven = scanForIssues tool: mavenConsole()</span><br><span class="line">    publishIssues issues: [maven]</span><br><span class="line"></span><br><span class="line">    publishIssues <span class="built_in">id</span>: <span class="string">&#x27;analysis&#x27;</span>, name: <span class="string">&#x27;All Issues&#x27;</span>, issues: [checkstyle, pmd, spotbugs], filters: [includePackage(<span class="string">&#x27;io.jenkins.plugins.analysis.*&#x27;</span>)]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–°åŠŸèƒ½"><a href="#æ–°åŠŸèƒ½" class="headerlink" title="æ–°åŠŸèƒ½"></a>æ–°åŠŸèƒ½</h2><p>ä»¥ä¸‹å„èŠ‚ä»‹ç»äº†æœ€é‡è¦çš„æ–°åŠŸèƒ½ã€‚</p><h3 id="å‘è¡Œè®°å½•ï¼šNew-Fixed-Outstanding-é—®é¢˜"><a href="#å‘è¡Œè®°å½•ï¼šNew-Fixed-Outstanding-é—®é¢˜" class="headerlink" title="å‘è¡Œè®°å½•ï¼šNew, Fixed, Outstanding é—®é¢˜"></a>å‘è¡Œè®°å½•ï¼šNew, Fixed, Outstanding é—®é¢˜</h3><p>è¯¥æ’ä»¶çš„ä¸€å¤§äº®ç‚¹æ˜¯èƒ½å¤Ÿå°†åç»­ç‰ˆæœ¬çš„é—®é¢˜åˆ†ç±»ä¸º New, Fixed, Outstandingã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/12.png" alt="è¶‹åŠ¿"></p><p>ä½¿ç”¨æ­¤åŠŸèƒ½å¯ä»¥æ›´è½»æ¾åœ°æ§åˆ¶é¡¹ç›®çš„è´¨é‡ï¼šä½ åªèƒ½ä¸“æ³¨äºæœ€è¿‘å¼•å…¥çš„è­¦å‘Šã€‚</p><p>æ³¨æ„ï¼šæ–°è­¦å‘Šçš„æ£€æµ‹åŸºäºå¤æ‚çš„ç®—æ³•ï¼Œè¯¥ç®—æ³•è¯•å›¾åœ¨æºä»£ç çš„ä¸¤ä¸ªä¸åŒç‰ˆæœ¬ä¸­è·Ÿè¸ªåŒä¸€è­¦å‘Šã€‚æ ¹æ®æºä»£ç çš„ä¿®æ”¹ç¨‹åº¦ï¼Œå®ƒå¯èƒ½ä¼šäº§ç”Ÿä¸€äº›è¯¯æŠ¥ï¼Œå³ï¼Œå³ä½¿åº”è¯¥æ²¡æœ‰è­¦å‘Šä¹Ÿå¯èƒ½ä¼šæ”¶åˆ°ä¸€äº›æ–°çš„å›ºå®šè­¦å‘Šã€‚è¯¥ç®—æ³•çš„å‡†ç¡®æ€§ä»åœ¨ç ”ç©¶ä¸­ï¼Œå¹¶å°†åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆä¸­è¿›è¡Œå®Œå–„ã€‚</p><h3 id="Severities-ä¸¥é‡ç¨‹åº¦"><a href="#Severities-ä¸¥é‡ç¨‹åº¦" class="headerlink" title="Severities ä¸¥é‡ç¨‹åº¦"></a>Severities ä¸¥é‡ç¨‹åº¦</h3><p>è¯¥æ’ä»¶åœ¨å›¾è¡¨ä¸­æ˜¾ç¤ºé—®é¢˜ä¸¥é‡æ€§çš„åˆ†å¸ƒï¼Œå®ƒå®šä¹‰äº†ä»¥ä¸‹é»˜è®¤ä¸¥é‡çº§åˆ«ï¼Œä½†æ˜¯æ‰©å±•è­¦å‘Šæ’ä»¶çš„æ’ä»¶å¯èƒ½ä¼šæ·»åŠ å…¶ä»–é»˜è®¤çº§åˆ«ã€‚</p><ul><li><strong>Error</strong>ï¼šè¡¨ç¤ºé€šå¸¸ä¼šå¯¼è‡´æ„å»ºå¤±è´¥çš„é”™è¯¯</li><li><strong>Warning</strong> (High, Normal, Low)ï¼šæŒ‡ç¤ºç»™å®šä¼˜å…ˆçº§çš„è­¦å‘Šã€‚æ˜ å°„åˆ°ä¼˜å…ˆçº§å–å†³äºå„ä¸ªè§£æå™¨ã€‚</li></ul><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/13.png" alt="ä¸¥é‡ç¨‹åº¦"></p><p>è¯·æ³¨æ„ï¼Œå¹¶éæ¯ä¸ªè§£æå™¨éƒ½èƒ½äº§ç”Ÿä¸åŒä¸¥é‡æ€§çš„è­¦å‘Šã€‚æŸäº›è§£æå™¨ä»…å¯¹æ‰€æœ‰é—®é¢˜ä½¿ç”¨ç›¸åŒçš„ä¸¥é‡æ€§ã€‚</p><h3 id="Build-trend-æ„å»ºè¶‹åŠ¿"><a href="#Build-trend-æ„å»ºè¶‹åŠ¿" class="headerlink" title="Build trend æ„å»ºè¶‹åŠ¿"></a>Build trend æ„å»ºè¶‹åŠ¿</h3><p>ä¸ºäº†æŸ¥çœ‹åˆ†æç»“æœçš„è¶‹åŠ¿ï¼Œå‡ ä¸ªå›¾è¡¨æ˜¾ç¤ºäº†æ¯ä¸ªæ„å»ºçš„é—®é¢˜æ•°é‡ã€‚è¿™äº›å›¾è¡¨ç”¨äºè¯¦ç»†ä¿¡æ¯é¡µé¢å’Œä½œä¸šæ¦‚è¿°ä¸­ã€‚å½“å‰æä¾›ä»¥ä¸‹ä¸åŒçš„è¶‹åŠ¿å›¾ç±»å‹ï¼š</p><h4 id="é—®é¢˜çš„ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ"><a href="#é—®é¢˜çš„ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ" class="headerlink" title="é—®é¢˜çš„ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ"></a>é—®é¢˜çš„ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ</h4><p>é»˜è®¤è¶‹åŠ¿å›¾æ˜¾ç¤ºé—®é¢˜æ€»æ•°ï¼ŒæŒ‰ä¸¥é‡æ€§å †å ã€‚ä½¿ç”¨æ­¤å›¾è¡¨ï¼Œä½ å¯ä»¥æŸ¥çœ‹å“ªç§ä¸¥é‡ç¨‹åº¦å¯¹é—®é¢˜æ€»æ•°è´¡çŒ®æœ€å¤§ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/14.png" alt="ä¸¥é‡åº¦è¶‹åŠ¿å›¾"></p><h4 id="æ¯ç§é™æ€åˆ†æç±»å‹çš„é—®é¢˜"><a href="#æ¯ç§é™æ€åˆ†æç±»å‹çš„é—®é¢˜" class="headerlink" title="æ¯ç§é™æ€åˆ†æç±»å‹çš„é—®é¢˜"></a>æ¯ç§é™æ€åˆ†æç±»å‹çš„é—®é¢˜</h4><p>å¦‚æœä½ è¦æ±‡æ€»å‡ ä¸ªé™æ€åˆ†æç»“æœï¼Œåˆ™ç±»å‹å›¾å°†ä½¿ç”¨å•ç‹¬çš„ä¸€è¡Œæ˜¾ç¤ºæ¯ä¸ªå·¥å…·çš„é—®é¢˜æ•°é‡ã€‚ä½ å¯ä»¥é€šè¿‡å•å‡»ç›¸åº”çš„å›¾ä¾‹ç¬¦å·æš‚æ—¶éšè—å·¥å…·ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/15.png" alt="å·¥å…·è¶‹åŠ¿å›¾"></p><h4 id="æ–°é—®é¢˜ä¸å·²ä¿®å¤é—®é¢˜"><a href="#æ–°é—®é¢˜ä¸å·²ä¿®å¤é—®é¢˜" class="headerlink" title="æ–°é—®é¢˜ä¸å·²ä¿®å¤é—®é¢˜"></a>æ–°é—®é¢˜ä¸å·²ä¿®å¤é—®é¢˜</h4><p>å¦‚æœä½ å¯¹ç§¯å‹çš„é—®é¢˜æ„Ÿå…´è¶£ï¼Œå¯ä»¥æ‰“å¼€æ–°çš„ä¸å›ºå®šçš„å›¾è¡¨ã€‚å®ƒæ˜ å°„äº†å¼•å…¥çš„é—®é¢˜ä¸é€šè¿‡ä¸€ç³»åˆ—æ„å»ºè§£å†³çš„é—®é¢˜ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ äº†è§£æ•´ä¸ªå¾…åŠäº‹é¡¹åˆ—è¡¨æ˜¯åœ¨å¢åŠ è¿˜æ˜¯åœ¨å‡å°‘ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/16.png" alt="æ–°ä¿®å¤è¶‹åŠ¿å›¾"></p><h4 id="é¡¹ç›®å¥åº·"><a href="#é¡¹ç›®å¥åº·" class="headerlink" title="é¡¹ç›®å¥åº·"></a>é¡¹ç›®å¥åº·</h4><p>ä»…å½“å¯ç”¨äº†è¿è¡ŒçŠ¶å†µæŠ¥å‘Šåï¼Œè¿è¡ŒçŠ¶å†µå›¾è¡¨æ‰å¯ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¶‹åŠ¿å›¾å°†æ˜¾ç¤ºå¥åº·å’Œä¸å¥åº·åŒºåŸŸä¸­çš„è­¦å‘Šæ•°é‡ã€‚ä½ çš„é¡¹ç›®ç›®æ ‡åº”è¯¥æ˜¯ä½¿è­¦å‘Šæ•°é‡ä¸é€ƒé¿å›¾è¡¨çš„ç»¿è‰²éƒ¨åˆ†ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/17.png" alt="å¥åº·è¶‹åŠ¿å›¾"></p><h4 id="ç¼©æ”¾"><a href="#ç¼©æ”¾" class="headerlink" title="ç¼©æ”¾"></a>ç¼©æ”¾</h4><p>ç»†èŠ‚è§†å›¾ä¸­çš„æ‰€æœ‰è¶‹åŠ¿å›¾éƒ½æ”¯æŒä½¿ç”¨å›¾è¡¨åº•éƒ¨çš„èŒƒå›´æ»‘å—ç¼©æ”¾æ„å»ºè½´ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/18.png" alt="æ”¾å¤§"></p><h4 id="æ„å»ºä¸æ—¥æœŸè½´"><a href="#æ„å»ºä¸æ—¥æœŸè½´" class="headerlink" title="æ„å»ºä¸æ—¥æœŸè½´"></a>æ„å»ºä¸æ—¥æœŸè½´</h4><p>è¯¦ç»†ä¿¡æ¯è§†å›¾ä¸­çš„æ‰€æœ‰è¶‹åŠ¿å›¾éƒ½å¯ä»¥æ˜¾ç¤ºæ¯ä¸ªæ„å»ºæˆ–æ¯å¤©çš„è­¦å‘Šæ•°é‡ã€‚ä½ å¯ä»¥é€šè¿‡é€‰æ‹©å³ä¸Šè§’çš„ç›¸åº”å›¾æ ‡åœ¨Xè½´å˜ä½“ä¹‹é—´åˆ‡æ¢ï¼Œæ¯å¤©æ˜¾ç¤ºå¹³å‡è­¦å‘Šæ•°ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/19.png" alt="æ„å»ºä¸æ—¥æœŸ"></p><h3 id="é—®é¢˜æ¦‚è¿°"><a href="#é—®é¢˜æ¦‚è¿°" class="headerlink" title="é—®é¢˜æ¦‚è¿°"></a>é—®é¢˜æ¦‚è¿°</h3><p>ä½ å¯ä»¥åœ¨å‡ ä¸ªèšåˆè§†å›¾ä¸­å¿«é€Ÿï¼Œé«˜æ•ˆåœ°æŸ¥çœ‹æŠ¥å‘Šçš„é—®é¢˜é›†ã€‚æ ¹æ®é—®é¢˜çš„æ•°é‡æˆ–ç±»å‹ï¼Œä½ å°†çœ‹åˆ°é—®é¢˜çš„åˆ†å¸ƒ</p><ul><li>Static Analysis Toolï¼ˆé™æ€åˆ†æå·¥å…·ï¼‰</li><li>Moduleï¼ˆæ¨¡ç»„ï¼‰</li><li>Package or Namespaceï¼ˆåŒ…æˆ–å‘½åç©ºé—´ï¼‰</li><li>Severityï¼ˆä¸¥é‡ç¨‹åº¦ï¼‰</li><li>Categoryï¼ˆç±»åˆ«ï¼‰</li><li>Typeï¼ˆç±»å‹ï¼‰</li></ul><p>è¿™äº›è¯¦ç»†ä¿¡æ¯è§†å›¾ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ˜¯äº¤äº’å¼çš„ï¼Œå³ï¼Œä½ å¯ä»¥å¯¼èˆªåˆ°å·²åˆ†ç±»é—®é¢˜çš„å­é›†ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/20.png" alt="è½¯ä»¶åŒ…"></p><h3 id="é—®é¢˜è¯¦æƒ…"><a href="#é—®é¢˜è¯¦æƒ…" class="headerlink" title="é—®é¢˜è¯¦æƒ…"></a>é—®é¢˜è¯¦æƒ…</h3><p>ä¸€ç»„å·²æŠ¥å‘Šçš„é—®é¢˜æ˜¾ç¤ºåœ¨ä¸€ä¸ªç°ä»£åŒ–çš„å“åº”è¡¨ä¸­ã€‚è¯¥è¡¨ä½¿ç”¨ Ajax è°ƒç”¨æŒ‰éœ€åŠ è½½ï¼Œå®ƒæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li><strong>Pagination</strong>ï¼ˆåˆ†é¡µï¼‰ï¼šé—®é¢˜çš„æ•°é‡åˆ†ä¸ºå‡ ä¸ªé¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨æä¾›çš„é¡µé¢é“¾æ¥è¿›è¡Œé€‰æ‹©ã€‚è¯·æ³¨æ„ï¼Œç›®å‰åˆ†é¡µæ˜¯åœ¨å®¢æˆ·ç«¯è¿›è¡Œçš„ï¼Œå³ä»æœåŠ¡å™¨è·å–æ•´ä¸ªé—®é¢˜è¡¨å¯èƒ½è¦èŠ±è´¹ä¸€äº›æ—¶é—´ã€‚</li><li><strong>Sorting</strong>ï¼ˆæ’åºï¼‰ï¼šå¯ä»¥é€šè¿‡å•å‡»è¡¨åˆ—ä¸­çš„ä»…ä¸€ä¸ªæ¥å¯¹è¡¨å†…å®¹è¿›è¡Œæ’åºã€‚</li><li><strong>Filtering, Searching</strong>ï¼ˆè¿‡æ»¤ï¼Œæœç´¢ï¼‰ï¼šä½ å¯ä»¥é€šè¿‡åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä¸€äº›æ–‡æœ¬æ¥è¿‡æ»¤æ˜¾ç¤ºçš„é—®é¢˜ã€‚</li><li><strong>Content Aware</strong>ï¼ˆå†…å®¹æ„ŸçŸ¥ï¼‰ï¼šä»…å½“æœ‰å¿…è¦æ˜¾ç¤ºçš„å†…å®¹æ—¶æ‰æ˜¾ç¤ºåˆ—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå·¥å…·æœªæŠ¥å‘Šé—®é¢˜ç±»åˆ«ï¼Œåˆ™è¯¥ç±»åˆ«å°†è¢«è‡ªåŠ¨éšè—ã€‚</li><li><strong>Responsive</strong>ï¼ˆå“åº”å¼ï¼‰ï¼šå¸ƒå±€åº”é€‚åº”å®é™…çš„å±å¹•é˜ˆå€¼ã€‚</li><li><strong>Details</strong>ï¼ˆè¯¦ç»†ä¿¡æ¯ï¼‰ï¼šé—®é¢˜çš„è¯¦ç»†ä¿¡æ¯æ¶ˆæ¯ï¼ˆå¦‚æœç”±ç›¸åº”çš„é™æ€åˆ†æå·¥å…·æä¾›ï¼‰åœ¨è¡¨ä¸­æ˜¾ç¤ºä¸ºå­è¡Œã€‚</li></ul><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/20.png" alt="è¯¦æƒ…"></p><h3 id="æºä»£ç -Blameï¼ˆå½’å’äºï¼‰"><a href="#æºä»£ç -Blameï¼ˆå½’å’äºï¼‰" class="headerlink" title="æºä»£ç  Blameï¼ˆå½’å’äºï¼‰"></a>æºä»£ç  Blameï¼ˆå½’å’äºï¼‰</h3><p>è¿™ä¸ªåŠŸèƒ½éœ€è¦å®‰è£…å…¶ä»–æ’ä»¶ï¼š<a href="https://github.com/jenkinsci/git-forensics-plugin">Git Forensics æ’ä»¶</a></p><p>å¦‚æœæœªåœ¨ä½œä¸šé…ç½®ä¸­ç¦ç”¨ï¼Œåˆ™æ’ä»¶å°†æ‰§è¡Œ <code>git blame</code> ä»¥ç¡®å®šè°æ˜¯é—®é¢˜çš„è´Ÿè´£ <code>author</code>ã€‚åœ¨ç›¸åº”çš„ SCM Blames è§†å›¾ä¸­ï¼Œæ‰€æœ‰é—®é¢˜å°†ä¸ <code>auther name</code>, <code>email</code>, å’Œ <code>commit ID</code> ä¸€èµ·åˆ—å‡ºã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/22.png" alt="Git"></p><p>ä¸ºäº†ç¦ç”¨ <code>git blame</code> åŠŸèƒ½ï¼Œè¯·å°†å±æ€§ <code>blameDisabled</code> è®¾ç½®ä¸º <code>true</code>ï¼Œè¯·å‚è§ä»¥ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues blameDisabled: <span class="literal">true</span>, tool: java(pattern: <span class="string">&#x27;*.log&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="Git-ä»“åº“å–è¯"><a href="#Git-ä»“åº“å–è¯" class="headerlink" title="Git ä»“åº“å–è¯"></a>Git ä»“åº“å–è¯</h3><p>æ­¤åŠŸèƒ½éœ€è¦å®‰è£…å…¶ä»–æ’ä»¶ï¼š<a href="https://github.com/jenkinsci/git-forensics-plugin">Git Forensics æ’ä»¶</a></p><p>å¦‚æœæœªåœ¨ä½œä¸šé…ç½®ä¸­ç¦ç”¨ï¼Œåˆ™è¯¥æ’ä»¶å°†ä»¥â€œçŠ¯ç½ªç°åœºä»£ç â€çš„æ ·å¼ï¼ˆAdam Tornhillï¼Œ2013å¹´11æœˆï¼‰æŒ–æ˜æºä»£ç å­˜å‚¨åº“ï¼Œä»¥ç¡®å®šå—å½±å“æ–‡ä»¶çš„ç»Ÿè®¡ä¿¡æ¯ã€‚åœ¨ç›¸åº”çš„ â€œSCM å–è¯â€ è§†å›¾ä¸­ï¼Œå°†åˆ—å‡ºæ‰€æœ‰é—®é¢˜ä»¥åŠå—å½±å“æ–‡ä»¶çš„ä»¥ä¸‹å±æ€§ï¼š</p><ul><li>æäº¤æ€»æ•°</li><li>ä¸åŒä½œè€…æ€»æ•°</li><li>åˆ›ä½œæ—¶é—´</li><li>æœ€åä¿®æ”¹æ—¶é—´</li><li>æºä»£ç æ§åˆ¶æ¦‚è¿°</li></ul><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/23.png" alt="å–è¯è§†å›¾"></p><p>ä¸ºäº†ç¦ç”¨ Git å–è¯åŠŸèƒ½ï¼Œè¯·å°†å±æ€§ <code>forensicsDisabled</code>è®¾ç½®ä¸º <code>true</code>ï¼Œè¯·å‚è§ä»¥ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recordIssues forensicsDisabled: <span class="literal">true</span>, tool: java(pattern: <span class="string">&#x27;*.log&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="æºä»£ç è§†å›¾"><a href="#æºä»£ç è§†å›¾" class="headerlink" title="æºä»£ç è§†å›¾"></a>æºä»£ç è§†å›¾</h3><p>ç°åœ¨ï¼Œæºä»£ç è§†å›¾ä½¿ç”¨ JS åº“ Prism åœ¨å—å½±å“çš„æ–‡ä»¶ä¸­æ˜¾ç¤ºè­¦å‘Šã€‚è¯¥åº“ä¸ºæœ€æµè¡Œçš„è¯­è¨€æä¾›è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œå¹¶åœ¨å®¢æˆ·ç«¯å‘ˆç°æ‰€æœ‰å†…å®¹ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/24.png" alt="æºè§†å›¾"></p><h3 id="å‘è¡Œæ€»æ•°æ "><a href="#å‘è¡Œæ€»æ•°æ " class="headerlink" title="å‘è¡Œæ€»æ•°æ "></a>å‘è¡Œæ€»æ•°æ </h3><p>ä½ å¯ä»¥åœ¨ Jenkins ä½œä¸šè¡¨çš„å•ç‹¬åˆ—ä¸­æ˜¾ç¤ºä½œä¸šçš„æ€»æ•°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒJenkins ä¸»åˆ—è¡¨è§†å›¾å°†æ˜¾ç¤ºä¸€ä¸ªæ–°åˆ—ï¼Œè¯¥åˆ—è®¡ç®—æ‰€æœ‰å·¥å…·çš„å‘è¡Œæ€»æ•°ã€‚ ä½ å¯ä»¥æ·»åŠ å¯ä»¥é…ç½®çš„å…¶ä»–åˆ—</p><ul><li>åˆ—å</li><li>åº”è€ƒè™‘çš„å®é™…å·¥å…·</li><li>è¦æ˜¾ç¤ºçš„æ€»è®¡ç±»å‹ï¼ˆæ€»ä½“è­¦å‘Šï¼Œæ–°è­¦å‘Šï¼Œç‰¹å®šä¸¥é‡æ€§ç­‰ï¼‰ï¼Œè¯·å‚é˜… â€œtokenå®æ”¯æŒâ€ éƒ¨åˆ†ã€‚</li></ul><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/25.png" alt="é—®é¢˜åˆ—"></p><h3 id="ä»ªè¡¨æ¿è§†å›¾æ”¯æŒ"><a href="#ä»ªè¡¨æ¿è§†å›¾æ”¯æŒ" class="headerlink" title="ä»ªè¡¨æ¿è§†å›¾æ”¯æŒ"></a>ä»ªè¡¨æ¿è§†å›¾æ”¯æŒ</h3><p>è¿˜æä¾›å¯¹ Jenkins ä»ªè¡¨æ¿è§†å›¾çš„æ”¯æŒã€‚å½“å‰ï¼Œä»¥ä¸‹ portlet å¯ç”¨ï¼š</p><h4 id="æ¯ä¸ªå·¥å…·å’Œä½œä¸šè¡¨çš„é—®é¢˜"><a href="#æ¯ä¸ªå·¥å…·å’Œä½œä¸šè¡¨çš„é—®é¢˜" class="headerlink" title="æ¯ä¸ªå·¥å…·å’Œä½œä¸šè¡¨çš„é—®é¢˜"></a>æ¯ä¸ªå·¥å…·å’Œä½œä¸šè¡¨çš„é—®é¢˜</h4><p>é—®é¢˜è¡¨æ˜¾ç¤ºäº†ä½œä¸šçš„é—®é¢˜æ€»æ•°ï¼ˆç”±æ¯ä¸ªå·¥å…·åˆ†å¼€ï¼‰ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/26.png" alt="é—®é¢˜ portlet"></p><h4 id="é—®é¢˜è¶‹åŠ¿"><a href="#é—®é¢˜è¶‹åŠ¿" class="headerlink" title="é—®é¢˜è¶‹åŠ¿"></a>é—®é¢˜è¶‹åŠ¿</h4><p>å¯ä»¥å°†è¶‹åŠ¿å›¾æ·»åŠ ä¸º portletï¼Œè¯¥è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‰€æœ‰ä½œä¸šçš„å‘è¡Œæ€»æ•°ã€‚</p><p><img src="/2019/12/jenkins-warnings-next-generation-plugin/27.png" alt="å›¾è¡¨ portlet"></p><h3 id="è¿œç¨‹API"><a href="#è¿œç¨‹API" class="headerlink" title="è¿œç¨‹API"></a>è¿œç¨‹API</h3><p>è¯¥æ’ä»¶æä¾›ä»¥ä¸‹ REST API ç«¯ç‚¹ã€‚</p><h4 id="æ‰€æœ‰åˆ†æç»“æœçš„æ±‡æ€»æ‘˜è¦"><a href="#æ‰€æœ‰åˆ†æç»“æœçš„æ±‡æ€»æ‘˜è¦" class="headerlink" title="æ‰€æœ‰åˆ†æç»“æœçš„æ±‡æ€»æ‘˜è¦"></a>æ‰€æœ‰åˆ†æç»“æœçš„æ±‡æ€»æ‘˜è¦</h4><p>å¯ä»¥ä½¿ç”¨ URL <code>[build-url]/warnings-ng/api/json</code>ï¼ˆæˆ– <code>[build-url]/warnings-ng/api/xml</code>ï¼‰æŸ¥è¯¢æ„å»ºä¸­å·²é…ç½®çš„æ‰€æœ‰é™æ€åˆ†æå·¥å…·ã€‚æ­¤æ±‡æ€»æ˜¾ç¤ºæ¯ä¸ªå·¥å…·çš„ IDï¼Œåç§°ï¼ŒURL å’Œé—®é¢˜æ€»æ•°ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_class&quot;</span><span class="punctuation">:</span> <span class="string">&quot;io.jenkins.plugins.analysis.core.restapi.AggregationApi&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;maven&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/maven&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Maven Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/java&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Java Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;javadoc&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/javadoc&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JavaDoc Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;checkstyle&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/checkstyle&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CheckStyle Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pmd&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/pmd&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PMD Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">671</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;spotbugs&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/spotbugs&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SpotBugs Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cpd&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/cpd&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CPD Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;open-tasks&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;latestUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/view/White%20Mountains/job/New%20-%20Pipeline%20-%20Simple%20Model/26/open-tasks&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Open Tasks Scanner Warnings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">11</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="åˆ†æç»“æœæ±‡æ€»"><a href="#åˆ†æç»“æœæ±‡æ€»" class="headerlink" title="åˆ†æç»“æœæ±‡æ€»"></a>åˆ†æç»“æœæ±‡æ€»</h4><p>ä½ å¯ä»¥ä½¿ç”¨ URL <code>[build-url]/[tool-id]/api/xml</code>ï¼ˆæˆ– <code>[build-url]/[tool-id]/api/json</code>ï¼‰è·å¾—ç‰¹å®šåˆ†ææŠ¥å‘Šçš„æ‘˜è¦ã€‚æ‘˜è¦åŒ…å«é—®é¢˜æ•°é‡ï¼Œè´¨é‡é—¨çŠ¶æ€ä»¥åŠæ‰€æœ‰ä¿¡æ¯å’Œé”™è¯¯æ¶ˆæ¯ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ XML æŠ¥å‘Šï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">analysisResultApi</span> <span class="attr">_class</span>=<span class="string">&#x27;io.jenkins.plugins.analysis.core.restapi.AnalysisResultApi&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">totalSize</span>&gt;</span>3<span class="tag">&lt;/<span class="name">totalSize</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fixedSize</span>&gt;</span>0<span class="tag">&lt;/<span class="name">fixedSize</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">newSize</span>&gt;</span>0<span class="tag">&lt;/<span class="name">newSize</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">noIssuesSinceBuild</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">noIssuesSinceBuild</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">successfulSinceBuild</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">successfulSinceBuild</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qualityGateStatus</span>&gt;</span>WARNING<span class="tag">&lt;/<span class="name">qualityGateStatus</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">owner</span> <span class="attr">_class</span>=<span class="string">&#x27;org.jenkinsci.plugins.workflow.job.WorkflowRun&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>46<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/view/White%20Mountains/job/Full%20Analysis%20-%20Model/46/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">owner</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Searching for all files in &#x27;/tmp/node1/workspace/Full Analysis - Model&#x27; that match the pattern</span><br><span class="line">    &#x27;**/target/spotbugsXml.xml&#x27;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; found 1 file<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Successfully parsed file /tmp/node1/workspace/Full Analysis - Model/target/spotbugsXml.xml<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; found 3 issues (skipped 0 duplicates)<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Post processing issues on &#x27;node1&#x27; with encoding &#x27;UTF-8&#x27;<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Resolving absolute file names for all issues<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; affected files for all issues already have absolute paths<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Copying affected files to Jenkins&#x27; build folder /Users/hafner/Development/jenkins/jobs/Full Analysis -</span><br><span class="line">    Model/builds/46</span><br><span class="line">  <span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; 2 copied, 0 not in workspace, 0 not-found, 0 with I/O error<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Resolving module names from module definitions (build.xml, pom.xml, or Manifest.mf files)<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; all issues already have a valid module name<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Resolving package names (or namespaces) by parsing the affected files<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; all affected files already have a valid package name<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Creating fingerprints for all affected code blocks to track issues over different builds<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>No filter has been set, publishing all 3 issues<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>No valid reference build found - all reported issues will be considered outstanding<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Evaluating quality qualityGates<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; WARNING - Total number of issues: 3 - Quality Gate: 1<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>-&gt; Some quality qualityGates have been missed: overall result is WARNING<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">infoMessage</span>&gt;</span>Health report is disabled - skipping<span class="tag">&lt;/<span class="name">infoMessage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">analysisResultApi</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Token-å®æ”¯æŒ"><a href="#Token-å®æ”¯æŒ" class="headerlink" title="Token å®æ”¯æŒ"></a>Token å®æ”¯æŒ</h3><p>Warnings æ’ä»¶æä¾›äº† token <code>ANALYSIS_ISSUES_COUNT</code>ï¼Œå¯ç”¨äºå…¶ä»–åæœŸæ„å»ºå¤„ç†æ­¥éª¤ï¼Œä¾‹å¦‚åœ¨é‚®ä»¶ä¸­ã€‚ä¸ºäº†ä½¿ç”¨æ­¤ tokenï¼Œä½ éœ€è¦å®‰è£… token å®æ’ä»¶ã€‚token å…·æœ‰ä»¥ä¸‹å¯é€‰å‚æ•°ï¼š</p><ul><li><code>tool</code>ï¼šé€‰æ‹©ç‰¹å®šçš„åˆ†æç»“æœï¼Œå¦‚æœæœªå®šä¹‰ï¼Œåˆ™å°†æ‰€æœ‰ç»“æœç›¸åŠ </li><li><code>type</code>ï¼šé€‰æ‹©è¦ä½¿ç”¨çš„è®¡æ•°å™¨çš„ç±»å‹ï¼Œè¯·é€‰æ‹©ä»¥ä¸‹ä¹‹ä¸€<ul><li>Totalï¼ˆä»»ä½•ä¸¥é‡æ€§ï¼‰</li><li>Totalï¼ˆä»…é”™è¯¯ï¼‰</li><li>Totalï¼ˆä»…ä¸¥é‡åº¦é«˜ï¼‰</li><li>Totalï¼ˆä»…ä¸¥é‡çº§åˆ«æ­£å¸¸ï¼‰</li><li>Totalï¼ˆä»…é™ä¸¥é‡æ€§ä½ï¼‰</li><li>New  ï¼ˆä»»ä½•ä¸¥é‡ç¨‹åº¦ï¼‰</li><li>New  ï¼ˆä»…é™é”™è¯¯ï¼‰</li><li>New  ï¼ˆä»…é™ä¸¥é‡æ€§é«˜ï¼‰</li><li>New  ï¼ˆä»…ä¸¥é‡æ€§ä¸ºæ­£å¸¸ï¼‰</li><li>New  ï¼ˆä»…é™ä¸¥é‡æ€§ä½ï¼‰</li><li>Deltaï¼ˆä»»ä½•ä¸¥é‡ç¨‹åº¦ï¼‰</li><li>Deltaï¼ˆä»…é”™è¯¯ï¼‰</li><li>Deltaï¼ˆä»…ä¸¥é‡åº¦é«˜ï¼‰</li><li>Deltaï¼ˆä»…ä¸¥é‡ç­‰çº§æ­£å¸¸ï¼‰</li><li>Deltaï¼ˆä»…ä¸¥é‡åº¦ä½ï¼‰</li><li>Fixedï¼ˆä»»ä½•ä¸¥é‡æ€§ï¼‰</li></ul></li></ul><p>ä¾‹å­ï¼š</p><p><code>$&#123;ANALYSIS_ISSUES_COUNT&#125;</code>ï¼šæ‰©å±•åˆ°æ‰€æœ‰åˆ†æå·¥å…·çš„åˆè®¡æ•°é‡</p><p><code>$&#123;ANALYSIS_ISSUES_COUNT, tool=&quot;checkstyle&quot;&#125;</code>ï¼šæ‰©å±•åˆ°CheckStyleé—®é¢˜çš„æ€»æ•°</p><p><code>$&#123;ANALYSIS_ISSUES_COUNT, tool=&quot;checkstyle&quot;, type: &quot;NEW&quot;&#125;</code>ï¼šæ‰©å±•åˆ°æ–°çš„ CheckStyle é—®é¢˜æ•°</p><h2 id="ä»é™æ€åˆ†æå¥—ä»¶è¿‡æ¸¡"><a href="#ä»é™æ€åˆ†æå¥—ä»¶è¿‡æ¸¡" class="headerlink" title="ä»é™æ€åˆ†æå¥—ä»¶è¿‡æ¸¡"></a>ä»é™æ€åˆ†æå¥—ä»¶è¿‡æ¸¡</h2><p>ä»¥å‰ï¼Œé™æ€åˆ†æå¥—ä»¶çš„æ’ä»¶æä¾›äº†ç›¸åŒçš„åŠŸèƒ½é›†ï¼ˆCheckStyleï¼ŒPMDï¼ŒFindBugsï¼Œé™æ€åˆ†æå®ç”¨å·¥å…·ï¼ŒAnalysis Collectorï¼Œä»»åŠ¡æ‰«æå™¨ï¼ŒWarnings ç­‰ï¼‰ã€‚ä¸ºäº†ç®€åŒ–ç”¨æˆ·ä½“éªŒå’Œå¼€å‘è¿‡ç¨‹ï¼Œè¿™äº›æ’ä»¶å’Œæ ¸å¿ƒåŠŸèƒ½å·²åˆå¹¶åˆ°Warnings Next Generation æ’ä»¶ä¸­ã€‚è¿™äº›æ—§çš„é™æ€åˆ†ææ’ä»¶ä¸å†éœ€è¦ï¼Œç°åœ¨å·²ç»åœäº§ã€‚å¦‚æœå½“å‰ä½¿ç”¨è¿™äº›æ—§æ’ä»¶ä¹‹ä¸€ï¼Œåˆ™åº”å°½å¿«è¿ç§»åˆ°æ–°çš„è®°å½•å™¨å’Œæ­¥éª¤ã€‚æˆ‘ä»ç„¶ä¼šä¿ç•™æ—§ä»£ç ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯ä¸»è¦çš„å¼€å‘å·¥ä½œå°†èŠ±åœ¨æ–°çš„ä»£ç åº“ä¸­ã€‚</p><ul><li>è¿ç§» Pipelines</li></ul><p>è°ƒç”¨æ—§çš„é™æ€åˆ†ææ­¥éª¤ï¼ˆä¾‹å¦‚ï¼Œfindbugï¼Œcheckstyle ç­‰ï¼‰çš„ç®¡é“éœ€è¦ç«‹å³è°ƒç”¨æ–°çš„ recordIssues æ­¥éª¤ã€‚æ‰€æœ‰é™æ€åˆ†æå·¥å…·éƒ½ä½¿ç”¨ç›¸åŒçš„æ­¥éª¤ï¼Œä½¿ç”¨ step å±æ€§å·¥å…·é€‰æ‹©å®é™…çš„è§£æå™¨ã€‚æœ‰å…³å¯ç”¨å‚æ•°é›†çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§â€œ<a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/doc/Documentation.md#configuration">é…ç½®</a>â€éƒ¨åˆ†ã€‚</p><ul><li>è¿ç§»å…¶ä»–æ‰€æœ‰å·¥ä½œ</li></ul><p>ä½¿ç”¨æ—§ç‰ˆ API çš„ Freestyleï¼ŒMatrix æˆ– Maven Jobs ä½¿ç”¨äº†ç”±æ¯ä¸ªæ’ä»¶æä¾›çš„æ‰€è°“çš„ Post Build Actionã€‚ä¾‹å¦‚ï¼ŒFindBugs æ’ä»¶ç¡®å®æä¾›äº†æ„å»ºåæ“ä½œâ€œå‘å¸ƒ FindBugs åˆ†æç»“æœâ€ã€‚è¿™äº›æ—§çš„æ’ä»¶ç‰¹å®šæ“ä½œä¸å†å—æ”¯æŒï¼Œå®ƒä»¬ç°åœ¨åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ ‡è®°ä¸º [Deprecated]ã€‚ç°åœ¨ï¼Œä½ éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„åæœŸæ„å»ºæ­¥éª¤-å¯¹äºæ‰€æœ‰é™æ€åˆ†æå·¥å…·ï¼Œæ­¤æ­¥éª¤ç°åœ¨ç§°ä¸ºâ€œè®°å½•ç¼–è¯‘å™¨è­¦å‘Šå’Œé™æ€åˆ†æç»“æœâ€ã€‚å·¥å…·çš„é€‰æ‹©æ˜¯æ­¤åæœŸæ„å»ºæ­¥éª¤é…ç½®çš„ä¸€éƒ¨åˆ†ã€‚æ³¨æ„ï¼šæ–°çš„åæœŸåˆ¶ä½œæ“ä½œæ— æ³•è¯»å–ä½¿ç”¨æ—§ API çš„åæœŸåˆ¶ä½œæ­¥éª¤æ‰€äº§ç”Ÿçš„è­¦å‘Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çœ‹ä¸åˆ°æ–°æ—§ç»“æœçš„åˆå¹¶å†å²è®°å½•-ä½ ä»…çœ‹åˆ°ä¸¤ä¸ªä¸ç›¸å…³çš„ç»“æœã€‚ä¹Ÿä¸ä¼šè‡ªåŠ¨è½¬æ¢ä»¥æ—§æ ¼å¼å­˜å‚¨çš„ç»“æœã€‚</p><ul><li>æ’ä»¶çš„è¿ç§»å–å†³äºåˆ†ææ ¸å¿ƒ</li></ul><p>ä»¥ä¸‹æ’ä»¶å·²é›†æˆåˆ°æ­¤è­¦å‘Šæ’ä»¶çš„æ–°ç‰ˆæœ¬ä¸­ï¼š</p><ul><li>Android-Lint æ’ä»¶</li><li>Analysis Collector æ’ä»¶</li><li>CheckStyle æ’ä»¶</li><li>CCM æ’ä»¶</li><li>Dry æ’ä»¶</li><li>PMD æ’ä»¶</li><li>FindBugs æ’ä»¶</li><li>Tasks Scanner æ’ä»¶</li><li>Warnings æ’ä»¶</li></ul><p>æ‰€æœ‰å…¶ä»–æ’ä»¶ä»éœ€è¦é›†æˆæˆ–éœ€è¦é‡æ„ä»¥ä½¿ç”¨æ–°çš„ API</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019 å¹´ç»ˆæ€»ç»“</title>
      <link href="/2019/12/2019-summary/"/>
      <url>/2019/12/2019-summary/</url>
      
        <content type="html"><![CDATA[<p>æ—¶é—´è¿‡å¾—é£å¿«ï¼Œè½¬çœ¼å·²ç»æ˜¯ 2020 å¹´çš„ç¬¬ä¸‰å¤©äº†ï¼Œå›é¡¾ 2019 å¹´ï¼Œæˆ‘ç»™è‡ªå·±çš„å¹´ç»ˆå…³é”®è¯æ˜¯ï¼šå°½åŠ›ã€‚</p><p>è¿™æ˜¯æˆ‘ä½œä¸ºå¼€å‘å·¥ç¨‹å¸ˆçš„ç¬¬äºŒå¹´ï¼Œè™½ç„¶ Title æ˜¯ SE (Software Engineer)ï¼Œä½†ä¸»è¦çš„å·¥ä½œå†…å®¹æ˜¯äº§å“çš„æ„å»ºå’Œå‘å¸ƒä»¥åŠ CI&#x2F;CD&#x2F;DevOps çš„è½åœ°ï¼ˆè‡ªç§°æ‰“æ‚ï¼‰ã€‚æµæ°´çš„è®°å½•ä¸€ä¸‹ 2019 å¹´å‘ç”Ÿåœ¨å·¥ä½œä¸Šçš„â€œæˆç»©â€ã€‚</p><span id="more"></span><p>2019 å¹´åœ¨å·¥ä½œä¸­é™¤äº†å®Œæˆæ—¥å¸¸äº§å“æ„å»ºã€å‘å¸ƒã€Git ç®¡ç†ã€VM ç®¡ç†ç­‰ï¼Œå°è¯•åœ¨æ„å»ºå’Œå‘å¸ƒè‡ªåŠ¨åŒ–ä¸Šåšå¤§çš„è°ƒæ•´ï¼Œå°†æ‰‹å·¥æ„å»ºå’Œéƒ¨åˆ†è‡ªåŠ¨æ„å»ºä» Bamboo è¿ç§»åˆ° Jenkinsï¼Œé€šè¿‡ Jenkins çš„ multi-branch pipelineã€Shared Libraries ä¸ Artifactory åšæŒç»­é›†æˆã€‚</p><p>2019 å¹´åœ¨å…¬å¸å†…éƒ¨æäº¤äº†ä¸€ä¸ªåˆ›æ–°é¡¹ç›®ï¼Œæœ‰å¹¸æ‹¿åˆ°äº†ç¬¬ä¸€åå’Œé¦–å¸­äº§å“å¥–ã€‚</p><p>å› æ­¤æœ‰æœºä¼šå†å»ç¾å›½ï¼Œå‚åŠ äº†å…¬å¸çš„å¼€å‘è€…å¤§ä¼šã€‚å¾ˆå¼€å¿ƒè¿™ä¸ªé¡¹ç›®æœ€ç»ˆè¿›å…¥åˆ°äº†äº§å“çš„ Roadmap é‡Œã€‚</p><p>2019 å¹´åº• 12 æœˆå»åŒ—äº¬å‚åŠ äº†ä¸€æ¬¡ä¸¤å¤©çš„ã€ŠJFrog Jenkinsï¼ŒArtifactory &amp; Kubernetesã€‹è®­ç»ƒè¥ï¼Œè·Ÿ DevOps è¡Œä¸šå·¥å…·é‡Œæœ€æœ‰å½±å“åŠ›ï¼ˆä¹‹ä¸€ï¼‰çš„å…¬å¸çš„å·¥ç¨‹å¸ˆå­¦ä¹ æœ€ä½³å®è·µã€‚</p><p>è¿™ä¸€å¹´å…³äºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜æ”¶è·ä¸å°‘æ–°çš„çŸ¥è¯†ï¼Œä½†åªæ›´æ–°äº† 11 ç¯‡å…¬ä¼—å·ç›¸å…³åŸåˆ›æ–‡ç« ï¼Œ33 ç¯‡ Blogã€‚è¿™å·®åˆ«æ˜¯å› ä¸º Blog æ›´åƒç¬”è®°ï¼Œéšæ—¶è®°å½•ä¿®æ”¹ä¸æ€•é”™ï¼›å…¬ä¼—å·æ›´åƒæŠ¥çº¸ï¼Œå‘å‡ºå»çš„å†…å®¹æ— æ³•ä¿®æ”¹å’Œè¡¥å……ï¼Œæ¯æ¬¡æ›´æ–°éƒ½éœ€è¦ä¸€å­—ä¸€å¥åå¤ä¿®æ”¹å’Œé˜…è§ˆç¡®è®¤ï¼Œæœ€ç»ˆè¾“å‡ºä¸€ç¯‡å®Œæ•´çš„åŸåˆ›å†…å®¹éœ€è¦èŠ±è´¹æ¯”å†™ Blog å¤šå‡ å€çš„æ—¶é—´ã€‚</p><p>å¸Œæœ› 2020 å¹´èƒ½å®Œæˆæ›´å¤šæœ‰ä»·å€¼çš„å†…å®¹è¾“å‡ºï¼Œæœ‰æœºä¼šçš„è¯ç”¨ 8 åˆ° 10 ä¸ªæœˆçš„ä¸šä½™æ—¶é—´å®Œæˆä¸€ä»¶ä»¥å‰ä¸€ç›´ä¸æ•¢æƒ³çš„äº‹ï¼ˆå¦‚æœå®Œæˆå°±å†™ä¸‹æ¥ï¼Œæ²¡æˆå°±çƒ‚åœ¨è‚šå­é‡Œï¼‰ã€‚</p><p>åˆ†äº«åœ¨ 2019 å¹´æœ€åä¸€å¤©æ”¶åˆ°çš„ä¸€å°é‚®ä»¶ï¼š</p><p>å‰æ®µæ—¶é—´å¤§å®¶éƒ½åšäº†å¹´æœ«æ€»ç»“ã€‚è¯•é—®ï¼Œæœ‰å¤šå°‘äººå¯¹è‡ªå·±ä¸€å¹´çš„è¡¨ç°æ»¡æ„ï¼Ÿä½ æ˜¯å¦åœ¨å·¥ä½œä¸­ä½“ç°å‡ºä½ çš„ä»·å€¼ï¼Ÿä½ æäº¤äº†å¤šå°‘æ¬¡ä»£ç ï¼Ÿæäº¤çš„ä»£ç è´¨é‡æ€ä¹ˆæ ·ï¼Ÿä½ è§£å†³äº†å¤šå°‘ä¸ªå®¢æˆ·é—®é¢˜ï¼Ÿä½ å‘ç°äº†å¤šå°‘ bugï¼Ÿ<br>ä½ æ˜¯å¦åœ¨æŠ€æœ¯å’Œä¸šåŠ¡çŸ¥è¯†æœ‰æ‰€æé«˜ï¼Ÿå’Œä½ çš„åŒäº‹æ¯”è¾ƒï¼Œä½ çš„è¿›æ­¥é€Ÿåº¦ä½ è‡ªå·±æ˜¯å¦æ»¡æ„ï¼Ÿåˆæœ‰å¤šå°‘äººæŠŠæ—¶é—´éƒ½èŠ±åœ¨äº†å¾®ä¿¡å’ŒèŠå¤©ä¸Šï¼Ÿæœ‰æ²¡æœ‰äººæ˜¯å¾…ç€æ··æ—¥å­ï¼Œæˆ–è€…åº”ä»˜å…¬äº‹çš„æ€è·¯åœ¨è¿™é‡Œå·¥ä½œã€‚<br>æˆ‘ä»¬å¹´é¾„éƒ½å·®ä¸å¤šï¼Œå¤šåŠæ˜¯ä¸‰å››åå²ã€‚è¿™ä¸ªå¹´é¾„è¢«è®¤ä¸ºæ˜¯æœ€å¥½çš„å·¥ä½œå¹´é¾„ã€‚å¸Œæœ›ä½ ä¸è¦åœ¨è¿™é‡Œæµªè´¹ä½ æœ€å¥½çš„æ—¶å…‰ã€‚<br>æœ‰äººå¯èƒ½è¯´ï¼Œæˆ‘å·²ç»å®ç°æˆ–è€…æ¥è¿‘æ—¶é—´è´¢åŠ¡è‡ªç”±äº†ï¼Œæˆ‘å¯¹å·¥ä½œæ²¡æœ‰å¤§çš„è¦æ±‚ã€‚é¦–å…ˆæˆ‘æ­å–œä½ å®ç°è´¢åŠ¡è‡ªç”±ï¼Œä½†åŒæ—¶æˆ‘æƒ³è¯´çš„æ˜¯å·¥ä½œç»ä¸åªæ˜¯ä¸€ä»½æ”¶å…¥æ¥æºè¿™ä¹ˆç®€å•ã€‚ä½ æ˜¯å¦èƒ½åœ¨å·¥ä½œä¸­å¾—åˆ°åŒäº‹å’Œé¢†å¯¼çš„è®¤å¯ï¼Œæ˜¯å¦èƒ½ä½“ç°è‡ªå·±çš„ä»·å€¼ã€‚<br>æˆ‘å–œæ¬¢å’Œæœ‰æ±‚çŸ¥æ¬²ï¼Œæœ‰è´£ä»»æ„Ÿï¼Œæœ‰ä¸Šè¿›å¿ƒçš„äººä¸€èµ·å·¥ä½œã€‚æˆ‘åŒæ—¶ä¸å–œæ¬¢å·¥ä½œæ—¶é—´ï¼Œæ•´å¤©æ‹¿ç€æ‰‹æœºä¸ç¦»æ‰‹çš„ï¼Œ å·¥ä½œä¸Šæ²¡æœ‰ä¸Šè¿›å¿ƒçš„äººã€‚å¦‚æœç¡®å®æœ‰äº‹æƒ…ï¼Œå¯ä»¥ç¦»å¼€ä½œä¸ºå»æ‰“ä¸ªç”µè¯ï¼Œè¿…é€Ÿè§£å†³ä¸€ä¸‹ã€‚æ²¡æœ‰äº‹æƒ…çš„é—²çœ‹ï¼Œæ˜¯ä¸èµæˆçš„ã€‚<br>è¿˜æœ‰äººï¼Œåˆ°ç‚¹å°±å‡†æ—¶ä¸‹ç­ï¼Œå¾ˆåƒå¤šå¹²å‡ åˆ†é’Ÿè‡ªå·±å°±åƒäºäº†ä¸€æ ·ï¼Œè¿™ç§å¿ƒæ€åƒä¸‡ä¸å¯å–ã€‚è¯•é—®ï¼Œå¦‚æœä½ çš„èƒ½åŠ›æ°´å¹³ä¸åŠä½ çš„åŒäº‹ï¼Œä½ æ¯å¤©è¿˜ä¸æ¯”åˆ«äººå¤šåŠªåŠ›ï¼Œä½ æ€ä¹ˆæ‰èƒ½æ¥è¿‘æˆ–è€…è¶…è¿‡åˆ«äººï¼Ÿéš¾é“æ°¸è¿œéƒ½æƒ³è½åï¼Ÿæ¯å¤©å¤šèµ°ä¸€é‡Œè·¯ï¼Œæ¯å¤©å¤šåšä¸€äº›å§ã€‚</p><p>æˆ‘è¯»äº†å¥½å‡ éï¼Œæ„Ÿè°¢ä¸Šé¢çš„è¯ï¼Œä»ä¸ªäººè§’åº¦éå¸¸è®¤åŒä»¥ä¸Šè§‚ç‚¹ï¼Œå°¤å…¶æ˜¯è¯´å·¥ä½œç»ä¸æ˜¯ä¸€ä»½æ”¶å…¥æ¥æºè¿™ä¹ˆç®€å•ï¼Œå®ƒæ˜¯ä¸€ä¸ªäººçš„ä»·å€¼ä½“ç°ã€‚å¦‚æœå–œæ¬¢è¿™ä»½å·¥ä½œï¼Œå°½åŠ›å»åšåˆ°æœ€å¥½å§ï¼›å¦‚æœä¸å–œæ¬¢ï¼Œè¿˜æ˜¯è¶æ—©æ‰¾åˆ°è‡ªå·±çš„ä¹è¶£æ‰€åœ¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Thought </tag>
            
            <tag> Summary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git å†å²ç»Ÿè®¡ä¿¡æ¯ç”Ÿæˆå™¨</title>
      <link href="/2019/12/git-stats/"/>
      <url>/2019/12/git-stats/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½ æ˜¯ç ”å‘æ•ˆèƒ½ç»„çš„ä¸€å‘˜æˆ–è€…åœ¨ä»äº‹ CI&#x2F;CD æˆ– DevOpsï¼Œé™¤äº†æä¾›åŸºç¡€è®¾æ–½ï¼ŒæŒ‡æ ‡å’Œæ•°æ®æ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸€ç¯ï¼Œæ¯”å¦‚éœ€è¦åˆ†æä¸‹æŸä¸ª Git ä»“åº“ä»£ç æäº¤æƒ…å†µï¼š</p><ul><li>è¿™ä¸ªä»“åº“çš„ä»£ç è°æäº¤çš„ä»£ç æœ€å¤š</li><li>è¿™ä¸ªä»“åº“çš„æ´»è·ƒåº¦æ˜¯ä»€ä¹ˆæ ·å­çš„</li><li>å„ä¸ªæ—¶æ®µçš„æäº¤åˆ†ææ•°æ®</li><li>æ¯ä¸ªç‰ˆæœ¬çš„è´¡çŒ®æ’å</li><li>æ¯å‘¨&#x2F;æ¯æœˆ&#x2F;æ¯å¹´çš„è´¡çŒ®æ’åç­‰ç­‰</li></ul><p>å‡ å¤©å‰å‘ç°ä¸€ä¸ª Git å†å²ç»Ÿè®¡ä¿¡æ¯ç”Ÿæˆå·¥å…·å« GitStats ( <a href="http://gitstats.sourceforge.net/">http://gitstats.sourceforge.net/</a> )</p><span id="more"></span><p>è¿™æ˜¯ä¸€ä¸ªç”¨ python å†™çš„ï¼Œä»£ç é‡å¾ˆå°‘ï¼ŒåŠŸèƒ½å´éå¸¸å¼ºå¤§çš„åˆ†æå·¥å…·ï¼Œä¹Ÿæ˜¯æˆ‘ç›®å‰å‘ç°ä¸ºæ•°ä¸å¤šçš„å¯ä»¥ç”Ÿæˆæ¼‚äº®çš„æŠ¥å‘Šå¹¶ä¸”ä½¿ç”¨å¾ˆæ–¹ä¾¿çš„å¼€æºé¡¹ç›®ã€‚</p><p>gitstats çš„æŠ¥å‘Šä¹Ÿå¾ˆå¼ºå¤§ (<a href="https://github.com/tomgi/gitstats">https://github.com/tomgi/gitstats</a>) æ„Ÿå…´è¶£çš„å¯ä»¥è¯•è¯•</p><h2 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h2><p>å®‰è£…ä¾èµ–ï¼šGitï¼ŒPythonï¼ŒGnuplotã€‚</p><p>å¦‚æœæœ‰ Linuxï¼Œæ¨èåœ¨ Linux ä¸Šä¸‹è½½å’Œå®‰è£…ã€‚æˆ‘æ›¾å°è¯•ç”¨ Windows æ¥å‡†å¤‡ç¯å¢ƒï¼Œè¦ä¸‹è½½ Python2ï¼Œé…ç½® Cygwinï¼Œè¿˜è¦æ‰‹åŠ¨é…ç½® Gnuplot ï¼ˆGnuplot æ˜¯ä¸€ä¸ªå¯ç§»æ¤çš„å‘½ä»¤è¡Œé©±åŠ¨çš„å›¾å½¢å·¥å…·ï¼‰ï¼ŒæŒºéº»çƒ¦çš„ã€‚ä»¥ä¸‹æ˜¯æˆ‘åœ¨ Linux ä¸Šæ¥çš„å®‰è£…å’Œä½¿ç”¨æ­¥éª¤ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½ Python 2</span></span><br><span class="line">sudo yum -y install python27</span><br><span class="line"><span class="comment"># å®‰è£… Gnuplot</span></span><br><span class="line">sudo yum -y install gnuplot</span><br><span class="line"><span class="comment"># ä¸‹è½½ gitstats</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/hoxu/gitstats.git</span><br><span class="line"><span class="comment"># ä¸‹è½½ä½ è¦åˆ†æçš„ä»£ç ä»“åº“</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/alibaba/fastjson.git</span><br><span class="line"><span class="comment"># æ‰§è¡Œå‘½ä»¤ï¼Œç”Ÿäº§æŠ¥å‘Š</span></span><br><span class="line"><span class="built_in">cd</span> gitstats</span><br><span class="line">./gitstats ../fastjson ../html/fastjson</span><br><span class="line"><span class="comment"># ç»è¿‡ 15 ç§’é’Ÿçš„æ‰§è¡Œï¼Œç”ŸæˆæŠ¥å‘Š</span></span><br><span class="line">Generating report...</span><br><span class="line">[0.00393] &gt;&gt; git --git-dir=/workspace/gitstats/.git --work-tree=/workspace/gitstats rev-parse --short HEAD</span><br><span class="line">[0.00236] &gt;&gt; git --version</span><br><span class="line">[0.00716] &gt;&gt; gnuplot --version</span><br><span class="line">Generating graphs...</span><br><span class="line">[0.01676] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/day_of_week.plot&quot;</span></span><br><span class="line">[0.01571] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/files_by_date.plot&quot;</span></span><br><span class="line">[0.01281] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/month_of_year.plot&quot;</span></span><br><span class="line">[0.09293] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/lines_of_code_by_author.plot&quot;</span></span><br><span class="line">[0.01340] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/commits_by_year.plot&quot;</span></span><br><span class="line">[0.01799] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/hour_of_day.plot&quot;</span></span><br><span class="line">[0.01627] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/domains.plot&quot;</span></span><br><span class="line">[0.01268] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/commits_by_year_month.plot&quot;</span></span><br><span class="line">[0.09435] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/commits_by_author.plot&quot;</span></span><br><span class="line">[0.01522] &gt;&gt; gnuplot <span class="string">&quot;/workspace/html/fastjson/lines_of_code.plot&quot;</span></span><br><span class="line">Execution time 15.16208 secs, 4.58247 secs (30.22 %) <span class="keyword">in</span> external commands)</span><br><span class="line">You may now run:</span><br><span class="line"></span><br><span class="line">   sensible-browser <span class="string">&#x27;/workspace/html/fastjson/index.html&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="æŠ¥å‘Šåˆ†æ"><a href="#æŠ¥å‘Šåˆ†æ" class="headerlink" title="æŠ¥å‘Šåˆ†æ"></a>æŠ¥å‘Šåˆ†æ</h2><h3 id="å¸¸è§„ç»Ÿè®¡"><a href="#å¸¸è§„ç»Ÿè®¡" class="headerlink" title="å¸¸è§„ç»Ÿè®¡"></a>å¸¸è§„ç»Ÿè®¡</h3><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡¹ç›®å« fastjsonï¼Œä» 2011 å¹´ 7 æœˆ 31 æ—¥å¼€å§‹æäº¤ç¬¬ä¸€æ¬¡ä»£ç ï¼Œè·ç¦»å½“å‰å·²ç» 3060 å¤©äº†ï¼Œ893 ä¸ªæ´»è·ƒå¤©ã€‚æ€»å…±æ–‡ä»¶æ˜¯ 2960 ä¸ªï¼Œä¸€å…±çš„ä»£ç è¡Œæ•°æ˜¯ 25 ä¸‡è¡Œã€‚</p><p><img src="/2019/12/git-stats/git-stats-index.png" alt="å¸¸è§„ç»Ÿè®¡"></p><h3 id="æ´»è·ƒåº¦"><a href="#æ´»è·ƒåº¦" class="headerlink" title="æ´»è·ƒåº¦"></a>æ´»è·ƒåº¦</h3><p>æ¯å¤©ä¸­çš„æ¯å°æ—¶çš„ã€æ¯å‘¨ä¸­çš„æ¯å¤©ã€æ¯å‘¨ä¸­çš„æ¯å°æ—¶ï¼Œæ¯å¹´ä¸­çš„æ¯æœˆçš„ã€æ¯å¹´çš„æäº¤æ•°é‡ã€‚</p><p>åœ¨è¿‡å»çš„ 32 å‘¨é‡Œï¼Œå…¶ä¸­å‰ 12 å‘¨åˆ° 17 å‘¨è¿™æ®µæ—¶é—´å¾ˆæ´»è·ƒï¼Œæäº¤å¾ˆå¤šã€‚å¦å¤–å¯ä»¥çœ‹åˆ°åœ¨ç™½å¤© 12 ç‚¹åˆ°æ™šä¸Š 20 ç‚¹è¿™æ®µæ—¶é—´æäº¤å¾ˆå°‘ï¼Œå¤§éƒ¨åˆ†ç¨‹åºå‘˜åœ¨è¿™æ®µæ—¶é—´éƒ½åœ¨åº”å¯¹å…¬å¸é‡Œçš„å·¥ä½œï¼Œæ— æ³•è´¡çŒ®å¼€æºé¡¹ç›®ã€‚</p><p>æ™šä¸Š 20 ç‚¹ä¹‹åæäº¤å¼€å§‹å¢å¤šï¼Œçœ‹æ¥æ˜¯ä¸€ä¸ªéå¸¸åŠªåŠ›çš„å¼€å‘è€…ã€‚å¦å¤–å¯ä»¥çœ‹åˆ°å‘¨ä¸€åˆ°å‘¨æ—¥éƒ½æœ‰æäº¤ï¼Œå‘¨å…­ç›¸å¯¹æœ€å°‘ï¼Œåº”è¯¥æ˜¯å‘¨å…­ä¼‘æ¯å’Œæ”¾æ¾ä¸€ä¸‹ã€‚å‘¨æ—¥æäº¤æ˜æ˜¾æ¯”å‘¨å…­å¤šï¼Œçœ‹æ¥è¿˜æ˜¯èŠ±è´¹äº†ä¸å°‘çš„ä¸ªäººå®è´µå‘¨æœ«æ—¶é—´ã€‚</p><p><img src="/2019/12/git-stats/git-stats-activity-1.png" alt="æ´»è·ƒåº¦-1"></p><p>è¿˜èƒ½çœ‹åˆ°è¯¥é¡¹ç›®ä¸»è¦å®Œæˆæ—¶é—´åœ¨ 2016 å¹´åˆ° 2017 å¹´ï¼Œå®Œæˆçš„æ—¶åŒºæ˜¯åœ¨ä¸œå…«åŒºï¼Œè¿™ä¸ªç»´åº¦å¯å¯¹ä¸åŒåŒºåŸŸçš„å¼€å‘è€…è´¡çŒ®æ•°é‡è¿›è¡Œåˆ†æã€‚</p><p><img src="/2019/12/git-stats/git-stats-activity-2.png" alt="æ´»è·ƒåº¦-2"></p><h3 id="è´¡çŒ®è€…"><a href="#è´¡çŒ®è€…" class="headerlink" title="è´¡çŒ®è€…"></a>è´¡çŒ®è€…</h3><p>åˆ—ä¸¾äº†æ‰€æœ‰çš„ä½œè€…ï¼Œæäº¤æ•°ï¼Œç¬¬ä¸€æ¬¡æäº¤åŠæœ€è¿‘ä¸€æ¬¡æäº¤ã€‚</p><p><img src="/2019/12/git-stats/git-stats-authors-1.png" alt="è´¡çŒ®è€…-1"></p><p>è¿™å¼ å›¾ä¹Ÿæ˜¯å¯ä»¥çœ‹åˆ°è°æ˜¯è¯¥é¡¹ç›®çš„åˆ›å»ºè€…ï¼Œä»¥åŠè¿™å‡ å¹´ä»¥æ¥æ¯å¹´çš„è°çš„è´¡çŒ®æœ€å¤§ã€‚è¿˜æœ‰å¯ä»¥çœ‹åˆ°æäº¤è€…æ‰€ç”¨çš„é‚®ç®±è´¦æˆ·ã€‚</p><p><img src="/2019/12/git-stats/git-stats-authors-2.png" alt="è´¡çŒ®è€…-2"></p><h3 id="æ–‡ä»¶åŠè¡Œæ•°"><a href="#æ–‡ä»¶åŠè¡Œæ•°" class="headerlink" title="æ–‡ä»¶åŠè¡Œæ•°"></a>æ–‡ä»¶åŠè¡Œæ•°</h3><p>æ–‡ä»¶æ€»æ•°æ˜¯ 2960 ä¸ªï¼Œä»£ç è¡Œæ•°æ˜¯ 25 ä¸‡è¡Œã€‚</p><p>å¦å¤–è¿˜å¯ä»¥çœ‹åˆ°æ¯å¹´çš„æ–‡ä»¶å¢åŠ è¶‹åŠ¿å›¾ä»¥åŠè¿™äº›æ–‡ä»¶ç±»å‹æ•°é‡çš„æ’åï¼Œå¯ä»¥çœ‹åˆ° java æ–‡ä»¶å äº† 96.08%ï¼Œå…¶æ¬¡æ˜¯ jsonã€‚</p><p><img src="/2019/12/git-stats/git-stats-files.png" alt="æ–‡ä»¶"></p><h3 id="Tags"><a href="#Tags" class="headerlink" title="Tags"></a>Tags</h3><p>Tags å¯¹äºå›¢é˜Ÿæ˜¯ä¸€ä¸ªå¾ˆé‡è¦åˆ†ææŒ‡æ ‡ï¼ˆå‰ææ˜¯æ‰€è¦åˆ†æçš„ä»“åº“åœ¨ç‰ˆæœ¬å‘å¸ƒååˆ›å»ºäº† Tagï¼‰å¯ä»¥çœ‹åˆ°æ¯ä¸ªç‰ˆæœ¬çš„è´¡çŒ®åº¦æ’åã€‚</p><p><img src="/2019/12/git-stats/git-stats-tags.png" alt="Tags"></p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å¦‚æœæ„Ÿå…´è¶£å¯ä»¥åˆ†æä¸€ä¸‹è‡ªå·±çš„é¡¹ç›®æˆ–æ˜¯å» GitHub ä¸Šæ‰¾ä¸€ä¸ªæœ‰æ„æ€ã€æœ‰å½±å“åŠ›çš„é¡¹ç›®æ‹¿æ¥åˆ†æä¸€ä¸‹ï¼Œæ¯”å¦‚ 996.ICU ä»¥åŠ vue ç­‰ï¼Œç©çš„å¼€å¿ƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Stats </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Black Duck ä¸ Jenkins é›†æˆ</title>
      <link href="/2019/12/blackduck-interate-with-jenkins/"/>
      <url>/2019/12/blackduck-interate-with-jenkins/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åšäº† Black Duck ä¸ Jenkins çš„é›†æˆï¼Œç›®æ ‡æ˜¯ç»™æµ‹è¯•å’Œå¼€å‘æä¾›å®šåˆ¶åŒ–ã€å®šæ—¶çš„å¯¹å„ä¸ªå¼€å‘ä»£ç ä»“åº“çš„è¿›è¡Œæºç æ‰«æã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦åšæºç æ‰«æ"><a href="#ä¸ºä»€ä¹ˆè¦åšæºç æ‰«æ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åšæºç æ‰«æ"></a>ä¸ºä»€ä¹ˆè¦åšæºç æ‰«æ</h2><span id="more"></span><p>åœ¨äº§å“å¼€å‘ä¸­ç»å¸¸éœ€è¦å¼•å…¥ä¸€äº›å¼€æºç»„ä»¶ï¼Œä½†è¿™äº›å¼€æºçš„ä»£ç ä¼šç»™äº§å“é£é™©ã€‚å› æ­¤æˆ‘ä»¬åœ¨å‘å¸ƒè‡ªå·±äº§å“çš„æ—¶å€™éœ€è¦å¯¹è¿™äº›å¼€æºç»„ä»¶çš„æ¼æ´å’Œè®¸å¯ä¿¡æ¯è¿›è¡Œè¯„ä¼°ã€‚<br><img src="/2019/12/blackduck-interate-with-jenkins/open-source.png" alt="å¼€æºä¸ç­‰äºå®‰å…¨"></p><p>Black Duckï¼ˆé»‘é¸­ï¼‰æ˜¯ä¸€æ¬¾å¯¹æºä»£ç è¿›è¡Œæ‰«æã€å®¡è®¡å’Œä»£ç ç®¡ç†çš„è½¯ä»¶å·¥å…·ï¼ˆåŒç±»å‹çš„å·¥å…·è¿˜æœ‰ JFrog Xrayï¼‰ã€‚èƒ½å¤Ÿæœç´¢å®‰å…¨çš„å¼€æºä»£ç ï¼Œæ£€æµ‹äº§å“çš„å¼€æºä»£ç ä½¿ç”¨æƒ…å†µï¼Œä»¥æ£€æŸ¥å¤–æ¥ä»£ç çš„å¼€æºä»£ç ä½¿ç”¨æƒ…å†µå’Œé£é™©æƒ…å†µã€‚</p><p>å¦‚æœä¸èƒ½åŠæ—¶çš„è¿›è¡Œä»£ç æ‰«æï¼Œåœ¨äº§å“å‘å¸ƒå¿«è¦å‘å¸ƒæ‰è¿›è¡Œæ‰«æï¼Œå¦‚æœå‘ç°é—®é¢˜è¿™æ—¶å€™å†å»è§£å†³å°±ä¼šå˜å¾—éå¸¸è¢«åŠ¨ï¼Œå› æ­¤å›¢é˜Ÿéœ€è¦å°½æ—©å‘ç°å¹¶è§£å†³é—®é¢˜ï¼Œå°† CI å·¥å…·è¿›è¡Œé›†æˆï¼Œè¿›è¡Œæ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆæ‰«æå°±å˜å¾—ååˆ†é‡è¦ã€‚</p><h2 id="Black-Duck-æ‰‹åŠ¨æ‰§è¡Œä¸€èˆ¬æ­¥éª¤"><a href="#Black-Duck-æ‰‹åŠ¨æ‰§è¡Œä¸€èˆ¬æ­¥éª¤" class="headerlink" title="Black Duck æ‰‹åŠ¨æ‰§è¡Œä¸€èˆ¬æ­¥éª¤"></a>Black Duck æ‰‹åŠ¨æ‰§è¡Œä¸€èˆ¬æ­¥éª¤</h2><ol><li>æ‰‹åŠ¨ä¸‹è½½æŒ‡å®š Git ä»“åº“åŠåˆ†æ”¯ä»£ç </li><li>å»æ‰ä¸ç›¸å…³çš„ä»£ç ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ Black Duck å‚æ•°å»æŒ‡å®šè¦æ‰«æçš„ç‰¹å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼‰</li><li>æ‰‹åŠ¨æ‰§è¡Œ Black Duck æ‰«æå‘½ä»¤â€‹</li><li>æ‰«ææˆåŠŸåï¼Œç»“æœä¼ åˆ°å†…éƒ¨ Black Duck ç½‘ç«™ä¾›ç›¸å…³äººå‘˜è¿›è¡Œå®¡æŸ¥</li></ol><h2 id="Black-Duck-ä¸-Jenkins-çš„é›†æˆç›®æ ‡"><a href="#Black-Duck-ä¸-Jenkins-çš„é›†æˆç›®æ ‡" class="headerlink" title="Black Duck ä¸ Jenkins çš„é›†æˆç›®æ ‡"></a>Black Duck ä¸ Jenkins çš„é›†æˆç›®æ ‡</h2><ol><li>ä¸€ä¸ªæµæ°´çº¿æ”¯æŒå®šåˆ¶åŒ–ä»“åº“çš„ä»£ç ä¸‹è½½</li><li>ç»™å¼€å‘å’Œæµ‹è¯•æä¾›ç®€å•çš„ã€å¯éšæ—¶å¯ä»¥æ‰§è¡Œæºç æ‰«æçš„ç•Œé¢</li><li>æ”¯æŒå®šæœŸè‡ªåŠ¨æ‰«æï¼Œä»¥åŠä¸å…¶ä»– Jenkins ä»»åŠ¡è”åŠ¨æ‰§è¡Œâ€‹</li></ol><h2 id="Black-Duck-å‚æ•°ä»‹ç»"><a href="#Black-Duck-å‚æ•°ä»‹ç»" class="headerlink" title="Black Duck å‚æ•°ä»‹ç»"></a>Black Duck å‚æ•°ä»‹ç»</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">--blackduck.url                                       <span class="comment"># ä½ çš„ Black Duck ç½‘å€</span></span><br><span class="line">--blackduck.username                                  <span class="comment"># ä½ çš„ç™»å½•ç”¨æˆ·</span></span><br><span class="line">--blackduck.api.token                                 <span class="comment"># ä½ çš„ç™»å½•ç”¨æˆ· Token</span></span><br><span class="line">--detect.project.name                                 <span class="comment"># Black Duck ä¸‹é¢çš„é¡¹ç›®</span></span><br><span class="line">--detect.project.version.name                         <span class="comment"># é¡¹ç›®ç‰ˆæœ¬å·</span></span><br><span class="line">--detect.source.path                                  <span class="comment"># è¦æ‰«æçš„ä»£ç ç›®å½•</span></span><br><span class="line">--logging.level.com.synopsys.integration              <span class="comment"># æ‰«ææ—¥å¿—çº§åˆ«</span></span><br><span class="line">--blackduck.trust.cert=TRUE                           <span class="comment"># æ˜¯å¦ä¿¡ä»» socket (SSL)</span></span><br><span class="line">--detect.blackduck.signature.scanner.snippet.matching <span class="comment"># æ‰«æç‰‡æ®µæ¨¡å¼</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šå…¶ä»–å‚æ•°å¯ä»¥å‚ç…§å®˜æ–¹çš„ CI é›†æˆæ–‡æ¡£ <a href="https://synopsys.atlassian.net/wiki/spaces/INTDOCS/pages/71106939/Synopsys+Detect+for+Jenkins">Synopsys Detect for Jenkins</a></p><h2 id="Black-Duck-é…ç½®"><a href="#Black-Duck-é…ç½®" class="headerlink" title="Black Duck é…ç½®"></a>Black Duck é…ç½®</h2><p>é¦–å…ˆï¼Œå®‰è£… Black Duck æ’ä»¶ <a href="https://wiki.jenkins.io/display/JENKINS/Synopsys+Detect+Plugin">Synopsys Detect</a> åˆ° Jenkins</p><p>ç„¶åï¼Œé…ç½® Synopsys Detect æ’ä»¶</p><ul><li>Jenkins -&gt; Confirurationï¼ˆç³»ç»Ÿé…ç½®ï¼‰</li><li>Black Duck URLï¼š å…¬å¸å†…éƒ¨çš„ Black Duck ç½‘å€ï¼Œä¾‹å¦‚ <a href="https://yourcompany.blackducksoftware.com/">https://yourcompany.blackducksoftware.com</a></li><li>Black Duck credentialsï¼š æ³¨æ„è¦é€‰æ‹© credentials ç±»å‹ä¸º Secret text, Secret å¡«å†™ä½ ç”¨æˆ·çš„ Token<br><img src="/2019/12/blackduck-interate-with-jenkins/blackduck-credentials.png" alt="Secret text é…ç½®"></li><li>é…ç½®å®Œæˆåç‚¹å‡» Test connections to Black Duckï¼Œæ˜¾ç¤º Connection successful è¡¨ç¤ºé…ç½®æˆåŠŸã€‚<br><img src="/2019/12/blackduck-interate-with-jenkins/blackduck-config.png" alt="Connection successful"></li></ul><h2 id="Black-Duck-æµæ°´çº¿ä»»åŠ¡æ•ˆæœ"><a href="#Black-Duck-æµæ°´çº¿ä»»åŠ¡æ•ˆæœ" class="headerlink" title="Black Duck æµæ°´çº¿ä»»åŠ¡æ•ˆæœ"></a>Black Duck æµæ°´çº¿ä»»åŠ¡æ•ˆæœ</h2><p><img src="/2019/12/blackduck-interate-with-jenkins/blackduck-Jenkins-job.png" alt="Build with Parameters"></p><h2 id="Black-Duck-æµæ°´çº¿ä»£ç "><a href="#Black-Duck-æµæ°´çº¿ä»£ç " class="headerlink" title="Black Duck æµæ°´çº¿ä»£ç "></a>Black Duck æµæ°´çº¿ä»£ç </h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline&#123;</span><br><span class="line">  agent &#123;</span><br><span class="line">    node &#123;</span><br><span class="line">      label <span class="string">&#x27;black-duck&#x27;</span></span><br><span class="line">      customWorkspace <span class="string">&quot;/agent/workspace/blackduck&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  parameters &#123;</span><br><span class="line">    choice(</span><br><span class="line">      name: <span class="string">&#x27;VERSION&#x27;</span>,</span><br><span class="line">      choices: [<span class="string">&#x27;MVSURE_v1.1&#x27;</span>, <span class="string">&#x27;MVSURE_v1.2&#x27;</span>, <span class="string">&#x27;MVSURE_v2.2&#x27;</span>],</span><br><span class="line">      description: <span class="string">&#x27;Which version do you want scan on black duck? MVSURE_v1.1, MVSURE_v1.2 or others?&#x27;</span>)</span><br><span class="line">    choice(</span><br><span class="line">      name: <span class="string">&#x27;REPO&#x27;</span>,</span><br><span class="line">      choices: [<span class="string">&#x27;blog-server&#x27;</span>, <span class="string">&#x27;blog-client&#x27;</span>, <span class="string">&#x27;blog-docker&#x27;</span>],</span><br><span class="line">      description: <span class="string">&#x27;Which repository code does above VERSION belong to?&#x27;</span>)</span><br><span class="line">    string(</span><br><span class="line">      name: <span class="string">&#x27;BRANCH&#x27;</span>,</span><br><span class="line">      defaultValue: <span class="string">&#x27;develop&#x27;</span>,</span><br><span class="line">      description: <span class="string">&#x27;Which branch does above VERSION belong to?&#x27;</span>)</span><br><span class="line">    choice(</span><br><span class="line">      name: <span class="string">&#x27;SNIPPET-MODES&#x27;</span>,</span><br><span class="line">      choices: [<span class="string">&#x27;SNIPPET_MATCHING&#x27;</span>, <span class="string">&#x27;SNIPPET_MATCHING_ONLY&#x27;</span>, <span class="string">&#x27;FULL_SNIPPET_MATCHING&#x27;</span>, <span class="string">&#x27;FULL_SNIPPET_MATCHING_ONLY&#x27;</span>, <span class="string">&#x27;NONE&#x27;</span>],</span><br><span class="line">      description: <span class="string">&#x27;What snippet scan mode do you want to choose?&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  environment &#123;</span><br><span class="line">    ROBOT                  = credentials(<span class="string">&quot;d1cbab74-823d-41aa-abb7-858485121212&quot;</span>)</span><br><span class="line">    hub_detect             = <span class="string">&#x27;https://blackducksoftware.github.io/hub-detect/hub-detect.sh&#x27;</span></span><br><span class="line">    blackduck_url          = <span class="string">&#x27;https://yourcompany.blackducksoftware.com&#x27;</span></span><br><span class="line">    blackduck_user         = <span class="string">&#x27;robot@yourcompany.com&#x27;</span></span><br><span class="line">    detect_project         = <span class="string">&#x27;GITHUB&#x27;</span></span><br><span class="line">    detect_project_version = <span class="string">&#x27;$&#123;VERSION&#125;&#x27;</span></span><br><span class="line">    detect_source_path     = <span class="string">&#x27;$&#123;WORKSPACE&#125;/$&#123;REPO&#125;/src&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># åªä¿ç•™æœ€è¿‘åæ¬¡ Jenkins æ‰§è¡Œç»“æœ</span></span><br><span class="line">  options &#123;buildDiscarder(logRotator(numToKeepStr:<span class="string">&#x27;10&#x27;</span>))&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># å®šæ—¶è§¦å‘å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ </span></span><br><span class="line"></span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(<span class="string">&quot;git clone&quot;</span>)&#123; <span class="comment"># å‚æ•°åŒ– git clone ä»£ç è¿‡ç¨‹</span></span><br><span class="line">      steps&#123;</span><br><span class="line">        sh <span class="string">&#x27;&#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">        if [ -d $&#123;REPO&#125; ]; then</span></span><br><span class="line"><span class="string">            rm -rf $&#123;REPO&#125;</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">        git clone -b $&#123;BRANCH&#125; --depth 1 https://$ROBOT_USR:&quot;$ROBOT_PSW&quot;@git.yourcompany.com/scm/github/$&#123;REPO&#125;.git</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    stage(<span class="string">&quot;black duck scan&quot;</span>)&#123; <span class="comment"># å‚æ•°åŒ– Black Duck æ‰€ç”¨åˆ°çš„å‚æ•°å€¼</span></span><br><span class="line">      steps &#123;</span><br><span class="line">        withCredentials([string(credentialsId: <span class="string">&#x27;robot-black-duck-scan&#x27;</span>, variable: <span class="string">&#x27;TOKEN&#x27;</span>)]) &#123; <span class="comment"># ç”¨ withCredentials æ¥è·å¾— Token</span></span><br><span class="line">          synopsys_detect <span class="string">&#x27;bash &lt;(curl -s $&#123;hub_detect&#125;) --blackduck.url=$&#123;blackduck_url&#125; --blackduck.username=$&#123;blackduck_user&#125; --blackduck.api.token=$&#123;TOKEN&#125; --detect.project.name=$&#123;detect_project&#125; --detect.project.version.name=$&#123;detect_project_version&#125; --detect.source.path=$&#123;detect_source_path&#125; --logging.level.com.synopsys.integration=debug --blackduck.trust.cert=TRUE --detect.blackduck.signature.scanner.snippet.matching=$&#123;SNIPPET-MODES&#125;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  post &#123;</span><br><span class="line">    <span class="comment"># ä¸è®ºç»“æœä»»ä½•éƒ½ç»™æ‰§è¡Œè€…å‘é€é‚®ä»¶é€šçŸ¥</span></span><br><span class="line">    always &#123;</span><br><span class="line">      script &#123;</span><br><span class="line">        def email = load <span class="string">&quot;vars/email.groovy&quot;</span></span><br><span class="line">        wrap([<span class="variable">$class</span>: <span class="string">&#x27;BuildUser&#x27;</span>]) &#123;</span><br><span class="line">            def user = env.BUILD_USER_ID</span><br><span class="line">            email.build(currentBuild.result, <span class="string">&quot;<span class="variable">$&#123;user&#125;</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    success &#123;</span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;success, cleanup blackduck workspace&quot;</span></span><br><span class="line">      cleanWs()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> BlackDuck </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> BlackDuck </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å¸¸ç”¨å‘½ä»¤</title>
      <link href="/2019/12/docker-commands/"/>
      <url>/2019/12/docker-commands/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Docker å¸¸ç”¨å‘½ä»¤å°çº¸æ¡</p></blockquote><h2 id="Docker-start-stop-restart"><a href="#Docker-start-stop-restart" class="headerlink" title="Docker start|stop|restart"></a>Docker start|stop|restart</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ Docker ç‰ˆæœ¬</span></span><br><span class="line">docker -v <span class="comment"># or docker --version</span></span><br><span class="line"><span class="comment"># é‡å¯ docker</span></span><br><span class="line">sudo systemctl restart docker.service</span><br><span class="line"><span class="comment"># åœæ­¢ docker</span></span><br><span class="line">sudo systemctl stop docker.service</span><br><span class="line"><span class="comment"># å¯åŠ¨ docker</span></span><br><span class="line">sudo systemctl start docker.service</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="Docker-run"><a href="#Docker-run" class="headerlink" title="Docker run"></a>Docker run</h2><p>æˆ‘ä»¬é€šè¿‡ docker çš„ä¸¤ä¸ªå‚æ•° -i -tï¼Œè®© docker è¿è¡Œçš„å®¹å™¨å®ç°â€å¯¹è¯â€çš„èƒ½åŠ›ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -i -t ubuntu:15.10 /bin/bash</span><br></pre></td></tr></table></figure><h2 id="Login-Artifactory"><a href="#Login-Artifactory" class="headerlink" title="Login Artifactory"></a>Login Artifactory</h2><p>æ³¨æ„ï¼šOpen Source ç‰ˆæœ¬ Artifactory ä¸æ”¯æŒ Dockerï¼Œéœ€è¦ä¸‹è½½ <a href="https://jfrog.com/container-registry/">JFrog Container Registry</a> æˆ–æ˜¯ Artifactory ä¼ä¸šç‰ˆã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker login -u &lt;USER_NAME&gt; -p &lt;USER_PASSWORD&gt; devasvm.dev.org.com:&lt;REPOSITORY_PORT&gt;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-sh-4.2$ sudo docker login devasvm.dev.org.com:8040</span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">WARNING! Your password will be stored unencrypted <span class="keyword">in</span> /root/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/<span class="comment">#credentials-store</span></span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure><p>æŠŠ Docker image æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// docker tag SOURCE_IMAGE[:TAG] devasvm.dev.org.com:8040/docker-local/IMAGE[:TAG]</span><br><span class="line">-sh-4.2$ sudo docker tag ubuntu:15.10 devasvm.dev.org.com:8040/docker-local/ubuntu:15.10</span><br><span class="line"></span><br><span class="line">// docker push devasvm.dev.org.com:8040/docker-local/IMAGE[:TAG]</span><br><span class="line">-sh-4.2$ sudo docker push devasvm.dev.org.com:8040/docker-local/ubuntu:15.10</span><br><span class="line">The push refers to repository [devasvm.dev.org.com:8040/docker-local/ubuntu]</span><br><span class="line">98d59071f692: Pushed</span><br><span class="line">af288f00b8a7: Pushed</span><br><span class="line">4b955941a4d0: Pushed</span><br><span class="line">f121afdbbd5d: Pushed</span><br><span class="line">15.10: digest: sha256:a3f5e428c0cfbfd55cffb32d30b1d78fedb8a9faaf08efdd9c5208c94dc66614 size: 1150</span><br></pre></td></tr></table></figure><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><p>æ›´å¤š Docker å¸¸ç”¨å‘½ä»¤è®°å½•åˆ°è¿™é‡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒ—äº¬48å°æ—¶ï¼šè®°ä¸€æ¬¡å‚åŠ  DevOps è®­ç»ƒè¥</title>
      <link href="/2019/12/48h-in-beijing/"/>
      <url>/2019/12/48h-in-beijing/</url>
      
        <content type="html"><![CDATA[<p>æœ¬å‘¨äºŒä¸‹ç­æˆ‘æ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·åŠ ä¼šç­ï¼ˆæˆ‘ä¸€èˆ¬éƒ½ä¼šèµ¶åœ¨æ™š6ç‚¹åä¸‹ç­æ¥èº²è¿‡æ™šé«˜å³°æœŸï¼‰ï¼Œè€Œæ˜¯ç›´æ¥æŒ¤åœ°é“å¥”å‘æœºåœºï¼Œå‡†å¤‡åå…«ç‚¹åŠå»å¾€åŒ—äº¬çš„ä¸€ç­é£æœºï¼Œå› ä¸ºç¬¬äºŒå¤©è¦å‚åŠ  JFrog ä¸­å›½åœ¨åŒ—äº¬æœ›äº¬ä¸¾åŠçš„ Jenkins, Artifactory &amp; Kubernetes å®æˆ˜è®­ç»ƒè¥ã€‚</p><span id="more"></span><p>ä¸€æ˜¯ç”±äºå…¬å¸æ¯äººæ¯å¹´éƒ½æœ‰ä¸¤å¤©å¸¦è–ªåŸ¹è®­å‡æœŸï¼Œå¦‚æœæœ‰ç‰¹åˆ«é€‚åˆæˆ‘çš„ï¼Œæˆ‘ä¼šè‡ªè´¹å‰å¾€ã€‚äºŒæ˜¯åŸ¹è®­å†…å®¹æœ¬èº«ä¹Ÿååˆ†è´´è¿‘æˆ‘ç›®å‰çš„å·¥ä½œå†…å®¹ï¼Œæƒ³äº†è§£ä¸‹è¡Œä¸šæœ€ä½³å®è·µä¸ç›¸å…³åŒè¡Œäº¤æµã€‚</p><p>åœ¨å‡ºè¡Œå‰ï¼Œè·Ÿé¢†å¯¼è¯·äº†å‡è¯´æ˜æ„å‘ï¼Œé¡ºä¾¿é—®äº†ä¸‹å»å‚åŠ ç±»ä¼¼åŸ¹è®­æ˜¯å¦ä¼šæœ‰é¢„ç®—ï¼Œé¢†å¯¼è®©æˆ‘æŠ¥ä¸€ä¸‹ï¼Œæˆ‘å¤§æ¦‚ç®—äº†è½¦ç¥¨å’Œé…’åº—çš„é’±ï¼Œé¢†å¯¼å°±è·Ÿå…¬å¸ç”³è¯·ï¼Œå¹¶ä¸”è¿˜é™„å¸¦å¸®æˆ‘ç”³è¯·äº†é¥­é’±ã€‚å…¬å¸åŒæ„ï¼Œå‰æåªæœ‰ä¸€ä¸ªå°±æ˜¯å›æ¥è¦åšå¥½åˆ†äº«ã€‚å°±è¿™æ ·æˆ‘å°±å¸¦ç€ä»»åŠ¡å»å‚åŠ è¿™æ¬¡ JFrog DevOps è®­ç»ƒè¥äº†ï¼Œè¿™é‡Œæˆ‘ç‰¹åˆ«æ„Ÿè°¢æˆ‘çš„é¢†å¯¼ä»¥åŠå…¬å¸ã€‚</p><h2 id="å†æ¬¡è§åŒ—äº¬"><a href="#å†æ¬¡è§åŒ—äº¬" class="headerlink" title="å†æ¬¡è§åŒ—äº¬"></a>å†æ¬¡è§åŒ—äº¬</h2><p>æƒ³æƒ³ç¦»å¼€åŒ—äº¬å·²ç»5å¹´å¤šäº†ï¼Œè¿™æ˜¯å”¯ä¸€ä¸€æ¬¡åœ¨åŒ—äº¬åœç•™æ—¶é—´æœ€é•¿çš„ 48 å°æ—¶ï¼Œä¹‹å‰æœ‰è¿‡å‡ºå·®è·¯è¿‡åŒ—äº¬ã€‚ä»¥å‰è™½ç„¶åœ¨åŒ—äº¬å·¥ä½œï¼Œä½†é‚£æ—¶å€™æˆ‘è¿˜æ²¡æœ‰å¤ªå¤šå…³æ³¨è¿‡ç”Ÿæ´»ï¼Œè¿™æ¬¡æœ‰æ„çš„æ³¨æ„äº†ä¸‹ï¼Œè„‘å­é‡Œä¸€ç›´æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå†è®©æˆ‘å›åˆ°åŒ—äº¬æˆ‘è¿˜ä¼šåƒå½“åˆçš„æ‰§å¿µä»…ä»…æƒ³ç€åŒ—äº¬å·¥ä½œå‡ å¹´è€Œå·²å—ï¼Ÿ</p><p>ä¸‹äº†é£æœºå·²ç»åç‚¹åŠäº†ï¼Œä»æœºåœºåˆ°æœ›äº¬è¿™æ®µçš„æœºåœºé«˜é€Ÿè½¦æµé‡è¿˜æ˜¯å¾ˆå¤§çš„ï¼ŒåŒ—äº¬çš„å¤œç”Ÿæ´»è·Ÿä»¥å‰çš„æ„Ÿè§‰ä¸€æ ·ï¼Œæ¯”èµ·äºŒä¸‰çº¿åŸå¸‚è¶³è¶³æ™šäº†ä¸¤ä¸ªå¤šå°æ—¶ã€‚äº”å¹´å‰åœ¨åŒ—æˆ‘äº¬é€šå¸¸éƒ½æ˜¯ä¹ç‚¹åä»å…¬å¸èµ°ï¼Œèµ¶ä¸Šä¸Šçº¿çš„æ—¶å€™ååŠå¤œæ‰åˆ°å®¶ï¼Œç¬¬äºŒå¤©ä¸­åˆåˆ°å…¬å¸ï¼Œæ¯å¤©çš„æ—¶é—´æ¯”äºŒä¸‰çº¿åŸå¸‚ç°åœ¨æˆ‘è¶³è¶³å»¶åäº†äº”å…­ä¸ªå°æ—¶ã€‚</p><p>æˆ‘ç°åœ¨çš„ç”Ÿæ´»æ˜¯æ—©ä¹æ™šå…­ï¼Œä¸æ¨å´‡åŠ ç­ï¼Œä¸Šç­æœŸé—´ä¹Ÿæ˜¯å¾ˆå¿™ï¼Œä½†ç»å¤§å¤šæ•°äººä¹Ÿä¸ä¼šåŠ ç­ï¼ŒåŠ ä¸åŠ ç­æ˜¯è‡ªæ„¿ã€‚æœŸé—´å»è¿‡ç¾å›½å‡ºå·®ï¼Œç¾å›½çš„åŒäº‹å¾ˆå¤šæ˜¯æ—©ä¸Šä¸ƒå…«ç‚¹ä¸Šç­ï¼Œä»–ä»¬ä¸€èˆ¬ä¸­åˆåƒçš„å¾ˆç®€å•ä¹Ÿå¾ˆå¿«ï¼Œåƒå®Œé¥­å¦‚æœå·¥ä½œå¿™ï¼Œä»–ä»¬ä¼šç«‹é©¬æŠ•å…¥å·¥ä½œï¼Œä¸‹åˆä¸‰å››ç‚¹é’Ÿå°±ç¦»å¼€åŠå…¬å®¤äº†ï¼Œå¾…åˆ°äº”å…­ç‚¹é’Ÿçš„æå°‘æ•°ï¼Œä½†å·¥ä½œæ•ˆç‡å…¶å®æ„Ÿè§‰ä¸å·®ã€‚è¿™è®©æˆ‘æƒ³èµ·äº†ä»Šå¹´è½°è½°çƒˆçƒˆçš„è®¨è®ºè¿‡çš„996ï¼Œå¯èƒ½å½’æ ¹åˆ°åº•æ˜¯æˆ‘ä»¬çš„ç¤¾ä¼šå‘å±•é˜¶æ®µæ‰€é€ æˆçš„ï¼Œå¹´è½»äººå‹åŠ›å¾ˆå¤§éœ€è¦åŠªåŠ›èµšé’±ä¹°æˆ¿ï¼Œæœ‰å¨ƒçš„äººæœ‰è‡ªå·±çš„çˆ¶æ¯æ¥å¸®å¿™ç…§é¡¾å­©å­ï¼Œå¹´è€çš„äººä¹Ÿä¸è€ƒè™‘è‡ªå·±çš„é€€ä¼‘ç”Ÿæ´»ï¼Œæ›´å¤šçš„æ˜¯å¸Œæœ›èƒ½å¸®å¿™è‡ªå·±çš„å­©å­è§£å†³ä¸€äº›åé¡¾ä¹‹å¿§ï¼Œå°±è¿™æ ·å¹´è½»äººå°±å¯ä»¥å®‰å¿ƒçš„çš„996äº†ã€‚ä½†æ˜¯ç¾å›½äººä»–ä»¬ä¸è¡Œï¼Œå¾ˆç°å®çš„ä»–ä»¬å¦‚æœä¸ä¸‰å››ç‚¹é’Ÿä¸‹ç­ï¼Œä»–ä»¬çš„å­©å­å°±æ²¡äººæ¥ï¼Œä»–ä»¬éœ€è¦è‡ªå·±çš„å®¶åº­ç”Ÿæ´»ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ¬åº”è¯¥ç”±ä¼ä¸šç”šè‡³æ˜¯ç¤¾ä¼šæ¥æ‰¿æ‹…äº‹æƒ…ï¼Œè¢«å…¨ç¤¾ä¼šçš„æ¥æ‰¿æ‹…äº†ï¼Œ996å°±è‡ªç„¶è€Œç„¶ä¸å¯é¿å…çš„å‘ç”Ÿäº†ã€‚</p><p>æ—©é«˜å³°æ—¶æ®µï¼Œæœ›äº¬æœ‰çš„è·¯å£æœ‰å¹´é•¿çš„å¤§çˆ·å¤§å¦ˆåœ¨æŒ‡æŒ¥äº¤é€šï¼Œæ¯å½“ç»¿ç¯æ—¶ï¼Œå¤§é‡çš„ç”µåŠ¨è½¦å’Œè‡ªè¡Œè½¦ä¸è¡Œäººä¸€åŒç©¿è¡Œï¼Œæˆ‘æ€»æ‹…å¿ƒä¼šè¢«åˆ®åˆ°ã€‚æ™šä¸Šä¸‹ç­åƒå®Œé¥­å›å»çš„æ—¶å€™ï¼Œè·¯å£æ²¡æœ‰æŒ‡æŒ¥äº†ï¼Œè¡Œäººã€è‡ªè¡Œè½¦ä»¥åŠç”µåŠ¨è½¦åœ¨çº¢ç¯æ—¶è¿‡é©¬è·¯çš„æƒ…å†µè¿˜æ˜¯æŒºæ™®éçš„ï¼Œé€ æˆäº†ç»¿ç¯æ—¶æœºåŠ¨è½¦é€šè¡Œæ•ˆç‡å¾ˆä½ã€‚å¦å¤–ï¼Œå°±æ˜¯èµ°åœ¨è·¯ä¸Šï¼Œåé¢ä¸æ—¶çš„æœ‰è‡ªè¡Œè½¦ã€ç”µåŠ¨è½¦éª‘è¿‡ï¼Œæˆ‘æ€»æ˜¯æŒºæ‹…å¿ƒè¢«æ’åˆ°ï¼Œè¿™ç§èµ°è·¯æ—¶å€™æ‹…å¿ƒçš„æ„Ÿè§‰å…¶å®æ˜¯ä¸å¤ªèˆ’æœçš„ã€‚</p><p>ä¸­åˆè·Ÿæœ‹å‹çº¦äº†åƒé¥­ï¼Œå¬ä»–èŠèµ·è¿‡å»äº”å¹´å¤šçš„å·¥ä½œæƒ…å†µï¼ŒæœŸé—´ä»–æ¢äº†å¥½å‡ ä¸ªå…¬å¸ï¼Œæœ‰å‹¾å¿ƒæ–—è§’çš„ï¼Œæœ‰ P2P é»„çš„ï¼ˆå·¥èµ„è¿˜æ¬ ç€çš„ï¼Œè¿˜åœ¨ä»²è£ä¸­ï¼‰ï¼Œè°ˆèµ·æœ€è¿‘ä¸€å¹´åŒ—äº¬å¤§å‚è£å‘˜ä»¥åŠç½‘æ˜“æœ€è¿‘çš„è£å‘˜é£æ³¢ï¼Œéƒ½è®©æˆ‘æ„Ÿå—åœ¨å“ªæ··ç€éƒ½æŒºä¸å®¹æ˜“çš„ã€‚éšç€ä»–è¦å½“çˆ¸çˆ¸äº†ï¼Œä»æ²¡æœ‰è€ƒè™‘è¿‡è¦ç¦»å¼€åŒ—äº¬çš„ä»–ä¹Ÿæœ‰äº†ç¦»å¼€çš„å¿µå¤´ï¼Œå¦‚æœä¸èƒ½åœ¨å°†æ¥åœ¨åŒ—äº¬è´­ä¹°ä¸ªå°æˆ¿å­ï¼Œä»–å¯èƒ½å°±å›åˆ°å®¶ä¹¡ï¼Œä½ä»–è‡ªå·±å·²ç»è´­ä¹°æˆ¿å­é‡Œç”Ÿæ´»ã€‚</p><p>éšç€ä¼ä¸šæˆæœ¬æ§åˆ¶ï¼Œä¸å°‘ä¼ä¸šå·²ç»å»äºŒä¸‰çº¿åŸå¸‚å‘å±•ï¼Œé‚£é‡Œçš„ç§Ÿé‡‘ç”šè‡³æ¯”åŒ—äº¬ä¾¿å®œå››äº”å€ï¼Œå¦‚æœèƒ½æ‹›åˆ°äººçš„è¯ï¼Œä»–ä»¬å°±å¯ä»¥è½åœ°äºŒä¸‰çº¿äº†ã€‚å½“åˆæˆ‘åœ¨åŒ—äº¬çš„æ—¶å€™ï¼Œæˆ‘çš„å®¤å‹å°±åœ¨ä¸­å›½ç§»åŠ¨ç ”ç©¶é™¢ï¼Œåæ¥ä¸­å›½ç§»åŠ¨ç ”ç©¶é™¢æ¬åˆ°äº†è‹å·ï¼Œä»–å’Œå‡ ä¸ªå°ä¼™ä¼´ä¹Ÿéƒ½å»äº†è‹å·ï¼Œç°åœ¨å·²ç»æ—©æ—©åœ¨é‚£é‡Œä¹°æˆ¿äº†ï¼Œé‚£è¾¹ç¯å¢ƒå¾ˆå¥½ï¼Œæœ‰è‡ªå·±çš„æˆ¿å­ï¼Œå·¥èµ„ä¹Ÿä¸ä½ï¼Œå…¶å®ç”Ÿæ´»æŒºèˆ’æœçš„ã€‚å°¤å…¶æ˜¯è½¯ä»¶è¡Œä¸šï¼Œæœ‰çš„å…¬å¸å…è®¸è¿œç¨‹åŠå…¬ï¼Œé‚£åªè¦èƒ½æ»¡è¶³å²—ä½è¦æ±‚ï¼Œå…¶ä»–ä¹ŸæŒºå¥½çš„ã€‚èº«è¾¹å°±æœ‰æœ‹å‹ä»–ä»¬çš„å…¬å¸åœ¨åŒ—äº¬æ’¤é™¤äº†åŠå…¬å®¤ï¼Œä»–ä»¬ç°åœ¨å°±åœ¨å®¶åŠå…¬ï¼Œéš”ä¸€æ®µæ—¶é—´å¯ä»¥å»å‡ºå·®å»äºŒä¸‰çº¿åŸå¸‚çš„åŠå…¬å®¤ä¸åŒäº‹å·¥ä½œäº¤æµã€‚</p><p>æ­¤æ—¶ï¼Œè„‘æµ·ä¸­çš„é—®é¢˜ä¸€ç›´ç¼ ç»•ï¼Œå†ç»™ä½ ä¸€æ¬¡æœºä¼šä½ è¿˜æƒ³åœ¨ç•™åœ¨åŒ—äº¬ç”Ÿæ´»å—ï¼Ÿæˆ‘çš„å†³å®šå’Œå½“åˆä¸€æ ·å›åˆ°ç°åœ¨çš„åŸå¸‚ã€‚</p><p>æˆ‘å–œæ¬¢è¿™é‡Œçš„å·¥ä½œç”Ÿæ´»çš„å¹³è¡¡ï¼ŒåŠ ç­ä¹Ÿéƒ½æ˜¯ä¸»åŠ¨åŠ ç­å­¦ä¹ ï¼Œæ²¡æœ‰è¢«è¿«çš„åŠ ç­ç»™é¢†å¯¼çœ‹ï¼›æˆ‘å–œæ¬¢è¿™é‡Œçš„æµ·ï¼Œä¸­åˆåƒå®Œé¥­å°±å¯ä»¥è·ŸåŒäº‹ä¸€èµ·æ•£æ­¥èµ°åˆ°æµ·è¾¹çœ‹æµ·ï¼›æˆ‘å–œæ¬¢è¿™é‡Œç¦»çˆ¶æ¯å¾ˆè¿‘ï¼Œå¼€è½¦åŠä¸ªå°æ—¶å°±èƒ½åˆ°ï¼Œå¯ä»¥ç»å¸¸ä¸ä»–ä»¬ç›¸èšç…§é¡¾ä»–ä»¬ï¼›æˆ‘å–œæ¬¢ä½åœ¨è‡ªå·±çš„æˆ¿å­ï¼Œä¸ç”¨æ‹…å¿ƒæ¬å®¶äº†ï¼Œå¯ä»¥ä¸æ–­çš„æ”¹å–„ç”Ÿæ´»ç¯å¢ƒï¼›æˆ‘å–œæ¬¢è¿™é‡Œäººä¸å¤ªå¤šã€è¯¥æœ‰çš„ä¸“å–åº—å’Œå•†åŸéƒ½æœ‰ã€æœ‰åœ°é“ï¼Œå»å“ªé‡Œéƒ½ä¸ç®—å¤ªè¿œã€‚</p><p>å‘¨å››ä¸‹åˆ 5 ç‚¹åŸ¹è®­å®Œï¼Œåƒäº†ä¸ªé¥­å°±ç›´å¥”æœºåœºè¿å¤œå›åˆ°å®¶ï¼Œç¬¬äºŒå¤©å›æ¥ç»§ç»­ä¸Šç­äº†ã€‚è¿™çŸ­çŸ­çš„ä¸¤å¤©ï¼Œå¾€è¿”ä¸¤åº§åŸå¸‚ä¹‹é—´å·¥ä½œå’ŒåŸ¹è®­ï¼Œé£æœºä¸Šåªéœ€è¦40åˆ†é’Ÿï¼Œå°±åƒæ²¡æœ‰ç¦»å¼€è¿‡ä¸€æ ·ï¼Œè®©äººæ„Ÿå¹äº¤é€šçš„ä¾¿åˆ©ã€‚</p><p>ç¥æ„¿æ¯ä¸ªäººéƒ½æ”¶è·è‡ªå·±äº«å—çš„ç”Ÿæ´»ã€‚</p><p align="right">2019 å¹´ 12 æœˆ 1 æ—¥ 23 : 55 : 00</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker ç‰ˆæœ¬æ¦‚è¿°</title>
      <link href="/2019/12/overview-of-docker-editions/"/>
      <url>/2019/12/overview-of-docker-editions/</url>
      
        <content type="html"><![CDATA[<h2 id="Docker-å¯åˆ†ä¸ºä¸‰ä¸ªç‰ˆæœ¬"><a href="#Docker-å¯åˆ†ä¸ºä¸‰ä¸ªç‰ˆæœ¬" class="headerlink" title="Docker å¯åˆ†ä¸ºä¸‰ä¸ªç‰ˆæœ¬"></a>Docker å¯åˆ†ä¸ºä¸‰ä¸ªç‰ˆæœ¬</h2><ul><li>Docker Engine - Community</li><li>Docker Engine - Enterprise</li><li>Docker Enterprise</li></ul><p>Docker Engine - Community æ˜¯å¸Œæœ›å¼€å§‹ä½¿ç”¨ Docker å¹¶å°è¯•åŸºäºå®¹å™¨çš„åº”ç”¨ç¨‹åºçš„ä¸ªäººå¼€å‘äººå‘˜å’Œå°å‹å›¢é˜Ÿçš„ç†æƒ³é€‰æ‹©ã€‚</p><p>Docker Engine - Enterprise ä¸“ä¸ºä¼ä¸šå¼€å‘å®¹å™¨è¿è¡Œæ—¶è€Œè®¾è®¡ï¼ŒåŒæ—¶è€ƒè™‘äº†å®‰å…¨æ€§å’Œä¼ä¸šçº§SLAã€‚</p><p>Docker Enterprise ä¸“ä¸ºä¼ä¸šå¼€å‘å’ŒITå›¢é˜Ÿè€Œè®¾è®¡ï¼Œä»–ä»¬å¯ä»¥å¤§è§„æ¨¡æ„å»ºï¼Œäº¤ä»˜å’Œè¿è¡Œå…³é”®ä¸šåŠ¡åº”ç”¨ç¨‹åºã€‚</p><table><thead><tr><th>èƒ½åŠ›</th><th>Docker Engine - Community</th><th>Docker Engine - Enterprise</th><th>Docker Enterprise</th></tr></thead><tbody><tr><td>å®¹å™¨å¼•æ“å’Œå†…å»ºçš„ç¼–é…ï¼Œç½‘ç»œï¼Œå®‰å…¨</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td><a href="https://docs.docker.com/ee/supported-platforms/#docker-enterprise">è®¤è¯çš„åŸºç¡€è®¾æ–½ï¼Œæ’ä»¶å’ŒISVå®¹å™¨</a></td><td></td><td>âˆš</td><td>âˆš</td></tr><tr><td><a href="https://docs.docker.com/ee/dtr/">é•œåƒç®¡ç†</a></td><td></td><td></td><td>âˆš</td></tr><tr><td><a href="https://docs.docker.com/ee/ucp/">å®¹å™¨åº”ç”¨ç¨‹åºç®¡ç†</a></td><td></td><td></td><td>âˆš</td></tr><tr><td><a href="https://docs.docker.com/ee/dtr/user/manage-images/scan-images-for-vulnerabilities/">é•œåƒå®‰å…¨æ‰«æ</a></td><td></td><td></td><td>âˆš</td></tr></tbody></table><h2 id="å®‰è£…-Docker-ç¤¾åŒºç‰ˆæœ¬"><a href="#å®‰è£…-Docker-ç¤¾åŒºç‰ˆæœ¬" class="headerlink" title="å®‰è£… Docker ç¤¾åŒºç‰ˆæœ¬"></a>å®‰è£… Docker ç¤¾åŒºç‰ˆæœ¬</h2><ul><li>ä»¥ CentOS å®‰è£…ä¸ºä¾‹ï¼š <a href="https://docs.docker.com/install/linux/docker-ce/centos/">https://docs.docker.com/install/linux/docker-ce/centos/</a></li></ul><h2 id="å…¶ä»–-Docker-ç‰ˆæœ¬å®‰è£…"><a href="#å…¶ä»–-Docker-ç‰ˆæœ¬å®‰è£…" class="headerlink" title="å…¶ä»– Docker ç‰ˆæœ¬å®‰è£…"></a>å…¶ä»– Docker ç‰ˆæœ¬å®‰è£…</h2><ul><li>å‚è€ƒ Docker å®˜ç½‘ï¼š<a href="https://docs.docker.com/install/overview/">https://docs.docker.com/install/overview/</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®šåˆ¶ä¸€ä¸ª Docker ç‰ˆ Jenkins é•œåƒ</title>
      <link href="/2019/12/install-docker-jenkins/"/>
      <url>/2019/12/install-docker-jenkins/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºå¦‚ä½•å¤‡ä»½ Jenkins é™¤äº†ç”¨ Jenkins æ’ä»¶æ¥å®šæœŸå¤‡ä»½ä¹‹å¤–ï¼Œå¦‚æœæŠŠ Jenkins å®‰è£…åˆ° Docker é‡Œï¼Œå®šæœŸå¤‡ä»½ä¸€ä¸ª Docker Image æœ€åä¼ åˆ° Artifactory ä¸­ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ¡ˆã€‚</p><span id="more"></span><h2 id="å®‰è£…-Docker-ç‰ˆ-Jenkins"><a href="#å®‰è£…-Docker-ç‰ˆ-Jenkins" class="headerlink" title="å®‰è£… Docker ç‰ˆ Jenkins"></a>å®‰è£… Docker ç‰ˆ Jenkins</h2><p>åœ¨ CentOS ä¸Šå®‰è£… Docker ç‰ˆ Jenkinsï¼Œè¿™é‡Œæ¨èç”¨ Long-term Support (LTS) ç‰ˆæœ¬ï¼Œå¯ä»¥ä» Jenkins å®˜ç½‘<a href="https://jenkins.io/download/">ä¸‹è½½</a>ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½æŒ‡å®š lts ç‰ˆæœ¬ 2.130</span></span><br><span class="line">sudo docker pull jenkins/jenkins:2.130</span><br><span class="line"><span class="comment"># è¿è¡ŒæŒ‡å®š docker Jenkins</span></span><br><span class="line">sudo docker run -p 8080:8080 -p 50000:50000 jenkins/jenkins:2.130</span><br><span class="line"><span class="comment"># å¦‚æœæƒ³ä¸‹è½½æœ€æ–°çš„ lts ç‰ˆ</span></span><br><span class="line">sudo docker pull jenkins/jenkins:lts</span><br><span class="line"><span class="comment"># è¿è¡Œæœ€æ–°çš„ lts ç‰ˆ docker Jenkins</span></span><br><span class="line">sudo docker run -p 8080:8080 -p 50000:50000 jenkins/jenkins:lts</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æˆåŠŸåå³å¯æ‰“å¼€ <a href="http://hostname:8080/">http://hostname:8080/</a> ç½‘å€</p><h2 id="ä¿®æ”¹ç™»å½•å¯†ç "><a href="#ä¿®æ”¹ç™»å½•å¯†ç " class="headerlink" title="ä¿®æ”¹ç™»å½•å¯†ç "></a>ä¿®æ”¹ç™»å½•å¯†ç </h2><p>æ˜¾ç¤ºæ‰€æœ‰çš„ image ä»¥åŠæ­£åœ¨è¿è¡Œçš„ container</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæ¥æ‰€æœ‰ image</span></span><br><span class="line">sudo docker image list</span><br><span class="line"><span class="comment"># åˆ—å‡ºå½“å‰è¿è¡Œçš„ container</span></span><br><span class="line">sudo docker ps</span><br><span class="line"><span class="comment"># è¿›å…¥å®¹å™¨ï¼Œä½¿ç”¨ -it å‚æ•°</span></span><br><span class="line">sudo docker <span class="built_in">exec</span> -it 39bc7a8307d9 /bin/bash</span><br><span class="line"><span class="comment"># æŸ¥çœ‹é»˜è®¤ admin å¯†ç </span></span><br><span class="line">jenkins@a6195912b579:/$ <span class="built_in">cat</span> /var/jenkins_home/secrets/initialAdminPassword</span><br><span class="line">5193d06c813d46d3b18babeda836363a</span><br></pre></td></tr></table></figure><p>å»ºè®®ç™»å½•ä¹‹åï¼Œä¿®æ”¹ admin å¯†ç ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç™»å½•</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker commit 39bc7a8307d9 myjenkins:v0.1</span><br></pre></td></tr></table></figure><h2 id="å°†å®¿ä¸»æœºç›®å½•æ˜ å°„åˆ°-Jenkins-Docker-ä¸­"><a href="#å°†å®¿ä¸»æœºç›®å½•æ˜ å°„åˆ°-Jenkins-Docker-ä¸­" class="headerlink" title="å°†å®¿ä¸»æœºç›®å½•æ˜ å°„åˆ° Jenkins Docker ä¸­"></a>å°†å®¿ä¸»æœºç›®å½•æ˜ å°„åˆ° Jenkins Docker ä¸­</h2><p>å¦‚æœæƒ³è®© Docker é‡Œçš„ Jenkins å¯ä»¥è®¿é—®å®¿ä¸»æœºçš„ç›®å½•ï¼Œåœ¨è¿è¡Œ docker æ—¶ä½¿ç”¨ -v å‚æ•°è¿›è¡Œ mount volume</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker run -p 8080:8080 -p 50000:50000 --name mydata -v /data/backup:/home/backup jenkins/jenkins:2.130</span><br><span class="line"><span class="comment"># æ˜ å°„æˆåŠŸï¼Œå¯ä»¥çœ‹åˆ°å®¿ä¸»æœºä¸Šçš„å¤‡ä»½æ–‡ä»¶äº†</span></span><br><span class="line">jenkins@c85db3f88115:/home/backup$ <span class="built_in">ls</span></span><br><span class="line">FULL-2019-09-14_02-00  FULL-2019-09-28_02-00  FULL-2019-10-19_02-00  FULL-2019-11-02_02-00  FULL-2019-11-23_02-00</span><br><span class="line">FULL-2019-09-21_02-00  FULL-2019-10-05_02-00  FULL-2019-10-26_02-00  FULL-2019-11-09_02-00  FULL-2019-11-30_02-00</span><br></pre></td></tr></table></figure><h2 id="å°†-Jenkins-Docker-Image-ä¿å­˜åœ¨-Artifactory"><a href="#å°†-Jenkins-Docker-Image-ä¿å­˜åœ¨-Artifactory" class="headerlink" title="å°† Jenkins Docker Image ä¿å­˜åœ¨ Artifactory"></a>å°† Jenkins Docker Image ä¿å­˜åœ¨ Artifactory</h2><p>ä¸‹è½½å¹¶å®‰è£… Artifactory ä¼ä¸šç‰ˆæˆ–æ˜¯ JFrog Container Registryï¼Œæ³¨æ„ Artifactory Open Source ç‰ˆæœ¬ä¸æ”¯æŒ Docker Registryã€‚</p><p>ä¾‹å¦‚æˆ‘çš„ JFrog Container Registry æ˜¯ï¼šdln.dev.mycompany.com:8040ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ª docker repository å« docker-localã€‚</p><p>ä¸Šä¼  Docker Image ä¸€å…±åˆ†ä¸ºä¸‰æ­¥ï¼š</p><p>docker login</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#  åœ¨ç™»å½•å‰éœ€è¦æ·»åŠ å¦‚ä¸‹é…ç½®åˆ° /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;insecure-registries&quot;</span> : [<span class="string">&quot;dln.dev.mycompany.com:8040&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># docker login &lt;DOCKER_SERVER&gt;, example below:</span></span><br><span class="line">sudo docker login dln.dev.mycompany.com:8040</span><br></pre></td></tr></table></figure><p>docker tag</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker tag &lt;IMAGE_ID&gt; artprod.mycompany/&lt;DOCKER_REPOSITORY&gt;:&lt;DOCKER_TAG&gt;, example below:</span></span><br><span class="line">sudo docker tag myjenkins:v0.1 dln.dev.mycompany.com:8040/docker-local/myjenkins:v0.1</span><br></pre></td></tr></table></figure><p>docker push</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker push artprod.mycompany/&lt;DOCKER_REPOSITORY&gt;:&lt;DOCKER_TAG&gt;, example below:</span></span><br><span class="line">$ sudo docker push dln.dev.mycompany.com:8040/docker-local/myjenkins::v0.1</span><br><span class="line">The push refers to repository [dln.dev.mycompany.com:8040/docker-local/myjenkins]</span><br><span class="line">98d59071f692: Pushed</span><br><span class="line">af288f00b8a7: Pushed</span><br><span class="line">4b955941a4d0: Pushed</span><br><span class="line">f121afdbbd5d: Pushed</span><br><span class="line">15.10: digest: sha256:a3f5e428c0cfbfd55cffb32d30b1d78fedb8a9faaf08efdd9c5208c94dc66614 size: 1150</span><br></pre></td></tr></table></figure><p>ç™»å½• JFrog Container Registry åˆ·æ–°å°±å¯ä»¥åˆ°å·²ç»ä¸Šæ¬¡çš„ Image äº†ã€‚è¯´æ˜ï¼šæˆªå›¾æ˜¯æˆ‘ä¸Šä¼ çš„å¦å¤–ä¸€ä¸ªé•œåƒ ubuntu:15.10</p><p><img src="/2019/12/install-docker-jenkins/example-image.png" alt="ä¸¾ä¾‹"></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Artifactory ä¸ Jenkins é›†æˆ</title>
      <link href="/2019/11/artifactory-integrate-with-jenkins/"/>
      <url>/2019/11/artifactory-integrate-with-jenkins/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡ <a href="https://shenxianpeng.github.io/2019/11/artifactory-install-and-upgrade/">åˆè¯† JFrog Artifactory</a>ï¼Œä»‹ç»äº†ä»€ä¹ˆæ˜¯ Artifactoryï¼Œä»¥åŠå¦‚ä½•å®‰è£…ã€å¯åŠ¨å’Œå‡çº§ã€‚</p><p>æœ¬ç¯‡ä»‹ç» Artifactory ä¸ Jenkins çš„é›†æˆï¼Œå› ä¸ºæ²¡æœ‰ä¸ CI å·¥å…·é›†æˆçš„ Artifactory æ˜¯æ²¡æœ‰çµé­‚çš„ã€‚</p><p>é€šè¿‡é›†æˆï¼Œå¯ä»¥è®© Jenkins åœ¨å®Œæˆæ„å»ºä¹‹åï¼Œå¯ä»¥ç›´æ¥å°†åˆ¶å“ï¼ˆæ¯”å¦‚ buildï¼‰æ¨é€åˆ° Artifactoryï¼Œä¾›æµ‹è¯•ä¸‹è½½ã€éƒ¨ç½²æˆ–æ˜¯åç»­çš„ Jenkins ä»»åŠ¡å»ç»§ç»­è¿›è¡ŒæŒç»­é›†æˆã€‚</p><span id="more"></span><h2 id="Jenkins-é‡Œé…ç½®-Artifactory"><a href="#Jenkins-é‡Œé…ç½®-Artifactory" class="headerlink" title="Jenkins é‡Œé…ç½® Artifactory"></a>Jenkins é‡Œé…ç½® Artifactory</h2><p>æ‰“å¼€ Manage Jenkins-&gt;Configure Systemï¼Œæ‰¾åˆ° Artifactoryï¼Œç‚¹å‡» Add Artifactory Serverï¼Œ è¾“å…¥ Server ID å’Œ URL</p><ol><li>Server ID æ˜¯ç»™ä½ çš„ Artifactory èµ·ä¸ªåˆ«åï¼Œè¿™æ ·ä½¿ç”¨ Jenkins pipeline çš„æ—¶å€™ä¼šç”¨åˆ°</li><li>URL æ˜¯ä½ çš„ Artifactory æœåŠ¡å™¨çš„åœ°å€ï¼Œä¾‹å¦‚ <code>http://art.company.com:8040/artifactory</code></li><li>é…ç½®å®Œæˆåï¼Œç‚¹å‡»Test Connectionï¼Œè¿”å› <code>Found Artifactory 6.14.0</code> è¡¨ç¤ºé…ç½®æˆåŠŸã€‚</li></ol><p>å¦‚å›¾æ‰€ç¤º: <img src="/2019/11/artifactory-integrate-with-jenkins/jenkins-artifactory-integration.png" alt="é…ç½®å’Œæµ‹è¯•"></p><h2 id="ä½¿ç”¨-Pipeline-è°ƒç”¨-Artifactory"><a href="#ä½¿ç”¨-Pipeline-è°ƒç”¨-Artifactory" class="headerlink" title="ä½¿ç”¨ Pipeline è°ƒç”¨ Artifactory"></a>ä½¿ç”¨ Pipeline è°ƒç”¨ Artifactory</h2><p>è¿™é‡Œæ¼”ç¤ºäº†ä¸¤ç§æ–¹å¼ï¼Œæˆ‘åœ¨é¡¹ç›®ä¸­ç”¨çš„æ˜¯ Jenkins Shared Libraryï¼›å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä»…ä»…ä½¿ç”¨ Jenkinsfileï¼ŒæŠŠå¦‚ä¸‹ä¸¤ä¸ª groovy æ–‡ä»¶ç»„åˆæˆä¸€ä¸ª Jenkinsfileã€‚</p><h3 id="æ–¹å¼1ï¼šJenkins-Shared-Library"><a href="#æ–¹å¼1ï¼šJenkins-Shared-Library" class="headerlink" title="æ–¹å¼1ï¼šJenkins Shared Library"></a>æ–¹å¼1ï¼šJenkins Shared Library</h3><p><code>build.groovy</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">def <span class="function"><span class="title">call</span></span>() &#123;</span><br><span class="line">  pipeline &#123;</span><br><span class="line">    <span class="comment"># çœç•¥å…¶ä»–ä»£ç </span></span><br><span class="line">    post &#123;</span><br><span class="line">      <span class="comment"># è¿™é‡Œåªæœ‰åœ¨ Jenkins Job æˆåŠŸçš„æ—¶å€™æ‰å°† build post åˆ° artifactory</span></span><br><span class="line">      success &#123;</span><br><span class="line">        script &#123;</span><br><span class="line">          <span class="keyword">if</span> (env.BRANCH_NAME == <span class="string">&#x27;develop&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment"># å¦‚æœå½“å‰æ˜¯ develop åˆ†æ”¯ï¼Œåˆ™å°† release å’Œ debug build éƒ½ post åˆ° artifactory</span></span><br><span class="line">            artifactory(<span class="string">&quot;<span class="variable">$&#123;PATTERN_RELEASE_PATH&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;TARGET_PATH&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;BUILD_NAME&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;BUILD_NUMBER&#125;</span>&quot;</span>)</span><br><span class="line">            artifactory(<span class="string">&quot;<span class="variable">$&#123;PATTERN_DEBUG_PATH&#125;</span>&quot;</span>,   <span class="string">&quot;<span class="variable">$&#123;TARGET_PATH&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;BUILD_NAME&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;BUILD_NUMBER&#125;</span>&quot;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (env.BRANCH_NAME.startsWith(<span class="string">&#x27;PR&#x27;</span>)) &#123;</span><br><span class="line">            <span class="comment"># å¦‚æœå½“å‰æ˜¯ pull request åˆ†æ”¯ï¼Œåˆ™åªå°† release build éƒ½ post åˆ° artifactory</span></span><br><span class="line">            artifactory(<span class="string">&quot;<span class="variable">$&#123;PATTERN_RELEASE_PATH&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;TARGET_PATH&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;BUILD_NAME&#125;</span>&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;BUILD_NUMBER&#125;</span>&quot;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>artifactory.groovy</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">import groovy.transform.Field</span><br><span class="line"></span><br><span class="line">@Field artifactoryServerId   = <span class="string">&quot;art-1&quot;</span></span><br><span class="line">@Field artifactoryURL        = <span class="string">&quot;http://art.company.com:8040/artifactory&quot;</span></span><br><span class="line">@Field artifactoryCredential = <span class="string">&quot;d1cbab74-823d-41aa-abb7&quot;</span></span><br><span class="line"></span><br><span class="line">def call(String patternPath, String targetPath, String buildName, String buildNumber) &#123;</span><br><span class="line">  rtServer (</span><br><span class="line">    <span class="built_in">id</span>: <span class="string">&quot;<span class="variable">$&#123;artifactoryServerId&#125;</span>&quot;</span>,</span><br><span class="line">    url: <span class="string">&quot;<span class="variable">$&#123;artifactoryURL&#125;</span>&quot;</span>,</span><br><span class="line">    credentialsId: <span class="string">&quot;<span class="variable">$&#123;artifactoryCredential&#125;</span>&quot;</span></span><br><span class="line">  )</span><br><span class="line">  rtPublishBuildInfo (</span><br><span class="line">      serverId: <span class="string">&quot;<span class="variable">$&#123;artifactoryServerId&#125;</span>&quot;</span></span><br><span class="line">  )</span><br><span class="line">  rtUpload (</span><br><span class="line">    serverId: <span class="string">&quot;<span class="variable">$&#123;artifactoryServerId&#125;</span>&quot;</span>,</span><br><span class="line">    spec: <span class="string">&quot;&quot;</span><span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">      &quot;</span>files<span class="string">&quot;: [</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">        &quot;</span>pattern<span class="string">&quot;: &quot;</span><span class="variable">$&#123;patternPath&#125;</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">        &quot;</span>target<span class="string">&quot;: &quot;</span><span class="variable">$&#123;targetPath&#125;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      ]</span></span><br><span class="line"><span class="string">    &#125;&quot;</span><span class="string">&quot;&quot;</span>,</span><br><span class="line">    buildNumber: <span class="string">&quot;<span class="variable">$&#123;buildNumber&#125;</span>&quot;</span>,</span><br><span class="line">    buildName: <span class="string">&quot;<span class="variable">$&#123;buildName&#125;</span>&quot;</span>,</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼2ï¼šJenkinsfile"><a href="#æ–¹å¼2ï¼šJenkinsfile" class="headerlink" title="æ–¹å¼2ï¼šJenkinsfile"></a>æ–¹å¼2ï¼šJenkinsfile</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  <span class="comment"># çœç•¥å…¶ä»–ä»£ç </span></span><br><span class="line">  stage(<span class="string">&#x27;config art&#x27;</span>)&#123;</span><br><span class="line">    rtServer (</span><br><span class="line">    <span class="built_in">id</span>: <span class="string">&quot;art-1&quot;</span>,</span><br><span class="line">    url: <span class="string">&quot;http://art.company.com:8040/artifactory&quot;</span>,</span><br><span class="line">    credentialsId: <span class="string">&quot;d1cbab74-823d-41aa-abb7&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  post &#123;</span><br><span class="line">    <span class="comment"># è¿™é‡Œåªæœ‰åœ¨ Jenkins Job æˆåŠŸçš„æ—¶å€™æ‰å°† build post åˆ° artifactory</span></span><br><span class="line">    success &#123;</span><br><span class="line">      script &#123;</span><br><span class="line">        <span class="keyword">if</span> (env.BRANCH_NAME == <span class="string">&#x27;develop&#x27;</span>) &#123;</span><br><span class="line">          rtUpload (</span><br><span class="line">            serverId: <span class="string">&quot;art-1&quot;</span>,</span><br><span class="line">            spec: <span class="string">&quot;&quot;</span><span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">              &quot;</span>files<span class="string">&quot;: [</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                &quot;</span>pattern<span class="string">&quot;: &quot;</span>/release/build/*.zip<span class="string">&quot;,</span></span><br><span class="line"><span class="string">                &quot;</span>target<span class="string">&quot;: &quot;</span>demo/develop/<span class="string">&quot;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">              ]</span></span><br><span class="line"><span class="string">            &#125;&quot;</span><span class="string">&quot;&quot;</span>,</span><br><span class="line">            buildNumber: <span class="string">&quot;<span class="variable">$&#123;buildNumber&#125;</span>&quot;</span>,</span><br><span class="line">            buildName: <span class="string">&quot;<span class="variable">$&#123;buildName&#125;</span>&quot;</span>,</span><br><span class="line">          )</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (env.BRANCH_NAME.startsWith(<span class="string">&#x27;PR&#x27;</span>)) &#123;</span><br><span class="line">          rtUpload (</span><br><span class="line">            serverId: <span class="string">&quot;art-1&quot;</span>,</span><br><span class="line">            spec: <span class="string">&quot;&quot;</span><span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">                &quot;</span>files<span class="string">&quot;: [</span></span><br><span class="line"><span class="string">                  &#123;</span></span><br><span class="line"><span class="string">                  &quot;</span>pattern<span class="string">&quot;: &quot;</span>/release/build/*.zip<span class="string">&quot;,</span></span><br><span class="line"><span class="string">                  &quot;</span>target<span class="string">&quot;: &quot;</span>demo/pull-request/<span class="string">&quot;</span></span><br><span class="line"><span class="string">                  &#125;</span></span><br><span class="line"><span class="string">                ]</span></span><br><span class="line"><span class="string">            &#125;&quot;</span><span class="string">&quot;&quot;</span>,</span><br><span class="line">            buildNumber: <span class="string">&quot;<span class="variable">$&#123;buildNumber&#125;</span>&quot;</span>,</span><br><span class="line">            buildName: <span class="string">&quot;<span class="variable">$&#123;buildName&#125;</span>&quot;</span>,</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Jenkins-ä¸-Artifactory-é›†æˆæˆåŠŸ"><a href="#Jenkins-ä¸-Artifactory-é›†æˆæˆåŠŸ" class="headerlink" title="Jenkins ä¸ Artifactory é›†æˆæˆåŠŸ"></a>Jenkins ä¸ Artifactory é›†æˆæˆåŠŸ</h2><p>è“è‰²è¡¨ç¤ºæ„å»ºæˆåŠŸï¼Œç»¿è‰²åœ†åœˆè¡¨ç¤º Build å·²ç» Post åˆ° Artifactory ä¸Šäº†ã€‚</p><p><img src="/2019/11/artifactory-integrate-with-jenkins/post-to-artifactory.png" alt="æ˜¾ç¤ºæ„å»ºä»¥åŠ Post æˆåŠŸ"></p><p>ç‚¹å‡»ç»¿è‰²åœ†åœˆå¯ä»¥è·³è½¬åˆ° Artifactory çœ‹åˆ°åˆ¶å“ã€‚</p><p><img src="/2019/11/artifactory-integrate-with-jenkins/artifactory-builds.png" alt="Artifactory"></p><p>Jenkins ä¸ Artifactory æ‰“é€šäº†ã€‚å®Œï¼</p>]]></content>
      
      
      <categories>
          
          <category> JFrog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Artifactory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯† JFrog Artifactory</title>
      <link href="/2019/11/artifactory-install-and-upgrade/"/>
      <url>/2019/11/artifactory-install-and-upgrade/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-Artifactory"><a href="#ä»€ä¹ˆæ˜¯-Artifactory" class="headerlink" title="ä»€ä¹ˆæ˜¯ Artifactory"></a>ä»€ä¹ˆæ˜¯ Artifactory</h2><p>Artifactory æ˜¯ JFrog çš„ä¸€ä¸ªäº§å“ï¼Œç”¨ä½œäºŒè¿›åˆ¶å­˜å‚¨åº“ç®¡ç†å™¨ã€‚äºŒè¿›åˆ¶å­˜å‚¨åº“å¯ä»¥å°†æ‰€æœ‰è¿™äº›äºŒè¿›åˆ¶ç»Ÿä¸€æ‰˜ç®¡ï¼Œä»è€Œä½¿å›¢é˜Ÿçš„ç®¡ç†æ›´åŠ é«˜æ•ˆå’Œç®€å•ã€‚</p><p>å°±è·Ÿä½ ç”¨ Git ä¸€æ ·ï¼ŒGit æ˜¯ç”¨æ¥ç®¡ç†ä»£ç çš„ï¼ŒArtifactory æ˜¯ç”¨æ¥ç®¡ç†äºŒè¿›åˆ¶æ–‡ä»¶çš„ï¼Œé€šå¸¸æ˜¯æŒ‡ jar, war, pypi, DLL, EXE ç­‰ build æ–‡ä»¶ã€‚</p><p>æˆ‘è§‰å¾—ä½¿ç”¨ Artifactory çš„æœ€å¤§ä¼˜åŠ¿æ˜¯åˆ›é€ äº†æ›´å¥½çš„æŒç»­é›†æˆç¯å¢ƒï¼Œæœ‰åŠ©äºå…¶ä»–æŒç»­é›†æˆä»»åŠ¡å» Artifactory é‡Œè°ƒç”¨ï¼Œå†éƒ¨ç½²åˆ°ä¸åŒçš„æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒï¼Œè¿™å¯¹äºå®æ–½ DevOps è‡³å…³é‡è¦ã€‚</p><span id="more"></span><p>å¦‚æœæƒ³äº†è§£æ›´å¤šæœ‰å…³ Artifactoryï¼Œè¯·å‚çœ‹ <a href="https://www.jfrogchina.com/">ä¸­æ–‡å®˜ç½‘</a> ä»¥åŠ <a href="https://jfrog.com/artifactory/">English Website</a>ã€‚</p><h2 id="å®‰è£…-Artifactory"><a href="#å®‰è£…-Artifactory" class="headerlink" title="å®‰è£… Artifactory"></a>å®‰è£… Artifactory</h2><ol><li>ä»å®˜ç½‘ä¸‹è½½ Open Source <a href="https://jfrog.com/open-source/#artifactory">Artifactory</a>ï¼Œè¿™é‡Œæ¼”ç¤ºçš„æ˜¯å®‰è£…åˆ° Linuxï¼Œæ‰€ä»¥ç‚¹å‡» Download RPM ä¸‹è½½</li><li>å°†ä¸‹è½½å¥½çš„ jfrog-artifactory-oss-6.14.0.rpm ä¸Šä¼ åˆ° Linux ä¸Š</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä»»ä½•ç›®å½•åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">sudo <span class="built_in">mkdir</span> /artifactory</span><br><span class="line"><span class="built_in">cd</span> /artifactory</span><br><span class="line"><span class="comment"># å°†ä¸‹è½½å¥½çš„ jfrog-artifactory-oss-6.15.0.rpm ä¸Šä¼ åˆ°ä½ çš„ Linux ä¸Š</span></span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">jfrog-artifactory-oss-6.14.0.rpm</span><br><span class="line"><span class="comment"># å®‰è£… artifactory</span></span><br><span class="line">sudo rpm -ivh jfrog-artifactory-oss-6.14.0.rpm</span><br></pre></td></tr></table></figure><h2 id="Artifactory-æœåŠ¡å¯åŠ¨å’Œå…³é—­"><a href="#Artifactory-æœåŠ¡å¯åŠ¨å’Œå…³é—­" class="headerlink" title="Artifactory æœåŠ¡å¯åŠ¨å’Œå…³é—­"></a>Artifactory æœåŠ¡å¯åŠ¨å’Œå…³é—­</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line">sudo systemctl start artifactory.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤å¯åŠ¨æœåŠ¡çš„æ—¶å€™é‡åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</span></span><br><span class="line"><span class="comment"># Job for artifactory.service failed because a configured resource limit was exceeded. See &quot;systemctl status artifactory.service&quot; and &quot;journalctl -xe&quot; for details.</span></span><br><span class="line"><span class="comment"># è¯¦æƒ…ï¼šhttps://www.jfrog.com/jira/browse/RTFACT-19988</span></span><br><span class="line"><span class="comment"># å¯å°è¯•å¦‚ä¸‹å‘½ä»¤å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> /opt/jfrog/artifactory/app/bin &amp;&amp; ./artifactory.sh start &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢æœåŠ¡</span></span><br><span class="line">sudo systemctl stop artifactory.service</span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span></span><br><span class="line">sudo systemctl status artifactory.service</span><br></pre></td></tr></table></figure><h2 id="è®¿é—®-Artifactory"><a href="#è®¿é—®-Artifactory" class="headerlink" title="è®¿é—® Artifactory"></a>è®¿é—® Artifactory</h2><p>Artifactory é»˜è®¤ç«¯å£æ˜¯8040ï¼Œå®‰è£…æˆåŠŸåè®¿é—®ï¼š<code>http://hostname:8040</code> å³å¯ç™»å½•ï¼ˆé»˜è®¤ç”¨æˆ·å admin å¯†ç  passwordï¼‰<br><img src="/2019/11/artifactory-install-and-upgrade/homepage.png" alt="Artifactory é¦–é¡µ"></p><h2 id="Artifactory-å‡çº§"><a href="#Artifactory-å‡çº§" class="headerlink" title="Artifactory å‡çº§"></a>Artifactory å‡çº§</h2><ol><li><p>ä»å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ <a href="https://jfrog.com/open-source/#artifactory">Artifactory</a></p></li><li><p>å°†ä¸‹è½½å¥½çš„ jfrog-artifactory-oss-6.15.0.rpmï¼ˆç›®å‰æœ€æ–°ï¼‰ä¸Šä¼ åˆ°ä½ çš„ Linux ä¸Š</p></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /artifactory</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">jfrog-artifactory-oss-6.14.0.rpm  jfrog-artifactory-oss-6.15.0.rpm</span><br><span class="line"><span class="comment"># åœæ­¢æœåŠ¡</span></span><br><span class="line">sudo systemctl stop artifactory.service</span><br><span class="line"><span class="comment"># è¿›è¡Œå‡çº§</span></span><br><span class="line">sudo rpm -U jfrog-artifactory-oss-6.15.0.rpm</span><br><span class="line"><span class="comment"># è¾“å‡ºæ—¥å¿—ï¼Œæ˜¾ç¤ºå‡çº§æˆåŠŸ</span></span><br><span class="line">warning: jfrog-artifactory-oss-6.15.0.rpm: Header V4 DSA/SHA1 Signature, key ID d7639232: NOKEY</span><br><span class="line">Checking <span class="keyword">if</span> ARTIFACTORY_HOME exists</span><br><span class="line">Removing tomcat work directory</span><br><span class="line">Removing Artifactory<span class="string">&#x27;s exploded WAR directory</span></span><br><span class="line"><span class="string">Initializing artifactory service with systemctl...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">************ SUCCESS ****************</span></span><br><span class="line"><span class="string">The upgrade of Artifactory has completed successfully.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Start Artifactory with:</span></span><br><span class="line"><span class="string">&gt; systemctl start artifactory.service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Check Artifactory status with:</span></span><br><span class="line"><span class="string">&gt; systemctl status artifactory.service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">NOTE: Updating the ownership of files and directories. This may take several minutes. Do not stop the installation/upgrade process.</span></span><br></pre></td></tr></table></figure><h2 id="Artifactory-å¸è½½"><a href="#Artifactory-å¸è½½" class="headerlink" title="Artifactory å¸è½½"></a>Artifactory å¸è½½</h2><ol><li>åœæ­¢ Artifactory æœåŠ¡</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl stop artifactory.service</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ root ç”¨æˆ·æ‰§è¡Œ RPM uninstall å‘½ä»¤</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># remove OSS version</span></span><br><span class="line">yum erase jfrog-artifactory-oss</span><br><span class="line"><span class="comment"># remove PRO version, etc.</span></span><br><span class="line">yum erase jfrog-artifactory-pro</span><br></pre></td></tr></table></figure><p>æ›´å¤šå…³äº JFrog äº§å“çš„å¸è½½ï¼Œè¯·çœ‹ï¼š<a href="https://www.jfrog.com/confluence/display/JFROG/Uninstalling+JFrog+Products">https://www.jfrog.com/confluence/display/JFROG/Uninstalling+JFrog+Products</a></p><h2 id="å®‰è£…-JFrog-CLI"><a href="#å®‰è£…-JFrog-CLI" class="headerlink" title="å®‰è£… JFrog CLI"></a>å®‰è£… JFrog CLI</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ON MAC</span></span><br><span class="line">brew install jfrog-cli-go</span><br><span class="line"><span class="comment"># WITH CURL</span></span><br><span class="line">curl -fL https://getcli.jfrog.io | sh</span><br><span class="line"><span class="comment"># WITH NPM</span></span><br><span class="line">npm install -g jfrog-cli-go</span><br><span class="line"><span class="comment"># WITH DOCKER</span></span><br><span class="line">docker run docker.bintray.io/jfrog/jfrog-cli-go:latest jfrog -v</span><br></pre></td></tr></table></figure><p>CLI for JFrog Artifactory</p><p><a href="https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory">å¦‚ä½•åœ¨ Artifactory ä¸Šä½¿ç”¨ JFrog CLI</a></p>]]></content>
      
      
      <categories>
          
          <category> JFrog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Artifactory </tag>
            
            <tag> JFrog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins Console Output æ˜¾ç¤ºå½©è‰²</title>
      <link href="/2019/09/output-display-color/"/>
      <url>/2019/09/output-display-color/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœæƒ³è®© Jenkins Console Output å‡ºæ¥ä¸€äº›é‡è¦æ—¥å¿—é†’ç›®çš„æ˜¾ç¤ºï¼Œå¯ä»¥è®©ä¸€äº›æ—¥å¿—æ˜¾ç¤ºé¢œè‰²æ–¹ä¾¿æŸ¥çœ‹</p><ol><li>é¦–å…ˆéœ€è¦å®‰è£…æ’ä»¶ï¼š <a href="https://wiki.jenkins.io/display/JENKINS/AnsiColor+Plugin">https://wiki.jenkins.io/display/JENKINS/AnsiColor+Plugin</a></li><li>å®‰è£…æˆåŠŸåè¿›å…¥ç³»ç»Ÿè®¾ç½®</li></ol>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins privilege management</title>
      <link href="/2019/11/jenkins-privilege-management/"/>
      <url>/2019/11/jenkins-privilege-management/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•é’ˆå¯¹ Jenkins é‡Œçš„ä¸åŒ Job è¿›è¡Œä¸åŒçš„ç­–ç•¥ç®¡ç†ã€‚æ¯”å¦‚æŸä¸ª Job æ‰€æœ‰äººéƒ½å¯ä»¥æŸ¥çœ‹ï¼Œä½†ä»…é™äºæŸäº›äººå¯ä»¥æ‰§è¡Œï¼Œè¿™æ—¶å€™å°±éœ€è¦å¯¹ Job è¡Œç¨‹æƒé™è®¾ç½®ã€‚</p><p>è¿™é‡Œç”¨çš„æ’ä»¶æ˜¯ Role-based Authorization Strategyã€‚å®‰è£…æˆåŠŸåï¼Œæ‰“å¼€è¦è®¾ç½®çš„ Job, è®¾ç½®å¦‚ä¸‹ï¼š</p><p><img src="/2019/11/jenkins-privilege-management/jenkins-privilege-management.png" alt="Enable project-based security"></p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•è®¾ç½® NFS å…±äº«ä»¥åŠåœ¨ä¸åŒçš„å¹³å° Windows/Linux/Unix è¿›è¡ŒæŒ‚è½½</title>
      <link href="/2019/09/nfs/"/>
      <url>/2019/09/nfs/</url>
      
        <content type="html"><![CDATA[<p>ä¾‹å¦‚æˆ‘æœ‰ä¸€ä¸ªå…±äº«ä»“åº“çš„ä»£ç æ‰€åœ¨ç”¨çš„ç©ºé—´éå¸¸å¤§ï¼ˆè¶…è¿‡ 20 Gï¼‰ï¼Œåœ¨æ¯ä¸ªäº§å“æ„å»ºæ—¶å€™éƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªä»“åº“çš„ä»£ç ï¼ˆä»é‡Œé¢ copy ç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œå¦‚æœæ¯ä¸ªäººéƒ½è¦ git clone è¿™ä¸ªç¬¬ä¸‰æ–¹ä»“åº“ï¼Œä¸€æ˜¯ç½‘ç»œå¼€é”€éå¸¸å¤§ï¼ŒäºŒæ˜¯ git clone æ—¶é—´é•¿ï¼Œè€Œä¸”å ç”¨å¤§é‡çš„ç‰©ç†ç©ºé—´ã€‚</p><p>è¿™å¯ä»¥é€šè¿‡ NFS å…±äº«æ¥è§£å†³ã€‚</p><p>å¦å¤–å¸Œæœ›è¿™ä¸ªä»£ç ä»“åº“èƒ½è‡ªåŠ¨æ›´æ–°ï¼Œè¿™é‡Œå¼•å…¥äº† Jenkinsã€‚ç”¨å®ƒæ¥æ£€æŸ¥å¦‚æœè¿™ä¸ªå®¹é‡å·¨å¤§çš„ä»“åº“æœ‰ä»£ç æäº¤å°±è‡ªåŠ¨æ‰§è¡Œ git pull æ“ä½œï¼Œæ›´æ–°æœ€æ–°çš„ä»£ç åˆ°å…±äº«æœåŠ¡å™¨ä¸Šã€‚</p><span id="more"></span><p>ä»€ä¹ˆæ˜¯ NFSï¼ŸNFSï¼ˆNetwork File Systemï¼‰å³ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯ FreeBSD æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ç§ï¼Œå®ƒå…è®¸ç½‘ç»œä¸­çš„è®¡ç®—æœºä¹‹é—´å…±äº«èµ„æºã€‚åœ¨ NFS çš„åº”ç”¨ä¸­ï¼Œæœ¬åœ° NFS çš„å®¢æˆ·ç«¯åº”ç”¨å¯ä»¥é€æ˜åœ°è¯»å†™ä½äºè¿œç«¯ NFS æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œå°±åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·ï¼ŒWindows ä¸Šä¿—ç§°å…±äº«ã€‚</p><h2 id="è®¾ç½®-NFS"><a href="#è®¾ç½®-NFS" class="headerlink" title="è®¾ç½® NFS"></a>è®¾ç½® NFS</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚åœ¨ Linux ä¸Š, å…±äº«æœåŠ¡å™¨çš„ ip æ˜¯ 192.168.1.1</span></span><br><span class="line">sudo vi /etc/exports</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯æˆ‘çš„ exports æ–‡ä»¶çš„é…ç½®</span></span><br><span class="line"><span class="comment"># å‡è®¾å†…ç½‘ ip æ˜¯è¿™æ ·çš„åŒºé—´ 192.168.1.1 ~ 192.168.1.250</span></span><br><span class="line"><span class="comment"># ro è¡¨ç¤ºåªè¯»</span></span><br><span class="line"><span class="comment"># all_squash è¡¨ç¤ºä¸ç®¡ä½¿ç”¨ NFS çš„ç”¨æˆ·æ˜¯è°ï¼Œä»–çš„èº«ä»½éƒ½ä¼šè¢«é™å®šæˆä¸ºä¸€ä¸ªæŒ‡å®šçš„æ™®é€šç”¨æˆ·èº«ä»½(nfsnobody)</span></span><br><span class="line">/agent/workspace/opensrc 192.168.1.*(ro,all_squash)</span><br><span class="line">/agent/workspace/opensrc dev-team-a*.com(ro,all_squash)</span><br><span class="line">/agent/workspace/opensrc dev-team-b*.com(ro,all_squash)</span><br><span class="line">/agent/workspace/opensrc dev-ci*(ro,all_squash)</span><br></pre></td></tr></table></figure><h2 id="NFS-æ“ä½œ"><a href="#NFS-æ“ä½œ" class="headerlink" title="NFS æ“ä½œ"></a>NFS æ“ä½œ</h2><h3 id="å¯åŠ¨-NFS-æœåŠ¡"><a href="#å¯åŠ¨-NFS-æœåŠ¡" class="headerlink" title="å¯åŠ¨ NFS æœåŠ¡"></a>å¯åŠ¨ NFS æœåŠ¡</h3><p>å¯åŠ¨ NFS æœåŠ¡ï¼Œéœ€è¦å¯åŠ¨ portmap å’Œ nfs ä¸¤ä¸ªæœåŠ¡ï¼Œå¹¶ä¸” portmap ä¸€å®šè¦å…ˆäº nfs å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service portmap start</span><br><span class="line">service nfs start</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ portmap çŠ¶æ€</span></span><br><span class="line">service portmap status</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"><a href="#æŸ¥çœ‹æœåŠ¡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"></a>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service nfs status</span><br></pre></td></tr></table></figure><h3 id="åœæ­¢æœåŠ¡"><a href="#åœæ­¢æœåŠ¡" class="headerlink" title="åœæ­¢æœåŠ¡"></a>åœæ­¢æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service nfs stop</span><br></pre></td></tr></table></figure><h3 id="å¯¼å‡ºé…ç½®"><a href="#å¯¼å‡ºé…ç½®" class="headerlink" title="å¯¼å‡ºé…ç½®"></a>å¯¼å‡ºé…ç½®</h3><p>å½“æ”¹å˜&#x2F;etc&#x2F;exportsé…ç½®æ–‡ä»¶åï¼Œä¸ç”¨é‡å¯ NFS æœåŠ¡ç›´æ¥ç”¨è¿™ä¸ª exportfs å³å¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo exportfs -rv</span><br></pre></td></tr></table></figure><h2 id="æŒ‚è½½åˆ°ä¸åŒå¹³å°"><a href="#æŒ‚è½½åˆ°ä¸åŒå¹³å°" class="headerlink" title="æŒ‚è½½åˆ°ä¸åŒå¹³å°"></a>æŒ‚è½½åˆ°ä¸åŒå¹³å°</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Install the NFS Client(Services for NFS)</span></span><br><span class="line"><span class="comment"># Step 1: Open Programs and Features</span></span><br><span class="line"><span class="comment"># Step 2: Click Turn Windows features on or off</span></span><br><span class="line"><span class="comment"># Step 3: Find and check option Services for NFS</span></span><br><span class="line"><span class="comment"># Step 4: Once installed, click Close and exit back to the desktop. refer to https://graspingtech.com/mount-nfs-share-windows-10/</span></span><br><span class="line">$ mount -o anon 192.168.1.1:/agent/workspace/opensrc Z:</span><br></pre></td></tr></table></figure><h3 id="Linux-Unix"><a href="#Linux-Unix" class="headerlink" title="Linux&#x2F;Unix"></a>Linux&#x2F;Unix</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Linux</span></span><br><span class="line">sudo mount -t nfs 192.168.1.1:/agent/workspace/opensrc /agent/workspace/opensrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># AIX</span></span><br><span class="line">sudo nfso -o nfs_use_reserved_ports=1     <span class="comment"># should only first time mount need to run this command</span></span><br><span class="line">sudo mount -F nfs 192.168.1.1:/agent/workspace/opensrc /agent/workspace/opensrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># HP-UX</span></span><br><span class="line">sudo mount -F nfs 192.168.1.1:/agent/workspace/opensrc /agent/workspace/opensrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># Solaris-SPARC</span></span><br><span class="line"><span class="comment"># å¦‚æœä½ ä¸èƒ½ç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ mount</span></span><br><span class="line">sudo /usr/sbin/mount -F nfs 192.168.1.1:/agent/workspace/opensrc /agent/workspace/opensrc</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Shell </tag>
            
            <tag> NFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ Could not read from remote repository é—®é¢˜</title>
      <link href="/2019/09/could-not-read-from-remote-repository/"/>
      <url>/2019/09/could-not-read-from-remote-repository/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æˆ‘åœ¨è¿è¡Œ Jenkins Job æ—¶å€™çªç„¶å‘ç° git clone ä»£ç çš„æ—¶å€™çªç„¶æŠ¥äº†è¿™ä¸ªé”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> ssh://git@git.companyname.com:7999/repo/opensrc.git</span><br><span class="line">Cloning into <span class="string">&#x27;opensrc&#x27;</span>...</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé”™è¯¯åªåœ¨æˆ‘åˆšå¼€å§‹ä½¿ç”¨ git çš„æ—¶å€™é‡åˆ°è¿‡ï¼Œé‚£æ—¶å€™æˆ‘è¿˜ä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨ ssh çš„æ–¹å¼æ¥ clone ä»£ç ã€‚æ€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿæˆ‘ä¹Ÿæ²¡æ”¹è¿‡ä»€ä¹ˆï¼Œéå¸¸ä¸ç†è§£ã€‚</p><h2 id="å¸¸è§è§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§è§£å†³æ–¹æ¡ˆ"></a>å¸¸è§è§£å†³æ–¹æ¡ˆ</h2><span id="more"></span><p>Google äº†æ²¡æœ‰æ‰¾åˆ°æˆ‘é‡åˆ°çš„è¿™ä¸ªé—®é¢˜ï¼Œç»å¤§å¤šæ•°éƒ½æ˜¯åº”ä¸ºæ²¡æœ‰ç”Ÿæˆ ssh-keyï¼Œç”Ÿæˆåå°† pub key æ·»åŠ åˆ° Github æˆ–æ˜¯å…¶ä»– Web git ç®¡ç†å¹³å°ï¼ŒåŸºæœ¬å°±è§£å†³äº†ã€‚ä»¥ GitHub ä¸ºä¾‹</p><p>é¦–å…ˆï¼Œç”Ÿæˆ SSH key</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®°å¾—æ›¿æ¢æˆä½ è‡ªå·±çš„é‚®ç®±è´¦å·</span></span><br><span class="line">ssh-keygen -t rsa -C xianpeng.shen@gmail.com</span><br></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œæ‹·è´ SSH pub key åˆ°ä½ ä½¿ç”¨çš„ git web å¹³å°ï¼Œæ¯”å¦‚ Github ç­‰ç­‰ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> %userprofile%/.ssh</span><br><span class="line"><span class="comment"># æ‰“å¼€ id_rsa.pub å¹¶æ‹·è´å†…å®¹</span></span><br><span class="line">notepad id_rsa.pub</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ‰“å¼€ <a href="https://github.com/settings/ssh/new">https://github.com/settings/ssh/new</a> æŠŠä½ å¤åˆ¶çš„å†…å®¹è´´è¿›å»ä¿å­˜å³å¯ã€‚</p><p>å¯¹äºæˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œè¿™ç§è§£å†³æ–¹å¼æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºåŒæ ·çš„è´¦å·åœ¨åˆ«çš„è™šæ‹Ÿæœºä¸Šå¹¶ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºåŒæ ·æ˜¯ HP-UX è™šæ‹Ÿæœºï¼Œæˆ‘ç”¨å¦å¤–ä¸€ä¸ªè´¦å·ç”Ÿæˆ ssh-key, git clone ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œé‚£æˆ‘çŒœæµ‹æ˜¯è¿™ä¸¤ä¸ªè´¦å·çš„ä¹‹é—´å­˜åœ¨å·®å¼‚ã€‚</p><h2 id="é€šè¿‡-SSH-è¿æ¥æµ‹è¯•æ’æŸ¥"><a href="#é€šè¿‡-SSH-è¿æ¥æµ‹è¯•æ’æŸ¥" class="headerlink" title="é€šè¿‡ SSH è¿æ¥æµ‹è¯•æ’æŸ¥"></a>é€šè¿‡ SSH è¿æ¥æµ‹è¯•æ’æŸ¥</h2><p>é¦–å…ˆï¼Œæˆ‘æŸ¥çœ‹äº†è¿™ä¸¤ä¸ªè´¦å·çš„ .gitconfig æ–‡ä»¶ï¼Œç¡®å®æœ‰å·®å¼‚ã€‚å½“æˆ‘å°†å¥½ç”¨çš„è´¦å·çš„ .gitconfig å†…å®¹å¤åˆ¶åˆ°ä¸å¥½ç”¨çš„è´¦å·çš„ .gitconfig æ–‡ä»¶æ—¶ï¼Œå¹¶ä¸å¥½ç”¨ã€‚</p><p>å…¶æ¬¡ï¼Œæˆ‘å‘ç°æ‰§è¡Œ git clone çš„æ—¶å€™åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª core æ–‡ä»¶ï¼Œè¯´æ˜å·²ç» coredump äº†ï¼Œä½†æ˜¯è¿™ä¸ª core ç›´æ¥æ‰“å¼€å¤§éƒ¨åˆ†éƒ½æ˜¯ä¹±ç ï¼Œé”™è¯¯ä¿¡æ¯å¾ˆéš¾å‡†ç¡®å®šä½ã€‚</p><p>æœ€åï¼Œæˆ‘é€šè¿‡å‘½ä»¤æ¥æµ‹è¯• SSH è¿æ¥çš„ã€‚å¯¹äº Github æ˜¯è¿™ä¸ªå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>æˆ‘å½“å‰ä½¿ç”¨å’Œå‡ºé—®é¢˜çš„æ˜¯ Bitbucketï¼Œå®ƒçš„ SSH è¿æ¥æµ‹è¯•å‘½ä»¤æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -vvv git\@bitbucket.org</span><br></pre></td></tr></table></figure><p>æˆ‘å…ˆç”¨å¥½ git clone å¥½ç”¨çš„è´¦å·ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œè¿™é‡Œæˆ‘çœç•¥ä¸€äº›å…¶ä»–è¿”å›ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh -vvv git\@bitbucket.org</span><br><span class="line">OpenSSH_6.2p1+sftpfilecontrol-v1.3-hpn13v12, OpenSSL 0.9.8y 5 Feb 2013      <span class="comment"># OpenSSH ç‰ˆæœ¬ä¸åŒ</span></span><br><span class="line">HP-UX Secure Shell-A.06.20.006, HP-UX Secure Shell version                  <span class="comment"># åŸæ¥æ˜¯è°ƒç”¨è·¯å¾„ä¸åŒ</span></span><br><span class="line">debug1: Reading configuration data /opt/ssh/etc/ssh_config</span><br><span class="line">debug3: RNG is ready, skipping seeding</span><br><span class="line">debug2: ssh_connect: needpriv 0</span><br><span class="line">debug1: Connecting to bitbucket.org [18.205.93.1] port 22.</span><br><span class="line">debug1: Connection established.</span><br><span class="line"></span><br><span class="line">... ...</span><br><span class="line"></span><br><span class="line">debug2: we did not send a packet, <span class="built_in">disable</span> method</span><br><span class="line">debug1: No more authentication methods to try.</span><br><span class="line">Permission denied (publickey).</span><br></pre></td></tr></table></figure><p>æˆ‘å†ç”¨ git clone ä¸å¥½ç”¨çš„è´¦å·è¿›è¡Œæµ‹è¯•ï¼Œç»“æœè¿”å›å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh -vvv git\@bitbucket.org</span><br><span class="line">OpenSSH_8.0p1, OpenSSL 1.0.2s  28 May 2019                                  <span class="comment"># OpenSSH ç‰ˆæœ¬ä¸åŒ</span></span><br><span class="line">debug1: Reading configuration data /usr/local/etc/ssh_config                <span class="comment"># åŸæ¥æ˜¯è°ƒç”¨è·¯å¾„ä¸åŒ</span></span><br><span class="line">debug2: resolving <span class="string">&quot;bitbucket.org&quot;</span> port 22</span><br><span class="line">debug2: ssh_connect_direct</span><br><span class="line">debug1: Connecting to bitbucket.org [180.205.93.10] port 22.</span><br><span class="line">debug1: Connection established.</span><br><span class="line">Memory fault(coredump)</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>æ˜æ˜¾çœ‹åˆ°ä»–ä»¬ä½¿ç”¨äº†ä¸åŒç‰ˆæœ¬çš„ OpenSSHï¼Œè¯´æ˜ä»–ä»¬çš„ç¯å¢ƒå˜é‡æœ‰æ‰€ä¸åŒã€‚æˆ‘ä¹‹å‰æŸ¥çœ‹è¿‡ç¯å¢ƒå˜é‡ï¼Œä½†ç”±äºå˜é‡å¾ˆå¤šï¼Œä¸èƒ½ä¸€ä¸‹åˆ¤æ–­é‚£ä¸ªå˜é‡å¯èƒ½ä¼šæœ‰å½±å“ã€‚</p><h2 id="æœ€ç»ˆè§£å†³æ–¹æ¡ˆ"><a href="#æœ€ç»ˆè§£å†³æ–¹æ¡ˆ" class="headerlink" title="æœ€ç»ˆè§£å†³æ–¹æ¡ˆ"></a>æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</h2><p>å›åˆ° git clone å¤±è´¥çš„é‚£ä¸ªè´¦å·ä¸‹é¢çš„ .profile æ–‡ä»¶æŸ¥çœ‹ï¼Œè¿™é‡Œç¡®å®æ·»åŠ äº†ä¸€ä¸ª &#x2F;usr&#x2F;bin çš„ç¯å¢ƒå˜é‡ï¼Œå¯¼è‡´è¿™ä¸ªè´¦å·åœ¨æ‰§è¡Œ git clone æ—¶å€™ç”¨äº†å¦å¤–ç‰ˆæœ¬çš„ OpenSSHï¼Œæˆ‘ç”¨çš„æ˜¯ HP-UXï¼Œå®ƒå¯¹äºåŒ…ä¹‹å‰çš„ä¾èµ–ä»¥åŠç‰ˆæœ¬è¦æ±‚éƒ½éå¸¸é«˜ï¼ŒæŠŠè¿™ä¸ªç¯å¢ƒå˜é‡å»æ‰ä¹‹åï¼Œä¿å­˜ï¼Œé‡æ–°ç™»å½•åˆ°è™šæ‹Ÿæœºï¼Œæ‰§è¡Œ git clone æ¢å¤æ­£å¸¸ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git Commit Squash</title>
      <link href="/2019/08/git-commit-squash/"/>
      <url>/2019/08/git-commit-squash/</url>
      
        <content type="html"><![CDATA[<h2 id="If-your-commits-on-local-not-pushed-to-remote"><a href="#If-your-commits-on-local-not-pushed-to-remote" class="headerlink" title="If your commits on local not pushed to remote"></a>If your commits on local not pushed to remote</h2><h3 id="combine-local-commits-you-could-follow-this-flow"><a href="#combine-local-commits-you-could-follow-this-flow" class="headerlink" title="combine local commits, you could follow this flow"></a>combine local commits, you could follow this flow</h3><p>Here is <a href="https://www.youtube.com/watch?v=V5KrD7CmO4o">short video</a> (only 3 minutes) and good explanation of <code>git rebase -i</code> usage.</p><p>list your local repository log</p><p><img src="/2019/08/git-commit-squash/example-01.png" alt="list your logs in oneline"></p><p>If you want to combine these 3 commits (add6152, 3650100, 396a652) to 1 commit, execute this command</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rebase -i HEAD~3      <span class="comment"># last three commits</span></span><br></pre></td></tr></table></figure><p><img src="/2019/08/git-commit-squash/example-02.png" alt="list last three commits"></p><p>Select which commit you want to squash (type s or squash are OK)</p><p><img src="/2019/08/git-commit-squash/example-03.png" alt="combine three commits to one"></p><p>then press ESC, enter :wq! to save and exit.</p><p><img src="/2019/08/git-commit-squash/example-04.png" alt="comment out some commits message you don&#39;t need"></p><p>Comment out some commits message you donâ€™t need, press ESC, enter :wq! to save and exit.</p><p><img src="/2019/08/git-commit-squash/example-05.png" alt="comment out some commits message you don&#39;t need"></p><p>Check log, you will see your local repository logs has combine to one commit</p><p><img src="/2019/08/git-commit-squash/example-06.png" alt="comment out some commits message you don&#39;t need"></p><h2 id="If-your-commits-had-pushed-to-remote"><a href="#If-your-commits-had-pushed-to-remote" class="headerlink" title="If your commits had pushed to remote"></a>If your commits had pushed to remote</h2><h3 id="combine-remote-commits-you-could-follow-this-flow"><a href="#combine-remote-commits-you-could-follow-this-flow" class="headerlink" title="combine remote commits, you could follow this flow"></a>combine remote commits, you could follow this flow</h3><p>list your repository logs</p><p><img src="/2019/08/git-commit-squash/example-07.png" alt="list your logs in oneline"></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># so you can create another branch from bugfix/UNV-1234 named bugfix/UNV-1234-for-squash</span></span><br><span class="line">xshen@dln-l-xs01 MINGW64 /c/U2GitCode/git-test (bugfix/UNV-1234)</span><br><span class="line">$ git checkout -b bugfix/UNV-1234-for-squash</span><br><span class="line">Switched to a new branch <span class="string">&#x27;bugfix/UNV-1234-for-squash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># combine last 2 commits</span></span><br><span class="line">$ git rebase -i HEAD~2</span><br></pre></td></tr></table></figure><p>change one commit from pick to squash, see the screenshot below. press ESC, enter :wq! to save and exit.</p><p><img src="/2019/08/git-commit-squash/example-08.png" alt="select a commit you want to squash"></p><p>change commit message, for example â€œUNV-1234 combine all commit to one commitâ€, then press ESC, enter :wq! to save and exit.</p><p><img src="/2019/08/git-commit-squash/example-09.png" alt="comment out commit message you don&#39;t want to display"></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># push your new create branch to remote.</span></span><br><span class="line">git push -u origin bugfix/UNV-1234-for-squash</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Squash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins troubleshooting summary</title>
      <link href="/2019/08/jenkins-troubleshooting/"/>
      <url>/2019/08/jenkins-troubleshooting/</url>
      
        <content type="html"><![CDATA[<h2 id="ERROR-Error-cloning-remote-repo-â€˜originâ€™-timeout-10"><a href="#ERROR-Error-cloning-remote-repo-â€˜originâ€™-timeout-10" class="headerlink" title="ERROR: Error cloning remote repo â€˜originâ€™ timeout&#x3D;10"></a>ERROR: Error cloning remote repo â€˜originâ€™ timeout&#x3D;10</h2><p>Recently, my Jenkins build failed when execute <code>git clone</code> with following this error message: ERROR: Error cloning remote repo â€˜originâ€™.</p><ol><li>first I suspect it is the network reason, maybe because clone from Bitbucket need took up a lot bandwidth during <code>git clone</code> and causing this disconnection. but when I try to git clone on the agent, it works well.</li><li>Then I noticed the there is <code>timeout=10</code> in the Jenkins console log, I suddenly remembered that I deleted a very large folder a few days ago from git repo, and this may cause the repo more bigger, so it may take more time do a complete clone and it exceeds the Jenkins default clone timeout <code>10</code>.</li></ol><p>Googling and finally I found this issue JENKINS-47660 which is the same problem as mine.</p><span id="more"></span><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Finally I found the the property of Advanced clone behaviors in Git clone in Jenkins, an checked Shallow clone then set Shallow clone depth equals to 1. (This setting is equivalent to â€“depth 1), and I changed timeout from 10 minutes to 15 minutes.</p><p><img src="/2019/08/jenkins-troubleshooting/advanced-clone-behaviour.png" alt="Advanced clone behaviours"></p><h2 id="Full-Log-below"><a href="#Full-Log-below" class="headerlink" title="Full Log below"></a>Full Log below</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">using credential d1cbab74-823d-41aa-abb7</span><br><span class="line"> Wiping out workspace first.</span><br><span class="line"> Cloning the remote Git repository</span><br><span class="line"> Cloning with configured refspecs honoured and without tags</span><br><span class="line"> Cloning repository https://git.company.com/scm/db/blog.git</span><br><span class="line">  &gt; C:\Program Files\Git\bin\git.exe init C:\agent\workspace\develop # timeout=10</span><br><span class="line"> Fetching upstream changes from https://git.company.com/scm/db/blog.git</span><br><span class="line">  &gt; C:\Program Files\Git\bin\git.exe --version # timeout=10</span><br><span class="line"> using GIT_ASKPASS to set credentials blwmv</span><br><span class="line">  &gt; C:\Program Files\Git\bin\git.exe fetch --no-tags --progress https://git.company.com/scm/db/blog.git +refs/heads/develop:refs/remotes/origin/develop</span><br><span class="line"> ERROR: Error cloning remote repo &#x27;origin&#x27;</span><br><span class="line"> hudson.plugins.git.GitException: Command &quot;C:\Program Files\Git\bin\git.exe fetch --no-tags --progress https://git.company.com/scm/db/blog.git +refs/heads/develop:refs/remotes/origin/develop&quot; returned status code 130:</span><br><span class="line"> stdout:</span><br><span class="line"> stderr: remote: Counting objects: 1</span><br><span class="line">remote: Counting objects: 242690, done.</span><br><span class="line"> remote: Compressing objects:   0% (1/75028)</span><br><span class="line">remote: Compressing objects:   1% (751/75028)</span><br><span class="line">remote: Compressing objects:   2% (1501/75028)</span><br><span class="line">remote: Compressing objects:   3% (2251/75028)</span><br><span class="line">remote: Compressing objects:   4% (3002/75028)</span><br><span class="line">remote: Compressing objects:   5% (3752/75028)</span><br><span class="line">... ...</span><br><span class="line">remote: Compressing objects: 100% (75028/75028), done.</span><br><span class="line"> Receiving objects:   0% (1/242690)</span><br><span class="line">Receiving objects:   1% (2427/242690)</span><br><span class="line">Receiving objects:   1% (4762/242690), 972.00 KiB | 949.00 KiB/s</span><br><span class="line">Receiving objects:   2% (4854/242690), 972.00 KiB | 949.00 KiB/s</span><br><span class="line">Receiving objects:   3% (7281/242690), 1.38 MiB | 919.00 KiB/s</span><br><span class="line">Receiving objects:   3% (8998/242690), 1.82 MiB | 645.00 KiB/s</span><br><span class="line">Receiving objects:   4% (9708/242690), 1.82 MiB | 645.00 KiB/s</span><br><span class="line">Receiving objects:   4% (9778/242690), 1.82 MiB | 645.00 KiB/s</span><br><span class="line">Receiving objects:   5% (12135/242690), 1.82 MiB | 645.00 KiB/s</span><br><span class="line">... ...</span><br><span class="line">Receiving objects:  86% (209321/242690), 1.01 GiB | 2.08 MiB/s</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2042)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandWithCredentials(CliGitAPIImpl.java:1761)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.access$400(CliGitAPIImpl.java:72)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$1.execute(CliGitAPIImpl.java:442)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$2.execute(CliGitAPIImpl.java:655)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$1.call(RemoteGitImpl.java:153)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$1.call(RemoteGitImpl.java:146)</span><br><span class="line"> at hudson.remoting.UserRequest.perform(UserRequest.java:212)</span><br><span class="line"> at hudson.remoting.UserRequest.perform(UserRequest.java:54)</span><br><span class="line"> at hudson.remoting.Request$2.run(Request.java:369)</span><br><span class="line"> at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)</span><br><span class="line"> at java.util.concurrent.FutureTask.run(Unknown Source)</span><br><span class="line"> at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)</span><br><span class="line"> at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)</span><br><span class="line"> at java.lang.Thread.run(Unknown Source)</span><br><span class="line"> Suppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to dendevu2uvbw01</span><br><span class="line"> at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1743)</span><br><span class="line"> at hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:357)</span><br><span class="line"> at hudson.remoting.Channel.call(Channel.java:957)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.execute(RemoteGitImpl.java:146)</span><br><span class="line"> at sun.reflect.GeneratedMethodAccessor1074.invoke(Unknown Source)</span><br><span class="line"> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line"> at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line"> at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.invoke(RemoteGitImpl.java:132)</span><br><span class="line"> at com.sun.proxy.$Proxy124.execute(Unknown Source)</span><br><span class="line"> at hudson.plugins.git.GitSCM.retrieveChanges(GitSCM.java:1152)</span><br><span class="line"> at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1192)</span><br><span class="line"> at org.jenkinsci.plugins.workflow.steps.scm.SCMStep.checkout(SCMStep.java:124)</span><br><span class="line"> at org.jenkinsci.plugins.workflow.steps.scm.SCMStep$StepExecutionImpl.run(SCMStep.java:93)</span><br><span class="line"> at org.jenkinsci.plugins.workflow.steps.scm.SCMStep$StepExecutionImpl.run(SCMStep.java:80)</span><br><span class="line"> at org.jenkinsci.plugins.workflow.steps.SynchronousNonBlockingStepExecution.lambda$start$0(SynchronousNonBlockingStepExecution.java:47)</span><br><span class="line"> at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line"> at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line"> at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line"> at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line"> at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"> [Pipeline] &#125;</span><br><span class="line"> [Pipeline] // ws</span><br><span class="line"> [Pipeline] &#125;</span><br><span class="line"> [Pipeline] // node</span><br><span class="line"> [Pipeline] &#125;</span><br><span class="line"> [Pipeline] // stage</span><br><span class="line"> [Pipeline] &#125;</span><br><span class="line"> Failed in branch Windows build</span><br></pre></td></tr></table></figure><h2 id="java-io-IOException-error-24-Too-many-open-files"><a href="#java-io-IOException-error-24-Too-many-open-files" class="headerlink" title="java.io.IOException: error&#x3D;24, Too many open files"></a>java.io.IOException: error&#x3D;24, Too many open files</h2><p>Iâ€™m using a centos VM as Jenkins server, recently I have this problem â€œjava.io.IOException: error&#x3D;24, Too many open filesâ€, and run any Jenkins job will be failure.</p><ol><li>Run <code>ulimit -n</code> the default value on my machine is <code>1024</code>.</li><li>Run <code>ulimit -n 4096</code> to increase this value to <code>4096</code> solved my problem</li></ol><h3 id="Permanent-solution"><a href="#Permanent-solution" class="headerlink" title="Permanent solution"></a>Permanent solution</h3><p>Use your root user to change <code>etc/security/limits.conf</code> file as below:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jenkins      soft   nofile  4096</span><br><span class="line">jenkins      hard   nofile  8192</span><br></pre></td></tr></table></figure><p>Explanation</p><p>jenkins   â€“ a user&#x2F;group name<br>soft&#x2F;hard â€“ type of link. Note: soft link can be from 0 to hard link.<br>nofile    â€“ number of open files And the is value.</p><p>Log out then log in to your Jenkins server and use your ID <code>jenkins</code> to run <code>ulimit -a</code> command again.</p><p>If the output like below, Congrats, your change already take effect.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash-4.2$ <span class="built_in">id</span></span><br><span class="line">uid=990(jenkins) gid=984(jenkins) <span class="built_in">groups</span>=984(jenkins)</span><br><span class="line">bash-4.2$ <span class="built_in">ulimit</span> -a</span><br><span class="line"></span><br><span class="line">open files                      (-n) 4096</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>Refers to <a href="https://stackoverflow.com/questions/46065008/too-many-open-files-error-cant-open-jenkins-after-installing-many-plugins">https://stackoverflow.com/questions/46065008/too-many-open-files-error-cant-open-jenkins-after-installing-many-plugins</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•é€šè¿‡ Jenkins è¿›è¡Œèµ„æºçš„é”å®šå’Œé‡Šæ”¾</title>
      <link href="/2019/08/jenkins-lock-resource/"/>
      <url>/2019/08/jenkins-lock-resource/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸šåŠ¡åœºæ™¯"><a href="#ä¸šåŠ¡åœºæ™¯" class="headerlink" title="ä¸šåŠ¡åœºæ™¯"></a>ä¸šåŠ¡åœºæ™¯</h2><p>æ—¥å¸¸å·¥ä½œä¸­éœ€è¦åˆ‡æ¢åˆ°ä¸åŒå¹³å°ï¼ˆåŒ…æ‹¬ Linux, AIX, Windows, Solris, HP-UXï¼‰ä¸åŒçš„ç‰ˆæœ¬è¿›è¡Œå¼€å‘å’ŒéªŒè¯é—®é¢˜ï¼Œä½†æ˜¯ç”±äºè™šæ‹Ÿæœºæœ‰é™ï¼Œå¹¶ä¸èƒ½ä¿è¯æ¯ä¸ªå¼€å‘å’Œæµ‹è¯•éƒ½æœ‰æ‰€ä»¥å¹³å°çš„è™šæ‹Ÿæœºå¹¶ä¸”å®‰è£…äº†ä¸åŒçš„ç‰ˆæœ¬ï¼Œå› æ­¤å‡†å¤‡å„ç§å„æ ·çš„å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ã€‚</p><span id="more"></span><h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><p>å¯¹äºè¿™æ ·çš„éœ€æ±‚ï¼Œä¸€èˆ¬éƒ½ä¼šé¦–å…ˆæƒ³åˆ° Dockerï¼›å…¶æ¬¡æ˜¯ä» Artifactory å– Build ç„¶åé€šè¿‡ CI å·¥å…·è¿›è¡Œå®‰è£…ï¼›æœ€åä» Source Code è¿›è¡Œæ„å»ºç„¶åå®‰è£…ã€‚</p><ul><li><p>å…ˆè¯´ Dockerï¼Œç”±äºæˆ‘ä»¬æ‰€æ”¯æŒçš„å¹³å°ç¹å¤šï¼ŒåŒ…æ‹¬ Linux, AIX, Windows, Solris, HP-UX, Docker åªé€‚ç”¨äº Linux å’Œ Windowsï¼Œå› æ­¤ä¸èƒ½æ»¡è¶³è¿™æ ·çš„éœ€æ±‚ã€‚</p></li><li><p>ç”±äºå…¶ä»–åŸå› æˆ‘ä»¬çš„ Artifactory æš‚æ—¶è¿˜ä¸èƒ½ä½¿ç”¨ï¼Œæœ€ååªèƒ½é€‰æ‹©ç”¨ Source Code è¿›è¡Œæ„å»ºç„¶åè¿›è¡Œå®‰è£…ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½éœ€è¦è§£å†³é”å®šèµ„æºä»¥åŠé‡Šæ”¾èµ„æºçš„é—®é¢˜ã€‚å¦‚æœå½“å‰ç¯å¢ƒæœ‰äººæ­£åœ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™å°è™šæ‹Ÿæœºçš„èµ„æºåº”è¯¥è¢«é”ä½ï¼Œä¸å…è®¸ Jenkins å†å»è°ƒç”¨è¿™å°æ­£åœ¨ä½¿ç”¨çš„ nodeï¼Œä»¥ä¿è¯ç¯å¢ƒåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸è¢«ç ´åã€‚</p></li></ul><p>æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•é€šè¿‡ Jenkins Lockable Resources Plugin æ¥å®ç°èµ„æºçš„ä¸Šé”å’Œè§£é”ã€‚</p><h2 id="æ¼”ç¤º-Demo"><a href="#æ¼”ç¤º-Demo" class="headerlink" title="æ¼”ç¤º Demo"></a>æ¼”ç¤º Demo</h2><ol><li><p>è®¾ç½® Lockable Resources</p><ul><li>Jenkins -&gt; configuration -&gt; Lockable Resources Manager -&gt; Add Lockable Resource<br> <img src="/2019/08/jenkins-lock-resource/config-lock-resource.png" alt="æˆ‘è®¾ç½®äº†ä¸¤ä¸ª Resources "><br> è¿™é‡Œçš„ Labels æ˜¯ä½ çš„ node çš„ Labelï¼Œåœ¨ Jenkins -&gt; Nodes è®¾ç½®</li></ul></li><li><p>æŸ¥çœ‹ Lockable Resources èµ„æºæ± </p><p> <img src="/2019/08/jenkins-lock-resource/lock-resource-pool.png" alt="æ˜¾ç¤ºæˆ‘æœ‰ä¸¤ä¸ªèµ„æºå¯ç”¨ "></p></li><li><p>æµ‹è¯•é”èµ„æº</p><ul><li>è¿™é‡Œæˆ‘é…ç½®çš„æ˜¯å‚æ•°åŒ–ç±»å‹çš„ Jobï¼Œå¯ä»¥é€‰æ‹©ä¸åŒå¹³å°ï¼Œä¸åŒä»“åº“è¿›è¡Œæ„å»º<br> <img src="/2019/08/jenkins-lock-resource/build-with-parameters.png" alt=" Build With Parameters "> build-with-parameters</li><li>è¿è¡Œç¬¬ä¸€ä¸ª Job<br> <img src="/2019/08/jenkins-lock-resource/build-with-parameters-1.png" alt=" ç¬¬ä¸€ä¸ª Job å·²ç»è¿è¡Œ "></li><li>æŸ¥çœ‹å½“å‰å¯ç”¨èµ„æºæ•°é‡ Free resources &#x3D; 1ï¼Œçœ‹åˆ°å·²ç»è¢« #47 è¿™ä¸ª Job æ‰€ä½¿ç”¨<br> <img src="/2019/08/jenkins-lock-resource/lock-resource-pool-1.png" alt="å½“å‰å¯ç”¨èµ„æºæ•°ä¸º1"></li><li>ç»§ç»­è¿è¡Œç¬¬äºŒä¸ª Job<br> <img src="/2019/08/jenkins-lock-resource/build-with-parameters-2.png" alt=" ç¬¬äºŒä¸ª Job å·²ç»è¿è¡Œ "></li><li>æŸ¥çœ‹å½“å‰å¯ç”¨èµ„æºæ•°é‡ Free resources &#x3D; 0ï¼Œçœ‹åˆ°å·²ç»è¢« #48 è¿™ä¸ª Job æ‰€ä½¿ç”¨<br> <img src="/2019/08/jenkins-lock-resource/lock-resource-pool-2.png" alt="å½“å‰å¯ç”¨èµ„æºæ•°ä¸º0"></li><li>æœ€å…³é”®æ˜¯è¿™ä¸€æ­¥ï¼Œå¦‚æœç»§ç»­è¿è¡Œç¬¬ä¸‰ä¸ª Jobï¼Œæ˜¯å¦èƒ½å¤Ÿè¢«ç»§ç»­è¡Œå‘¢<br> <img src="/2019/08/jenkins-lock-resource/build-with-parameters-3.png" alt=" ç¬¬ä¸‰ä¸ª Job å·²ç»è¿è¡Œ "></li><li>å¯ä»¥çœ‹åˆ°è¿™ä¸ªä»»åŠ¡æ²¡æœ‰å¼€å§‹æ‰§è¡Œï¼Œçœ‹ä¸‹ log æ˜¯å¦çœŸçš„æ²¡æœ‰è¢«æ‰§è¡Œã€‚é€šè¿‡æ—¥å¿—å‘ç°ï¼Œå½“å‰æ­£åœ¨ç­‰å¾…å¯ç”¨çš„èµ„æº<br> <img src="/2019/08/jenkins-lock-resource/build-with-parameters-3-log.png" alt=" ç¬¬ä¸‰ä¸ª Job log "></li></ul></li><li><p>æµ‹è¯•é‡Šæ”¾é”</p><ul><li>ç°åœ¨é‡Šæ”¾ä¸€ä¸ªèµ„æºï¼Œçœ‹ä¸‹ç¬¬ä¸‰ä¸ª Job æ˜¯å¦èƒ½æ‹¿åˆ°èµ„æºï¼Œå¹¶ä¸”æ‰§è¡Œ<br> <img src="/2019/08/jenkins-lock-resource/unlock-job-1.png" alt=" é‡Šæ”¾ Job 1 é” "></li><li>ä»ä¸‹å›¾å¯ä»¥çœ‹åˆ° ç¬¬ä¸‰ä¸ª Job å·²ç»è¿è¡ŒæˆåŠŸäº†<br> <img src="/2019/08/jenkins-lock-resource/unlock-job-1-after.png" alt=" ç¬¬ä¸‰ä¸ª Job è¿è¡Œ "></li></ul></li></ol><h2 id="Jenkins-pipeline-ä»£ç "><a href="#Jenkins-pipeline-ä»£ç " class="headerlink" title="Jenkins pipeline ä»£ç "></a>Jenkins pipeline ä»£ç </h2><p>æ•´ä¸ª pipeline æœ€å…³é”®çš„éƒ¨åˆ†å°±æ˜¯å¦‚ä½•ä¸Šé”å’Œé‡Šæ”¾ï¼Œè¿™é‡Œæ˜¯é€šè¿‡ lock å’Œ input message æ¥å®ç°ã€‚</p><p>å½“å‰ Job åªè¦ç”¨æˆ·ä¸ç‚¹å‡» Yesï¼Œå°±ä¼šä¸€ç›´å¤„äºæ²¡æœ‰å®Œæˆçš„çŠ¶æ€ï¼Œé‚£ä¹ˆçš„å®ƒçš„é”ä¼šä¸€ç›´ç”Ÿæ•ˆä¸­ã€‚ç›´åˆ°ç‚¹å‡» Yesï¼Œ Job ç»“æŸï¼Œé”ä¹Ÿå°±é‡Šæ”¾äº†ã€‚</p><p>å…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢çš„ Jenkinsfileã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent &#123;</span><br><span class="line">        node &#123;</span><br><span class="line">            label <span class="string">&#x27;PreDevENV&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    options &#123;</span><br><span class="line">        lock(label: <span class="string">&#x27;PreDevENV&#x27;</span>, quantity: 1)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    parameters &#123;</span><br><span class="line">        choice(</span><br><span class="line">            name: <span class="string">&#x27;platform&#x27;</span>,</span><br><span class="line">            choices: [<span class="string">&#x27;Linux&#x27;</span>, <span class="string">&#x27;AIX&#x27;</span>, <span class="string">&#x27;Windows&#x27;</span>, <span class="string">&#x27;Solris&#x27;</span>, <span class="string">&#x27;HP-UX&#x27;</span>],</span><br><span class="line">            description: <span class="string">&#x27;Required: which platform do you want to build&#x27;</span>)</span><br><span class="line">        choice(</span><br><span class="line">            name: <span class="string">&#x27;repository&#x27;</span>,</span><br><span class="line">            choices: [<span class="string">&#x27;repo-0.1&#x27;</span>, <span class="string">&#x27;repo-1.1&#x27;</span>, <span class="string">&#x27;repo-2.1&#x27;</span>, <span class="string">&#x27;repo-3.1&#x27;</span>, <span class="string">&#x27;repo-4.1&#x27;</span>],</span><br><span class="line">            description: <span class="string">&#x27;Required: which repository do you want to build&#x27;</span>)</span><br><span class="line">        string(</span><br><span class="line">            name: <span class="string">&#x27;branch&#x27;</span>,</span><br><span class="line">            defaultValue: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            description: <span class="string">&#x27;Required: which branch do you want to build&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&#x27;git clone&#x27;</span>)&#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;git clone source&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;start build&#x27;</span>)&#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;start build&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;install build&#x27;</span>)&#123;</span><br><span class="line">            steps&#123;</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;installing&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;unlock your resource&#x27;</span>)&#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                input message: <span class="string">&quot;do you have finished?&quot;</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;Yes, I have finished&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨å¤§å‹ä¼ä¸šé‡Œç»´æŠ¤å¤šåˆ†æ”¯æµæ°´çº¿</title>
      <link href="/2019/08/jenkins-multi-branch-pipeline/"/>
      <url>/2019/08/jenkins-multi-branch-pipeline/</url>
      
        <content type="html"><![CDATA[<p>Jenkins æ˜¯ DevOps é¢†åŸŸé‡Œéå¸¸å¥½çš„ CI&#x2F;CD å·¥å…·ï¼Œå®ƒå‡­å€Ÿå…¶ç‹¬ç‰¹çš„åŠŸèƒ½ï¼Œå‡ ä¹å¯ä»¥æ»¡è¶³ä½ ä¸€åˆ‡çš„çš„ä¸šåŠ¡è¦æ±‚ã€‚å…¶ä¸­ä¸€ä¸ªç‹¬ç‰¹çš„åŠŸèƒ½æ˜¯å¤šåˆ†æ”¯æµæ°´çº¿(Multi-branch æµæ°´çº¿)ï¼Œå¯ä»¥åŠ¨æ€é…ç½®æµæ°´çº¿ã€‚ä½†æ˜¯ï¼Œéšç€å…¬å¸çš„å‘å±•ï¼Œå•ç‹¬çš„å¤šåˆ†æ”¯æµæ°´çº¿å¹¶ä¸èƒ½å®Œå…¨æ»¡è¶³ä½ çš„æ‰€æœ‰éœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠå¤§å‹ä¼ä¸šæ—¶ï¼Œä½ éœ€è¦è€ƒè™‘æµæ°´çº¿çš„é›†ä¸­ç®¡ç†ï¼Œæ²»ç†ï¼Œç¨³å®šæ€§ï¼Œé™åˆ¶å’Œå®‰å…¨æ€§ç­‰å…¶ä»–äº‹é¡¹ã€‚å› æ­¤å¯¹äºå…·æœ‰ Jenkins æµæ°´çº¿çš„å¤§è§„æ¨¡ CI&#x2F;CD ç¯å¢ƒï¼Œä½ éœ€è¦æ·»åŠ ä¹‹å‰æ²¡æœ‰æƒ³åˆ°çš„æ›´å¤šåŠŸèƒ½ã€‚</p><span id="more"></span><p><img src="/2019/08/jenkins-multi-branch-pipeline/cover.jpeg" alt="jenkins multi branch"></p><h2 id="åŠ¨æ€é…ç½®æµæ°´çº¿"><a href="#åŠ¨æ€é…ç½®æµæ°´çº¿" class="headerlink" title="åŠ¨æ€é…ç½®æµæ°´çº¿"></a>åŠ¨æ€é…ç½®æµæ°´çº¿</h2><p>å½“ä¸€ä¸ªå¼€å‘äººå‘˜åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯å¹¶å°†å…¶æ¨é€åˆ°è¿œç¨‹ä»£ç ä»“åº“æ—¶ï¼ŒJenkins ä¼šä¸ºè¿™ä¸ªæ–°åˆ†æ”¯åŠ¨æ€åˆ›å»ºæµæ°´çº¿ã€‚æ ¹æ®ä»£ç ä»“åº“ï¼Œç”šè‡³ä¹Ÿå¯ä»¥ä½œä¸ºåŠ¨æ€åˆ›å»º Pull Request æµæ°´çº¿ã€‚è¿™ä¸ªåŠ¨æ€åŠŸèƒ½åœ¨ä½¿ç”¨ Feature åˆ†æ”¯æˆ–å…¶ä»–ç±»ä¼¼åŠŸèƒ½çš„å›¢é˜Ÿä¸­éå¸¸æœ‰ç”¨ï¼Œç”±äºæœ¬æ–‡çš„ä¸»é¢˜ä¸æ˜¯å¤šåˆ†æ”¯æµæ°´çº¿ï¼Œä½ å¯ä»¥åœ¨<a href="https://jenkins.io/doc/tutorials/build-a-multibranch-pipeline-project/">ç«¯åˆ°ç«¯å¤šåˆ†æ”¯æµæ°´çº¿é¡¹ç›®åˆ›å»º</a>ä¸­æ‰¾åˆ°è¯¦ç»†ä¿¡æ¯å’Œä¸€äº›ç¤ºä¾‹ã€‚</p><h2 id="æµæ°´çº¿å³ä»£ç "><a href="#æµæ°´çº¿å³ä»£ç " class="headerlink" title="æµæ°´çº¿å³ä»£ç "></a>æµæ°´çº¿å³ä»£ç </h2><p>åœ¨å¤šåˆ†æ”¯æµæ°´çº¿ä¸­ï¼Œè„šæœ¬å­˜å‚¨åœ¨é¡¹ç›®ä»£ç ä»“åº“ä¸­ï¼Œè¿™å°±æ˜¯â€œæµæ°´çº¿å³ä»£ç â€çš„æ¦‚å¿µã€‚æ­¤å¤–ï¼Œå½“ä½ æ‹¥æœ‰å°å‹å¼€å‘äººå‘˜å›¢é˜Ÿæˆ–é¡¹ç›®æ²¡æœ‰å¤§é‡åˆ†æ”¯æ—¶ï¼Œå®ƒéå¸¸æœ‰ç”¨ã€‚è¿™æ ·ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹æµæ°´çº¿ï¼Œå°†æ›´æ”¹æ¨é€åˆ°åˆ†æ”¯ï¼Œå¹¶ç«‹å³çœ‹åˆ°æ›´æ”¹ç”Ÿæ•ˆï¼Œä½†å¯¹äºæ‹¥æœ‰æ•°ç™¾æˆ–æ•°åƒåæ‹¥æœ‰å¤§é‡é¡¹ç›®çš„å¼€å‘äººå‘˜çš„å¤§å‹ä¼ä¸šè€Œè¨€ï¼Œè¿™ç§æ–¹æ¡ˆå°±å®Œæˆä¸å¯è¡Œäº†ã€‚</p><h2 id="é›†ä¸­å¼åº“"><a href="#é›†ä¸­å¼åº“" class="headerlink" title="é›†ä¸­å¼åº“"></a>é›†ä¸­å¼åº“</h2><p>å½“ä½ çš„å›¢é˜Ÿæˆ–é¡¹ç›®å¢åŠ æ—¶ï¼Œæ˜¯æ—¶å€™è€ƒè™‘ä¸€ç§æ–¹æ³•ï¼Œæ¯”å¦‚é€šè¿‡å…±äº«çš„çš„æ–¹å¼åº”è¯¥åœ¨æ‰€æœ‰é¡¹ç›®ä¸­ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œè¿™ç§â€œé›†ä¸­å¼åº“â€å˜å¾—éå¸¸å…³é”®ï¼Œå› ä¸ºéšç€è§„æ¨¡çš„æ‰©å¤§ï¼Œæµæ°´çº¿ä¸­å‡ºç°äº†æ–°çš„è¦æ±‚æˆ–å˜åŒ–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰‹åŠ¨æ›´æ”¹æ¯ä¸ªæµæ°´çº¿æˆ–è„šæœ¬å¯¹ç®¡ç†å‘˜æ¥è¯´å°†æ˜¯ä¸€åœºå™©æ¢¦ã€‚å› æ­¤ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªåœ°æ–¹è¿›è¡Œæ›´æ”¹å¹¶ä¸”æ¯ä¸ªæµæ°´çº¿éƒ½å¾—åˆ°æ›´æ–°ï¼Œé‚£ä¹ˆæ‹¥æœ‰è¯¥é›†ä¸­å¼åº“å°†æ›´åŠ å®ç”¨ã€‚è¿™æ˜¯ Jenkins <a href="https://jenkins.io/doc/book/pipeline/shared-libraries/">å…±äº«åº“</a>æ¦‚å¿µçš„ç”¨æ­¦ä¹‹åœ°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œä½ å¯ä»¥è®¿é—®<a href="https://jenkins.io/doc/book/pipeline/shared-libraries/">è¯¥ç«™ç‚¹</a>ã€‚</p><p>å³ä½¿ä½ åªæœ‰ä¸€ä¸ªæµæ°´çº¿ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨é›†ä¸­å¼åº“ã€‚</p><h2 id="æ²»ç†ä¸ç¨³å®š"><a href="#æ²»ç†ä¸ç¨³å®š" class="headerlink" title="æ²»ç†ä¸ç¨³å®š"></a>æ²»ç†ä¸ç¨³å®š</h2><p>å¦‚æœä½ çš„å›¢é˜Ÿæœ‰å¯¹ CI&#x2F;CD ä¸€å®šäº†è§£çš„å¼€å‘äººå‘˜ï¼Œå¹¶ä¸”ä½ ç¡®ä¿¡ä»–ä»¬ä¸ä¼šåšå‡ºé‡å¤§æ›´æ”¹æˆ–ç¼–å†™è„šæœ¬é”™è¯¯å¯¼è‡´å½±å“ç¯å¢ƒçš„ç¨³å®šæ€§ï¼Œé‚£ä¹ˆå°†æµæ°´çº¿è„šæœ¬æ”¾åœ¨ä»£ç ä¸­æ˜¯å¾ˆå¥½çš„ã€‚ä½†æ˜¯ï¼Œä½ çœŸçš„ç¡®å®šå—ï¼Ÿ</p><p>æœ‰äººå¾ˆå¯èƒ½ä¼šæ„å¤–åˆ é™¤æµæ°´çº¿æ–‡ä»¶æˆ–è€…å¯èƒ½å‡ºç°å°é”™è¯¯ï¼Œè¿™äº›å°é”™è¯¯éƒ½ä¼šå½±å“ CI&#x2F;CD çš„ç¨³å®šæ€§ã€‚å¦‚æœä½ åœ¨æ—©æœŸå‘ç°è¿™äº›é”™è¯¯æ—¶å¾ˆå®¹æ˜“è§£å†³è¿™äº›é”™è¯¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¿™äº›å¾®å°çš„å˜åŒ–æˆ–é”™è¯¯å°†å¯èƒ½æ¯”ä½ æƒ³è±¡çš„æ›´ä¸¥é‡çš„å½±å“ CI&#x2F;CDï¼Œå®ƒå°†è¢«ä¼ æ’­åˆ°ä¸åŒé¡¹ç›®ä¸­çš„æ‰€æœ‰åˆ†æ”¯æˆ– tagï¼Œè¿™ä¼šå˜å¾—å¾ˆéš¾è§£å†³ã€‚</p><p>ä½ éœ€è¦å°†æ­£ç¡®çš„æµæ°´çº¿è„šæœ¬æ¨é€åˆ°æ‰€æœ‰åˆ†æ”¯å’Œ&#x2F;æˆ–ä»£ç ä»“åº“ï¼Œæˆ–æ˜¯è¦æ±‚æ¯ä¸ªå¼€å‘äººå‘˜æå–æœ€æ–°çš„è„šæœ¬ï¼Œè¿™ç§ç±»å‹çš„é—®é¢˜é›†ä¸­å¼åº“è¿™ç§æ›´é«˜çº§çš„æ–¹å¼æ¥è§£å†³ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä½ çš„ç¯å¢ƒä¼šå› ä¸ºæœ‰äººå¯èƒ½ä¼šåˆ é™¤ Jenkins æ–‡ä»¶æˆ–è¾“å…¥ä¸€äº›æ‹¼å†™é”™è¯¯å¸¦æ¥é£é™©ã€‚</p><h2 id="è¿œç¨‹æ–‡ä»¶æ’ä»¶"><a href="#è¿œç¨‹æ–‡ä»¶æ’ä»¶" class="headerlink" title="è¿œç¨‹æ–‡ä»¶æ’ä»¶"></a>è¿œç¨‹æ–‡ä»¶æ’ä»¶</h2><p>ä¸ºäº†æ¶ˆé™¤ä¸å¿…è¦çš„æ›´æ”¹çš„é£é™©å¹¶é™ä½ä½¿ç”¨çš„åº“çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä»¥æŸç§æ–¹å¼å°†æµæ°´çº¿è„šæœ¬ä¸é¡¹ç›®&#x2F;ä»£ç ä»£ç ä»“åº“åˆ†å¼€ï¼ŒåŒæ—¶ä»ç»§ç»­ä½¿ç”¨å¤šåˆ†æ”¯æµæ°´çº¿åŠŸèƒ½ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æœ‰<a href="https://plugins.jenkins.io/remote-file">è¿œç¨‹æ–‡ä»¶æ’ä»¶</a>ã€‚</p><p>è¿™ä¸ªæ’ä»¶ä½¿å¤šåˆ†æ”¯æµæ°´çº¿èƒ½å¤Ÿä»å…¶ä»–ä»£ç ä»“åº“è¿è¡Œ&#x2F;åŠ è½½æµæ°´çº¿è„šæœ¬ï¼Œè€Œä¸æ˜¯å°†å®ƒä»¬æ”¾åœ¨é¡¹ç›®&#x2F;ä»£ç ä»£ç ä»“åº“ä¸­ï¼Œé€šè¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œä½ å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªå•ç‹¬çš„ä»£ç ä»“åº“ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æ”¾ç½®æ‰€æœ‰æµæ°´çº¿è„šæœ¬ï¼Œå¹¶ä¸”åªèƒ½ä¸ºä½ è‡ªå·±æä¾›è®¿é—®æƒé™ã€‚è¿™æ ·ï¼Œä½ å°†æ‹¥æœ‰ä¸é›†ä¸­å¼åº“ç›¸åŒçš„é›†ä¸­å¼æµæ°´çº¿è„šæœ¬ä»£ç ä»“åº“ã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥å°†æµæ°´çº¿è„šæœ¬å­˜å‚¨åœ¨é›†ä¸­å¼åº“æœ¬èº«ä¸­ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½çš„å¥½å¤„æ˜¯é™¤äº†æœ‰è®¿é—®æƒé™çš„äººä¹‹å¤–ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿåœ¨æµæ°´çº¿è„šæœ¬ä¸­è¿›è¡Œæ›´æ”¹ã€‚ä½ åœ¨é›†ä¸­æµæ°´çº¿è„šæœ¬ä¸­æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½å°†å½±å“ä½¿ç”¨è¯¥è„šæœ¬æ–‡ä»¶çš„æ‰€æœ‰å¤šåˆ†æ”¯æµæ°´çº¿ã€‚è¿™æ ·ï¼Œä½ æ— éœ€ç­‰å¾…æ‰€æœ‰å¼€å‘äººå‘˜è·å–æ›´æ–°ç‰ˆæœ¬æˆ–å°†è„šæœ¬æ¨é€åˆ°æ‰€æœ‰ä»£ç ä»“åº“ä¸Šçš„æ‰€æœ‰åˆ†æ”¯ã€‚</p><p>å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¦‚æœä½ å°†é›†ä¸­å¼æµæ°´çº¿è„šæœ¬æ”¾å…¥ BitBucket æˆ– GitHub ç­‰ä»£ç ä»“åº“ä¸­ï¼Œä½ è¿˜å°†æ‹¥æœ‰ä»£ç å®¡æŸ¥åŠŸèƒ½ã€‚è¿™æ ·ï¼Œä½ å¯ä»¥ä¸å…¶ä»–äººå…±äº«ä»£ç ä»“åº“ï¼ŒåŒæ—¶ä»å¯é™åˆ¶æˆ–æŸ¥çœ‹å…¶ä»–äººæ‰€åšçš„æ›´æ”¹ã€‚</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>åœ¨å¤§å‹ä¼ä¸šä¸­åˆ›å»º CI&#x2F;CD æµæ°´çº¿å¹¶ä¸å®¹æ˜“ï¼Œä½ éœ€è¦è€ƒè™‘æ²»ç†ï¼Œé™åˆ¶ï¼Œç¨³å®šæ€§å’Œå®‰å…¨æ€§ç­‰æ¦‚å¿µã€‚åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ï¼Œå€ŸåŠ© Jenkins çš„å…¶ä»–åŠŸèƒ½ï¼Œ<a href="https://plugins.jenkins.io/remote-file">Remote File Plugin</a> æä¾›äº†ä¸€ä¸ªç‹¬ç‰¹çš„åŠŸèƒ½ï¼Œç”¨äºé›†ä¸­ï¼Œç»´æŠ¤å’Œå…±äº«æµæ°´çº¿è„šæœ¬ã€‚</p><p>æœ‰å…³æ’ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œä½ å¯ä»¥è®¿é—®æ’ä»¶çš„ Wiki é¡µé¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git branching strategy</title>
      <link href="/2019/07/git-branching-strategy/"/>
      <url>/2019/07/git-branching-strategy/</url>
      
        <content type="html"><![CDATA[<p>éšç€è¿‘äº›å¹´ Git çš„å¿«é€Ÿæ™®åŠï¼Œæƒ³å¿…æ— è®ºå¼€å‘è¿˜æ˜¯æµ‹è¯•åœ¨æ—¥å¸¸å·¥ä½œä¸­éƒ½è¦ç”¨åˆ° Gitã€‚</p><p>å¯¹äºåˆšåˆšæ¥è§¦çš„ Git çš„äººæ¥è¯´ï¼Œæ‰“å¼€ä¸€ä¸ª Git ä»“åº“ï¼Œé¢å¯¹åå‡ ä¸ªç”šè‡³å‡ åä¸ªåˆ†æ”¯æ—¶ï¼Œæœ‰çš„äººä¸ç†è§£ï¼Œæœ‰çš„äººäº‘é‡Œé›¾é‡Œï¼Œä¸ºä»€ä¹ˆä¼šåˆ›å»ºè¿™ä¹ˆå¤šåˆ†æ”¯ï¼Ÿ</p><p>å¯¹äºå¼€å‘éœ€è¦çŸ¥é“å¦‚ä½•é€šè¿‡ Git åˆ†æ”¯æ¥ç®¡ç†äº§å“çš„å¼€å‘å’Œå‘å¸ƒï¼Œå°¤å…¶æ˜¯å¯¹äºå¤§å‹çš„é¡¹ç›®çš„å¼€å‘ï¼Œåªæœ‰ master å’Œ develop åˆ†æ”¯æ˜¯æ— æ³•æ»¡è¶³äº§å“ç®¡ç†å’Œå‘å¸ƒè¦æ±‚çš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…¶ä»–åˆ†æ”¯ä»¥ä¾¿æ›´å¥½çš„ç®¡ç†äº§å“ä»£ç ã€‚</p><p>å¯¹äºæµ‹è¯•æ›´å¤šçš„äº†è§£å¼€å‘è¿‡ç¨‹åŠåˆ†æ”¯ç®¡ç†æœ‰åŠ©äºæµ‹è¯•åŠå¼€å±•è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥é’ˆå¯¹ä¸åŒçš„åˆ†æ”¯è¿›è¡Œæµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™ï¼Œåœ¨ä»¥åå›å½’æµ‹è¯•é‡Œå¯ä»¥é€šè¿‡åˆ†æ”¯æˆ–æ˜¯ tag æ‰¾åˆ°å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p><span id="more"></span><h2 id="Git-åˆ†æ”¯ç­–ç•¥"><a href="#Git-åˆ†æ”¯ç­–ç•¥" class="headerlink" title="Git åˆ†æ”¯ç­–ç•¥"></a>Git åˆ†æ”¯ç­–ç•¥</h2><p>è¿™æ˜¯ä¸€ä¸ªå¤§å‹çš„é¡¹ç›®çš„ Git åˆ†æ”¯ç®¡ç†ç­–ç•¥ï¼Œäº†è§£è¿™å¼ å›¾å¯ä»¥æ¶µç›– 99% çš„äº§å“éœ€æ±‚ã€‚</p><p><img src="/2019/07/git-branching-strategy/diagram.png" alt="å¤§å‹é¡¹ç›®çš„ Git åˆ†æ”¯ç­–ç•¥å›¾"></p><p>ä¸Šé¢è¿™å¼ å›¾å¤§ä½“ä¸Šåˆ†ä¸º master, hotfix, release, develop åˆ†æ”¯ï¼š</p><ul><li><p>master - åªç”¨äºå­˜æ”¾ç¨³å®šç‰ˆæœ¬çš„æäº¤ï¼Œä¸”åªé™äº merge æ“ä½œã€‚æ¯æ¬¡å‘å¸ƒæˆåŠŸåï¼Œè¦å°† release åˆ†æ”¯çš„ä»£ç  merge åˆ° master å’Œ develop åˆ†æ”¯ï¼Œå¹¶ä¸”åœ¨ master ä¸Šæ‰“ä¸Šç›¸åº”çš„ tagï¼Œå¦‚å›¾é‡Œçš„ v1.1, v1.1.01 ç­‰ã€‚</p></li><li><p>develop - å¼€å‘åˆ†æ”¯æ˜¯æ‰€æœ‰å¼€å‘è€…æœ€å¸¸ç”¨çš„åˆ†æ”¯ï¼Œå½“å‰çš„ Bug å’Œ Features éƒ½éœ€è¦ä¿®å¤åˆ°è¿™ä¸ªåˆ†æ”¯ä¸Šé¢å»ã€‚éœ€è¦æ¯æ¬¡åˆ›å»º bugfix æˆ– feature ç±»å‹çš„åˆ†æ”¯ï¼Œåˆ›å»º Pull Request è¿›è¡Œä»£ç  reviewï¼Œç„¶åæ‰èƒ½ merge åˆ†æ”¯åˆ° develop åˆ†æ”¯ä¸Šã€‚</p></li><li><p>release - å‘å¸ƒåˆ†æ”¯æ˜¯åœ¨äº§å“ code freeze ååˆ›å»ºçš„ï¼Œ è¿™æ—¶å€™æµ‹è¯•è¦å¼€å§‹å¤§è§„æ¨¡çš„æµ‹è¯•äº†ï¼Œæ–°åˆ›å»ºçš„ release åˆ†æ”¯æ˜¯ä¸å…è®¸å¼€å‘å†å¾€é‡Œé¢æ·»åŠ æœ‰å…³ feature çš„ä»£ç ï¼Œåªæœ‰æµ‹è¯•å‘ç° bug å¹¶è¢«å¼€å‘ä¿®å¤çš„ä»£ç æ‰å…è®¸é€šè¿‡ Pull Request çš„æ–¹å¼ merge åˆ° release åˆ†æ”¯é‡Œã€‚å¦‚æœå¼€å‘è¦æäº¤ feature çš„ä»£ç åªèƒ½æäº¤åˆ° develop åˆ†æ”¯é‡Œã€‚ç­‰åˆ°äº§å“æˆåŠŸå‘å¸ƒåä¼šå°† release åˆ†æ”¯ merge åˆ° master åˆ†æ”¯å¹¶æ‰“ä¸Šç›¸åº”çš„ tag ï¼ˆç‰ˆæœ¬å·ï¼‰ï¼Œè¿˜è¦å°† release åˆ†æ”¯ merge åˆ° develop åˆ†æ”¯ã€‚</p></li><li><p>develop - å¼€å‘åˆ†æ”¯æ˜¯æ‰€æœ‰å¼€å‘è€…æœ€å¸¸ç”¨çš„åˆ†æ”¯ï¼Œå½“å‰çš„ Bug å’Œ Features éƒ½éœ€è¦ä¿®å¤åˆ°è¿™ä¸ªåˆ†æ”¯ä¸Šé¢å»ã€‚</p></li></ul><p>è¿™ä¸ªå›¾æœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ul><li>hotfix åˆ†æ”¯æ˜¯ä»æœ€æ–°çš„ hotfix åˆ†æ”¯ä¸Šåˆ›å»ºçš„</li><li>hotfix åˆ†æ”¯å‘å¸ƒåå°†ä¼šåˆå¹¶åˆ° develop åˆ†æ”¯</li><li>release åˆ†æ”¯æ˜¯ä» develop åˆ†æ”¯ä¸Šåˆ›å»ºçš„</li><li>release åˆ†æ”¯å‘å¸ƒåå°†ä¼šåˆå¹¶åˆ° develop å’Œ master åˆ†æ”¯</li><li>release åˆ†æ”¯ä¸Šå‘ç°çš„ç¼ºé™·å°†ä¼šä¿®å¤åˆ° release åˆ†æ”¯</li></ul><p>å¦‚æœä½ æ˜¯é‚£ 1% ä¸èƒ½æ»¡è¶³çš„äº§å“éœ€æ±‚ï¼Œæ¬¢è¿ç•™è¨€ã€‚</p><blockquote><p>ç›¸å…³é˜…è¯»ï¼š<a href="https://shenxianpeng.github.io/2021/05/branch-naming-convention/">åˆ†æ”¯å‘½åçº¦å®š</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Branch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡ Jenkins æ¥æäº¤ä¿®æ”¹çš„ä»£ç  git push by Jenkins</title>
      <link href="/2019/07/git-push-by-jenkins/"/>
      <url>/2019/07/git-push-by-jenkins/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æŒç»­é›†æˆä¸­ï¼Œä½ å¯èƒ½éœ€è¦é€šè¿‡ Jenkins æ¥ä¿®æ”¹ä»£ç ï¼Œå¹¶ä¸”å°†ä¿®æ”¹åçš„ä»£ç æäº¤åˆ°Gitä»“åº“é‡Œã€‚æ€ä¹ˆåšå‘¢ï¼Ÿæœ€æ–¹ä¾¿çš„åšæ³•è¿˜æ˜¯ Jenkins æä¾›å¯¹åº”çš„æ’ä»¶ï¼Œä½†æ˜¯å¾ˆé—æ†¾æˆ‘æ²¡æ‰¾åˆ°åˆé€‚çš„ã€‚å¦å¤–æˆ‘ä¹Ÿè§‰å¾—é€šè¿‡è„šæœ¬çš„æ–¹å¼æ¥å®ç°ä¼šæ›´åŠ ç¨³å®šï¼Œä¸ç”¨æ‹…å¿ƒ Jenkins ä»¥åŠæ’ä»¶å‡çº§å¸¦æ¥æ½œåœ¨ä¸å¥½ç”¨çš„å¯èƒ½ã€‚</p><span id="more"></span><p>ä»¥ä¸‹ <code>pipeline</code> ç‰‡æ®µä¾›å‚è€ƒä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// This pipeline is used <span class="keyword">for</span> bumping build number</span><br><span class="line"></span><br><span class="line">pipeline &#123;</span><br><span class="line"></span><br><span class="line">    environment &#123;</span><br><span class="line">        MYGIT = credentials(<span class="string">&quot;d1cbab74-823d-41aa-abb7&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    stages &#123;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;Git clone repo&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;git clone -b develop --depth 1 https://$MYGIT_USR:&quot;$MYGIT_PSW&quot;@github.com/shenxianpeng/blog.git&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;Change code stage&#x27;</span>)&#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;Git push to remote repo&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;&#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">                cd blog</span></span><br><span class="line"><span class="string">                git add .</span></span><br><span class="line"><span class="string">                git commit -m &quot;Bld # 1001&quot;</span></span><br><span class="line"><span class="string">                git push https://$MYGIT_USR:&quot;$MYGIT_PSW&quot;@github.com/shenxianpeng/blog.git --all&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢æˆ‘æ‰€é‡åˆ°æœ€å¤§çš„å‘ï¼Œæˆ‘ä¹‹å‰è„šæœ¬æ˜¯è¿™æ ·å†™çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">stage(<span class="string">&#x27;Git push to remote&#x27;</span>) &#123;</span><br><span class="line"></span><br><span class="line">    // not works script</span><br><span class="line"></span><br><span class="line">    steps &#123;</span><br><span class="line">        sh <span class="string">&#x27;cd blog&#x27;</span></span><br><span class="line">        sh <span class="string">&#x27;git add .&#x27;</span></span><br><span class="line">        sh <span class="string">&#x27;git commit -m &quot;$&#123;JIRA_NO&#125; Bld # $&#123;BUILD_NO&#125;&quot;&#x27;</span></span><br><span class="line">        sh <span class="string">&#x27;git push https://$MYGIT_USR:&quot;$MYGIT_PSW&quot;@github.com/shenxianpeng/blog.git --all&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æœ€åä¸€ä¸ªé˜¶æ®µæäº¤ä»£ç æ—¶ï¼Œshell è„šæœ¬ä¸èƒ½ä½¿ç”¨å•å¼•å· â€˜â€™ï¼Œè¦ä½¿ç”¨ä¸‰å¼•å·æ‰è¡Œâ€™â€™â€™ â€˜â€™â€™ã€‚æˆ‘åœ¨è¿™é‡ŒèŠ±äº†å¾ˆå¤šæ—¶é—´ï¼Œä¸€ç›´æ‰¾ä¸åˆ°é—®é¢˜æ‰€åœ¨ï¼Œå› ä¸ºæˆ‘åœ¨ä¸Šé¢çš„shellè„šæœ¬ä½¿ç”¨çš„æ—¶å€™ç”¨å•å¼•å· â€˜â€™ å¯ä»¥æ­£å¸¸ git clone ä»£ç ï¼Œä½†åœ¨æäº¤ä»£ç æ—¶ä¸è¡Œï¼Œæœ€åæˆ‘ Jenkins çš„ Pipeline Syntax ç”Ÿæˆçš„è„šæœ¬ï¼Œæäº¤ä»£ç æˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Execute sudo without password</title>
      <link href="/2019/07/execute-sudo-without-password/"/>
      <url>/2019/07/execute-sudo-without-password/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ Jenkins pipeline çš„æ—¶å€™ï¼Œåœ¨ Linux éœ€è¦ç”¨ root æ¥æ‰§è¡Œï¼Œæˆ‘æƒ³é€šè¿‡ Jenkins pipeline çš„è¯­æ³•æ¥è§£å†³ï¼Œä½†æ˜¯åªæ‰¾åˆ°è¿™ç§æ–¹å¼ï¼š<a href="https://jenkins.io/doc/pipeline/steps/ssh-steps/">SSH Pipeline Steps</a></p><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">def remote = [:]</span><br><span class="line">remote.name = <span class="string">&#x27;test&#x27;</span></span><br><span class="line">remote.host = <span class="string">&#x27;test.domain.com&#x27;</span></span><br><span class="line">remote.user = <span class="string">&#x27;root&#x27;</span></span><br><span class="line">remote.password = <span class="string">&#x27;password&#x27;</span></span><br><span class="line">remote.allowAnyHosts = <span class="literal">true</span></span><br><span class="line">stage(<span class="string">&#x27;Remote SSH&#x27;</span>) &#123;</span><br><span class="line">    sshCommand remote: remote, <span class="built_in">command</span>: <span class="string">&quot;ls -lrt&quot;</span></span><br><span class="line">    sshCommand remote: remote, <span class="built_in">command</span>: <span class="string">&quot;for i in &#123;1..5&#125;; do echo -n \&quot;Loop \$i \&quot;; date ; sleep 1; done&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">* <span class="built_in">command</span></span><br><span class="line">    * Type: String</span><br><span class="line">* dryRun (optional)</span><br><span class="line">    * Type: boolean</span><br><span class="line">* failOnError (optional)</span><br><span class="line">    * Type: boolean</span><br><span class="line">* remote (optional)</span><br><span class="line">    * Nested Choice of Objects</span><br><span class="line">* sudo (optional)</span><br><span class="line">    * Type: boolean</span><br></pre></td></tr></table></figure><p>ä» example æ¥çœ‹éœ€è¦æä¾›çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œå¾ˆå¤šå‚æ•°æˆ‘å·²ç»åœ¨ Pipeline çš„ environment å·²ç»è®¾ç½®è¿‡äº†ï¼Œè¿™é‡Œå†è®¾ç½®å°±æ˜¾å¾—ä¸å¤Ÿä¼˜ç¾ï¼Œä¸”é™äºæ²¡æœ‰è¶³å¤Ÿçš„ exampleï¼Œä½ çŸ¥é“çš„ Jenkinsfile è°ƒè¯•éå¸¸ç—›è‹¦å’Œéº»çƒ¦ï¼Œæˆ‘å°±æ²¡é€šè¿‡è¿™ç§æ–¹å¼æ¥å°è¯•è§£å†³ã€‚</p><p>é€šè¿‡ Linux è®¾ç½®æ¥è§£å†³</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// open a shell console and <span class="built_in">type</span></span><br><span class="line">$ sudo visudo</span><br><span class="line"></span><br><span class="line">// <span class="built_in">type</span> your user name</span><br><span class="line">jenkins ALL=(ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure><p>ä½†å³ä½¿è¿™æ ·è®¾ç½®ï¼Œé€šè¿‡ Jenkins æ‰§è¡Œ shell è„šæœ¬çš„æ—¶å€™è¿˜æ˜¯å‡ºç°å¦‚ä¸‹é—®é¢˜</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo: no tty present and no askpass program specified</span><br></pre></td></tr></table></figure><p>æœ€åé€šè¿‡å¦‚ä¸‹è„šæœ¬è§£å†³äº†æˆ‘çš„é—®é¢˜</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">// Jenkinsfile</span><br><span class="line"></span><br><span class="line">environment &#123;</span><br><span class="line">    JENKINS = credentials(&quot;d1cbab74-823d-41aa-abb7-85848595&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sh &#x27;sudo -S &lt;&lt;&lt; &quot;$JENKINS_PSW&quot; sh test.sh&#x27;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œæ¬¢è¿ç•™è¨€è¯„è®ºï¼Œè°¢è°¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo æ·»åŠ  Disqus ç•™è¨€åŠŸèƒ½</title>
      <link href="/2019/07/add-disqus-to-hexo/"/>
      <url>/2019/07/add-disqus-to-hexo/</url>
      
        <content type="html"><![CDATA[<h2 id="åœ¨ä½ çš„-Hexo-ç½‘ç«™æ·»åŠ -Disqus"><a href="#åœ¨ä½ çš„-Hexo-ç½‘ç«™æ·»åŠ -Disqus" class="headerlink" title="åœ¨ä½ çš„ Hexo ç½‘ç«™æ·»åŠ  Disqus"></a>åœ¨ä½ çš„ Hexo ç½‘ç«™æ·»åŠ  Disqus</h2><p>å» Disqus åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æœ‰éœ€è¦é€‰æ‹©ä¸€ä¸ª shortnameï¼Œå®Œæˆåï¼Œä½ å¯ä»¥åœ¨è®¾ç½®é¡µç æ‰¾åˆ°ä½ çš„ shortname</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://YOURSHORTNAMEHERE.disqus.com/admin/settings/general</span><br></pre></td></tr></table></figure><p>åœ¨ä½  Hexo åšå®¢é‡Œæ‰“å¼€ <code>_config.yml</code>, ç„¶åè¾“å…¥ disqus_shortnameand: YOURSHORTNAMEHEREï¼Œåƒè¿™æ ·ï¼š</p><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">disqus_shortname: myshortnamegoeshere</span><br><span class="line">comments: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿéœ€è¦æ›´æ”¹ <code>_config.yml</code> æ–‡ä»¶å¦‚ä¸‹ï¼Œä¾‹å¦‚æˆ‘çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹é»˜è®¤ url: http://yoursite.com ä¸ºï¼š</span></span><br><span class="line">url: https://shenxianpeng.github.io</span><br></pre></td></tr></table></figure><p>å¤åˆ¶è¿™æ®µä»£ç åˆ° <code>blog\themes\landscape\layout\_partial\footer.ejs</code></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (config.<span class="property">disqus_shortname</span>)&#123; %&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> disqus_shortname = <span class="string">&#x27;&lt;%= config.disqus_shortname %&gt;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &lt;% <span class="keyword">if</span> (page.<span class="property">permalink</span>)&#123; %&gt;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> disqus_url = <span class="string">&#x27;&lt;%= page.permalink %&gt;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &lt;% &#125; %&gt;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> dsq = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dsq.<span class="property">type</span> = <span class="string">&#x27;text/javascript&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dsq.<span class="property">async</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dsq.<span class="property">src</span> = <span class="string">&#x27;//go.disqus.com/&lt;% if (page.comments)&#123; %&gt;embed.js&lt;% &#125; else &#123; %&gt;count.js&lt;% &#125; %&gt;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>] || <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;body&#x27;</span>)[<span class="number">0</span>]).<span class="title function_">appendChild</span>(dsq);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>ä¹Ÿéœ€è¦å¤åˆ¶è¿™äº›æ–‡ä»¶åˆ° <code>footer.ejs</code> åˆ°æœ€åº•éƒ¨ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;disqus_thread&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>æœ€å <code>footer.ejs</code> æ–‡ä»¶æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (theme.<span class="property">sidebar</span> === <span class="string">&#x27;bottom&#x27;</span>)&#123; %&gt;</span><br><span class="line">  &lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;_partial/sidebar&#x27;</span>) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;% <span class="keyword">if</span> (config.<span class="property">disqus_shortname</span>)&#123; %&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> disqus_shortname = <span class="string">&#x27;&lt;%= config.disqus_shortname %&gt;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &lt;% <span class="keyword">if</span> (page.<span class="property">permalink</span>)&#123; %&gt;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> disqus_url = <span class="string">&#x27;&lt;%= page.permalink %&gt;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &lt;% &#125; %&gt;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> dsq = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      dsq.<span class="property">type</span> = <span class="string">&#x27;text/javascript&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      dsq.<span class="property">async</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      dsq.<span class="property">src</span> = <span class="string">&#x27;//go.disqus.com/&lt;% if (page.comments)&#123; %&gt;embed.js&lt;% &#125; else &#123; %&gt;count.js&lt;% &#125; %&gt;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      (<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>] || <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;body&#x27;</span>)[<span class="number">0</span>]).<span class="title function_">appendChild</span>(dsq);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer-info&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="symbol">&amp;copy;</span> &lt;%= date(new Date(), &#x27;YYYY&#x27;) %&gt; &lt;%= config.author || config.title %&gt;<span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;%= __(&#x27;powered_by&#x27;) %&gt; <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://hexo.io/&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>Hexo<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;disqus_thread&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æœ€åæ¸…ç†å’Œæ„å»º</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate &amp;&amp; hexo server</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å¯ä»¥çœ‹åˆ°æˆ‘çš„åšå®¢å·²ç»å¯ä»¥æ·»åŠ è¯„è®ºäº† : )</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Disqus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinsfile example - å®ç°äº¤äº’ã€clone å¤šä¸ªä»“åº“ä»¥åŠ git push</title>
      <link href="/2019/07/jenkinsfile-example/"/>
      <url>/2019/07/jenkinsfile-example/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªpipelineé‡ŒåŒ…å«äº†å¦‚ä¸‹å‡ ä¸ªæŠ€æœ¯ï¼š</p><ul><li>å¦‚ä½•ä½¿ç”¨å…¶ä»–æœºå™¨ï¼Œagent</li><li>å¦‚ä½•ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œenvironment</li><li>å¦‚ä½•åœ¨buildå‰é€šè¿‡å‚æ•°åŒ–è¾“å…¥ï¼Œparameters</li><li>å¦‚ä½•ä½¿ç”¨äº¤äº’ï¼Œinput</li><li>å¦‚ä½•åŒæ—¶cloneå¤šä¸ªrepos</li><li>å¦‚ä½•è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼ŒanyOf</li></ul><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent &#123;</span><br><span class="line">        node &#123;</span><br><span class="line">            label <span class="string">&#x27;windows-agent&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    environment &#123;</span><br><span class="line">        MY_CRE = credentials(<span class="string">&quot;2aee7e0c-a728-4d9c-b25b-ad5451a12d&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    parameters &#123;</span><br><span class="line">        // Jenkins parameter</span><br><span class="line">        choice(</span><br><span class="line">            name: <span class="string">&#x27;REPO&#x27;</span>,</span><br><span class="line">            choices: [<span class="string">&#x27;repo1&#x27;</span>, <span class="string">&#x27;repo2&#x27;</span>, <span class="string">&#x27;repo3&#x27;</span>, <span class="string">&#x27;repo4&#x27;</span>],</span><br><span class="line">            description: <span class="string">&#x27;Required: pick a repo you want to build&#x27;</span>)</span><br><span class="line">        string(</span><br><span class="line">            name: <span class="string">&#x27;BRANCH&#x27;</span>,</span><br><span class="line">            defaultValue: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            description: <span class="string">&#x27;Required: chose a branch you want to checkout&#x27;</span>)</span><br><span class="line">        string(</span><br><span class="line">            name: <span class="string">&#x27;BUILD_NO&#x27;</span>,</span><br><span class="line">            defaultValue: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            description: <span class="string">&#x27;Required: input build number&#x27;</span>)</span><br><span class="line">        string(</span><br><span class="line">            name: <span class="string">&#x27;JIRA_NO&#x27;</span>,</span><br><span class="line">            defaultValue: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            description: <span class="string">&#x27;Optional: input jira ticket number for commit message&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&quot;Are you sure?&quot;</span>)&#123;</span><br><span class="line">            steps&#123;</span><br><span class="line">                // make sure you want to start this build</span><br><span class="line">                input message: <span class="string">&quot;<span class="variable">$&#123;REPO&#125;</span>/<span class="variable">$&#123;BRANCH&#125;</span>:<span class="variable">$&#123;BUILD_NO&#125;</span>, are you sure?&quot;</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;I&#x27;m sure!&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;Git clone repos&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                // git <span class="built_in">clone</span> one repo <span class="built_in">source</span> code</span><br><span class="line">                checkout([</span><br><span class="line">                    <span class="variable">$class</span>: <span class="string">&#x27;GitSCM&#x27;</span>, branches: [[name: <span class="string">&#x27;refs/heads/$&#123;BRANCH&#125;&#x27;</span>]], browser: [<span class="variable">$class</span>: <span class="string">&#x27;GitHub&#x27;</span>, repoUrl: <span class="string">&#x27;https://github.com/$&#123;REPO&#125;&#x27;</span>], doGenerateSubmoduleConfigurations: <span class="literal">false</span>, extensions: [[<span class="variable">$class</span>: <span class="string">&#x27;CleanBeforeCheckout&#x27;</span>], [<span class="variable">$class</span>: <span class="string">&#x27;LocalBranch&#x27;</span>, localBranch: <span class="string">&#x27;**&#x27;</span>], [<span class="variable">$class</span>: <span class="string">&#x27;RelativeTargetDirectory&#x27;</span>, relativeTargetDir: <span class="string">&#x27;../$&#123;REPO&#125;&#x27;</span>]], submoduleCfg: [], userRemoteConfigs: [[credentialsId: <span class="string">&#x27;2aee7e0c-a728-4d9c-b25b&#x27;</span>, url: <span class="string">&#x27;https://github.com/$&#123;REPO&#125;.git&#x27;</span>]]])</span><br><span class="line"></span><br><span class="line">                // git <span class="built_in">clone</span> another repo <span class="built_in">source</span> code</span><br><span class="line">                checkout([</span><br><span class="line">                    <span class="variable">$class</span>: <span class="string">&#x27;GitSCM&#x27;</span>, branches: [[name: <span class="string">&#x27;refs/heads/$&#123;BRANCH&#125;&#x27;</span>]], browser: [<span class="variable">$class</span>: <span class="string">&#x27;GitHub&#x27;</span>, repoUrl: <span class="string">&#x27;https://github.com/$&#123;REPO&#125;&#x27;</span>], doGenerateSubmoduleConfigurations: <span class="literal">false</span>, extensions: [[<span class="variable">$class</span>: <span class="string">&#x27;CleanBeforeCheckout&#x27;</span>], [<span class="variable">$class</span>: <span class="string">&#x27;LocalBranch&#x27;</span>, localBranch: <span class="string">&#x27;**&#x27;</span>], [<span class="variable">$class</span>: <span class="string">&#x27;RelativeTargetDirectory&#x27;</span>, relativeTargetDir: <span class="string">&#x27;../$&#123;REPO&#125;&#x27;</span>]], submoduleCfg: [], userRemoteConfigs: [[credentialsId: <span class="string">&#x27;2aee7e0c-a728-4d9c-b25b&#x27;</span>, url: <span class="string">&#x27;https://github.com/$&#123;REPO&#125;.git&#x27;</span>]]])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;Build repo1 and repo2&#x27;</span>) &#123;</span><br><span class="line">            when &#123;</span><br><span class="line">                // <span class="keyword">if</span> REPO=repo1 or REPO=repo2, execute build_repo12.sh</span><br><span class="line">                anyOf &#123;</span><br><span class="line">                    environment name: <span class="string">&#x27;REPO&#x27;</span>, value: <span class="string">&#x27;repo1&#x27;</span></span><br><span class="line">                    environment name: <span class="string">&#x27;REPO&#x27;</span>, value: <span class="string">&#x27;repo2&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;$&#123;REPO&#125;/build_repo12.sh $&#123;REPO&#125; $&#123;BUILD_NO&#125; $&#123;JIRA_NO&#125;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;Build repo3 and repo4&#x27;</span>) &#123;</span><br><span class="line">            when &#123;</span><br><span class="line">                // <span class="keyword">if</span> REPO=repo3 or REPO=repo4, execute build_repo34.sh</span><br><span class="line">                anyOf &#123;</span><br><span class="line">                    environment name: <span class="string">&#x27;REPO&#x27;</span>, value: <span class="string">&#x27;repo3&#x27;</span></span><br><span class="line">                    environment name: <span class="string">&#x27;REPO&#x27;</span>, value: <span class="string">&#x27;repo4&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;$&#123;REPO&#125;/build_repo34.sh $&#123;REPO&#125; $&#123;BUILD_NO&#125; $&#123;JIRA_NO&#125;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;Git push to remote repo&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                // commit code to remote repo</span><br><span class="line">                sshagent([<span class="string">&#x27;2aee7e0c-a728-4d9c-b25b&#x27;</span>]) &#123;</span><br><span class="line">                    sh <span class="string">&quot;git push https://%MY_CRE_USR%:%MY_CRE_PSW%@github.com/<span class="variable">$&#123;REPO&#125;</span>.git&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git ç®¡ç†</title>
      <link href="/2019/07/git-management/"/>
      <url>/2019/07/git-management/</url>
      
        <content type="html"><![CDATA[<h2 id="æŸ¥æ‰¾æ˜¯å¦æœ‰é—æ¼æäº¤"><a href="#æŸ¥æ‰¾æ˜¯å¦æœ‰é—æ¼æäº¤" class="headerlink" title="æŸ¥æ‰¾æ˜¯å¦æœ‰é—æ¼æäº¤"></a>æŸ¥æ‰¾æ˜¯å¦æœ‰é—æ¼æäº¤</h2><p>ä»ä¸€ä¸ªåˆ†æ”¯æ‰¾åˆ°æ‰€æœ‰çš„ commit å’Œ ticket å·ï¼Œç„¶åå»å¦å¤–ä¸€ä¸ªåˆ†æ”¯å»æŸ¥æ‰¾è¿™äº›æäº¤æ˜¯å¦ä¹Ÿåœ¨è¿™ä¸ªåˆ†æ”¯é‡Œã€‚</p><span id="more"></span><p>æ‰¾ä¸€ä¸ªåˆ†æ”¯çš„æ‰€æœ‰ commit å’Œ ticket å·</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä» develop åˆ†æ”¯ä¸Šè·å–æ‰€æœ‰çš„ commit å’Œ ticket å·ï¼Œç„¶åæ ¹æ® ticket å·è¿›è¡Œæ’åº</span></span><br><span class="line">git <span class="built_in">log</span> origin/develop --pretty=oneline --abbrev-commit | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f2,1 | <span class="built_in">sort</span> -t <span class="string">&#x27; &#x27;</span> -k 2 &gt;&gt; develop_involve_tickets.txt</span><br><span class="line"></span><br><span class="line">--pretty=oneline    <span class="comment"># æ˜¾ç¤ºä¸ºä¸€è¡Œ</span></span><br><span class="line">--abbrev-commit     <span class="comment"># æ˜¾ç¤ºçŸ­çš„æäº¤å·</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cut</span> --<span class="built_in">help</span>          <span class="comment"># åˆ‡å‡ºæ¥æ‰€éœ€è¦çš„å­—æ®µ</span></span><br><span class="line">-d                  <span class="comment"># å­—æ®µåˆ†éš”ç¬¦, &#x27; &#x27;åˆ†éš”ç©ºæ ¼</span></span><br><span class="line">-f                  <span class="comment"># åªé€‰æ‹©æŸäº›å­—æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sort</span> --<span class="built_in">help</span>         <span class="comment"># åˆ©ç”¨ sort å°†å‰ªå‡ºæ¥çš„å­—æ®µè¿›è¡Œæ’åº</span></span><br><span class="line">-t                  <span class="comment"># å­—æ®µåˆ†éš”ï¼Œ &#x27; &#x27;åˆ†éš”ç©ºæ ¼</span></span><br><span class="line">-k                  <span class="comment"># é€šè¿‡é”®è¿›è¡Œé”®å®šä¹‰æ’åº;KEYDEF ç»™å‡ºä½ç½®å’Œç±»å‹</span></span><br></pre></td></tr></table></figure><p>ç„¶åå»å¦å¤–ä¸€ä¸ªåˆ†æ”¯å»æ‰¾æ˜¯å¦æœ‰æ¬¡æäº¤</p><p>ç”±äºåœ¨ SVN æ—¶ä»£æ—¶ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½ä¼šåœ¨æè¿°é‡Œæ·»åŠ  ticket å·ï¼Œæ‰€ä»¥åˆ‡æ¢åˆ° master åˆ†æ”¯åï¼Œç›´æ¥æœç´¢æ‰€æœ‰ ticket å·æ˜¯å¦å­˜åœ¨å°±å¥½äº†.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">filename=<span class="string">&#x27;C:\develop_involve_tickets.txt&#x27;</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$line</span></span><br><span class="line">    var=`grep -ir <span class="variable">$line</span> src`</span><br><span class="line">    <span class="keyword">if</span> [[ -z <span class="variable">$var</span> ]];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;not found&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$line</span> &gt;&gt; ../not_found_in_master.txt</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;found&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$line</span> &gt;&gt; ../found_in_master.txt</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> &lt; <span class="string">&quot;<span class="variable">$filename</span>&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Multibranch Pipeline</title>
      <link href="/2019/06/multi-branch-pipeline/"/>
      <url>/2019/06/multi-branch-pipeline/</url>
      
        <content type="html"><![CDATA[<h2 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h2><p>Like database product, it runs on multi-platform, but for software enginner they may only works on one platform, how they could identify their code works on all platform? manually build the various platforms? NO!</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Most people would know we can use Jenkins pipeline, they may create multi Jenkins job for different stuation.</p><p>How to do it in an elegant way, I would want to share how to use multibranch pipeline to achieve.</p><ol><li>When create a pull request, auto parallel start simple build.</li><li>Reviewers can decide whether to merge base on build results.</li><li>After code merged, auto start full build.</li></ol><span id="more"></span><h2 id="Benefits"><a href="#Benefits" class="headerlink" title="Benefits"></a>Benefits</h2><p>What are the benefits:</p><ol><li>One Jenkins job and one pipeline can manage multi branches.</li><li>Do not need to compile platforms to verify, save huge time and machines.</li><li>Stop looking for other peopleâ€™s mistakes, no one can break the build.</li><li>Builds can be generated quickly for QA testing</li></ol><h2 id="Jenkinsfile-example"><a href="#Jenkinsfile-example" class="headerlink" title="Jenkinsfile example"></a>Jenkinsfile example</h2><p>In case of reduce simple build time and let PR creater and reviewer know the builds status as soon as possbile, you may need to do something different here, like below, used when condition and branch variable to check it is a develop branch or pull request branch.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">when &#123;</span><br><span class="line">    branch <span class="string">&#x27;PR-*&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">when &#123;</span><br><span class="line">    branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The entire code pipeline looks like this:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// This Jenkinsfile is an explame <span class="keyword">for</span> multibranch pipeline</span><br><span class="line"></span><br><span class="line">pipeline &#123;</span><br><span class="line">    agent none</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&quot;All platform builds&quot;</span>) &#123;</span><br><span class="line">            parallel &#123;</span><br><span class="line">                stage(<span class="string">&quot;Windows build&quot;</span>) &#123;</span><br><span class="line">                    agent &#123;</span><br><span class="line">                        node &#123;</span><br><span class="line">                            label <span class="string">&#x27;windows-vm01&#x27;</span></span><br><span class="line">                            customWorkspace <span class="string">&#x27;C:\\agent\\workspace\\blog&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    stages &#123;</span><br><span class="line">                        stage(<span class="string">&quot;PR build&quot;</span>) &#123;</span><br><span class="line">                            when &#123;</span><br><span class="line">                                branch <span class="string">&#x27;PR-*&#x27;</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            steps &#123;</span><br><span class="line">                                checkout scm</span><br><span class="line">                                <span class="built_in">dir</span>(<span class="string">&#x27;src\\build&#x27;</span>) &#123;</span><br><span class="line">                                    bat label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;build.bat PR&#x27;</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        stage(<span class="string">&quot;Release build&quot;</span>) &#123;</span><br><span class="line">                            when &#123;</span><br><span class="line">                                branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            steps &#123;</span><br><span class="line">                                cleanWs()</span><br><span class="line">                                checkout scm</span><br><span class="line">                                <span class="built_in">dir</span>(<span class="string">&#x27;src\\build&#x27;</span>) &#123;</span><br><span class="line">                                    bat label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;build.bat release&#x27;</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        stage(<span class="string">&quot;Deploy&quot;</span>) &#123;</span><br><span class="line">                            <span class="built_in">echo</span> <span class="string">&quot;====if you have more stage, can add stage like this===&quot;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                stage(<span class="string">&quot;Linux build&quot;</span>) &#123;</span><br><span class="line">                    agent &#123;</span><br><span class="line">                        node &#123;</span><br><span class="line">                            label <span class="string">&#x27;linux-vm01&#x27;</span></span><br><span class="line">                            customWorkspace <span class="string">&#x27;/agent/workspace/blog&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    stages &#123;</span><br><span class="line">                        stage(<span class="string">&quot;PR build&quot;</span>) &#123;</span><br><span class="line">                            when &#123;</span><br><span class="line">                                branch <span class="string">&#x27;PR-*&#x27;</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            steps &#123;</span><br><span class="line">                                checkout scm</span><br><span class="line">                                <span class="built_in">dir</span>(<span class="string">&#x27;src/build&#x27;</span>) &#123;</span><br><span class="line">                                    bat label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;build.sh PR&#x27;</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        stage(<span class="string">&quot;Release build&quot;</span>) &#123;</span><br><span class="line">                            when &#123;</span><br><span class="line">                                branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            steps &#123;</span><br><span class="line">                                cleanWs()</span><br><span class="line">                                checkout scm</span><br><span class="line">                                <span class="built_in">dir</span>(<span class="string">&#x27;src/build&#x27;</span>) &#123;</span><br><span class="line">                                    bat label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;build.sh release&#x27;</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                stage(<span class="string">&quot;AIX build&quot;</span>)&#123;</span><br><span class="line">                    steps&#123;</span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">&quot;====same as windows/Linux example, can write the code here you need ====&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Code Coverage Tool - Squish Coco use examples</title>
      <link href="/2019/05/squishcoco/"/>
      <url>/2019/05/squishcoco/</url>
      
        <content type="html"><![CDATA[<h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><ol><li>You need to ask for a <a href="https://www.froglogic.com/coco/free-trial/">free trial license</a> and install<ul><li>You will receive a mail with username&#x2F;password to login for downloading</li></ul></li><li>I test it on the Windows platform, so I download the Windows installer, then install Squish Coco and Add-in</li><li>Installed Visual Studio 2010 or higher, I used VS2017 Professional</li></ol><span id="more"></span><h2 id="Add-in"><a href="#Add-in" class="headerlink" title="Add-in"></a>Add-in</h2><ul><li>go to ..squishcoco\Setup, see quishCocoVSIX2017.vsix, double click, reopen VS2017, squishcoco will be there</li></ul><h2 id="Create-a-project"><a href="#Create-a-project" class="headerlink" title="Create a project"></a>Create a project</h2><p>Start Visual Studio and create a new C++ application</p><ol><li>Click on â€œFileâ†’Newâ†’Projectâ€¦â€ to pop up the new project wizard.</li><li>Choose a project type of â€œVisual C++2â€ and the â€œWin32 Console Applicationâ€ template.</li><li>Enter a project name of squishcoco_sample, then click the â€œOKâ€ button.</li><li>When the wizardâ€™s second page appears, click the â€œFinishâ€ button.</li></ol><p>At this stage the application is not yet instrumented, so now we will create a copy of the build.<br><img src="/2019/05/squishcoco/configuration-manager.png" alt="configuration-manager"></p><ol><li>Open the configuration manager by clicking â€œBuildâ†’Configuration Managerâ€¦â€.</li><li>In the â€œConfigurationâ€ column, select â€œNewâ€¦â€ in the combobox.</li><li>In the â€œNew Project Configurationâ€ dialog:<ol><li>Enter Code Coverage in the â€œNameâ€ field,</li><li>Select Release or Debug in the â€œCopy settings fromâ€ selection dialog.</li><li>Click the â€œOKâ€ button.</li></ol></li></ol><p>Add test code</p><p>squishcoco_sample.cpp</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// squishcoco_sample.cpp : Defines the entry point for the console application.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">int</span> <span class="title function_">myprint</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> _tmain(<span class="type">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Enter your age: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;age);</span><br><span class="line">    <span class="keyword">if</span> (age &gt; <span class="number">0</span> &amp;&amp; age &lt;=<span class="number">40</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;You&#x27;re young guys\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (age &gt;<span class="number">40</span> &amp;&amp; age &lt;=<span class="number">70</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;You&#x27;re midle guys\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (age &gt; <span class="number">70</span> &amp;&amp; age &lt;=<span class="number">100</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;You&#x27;re old guys\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;You&#x27;re awesome\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    myprint();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>myprint.cpp</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">myprint</span> <span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">&quot;you have call printf function\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Activate-instrumentation"><a href="#Activate-instrumentation" class="headerlink" title="Activate instrumentation"></a>Activate instrumentation</h2><p>use the MicrosoftÂ® Visual StudioÂ® Add-In:<br><img src="/2019/05/squishcoco/squishcoco-add-in.png" alt="squishcoco-add-in"></p><ol><li>Click â€œToolsâ†’Code Coverage Build Modeâ€¦â€ to pop up the Squish Coco wizard.</li><li>In the â€œProject:â€ selection dialog, select squishcoco_sample.</li><li>In the selection dialog â€œConfiguration:â€, select Code Coverage.</li><li>In the Configuration section at the bottom, select the radio button â€œModifyâ€, and then click on the button, â€œEnable code coverage for C++ projectsâ€.</li></ol><p>The Code Coverage configuration has now been modified to generate code coverage information. The â€œSquishCocoâ€ output window summarizes all the modifications that have been made:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">Modifying configuration &#x27;Code Coverage&#x27; for the project &#x27;squishcoco_sample&#x27; for the platform &#x27;Code Coverage|Win32&#x27;</span><br><span class="line">    Compiler Configuration</span><br><span class="line">        Additional command line arguments &#x27; --cs-exclude-file-abs-regex=&quot;^.*\\squishcoco_sample\\[^\\]*$&quot; --cs-on --cs-condition --cs-line --cs-function --cs-hit --cs-full-instrumentation --cs-no-qt3 --cs-no-qt4 --cs-no-boost&#x27; are appended</span><br><span class="line">    Linker Configuration</span><br><span class="line">        Additional command line arguments &#x27; --cs-exclude-file-abs-regex=&quot;^.*\\squishcoco_sample\\[^\\]*$&quot; --cs-on --cs-condition --cs-line --cs-function --cs-hit --cs-full-instrumentation --cs-no-qt3 --cs-no-qt4 --cs-no-boost&#x27; are appended</span><br><span class="line">    Librarian Configuration</span><br><span class="line">        Additional command line arguments &#x27; --cs-exclude-file-abs-regex=&quot;^.*\\squishcoco_sample\\[^\\]*$&quot; --cs-on --cs-condition --cs-line --cs-function --cs-hit --cs-full-instrumentation --cs-no-qt3 --cs-no-qt4 --cs-no-boost&#x27; are appended</span><br><span class="line">    File Specific Configuration</span><br><span class="line">        Additional command line arguments &#x27; --cs-exclude-file-abs-regex=&quot;^.*\\squishcoco_sample\\[^\\]*$&quot; --cs-on --cs-condition --cs-line --cs-function --cs-hit --cs-full-instrumentation --cs-no-qt3 --cs-no-qt4 --cs-no-boost&#x27; are appended for the file &#x27;squishcoco_sample.cpp&#x27;</span><br><span class="line">Modifying configuration &#x27;Code Coverage&#x27; for the project &#x27;squishcoco_sample&#x27; for the platform &#x27;Code Coverage|x64&#x27;</span><br><span class="line">    Compiler Configuration</span><br><span class="line">        Additional command line arguments &#x27; --cs-exclude-file-abs-regex=&quot;^.*\\squishcoco_sample\\[^\\]*$&quot; --cs-on --cs-condition --cs-line --cs-function --cs-hit --cs-full-instrumentation --cs-no-qt3 --cs-no-qt4 --cs-no-boost&#x27; are appended</span><br><span class="line">    Linker Configuration</span><br><span class="line">        Additional command line arguments &#x27; --cs-exclude-file-abs-regex=&quot;^.*\\squishcoco_sample\\[^\\]*$&quot; --cs-on --cs-condition --cs-line --cs-function --cs-hit --cs-full-instrumentation --cs-no-qt3 --cs-no-qt4 --cs-no-boost&#x27; are appended</span><br><span class="line">    Librarian Configuration</span><br><span class="line">        Additional command line arguments &#x27; --cs-exclude-file-abs-regex=&quot;^.*\\squishcoco_sample\\[^\\]*$&quot; --cs-on --cs-condition --cs-line --cs-function --cs-hit --cs-full-instrumentation --cs-no-qt3 --cs-no-qt4 --cs-no-boost&#x27; are appended</span><br><span class="line">    File Specific Configuration</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="Build-project"><a href="#Build-project" class="headerlink" title="Build project"></a>Build project</h2><p>Build project will cause the executable squishcoco_sample.exe to be built and the code coverage instrumentation file squishcoco_sample.exe.csmes to be generated</p><p>Double click on squishcoco_sample.exe.csmes to inspect this file in CoverageBrowser</p><p>Right now there is no code coverage statistics visible in CoverageBrowser, this is because the application has not yet been executed. Click on squishcoco_sample.cpp in the source list to display the main function. All the instrumented lines are shown grayed out, to indicate that nothing has been executed.</p><p>Now execute squishcoco_sample.exe by double clicking it. This will result in a file called squishcoco_sample.exe.csexe being generated. The file contains a code coverage snapshot which can be imported into Coverage Browser</p><ol><li>Click â€œFile-&gt;Load Execution Reportâ€¦â€.</li><li>Select the â€œFileâ€ item and enter the path of the squishcoco_sample.exe.csexe file.</li><li>Click on the â€œImportâ€ button.<br>This will cause the code coverage statistics to be updated. Now, in the source code window, the main functionâ€™s return statement will be colored green to indicate that this line has been executed.</li></ol><h2 id="Final-result"><a href="#Final-result" class="headerlink" title="Final result"></a>Final result</h2><p><img src="/2019/05/squishcoco/squishcoco-result.png" alt="squishcoco-result"></p>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Coverage </tag>
            
            <tag> SquishCoco </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Code Coverage tools of C/C++</title>
      <link href="/2019/05/code-coverage-tools/"/>
      <url>/2019/05/code-coverage-tools/</url>
      
        <content type="html"><![CDATA[<p>Code Coverage is a measurement of how many lines, statements, or blocks of your code are tested using your suite of automated tests. Itâ€™s an essential metric to understand the quality of your QA efforts.</p><p>Code coverage shows you how much of your application is not covered by automated tests and is therefore vulnerable to defects. it is typically measured in percentage values â€“ the closer to 100%, the better.</p><p>When youâ€™re trying to demonstrate test coverage to your higher-ups, code coverage tools (and other tools of the trade, of course) come in quite useful.</p><p>List of Code Coverage Tools</p><p>| Tools  | Support Language  | Cost | Partners  |<br>|â€”|â€”|â€”|â€”|â€”|<br>| <a href="https://www.froglogic.com/coco/">Squish Coco</a>  | C, C++, C#, SystemC, Tcl and QML | Not disclosed |<a href="https://www.froglogic.com/coco/">Botom of this page Selected Clients</a>|<br>| <a href="http://www.bullseye.com/productInfo.html">BullseyeCoverage</a> | C, C++ |$800 for 1-year license and up |   |<br>| <a href="https://www.verifysoft.com/en_code_coverage.html">Testwell</a>| C, C++, C#, Java| Not disclosed| |<br>| <a href="https://www.parasoft.com/products/ctest">Parasoft C&#x2F;C++test</a> |C, C++   | Not disclosed  | <a href="https://www.parasoft.com/company/partners">partners</a> |<br>| <a href="https://www.vectorcast.com/software-testing-products/c-unit-testing">VECTOR Code Coverage</a> | C, C++ | Not disclosed (free trial available)| <a href="https://www.vectorcast.com/partners">partners</a> |<br>|<a href="https://www.eclemma.org/jacoco/">JaCoCo</a>| Java | Open Source| Most famous code coverage tool in Java area |</p>]]></content>
      
      
      <categories>
          
          <category> Coverage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> C </tag>
            
            <tag> Coverage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitSCM clone code don&#39;t display branch</title>
      <link href="/2019/05/gitscm-clone-code-don-t-display-branch/"/>
      <url>/2019/05/gitscm-clone-code-don-t-display-branch/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘é‡åˆ°ä¸€ä¸ª regression bugï¼Œæ˜¯äº§å“å®Œæˆæ„å»ºä¹‹åï¼Œbuild commit number ä¸å¯¹ï¼Œæ˜¾ç¤ºçš„ HEAD è€Œä¸æ˜¯å¸¸è§çš„ 97b34931ac HASH number,è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ<br>æˆ‘æ£€æŸ¥äº† build è„šæœ¬æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œbranch çš„è¾“å‡ºæ˜¯æ­£ç¡®çš„ï¼Œé‚£æˆ‘æ€€ç–‘æ˜¯å¼•å…¥ Jenkins çš„åŸå› ï¼Œæœç„¶ç™»å½•åˆ°è¿œç¨‹çš„ agent ä¸Šå»æŸ¥çœ‹åˆ†æ”¯åç§°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\workspace\blog&gt;git branch</span><br><span class="line">* (HEAD detached at 97b3493)</span><br></pre></td></tr></table></figure><p>æœç„¶é—®é¢˜å‡ºåœ¨äº† Jenkins ä¸Šã€‚è¿™ä¸ªé—®é¢˜æœ‰ç®€å•åŠæ³•è§£å†³ï¼Œå°±æ˜¯ç›´æ¥ä½¿ç”¨gitå‘½ä»¤æ¥cloneä»£ç ï¼Œè€Œä¸ä½¿ç”¨Gitæ’ä»¶</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 1 -b u2opensrc https://username:<span class="string">&quot;passwowrd&quot;</span>@git.github.com/scm/blog.git blog</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å›ºç„¶ç®€å•ï¼Œä¸ä¼šå‡ºé”™ï¼Œä½†å®ƒæ˜¯æ˜ç æ˜¾ç¤ºï¼Œæˆ‘å²‚èƒ½å®¹å¿è¿™ç§ä¸å ªçš„å¤„ç†æ–¹å¼å—ï¼Ÿè‚¯å®šè¿˜æ˜¯è¦åœ¨ Git æ’ä»¶ä¸Šæ‰¾åˆ°è§£å†³åŠæ³•çš„ã€‚<br>éšågoogleä¸€ä¸‹ï¼Œæœç„¶æœ‰é‡åˆ°å’Œæˆ‘ä¸€æ ·é—®é¢˜çš„äººï¼Œé—®é¢˜é“¾æ¥ <a href="https://stackoverflow.com/questions/44006070/jenkins-gitscm-finishes-the-clone-in-a-detached-head-state-how-can-i-make-sure">è¿™é‡Œ</a>ã€‚</p><p>ä»–è¯´ä»–åšäº†å¾ˆå¤šè°ƒæŸ¥ï¼Œè¿˜è·Ÿä¸“ä¸šçš„ Jenkins äººå£«è”ç³»ï¼Œè¯•äº†å¾ˆå¤šæ¬¡ï¼Œæœ€åæ‰¾åˆ°è¿™ä¸ªåŠæ³•</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">checkout([<span class="variable">$class</span>: <span class="string">&#x27;GitSCM&#x27;</span>, branches: [[name: <span class="string">&#x27;*/feature/*&#x27;</span>]], doGenerateSubmoduleConfigurations: <span class="literal">false</span>, extensions: [[<span class="variable">$class</span>: <span class="string">&#x27;LocalBranch&#x27;</span>, localBranch: <span class="string">&quot;**&quot;</span>]], submoduleCfg: [], userRemoteConfigs: [[credentialsId: <span class="string">&#x27;99f978af-XXXX-XXXX-8147-2cf8f69ef864&#x27;</span>, url: <span class="string">&#x27;http://TFS_SERVER:8080/tfs/DefaultCollection/Product/_git/Project&#x27;</span>]]])</span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯åœ¨ extensions:[] ä¸­åŠ å…¥è¿™å¥ [$class: â€˜LocalBranchâ€™, localBranch: â€œ**â€]</p><p>è¿™æ˜¯ Jenkins çš„ Bug å—ï¼Ÿå¸¦ç€è¿™ä¸ªç–‘é—®éšåé€šè¿‡ Pipeline Syntaxï¼Œæ‰¾åˆ° checkout: Check out from version controlï¼Œåœ¨ Additional Behaviours é‡Œæœ‰ Check out to specific local branch è¿™ä¸ªé…ç½®é¡¹</p><p>If given, checkout the revision to build as HEAD on this branch.<br>If selected, and its value is an empty string or â€œ**â€, then the branch name is computed from the remote branch without the origin. In that case, a remote branch origin&#x2F;master will be checked out to a local branch named master, and a remote branch origin&#x2F;develop&#x2F;new-feature will be checked out to a local branch named develop&#x2F;newfeature.</p><p>çœ‹ä»‹ç»åŸæ¥ Jenkins è‡ªå¸¦è¿™ä¸ªè®¾ç½®ï¼Œåªæ˜¯å®ƒä¸æ˜¯é»˜è®¤é€‰é¡¹ï¼Œæ‰€ä»¥æ‰é‡åˆ°åˆšæ‰é‚£ä¸ªé—®é¢˜ã€‚éšåé€‰æ‹©è¿™ä¸ªè®¾ç½®ï¼Œç„¶åå¡«å…¥â€**â€ï¼Œç„¶åç”Ÿæˆ Pipeline è„šæœ¬ï¼Œå°±è·Ÿä¸Šé¢çš„è„šæœ¬ä¸€æ ·äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡å‚æ•°åŒ–ä¸Šä¼ æ–‡ä»¶åˆ° FTP æœåŠ¡å™¨</title>
      <link href="/2019/05/upload-to-ftp-parameterization-by-bat/"/>
      <url>/2019/05/upload-to-ftp-parameterization-by-bat/</url>
      
        <content type="html"><![CDATA[<p>å®ç° CI&#x2F;CD è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸éœ€è¦å°†æ„å»ºå¥½çš„ build ä¸Šä¼ åˆ°ä¸€ä¸ªå…¬å…±çš„æœåŠ¡å™¨ï¼Œä¾›æµ‹è¯•ã€å¼€å‘æ¥è·å–æœ€æ–°çš„ buildã€‚å¦‚ä½•ä¸Šä¼  build æˆæœç‰©åˆ° FTP serverï¼Œåˆä¸æƒ³æŠŠ FTP serverç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç å­˜åœ¨è„šæœ¬é‡Œï¼Œæƒ³åšè¿™æ ·çš„å‚æ•°åŒ–å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upload_to_ftp.bat [hostname] [username] [password] [local_path] [remote_pat]</span><br></pre></td></tr></table></figure><span id="more"></span><p>windows batch ç”±äºå®ƒçš„å±€é™æ€§ï¼Œåœ¨å®ç°ä¸Šæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œä½†è¿˜æ˜¯æœ‰åŠæ³•ã€‚å¦‚ä½•ç”¨ windows batch æ¥å®ç°å‘¢ï¼Ÿå€ŸåŠ©ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼ŒæŠŠéœ€è¦çš„å‚æ•°å†™å…¥åˆ°ä¸´æ—¶æ–‡ä»¶é‡Œï¼Œç„¶åé€šè¿‡ ftp -s å‚æ•°è¯»å–æ–‡ä»¶ï¼Œæœ€åæŠŠä¸´æ—¶æ–‡ä»¶åˆ é™¤çš„æ–¹å¼æ¥å®ç°ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> ftp_hostname=%1</span><br><span class="line"><span class="built_in">set</span> ftp_username=%2</span><br><span class="line"><span class="built_in">set</span> ftp_password=%3</span><br><span class="line"><span class="built_in">set</span> local_path=%4</span><br><span class="line"><span class="built_in">set</span> remote_path=%5</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> %ftp_hostname%! == ! ( <span class="built_in">echo</span> <span class="string">&quot;ftp_hostname not set correctly&quot;</span> &amp; goto USAGE )</span><br><span class="line"><span class="keyword">if</span> %ftp_username%! == ! ( <span class="built_in">echo</span> <span class="string">&quot;ftp_username not set correctly&quot;</span> &amp; goto USAGE )</span><br><span class="line"><span class="keyword">if</span> %ftp_password%! == ! ( <span class="built_in">echo</span> <span class="string">&quot;ftp_password not set correctly&quot;</span> &amp; goto USAGE )</span><br><span class="line"><span class="keyword">if</span> %local_path%! == ! ( <span class="built_in">echo</span> <span class="string">&quot;local_path not set correctly&quot;</span> &amp; goto USAGE )</span><br><span class="line"><span class="keyword">if</span> %remote_path%! == ! ( <span class="built_in">echo</span> <span class="string">&quot;remote_path not set correctly&quot;</span> &amp; goto USAGE )</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> open %ftp_hostname% &gt; ftp.txt</span><br><span class="line"><span class="built_in">echo</span> user %ftp_username% %ftp_password% &gt;&gt; ftp.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">cd</span> %remote_path% &gt;&gt; ftp.txt</span><br><span class="line"><span class="built_in">echo</span> lcd %local_path% &gt;&gt;ftp.txt</span><br><span class="line"><span class="built_in">echo</span> prompt off &gt;&gt;ftp.txt</span><br><span class="line"><span class="built_in">echo</span> bin &gt;&gt; ftp.txt</span><br><span class="line"><span class="built_in">echo</span> mput * &gt;&gt; ftp.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">bye</span> &gt;&gt; ftp.txt</span><br><span class="line">ftp -n -s:ftp.txt</span><br><span class="line"></span><br><span class="line">del ftp.txt</span><br><span class="line">goto END</span><br><span class="line"></span><br><span class="line">:USAGE</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span>.   - -------------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">echo</span>.   - upload_to_ftp.bat [hostname] [username] [password] [local_path] [remote_pat]  -</span><br><span class="line"><span class="built_in">echo</span>.   - Example:                                                                      -</span><br><span class="line"><span class="built_in">echo</span>.   - upload_to_ftp.bat 192.168.1.1 guest guest D:\Media\* C:\Builds\               -</span><br><span class="line"><span class="built_in">echo</span>.   - -------------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line">:END</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Automation </tag>
            
            <tag> Shell </tag>
            
            <tag> FTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Automatically commit code by Jenkins</title>
      <link href="/2019/05/auto-bump-build-version/"/>
      <url>/2019/05/auto-bump-build-version/</url>
      
        <content type="html"><![CDATA[<p>When we need to release a product, we should change copyright, build version, release month, release noteâ€¦<br>How to modify multiple files automatically?<br>I used a Jenkins pipeline project, the project is parameterized(string parameter) and regular expressions to implement.</p><ol><li><p>Here is the string parameter for copyright:</p><ul><li><p>Name: copyright</p></li><li><p>Default Value: 1995â€”2019</p></li><li><p>Description: Copyright format:1995â€”2019</p>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">stage(<span class="string">&#x27;change copyrigh&#x27;</span>) &#123;</span><br><span class="line">    steps &#123;</span><br><span class="line">        sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;sed -i -E &quot;s/(1995â€”[0-9]&#123;4&#125;)/$&#123;copyright&#125;/&quot; 1033/AutoRun.ini&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Here is the string parameter for build version:</p><ul><li><p>Name: build_version</p></li><li><p>Default Value: 1.2.2.1002</p></li><li><p>Description: build version format: 1.2.2.1002</p>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">stage(<span class="string">&#x27;change build version&#x27;</span>) &#123;</span><br><span class="line">    steps &#123;</span><br><span class="line">        sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;sed -i -E &quot;s/([0-9].[0-9].[0-9].[0-9]&#123;4&#125;)/$&#123;build_version&#125;/&quot; 1033/AutoRun.ini&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Here is the string parameter for build version:</p><ul><li><p>Name: release_month</p></li><li><p>Default Value: May 2019</p></li><li><p>Description: release month format: May 2019</p>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">stage(<span class="string">&#x27;change release month&#x27;</span>) &#123;</span><br><span class="line">    steps &#123;</span><br><span class="line">        sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;&#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">        sed -i -E &quot;s/([a-z]* 20[0-9]&#123;2&#125;)/$&#123;release_month&#125;/&quot; 1033/AutoRun.ini</span></span><br><span class="line"><span class="string">        sed -i -E &quot;s/([a-z]* 20[0-9]&#123;2&#125;)/$&#123;release_month&#125;/&quot; 1033/MainMenu.ini</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>push change to Git</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">stage(<span class="string">&#x27;git push to Git&#x27;</span>) &#123;</span><br><span class="line">    steps &#123;</span><br><span class="line">        sshagent([<span class="string">&#x27;8dd766ba-ac0f-4302-afa8-bee59c726dee&#x27;</span>]) &#123;</span><br><span class="line">            sh(<span class="string">&quot;git add 1033/AutoRun.ini&quot;</span>)</span><br><span class="line">            sh(<span class="string">&quot;git add 1033/MainMenu.ini&quot;</span>)</span><br><span class="line">            sh(<span class="string">&quot;git commit -m &#x27;Bld # <span class="variable">$&#123;build_version&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">            sh(<span class="string">&quot;git push -u origin master&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Whole Jenkins Pipeline looks like:</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent &#123;</span><br><span class="line">        label <span class="string">&#x27;master&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stages&#123;</span><br><span class="line">        stage(<span class="string">&#x27;git clone&#x27;</span>) &#123;</span><br><span class="line">            steps&#123;</span><br><span class="line">                git branch: <span class="string">&#x27;master&#x27;</span>,</span><br><span class="line">                credentialsId: <span class="string">&#x27;8dd766ba-ac0f-4302-afa8-bee59c726dee&#x27;</span>,</span><br><span class="line">                url: <span class="string">&#x27;git@github.com:shenxianpeng/blog.git&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;change copyrigh&#x27;</span>) &#123;</span><br><span class="line">        steps &#123;</span><br><span class="line">            sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;sed -i -E &quot;s/(1995â€”[0-9]&#123;4&#125;)/$&#123;copyright&#125;/&quot; 1033/AutoRun.ini&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;change release month&#x27;</span>) &#123;</span><br><span class="line">        steps &#123;</span><br><span class="line">            sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;&#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">            sed -i -E &quot;s/([a-z]* 20[0-9]&#123;2&#125;)/$&#123;release_month&#125;/&quot; 1033/AutoRun.ini</span></span><br><span class="line"><span class="string">            sed -i -E &quot;s/([a-z]* 20[0-9]&#123;2&#125;)/$&#123;release_month&#125;/&quot; 1033/MainMenu.ini</span></span><br><span class="line"><span class="string">            &#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;change build version&#x27;</span>) &#123;</span><br><span class="line">        steps &#123;</span><br><span class="line">            sh label: <span class="string">&#x27;&#x27;</span>, script: <span class="string">&#x27;sed -i -E &quot;s/([0-9].[0-9].[0-9].[0-9]&#123;4&#125;)/$&#123;build_version&#125;/&quot; 1033/AutoRun.ini&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;git push to Git&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sshagent([<span class="string">&#x27;8dd766ba-ac0f-4302-afa8-bee59c726dee&#x27;</span>]) &#123;</span><br><span class="line">                    sh(<span class="string">&quot;git add 1033/AutoRun.ini&quot;</span>)</span><br><span class="line">                    sh(<span class="string">&quot;git add 1033/MainMenu.ini&quot;</span>)</span><br><span class="line">                    sh(<span class="string">&quot;git commit -m &#x27;Bld # <span class="variable">$&#123;build_version&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">                    sh(<span class="string">&quot;git push -u origin master&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
            <tag> Release </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins Linux agent configuration</title>
      <link href="/2019/05/jenkins-linux-agent/"/>
      <url>/2019/05/jenkins-linux-agent/</url>
      
        <content type="html"><![CDATA[<h2 id="Prepare-Java-runtime"><a href="#Prepare-Java-runtime" class="headerlink" title="Prepare Java runtime"></a>Prepare Java runtime</h2><h3 id="Check-if-had-installed-java"><a href="#Check-if-had-installed-java" class="headerlink" title="Check if had installed java"></a>Check if had installed java</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ java -version</span><br><span class="line">openjdk version <span class="string">&quot;1.8.0_65&quot;</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_65-b17)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.65-b01, mixed mode)</span><br></pre></td></tr></table></figure><h4 id="if-not-Here-is-an-article-telling-you-how-to-install-it"><a href="#if-not-Here-is-an-article-telling-you-how-to-install-it" class="headerlink" title="if not Here is an article telling you how to install it"></a>if not Here is an <a href="https://www.javahelps.com/2015/03/install-oracle-jdk-in-ubuntu.html">article</a> telling you how to install it</h4><h2 id="Create-Node"><a href="#Create-Node" class="headerlink" title="Create Node"></a>Create Node</h2><h3 id="1-Jenkins-home-page-Manage-Node-New-Node-such-as-window-build-machine"><a href="#1-Jenkins-home-page-Manage-Node-New-Node-such-as-window-build-machine" class="headerlink" title="1. Jenkins home page-&gt;Manage Node-&gt;New Node, such as window-build-machine"></a>1. Jenkins home page-&gt;Manage Node-&gt;New Node, such as window-build-machine</h3><h4 id="2-List-Linux-agent-settings"><a href="#2-List-Linux-agent-settings" class="headerlink" title="2. List Linux agent settings"></a>2. List Linux agent settings</h4><table><thead><tr><th>Items</th><th>Settings</th></tr></thead><tbody><tr><td>Name</td><td>Linux-build-machine</td></tr><tr><td>Description</td><td>used for Linux build</td></tr><tr><td>of executors</td><td>1</td></tr><tr><td>Remote root directory</td><td>&#x2F;home&#x2F;agent</td></tr><tr><td>Labels</td><td>Linux, build</td></tr><tr><td>Usage</td><td>Use this node as much as possible</td></tr><tr><td>Launch method</td><td>Launch agent agents via SSH</td></tr><tr><td>Host</td><td>192.168.1.112</td></tr><tr><td>Credentials</td><td>username&#x2F;password</td></tr><tr><td>Host Key Verification Strategy</td><td>Manually trusted key Verification Strategy</td></tr><tr><td>Availability</td><td>Keep this agent online as much as paossible</td></tr></tbody></table><h4 id="3-How-to-set-credentials"><a href="#3-How-to-set-credentials" class="headerlink" title="3. How to set credentials"></a>3. How to set credentials</h4><table><thead><tr><th>credentials</th><th>configuration</th></tr></thead><tbody><tr><td>Domain</td><td>Global credentials (unrestricted)</td></tr><tr><td>Kind</td><td>Username with password</td></tr><tr><td>Scope</td><td>Global(Jenkins, nodes, items, all child items, etc)</td></tr><tr><td>Username</td><td>root</td></tr><tr><td>Password</td><td>mypassword</td></tr><tr><td>Description</td><td>Linux agent username &amp; password</td></tr></tbody></table><h4 id="4-Save-then-Connect"><a href="#4-Save-then-Connect" class="headerlink" title="4. Save then Connect"></a>4. Save then Connect</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Remoting version: 3.29</span><br><span class="line">This is a Unix agent</span><br><span class="line">Evacuated stdout</span><br><span class="line">Agent successfully connected and online</span><br><span class="line">SSHLauncher&#123;host=&#x27;192.168.1.112&#x27;, port=22, credentialsId=&#x27;d1cbab74-823d-41aa-abb7-8584859503d0&#x27;, jvmOptions=&#x27;&#x27;, javaPath=&#x27;/usr/bin/java&#x27;,</span><br><span class="line">prefixStartSlaveCmd=&#x27;&#x27;, suffixStartSlaveCmd=&#x27;&#x27;, launchTimeoutSeconds=210, maxNumRetries=10, retryWaitTime=15,</span><br><span class="line">sshHostKeyVerificationStrategy=hudson.plugins.sshslaves.verifiers.ManuallyTrustedKeyVerificationStrategy, tcpNoDelay=true, trackCredentials=true&#125;</span><br><span class="line">[05/11/19 01:33:37] [SSH] Opening SSH connection to 192.168.1.112:22.</span><br><span class="line">[05/11/19 01:33:37] [SSH] SSH host key matches key seen previously for this host. Connection will be allowed.</span><br><span class="line">[05/11/19 01:33:37] [SSH] Authentication successful.</span><br><span class="line">[05/11/19 01:33:37] [SSH] The remote user&#x27;s environment is:</span><br></pre></td></tr></table></figure><h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><table><thead><tr><th>Problem</th><th>how to fix</th></tr></thead><tbody><tr><td>[04&#x2F;22&#x2F;19 23:15:07] [SSH] WARNING: No entry currently exists in the Known Hosts file for this host. Connections will be denied until this new host and its associated key is added to the Known Hosts file.</td><td>ssh-keyscan HOSTNAME &gt;&gt; known_hosts</td></tr><tr><td>&#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;.ssh&#x2F;known_hosts [SSH] No Known Hosts file was found at &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;.ssh&#x2F;known_hosts.</td><td>changing the Host key verification strategy in LAUNCH METHOD from â€œKnown Hosts file verification strategyâ€ to â€œManually trusted key verification strategyâ€</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins Windows agent configuration</title>
      <link href="/2019/05/jenkins-windows-agent/"/>
      <url>/2019/05/jenkins-windows-agent/</url>
      
        <content type="html"><![CDATA[<h2 id="Prepare-Java-runtime"><a href="#Prepare-Java-runtime" class="headerlink" title="Prepare Java runtime"></a>Prepare Java runtime</h2><h3 id="1-Download-Java"><a href="#1-Download-Java" class="headerlink" title="1. Download Java"></a>1. <a href="https://www.java.com/en/download/">Download Java</a></h3><h4 id="2-Configure-Java-Windows-path"><a href="#2-Configure-Java-Windows-path" class="headerlink" title="2. Configure Java Windows path"></a>2. Configure Java Windows path</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">JAVA_HOME=C:\Program Files\Java\jdk1.8.0_201</span><br><span class="line">CLASSPATH=.;%JAVA_HOME%\lib;%JAVA_HOME%\jre\lib</span><br></pre></td></tr></table></figure><h2 id="Create-Node"><a href="#Create-Node" class="headerlink" title="Create Node"></a>Create Node</h2><h3 id="1-Jenkins-home-page-Manage-Node-New-Node-such-as-window-build-machine"><a href="#1-Jenkins-home-page-Manage-Node-New-Node-such-as-window-build-machine" class="headerlink" title="1. Jenkins home page-&gt;Manage Node-&gt;New Node, such as window-build-machine"></a>1. Jenkins home page-&gt;Manage Node-&gt;New Node, such as window-build-machine</h3><h4 id="2-List-windows-agent-settings"><a href="#2-List-windows-agent-settings" class="headerlink" title="2. List windows agent settings"></a>2. List windows agent settings</h4><table><thead><tr><th>Items</th><th>Settings</th></tr></thead><tbody><tr><td>Name</td><td>window-build-machine</td></tr><tr><td>Description</td><td>used for windows build</td></tr><tr><td>of executors</td><td>1</td></tr><tr><td>Remote root directory</td><td>C:\agent</td></tr><tr><td>Labels</td><td>windows, build</td></tr><tr><td>Usage</td><td>Use this node as much as possible</td></tr><tr><td>Launch method</td><td>Let Jenkins control this Windows slave as a Windows service</td></tr><tr><td>Administrator user name</td><td>.\Administrator</td></tr><tr><td>Password</td><td>mypassword</td></tr><tr><td>Host</td><td>192.168.1.111</td></tr><tr><td>Run service as</td><td>Use Administrator account given above</td></tr><tr><td>Availability</td><td>Keep this agent online as much as paossible</td></tr></tbody></table><h4 id="3-Save-then-Connect"><a href="#3-Save-then-Connect" class="headerlink" title="3. Save then Connect"></a>3. Save then Connect</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[2019-05-11 01:32:50] [windows-slaves] Connecting to 192.168.1.111</span><br><span class="line">Checking <span class="keyword">if</span> Java exists</span><br><span class="line">java -version returned 1.8.0.</span><br><span class="line">[2019-05-11 01:32:50] [windows-slaves] Copying jenkins-slave.xml</span><br><span class="line">[2019-05-11 01:32:50] [windows-slaves] Copying slave.jar</span><br><span class="line">[2019-05-11 01:32:50] [windows-slaves] Starting the service</span><br><span class="line">[2019-05-11 01:32:50] [windows-slaves] Waiting <span class="keyword">for</span> the service to become ready</span><br><span class="line">[2019-05-11 01:32:55] [windows-slaves] Connecting to port 52,347</span><br><span class="line">&lt;===[JENKINS REMOTING CAPACITY]===&gt;Remoting version: 3.29</span><br><span class="line">This is a Windows agent</span><br><span class="line">Agent successfully connected and online</span><br></pre></td></tr></table></figure><h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><p>The following issues I met and how I fixed them.</p><h3 id="1-ERROR-Message-not-found-for-errorCode-0xC00000AC"><a href="#1-ERROR-Message-not-found-for-errorCode-0xC00000AC" class="headerlink" title="1. ERROR: Message not found for errorCode: 0xC00000AC"></a>1. ERROR: Message not found for errorCode: 0xC00000AC</h3><p>You need need to install JDK, and config JAVA environment variable.</p><h3 id="2-How-to-fix-add-windows-node-as-Windows-service-error"><a href="#2-How-to-fix-add-windows-node-as-Windows-service-error" class="headerlink" title="2. How to fix add windows node as Windows service error"></a>2. How to fix add windows node as Windows service error</h3><p>Ref to <a href="https://issues.jenkins-ci.org/browse/JENKINS-16418">JENKINS-16418</a>.</p><h3 id="3-org-jinterop-dcom-common-JIException-Message-not-found-for-errorCode-0x00000005"><a href="#3-org-jinterop-dcom-common-JIException-Message-not-found-for-errorCode-0x00000005" class="headerlink" title="3. org.jinterop.dcom.common.JIException: Message not found for errorCode: 0x00000005"></a>3. org.jinterop.dcom.common.JIException: Message not found for errorCode: 0x00000005</h3><p>Fixed permission for the following registry keys</p><ol><li>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Wow6432Node\CLSID{72C24DD5-D70A-438B-8A42-98424B88AFB8}</li><li>HKEY_CLASSES_ROOT\CLSID{76A64158-CB41-11D1-8B02-00600806D9B6}</li></ol><p>Steps to fix it</p><ul><li>Open â€˜regeditâ€™ (as Administrator), Find (Ctrl+F) the registry key: â€œ{72C24DD5-D70A-438B-8A42-98424B88AFB8}â€ in HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Wow6432Node\CLSID</li><li>Right click and select â€˜Permissionsâ€™, Change owner to administrators group (Advancedâ€¦).</li><li>Change permissions for administrators group. Grant Full Controlã€‚</li><li>Change owner back to TrustedInstaller (user is â€œNT Service\TrustedInstallerâ€ on local machine)</li></ul><p>Repeat the above steps to fix permission for HKEY_CLASSES_ROOT\CLSID{76A64158-CB41-11D1-8B02-00600806D9B6}</p><p>Finally, Restart Remote Registry Service (Administrative Tools &#x2F; Services).</p><h3 id="4-ERROR-Unexpected-error-in-launching-an-agent"><a href="#4-ERROR-Unexpected-error-in-launching-an-agent" class="headerlink" title="4. ERROR: Unexpected error in launching an agent"></a>4. ERROR: Unexpected error in launching an agent</h3><p>This is probably a bug in Jenkins.</p><ol><li>Login remote machine and open Services find <code>jenkinsslave-C__agent</code></li><li>Set startup type: Automatic</li><li>Log On: select This account, type correct account and password</li><li>start jenkinsslave-C__agent</li></ol><h3 id="5-Caused-by-org-jinterop-dcom-common-JIRuntimeException-Message-not-found-for-errorCode-0x800703FA"><a href="#5-Caused-by-org-jinterop-dcom-common-JIRuntimeException-Message-not-found-for-errorCode-0x800703FA" class="headerlink" title="5. Caused by: org.jinterop.dcom.common.JIRuntimeException: Message not found for errorCode: 0x800703FA"></a>5. Caused by: org.jinterop.dcom.common.JIRuntimeException: Message not found for errorCode: 0x800703FA</h3><p>Slave under domain account, If your slave is running under a domain account and you get an error code 0x800703FA, change a group policy:</p><ol><li>open the group policy editor (gpedit.msc)</li><li>go to Computer Configuration-&gt;Administrative Templates-&gt;System-&gt; UserProfiles, â€œDo not forcefully unload the user registry at user logoffâ€</li><li>Change the setting from â€œNot Configuredâ€ to â€œEnabledâ€, which disables the new User Profile Service feature (â€˜DisableForceUnloadâ€™ is the value added to the registry)</li></ol><h3 id="6-ERROR-Message-not-found-for-errorCode-0xC0000001-Caused-by-jcifs-smb-SmbException-Failed-to-connect-0-0-0-0-10-xxx-xxx-xxx"><a href="#6-ERROR-Message-not-found-for-errorCode-0xC0000001-Caused-by-jcifs-smb-SmbException-Failed-to-connect-0-0-0-0-10-xxx-xxx-xxx" class="headerlink" title="6. ERROR: Message not found for errorCode: 0xC0000001 Caused by: jcifs.smb.SmbException: Failed to connect: 0.0.0.0&lt;00&gt;&#x2F;10.xxx.xxx.xxx"></a>6. ERROR: Message not found for errorCode: 0xC0000001 Caused by: jcifs.smb.SmbException: Failed to connect: 0.0.0.0&lt;00&gt;&#x2F;10.xxx.xxx.xxx</h3><p>Need to enable SMB1</p><ol><li>Search in the start menu for â€˜Turn Windows features on or offâ€™ and open it.</li><li>Find â€˜SMB1.0&#x2F;CIFS File Sharing Supportâ€™ in the list of optional features that appears, and select the checkbox next to it.</li><li>Click OK and Windows will add the selected feature.</li></ol><p>Youâ€™ll be asked to restart your computer as part of this process.</p><h3 id="7-NET-Framework-2-0-or-later-is-required-on-this-computer-to-run-a-Jenkins-agent-as-a-Windows-service"><a href="#7-NET-Framework-2-0-or-later-is-required-on-this-computer-to-run-a-Jenkins-agent-as-a-Windows-service" class="headerlink" title="7. .NET Framework 2.0 or later is required on this computer to run a Jenkins agent as a Windows service"></a>7. .NET Framework 2.0 or later is required on this computer to run a Jenkins agent as a Windows service</h3><p>Need to upgrade your .NET Framework. Here is a <a href="https://shenxianpeng.github.io/2020/07/jenkins-windows-agent-connect-problem/">link</a> for update .NET Framework.</p><h3 id="6-more-connect-jenkins-agent-problem-on-windows"><a href="#6-more-connect-jenkins-agent-problem-on-windows" class="headerlink" title="6. more connect jenkins agent problem on windows"></a>6. more connect jenkins agent problem on windows</h3><p>Please refer to this link <a href="https://github.com/jenkinsci/windows-slaves-plugin/blob/master/docs/troubleshooting.adoc">https://github.com/jenkinsci/windows-slaves-plugin/blob/master/docs/troubleshooting.adoc</a></p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»æµ‹è¯•åˆ°å¼€å‘çš„äº”ä¸ªæœˆ</title>
      <link href="/2018/12/from-qa-to-dev/"/>
      <url>/2018/12/from-qa-to-dev/</url>
      
        <content type="html"><![CDATA[<p>æ¯å½“å·¥ä½œé—²æš‡ï¼Œæˆ‘éƒ½ä¼šæ—¶å¸¸æƒ³èµ·å¥½ä¹…æ²¡æœ‰æ›´æ–°å¾®ä¿¡å…¬ä¼—å·çš„æ–‡ç« äº†ï¼Œæ€»æƒ³ç­‰å·¥ä½œä¸å¿™çš„æ—¶å€™èµ¶ç´§è·Ÿå¤§å®¶åˆ†äº«æˆ‘ä»æµ‹è¯•è½¬å¼€å‘è¿™æ®µæ—¶é—´çš„ç»å†å’Œæ„Ÿå—ï¼Œä½†å·¥ä½œæ€»æ˜¯æœ‰å¿™ä¸å®Œçš„å¿™ï¼Œä¸€åˆ»éƒ½åœä¸ä¸‹æ¥ã€‚</p><p>ç»ˆäºç­‰åˆ°è¿™ä¸€å‘¨æœ‰ä¸¤å¤©å·¥ä½œä¸æ˜¯é‚£ä¹ˆå¿™ç¢Œäº†ï¼Œæ‰å†³å®šå°†å‰å‡ å¤©å†™åˆ°ä¸€åŠçš„æ–‡ç« æ›´æ–°å®Œã€‚è¿™æ˜¯æˆ‘è¿™å‡ ä¸ªæœˆä¸‹æ¥æ„Ÿå—æœ€è½»æ¾çš„ä¸¤å¤©ï¼Œæš‚æ—¶æ²¡æœ‰bugéœ€è¦å»è°ƒæŸ¥å’Œæµ‹è¯•ï¼Œä¸ç”¨å»çœ‹åå‡ å¹´çš„Cä»£ç ï¼Œç»ˆäºæœ‰å¤§å—æ—¶é—´å»å†™æˆ‘è´Ÿè´£çš„Python Clientç«¯ä»£ç äº†ã€‚è¿™ç§å†™ç€ä»£ç ï¼Œå¬ç€æ­Œæ›²å»é‡æ„ï¼ŒDebugï¼Œä¿®æ”¹Unit Test Suiteæ„Ÿè§‰çœŸæ˜¯å¹¸ç¦ã€‚</p><p>å¹¸ç¦çš„æ—¶å…‰æ€»æ˜¯çŸ­æš‚çš„ï¼Œä»Šå¤©å°±åˆæ¥äº†ä¸¤ä¸ªBugéœ€è¦å»è°ƒæŸ¥ Îµ&#x3D;(Â´Î¿ï½€*)))å”‰â€¦</p><p>åˆæŠŠæˆ‘æ‰“å›åŸå½¢ï¼Œè°ƒæŸ¥å¤§åŠå¤©ä¹‹åå‘ç°åŸæ¥æ˜¯QAæµ‹çš„ä¸å¯¹ï¼Œå¯ä»¥æ¾å£æ°”æ™šä¸Šå¯ä»¥ä¸ç”¨å·¥ä½œæ›´æ–°ä¸‹å¾®ä¿¡å…¬ä¼—å·äº†ã€‚</p><p>è¿™äº”ä¸ªæœˆæ¥ï¼Œå‡ ä¹æ¯å¤©éƒ½æ˜¯ç™½å¤©å…«å°æ—¶ï¼Œæ™šä¸Šç»§ç»­èƒŒç€ç”µè„‘å›å®¶å‡†å¤‡ç»§ç»­å·¥ä½œï¼Œå‘¨æ—¥å¶å°”å»å…¬å¸ï¼Œç»å¸¸åœ¨å®¶å­¦ä¹ ã€‚å› ä¸ºè§’è‰²çš„è½¬å˜ï¼Œæ–°çš„é¡¹ç›®ï¼Œéœ€è¦å­¦ä¹ çš„åœ°æ–¹å¾ˆå¤šã€‚ä»ä¸šåŠ¡åˆ°æŠ€æœ¯ï¼Œå†åŠ ä¸Šäº§å“å‘å¸ƒåœ¨å³ï¼Œä½œä¸ºä¸€åå¼€å‘æ–°äººä¹Ÿè‚©è´Ÿèµ·Bug Fixçš„ä»»åŠ¡ï¼Œåå¹´å‰çš„ä»£ç ï¼Œå…¨è‹±æ–‡çš„æ–‡æ¡£ï¼Œå¤æ‚çš„ç³»ç»Ÿï¼Œå¦‚æœä¸å…¨åŠ›ä¸€æï¼ŒçœŸæ‹…å¿ƒè‡ªå·±è½¬å‹å¤±è´¥ï¼Œé‚£å°±å¤ªæ‰“è„¸äº†ã€‚</p><p>ä¸€å¤©çš„å·¥ä½œå¿™ç¢Œå’Œå‹åŠ›ï¼Œä½¿å¾—æˆ‘æ™šä¸Šæ€»æ˜¯åƒçš„åœä¸ä¸‹æ¥ï¼Œåƒé¥­æ˜¯æˆ‘ä¸€å¤©å½“ä¸­æœ€è½»æ¾çš„æ—¶åˆ»ã€‚å»å¹´æˆ‘è·Ÿåˆ«äººæ‰“èµŒå‡è‚¥èµ¢å¥–é‡‘ï¼Œæˆ‘æ¯«æ— æ€¨å¿µçš„æ‹¿åˆ°äº†ç¬¬ä¸€çš„å¥–é‡‘ï¼Œå¯æ˜¯ä»Šå¹´å†å’Œåˆ«äººæ‰“èµŒå‡è‚¥ï¼Œè‡³ä»Šæˆ‘éƒ½è¿˜æ²¡å¼€å§‹ï¼Œé©¬ä¸Šå¹´åº•äº†ï¼Œè¾“æ‰å¥–é‡‘æ˜¯æ¯«æ— æ‚¬å¿µçš„ã€‚æ€»ç»“ä¸‹æ¥ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºä»Šå¹´å·¥ä½œå¤ªå¿™ï¼Œå·¥ä½œå‹åŠ›å¤§çš„ç¼˜æ•…ï¼Œä½¿å¾—æˆ‘æ— æ³•åœ¨å…«å°æ—¶ä¹‹ä½™å®‰å¿ƒå»ç»§ç»­ç»ƒä¹ å‰ä»–ï¼Œåškeepï¼Œå¹´å‡è¿˜æ²¡æ¥å¾—åŠä¼‘ï¼ŒçœŸæ˜¯è®¡åˆ’ä¸å¦‚å˜åŒ–å¿«ã€‚</p><p>è™½ç„¶æˆ‘è¿˜æ˜¯ä¸ªå°å¼€å‘ï¼Œå½“è§’è‰²å˜äº†ï¼Œè§’åº¦ä¹Ÿä¼šæœ‰å˜åŒ–ã€‚</p><h2 id="è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯æœ¬åˆ†ï¼ŒDevOpsæ˜¯é˜¶æ¢¯"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯æœ¬åˆ†ï¼ŒDevOpsæ˜¯é˜¶æ¢¯" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯æœ¬åˆ†ï¼ŒDevOpsæ˜¯é˜¶æ¢¯"></a>è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯æœ¬åˆ†ï¼ŒDevOpsæ˜¯é˜¶æ¢¯</h2><p>è¿™å‡ å¹´ä¸‹æ¥ç›¸ä¿¡ä½ ä¹Ÿä¼šçœŸåˆ‡æ„Ÿå—åˆ°ï¼Œå¦‚æœä¸€åæµ‹è¯•äººå‘˜ä¸æ‡‚è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¸ä¼šå†™è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼Œä¸ä½†éš¾æœ‰å‡èŒæˆ–æ˜¯è·³æ§½çš„æœºä¼šï¼Œå¾ˆæœ‰å¯èƒ½ä¼šè¢«ä¼ä¸šæ‰€æ·˜æ±°ã€‚</p><p>ä¸ªäººè§‰å¾—DevOpsæ˜¯æœªæ¥ä¸€æ®µæ—¶é—´å¾ˆå¤šä¼ä¸šè¦èµ°çš„è·¯ï¼Œä¸€èˆ¬çš„äºŒçº¿åŸå¸‚èƒ½æŠŠDevOpsè®²æ˜ç™½å¹¶ä¸”å®æ–½çš„äººå¤ªå°‘äº†ï¼Œæ‰€ä»¥å°½æ—©æŒæ¡å®æ–½DevOpsçš„äººï¼Œå°±æœ‰æœºä¼šæˆä¸ºDevOpsæ•™ç»ƒæˆ–æ˜¯æµ‹è¯•æ¶æ„å¸ˆè¿™æ ·çš„è§’è‰²ã€‚</p><h2 id="æ²¡æœ‰åšå¥½æŠ—å‹çš„å‡†å¤‡ï¼Œä¸è¦å»åšå¼€å‘"><a href="#æ²¡æœ‰åšå¥½æŠ—å‹çš„å‡†å¤‡ï¼Œä¸è¦å»åšå¼€å‘" class="headerlink" title="æ²¡æœ‰åšå¥½æŠ—å‹çš„å‡†å¤‡ï¼Œä¸è¦å»åšå¼€å‘"></a>æ²¡æœ‰åšå¥½æŠ—å‹çš„å‡†å¤‡ï¼Œä¸è¦å»åšå¼€å‘</h2><p>è¿™å‡ ä¸ªæœˆæ¥é‡åˆ°å‹åŠ›éå¸¸å¤šï¼Œä»åˆšå¼€å§‹çš„å­¦ä¹ Cè¯­è¨€ï¼Œåˆ°Cè¯­è¨€è€ƒæ ¸ï¼›ä»å­¦ä¹ å…¨è‹±æ–‡çš„ä¸šåŠ¡æ–‡æ¡£ï¼Œåˆ°ä¸šåŠ¡æ–‡æ¡£çš„åˆ†äº«ï¼ˆä¹Ÿæ˜¯ä¸€ç§è€ƒæ ¸ï¼‰ï¼›ä»è°ƒç ”Cä»£ç çš„ä»£ç è¦†ç›–ç‡ã€Gitåˆ†äº«ï¼Œåˆ°è°ƒæŸ¥å¹¶è§£å†³Bugï¼›ä»æ¯å¤©çš„ç«™ç«‹ä¼šæ±‡æŠ¥åˆ°æ¯å‘¨ä¸å›½å¤–åŒäº‹çš„ä¾‹ä¼šã€‚ç»ˆäºç­‰åˆ°ä¹æœˆä»½ï¼ŒTitleä»Quality Assurance Engineerå˜æˆäº†Software Engineerï¼Œè¿™å…¶ä¸­çš„å‹åŠ›ã€ç—›è‹¦å’ŒçŸ­æš‚çš„å–œæ‚¦åªæœ‰èµ°è¿‡çš„äººæ‰çŸ¥é“ã€‚</p><h2 id="ä¸å¹´é¾„æƒ³åŒ¹é…çš„èƒ½åŠ›"><a href="#ä¸å¹´é¾„æƒ³åŒ¹é…çš„èƒ½åŠ›" class="headerlink" title="ä¸å¹´é¾„æƒ³åŒ¹é…çš„èƒ½åŠ›"></a>ä¸å¹´é¾„æƒ³åŒ¹é…çš„èƒ½åŠ›</h2><p>è¿™ç‚¹éå¸¸é‡è¦ï¼Œå¦‚æœç°åœ¨é—®ä½ ï¼Œä½ ä¸åˆšæ¯•ä¸šä¸¤ä¸‰å¹´çš„åŒè¡Œå¹´è½»äººæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿå¦‚æœä½ ä¸èƒ½è‚¯å®šå’Œæ¸…æ¥šçš„è¯´å‡ºè‡ªå·±ä¼˜åŠ¿çš„è¯ï¼Œé‚£å°±è¦å¥½å¥½åæ€ä¸€ä¸‹äº†ã€‚</p><p>å¦‚æœä»å¼€å‘è§’åº¦æ¥è¯´ï¼Œæˆ‘ç°åœ¨å°±æ˜¯ä¸å¹´é¾„ä¸ç›¸åŒ¹é…çš„èƒ½åŠ›ï¼Œå› æ­¤æµ‹è¯•ç›¸å…³çš„æŠ€èƒ½ä»¥åŠDevOpsç›¸å…³çŸ¥è¯†ä¾æ—§æ˜¯æˆ‘è¦å¥½å¥½æŒæ¡çš„åŠŸè¯¾ã€‚</p><h2 id="å­¦å¥½è‹±è¯­"><a href="#å­¦å¥½è‹±è¯­" class="headerlink" title="å­¦å¥½è‹±è¯­"></a>å­¦å¥½è‹±è¯­</h2><p>å¯¹äºå›½å†…å…¬å¸æ¥è¯´ï¼Œå·¥ä½œä¸Šä¸ä¼šç”¨åˆ°è‹±è¯­ï¼Œä½†æˆ‘æƒ³è¯´å¦‚æœæƒ³åœ¨æµ‹è¯•å’Œå¼€å‘é¢†åŸŸæœ‰æ›´é•¿è¿œå‘å±•ï¼Œè‹±æ–‡éå¸¸é‡è¦ã€‚ä¸€èˆ¬æœ€æµè¡Œå¼€æºçš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ã€æŠ€æœ¯ã€DevOpsç›¸å…³çš„å·¥å…·ä»¥åŠæœç´¢æœ€æœ‰æ•ˆçš„è§£å†³é—®é¢˜çš„æ–¹æ¡ˆä¸€èˆ¬éƒ½æ˜¯è‹±æ–‡ã€‚å¦‚æœä½ çš„è‹±è¯­ä¸å¥½ï¼ŒåšæŒä¸€å¹´åŠè½½å»ç¡¬å•ƒä¸€æ‰‹è‹±æ–‡èµ„æ–™ï¼Œå½¢æˆä¹ æƒ¯ï¼Œå—ç›Šç»ˆç”Ÿã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€å—æ¬¢è¿çš„ Python è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶æ¨è</title>
      <link href="/2018/09/most-popular-python-automated-testing-framework/"/>
      <url>/2018/09/most-popular-python-automated-testing-framework/</url>
      
        <content type="html"><![CDATA[<p>éšç€æŠ€æœ¯çš„è¿›æ­¥å’Œè‡ªåŠ¨åŒ–æŠ€æœ¯çš„å‡ºç°ï¼Œå¸‚é¢ä¸Šå‡ºç°äº†ä¸€äº›è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ã€‚åªéœ€è¦è¿›è¡Œä¸€äº›é€‚ç”¨æ€§å’Œæ•ˆç‡å‚æ•°çš„è°ƒæ•´ï¼Œè¿™äº›è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å°±èƒ½å¤Ÿå¼€ç®±å³ç”¨ï¼Œå¤§å¤§èŠ‚çœäº†å¼€å‘æ—¶é—´ã€‚</p><p>æœ¬æ–‡æ•´ç†äº†å½“å‰æœ€å—æ¬¢è¿çš„ Python è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ã€‚</p><h2 id="Robot-Framework"><a href="#Robot-Framework" class="headerlink" title="Robot Framework"></a>Robot Framework</h2><p>è¿™æ˜¯æœ€æµè¡Œçš„å¼€æº Python è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œè¡¨æ ¼å¼çš„æµ‹è¯•æ•°æ®è¯­æ³•å’Œå…³é”®è¯é©±åŠ¨æµ‹è¯•ä½¿å¾—å®ƒåœ¨å…¨çƒçš„æµ‹è¯•äººå‘˜ä¸­éå¸¸æµè¡Œã€‚å®ƒè¿˜æ‹¥æœ‰ä¼—å¤šå¯ç”¨çš„å·¥å…·å’Œåº“ï¼Œå¹¶ä¸”ç•™æœ‰ API æ‰©å±•ç©ºé—´ï¼Œä½¿å¾—è¿™ä¸ªæ¡†æ¶éå¸¸å…ˆè¿›å’Œå¥å£®ã€‚</p><p>Robot Framework å®Œå…¨ç”¨ Python å¼€å‘ï¼Œå¯¹äºéªŒæ”¶æµ‹è¯•éå¸¸æœ‰ç”¨ã€‚è¯¥æ¡†æ¶å¯ä»¥è¿è¡Œåœ¨ Java å’Œ.NET ç¯å¢ƒï¼ŒåŒæ—¶æ”¯æŒè·¨å¹³å°ï¼Œå¦‚ Windowsã€MacOS å’Œ Linuxã€‚å®ƒæ— ç–‘æ˜¯æœ€æ˜“ç”¨çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œèƒ½å…è®¸å¼€å‘è€…è¿›è¡Œå¹¶è¡Œæµ‹è¯•ã€‚</p><h2 id="RedwoodHQ"><a href="#RedwoodHQ" class="headerlink" title="RedwoodHQ"></a>RedwoodHQ</h2><p>è¿™æ˜¯ä¸€ä¸ªæµè¡Œçš„è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œå®ƒä¹‹æ‰€ä»¥æµè¡Œæ˜¯å› ä¸ºå®ƒæ”¯æŒå¤§éƒ¨åˆ†æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Javaã€Pythonã€C# ç­‰ã€‚å®ƒè¿˜æ”¯æŒå¤šä¸ªæµ‹è¯•äººå‘˜åœ¨ä¸€ä¸ªå¹³å°ä¸Šåä½œå¹¶è¿è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚</p><p>RedwoodHQ æœ‰ä¸€ä¸ªå†…ç½®çš„ IDEï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰ï¼Œå¯ä»¥åœ¨é‚£é‡Œåˆ›å»ºã€ä¿®æ”¹ä»¥åŠè¿è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚RedwoodHQ æ˜¯å¯¹ç”¨æˆ·æœ€å‹å¥½æˆ–å¯¹æµ‹è¯•äººå‘˜æœ€å‹å¥½çš„å¹³å°ä¹‹ä¸€ï¼Œå®ƒå…³æ³¨ä¸€ä¸ªé‡å¤§é¡¹ç›®çš„å…¨éƒ¨æµ‹è¯•è¿‡ç¨‹ã€‚</p><h2 id="Jasmine"><a href="#Jasmine" class="headerlink" title="Jasmine"></a>Jasmine</h2><p>è¿™æ˜¯ä¸€å¥— Javascript è¡Œä¸ºé©±åŠ¨å¼€å‘æµ‹è¯•æ¡†æ¶ï¼ˆBDDï¼‰ï¼Œä¸ä¾èµ–äºå…¶ä»–ä»»ä½•æ¡†æ¶å’Œ DOMï¼Œé€‚ç”¨äºä»»ä½•ä½¿ç”¨ JavaScript çš„åœ°æ–¹ã€‚é™¤äº† JavaScript ä¹‹å¤–ï¼ŒJasmine è¿˜è¢«ç”¨äº Python å’Œ Ruby è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p><p>å› æ­¤ï¼Œä½¿ç”¨ Jasmine å¯ä»¥å¹¶è¡Œè¿è¡Œå®¢æˆ·ç«¯æµ‹è¯•ç”¨ä¾‹å’ŒæœåŠ¡ç«¯æµ‹è¯•ç”¨ä¾‹ã€‚å®ƒæ˜¯ä¸€ä¸ªå°†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å•å…ƒæµ‹è¯•ç»“åˆèµ·æ¥çš„å®Œç¾çš„æµ‹è¯•æ¡†æ¶ï¼Œè€Œä¸”è¢«è®¤ä¸ºæ˜¯æµ‹è¯•é¢†åŸŸçš„æœªæ¥ã€‚</p><h2 id="Pytest"><a href="#Pytest" class="headerlink" title="Pytest"></a>Pytest</h2><p>å¦‚æœé¡¹ç›®æ¯”è¾ƒå°ã€å¤æ‚åº¦æ¯”è¾ƒä½ï¼ŒPytest æ˜¯æœ€é€‚åˆçš„è‡ªåŠ¨åŒ–æµ‹è¯•å¹³å°ã€‚å¤§éƒ¨åˆ† Python å¼€å‘è€…ç”¨å®ƒæ¥è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚å®ƒä¹Ÿå…·æœ‰ Robot Framework æ‰€é—»åçš„éªŒæ”¶æµ‹è¯•èƒ½åŠ›ã€‚</p><p>Pytest æœ€å¥½çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯ï¼Œå®ƒæä¾›äº†æµ‹è¯•ç”¨ä¾‹çš„è¯¦ç»†å¤±è´¥ä¿¡æ¯ï¼Œä½¿å¼€å‘è€…å¯ä»¥å¿«é€Ÿå‡†ç¡®åœ°æ”¹æ­£é—®é¢˜ã€‚å®ƒè¿˜æœ‰å„ç§å¯ç”¨æ’ä»¶æ¥ç»™ç°æœ‰æµ‹è¯•æŠ€æœ¯å’Œæµ‹è¯•ç”¨ä¾‹å¢åŠ æ›´å¤šåŠŸèƒ½å’Œå¤šæ ·æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Automation </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åšå¥½åŠŸèƒ½æµ‹è¯•</title>
      <link href="/2018/08/how-to-do-functional-testing/"/>
      <url>/2018/08/how-to-do-functional-testing/</url>
      
        <content type="html"><![CDATA[<p>å½“ä½ ç¬¬ä¸€æ¬¡å¼€å§‹æ¥è§¦æµ‹è¯•è¿™ä¸ªè¡Œä¸šçš„æ—¶å€™ï¼Œé¦–å…ˆå¬è¯´çš„åº”è¯¥éƒ½æ˜¯åŠŸèƒ½æµ‹è¯•ã€‚</p><p>åŠŸèƒ½æµ‹è¯•æ˜¯é€šè¿‡ä¸€äº›æµ‹è¯•æ‰‹æ®µæ¥éªŒè¯å¼€å‘åšå‡ºçš„ä»£ç æ˜¯å¦ç¬¦åˆäº§å“éœ€æ±‚ã€‚è¿™äº›å¹´åŠŸèƒ½æµ‹è¯•å¥½åƒä¸å¤ªå—æ¬¢è¿äº†ï¼Œä¸å°‘åŒå­¦å¼€å§‹å°è¯•è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæµ‹è¯•å¼€å‘ç­‰ç­‰ï¼Œç»“æœæ˜¯åŠŸèƒ½æµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æµ‹è¯•å¼€å‘ä¸€æ ·éƒ½æ²¡åšå¥½ã€‚</p><p>æˆ‘ä»¬é€šå¸¸è®¤ä¸ºçš„åŠŸèƒ½æµ‹è¯•æ˜¯æ ¹æ®éœ€æ±‚ï¼Œé‡‡å–ä»¥ä¸‹æµ‹è¯•æµç¨‹ï¼šéœ€æ±‚åˆ†æï¼Œç”¨ä¾‹ç¼–å†™ï¼Œç”¨ä¾‹è¯„å®¡ï¼Œææµ‹éªŒè¯ï¼ŒBugå›å½’éªŒè¯ï¼Œä¸Šçº¿ä¸çº¿ä¸Šå›å½’ç­‰æµ‹è¯•ã€‚å¦‚æ­¤æ—¥å¤ä¸€æ—¥ï¼Œå¹´å¤ä¸€å¹´ï¼Œå¯æ˜¯ç­‰å‡†å¤‡æ¢å·¥ä½œçš„æ—¶å€™å´å¾—ä¸åˆ°è®¤å¯ï¼Œä½ ä¹Ÿé‡åˆ°è¿™ç§æƒ…å†µå—ï¼Ÿ</p><p>é‚£ä¹ˆå¦‚ä½•åšå¥½åŠŸèƒ½æµ‹è¯•ï¼ŸåŠŸèƒ½æµ‹è¯•ç”¨åˆ°å“ªäº›çŸ¥è¯†ï¼Ÿæœ‰å“ªäº›ç›¸å…³çš„å»ºè®®å‘¢ï¼Ÿ</p><h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><p>ä¸šåŠ¡æ–¹åœ¨æå‡ºéœ€æ±‚çš„æ—¶å€™ï¼Œäº§å“æ˜¯è¦åˆ†æè¿™ä¸ªéœ€æ±‚çš„ä»·å€¼ï¼Œå½±å“èŒƒå›´å’Œå®ç°ä»£ä»·çš„ã€‚åœ¨éœ€æ±‚è¯„å®¡çš„æ—¶å€™ï¼Œä½œä¸ºä¸€ä¸ªæµ‹è¯•äººå‘˜å¿…é¡»äº†è§£è¿™æ¬¡éœ€æ±‚çš„å†…å®¹ï¼Œå½±å“åˆ°å“ªäº›ç°æœ‰çš„åŠŸèƒ½ï¼Œæ¶‰åŠåˆ°çš„æ“ä½œç³»ç»Ÿæˆ–æ˜¯ç±»åˆ«ç­‰ï¼Œç„¶åå‡†ç¡®çš„è¯„ä¼°å‡ºå·¥ä½œé‡ï¼Œé˜²æ­¢å› è¯„ä¼°ä¸è¶³é€ æˆåæœŸæµ‹è¯•ä¸å……åˆ†ã€‚</p><p>å†è€…ï¼Œå…³æ³¨å¼€å‘å’Œäº§å“çš„è®¨è®ºï¼Œå…³æ³¨éœ€æ±‚æœ€åå¦‚ä½•å®ç°ï¼Ÿå…¶ä¸­åšå‡ºçš„å˜åŠ¨å’Œéš¾ç‚¹å°±æ˜¯æµ‹è¯•çš„æ—¶å€™å¿…é¡»é‡ç‚¹å…³æ³¨çš„éƒ¨åˆ†ï¼Œä¸èƒ½å› ä¸ºè¿™äº›æš‚æ—¶å’Œä½ æ²¡æœ‰å…³ç³»å°±ä¸å»å…³æ³¨ï¼Œé˜²æ­¢æ¬ å€ºè¶Šæ¥è¶Šå¤šï¼Œä¸èƒ½åšå¥½å……åˆ†çš„çš„æµ‹è¯•ã€‚</p><p>ç¬¬ä¸‰ï¼Œéœ€æ±‚è¯„å®¡ç»“æŸåï¼Œè¦æ±‚äº§å“æ›´æ–°æ­¤æ¬¡è¯„å®¡è¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ”¹åŠ¨éƒ¨åˆ†ï¼ŒåŒæ—¶ç¡®ä¿ä¹‹åçš„ä»»ä½•éœ€æ±‚å˜åŒ–éƒ½åŠæ—¶æ›´æ–°ã€‚</p><p>ç¬¬å››ï¼Œæ ¹æ®äº§å“éœ€æ±‚ï¼ŒåŒæ—¶ä¸åœ¨ä¼šäººå‘˜è¿›è¡Œæ¢è®¨ï¼Œè®¾è®¡æµ‹è¯•æ–¹æ¡ˆåŠæ—¶é—´å®‰æ’ï¼Œæ­¤æ—¶å¯ä»¥ç²—ç²’åº¦è€ƒè™‘ï¼Œæ—¶é—´ä¸Šè¦åˆç†ã€‚</p><h2 id="ç”¨ä¾‹è®¾è®¡ä¸è¯„å®¡"><a href="#ç”¨ä¾‹è®¾è®¡ä¸è¯„å®¡" class="headerlink" title="ç”¨ä¾‹è®¾è®¡ä¸è¯„å®¡"></a>ç”¨ä¾‹è®¾è®¡ä¸è¯„å®¡</h2><p>æµ‹è¯•ç”¨ä¾‹æ˜¯æ¯ä¸ªæµ‹è¯•äººå‘˜å·¥ä½œè¿‡ç¨‹ä¸­å¿…é¡»è¦å®Œæˆçš„å·¥ä½œï¼Œå®ƒå¯¹æµ‹è¯•å·¥ä½œèµ·åˆ°æŒ‡å¯¼ä½œç”¨ï¼Œä¹Ÿæ˜¯ç›¸å…³ä¸šåŠ¡çš„ä¸€ä¸ªæ–‡æ¡£æ²‰æ·€ã€‚åœ¨ä»¥å¾€é¢è¯•çš„ç»éªŒä¸­ï¼Œæœ‰è®¸å¤šäººçš„æµ‹è¯•ç”¨ä¾‹å†™çš„æ²¡æœ‰ç« æ³•ï¼Œä»–ä»¬æ˜¯å‡­ç€æ„Ÿè§‰å»å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿæ²¡æœ‰ä»ç”¨æˆ·çš„è§’åº¦æ¥æ€è€ƒå¦‚ä½•ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œå¯¹äºæµ‹è¯•ç”¨ä¾‹è®¾è®¡è¾ƒä¸ºå¸¸è§çš„æ–¹æ³•è®ºä¹Ÿä¸æ¸…æ¥šã€‚</p><p>å‡å¦‚é¢è¯•çš„æ—¶å€™ç»™ä½ ä¸€ä¸ªåœºæ™¯ï¼šä¸€ä¸ªå…¨æ–°çš„Appè¦å‘å¸ƒï¼Œå¦‚æœè®©ä½ æ¥æµ‹è¯•ï¼Œä½ èƒ½æƒ³åˆ°å“ªäº›æµ‹è¯•æ–¹æ¡ˆï¼Ÿå¦‚æœä½ åªèƒ½æƒ³åˆ°å¦‚ä½•å»æµ‹è¯•appçš„åŠŸèƒ½çš„è¯ï¼Œä½œä¸ºåŠŸèƒ½æµ‹è¯•äººå‘˜å°±è€ƒè™‘ä¸å¤Ÿå…¨é¢ã€‚æ­¤æ—¶é™¤äº†Appçš„åŠŸèƒ½ä»¥å¤–ï¼Œè¿˜åº”å…³æ³¨Appçš„å…¼å®¹æ€§ï¼Œæ˜“ç”¨æ€§ï¼Œæ¥å£çš„åŠŸèƒ½æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ï¼Œæ•°æ®çš„å­˜å‚¨ä»¥åŠå®¹ç¾æƒ…å†µç­‰ç­‰éƒ½åº”è€ƒè™‘åœ¨å†…ã€‚</p><p>æµ‹è¯•ç”¨ä¾‹å¯è®¾è®¡ä¸ºä¸¤ç±»ï¼š ä¸€ç±»æ˜¯å¼€å‘è‡ªæµ‹å’ŒéªŒæ”¶ææµ‹è¯•æ ‡å‡†çš„å†’çƒŸæµ‹è¯•ç”¨ä¾‹ï¼›ä¸€ç±»æ˜¯é’ˆå¯¹éœ€æ±‚çš„å…¨é¢æµ‹è¯•ç”¨ä¾‹ã€‚</p><p>ç¼–å†™å®Œæµ‹è¯•ç”¨ä¾‹åä¸»åŠ¨è”ç³»ç›¸å…³äººå‘˜è¿›è¡Œç”¨ä¾‹è¯„å®¡ï¼Œåœ¨è¯„å®¡è¿‡ç¨‹ä¸­åŠæ—¶ä¿®æ”¹ä¸åˆé€‚çš„ç”¨ä¾‹ã€‚</p><h2 id="æµ‹è¯•æµç¨‹ï¼Œæ³¨é‡é¡¹ç›®æ§åˆ¶"><a href="#æµ‹è¯•æµç¨‹ï¼Œæ³¨é‡é¡¹ç›®æ§åˆ¶" class="headerlink" title="æµ‹è¯•æµç¨‹ï¼Œæ³¨é‡é¡¹ç›®æ§åˆ¶"></a>æµ‹è¯•æµç¨‹ï¼Œæ³¨é‡é¡¹ç›®æ§åˆ¶</h2><p>é¡¹ç›®çš„æµç¨‹æ§åˆ¶åœ¨éœ€æ±‚å¼€å§‹çš„æ—¶å€™å°±åº”è¯¥é‡è§†èµ·æ¥ï¼Œåªæ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ²¡æœ‰æ„è¯†åˆ°è¿™æ˜¯æµ‹è¯•çš„å·¥ä½œï¼Œæœ‰çš„æ˜¯äº§å“æ¥æ§åˆ¶ï¼Œæœ‰çš„æ˜¯ä¸“é—¨çš„é¡¹ç›®ç»ç†æ¥æ§åˆ¶ã€‚</p><p>æµ‹è¯•äººå‘˜éœ€è¦æœ‰å…³æ³¨æ•´ä½“é¡¹ç›®çš„æ„è¯†ã€‚å¦‚æœä½ ä¸å…³æ³¨é¡¹ç›®è¿›åº¦ï¼Œä»€ä¹ˆæ—¶å€™ææµ‹ä»€ä¹ˆæ—¶å€™å¼€å§‹æµ‹è¯•ï¼Œé‚£ä¹ˆåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ä¼šé‡åˆ°æµ‹è¯•çš„å†…å®¹å’Œæœ€åˆçš„éœ€æ±‚ä¸ä¸€è‡´æ—¶å€™å°±ä¼šé¢å¤–éœ€è¦æ—¶é—´æ¥è§£å†³ï¼Œå¯¼è‡´é¡¹ç›®å»¶æœŸã€‚å¦å¤–ä¸»åŠ¨å…³æ³¨é¡¹ç›®ï¼Œé•¿æ­¤ä»¥å¾€ï¼Œä½ çš„è¿™ä»½ä¸»åŠ¨æ€§ä¹Ÿä¼šæ˜¯ä½ æœ‰æ•ˆçš„ç«äº‰åŠ›ã€‚</p><p>éœ€æ±‚ä¸€æ—¦æ˜ç¡®äº†ç”±ä½ æ¥è´Ÿè´£çš„æ—¶å€™ï¼Œå°±è¦æ—¶åˆ»æ¥å…³æ³¨é¡¹ç›®çš„æƒ…å†µã€‚ä¸­é—´å˜æ›´éœ€æ±‚çš„æ—¶å€™ï¼Œè¦è¯„ä¼°æ˜¯å¦å½±å“é¡¹ç›®è¿›åº¦ï¼Œå¦‚æœå½±å“äº†é‡æ–°è¿›è¡Œæ’æœŸã€‚å¦‚æœå¼€å‘ææµ‹è¯•æ™šäº†ï¼Œæ˜¯å¦å½±å“ä¸Šçº¿æ—¶é—´ï¼Œå¦‚æœå½±å“éœ€è¦åŠæ—¶è·Ÿç›¸å…³çš„äººå‘˜æ²Ÿé€šï¼Œå‘é£é™©é‚®ä»¶ï¼Œé€šçŸ¥å¤§å®¶è¯¦ç»†çš„æƒ…å†µã€‚</p><p>åŒæ—¶åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå‘ç°äº†bugéœ€è¦è¯¦ç»†æè¿°é—®é¢˜ï¼Œä»¥æ–¹ä¾¿å¼€å‘å»è¿›è¡Œé‡ç°å’Œä¿®æ”¹ã€‚åŒæ—¶ç»™bugå‡†ç¡®åˆ†çº§ï¼Œå®æ—¶è·Ÿè¸ªè¿›åº¦ï¼Œä¿è¯é¡¹ç›®é«˜è´¨é‡çš„æŒ‰æœŸå®Œæˆã€‚</p><h2 id="ä¸Šçº¿å›å½’ä¸é¡¹ç›®æ€»ç»“"><a href="#ä¸Šçº¿å›å½’ä¸é¡¹ç›®æ€»ç»“" class="headerlink" title="ä¸Šçº¿å›å½’ä¸é¡¹ç›®æ€»ç»“"></a>ä¸Šçº¿å›å½’ä¸é¡¹ç›®æ€»ç»“</h2><p>ä¸€ä¸ªéœ€æ±‚ä¸Šçº¿å®Œæˆåï¼Œè¦åŠæ—¶è¿›è¡Œçº¿ä¸Šå›å½’ï¼ŒåŒæ—¶å¿…é¡»å›å½’æˆ‘ä»¬åœ¨éœ€æ±‚è¯„å®¡çš„æ—¶å€™è€ƒè™‘åˆ°çš„å¯èƒ½å½±å“åˆ°çš„åŸæœ‰çš„åŠŸèƒ½ï¼Œä»¥ç¡®ä¿æ–°åŠŸèƒ½å®Œå…¨ä¸Šçº¿æˆåŠŸã€‚</p><p>åœ¨ä¸€ä¸ªé¡¹ç›®å®Œæˆåï¼Œæœ€å¥½æœ‰ä¸€ä»½ä¸ªäººæ€»ç»“æŠ¥å‘Šï¼Œæ€»ç»“æ•´ä¸ªé¡¹ç›®è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠæœ€åçš„è§£å†³åŠæ³•ï¼Œæœ‰å“ªäº›éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼Ÿæœ‰ä»€ä¹ˆå¯ä»¥å€Ÿé‰´çš„æ–¹æ¡ˆæˆ–æ˜¯æ”¹è¿›ç­–ç•¥ï¼Ÿé¡¹ç›®ä¸­æœ‰æ²¡æœ‰é€šç”¨æ€§çš„é—®é¢˜ç­‰ç­‰ã€‚</p><h2 id="èƒ½åŠ›çš„æ€»ç»“å’Œæ²‰æ·€"><a href="#èƒ½åŠ›çš„æ€»ç»“å’Œæ²‰æ·€" class="headerlink" title="èƒ½åŠ›çš„æ€»ç»“å’Œæ²‰æ·€"></a>èƒ½åŠ›çš„æ€»ç»“å’Œæ²‰æ·€</h2><p>åœ¨æ‰¾å·¥ä½œçš„æ—¶å€™ï¼Œå¾ˆå¤šåšåŠŸèƒ½æµ‹è¯•å¤šå¹´çš„åŒå­¦éƒ½é­é‡è¿‡é¢è¯•å¤±è´¥ï¼Œç©¶å…¶åŸå› ï¼Œæˆ‘è§‰å¾—æœ€æ ¸å¿ƒçš„åŸå› æ˜¯ï¼šä¸å…·å¤‡ç›¸åº”å·¥ä½œå¹´é™åº”è¯¥å…·å¤‡çš„èƒ½åŠ›ã€‚</p><p>æˆ‘ä»¬åº”è¯¥æ—¶å¸¸é—®è‡ªå·±ä¸€å¥è¯ï¼šç¦»å¼€ç°æœ‰çš„å¹³å°ï¼Œæˆ‘è¿˜æœ‰ä»€ä¹ˆï¼Ÿå¦‚æœä»…ä»…æ˜¯å¯¹ç°åœ¨å…¬å¸ä¸šåŠ¡å’Œå·¥å…·çš„ç†Ÿæ‚‰ï¼Œé‚£æ˜¯æ²¡æœ‰ä»»ä½•ä¼˜åŠ¿å¯è¨€çš„ã€‚</p><p>å¯¹åŒç±»ä¸šåŠ¡æµç¨‹çš„æŒæ¡ï¼Œé¡¹ç›®çš„æ•´ä½“æŠŠæ§ï¼Œå¿«é€Ÿäº†è§£ä¸šåŠ¡å¹¶èƒ½æ ¹æ®éœ€æ±‚é€‰æ‹©æµ‹è¯•æ–¹æ¡ˆï¼Œå¼•å…¥æé«˜æµ‹è¯•æ•ˆç‡æµ‹è¯•æ–¹æ¡ˆå’Œå·¥å…·ï¼Œæµ‹è¯•è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜çš„é¢„åˆ¤å’Œè§£å†³åŠæ³•ç­‰æ‰æ˜¯åŠŸèƒ½æµ‹è¯•äººå‘˜å¿…é¡»å…·å¤‡çš„èƒ½åŠ›ã€‚</p><p>è¿™äº›æ–¹é¢ä½ åšåˆ°äº†å—ï¼Ÿä¸è¦æŠ±æ€¨åŠŸèƒ½æµ‹è¯•å¦‚ä½•å¦‚ä½•ï¼Œè®¤æ¸…è¡Œä¸šç°çŠ¶å’Œè‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œåšå¥½è‡ªå·±çš„èŒä¸šè§„åˆ’ã€‚</p><p>å¦‚æœä½ ä¸å–„äºç¼–ç ï¼Œé‚£ä¹ˆåšåŠ¡ä¸“å®¶ä¹Ÿæ˜¯åŠŸèƒ½æµ‹è¯•äººå‘˜ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FunctionTest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšäº†9å¹´æµ‹è¯•ï¼Œæˆ‘ä¸ºä½•è½¬å¼€å‘ï¼Ÿ</title>
      <link href="/2018/07/why-i-move-to-development/"/>
      <url>/2018/07/why-i-move-to-development/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å‡ ä¸ªæœˆä»¥æ¥ä¸€ç›´æ²¡æœ‰æ›´æ–°å…¬ä¼—å·æ–‡ç« ï¼Œæ˜¯å› ä¸ºäº”æœˆå¼€å§‹ï¼Œå› ä¸ºé¡¹ç›®åŸå› æˆ‘æœ‰æœºä¼šè½¬ä¸ºå¼€å‘ï¼Œæˆ‘éå¸¸çæƒœè¿™ä¸€æœºä¼šï¼Œæ‰€ä»¥ä¸€ç›´åœ¨åŠªåŠ›å­¦ä¹ å¼€å‘ç›¸å…³çš„æŠ€èƒ½ã€‚</p><p>åšäº†9å¹´æµ‹è¯•ï¼Œæˆ‘ä¸ºä½•è½¬å¼€å‘ï¼Ÿ</p><p>ä»ä¸‰å¹´å‰æˆ‘åœ¨å¿ƒé‡Œå°±ç§ä¸‹äº†åšå¼€å‘çš„ç§å­ï¼Œå› ä¸ºè¿™äº›å¹´åšè‡ªåŠ¨åŒ–æµ‹è¯•çš„åŸå› ï¼Œåœ¨å†™äº†å¾ˆå¤šè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ä»£ç ä¹‹åï¼Œè§‰å¾—è‡ªå·±è¿˜æ˜¯å–œæ¬¢å†™ä»£ç ï¼Œæˆ‘æƒ³åœ¨æŠ€æœ¯ä¸Šæœ‰æ›´æ·±å…¥çš„å­¦ä¹ ï¼Œæ— ç–‘ä½œä¸ºå¼€å‘æ˜¯æœ€ç›´æ¥çš„åŠæ³•ï¼Œæ‰€ä»¥ä¸€ç›´åœ¨åŠªåŠ›å¤šçœ‹ã€å¤šå†™ä»£ç ï¼Œä¸€ç›´å‡†å¤‡ç€ç­‰å¾…èƒ½æˆä¸ºå¼€å‘æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ–æ˜¯å¼€å‘å·¥ç¨‹å¸ˆçš„é‚£ä¸€å¤©ã€‚</p><p>æœ€è¿‘èŒ¹ç‚³æ™Ÿçš„ä¸€ç¯‡æ–‡ç« æˆ‘çœ‹äº†ä¹Ÿå¾ˆå—å¯å‘ã€Šæˆ‘ä¸ºä½•ä»å¼€å‘è½¬æµ‹è¯•ï¼Œå¹¶åšæŒäº†16å¹´ï¼Œæˆ‘ä»¬æ­£å¥½æ˜¯ç›¸åçš„èŒä¸šå†ç¨‹ï¼Œè™½ç„¶å¦‚æ­¤ï¼Œä½†æ˜¯éƒ½æ˜¯æƒ³å¾€æ›´å¥½çš„èŒä¸šå‘å±•æ–¹å‘ä¸Šå»åŠªåŠ›ï¼Œä»–åœ¨è§†é¢‘é‡Œæåˆ°äº†å¾ˆå¤šæœªæ¥æµ‹è¯•å¯ä»¥åšçš„å·¥ä½œï¼Œä¸äº†è§£çš„å¯ä»¥å»çœ‹çœ‹ï¼Œå¯ä»¥å¼€é˜”å¤§å®¶çš„æ€è·¯ï¼Œä¸ªäººè§‰å¾—è‰¯å¥½çš„ä»£ç èƒ½åŠ›æ˜¯åšå¥½å·¥ç¨‹å¸ˆç›¸å…³çš„å·¥ä½œåŸºç¡€ã€‚æµ‹è¯•ä¸æ˜¯åªè¦è®¤çœŸä»”ç»†çš„ç‚¹ç‚¹ç‚¹å°±å¯ä»¥äº†ï¼Œä¸æ˜¯æµ‹è¯•è¿™å·¥ä½œæ›´é€‚åˆå¥³ç”Ÿï¼Œä¸æ˜¯åšæµ‹è¯•æ¯”åšå¼€å‘è½»æ¾ï¼Œä¸æ˜¯å¯ä»¥ä¸æ€è¿›å–è¿˜èƒ½é«˜æ•æ— å¿§ï¼Œåšå¥½æµ‹è¯•åŒæ ·éœ€è¦æ¯”åˆ«äººæ›´å¤šçš„åŠªåŠ›æ‰èƒ½çœ‹èµ·æ¥è½»è€Œæ˜“ä¸¾ã€‚</p><p>å› ä¸ºæˆ‘å­¦çš„æ˜¯æ¯•ä¸šä¹‹åå†æ²¡æ¥è§¦çš„Cè¯­è¨€ï¼Œåœ¨è¿™å‡ ä¸ªæœˆçš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ·±åˆ»ä½“ä¼šäº†åšå¼€å‘æˆ‘è¿˜æœ‰å¤ªå¤šæœªçŸ¥çš„é¢†åŸŸçŸ¥è¯†éœ€è¦å»å­¦ä¹ ï¼Œä½œä¸ºå¼€å‘è¯­è¨€éœ€è¦æ·±å…¥çš„å­¦ä¹ ï¼Œè¿™è·Ÿå­¦è‡ªåŠ¨åŒ–æµ‹è¯•ä¸ä¸€æ ·ï¼Œåˆå­¦è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬è¯­è¨€å¯ä»¥è¾¹ç”¨è¾¹æŸ¥è¾¹å­¦ï¼Œä½†Cè¯­è¨€ä¸ä¸€æ ·ï¼Œå®ƒéœ€è¦å¾ˆç³»ç»Ÿçš„å»å­¦ï¼Œä»æ•°ç»„ï¼ŒæŒ‡é’ˆï¼Œç»“æ„ä½“ï¼Œé“¾è¡¨ï¼ŒäºŒå‰æ ‘ï¼Œæ•°æ®æœºæ„éƒ½è¦ä¸€ä¸ªä¸ªçªç ´ï¼Œäº†è§£ç®—æ³•ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘åŸç†ç­‰ç­‰ã€‚</p><p>è™½ç„¶æ˜¯è½¬å¼€å‘ï¼Œä½†æ˜¯ä½œä¸ºæµ‹è¯•å‡ºèº«ï¼Œæˆ‘ä¼šä¸€å¦‚æ—¢å¾€çš„å…³æ³¨æµ‹è¯•ã€‚</p><p>å¸Œæœ›é€šè¿‡è§’è‰²çš„è½¬å˜èƒ½è®©æˆ‘æœ‰æ›´å…¨æ–¹ä½çš„è§’åº¦æ¥çœ‹å¾…äº§å“è´¨é‡ï¼Œæµ‹è¯•ç›¸å…³çš„æ€è€ƒå’ŒæŠ€æœ¯ï¼Œåˆ†äº«æ›´å¤šæœ‰ä»·å€¼çš„å†…å®¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C-print</title>
      <link href="/2018/07/c-print/"/>
      <url>/2018/07/c-print/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•æ‰“å°ä¸‹é¢çš„å­—ç¬¦ï¼Ÿ</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">$</span><br><span class="line">##</span><br><span class="line">$$$</span><br><span class="line">###</span><br><span class="line">$$$</span><br><span class="line">##</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ 1ï¼š</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> <span class="built_in">array</span>[] = &#123;<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;$&#x27;</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> row = <span class="number">1</span>; row &lt;= <span class="number">7</span>; row++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> hashNum = <span class="number">1</span>; hashNum &lt;= <span class="number">4</span> - <span class="built_in">abs</span>(<span class="number">4</span> - row); hashNum++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, <span class="built_in">array</span>[row % <span class="number">2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Language </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C - Score Input Sort Show</title>
      <link href="/2018/05/c-score-input-sort-show/"/>
      <url>/2018/05/c-score-input-sort-show/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 5</span></span><br><span class="line"><span class="comment">//Score Input Sort Show</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">input</span><span class="params">(<span class="type">double</span>[])</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">sortAsc</span><span class="params">(<span class="type">double</span>[])</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">sortDesc</span><span class="params">(<span class="type">double</span>[])</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">show</span><span class="params">(<span class="type">double</span>[])</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> scores[N];</span><br><span class="line">    input(scores);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[SORT ASC]\n&quot;</span>);</span><br><span class="line">    sortAsc(scores);</span><br><span class="line">    show(scores);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[SORT DESC]\n&quot;</span>);</span><br><span class="line">    sortDesc(scores);</span><br><span class="line">    show(scores);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">input</span><span class="params">(<span class="type">double</span> socres[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Please enter %d student&#x27;s score: &quot;</span>, i+<span class="number">1</span>);</span><br><span class="line">        scanf_s(<span class="string">&quot;%lf&quot;</span>, &amp;socres[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">sortAsc</span><span class="params">(<span class="type">double</span> socres[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    <span class="type">double</span> temp;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N - <span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; N - i - <span class="number">1</span>; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (socres[j] &gt; socres[j + <span class="number">1</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    temp = socres[j];</span><br><span class="line">                    socres[j] = socres[j + <span class="number">1</span>];</span><br><span class="line">                    socres[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">sortDesc</span><span class="params">(<span class="type">double</span> socres[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    <span class="type">double</span> temp;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N - <span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; N - i - <span class="number">1</span>; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (socres[j] &lt; socres[j + <span class="number">1</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    temp = socres[j];</span><br><span class="line">                    socres[j] = socres[j + <span class="number">1</span>];</span><br><span class="line">                    socres[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">show</span><span class="params">(<span class="type">double</span> scores[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;********************************************\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Chinese\tMath\tEnglish\tPhysics\tChemistry\t\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.2lf\t&quot;</span>, scores[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n********************************************\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Language </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C-Language è®¡ç®—å›¾å½¢çš„é¢ç§¯</title>
      <link href="/2018/05/calculate-graph-area/"/>
      <url>/2018/05/calculate-graph-area/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è®¡ç®—å›¾å½¢çš„é¢ç§¯ï¼š</span></span><br><span class="line"><span class="comment">1. åœ†çš„é¢ç§¯ = Ï€ * radius * radius</span></span><br><span class="line"><span class="comment">2. çŸ©å½¢é¢ç§¯ = weight * height</span></span><br><span class="line"><span class="comment">3. ä¸‰è§’å½¢é¢ç§¯ = 1/2 * weight * height</span></span><br><span class="line"><span class="comment">@author Xianpeng Shen</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">calcCircle</span><span class="params">(<span class="type">double</span>)</span>;</span><br><span class="line"><span class="type">double</span> <span class="title function_">calcSquare</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span>;</span><br><span class="line"><span class="type">double</span> <span class="title function_">calcTriangle</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">validate</span><span class="params">(<span class="type">double</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> choice;                <span class="comment">// ç”¨æˆ·é€‰æ‹©</span></span><br><span class="line">    <span class="type">double</span> area;               <span class="comment">// å›¾å½¢é¢ç§¯</span></span><br><span class="line">    <span class="type">double</span> radius;             <span class="comment">// åœ†åŠå¾„</span></span><br><span class="line">    <span class="type">double</span> weight, height;     <span class="comment">// å›¾å½¢çš„å®½å’Œé«˜</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1. åœ†\n2. çŸ©å½¢\n3. ä¸‰è§’å½¢\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æœ¬ç³»ç»Ÿæ”¯æŒä¸‰ç§å›¾å½¢é¢ç§¯è®¡ç®—ï¼Œè¯·é€‰æ‹©ï¼š&quot;</span>);</span><br><span class="line">    scanf_s(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">    <span class="keyword">while</span> (choice &gt; <span class="number">3</span> || choice &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;åªèƒ½è¾“å…¥1~3æ•´æ•°ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;</span>);</span><br><span class="line">        scanf_s(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (choice)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥åœ†çš„åŠå¾„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            scanf_s(<span class="string">&quot;%lf&quot;</span>, &amp;radius);</span><br><span class="line">            <span class="keyword">if</span> (!(validate(radius))) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œè¯·é‡æ–°è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼š&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (!validate(radius));</span><br><span class="line">        area = calcCircle(radius);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥çŸ©å½¢çš„é•¿å’Œå®½ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            scanf_s(<span class="string">&quot;%lf%lf&quot;</span>, &amp;weight, &amp;height);</span><br><span class="line">            <span class="keyword">if</span> (!validate(weight) || !validate(height)) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œè¯·é‡æ–°è¾“å…¥ä¸¤ä¸ªæ­£æ•°ï¼š&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (!validate(weight) || !validate(height));</span><br><span class="line">        area = calcSquare(weight, height);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥ä¸‰è§’å½¢çš„åº•å’Œé«˜ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            scanf_s(<span class="string">&quot;%lf%lf&quot;</span>, &amp;weight, &amp;height);</span><br><span class="line">            <span class="keyword">if</span> (!validate(weight) || !validate(height)) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œè¯·é‡æ–°è¾“å…¥ä¸¤ä¸ªæ­£æ•°ï¼š&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (!validate(weight) || !validate(height));</span><br><span class="line">        area = calcTriangle(weight, height);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;åªèƒ½è¾“å…¥1~3æ•´æ•°ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å›¾å½¢é¢ç§¯ä¸ºï¼š%.2lf\n&quot;</span>, area);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">calcCircle</span><span class="params">(<span class="type">double</span> radius)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3.14</span> * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">calcSquare</span><span class="params">(<span class="type">double</span> weight, <span class="type">double</span> height)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> weight * height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">calcTriangle</span><span class="params">(<span class="type">double</span> weight, <span class="type">double</span> height)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> weight * height / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">validate</span><span class="params">(<span class="type">double</span> num)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> num &gt; <span class="number">0</span>;        <span class="comment">// å¦‚æœ num&gt;0, è¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œè¡¨ç¤ºçœŸã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Language </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C-Language è‡ªå®šä¹‰å‡½æ•°</title>
      <link href="/2018/05/c-self-defining-function/"/>
      <url>/2018/05/c-self-defining-function/</url>
      
        <content type="html"><![CDATA[<p>æ±‚æ¬¡å¹‚å‡½æ•°power</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">power</span><span class="params">(<span class="type">double</span>, <span class="type">int</span>)</span>;  <span class="comment">// å½¢å¼å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2lfçš„%dæ¬¡å¹‚ç­‰äº:%.2lf\n&quot;</span>, <span class="number">5.2</span>, <span class="number">2</span>, power(<span class="number">5.2</span>, <span class="number">2</span>));  <span class="comment">//å®é™…å‚æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">power</span><span class="params">(<span class="type">double</span> num1, <span class="type">int</span> num2)</span> <span class="comment">// å½¢å¼å‚æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> result = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num2; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        result *= num1; <span class="comment">// ç´¯ä¹˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Language </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çœ¼ä¸­çš„é«˜çº§æµ‹è¯•å·¥ç¨‹å¸ˆ</title>
      <link href="/2018/05/senior-test-engineer/"/>
      <url>/2018/05/senior-test-engineer/</url>
      
        <content type="html"><![CDATA[<p>æ»¡è¶³ä»€ä¹ˆæ ·çš„æŠ€æœ¯å’Œç»éªŒæ‰ç®—é«˜çº§å·¥ç¨‹å¸ˆå‘¢ï¼Ÿè¯´è¯´æˆ‘å¿ƒä¸­çš„é«˜çº§å·¥ç¨‹å¸ˆã€‚</p><h3 id="å…·æœ‰ä¸°å¯Œçš„è¡Œä¸šæµ‹è¯•ç»éªŒ"><a href="#å…·æœ‰ä¸°å¯Œçš„è¡Œä¸šæµ‹è¯•ç»éªŒ" class="headerlink" title="å…·æœ‰ä¸°å¯Œçš„è¡Œä¸šæµ‹è¯•ç»éªŒ"></a>å…·æœ‰ä¸°å¯Œçš„è¡Œä¸šæµ‹è¯•ç»éªŒ</h3><p>æœ€å¥½æœ‰ä¼ ç»Ÿå’Œäº’è”ç½‘å¤§å…¬å¸å·¥ä½œç»éªŒï¼Œæ²¡æœ‰çš„è¯è‡³å°‘ä¸è¿™äº›å…¬å¸çš„é«˜çº§æµ‹è¯•å·¥ç¨‹å¸ˆæœ‰äº¤æµï¼Œäº†è§£ä»–ä»¬æ˜¯å¦‚ä½•å¼€å±•æµ‹è¯•çš„ï¼Œæœ‰åŠ©æé«˜è‡ªå·±çš„çœ¼ç•Œã€‚</p><h3 id="æœ‰è‰¯å¥½çš„æµ‹è¯•åŸºç¡€"><a href="#æœ‰è‰¯å¥½çš„æµ‹è¯•åŸºç¡€" class="headerlink" title="æœ‰è‰¯å¥½çš„æµ‹è¯•åŸºç¡€"></a>æœ‰è‰¯å¥½çš„æµ‹è¯•åŸºç¡€</h3><p>æŒæ¡å¿…è¦çš„æµ‹è¯•ç†è®ºï¼Œç†Ÿæ‚‰æµ‹è¯•æµç¨‹ï¼Œéœ€æ±‚åˆ†æï¼Œæµ‹è¯•ç”¨ä¾‹è®¾è®¡æ–¹æ³•ï¼Œæ ¹æ®é¡¹ç›®å®é™…éœ€è¦åˆ¶å®šæµ‹è¯•æ–¹æ¡ˆã€‚</p><h3 id="æœ‰ä¸°å¯Œçš„ä¸šåŠ¡èƒ½åŠ›"><a href="#æœ‰ä¸°å¯Œçš„ä¸šåŠ¡èƒ½åŠ›" class="headerlink" title="æœ‰ä¸°å¯Œçš„ä¸šåŠ¡èƒ½åŠ›"></a>æœ‰ä¸°å¯Œçš„ä¸šåŠ¡èƒ½åŠ›</h3><p>åšå¥½åŠŸèƒ½æµ‹è¯•çš„å‰ææ˜¯ç†Ÿæ‚‰ä¸šåŠ¡ï¼Œèƒ½æ›´å¥½çš„ç«™åœ¨äº§å“çš„è§’åº¦å»è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œæ‰èƒ½å‘ç°åŸºæœ¬åŠŸèƒ½ä»¥å¤–çš„é—®é¢˜ï¼Œèƒ½ç»™äº§å“æå‡ºå»ºè®¾æ€§çš„éœ€æ±‚å’Œæ„è§ã€‚</p><h3 id="ç†Ÿæ‚‰ç›¸å…³çš„æµ‹è¯•å·¥å…·"><a href="#ç†Ÿæ‚‰ç›¸å…³çš„æµ‹è¯•å·¥å…·" class="headerlink" title="ç†Ÿæ‚‰ç›¸å…³çš„æµ‹è¯•å·¥å…·"></a>ç†Ÿæ‚‰ç›¸å…³çš„æµ‹è¯•å·¥å…·</h3><p>è½¯ä»¶æµ‹è¯•ç”¨åˆ°çš„ç›¸å…³å·¥å…·éå¸¸å¤šï¼Œäº†è§£å’Œä½¿ç”¨è¿‡è¿™äº›å·¥å…·ï¼Œèƒ½æ›´å¥½çš„ç»“åˆå…¬å¸çš„è¦æ±‚åŠé¡¹ç›®çš„éœ€æ±‚æ¥æƒè¡¡å¼•å…¥å“ªäº›å·¥å…·ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p><ol><li>ç®¡ç†å·¥å…·ï¼šæ¯”å¦‚JIRAï¼ŒTestlinkï¼ŒWikiï¼ŒConfluence</li><li>æŒç»­é›†æˆï¼šJenkinsï¼ŒBambooï¼ŒTravis CIç­‰ï¼Œäº†è§£ä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ä»¥åŠå¦‚ä½•å®æ–½ã€‚</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šwebå’Œmobileå¹³å°ä¹‹é—´æ˜¯å¦‚ä½•åšè‡ªåŠ¨åŒ–æ‰æµ‹è¯•çš„ï¼Œç”¨åˆ°å“ªäº›å·¥å…·ã€‚äº†è§£Seleniumï¼ŒWebDriverï¼ŒAppiumï¼ŒRobotiumæµ‹è¯•æ¡†æ¶ï¼Œä»¥åŠç”¨å“ªäº›è¯­è¨€å»å¼€å‘è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼ŒPythonï¼ŸJavaï¼ŸJavaScriptï¼ŸçŸ¥é“å¦‚ä½•é€‰æ‹©å¦‚ä½•å®æ–½ã€‚</li><li>æ€§èƒ½æµ‹è¯•ï¼šäº†è§£Jmeterï¼ŒLoadRunnerè¿™ä¸¤ä¸ªä¸»è¦çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œå¦‚ä½•å¼€å±•æ€§èƒ½æµ‹è¯•ã€‚</li></ol><h3 id="æœ‰è‰¯å¥½çš„ä»£ç èƒ½åŠ›"><a href="#æœ‰è‰¯å¥½çš„ä»£ç èƒ½åŠ›" class="headerlink" title="æœ‰è‰¯å¥½çš„ä»£ç èƒ½åŠ›"></a>æœ‰è‰¯å¥½çš„ä»£ç èƒ½åŠ›</h3><p>è‰¯å¥½çš„ä»£ç èƒ½åŠ›å¯ä»¥å¿«é€ŸæŒæ¡è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç”šè‡³å¯ä»¥å¼€å‘æµ‹è¯•å¹³å°ã€‚å¦å¤–ï¼Œå½“ä½ è·³æ§½åˆ°ä»»ä½•ä¸€å®¶å…¬å¸å¯ä»¥è®©ä½ å¿«é€Ÿç†Ÿæ‚‰Javaã€Pythonã€Javascriptç­‰ä»»ä½•è¯­è¨€ç¼–å†™çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ã€‚</p><h3 id="è¯­è¨€èƒ½åŠ›"><a href="#è¯­è¨€èƒ½åŠ›" class="headerlink" title="è¯­è¨€èƒ½åŠ›"></a>è¯­è¨€èƒ½åŠ›</h3><p>åŒ…æ‹¬æ²Ÿé€šèƒ½åŠ›å’Œå¤–è¯­èƒ½åŠ›ã€‚æ²Ÿé€šæ˜¯ä¸€ä¸ªæµ‹è¯•äººå‘˜åœ¨å·¥ä½œä¸­å¿…ä¸å¯å°‘çš„ä¸€é¡¹åŸºæœ¬æŠ€èƒ½ï¼Œè‰¯å¥½çš„æ²Ÿé€šä¼šè®©å¼€å‘äººå‘˜äº†è§£é—®é¢˜æ‰€åœ¨ï¼Œæ¥å—ä½ çš„æ„è§ï¼Œä»äº§å“äººå‘˜é‚£é‡Œæ›´å¥½çš„äº†è§£éœ€æ±‚ã€‚è™½ç„¶åªæœ‰åœ¨å¤–ä¼çš„æ—¶å€™æ‰ä¼šç”¨åˆ°è‹±è¯­ï¼Œä½†æ˜¯éšç€æµ‹è¯•äººå‘˜ä¹Ÿéœ€è¦å­¦ä¹ å¾ˆå¤šçš„æŠ€æœ¯ï¼Œå¼€æºç¤¾åŒºçš„å‘å±•ï¼Œå¾ˆå¤šç¬¬ä¸€æ‰‹èµ„æ–™éƒ½æ˜¯ç”¨è‹±æ–‡å†™çš„ï¼Œæ‰€ä»¥å­¦å¥½è‹±æ–‡å¯¹äºæ‰©å±•å’Œå­¦ä¹ æ–°çŸ¥è¯†æœ‰å¾ˆå¤§å¸®åŠ©ã€‚</p><p>æ‰€ä»¥è¯´æˆä¸ºä¸€åä¼˜ç§€çš„é«˜çº§æµ‹è¯•å·¥ç¨‹å¸ˆæ‰€è¦æ±‚çš„èƒ½åŠ›è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œä¸€èµ·åŠªåŠ›å§ï¼ğŸ’ª</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Error: Permission denied (publickey)</title>
      <link href="/2018/05/permission-denied-publickey/"/>
      <url>/2018/05/permission-denied-publickey/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½ æƒ³åœ¨ä¸€å°ç”µè„‘ä¸Šé…ç½® github å’Œ bitbucketï¼Œå¦‚ä½•é…ç½®å¤šä¸ª SSH git keyï¼Ÿ<br>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ SSH Keyï¼Œæ³¨æ„åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­æœ€å¥½è¾“å…¥æ–°çš„åå­—ï¼Œæ¯”å¦‚ id_rsa_github å’Œ id_rsa_bitbucket</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;your_email@youremail.com&quot;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°†ç”Ÿæˆçš„ SSH key æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ°å¯¹åº”ç½‘å€çš„ä¸ªäººç”¨æˆ·è®¾ç½®ä¸­å³å¯ã€‚ä½†æ˜¯æ˜æ˜æŒ‰ç…§å®˜æ–¹æ•™ç¨‹åšçš„ä½†æ˜¯åœ¨ git clone çš„æ—¶å€™è¿˜æ˜¯é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š<br>Error: Permission denied (publickey)<br>å›°æ¼äº†å‡ å¤©çš„é”™è¯¯ç»ˆäºè§£å†³äº†ã€‚</p><p><a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/">å‚çœ‹è¿™ä¸ªæ–‡æ¡£</a></p><p>ç”±äºæˆ‘ç”¨çš„æ˜¯macOS Sierra 10.13.3ï¼Œ<a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent">æ–‡æ¡£è¿™é‡Œ</a>å†™ç€å¦‚æœæ˜¯macOS Sierra 10.12.2 åŠä»¥åçš„ç‰ˆæœ¬éœ€è¦åœ¨<br>~&#x2F;.ssh ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª config æ–‡ä»¶<br>congfig æ–‡ä»¶çš„å…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host *</span><br><span class="line"> AddKeysToAgent <span class="built_in">yes</span></span><br><span class="line"> UseKeychain <span class="built_in">yes</span></span><br><span class="line"> IdentityFile ~/.ssh/id_rsa_github</span><br><span class="line"></span><br><span class="line">Host *</span><br><span class="line"> AddKeysToAgent <span class="built_in">yes</span></span><br><span class="line"> UseKeychain <span class="built_in">yes</span></span><br><span class="line"> IdentityFile ~/.ssh/id_rsa_bitbucket</span><br></pre></td></tr></table></figure><p>é…ç½®äº†è¿™ä¸ªæ–‡ä»¶ä¹‹åï¼Œå†æ¬¡å°è¯•</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:shenxianpeng/blog.git</span><br></pre></td></tr></table></figure><p>å¯ä»¥ download ä»£ç äº†ï¼Œä¸¤ä¸ª SSH git éƒ½å¥½ç”¨äº† : )</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinsfile é…ç½®</title>
      <link href="/2018/04/jenkinsfile-configure/"/>
      <url>/2018/04/jenkinsfile-configure/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšæœ‰å…³ DevOps Build çš„æ—¶å€™ï¼Œå­¦ä¹ äº† Jenkins çš„ Pipeline çš„åŠŸèƒ½ï¼Œä¸å¾—ä¸æåˆ°çš„å°±æ˜¯ Jenkinsfile è¿™ä¸ªæ–‡ä»¶ã€‚</p><p>ä»¥ä¸‹é¢æ˜¯æˆ‘é…ç½®çš„ Jenkinsfile æ–‡ä»¶åŠç®€å•è¯´æ˜ï¼Œæ›´å¤šæœ‰å…³ <a href="https://jenkins.io/doc/book/pipeline/">Pipeline</a> è¯·çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent any</span><br><span class="line"></span><br><span class="line">    stages &#123;</span><br><span class="line">        <span class="comment">// Build é˜¶æ®µ</span></span><br><span class="line">        <span class="title function_">stage</span>(<span class="params"><span class="string">&#x27;Build&#x27;</span></span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                echo <span class="string">&#x27;Building...&#x27;</span></span><br><span class="line">                bat <span class="string">&#x27;npm run build webcomponent-sample&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å•å…ƒæµ‹è¯•é˜¶æ®µ</span></span><br><span class="line">        <span class="title function_">stage</span>(<span class="params"><span class="string">&#x27;Unit Test&#x27;</span></span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                echo <span class="string">&#x27;Unit Testing...&#x27;</span></span><br><span class="line">                bat <span class="string">&#x27;npm test webcomponent-sample&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            post &#123;</span><br><span class="line">                success &#123;</span><br><span class="line">                <span class="comment">// æ‰§è¡ŒæˆåŠŸåç”Ÿäº§æŠ¥å‘Š</span></span><br><span class="line">                publishHTML <span class="attr">target</span>: [</span><br><span class="line">                    <span class="attr">allowMissing</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">alwaysLinkToLastBuild</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">keepAll</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">reportDir</span>: <span class="string">&#x27;components/webcomponent-sample/coverage/chrome&#x27;</span>,</span><br><span class="line">                    <span class="attr">reportFiles</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">                    <span class="attr">reportName</span>: <span class="string">&#x27;RCov Report&#x27;</span></span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// E2E æµ‹è¯•é˜¶æ®µ</span></span><br><span class="line">        <span class="title function_">stage</span>(<span class="params"><span class="string">&#x27;E2E Test&#x27;</span></span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                bat <span class="string">&#x27;node nightwatch e2e/demo/test.js&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">stage</span>(<span class="params"><span class="string">&#x27;Release&#x27;</span></span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                echo <span class="string">&#x27;Release...&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    post &#123;</span><br><span class="line">        <span class="comment">// æ‰§è¡ŒæˆåŠŸæ˜¯è§¦å‘</span></span><br><span class="line">        success &#123;</span><br><span class="line">            mail <span class="attr">bcc</span>: <span class="string">&#x27;email@qq.com&#x27;</span>,</span><br><span class="line">            <span class="attr">body</span>: <span class="string">&quot;&lt;b&gt;Project: $&#123;env.JOB_NAME&#125; &lt;br&gt;Build Number: $&#123;env.BUILD_NUMBER&#125; &lt;br&gt;Build URL: $&#123;env.BUILD_URL&#125; &quot;</span>, <span class="attr">cc</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">charset</span>: <span class="string">&#x27;UTF-8&#x27;</span>, <span class="attr">from</span>: <span class="string">&#x27;jenkins@qq.com&#x27;</span>, <span class="attr">mimeType</span>: <span class="string">&#x27;text/html&#x27;</span>, <span class="attr">replyTo</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">subject</span>: <span class="string">&quot;SUCCESS: Project Name -&gt; $&#123;env.JOB_NAME&#125;&quot;</span>, <span class="attr">to</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œå¤±è´¥æ—¶è§¦å‘</span></span><br><span class="line">        failure &#123;</span><br><span class="line">            mail <span class="attr">bcc</span>: <span class="string">&#x27;email@qq.com&#x27;</span>,</span><br><span class="line">            <span class="attr">body</span>: <span class="string">&quot;&lt;b&gt;Project: $&#123;env.JOB_NAME&#125; &lt;br&gt;Build Number: $&#123;env.BUILD_NUMBER&#125; &lt;br&gt;Build URL: $&#123;env.BUILD_URL&#125; &quot;</span>, <span class="attr">cc</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">charset</span>: <span class="string">&#x27;UTF-8&#x27;</span>, <span class="attr">from</span>: <span class="string">&#x27;jenkins@qq.com&#x27;</span>, <span class="attr">mimeType</span>: <span class="string">&#x27;text/html&#x27;</span>, <span class="attr">replyTo</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">subject</span>: <span class="string">&quot;FAILURE: Project Name -&gt; $&#123;env.JOB_NAME&#125;&quot;</span>, <span class="attr">to</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DevOps å®è·µ</title>
      <link href="/2018/04/devops-practice/"/>
      <url>/2018/04/devops-practice/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘æƒ³å¤§å¤šæ•°çš„å›¢é˜Ÿéƒ½é¢ä¸´è¿™æ ·çš„é—®é¢˜ï¼š</p><ol><li>å‘å¸ƒå‘¨æœŸé•¿</li><li>å¼€å‘å’Œæµ‹è¯•æ—¶é—´çŸ­</li><li>å¼€å‘å’Œæµ‹è¯•æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å›¢é˜Ÿ</li><li>ä¸ç¨³å®šçš„äº¤ä»˜è´¨é‡</li><li>ä½æ”¶ç›Šéš¾ç»´æŠ¤çš„UIè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</li><li>ä¸åˆç†çš„æµ‹è¯•æƒé‡åˆ†é…</li></ol><p>è§£å†³æ–¹æ³•ï¼š</p><p>å¼•å…¥ DevOps å’Œåˆ†å±‚è‡ªåŠ¨åŒ–</p><ul><li>ç»„ä»¶åŒ–äº§å“<ul><li>äº§å“å¼€å‘å¼•å…¥æ¨¡å—åŒ–ï¼Œæ•°æ®é©±åŠ¨ä¼šä½¿å¾—äº§å“æ›´åŠ å®¹æ˜“å®æ–½ Unitï¼ŒServerï¼ŒUI è‡ªåŠ¨åŒ–æµ‹è¯•</li></ul></li><li>ä¼˜åŒ–å·¥ç¨‹å¸ˆ<ul><li>å¼€å‘å’Œæµ‹è¯•åœ¨æœªæ¥å°†æ²¡æœ‰ç•Œé™ï¼Œä»–ä»¬éƒ½æ˜¯å¼€å‘è€…ï¼Œéƒ½ä¼šäº§å“çš„è´¨é‡å’Œå®¢æˆ·è´Ÿè´£</li></ul></li><li>åˆ†å±‚è‡ªåŠ¨åŒ–<ul><li>æ›´åˆç†çš„æµ‹è¯•æƒé‡åˆ†é…ï¼Œæ›´åº•å±‚çš„æµ‹è¯•æ”¶ç›Šè¶Šé«˜</li></ul></li><li>å¼•å…¥å·¥å…·<ul><li>å®æ–½DevOpså¼•å…¥å¿…è¦çš„å·¥å…·ï¼ŒBitbucket, Jenkins, Sonar, Pipelines, Docker, test framework â€¦</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git å‘½ä»¤å¤‡å¿˜</title>
      <link href="/2018/02/git-command-cheat/"/>
      <url>/2018/02/git-command-cheat/</url>
      
        <content type="html"><![CDATA[<p>æœ‰äº›gitå‘½ä»¤æ€»æ˜¯è®°ä¸ä½ï¼Œåœ¨æˆ‘è¿™å° Ubuntu ä½¿ç”¨ web ç‰ˆ OneNote ä¸æ–¹ä¾¿ï¼Œé‚£å°±æŠŠä»–ä»¬è®°åˆ° Blog é‡Œå§ï¼Œéœ€è¦çš„æ—¶å€™ç¿»çœ‹ä¸€ä¸‹ã€‚</p><p>git remote</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote -v                 <span class="comment"># æŸ¥çœ‹å½“å‰ä½ç½®çš„è¿œç¨‹ä»£ç åº“</span></span><br><span class="line">git remote remove origin      <span class="comment"># å–æ¶ˆè¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote add orgin git@github.com:shenxianpeng/nightwatch.git       <span class="comment"># å…³è”æ–°çš„ä»“åº“</span></span><br></pre></td></tr></table></figure><p>git log</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¾—åˆ°æŸä¸€æ—¶æ®µæäº¤æ—¥å¿—</span></span><br><span class="line">git <span class="built_in">log</span> --after=<span class="string">&#x27;2017-12-04&#x27;</span> --before=<span class="string">&#x27;2017-12-08&#x27;</span> --author=xshen --pretty=oneline --abbrev-commit</span><br></pre></td></tr></table></figure><p>git tag</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git tag -a v1.6.700 -m <span class="string">&#x27;Release v1.6.700&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»™å‰é¢çš„æäº¤è¡¥ä¸Š tag</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">git tag -a v1.6.700 -m <span class="string">&#x27;Release v1.6.700&#x27;</span> e454ad98862</span><br><span class="line"></span><br><span class="line">git push tag</span><br><span class="line">git push origin --tag</span><br></pre></td></tr></table></figure><p>è®¾ç½® npm install ä»£ç†</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> proxy=http://10.17.201.60:8080       <span class="comment"># è®¾ç½®ä»£ç†</span></span><br><span class="line">npm config <span class="built_in">set</span> proxy null                           <span class="comment"># å–æ¶ˆä»£ç†</span></span><br></pre></td></tr></table></figure><p>è®¾ç½® cnpm</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">cnpm install [name]</span><br><span class="line">cnpm <span class="built_in">sync</span> connect</span><br><span class="line">cnpm info connect</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git remove and add remote repository</title>
      <link href="/2018/02/remove-and-add-remote-repository/"/>
      <url>/2018/02/remove-and-add-remote-repository/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœæ˜¯é€šè¿‡ https æ–¹å¼æ¥ pull å’Œ push ä»£ç ï¼Œæ¯æ¬¡éƒ½è¦è¾“å…¥çƒ¦äººçš„è´¦å·å’Œå¯†ç <br>å¯ä»¥é€šè¿‡åˆ‡æˆæˆ ssh æ–¹å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å–æ¶ˆè¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote remove origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³è”è¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote add origin git@github.com:shenxianpeng/blog.git</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch ä½¿ç”¨ VS code è¿›è¡Œè°ƒè¯•</title>
      <link href="/2018/02/debug-nightwatch-in-vs/"/>
      <url>/2018/02/debug-nightwatch-in-vs/</url>
      
        <content type="html"><![CDATA[<p>é™¤äº†é€šè¿‡å¢åŠ </p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;===========&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ¥è°ƒè¯• Nightwatch ä»£ç ï¼Œå¦‚ä½•é€šè¿‡é…ç½® VS code æ¥ Debug Nightwatch ä»£ç ï¼Ÿ</p><p>Ctrl+Shift+D æ‰“å¼€ Debug ç•Œé¢ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Use IntelliSense to learn about possible Node.js debug attributes.</span></span><br><span class="line">    <span class="comment">// Hover to view descriptions of existing attributes.</span></span><br><span class="line">    <span class="comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;configurations&quot;</span>: [</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">            <span class="string">&quot;request&quot;</span>: <span class="string">&quot;launch&quot;</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;npm test&quot;</span>,</span><br><span class="line">            <span class="string">&quot;program&quot;</span>: <span class="string">&quot;$&#123;workspaceRoot&#125;/node_modules/nightwatch/bin/runner.js&quot;</span>,</span><br><span class="line">            <span class="string">&quot;args&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;tests/DQA/DQA-221/login.js&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch æŒç»­é›†æˆé—®é¢˜</title>
      <link href="/2018/01/nightwatch-ci-problem/"/>
      <url>/2018/01/nightwatch-ci-problem/</url>
      
        <content type="html"><![CDATA[<h2 id="åœ¨æŒç»­é›†æˆæ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹æ—¶å€™ä¼šé‡åˆ°é‚£äº›é—®é¢˜å‘¢"><a href="#åœ¨æŒç»­é›†æˆæ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹æ—¶å€™ä¼šé‡åˆ°é‚£äº›é—®é¢˜å‘¢" class="headerlink" title="åœ¨æŒç»­é›†æˆæ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹æ—¶å€™ä¼šé‡åˆ°é‚£äº›é—®é¢˜å‘¢"></a>åœ¨æŒç»­é›†æˆæ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹æ—¶å€™ä¼šé‡åˆ°é‚£äº›é—®é¢˜å‘¢</h2><ol><li>è¿è¡Œæ—¶é—´è¿‡é•¿</li><li>å› ä¸ºæŸäº›é”™è¯¯ç¨‹åºå¡ä½</li><li>å¼‚å¸¸å¤„ç†</li></ol><h2 id="é’ˆå¯¹ä»¥ä¸Šä¸‰ç§æƒ…å†µï¼Œé€šè¿‡ä¸‹é¢çš„ä¸‰ç§æ–¹å¼è¿›è¡Œè§£å†³"><a href="#é’ˆå¯¹ä»¥ä¸Šä¸‰ç§æƒ…å†µï¼Œé€šè¿‡ä¸‹é¢çš„ä¸‰ç§æ–¹å¼è¿›è¡Œè§£å†³" class="headerlink" title="é’ˆå¯¹ä»¥ä¸Šä¸‰ç§æƒ…å†µï¼Œé€šè¿‡ä¸‹é¢çš„ä¸‰ç§æ–¹å¼è¿›è¡Œè§£å†³"></a>é’ˆå¯¹ä»¥ä¸Šä¸‰ç§æƒ…å†µï¼Œé€šè¿‡ä¸‹é¢çš„ä¸‰ç§æ–¹å¼è¿›è¡Œè§£å†³</h2><h3 id="è¿è¡Œæ—¶é—´è¿‡é•¿-E2E-æµ‹è¯•è„šæœ¬ä¸­éš¾å…éœ€è¦æ—¶é—´ç­‰å¾…ï¼Œä¾‹å¦‚"><a href="#è¿è¡Œæ—¶é—´è¿‡é•¿-E2E-æµ‹è¯•è„šæœ¬ä¸­éš¾å…éœ€è¦æ—¶é—´ç­‰å¾…ï¼Œä¾‹å¦‚" class="headerlink" title="è¿è¡Œæ—¶é—´è¿‡é•¿, E2E æµ‹è¯•è„šæœ¬ä¸­éš¾å…éœ€è¦æ—¶é—´ç­‰å¾…ï¼Œä¾‹å¦‚"></a>è¿è¡Œæ—¶é—´è¿‡é•¿, E2E æµ‹è¯•è„šæœ¬ä¸­éš¾å…éœ€è¦æ—¶é—´ç­‰å¾…ï¼Œä¾‹å¦‚</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">pause</span>(<span class="number">1000</span>);</span><br><span class="line"><span class="comment">// å°½å¯èƒ½å°†è¯´æœ‰çš„ pause æ¢æˆ waitï¼Œä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">element</span>(<span class="string">&#x27;@columns&#x27;</span>).<span class="property">to</span>.<span class="property">be</span>.<span class="property">visible</span>.<span class="title function_">before</span>(<span class="number">2000</span>);</span><br><span class="line"><span class="comment">// æˆ–</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">waitForElementVisible</span>(<span class="string">&#x27;@columns&#x27;</span>, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure><h3 id="å› ä¸ºæŸäº›é”™è¯¯ç¨‹åºå¡ä½-åœ¨-TestCase-ä¸­è¿›è¡ŒéªŒè¯æ—¶ï¼Œä¾‹å¦‚"><a href="#å› ä¸ºæŸäº›é”™è¯¯ç¨‹åºå¡ä½-åœ¨-TestCase-ä¸­è¿›è¡ŒéªŒè¯æ—¶ï¼Œä¾‹å¦‚" class="headerlink" title="å› ä¸ºæŸäº›é”™è¯¯ç¨‹åºå¡ä½, åœ¨ TestCase ä¸­è¿›è¡ŒéªŒè¯æ—¶ï¼Œä¾‹å¦‚"></a>å› ä¸ºæŸäº›é”™è¯¯ç¨‹åºå¡ä½, åœ¨ TestCase ä¸­è¿›è¡ŒéªŒè¯æ—¶ï¼Œä¾‹å¦‚</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>.<span class="property">length</span>, <span class="number">1</span>);</span><br><span class="line"><span class="comment">// å¦‚æœåªæƒ³æ ‡æ³¨å¤±è´¥ï¼Œç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼Œåˆ™éœ€å°† assert æ¢æˆ verify</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">veriry</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>.<span class="property">length</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ waitForElementVisible ä¸­åŠ  abortOnFailure å‚æ•°ï¼Œå½“è®¾ç½®ä¸º falseï¼Œåœ¨ wait è¶…æ—¶æ—¶ï¼Œå°±ä¼šæ ‡å¿—ä¸º false ç»§ç»­ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">waitForElementVisible</span>(<span class="string">&#x27;@columns&#x27;</span>, <span class="number">5000</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿˜å¯ä»¥é€šè¿‡åœ¨ nightwatch.conf.js è®¾ç½®å…¨å±€å˜é‡</span></span><br><span class="line"><span class="attr">abortOnAssertionFailure</span>: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><p>å½“ç¨‹åºæ‰§è¡Œè¿è¡Œä¸€æ¬¡æ—¶ï¼Œç¨‹åºè¿è¡Œæ­£å¸¸ï¼Œä¸€æ—¦é‡åˆ°å¼‚å¸¸æ—¶ï¼Œä¸‹æ¬¡æ‰§è¡Œå°±å›å‡ºé”™ã€‚<br>ä¾‹å¦‚ï¼šæ¯”å¦‚é‚€è¯·è´¦å·ç™»å½•ç³»ç»Ÿçš„æ“ä½œã€‚ç®¡ç†å‘˜æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œç„¶åç”¨è¿™ä¸ªæ–°ç”¨æˆ·ç™»å½•ï¼Œä¹‹åç®¡ç†å‘˜åˆ é™¤è¿™ä¸ªè´¦æˆ·ã€‚ä½†å¦‚æœåˆ é™¤è¿™ä¸ªè´¦å·å¤±è´¥æ—¶ï¼Œä¸‹æ¬¡æ‰§è¡Œè¿™ä¸ªç¨‹åºå†é‚€è¯·è¿™ä¸ªè´¦å·æ—¶å°±ä¼šæç¤ºè¿™ä¸ªè´¦å·å­˜åœ¨çš„ï¼Œå¯èƒ½è¿™ä¸ªæ—¶å€™è¿™ä¸ªç¨‹åºå°±æ‰§è¡Œä¸ä¸‹å»äº†ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦è€ƒè™‘è¿™äº›å¼‚å¸¸æƒ…å†µå¤„ç†ï¼Œä¿è¯ç¨‹åºèƒ½å¤Ÿè‰¯å¥½çš„æ‰§è¡Œä¸‹å»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch æ‰“å¼€å¤šä¸ªçª—å£</title>
      <link href="/2018/01/open-multiple-windows/"/>
      <url>/2018/01/open-multiple-windows/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœæƒ³æ‰“å¼€ä¸¤ä¸ªçª—å£å¹¶æ§åˆ¶é‚£ä¸ªçª—å£æ€ä¹ˆåŠï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> url = process.<span class="property">env</span>.<span class="property">BASE_URL</span>, newWindow;</span><br><span class="line"></span><br><span class="line">client.<span class="title function_">execute</span>(<span class="keyword">function</span> (<span class="params">url, newWindow</span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">open</span>(url, newWindow, <span class="string">&#x27;height=768,width=1024&#x27;</span>);</span><br><span class="line">&#125;, [url, newWindow]);</span><br><span class="line"></span><br><span class="line">client.<span class="title function_">window_handles</span>(<span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">verify</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>.<span class="property">length</span>, <span class="number">2</span>, <span class="string">&#x27;There should be 2 windows open&#x27;</span>);</span><br><span class="line">    newWindow = result.<span class="property">value</span>[<span class="number">1</span>];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">switchWindow</span>(newWindow);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu ä¸Šä½¿ç”¨ VPN</title>
      <link href="/2017/12/use-vpn-on-ubuntu/"/>
      <url>/2017/12/use-vpn-on-ubuntu/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•åœ¨ Ubuntu ä¸Šè¿æ¥ Cisco AnyConnect VPN</p><p>æ‰“å¼€Terminalï¼Œæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo /sbin/modprobe tun</span><br></pre></td></tr></table></figure><p>å®‰è£…OpenConnectï¼Œæ‰§è¡Œ:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install openconnect</span><br></pre></td></tr></table></figure><p>è¿æ¥VPNï¼Œæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo openconnect yourvpn.example.com</span><br></pre></td></tr></table></figure><p>å°†æç¤ºä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥äº‰å–åï¼ŒVPNè¿æ¥æˆåŠŸã€‚</p><p>åŸæ–‡ <a href="http://ubuntuhandbook.org/index.php/2014/11/connect-cisco-anyconnect-vpn-ubuntu/">è¯·ç‚¹å‡»</a> ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> VPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu ä¸Šå®‰è£… VS Code</title>
      <link href="/2017/12/install-vscode-on-ubuntu/"/>
      <url>/2017/12/install-vscode-on-ubuntu/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ Ubuntu ä¸‹é¢å®‰è£… Visual Studio Code</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ubuntu-desktop/ubuntu-make</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ubuntu-make</span><br><span class="line">umake web visual-studio-code</span><br></pre></td></tr></table></figure><p>äº²æµ‹ï¼Œå¥½ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> OS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> VScode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch wait For Text</title>
      <link href="/2017/12/nightwatch-wait-for-text/"/>
      <url>/2017/12/nightwatch-wait-for-text/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ Nightwatch åšè‡ªåŠ¨åŒ–æµ‹è¯•çš„æ—¶å€™ï¼Œä¼šé‡åˆ°è¿™æ ·ä¸€ç§æƒ…å†µï¼š<br>åˆ›å»ºä¸€ä¸ª query, ç­‰å¾…è¿™ä¸ªqueryçš„çŠ¶æ€ä» Wait å˜æˆ Running æœ€ååˆ° Available æ—¶å†æ‰§è¡Œæ“ä½œã€‚<br>Nightwatch å¹¶æ²¡æœ‰æä¾›è¿™æ ·çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼è§£å†³ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;Wait for text&#x27;</span>: <span class="keyword">function</span> <span class="title function_">waitForText</span>(<span class="params">client</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> query = client.<span class="property">page</span>.<span class="title function_">query</span>();</span><br><span class="line">    query.<span class="title function_">navigate</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">        client.<span class="title function_">getText</span>(<span class="string">&#x27;status&#x27;</span>, <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (result.<span class="property">value</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;Available&#x27;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                client.<span class="title function_">pause</span>(<span class="number">1000</span>);</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// TODO something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch å…ƒç´ åˆ¤æ–­</title>
      <link href="/2017/12/nightwatch-element-check/"/>
      <url>/2017/12/nightwatch-element-check/</url>
      
        <content type="html"><![CDATA[<h3 id="Nightwatch-å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•"><a href="#Nightwatch-å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•" class="headerlink" title="Nightwatch å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•"></a>Nightwatch å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•</h3><p>éªŒè¯å…ƒç´ çš„å€¼ä¿¡æ¯</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .<span class="property">assert</span>.<span class="title function_">containsText</span>(<span class="string">&#x27;@errorMessage&#x27;</span>, <span class="string">&#x27;The email address is invalid.&#x27;</span>)</span><br></pre></td></tr></table></figure><p>éªŒè¯å…ƒç´ æ˜¯å¦å¯ç”¨</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .<span class="property">assert</span>.<span class="title function_">attributeEquals</span>(<span class="string">&#x27;@continueBtn&#x27;</span>, <span class="string">&#x27;disabled&#x27;</span>, <span class="string">&#x27;true&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å…ƒç´ å¯ç”¨</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .<span class="property">expect</span>.<span class="title function_">element</span>(<span class="string">&#x27;@signInBtn&#x27;</span>).<span class="property">to</span>.<span class="property">be</span>.<span class="property">visible</span>.<span class="title function_">before</span>(<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">andesFormSection</span><br><span class="line">    <span class="title function_">waitForElementVisible</span>(<span class="string">&#x27;signInBtn&#x27;</span>, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å…ƒç´ å‘ˆç°</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .<span class="property">expect</span>.<span class="title function_">element</span>(<span class="string">&#x27;@signInBtn&#x27;</span>).<span class="property">to</span>.<span class="property">be</span>.<span class="property">present</span>.<span class="title function_">before</span>(<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">andesFormSection</span><br><span class="line">    <span class="title function_">waitForElementPresent</span>(<span class="string">&#x27;signInBtn&#x27;</span>, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch å¾—åˆ°å’ŒéªŒè¯ cookies</title>
      <link href="/2017/12/nightwatch-handle-cookies/"/>
      <url>/2017/12/nightwatch-handle-cookies/</url>
      
        <content type="html"><![CDATA[<h2 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h2><p>éªŒè¯ç™»å½• cookies å’Œæ¸…é™¤ access_tokenã€‚æµ‹è¯•ç”¨ä¾‹è®¾è®¡å¦‚ä¸‹</p><h2 id="æµ‹è¯•ç”¨ä¾‹è®¾è®¡"><a href="#æµ‹è¯•ç”¨ä¾‹è®¾è®¡" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹è®¾è®¡"></a>æµ‹è¯•ç”¨ä¾‹è®¾è®¡</h2><p>ç™»å½•ç³»ç»Ÿæ—¶ï¼Œä¸é€‰æ‹©è®°ä½æˆ‘æŒ‰é’®ï¼ŒéªŒè¯ cookies</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">client.<span class="title function_">getCookies</span>(<span class="keyword">function</span> <span class="title function_">cb</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>.<span class="property">length</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">0</span>].<span class="property">name</span>, <span class="string">&#x27;domain&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">1</span>].<span class="property">name</span>, <span class="string">&#x27;user_id&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">2</span>].<span class="property">name</span>, <span class="string">&#x27;access_token&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç™»å½•ç³»ç»Ÿæ—¶ï¼Œé€‰æ‹©è®°ä½æˆ‘æŒ‰é’®ï¼ŒéªŒè¯ cookies</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">client.<span class="title function_">getCookies</span>(<span class="keyword">function</span> <span class="title function_">cb</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>.<span class="property">length</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">0</span>].<span class="property">name</span>, <span class="string">&#x27;domain&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">1</span>].<span class="property">name</span>, <span class="string">&#x27;user_id&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">2</span>].<span class="property">name</span>, <span class="string">&#x27;identifier&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">3</span>].<span class="property">name</span>, <span class="string">&#x27;access_token&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>[<span class="number">4</span>].<span class="property">name</span>, <span class="string">&#x27;persistent_token&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç™»å½•ç³»ç»Ÿæ—¶ï¼Œä¸é€‰æ‹©è®°ä½æˆ‘æŒ‰é’®ï¼Œåˆ é™¤ cookies</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> accesstoken;</span><br><span class="line">client.<span class="title function_">getCookies</span>(<span class="keyword">function</span> <span class="title function_">cb</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    accesstoken = result.<span class="property">value</span>[<span class="number">2</span>].<span class="property">name</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">deleteCookie</span>(accesstoken, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// refresh current page, logout</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">refresh</span>().<span class="title function_">waitForElementVisible</span>(<span class="string">&#x27;div.login-form&#x27;</span>, <span class="number">5000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç™»å½•ç³»ç»Ÿæ—¶ï¼Œé€‰æ‹©è®°ä½æˆ‘æŒ‰é’®ï¼Œåˆ é™¤ cookies</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> accesstoken;</span><br><span class="line">client.<span class="title function_">getCookies</span>(<span class="keyword">function</span> <span class="title function_">cb</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    accesstoken = result.<span class="property">value</span>[<span class="number">3</span>].<span class="property">name</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">deleteCookie</span>(accesstoken, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// refresh current page, still login</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">refresh</span>().<span class="title function_">waitForElementVisible</span>(<span class="string">&#x27;.andes-header&#x27;</span>, <span class="number">5000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•çŸ¥é“ç™»å½•éƒ½æœ‰å“ªäº›å‚æ•°"><a href="#å¦‚ä½•çŸ¥é“ç™»å½•éƒ½æœ‰å“ªäº›å‚æ•°" class="headerlink" title="å¦‚ä½•çŸ¥é“ç™»å½•éƒ½æœ‰å“ªäº›å‚æ•°"></a>å¦‚ä½•çŸ¥é“ç™»å½•éƒ½æœ‰å“ªäº›å‚æ•°</h2><p>äº‹å…ˆåœ¨æ‰‹åŠ¨æµ‹è¯•çš„æ—¶å€™æ‰“å¼€ chrome æµè§ˆå™¨ï¼Œç„¶åæŒ‰ F12ï¼Œç™»å½•æ—¶æŸ¥çœ‹ Networkã€‚</p><p>ä»¥æˆåŠŸç™¾åº¦ç™»å½•æ—¶ä¸ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ° Headers é‡Œçš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éªŒè¯è¿™äº›å‚æ•°æ¥ç¡®å®šç™»å½•æˆåŠŸäº†ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿™äº›å‚æ•°æ¥å®ç°å¯¹ cookieï¼Œtoken ç­‰ç­‰å‚æ•°è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„éªŒè¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åº¦è¿‡å·¥ä½œä¸­æŒ«æŠ˜å¿ƒç»“</title>
      <link href="/2017/11/weather-setbacks-at-work/"/>
      <url>/2017/11/weather-setbacks-at-work/</url>
      
        <content type="html"><![CDATA[<h3 id="å¯¹äºä¸€ä¸ªä¸å–„äºè¨€è¡¨çš„æˆ‘å·¥ä½œä¸­é‡åˆ°è¿‡"><a href="#å¯¹äºä¸€ä¸ªä¸å–„äºè¨€è¡¨çš„æˆ‘å·¥ä½œä¸­é‡åˆ°è¿‡" class="headerlink" title="å¯¹äºä¸€ä¸ªä¸å–„äºè¨€è¡¨çš„æˆ‘å·¥ä½œä¸­é‡åˆ°è¿‡"></a>å¯¹äºä¸€ä¸ªä¸å–„äºè¨€è¡¨çš„æˆ‘å·¥ä½œä¸­é‡åˆ°è¿‡</h3><ul><li>è¿‡åº¦ç†è§£åœ¨ä¸åŒäº‹ä¹‹é—´çš„Emailå’ŒChatä¸­çš„æ„æ€ï¼›</li><li>åŒäº‹ä¹‹é—´çš„æ²Ÿé€šä¸­å‡ºç°çš„åˆ†æ­§äº‹åè¿˜ä¼šç»§ç»­ç¢ç£¨ï¼›</li><li>ååˆ†å…³æ³¨è‡ªå·±çš„å·¥ä½œå¤±ä¸å¾—åœ¨ä¸Šçº§é¢†å¯¼ä¸­çš„çœ‹æ³•ã€‚</li></ul><h3 id="ä»¥ä¸‹æ–¹å¼å¯¹æˆ‘æ¥è¯´è¿˜æ¯”è¾ƒæœ‰æ•ˆçš„"><a href="#ä»¥ä¸‹æ–¹å¼å¯¹æˆ‘æ¥è¯´è¿˜æ¯”è¾ƒæœ‰æ•ˆçš„" class="headerlink" title="ä»¥ä¸‹æ–¹å¼å¯¹æˆ‘æ¥è¯´è¿˜æ¯”è¾ƒæœ‰æ•ˆçš„"></a>ä»¥ä¸‹æ–¹å¼å¯¹æˆ‘æ¥è¯´è¿˜æ¯”è¾ƒæœ‰æ•ˆçš„</h3><ul><li>è®©è‡ªå·±çš„ç²¾åŠ›æ›´å¤šçš„èšç„¦åœ¨å·¥ä½œä¸Šï¼›</li><li>å·¥ä½œä¸­å¯¹äº‹ä¸å¯¹äººï¼Œåšå¯¹çš„äº‹æƒ…ï¼›</li><li>çœ¼å…‰æ”¾é•¿è¿œï¼Œä¸å¿˜åˆå¿ƒï¼Œä¸“æ³¨åº”è¯¥åšçš„äº‹æƒ…ä¸Šï¼›</li><li>é¢†å¯¼è¯´çš„ä¸€å¥â€œå‘å‰çœ‹â€æˆ‘å°è±¡æ·±åˆ»ï¼Œè¿‡å»çš„å°±è¿‡å»äº†ï¼Œåˆ«å†çº ç»“ï¼Œå‘å‰çœ‹ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Change Hexo code highlight</title>
      <link href="/2017/11/change-hexo-code-highlight/"/>
      <url>/2017/11/change-hexo-code-highlight/</url>
      
        <content type="html"><![CDATA[<p>Hexo é»˜è®¤ä¸»é¢˜ä»£ç é«˜äº®æ˜¯é»‘è‰²çš„ï¼Œå¦‚æœæƒ³æ¢ä¸ªé£æ ¼ï¼Ÿå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹ highlight.styl æ–‡ä»¶ï¼Œè·¯å¾„</span></span><br><span class="line">themes/landscape/source/css/_partial/highlight.styl</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é»˜è®¤ä»£ç ä¸»é¢˜ Tomorrow Night Eighties</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">highlight-background = #2d2d2d</span><br><span class="line">highlight-current-line = #<span class="number">393939</span></span><br><span class="line">highlight-selection = #<span class="number">515151</span></span><br><span class="line">highlight-foreground = #cccccc</span><br><span class="line">highlight-comment = #<span class="number">999999</span></span><br><span class="line">highlight-red = #f2777a</span><br><span class="line">highlight-orange = #f99157</span><br><span class="line">highlight-yellow = #ffcc66</span><br><span class="line">highlight-green = #99cc99</span><br><span class="line">highlight-aqua = #66cccc</span><br><span class="line">highlight-blue = #6699cc</span><br><span class="line">highlight-purple = #cc99cc</span><br></pre></td></tr></table></figure><p>ä¸ºä¸»é¢˜ Tomorrow</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">highlight-background = #ffffff</span><br><span class="line">highlight-current-line = #efefef</span><br><span class="line">highlight-selection = #d6d6d6</span><br><span class="line">highlight-foreground = #4d4d4c</span><br><span class="line">highlight-comment = #8e908c</span><br><span class="line">highlight-red = #c82829</span><br><span class="line">highlight-orange = #f5871f</span><br><span class="line">highlight-yellow = #eab700</span><br><span class="line">highlight-green = #718c00</span><br><span class="line">highlight-aqua = #3e999f</span><br><span class="line">highlight-blue = #4271ae</span><br><span class="line">highlight-purple = #8959a8</span><br></pre></td></tr></table></figure><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/chriskempson/tomorrow-theme">tomorrow-theme</a> ä¿®æ”¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch æµ‹è¯•ç”¨ä¾‹å¤±è´¥ç»§ç»­æ‰§è¡Œ</title>
      <link href="/2017/10/test-case-fails-to-continue-execution/"/>
      <url>/2017/10/test-case-fails-to-continue-execution/</url>
      
        <content type="html"><![CDATA[<p>è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œæœ‰ä¸€ä¸ªéªŒè¯ç‚¹ï¼Œå½“æµ‹è¯•é€šè¿‡æ—¶ï¼Œåé¢çš„æµ‹è¯•è„šæœ¬ç»§ç»­æ‰§è¡Œï¼›<br>å½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œä½ å¸Œæœ›æ ‡è®°å‡ºæ¥è¿™ä¸ªé”™è¯¯ï¼Œä½†ä¸å½±å“åé¢çš„æµ‹è¯•è„šæœ¬æ‰§è¡Œï¼Œåœ¨ Nightwatch ä¸­å¦‚ä½•åšï¼Ÿ</p><p>ä¸‹é¢çš„ä¸€æ®µä»£ç éªŒè¯ home é¡µé¢çš„ body æ˜¯å¦æ˜¾ç¤ºã€‚è¿™é‡Œå¦‚æœæ˜¾ç¤ºåˆ™å°†éªŒè¯ç‚¹ç½®ä¸º falseï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">home.<span class="title function_">waitForElementVisible</span>(<span class="string">&#x27;@body&#x27;</span>, <span class="number">3000</span>, <span class="literal">true</span>, <span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">value</span>) &#123;</span><br><span class="line">        <span class="comment">// æµ‹è¯•æŠ¥å‘Šä¸­ä¼šæ˜¾ç¤ºå¤±è´¥ï¼Œä½†æ˜¯ä¼šç»§ç»­æ‰§è¡Œåé¢çš„æµ‹è¯•è„šæœ¬</span></span><br><span class="line">        client.<span class="property">verify</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// éªŒè¯ç‚¹é€šè¿‡</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Pass&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œå¦‚æœç”¨ assertï¼Œç¨‹åºå°±ä¼šä¸­æ–­æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸­æ–­æ‰§è¡Œ</span></span><br><span class="line">client.<span class="property">assert</span>.<span class="title function_">equal</span>(result.<span class="property">value</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch éªŒè¯å…ƒç´ æ˜¯å¦å­˜åœ¨</title>
      <link href="/2017/10/nightwatch-cdetermine-if-element-exists/"/>
      <url>/2017/10/nightwatch-cdetermine-if-element-exists/</url>
      
        <content type="html"><![CDATA[<h2 id="å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•"><a href="#å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•" class="headerlink" title="å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•"></a>å…ƒç´ å¸¸ç”¨éªŒè¯æ–¹æ³•</h2><p>éªŒè¯å…ƒç´ çš„å€¼ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .assert.containsText(<span class="string">&#x27;@errorMessage&#x27;</span>, <span class="string">&#x27;The email address is invalid.&#x27;</span>)</span><br></pre></td></tr></table></figure><p>éªŒè¯å…ƒç´ æ˜¯å¦å¯ç”¨</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .assert.attributeEquals(<span class="string">&#x27;@continueBtn&#x27;</span>, <span class="string">&#x27;disabled&#x27;</span>, <span class="string">&#x27;true&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å…ƒç´ å¯ç”¨</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .expect.element(<span class="string">&#x27;@signInBtn&#x27;</span>).to.be.visible.before(5000);</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">andesFormSection</span><br><span class="line">    waitForElementVisible(<span class="string">&#x27;signInBtn&#x27;</span>, 5000);</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å…ƒç´ å‘ˆç°</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">andesFormSection</span><br><span class="line">    .expect.element(<span class="string">&#x27;@signInBtn&#x27;</span>).to.be.present.before(5000);</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">andesFormSection</span><br><span class="line">    waitForElementPresent(<span class="string">&#x27;signInBtn&#x27;</span>, 5000);</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</h2><p>ç”¨ Nightwatch å»åˆ¤æ–­ä¸€ä¸ª element æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨åšå¦å¤–çš„æ“ä½œã€‚<br>è¿™ä¸ªåœ¨ Java ç¼–å†™çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ä¸­å¯ä»¥ç”¨ try catch å¯ä»¥è§£å†³ï¼ŒNightwatch è¯•è¿‡ä¸è¡Œã€‚<br>å¦å¤–çœ‹åˆ° stackoverflow ä¸Šæœ‰é€šè¿‡åˆ¤æ–­ (result.status !&#x3D; -1)ï¼Œæ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ã€‚</p><p>æœ€åè¿™æ ·è§£å†³çš„ï¼Œè¯·çœ‹ä¸‹é¢ tutorial.js</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> tutorialCommands = &#123;</span><br><span class="line">  <span class="attr">notShowTutorial</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tutorialSection = <span class="variable language_">this</span>.<span class="property">section</span>.<span class="property">tutorial</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">api</span>.<span class="title function_">element</span>(<span class="string">&#x27;css selector&#x27;</span>, <span class="string">&#x27;.andes-dialog md-icon&#x27;</span>, <span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (result.<span class="property">value</span> &amp;&amp; result.<span class="property">value</span>.<span class="property">ELEMENT</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">pause</span>(<span class="number">2000</span>);</span><br><span class="line">        tutorialSection.<span class="title function_">click</span>(<span class="string">&#x27;@doNotShowBtn&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">pause</span>(<span class="number">2000</span>);</span><br><span class="line">        tutorialSection.<span class="title function_">click</span>(<span class="string">&#x27;@closeBtn&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;no tutorial exists&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">commands</span>: [tutorialCommands],</span><br><span class="line">  <span class="attr">url</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`https://shenxianpeng.github.io/`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">sections</span>: &#123;</span><br><span class="line">    <span class="attr">tutorial</span>: &#123;</span><br><span class="line">      <span class="attr">selector</span>: <span class="string">&#x27;.andes-dialog&#x27;</span>,</span><br><span class="line">      <span class="attr">elements</span>: &#123;</span><br><span class="line">        <span class="attr">closeBtn</span>: <span class="string">&#x27;md-icon&#x27;</span>,</span><br><span class="line">        <span class="attr">doNotShowBtn</span>: <span class="string">&#x27;md-checkbox .md-container&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œçš„å…ƒç´ ä¸èƒ½é€šè¿‡ section çš„æ–¹å¼å¼•ç”¨ï¼Œä¾‹å¦‚è¿™æ ·ï¼Œæ€€ç–‘è¿™æ˜¯ Nightwatch çš„ bugã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">tutorialSection.<span class="property">api</span>.<span class="title function_">element</span>(<span class="string">&#x27;css selector&#x27;</span>, <span class="string">&#x27;@closeBtn&#x27;</span>, <span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo é…ç½® rss è®¢é˜…åŠŸèƒ½</title>
      <link href="/2017/10/configure-rss-subscription-for-hexo/"/>
      <url>/2017/10/configure-rss-subscription-for-hexo/</url>
      
        <content type="html"><![CDATA[<p>å®‰è£… <a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a> æ’ä»¶</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>å¦‚æœå›½å†… npm å®‰è£…ä¸æˆåŠŸï¼Œå¯ä»¥å…ˆå®‰è£… <a href="https://npm.taobao.org/">cnpm</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>ç„¶åå†</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>åœ¨ _config.yml ä¸­é…ç½®è¿™ä¸ªæ’ä»¶</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">feed:</span><br><span class="line">  <span class="built_in">type</span>: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  <span class="built_in">limit</span>: 20</span><br><span class="line">  hub:</span><br><span class="line">  content:</span><br><span class="line">  content_limit: 140</span><br><span class="line">  content_limit_delim: <span class="string">&#x27; &#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo åšå®¢æ–‡ç« ä¸­æ’å…¥å›¾ç‰‡</title>
      <link href="/2017/10/insert-img-in-hexo-article/"/>
      <url>/2017/10/insert-img-in-hexo-article/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœæƒ³åœ¨ Hexo æ–‡ç« ä¸­æ’å…¥å›¾ç‰‡æ€ä¹ˆåšï¼Ÿ</p><p>ç½‘ç»œä¸Šå¾ˆå®¹æ˜“æœåˆ° Markdown çš„è¯­æ³•æ˜¯ <code>![Alt text](/path/to/img.jpg)</code><br>å‰é¢ Alt text æ˜¯æŒ‡åœ¨å›¾ç‰‡ä¸‹é¢å‘½åï¼Œåé¢æ˜¯å›¾ç‰‡çš„åœ°å€ã€‚é‚£ä¹ˆå¦‚ä½•é…ç½®ï¼Ÿ</p><p>ç»è¿‡å‡ ç•ªå°è¯•å¾—çŸ¥ï¼šåœ¨ä½ çš„ hexo é¡¹ç›®æ ¹ç›®å½•ä¸‹é¢ source åˆ›å»ºä¸€ä¸ª images æ–‡ä»¶å¤¹ï¼Œ<br>æŠŠä½ ä»¥åç”¨çš„åˆ°å›¾ç‰‡éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹é¢å°± OK äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">![ç¤ºä¾‹å›¾1](../images/color.png)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­æ¯”è¾ƒé¢œè‰²</title>
      <link href="/2017/10/nightwatch-auto-compare-colors/"/>
      <url>/2017/10/nightwatch-auto-compare-colors/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åš Nightwatch è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œå‡ºç°éœ€è¦æ¯”è¾ƒé¢œè‰²çš„æ—¶å€™å¦‚ä½•æ¥åšï¼Ÿ<br>åŸºæœ¬çš„æ€è·¯æ˜¯é¦–å…ˆéœ€è¦å–åˆ°è¿™ä¸ª element çš„é¢œè‰²å€¼ï¼Œç„¶åè·Ÿé¢„æœŸçš„é¢œè‰²è¿›è¡Œå¯¹æ¯”ã€‚<br>æ¯”å¦‚æˆ‘è¦å–ä¸‹é¢è¿™ä¸ªä¼šè¯çª—å£çš„é¢œè‰²ï¼Œé€‰ä¸­è¿™ä¸ªå›¾æ ‡ï¼ŒæŒ‰ F12ï¼ŒæŸ¥çœ‹è¿™ä¸ªå›¾æ ‡çš„å±æ€§ã€‚å‘ç°Angularä¸­çš„é¢œè‰²å±æ€§ä¸æ˜¯ Elements ä¸‹ï¼Œæ˜¯åœ¨ Styles ä¸‹é¢ï¼Œå¦‚ä½•å–åˆ°è¿™ä¸ªé¢œè‰²å€¼ï¼Ÿ</p><p><img src="/2017/10/nightwatch-auto-compare-colors/color.png" alt="element"></p><p>è¿™é‡Œä¼šç”¨åˆ° getCssProperty è¿™ä¸ªæ–¹æ³•ï¼Œå…·ä½“å¦‚ä½•ä½¿ç”¨ï¼Œè¯·çœ‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">getChatColor</span>: <span class="keyword">function</span>(<span class="params">cb</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> chat = <span class="string">&#x27;[ng-click=&quot;show()&quot;]&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getCssProperty</span>(<span class="string">&#x27;@chat&#x27;</span>, <span class="string">&#x27;background-color&#x27;</span>, <span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">      <span class="title function_">cb</span>(result.<span class="property">value</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å°†ä¸Šé¢çš„ getChatColor command ä»£ç æ”¾åˆ°ä¸€ä¸ªå« chat.js çš„ page ä¸‹é¢ï¼Œç„¶ååœ¨æµ‹è¯•ç”¨ä¾‹ä¸­è¿™æ ·è°ƒç”¨è¿™ä¸ª command</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;Test get color&#x27;</span>: <span class="keyword">function</span> (<span class="params">client</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> chat = client.<span class="property">page</span>.<span class="title function_">chat</span>();</span><br><span class="line">    <span class="keyword">let</span> chatColor;</span><br><span class="line">    chat.<span class="title function_">navigate</span>();</span><br><span class="line"></span><br><span class="line">    chat.<span class="title function_">getChatColor</span>(<span class="keyword">function</span>(<span class="params">color</span>) &#123;</span><br><span class="line">        chatColor = color;</span><br><span class="line">    &#125;);</span><br><span class="line">    client.<span class="title function_">perform</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        client.<span class="property">assert</span>.<span class="title function_">equal</span>(chatColor, <span class="string">&#x27;rgba(50, 104, 152, 1)&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆªå›¾ä¸­çœ‹åˆ°çš„ background color æ˜¯ rgb(50, 104, 152), ä½†æ˜¯ getChatColor è¿”å›æŒ‡æ˜¯rgbaï¼Œrgb å’Œ rgba ä¹‹é—´éœ€è¦è½¬åŒ–ä¸€ä¸‹ï¼Œa è¡¨ç¤ºé€æ˜åº¦ï¼Œå–å€¼0~1ä¹‹é—´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch è·å–æ¥å£è¿”å›æ•°æ®</title>
      <link href="/2017/10/nightwatch-get-interface-return-data/"/>
      <url>/2017/10/nightwatch-get-interface-return-data/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•åœ¨ JavaScript é€šè¿‡æ¥å£è‡ªåŠ¨ç”Ÿæˆå’Œè¿”å›æ¥å£æ•°æ®å‘¢ï¼Ÿ</p><p>åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­å¸¸å¸¸é‡åˆ°æ¥å£æµ‹è¯•ï¼Œæˆ–æ˜¯ä½¿ç”¨çš„æ•°æ®éœ€è¦ä»æ¥å£è¿”å›ï¼Œé‚£ä¹ˆå¦‚ä½•æ¥å®ç°è¿™ç§æƒ…å†µï¼Ÿ<br>ä¾‹å¦‚æˆ‘æƒ³é€šè¿‡ generateLicense æ–¹æ³•ç”Ÿæˆä¸€ä¸ª licenseï¼Œç„¶ååœ¨ä¹‹åçš„è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨è¿™ä¸ªç”Ÿæˆçš„ license ç»§ç»­åšä¸‹ä¸€æ­¥çš„æ“ä½œï¼Œä¾‹å¦‚æ³¨å†Œ license ç­‰ã€‚</p><p>åœ¨ license.js æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ª generateLicense æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">generateLicense</span>: <span class="keyword">function</span>(<span class="params">success, day, capacity, code</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> options = &#123; <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://generate-license/api/licenses&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>:</span><br><span class="line">        &#123; <span class="string">&#x27;postman-token&#x27;</span>: <span class="string">&#x27;d849e636-58c9-2705&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;cache-control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">        <span class="attr">authorization</span>: <span class="string">&#x27;Basic YWRtaW46U&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">body</span>: &#123; <span class="attr">company</span>: <span class="string">&#x27;Google&#x27;</span>,</span><br><span class="line">        <span class="attr">email</span>: <span class="string">&#x27;5012962@qq.com&#x27;</span>,</span><br><span class="line">        <span class="attr">expiration</span>: day,</span><br><span class="line">        <span class="attr">capacity</span>: capacity,</span><br><span class="line">        <span class="attr">phone</span>: <span class="string">&#x27;89262518&#x27;</span>,</span><br><span class="line">        <span class="attr">address</span>: <span class="string">&#x27;Dalian&#x27;</span>,</span><br><span class="line">        <span class="attr">code</span>: code &#125;,</span><br><span class="line">    <span class="attr">json</span>: <span class="literal">true</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">request</span>(options, <span class="keyword">function</span> (<span class="params">error, response</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="title function_">success</span>(response);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å¯¹ä¸Šé¢ç”Ÿæˆçš„ license è¿›è¡Œèµ‹å€¼ï¼Œä¹‹åçš„æµ‹è¯•ç”¨ä¾‹ä¸­å°±å¯ä»¥ä½¿ç”¨ MVlicense äº†ã€‚<br>ä½¿ç”¨ä¸­ä¼šæ¶‰åŠåˆ°å¼‚æ­¥æ“ä½œï¼Œå¼‚æ­¥å¦‚ä½•æ“ä½œè¯·çœ‹ä¹‹å‰çš„æ–‡ç« ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> license = client.<span class="property">page</span>.<span class="title function_">license</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">MVlicense</span>;</span><br><span class="line">license.<span class="title function_">generateLicense</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="title class_">MVlicense</span> = response.<span class="property">body</span>.<span class="property">data</span>.<span class="property">license</span>.<span class="property">license</span>;</span><br><span class="line">&#125;, <span class="number">365</span>, <span class="number">10</span>, <span class="string">&#x27;MV&#x27;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch å¼‚æ­¥æ“ä½œ</title>
      <link href="/2017/10/nightwatch-async-operation/"/>
      <url>/2017/10/nightwatch-async-operation/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­å¸¸å¸¸éœ€è¦é€šè¿‡ä¸€ä¸ª commandï¼ˆæˆ– function ï¼‰ä¸­è¿”å›çš„å€¼æ¥è¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œï¼ŒJavaScript ä¸ JAVA åœ¨è°ƒç”¨è¿”å›å€¼æ—¶æœ‰æ‰€ä¸åŒï¼ŒJS ä¸­éœ€è¦ç‰¹å®šçš„å†™æ³•æ¥è¿›è¡Œè¿™ç§å¼‚æ­¥æ“ä½œã€‚</p><p>ä»¥ä¸‹é¢çš„ get License æ•°é‡ä¸ºä¾‹ï¼Œé¦–å…ˆéœ€è¦ get ä¸€æ¬¡ License æ•°é‡ï¼Œç„¶åè¿›è¡Œä¸€äº›åˆ—æ“ä½œä¹‹åï¼Œå†ä¸€æ¬¡ get License æ•°é‡ï¼Œæ¯”è¾ƒè¿™ä¸¤æ¬¡ License æ•°é‡å€¼ã€‚</p><p>getLicenseNum æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">getLicenseNum</span>: <span class="keyword">function</span> (<span class="params">cb</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> license = <span class="string">&#x27;ul &gt; li.license-id.ng-binding&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">waitForElementVisible</span>(license, <span class="number">5000</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">api</span>.<span class="title function_">elements</span>(<span class="string">&#x27;css selector&#x27;</span>, license, <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">        <span class="title function_">cb</span>(result.<span class="property">value</span>.<span class="property">length</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹ä¸¤æ¬¡å¾—åˆ°çš„ License num è¿›è¡Œæ¯”è¾ƒï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;JavaScrpit asynchronous operation&#x27;</span>: <span class="keyword">function</span>(<span class="params">client</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> license = client.<span class="property">page</span>.<span class="title function_">license</span>();</span><br><span class="line">    <span class="keyword">let</span> num1, num2;</span><br><span class="line">    license.<span class="title function_">getLicenseNum</span>(<span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">        num1 = num;</span><br><span class="line">    &#125;);</span><br><span class="line">    license.<span class="title function_">getLicenseNum</span>(<span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">        num2 = num;</span><br><span class="line">    &#125;);</span><br><span class="line">    client.<span class="title function_">perform</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        client.<span class="property">assert</span>.<span class="title function_">equal</span>(num2 - num1, <span class="number">1</span>, <span class="string">&#x27;license number increase 1&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatch æ¨¡æ‹Ÿé”®ç›˜æ“ä½œ</title>
      <link href="/2017/10/nightwatch-keyboard/"/>
      <url>/2017/10/nightwatch-keyboard/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œåœ¨ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€ä¸²å­—ç¬¦ï¼Œç„¶åæ‰§è¡Œæ•²å›è½¦é”®ï¼ŒéªŒè¯æœç´¢ç»“æœï¼Œä»¥ Google æœç´¢ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;search nightwatch and click ENTER key&#x27;</span>: <span class="keyword">function</span>(<span class="params">client</span>) &#123;</span><br><span class="line"> client</span><br><span class="line">    .<span class="title function_">url</span>(<span class="string">&#x27;http://google.com&#x27;</span>)</span><br><span class="line">    .<span class="property">expect</span>.<span class="title function_">element</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">to</span>.<span class="property">be</span>.<span class="property">present</span>.<span class="title function_">before</span>(<span class="number">1000</span>);</span><br><span class="line"> client.<span class="title function_">setValue</span>(<span class="string">&#x27;input[type=text]&#x27;</span>, [<span class="string">&#x27;nightwatch&#x27;</span>, client.<span class="property">Keys</span>.<span class="property">ENTER</span>])</span><br><span class="line">    .<span class="title function_">pause</span>(<span class="number">1000</span>)</span><br><span class="line">    .<span class="property">assert</span>.<span class="title function_">containsText</span>(<span class="string">&#x27;#main&#x27;</span>, <span class="string">&#x27;Night Watch&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p>ä¸èƒ½ç¿»å¢™çš„å¯æ¢æˆ baiduï¼Œç›¸åº”çš„ element éœ€è¦æ”¹ä¸€ä¸‹å¦åˆ™ä»¥ä¸Šä»£ç ä¼šæŠ¥é”™ã€‚<br>ä¸Šé¢çš„ä»£ç æ˜¯æ‰§è¡Œä¸€ä¸ªæŒ‰é”®æ“ä½œï¼Œå¦‚æœæƒ³åšç»„åˆé”®æ“ä½œæ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚åœ¨ Google æœç´¢æ¡†ä¸­è¾“å…¥ nightwatchï¼Œç„¶åæŒ‰ ctrl+a ç»„åˆé”®æ¥è¿›è¡Œå…¨é€‰æ“ä½œã€‚è¿˜æ˜¯ä»¥ Google æœç´¢ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">client.<span class="title function_">setValue</span>(<span class="string">&#x27;input[type=text]&#x27;</span>,[<span class="string">&#x27;nightwatch&#x27;</span>, [client.<span class="property">Keys</span>.<span class="property">CONTROL</span>, <span class="string">&#x27;a&#x27;</span>]])</span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„ç»„åˆé”®æ“ä½œä»¥æ­¤ç±»æ¨ã€‚</p><p>å…¶ä»–æŒ‰é”® Keys å¦‚ä¸‹ï¼š<br>Keys:<br>{ NULL,<br>  CANCEL,<br>  HELP,<br>  BACK_SPACE,<br>  TAB,<br>  CLEAR,<br>  RETURN,<br>  ENTER,<br>  SHIFT,<br>  CONTROL,<br>  ALT,<br>  PAUSE,<br>  ESCAPE,<br>  SPACE,<br>  PAGEUP,<br>  PAGEDOWN,<br>  END,<br>  HOME,<br>  LEFT_ARROW,<br>  UP_ARROW,<br>  RIGHT_ARROW,<br>  DOWN_ARROW,<br>  ARROW_LEFT,<br>  ARROW_UP,<br>  ARROW_RIGHT,<br>  ARROW_DOWN,<br>  INSERT,<br>  DELETE,<br>  SEMICOLON,<br>  EQUALS,<br>  NUMPAD0,<br>  NUMPAD1,<br>  NUMPAD2,<br>  NUMPAD3,<br>  NUMPAD4,<br>  NUMPAD5,<br>  NUMPAD6,<br>  NUMPAD7,<br>  NUMPAD8,<br>  NUMPAD9,<br>  MULTIPLY,<br>  ADD,<br>  SEPARATOR,<br>  SUBTRACT,<br>  DECIMAL,<br>  DIVIDE,<br>  F1,<br>  F2,<br>  F3,<br>  F4,<br>  F5,<br>  F6,<br>  F7,<br>  F8,<br>  F9,<br>  F10,<br>  F11,<br>  F12,<br>  COMMAND,<br>  META<br>},</p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nightwatchjs ä¸­æ–‡å‚è€ƒæ‰‹å†Œ</title>
      <link href="/2017/10/nightwatchjs-guilde/"/>
      <url>/2017/10/nightwatchjs-guilde/</url>
      
        <content type="html"><![CDATA[<p><a href="https://shenxianpeng.gitbooks.io/nightwatch-js-cn/content/">Nightwatchä¸­æ–‡å‚è€ƒæ‰‹å†Œ</a></p><h2 id="ä¸ºä½•æ”¾å¼ƒ-JAVA-æ”¹ç”¨-Nightwatch"><a href="#ä¸ºä½•æ”¾å¼ƒ-JAVA-æ”¹ç”¨-Nightwatch" class="headerlink" title="ä¸ºä½•æ”¾å¼ƒ JAVA æ”¹ç”¨ Nightwatch"></a>ä¸ºä½•æ”¾å¼ƒ JAVA æ”¹ç”¨ Nightwatch</h2><ul><li>é¡¹ç›®åˆæœŸç”¨çš„æ˜¯ Java + Selenium + TestNG è‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œç”±äºä¹‹å‰æ¨è¡Œçš„åŠ›åº¦ä¸å¤Ÿï¼ŒåŠ ä¸Šç¹é‡çš„åŠŸèƒ½æµ‹è¯•å’Œé¢‘ç¹çš„é¡¹ç›®å˜æ›´å¯¼è‡´è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç è·Ÿä¸ä¸Šå¼€å‘çš„è¿›åº¦ï¼Œå¤§é‡çš„æµ‹è¯•ä»£ç æ— æ³•æ­£åœ¨è¿è¡Œã€‚</li><li>æˆ‘ä»¬çš„äº§å“é‡‡ç”¨çš„ AngularJS å¼€å‘ï¼Œå‰ç«¯å¼€å‘äººå‘˜å¯¹jså¯¹Javaæ›´ç²¾é€šï¼Œä»¥åçš„è‡ªåŠ¨åŒ–è„šæœ¬å¼€å‘ä¹Ÿå¯ä»¥ä¸€èµ·ç¼–å†™ã€‚</li><li>Nightwatch çš„ç¯å¢ƒé…ç½®å’Œæ‰§è¡Œç®€å•ï¼Œåªè¦ npm installã€npm test å°±å¯ä»¥è¿è¡Œèµ·æ¥ï¼Œæ–¹ä¾¿é…ç½®ï¼Œè¿è¡Œå’Œç»§ç»­é›†æˆã€‚</li></ul><p>å› æ­¤ï¼Œä¸å…¶ç»´æŠ¤ä¸å¯ç”¨çš„ä»£ç ä¸å¦‚å¥½å¥½æ•´ç†ï¼Œä¸å¦‚åœ¨é¡¹ç›®é¢†å¯¼å’Œå¼€å‘çš„å¼ºåŠ›æ”¯æŒä¸‹é‡æ–°å¼€å§‹åšä¸€å¥—å¯ç”¨çš„ E2E æµ‹è¯•ã€‚</p><h2 id="å…³äº-Nightwatch-ç¿»è¯‘"><a href="#å…³äº-Nightwatch-ç¿»è¯‘" class="headerlink" title="å…³äº Nightwatch ç¿»è¯‘"></a>å…³äº Nightwatch ç¿»è¯‘</h2><p>å­¦ä¹ ä¸­å‘ç° Nightwatch æ²¡æœ‰æ¯”è¾ƒå®Œæ•´çš„ä¸­æ–‡å‚è€ƒæ‰‹å†Œï¼Œå› æ­¤å†³å®šå­¦ä¹ ä¹‹ä½™ç¿»è¯‘ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿çº æ­£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nightwatch </tag>
            
            <tag> Automation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JST automation framework</title>
      <link href="/2017/07/jst-automation/"/>
      <url>/2017/07/jst-automation/</url>
      
        <content type="html"><![CDATA[<p>This automation framework was design by Java+Selenium+TestNG when I did automation test work, so I called it JST-automation.</p><h2 id="Directory-Structure"><a href="#Directory-Structure" class="headerlink" title="Directory Structure"></a>Directory Structure</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€JST-automation</span><br><span class="line">|   â”œâ”€â”€ src</span><br><span class="line">|   |   â””â”€â”€ main</span><br><span class="line">|   |   |   â””â”€â”€ java</span><br><span class="line">|   |   |   |   â””â”€â”€ com</span><br><span class="line">|   |   |   |   |   â””â”€â”€ action</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ case01</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ case02</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ common</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ .....</span><br><span class="line">|   |   |   |   |   â””â”€â”€ config</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ UserConfig</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ DriverConfig</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ UrlConfig</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ ......</span><br><span class="line">|   |   |   |   |   â””â”€â”€ page</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ LoginPage</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ HomePage</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ ......</span><br><span class="line">|   |   |   |   |   â””â”€â”€ verify</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ case01</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ case02</span><br><span class="line">|   |   |   |   |   |   â””â”€â”€ ......</span><br><span class="line">|   â””â”€â”€ testng.xml</span><br><span class="line">|   â””â”€â”€ pom.xml</span><br></pre></td></tr></table></figure><ol><li>action: all test function write in this folder</li><li>config: all config file put in this folder</li><li>page: all page element write in this folder</li><li>verify: all verify test case write in this folder</li><li>testng.xml: test suit file, config all verify test case in this file</li><li>pom.xml: configuration need package files</li></ol><h2 id="Download-Code"><a href="#Download-Code" class="headerlink" title="Download Code"></a>Download Code</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/shenxianpeng/JST-automation.git</span><br></pre></td></tr></table></figure><p>Any suggestion and questions please feel free to create issue <a href="https://github.com/shenxianpeng/JST-automation/issues">here</a></p>]]></content>
      
      
      <categories>
          
          <category> Automation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> TestNG </tag>
            
            <tag> Selenium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello Hexo</title>
      <link href="/2017/07/hello-hexo/"/>
      <url>/2017/07/hello-hexo/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start-4-Steps"><a href="#Quick-Start-4-Steps" class="headerlink" title="Quick Start(4 Steps)"></a>Quick Start(4 Steps)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;My New Post&quot;</span>    <span class="comment">#Create a new post</span></span><br><span class="line">hexo server               <span class="comment">#Run server</span></span><br><span class="line">hexo generate             <span class="comment">#Generate static files</span></span><br><span class="line">hexo deploy               <span class="comment">#Deploy to remote sites</span></span><br></pre></td></tr></table></figure><h2 id="Also"><a href="#Also" class="headerlink" title="Also"></a>Also</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;My New Post&quot;</span>    <span class="comment">#Create a new post</span></span><br><span class="line">hexo server               <span class="comment">#Run server</span></span><br><span class="line">hexo generate -deplogy    <span class="comment">#Generate then deploy</span></span><br><span class="line">or</span><br><span class="line">hexo g -d                 <span class="comment">#Simple write this</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
