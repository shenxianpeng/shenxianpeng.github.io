<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hello World</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I’ve been QA Engineer for the last nine years, from Jun 2018 I am a Software Engineer.">
<meta property="og:type" content="website">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="https://shenxianpeng.github.io/index.html">
<meta property="og:site_name" content="Hello World">
<meta property="og:description" content="I’ve been QA Engineer for the last nine years, from Jun 2018 I am a Software Engineer.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Xianpeng Shen">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hello World" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-168820225-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hello World</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">非著名程序员的网络日志，把分享变成一种习惯。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://shenxianpeng.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2020/06/about-my-wechat-official-account" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/about-my-wechat-official-account/" class="article-date">
  <time datetime="2020-06-30T14:13:26.000Z" itemprop="datePublished">2020-06-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mynotes/">MyNotes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/about-my-wechat-official-account/">一名软件测试工程师的成长之路</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>关注本公众号的读者们可能会感到困惑，我最开始分享是软件功能测试、自动化测试；之后短暂的分享过一点开发；再之后主要在分享 CI/CD 及 DevOps 相关的内容。</p>
<p>因此，我想通过本篇简单介绍下自己的公众号以及写公众号带来了哪些收获，通过这个过程展示了作为<strong>一名软件测试工程师的成长之路。</strong></p>
<p>细心的读者可能通过我的公众号的更名记录也能看出个一二来：</p>
<p>关注本公众号的读者们可能会感到困惑，从最开始分享是功能测试、自动化测试，之后短暂的写过一点开发，之后主要在分享CI/CD（持续集成、持续交付）及 DevOps 相关的内容。</p>
<p>可能细心的读者通过我的公众号的更名记录觉察到其实是我的岗位职责发生变化：</p>
<ul>
<li>2017年08月01日 注册“软件测试QA”</li>
<li>2018年12月26日 “软件测试QA”改名“DevQA”</li>
<li>2018年12月29日 “DevQA”改名“软件测试与开发”</li>
<li>2019年07月28日 “软件测试与开发”改名“DevOps攻城狮”</li>
</ul>
<p>我原本是一名测试工程师，曾先后在 SIMcom、东软、京东、以及外企从事软件测试工作，从做手工测试到自动化测试和持续集成，一晃就是九年时间。</p>
<p>在做测试的过程中，我看到了软件技术不但是软件开发工程师的立命之本也是测试工程师的职业前进的必备技能，我心中期盼有朝一日自己不再是那个你不懂技术的测试。一直坚持拓展自己的视野、学习开发技术，期盼有机会去做一回开发，这对于我职业发展将会是一次非常好的经历，不但可以加快提高开发技能，也能通过角色的变化从而站在开发的角度看问题，为今后的职业发现提供更多可能。</p>
<p>时间终于给了一直在准备的人机会。</p>
        
          <p class="article-more-link">
            <a href="/2020/06/about-my-wechat-official-account/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/06/about-my-wechat-official-account/" data-id="ckc5mu1xa009bswfoe9o87017" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/06/about-my-wechat-official-account/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thought/" rel="tag">Thought</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/06/Jenkins-tips-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/Jenkins-tips-2/" class="article-date">
  <time datetime="2020-06-22T06:37:29.000Z" itemprop="datePublished">2020-06-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/Jenkins-tips-2/">《Jenkins Tips 002》 处理 Shell 返回的字符串成字符数组</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Jenkins Tips —— 每期用简短的图文描述一个 Jenkins 小技巧。</p>
</blockquote>
<p><img src="/2020/06/Jenkins-tips-2/jenkins-tips.png" alt></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>想要把 Linux 上不同的文本数据通过 Jenkins 发送邮件给不同的人。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>想通过 Shell 先对数据进行处理，然后返回到 Jenkins pipeline 里，但只能得到 Shell 返回的字符串，因此需要在 Jenkinsfile 里把字符串处理成数组，然后通过一个 for 循环对数组中的值进行处理。</p>
<p>以下是要处理的文本数据：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Example</span></span><br><span class="line">$ ls</span><br><span class="line">fail-list-user1.txt  fail-list-user2.txt  fail-list-user3.txt</span><br></pre></td></tr></table></figure>
<p>要将以上文件通过 Jenkins 分别进行处理，得到用户 user1，user2，user3 然后发送邮件。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2>
        
          <p class="article-more-link">
            <a href="/2020/06/Jenkins-tips-2/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/06/Jenkins-tips-2/" data-id="ckc5mu1xb009fswfobb2lfu91" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/06/Jenkins-tips-2/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/" rel="tag">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tips/" rel="tag">Tips</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/06/Jenkins-tips-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/Jenkins-tips-1/" class="article-date">
  <time datetime="2020-06-21T13:42:17.000Z" itemprop="datePublished">2020-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/Jenkins-tips-1/">《Jenkins Tips 001》 忽略 Shell 步骤中的故障</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Jenkins Tips —— 每期用简短的图文描述一个 Jenkins 小技巧。</p>
</blockquote>
<p><img src="/2020/06/Jenkins-tips-1/jenkins-tips.png" alt></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul>
<li>不希望 Shell 脚本因失败而中止</li>
<li>想一直运行 Shell 脚本并报告失败</li>
</ul>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2>
        
          <p class="article-more-link">
            <a href="/2020/06/Jenkins-tips-1/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/06/Jenkins-tips-1/" data-id="ckc5mu1xa0098swfoclqqant3" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/06/Jenkins-tips-1/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/" rel="tag">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tips/" rel="tag">Tips</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/06/vm-status-check-via-jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/vm-status-check-via-jenkins/" class="article-date">
  <time datetime="2020-06-12T19:34:28.000Z" itemprop="datePublished">2020-06-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/devops/">DevOps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/vm-status-check-via-jenkins/">这也能用Jenkins？快速实现一个定期批量登录远程虚拟机并支持添加新的主机名称的Job</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>实现定期批量登录远程虚拟机然后进行一些指定的操作，还支持用户添加新的 hostname。</p>
<h2 id="需求分解"><a href="#需求分解" class="headerlink" title="需求分解"></a>需求分解</h2><p>通过一个简单的 shell 脚本可实现定期进行 ssh 登录操作，但如何实现的更优雅一些就需要花点时间了，比如：</p>
<ol>
<li>定期自动执行</li>
<li>输出比较直观的登录测试结果</li>
<li>支持用户添加新的虚拟机 hostname 到检查列表中</li>
<li>执行完成后，通知用户等等</li>
</ol>
<p>希望在不引入其他 Web 页面的情况下通过现有的工具 Jenkins 使用 Shell 脚本如何实现呢？</p>
<ol>
<li>写一个脚本去循环一个 list 里所有的 hostname，经考虑这个 list 最好是一个 file，这样方便后续处理。</li>
<li>这样当用户通过执行 Jenkins job 传入新的 hostname 时，使用新的 hostname 到 file 里进行 grep，查看是否已存在。</li>
<li>如果 grep 到，不添加；如果没有 grep 到，将这个 hostname 添加到 file 里。</li>
<li>将修改后的 file 添加到 git 仓库里，这样下次 Jenkins 的定时任务就会执行最近添加的 hostname 了。</li>
</ol>
<h2 id="实现重点"><a href="#实现重点" class="headerlink" title="实现重点"></a>实现重点</h2><ol>
<li><p>使用 <code>expect</code>。在使用 ssh 连接远程虚拟机的时候需要实现与远程连接时实现交互，例如：可以期待屏幕上的输出，然后进而进行相应的输入。在使用 <code>expect</code> 之前需要先安装，以 Redhat 的安装命令为例： <code>sudo yum install expect</code> 来进行安装。</p>
<blockquote>
<p>更多有关 <code>expect</code> 使用的可以参看这个连接：<a href="http://xstarcd.github.io/wiki/shell/expect.html" target="_blank" rel="noopener">http://xstarcd.github.io/wiki/shell/expect.html</a></p>
</blockquote>
</li>
<li><p>使用了 Shell 数组。使用 Shell 读取文件数据，进行登录操作，将操作失败的记录到一个数组里，然后打印出来。</p>
</li>
<li><p>在通过 Jenkins 提交新的 hostname 到 Git 仓库时，origin 的 URL 需要是 <code>https://${USERNAME}:${PASSWORD}@git.company.com/scm/vmm.git</code> 或 <code>git@company.com:scm/vmm.git</code>（需要提前在执行机器上生成了 id_rsa.pub）</p>
</li>
</ol>
<blockquote>
<p>代码已经上传 GitHub 请参看 <a href="https://github.com/shenxianpeng/vmm.git" target="_blank" rel="noopener">https://github.com/shenxianpeng/vmm.git</a></p>
</blockquote>
<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><h3 id="开始执行，提供输入新的-hostname"><a href="#开始执行，提供输入新的-hostname" class="headerlink" title="开始执行，提供输入新的 hostname"></a>开始执行，提供输入新的 hostname</h3><p><img src="/2020/06/vm-status-check-via-jenkins/pipeline-start.png" alt></p>
<h3 id="执行完成，将执行结果归档以便查看"><a href="#执行完成，将执行结果归档以便查看" class="headerlink" title="执行完成，将执行结果归档以便查看"></a>执行完成，将执行结果归档以便查看</h3><p><img src="/2020/06/vm-status-check-via-jenkins/pipeline-result.png" alt></p>
<h3 id="打开归档结果如下"><a href="#打开归档结果如下" class="headerlink" title="打开归档结果如下"></a>打开归档结果如下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#####################################################</span><br><span class="line">######### VM login check via SSH results ############</span><br><span class="line">#####################################################</span><br><span class="line">#                                                   #</span><br><span class="line"># Compelted (success) 14&#x2F;16 (total) login vm check. #</span><br><span class="line">#                                                   #</span><br><span class="line"># Below 2 host(s) login faied, need to check.       #</span><br><span class="line">#                                                   #</span><br><span class="line">      abc.company.com </span><br><span class="line">      xyz.company.com </span><br><span class="line">#                                                   #</span><br><span class="line">#####################################################</span><br></pre></td></tr></table></figure>

<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>现在技术的更新非常快，尤其作为 DevOps 工程师，各种工具层出不穷，想要每一样工具都掌握几乎是不可能的。</p>
<p>只会工具不了解其背后的原理，等到新工具出现替换掉旧的工具，其实这些年是没有进步的。</p>
<p>只有认真的把在工作中遇到的每个问题背后来龙去脉去搞懂，才能地基打的稳，这样不论工具怎么变，学习起来都会很快。</p>
<p>掌握操作系统，Shell，以及一门擅长的编程语言之后再去学习那些工具，要不永远都是漂浮在空中。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/06/vm-status-check-via-jenkins/" data-id="ckc5mu1xc009iswfo71wb9s9d" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/06/vm-status-check-via-jenkins/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/" rel="tag">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/" rel="tag">Shell</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/06/Java-net-SocketException-on-AIX" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/Java-net-SocketException-on-AIX/" class="article-date">
  <time datetime="2020-06-03T11:30:03.000Z" itemprop="datePublished">2020-06-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/Java-net-SocketException-on-AIX/">解决 Jenkins Artifactory Plugin 仅在 AIX 上传制品到 https 协议的 Artifactory 失败的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>本文对于同样在 AIX 遇到这个问题的人会非常有帮助。另外，不要被标题无聊到，解决问题的过程值得参考。</p>
</blockquote>
<p>分享一个花了两天时间才解决的一个问题：使用 Jenkins Artifactory 插件上传制品到 https 协议的企业级的 Artifactory 失败。该问题只在 AIX 平台上出现的，其他 Windows，Linux, Unix 均正常。</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近计划将之前使用的 Artifactory OSS（开源版）迁移到 Aritifactory Enterprise（企业版）上。为什么要做迁移？这里有一个 Artifactory 对比的矩阵图 <a href="https://www.jfrog.com/confluence/display/JFROG/Artifactory+Comparison+Matrix" target="_blank" rel="noopener">https://www.jfrog.com/confluence/display/JFROG/Artifactory+Comparison+Matrix</a></p>
<p>简单来说，开源版缺少与 CI 工具集成时常用的 REST API 功能，比如以下常用功能</p>
<ul>
<li>设置保留策略(Retention)。设置上传的制品保留几天等，达到定期清理的目的。</li>
<li>提升(Promote)。通过自动化测试的制品会被提升到 stage（待测试）仓库，通过手工测试的提升到 release（发布）仓库。</li>
<li>设置属性(set properties)。对于通过不同阶段的制品通过 CI 集成进行属性的设置。</li>
</ul>
<p>正好公司已经有企业版了，那就开始迁移吧。本以为会很顺利的完成，没想到唯独在 IBM 的 AIX 出现上传制品失败的问题。</p>
<blockquote>
<p>环境信息</p>
<ul>
<li>Jenkins ver. 2.176.3</li>
<li>Artifactory Plugin 3.6.2</li>
<li>Enterprise Artifactory 6.9.060900900</li>
<li>AIX 7.1 &amp;&amp; java version 1.8.0</li>
</ul>
</blockquote>
<p>以下是去掉了无相关的信息的错误日志。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[consumer_0] Deploying artifact: https:<span class="comment">//artifactory.company.com/artifactory/generic-int-den/database/develop/10/database2_cdrom_opt_AIX_24ec6f9.tar.Z</span></span><br><span class="line">Error occurred <span class="keyword">for</span> request GET /artifactory/api/system/version HTTP/<span class="number">1.1</span>: A system call received a parameter that is not valid. (Read failed).</span><br><span class="line">Error occurred <span class="keyword">for</span> request PUT /artifactory/generic-<span class="keyword">int</span>-den/database/develop/<span class="number">10</span>/database2_cdrom_opt_AIX_24ec6f9.tar.Z;build.timestamp=<span class="number">1591170116591</span>;build.name=develop;build.number=<span class="number">10</span> HTTP/<span class="number">1.1</span>: A system call received a parameter that is not valid. (Read failed).</span><br><span class="line">Error occurred <span class="keyword">for</span> request PUT /artifactory/generic-<span class="keyword">int</span>-den/database/develop/<span class="number">10</span>/database2_cdrom_opt_AIX_24ec6f9.tar.Z;build.timestamp=<span class="number">1591170116591</span>;build.name=develop;build.number=<span class="number">10</span> HTTP/<span class="number">1.1</span>: A system call received a parameter that is not valid. (Read failed).</span><br><span class="line">[consumer_0] An exception occurred during execution:</span><br><span class="line"> java.lang.RuntimeException: java.net.SocketException: A system call received a parameter that is not valid. (Read failed)</span><br><span class="line"> 	at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:<span class="number">44</span>)</span><br><span class="line"> 	at org.jfrog.build.extractor.producerConsumer.ConsumerRunnableBase.run(ConsumerRunnableBase.java:<span class="number">11</span>)</span><br><span class="line"> 	at java.lang.Thread.run(Thread.java:<span class="number">785</span>)</span><br><span class="line"> Caused by: java.net.SocketException: A system call received a parameter that is not valid. (Read failed)</span><br><span class="line"> 	at java.net.SocketInputStream.socketRead(SocketInputStream.java:<span class="number">127</span>)</span><br><span class="line"> 	at java.net.SocketInputStream.read(SocketInputStream.java:<span class="number">182</span>)</span><br><span class="line"> 	at java.net.SocketInputStream.read(SocketInputStream.java:<span class="number">152</span>)</span><br><span class="line"> 	at com.ibm.jsse2.a.a(a.java:<span class="number">227</span>)</span><br><span class="line"> 	at com.ibm.jsse2.a.a(a.java:<span class="number">168</span>)</span><br><span class="line"> 	at com.ibm.jsse2.as.a(as.java:<span class="number">702</span>)</span><br><span class="line"> 	at com.ibm.jsse2.as.i(as.java:<span class="number">338</span>)</span><br><span class="line"> 	at com.ibm.jsse2.as.a(as.java:<span class="number">711</span>)</span><br><span class="line"> 	at com.ibm.jsse2.as.startHandshake(as.java:<span class="number">454</span>)</span><br><span class="line"> 	at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:<span class="number">436</span>)</span><br><span class="line"> 	at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:<span class="number">384</span>)</span><br><span class="line"> 	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:<span class="number">142</span>)</span><br><span class="line"> 	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:<span class="number">374</span>)</span><br><span class="line"> 	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:<span class="number">393</span>)</span><br><span class="line"> 	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:<span class="number">236</span>)</span><br><span class="line"> 	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:<span class="number">186</span>)</span><br><span class="line"> 	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:<span class="number">89</span>)</span><br><span class="line"> 	at org.apache.http.impl.execchain.ServiceUnavailableRetryExec.execute(ServiceUnavailableRetryExec.java:<span class="number">85</span>)</span><br><span class="line"> 	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:<span class="number">110</span>)</span><br><span class="line"> 	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:<span class="number">185</span>)</span><br><span class="line"> 	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:<span class="number">83</span>)</span><br><span class="line"> 	at org.jfrog.build.client.PreemptiveHttpClient.execute(PreemptiveHttpClient.java:<span class="number">89</span>)</span><br><span class="line"> 	at org.jfrog.build.client.ArtifactoryHttpClient.execute(ArtifactoryHttpClient.java:<span class="number">253</span>)</span><br><span class="line"> 	at org.jfrog.build.client.ArtifactoryHttpClient.upload(ArtifactoryHttpClient.java:<span class="number">249</span>)</span><br><span class="line"> 	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.uploadFile(ArtifactoryBuildInfoClient.java:<span class="number">692</span>)</span><br><span class="line"> 	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.doDeployArtifact(ArtifactoryBuildInfoClient.java:<span class="number">379</span>)</span><br><span class="line"> 	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.deployArtifact(ArtifactoryBuildInfoClient.java:<span class="number">367</span>)</span><br><span class="line"> 	at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:<span class="number">39</span>)</span><br><span class="line"> 	... <span class="number">2</span> more </span><br><span class="line">Failed uploading artifacts by spec</span><br></pre></td></tr></table></figure>

<p>很奇怪会出现上述问题，从开源版的 Artifactory 迁移到企业版的 Artifactory，它们之间最直接的区别是使用了不同的传输协议，前者是 http 后者是 https。</p>
<blockquote>
<p>HTTPS 其实是有两部分组成：HTTP + SSL/TLS，也就是在 HTTP 上又加了一层处理加密信息的模块，因此更安全。</p>
</blockquote>
<p>本以为 Google 一下就能找到此类问题的解决办法，可惜这个问题在其他平台都没有，只有 AIX 上才有，肯定这个 AIX 有什么“过人之处”和其他 Linux/Unix 不一样。</p>
<h2 id="使用-curl-来替代"><a href="#使用-curl-来替代" class="headerlink" title="使用 curl 来替代"></a>使用 <code>curl</code> 来替代</h2><p>由于上述问题重现在需要重新构建，比较花时间，就先试试直接用 <code>curl</code> 命令来调用 Artifactory REST API 看看结果。</p>
<p>做了以下测试，查看 Artifactory 的版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">curl  https://artifactory.company.com/artifactory/api/system/version</span><br><span class="line">curl: (35) Unknown SSL protocol error <span class="keyword">in</span> connection to artifactory.company.com:443</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开 -v 模式，输出更多信息</span></span><br><span class="line">bash-4.3$ curl -v  https://artifactory.company.com/artifactory/api/system/version</span><br><span class="line">*   Trying 10.18.12.95...</span><br><span class="line">* Connected to artifactory.company.com (10.18.12.95) port 443 (<span class="comment">#0)</span></span><br><span class="line">* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH</span><br><span class="line">* TLSv1.2 (OUT), TLS handshake, Client hello (1):</span><br><span class="line">* TLSv1.2 (IN), TLS handshake, Server hello (2):</span><br><span class="line">* NPN, negotiated HTTP1.1</span><br><span class="line">* TLSv1.2 (IN), TLS handshake, Certificate (11):</span><br><span class="line">* TLSv1.2 (OUT), TLS alert, Server hello (2):</span><br><span class="line">* Unknown SSL protocol error <span class="keyword">in</span> connection to artifactory.company.com:443</span><br><span class="line">* Closing connection 0</span><br><span class="line">curl: (35) Unknown SSL protocol error <span class="keyword">in</span> connection to artifactory.company.com:443</span><br></pre></td></tr></table></figure>

<p>果然也出错了，<code>curl</code> 也不行，可能就是执行 <code>curl</code> 命令的时候没有找到指定证书，查了 <code>curl</code> 的 help，有 <code>--cacert</code> 参数可以指定 cacert.pem 文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bash-4.3$ curl --cacert /var/ssl/cacert.pem https://artifactory.company.com/artifactory/api/system/version</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.9.0"</span>,</span><br><span class="line">  <span class="string">"revision"</span> : <span class="string">"60900900"</span>,</span><br><span class="line">  <span class="string">"addons"</span> : [ <span class="string">"build"</span>, <span class="string">"docker"</span>, <span class="string">"vagrant"</span>, <span class="string">"replication"</span>, <span class="string">"filestore"</span>, <span class="string">"plugins"</span>, <span class="string">"gems"</span>, <span class="string">"composer"</span>, <span class="string">"npm"</span>, <span class="string">"bower"</span>, <span class="string">"git-lfs"</span>, <span class="string">"nuget"</span>, <span class="string">"debian"</span>, <span class="string">"opkg"</span>, <span class="string">"rpm"</span>, <span class="string">"cocoapods"</span>, <span class="string">"conan"</span>, <span class="string">"vcs"</span>, <span class="string">"pypi"</span>, <span class="string">"release-bundle"</span>, <span class="string">"replicator"</span>, <span class="string">"keys"</span>, <span class="string">"chef"</span>, <span class="string">"cran"</span>, <span class="string">"go"</span>, <span class="string">"helm"</span>, <span class="string">"rest"</span>, <span class="string">"conda"</span>, <span class="string">"license"</span>, <span class="string">"puppet"</span>, <span class="string">"ldap"</span>, <span class="string">"sso"</span>, <span class="string">"layouts"</span>, <span class="string">"properties"</span>, <span class="string">"search"</span>, <span class="string">"filtered-resources"</span>, <span class="string">"p2"</span>, <span class="string">"watch"</span>, <span class="string">"webstart"</span>, <span class="string">"support"</span>, <span class="string">"xray"</span> ],</span><br><span class="line">  <span class="string">"license"</span> : <span class="string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>试了下成功了。</p>
<p>到这里问题已经解决了，只要使用 <code>curl</code> 调用 Artifactory REST API 就能完成上传操作了。但我用的 Jenkins Artifactory Plugin，如果使用 <code>curl</code> 我需要把之前的代码重新再实现一遍，然后再测试，就为了 AIX 一个平台的问题，实在是“懒”的重新开始。本着这样懒惰的性格，还得继续解决 Jenkins 调用 agent 去执行上传失败的问题。</p>
<h2 id="最终解决办法"><a href="#最终解决办法" class="headerlink" title="最终解决办法"></a>最终解决办法</h2><h3 id="尝试设置-SSL-CERT-FILE-环境变量"><a href="#尝试设置-SSL-CERT-FILE-环境变量" class="headerlink" title="尝试设置 SSL_CERT_FILE 环境变量"></a>尝试设置 <code>SSL_CERT_FILE</code> 环境变量</h3><p>想试试用上述的办法来解决 Jenkins 的问题。如果能有一个环境变量能设置指定 cacert.pem 文件的路径，那样在 Jenkins 调用 agent 执行上传时候就能找到证书，可能就能解决这个问题了。果然是有这样的环境变量的 <code>SSL_CERT_FILE</code>，设置如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> SSL_CERT_FILE=/var/ssl/cacert.pem</span><br></pre></td></tr></table></figure>

<p>设置好环境变量之后，通过 <code>curl</code> 调用，再不需要使用 <code>--cacert</code> 参数了。这下看起来有戏了，带着喜悦的心情把这个环境变量加到 agent 机器上，设置如下：</p>
<p><img src="/2020/06/Java-net-SocketException-on-AIX/configure-agent-environment-variable.png" alt></p>
<p>或者可以修改 agent 机器上的 <code>/etc/environment</code> 文件。</p>
<p>结果经测试错误信息依旧，看来 Jenkins 执行的 remote.jar 进行上传时跟本地配置环境没有关联，看来需要从执行 remote.jar 着手，把相应的设置或是环境变量在启动 remote.jar 时传进去。</p>
<blockquote>
<p>Jenkins 管理 agent 的原理是通过在 agent 上启动一个 remote.jar 实现的</p>
</blockquote>
<h3 id="在启动-remote-jar-时设置环境变量"><a href="#在启动-remote-jar-时设置环境变量" class="headerlink" title="在启动 remote.jar 时设置环境变量"></a>在启动 remote.jar 时设置环境变量</h3><p><code>java</code> 的 <code>-D</code> 参数可以完成这一点。</p>
<p>进行了大量的搜索和尝试，最终在 IBM 的官方找到了这篇文档 <a href="https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.security.component.80.doc/security-component/jsse2Docs/matchsslcontext_tls.html" target="_blank" rel="noopener">https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.security.component.80.doc/security-component/jsse2Docs/matchsslcontext_tls.html</a></p>
<p>文档大意是，IBM SDK 系统属性 <code>com.ibm.jsse2.overrideDefaultTLS=[true|false]</code> 有 <code>true</code> 和 <code>false</code> 两个值，如果想要与 Oracle <code>SSLContext.getInstance(&quot;TLS&quot;)</code> 的行为相匹配，请将此属性设置为 <code>true</code>，默认值为 <code>false</code>。</p>
<p>下表显示了系统属性对 SSLContext.getInstance(“TLS”) 的影响</p>
<table>
<thead>
<tr>
<th>Property value setting</th>
<th>Protocol enabled</th>
</tr>
</thead>
<tbody><tr>
<td>false</td>
<td>TLS V1.0</td>
</tr>
<tr>
<td>true</td>
<td>TLS V1.0, V1.1, and V1.2</td>
</tr>
</tbody></table>
<p>绝大多数的 Java 应用都是使用 Oracle 的 JDK 来开发的，这里要与 Oracle 的行为保持一致；另外 IBM 的 SDK 默认协议只有 TLS V1.0，而上面的 log 可以看到使用的 TLSv1.2 协议，因此需要将属性设置为 <code>true</code>。</p>
<p>最终在 Jenkins 的 agent 配置里将 JVM Options 区域加上这句 <code>-Dcom.ibm.jsse2.overrideDefaultTLS=true</code>，断开连接，重新启动 agent，再次执行 Pipeline，成功的把 AIX 上的制品上传到 Artifactory 上了，问题解决了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>遇到问题并解决问题是一件非常爽的事，从中也学到了很多之前不曾了解过的知识，解决问题的过程比 Google 随便查查更让人印象深刻，再遇到此类问题可能就会举一反三了。</p>
<p>另外，凡事如果觉得自己在短时间内没有头绪、自己搞不定的时候尽快寻求有经验的同事的帮助。感谢帮助我的同事们，没有他们的帮助和指导就不能这么快的解决问题。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/06/Java-net-SocketException-on-AIX/" data-id="ckc5mu1x80091swfo25df1ua5" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/06/Java-net-SocketException-on-AIX/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/artifactory/" rel="tag">Artifactory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jfrog/" rel="tag">JFrog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/troubleshooting/" rel="tag">Troubleshooting</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/05/programmers-read-and-write" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/programmers-read-and-write/" class="article-date">
  <time datetime="2020-05-30T13:32:08.000Z" itemprop="datePublished">2020-05-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mynotes/">MyNotes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/programmers-read-and-write/">从 “会写程序的干不过会写PPT的” —— 聊程序员写作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在程序员圈子里比较流行这样一句话“会写程序的干不过会写 PPT 的”，还记得 2019 年新东方年会的一首《放飞自我》里有这样一句歌词戳中了绝大大多数程序员的内心</p>
<p>“干的累死累活，有成果那又如何，到头来干不过写PPT的”。</p>
<p>一时间大家好像都认同了这个说法，表达着自己的不满和无奈。</p>
<h2 id="（一）"><a href="#（一）" class="headerlink" title="（一）"></a>（一）</h2><p>随着自己从业超过 10 年有余，不管是从网络上还是工作中见识了各种各样的能人之后，对于真正的“能力”也有了新的认识。</p>
<p>在一开始我会觉得那些沉默寡言并且技术还好的才是真正的大神，那些会点技术就开始给人讲的是在班门弄斧。然而，当给团队分享一些技术分享的时候，发现想把一件事给绝大多数不了解的人说明白其实也同样是一种能力。</p>
<ul>
<li>首先，在给人讲之前首先得自己完全弄明白</li>
<li>其次，还要想别人可能会问的问题自己否能答出来</li>
<li>最后，故事线是什么，怎样逻辑清晰的讲出来</li>
</ul>
<h2 id="（二）"><a href="#（二）" class="headerlink" title="（二）"></a>（二）</h2><p>最近吴军老师在得到上开设了一门《阅读和写作》里他举了一个例子</p>
<p>一个项目组中有三个人，第一个人擅长于做专业工作，组里最重要的工作都是他做的，其他人也经常要靠他来指导；第二个人擅长把大家组织到一起，当大家遇到困难时，他能够鼓舞大家的士气，带领大家克服困难取得胜利；第三个人能把他们组的工作讲清楚。</p>
<p>如果老板要从这几个人中提拔一个人，谁的机会最大呢？我相信很多人会觉得是那个专业能力特别强的。但是，在现实生活中往往是第三个人最大。为什么呢？</p>
<p>我们假想一下三个人去做汇报的场景</p>
<ul>
<li><p>第一个人去做汇报，他讲了一堆专业细节，领导听得无趣，最后他既没有让全组的工作被上级认可，也没有争取到什么资源。也许第二次大家就不推举他做代表了，或者这个项目受不到重视解散了。</p>
</li>
<li><p>如果是那个善于组织的人去作报告呢？他给人的印象就是一个行政管理人员，在具体的项目上一直在外围转悠，指手画脚，细节根本讲不清楚，当然汇报的效果也好不了。</p>
</li>
<li><p>如果是大家找那个会讲的人去汇报，那么全组的工作最有可能得到认可，而且还争取来很多资源。于是大家都有好处，接下来还会让他代表大家去汇报。久而久之，在外人的印象里，他的功劳第一。</p>
</li>
</ul>
<p>这不是编的故事，大家在单位里看看周围，就会发现情况和这里说的大同小异，这是在一个单位里自然选择的结果。通常由表达能力好的人去汇报工作和作报告，这样的人也因此更容易被看见，被提拔。</p>
<h2 id="（三）"><a href="#（三）" class="headerlink" title="（三）"></a>（三）</h2><p>很多在外企工作的小伙伴会注意到，很多公司的高管都是印度人，我自己也听过印度人在跟领导汇报工作，发现他们讲的确实比我讲的好太多，抛开英语层面不说，在内容和准备方面，确实有这么几点需要像他们学习的。</p>
<ul>
<li>PPT 做的很好，用结构化的图表达</li>
<li>有核心，有重点</li>
<li>能串起一个故事来，把事情说清楚</li>
</ul>
<p>最后你发现印度人做的你都有，比他做的还好，他没有的你也有。但是，他讲的比你好，另在场的所有人都印象深刻，都觉得很牛逼，只有你呵呵一笑。</p>
<p>作为程序员，吃技术这碗饭，提高技术固然不可缺少，但同时锻炼自己的写作和表达的能力才会更有机会打造自己的品牌，让自己走的更高更远。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>最近自己要准备一个英文的 PPT 给国外的老大做分享，我的领导的审核给了我极大的帮助，并深刻的发现，同样想表达一个意思，自己的表达和领导的表达存在相当大的差异。</p>
<p>举一个例子，为什么用 Jenkins 共享库？来对比修改前后的差别</p>
<p>修改前：In the early stage of doing this work one year ago, I wrote many duplicate code such as sending emails, printing logs. Shared Libraries could help to solve this problem …</p>
<p>修改后：Just like writing any application code, that we need to create functions, subroutines for reuse and sharing purpose. The same logic applies to Jenkins configuration code …</p>
<p>其实没有必要说自己一开始走的一些弯路和错误，虽然很诚实，但这种表达对自己并没有什么好处。另外，从开场白，每页 PPT 之间的衔接，结束语都给出了修改意见。</p>
<p>到这里，我彻底抛开了对写 PPT 曾经有过的偏见，并<strong>认为写好 PPT 是一种能力</strong>。</p>
<p>不说了，继续改我的 PPT、背稿去了 …</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/05/programmers-read-and-write/" data-id="ckc5mu1x7008xswfo7pwx11ce" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/05/programmers-read-and-write/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thought/" rel="tag">Thought</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/write/" rel="tag">write</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/05/jenkins-pipeline-linter-connector" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/jenkins-pipeline-linter-connector/" class="article-date">
  <time datetime="2020-05-23T06:38:59.000Z" itemprop="datePublished">2020-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/jenkins-pipeline-linter-connector/">如何确保提交 Jenkins Pipeline 前没有语法错误</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我在做 Jenkins 声明式流水线开发时常会遇到的问题是：Pipeline 看起来没有问题，当提交到代码仓库后进行 Jenkins 构建时发现原来有语法错误，然后再去修改、提交、构建，结果可能还有有其他没有注意到的语法问题。</p>
<p>为了减少这种因为语法错误而需要频繁像代码库去提交的情况，最好还是在提交之前进行“编译”检查，来查看当前的 Pipeline 是否存在语法错误。</p>
<p>经过调查发现 Jenkins 本身提供了这样的 REST API，可以直接使用这个 API 来对 Pipeline 声明式进行语法校验，这个方式需要执行一长串的 <code>curl</code> 命令，看起来似乎很麻烦，如果能在 IDE 里直接运行就好了。VS Code 作为当前当前最流行 IDE 工具，不负期望，果然是有插件的。</p>
<p>本文介绍了两种方式来实现如何对 Jenkins 声明式流水线在 Jenkins 构建执行前进行语法错误检查，这两种方式的原理都是通过调用 Jenkins REST API 来实现的。</p>
<blockquote>
<p>注意：</p>
<p>当前只有声明式流水线支持语法校验，脚本式流水线不支持。</p>
<p>如果使用 Jenkins 回放功能或是使用 Jenkins Web 页面开发 Pipeline 不存在上述问题。</p>
</blockquote>
<h2 id="REST-API"><a href="#REST-API" class="headerlink" title="REST API"></a>REST API</h2><p>如果你跟我一样为你的项目开发了 Jenkins Shared Libraries，为了方便使用 REST API，不妨可以在该仓库下面创建一个 linter.sh 文件，并将这个文件加到你的 .gitignore 里，这样你可以在这个文件里配置你的用户名和密码就不会意外的被提交到 Git 仓库中。linter.sh 脚本内容如下，供参考。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如何使用</span></span><br><span class="line"><span class="comment"># sh linter.sh your-jenkinsfile-path</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换为你的 Jenkins 用户名</span></span><br><span class="line">username=admin</span><br><span class="line"><span class="comment"># 替换为你的 Jenkins 密码</span></span><br><span class="line">password=admin</span><br><span class="line"><span class="comment"># 替换为你的 Jenkins URL</span></span><br><span class="line">JENKINS_URL=http://localhost:8080/</span><br><span class="line"></span><br><span class="line">PWD=`<span class="built_in">pwd</span>`</span><br><span class="line">JENKINS_FILE=<span class="variable">$1</span></span><br><span class="line"></span><br><span class="line">curl --user <span class="variable">$username</span>:<span class="variable">$password</span> -X POST -F <span class="string">"jenkinsfile=&lt;<span class="variable">$PWD</span>/<span class="variable">$JENKINS_FILE</span>"</span> <span class="variable">$JENKINS_URL</span>/pipeline-model-converter/validate</span><br></pre></td></tr></table></figure>

<p>让我们来测试一下效果 <code>sh linter.sh your-jenkinsfile-path</code></p>
<p>实例 1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sh linter.sh Jenkinsfile</span><br><span class="line">Errors encountered validating Jenkinsfile:</span><br><span class="line">WorkflowScript: 161: Expected a stage @ line 161, column 9.</span><br><span class="line">           stages &#123;</span><br><span class="line">           ^</span><br></pre></td></tr></table></figure>

<p>实例 2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sh linter.sh Jenkinsfile </span><br><span class="line">Errors encountered validating Jenkinsfile:</span><br><span class="line">WorkflowScript: 60: Invalid condition <span class="string">"failed"</span> - valid conditions are [always, changed, fixed, regression, aborted, success, unsuccessful, unstable, failure, notBuilt, cleanup] @ line 60, column 9.</span><br><span class="line">           failed&#123;</span><br><span class="line">           ^</span><br><span class="line"><span class="comment"># 将 failed 改为 failure，再次执行，成功。</span></span><br><span class="line">sh linter.sh Jenkinsfile </span><br><span class="line">Jenkinsfile successfully validated.</span><br></pre></td></tr></table></figure>

<p>果然当 Pipeline 写的很长的时候，总是很难发现有什么地方写的不对。继续修改，直到再次执行没有错误为止。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Jenkinsfile successfully validated.</span><br></pre></td></tr></table></figure>

<h2 id="Jenkins-Pipeline-Linter-Connector-插件"><a href="#Jenkins-Pipeline-Linter-Connector-插件" class="headerlink" title="Jenkins Pipeline Linter Connector 插件"></a><code>Jenkins Pipeline Linter Connector</code> 插件</h2><p>第二种方式就是通用了，只要代码仓库里存在声明式流水线，就可以使用这个插件去验证是否存在语法错误问题。</p>
<h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>在 VSCode 插件里搜索 <code>Jenkins Pipeline Linter Connector</code></p>
<h3 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h3><p>打开 File -&gt; Preferences -&gt; Settings -&gt; Extensions， 找到 <code>Jenkins Pipeline Linter Connector</code>，参考如下配置。</p>
<p><img src="/2020/05/jenkins-pipeline-linter-connector/settings.png" alt></p>
<h3 id="运行插件"><a href="#运行插件" class="headerlink" title="运行插件"></a>运行插件</h3><p>右键 -&gt; Command Palette -&gt; Validate Jenkinsfile</p>
<p>或</p>
<p>执行快捷键 Shift + Alt + V</p>
<h3 id="执行效果"><a href="#执行效果" class="headerlink" title="执行效果"></a>执行效果</h3><p><img src="/2020/05/jenkins-pipeline-linter-connector/example1.gif" alt="Example 1"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>如果使用 VSCode 作为开发工具，推荐使用 <code>Jenkins Pipeline Linter Connector</code> 插件；如果是 Jenkins Shared Libraries 仓库不妨可以创建一个 shell 脚本，通过执行脚本来进行校验。当然，如果只是简单的使用 Jenkinfile 也可以在 Jenkins Web Pipeline 页面里编写，那里自带语法检查。</p>
<p>如果您还有别的方式，欢迎留言分享。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/05/jenkins-pipeline-linter-connector/" data-id="ckc5mu1x6008uswfo8zw9bwia" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/05/jenkins-pipeline-linter-connector/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pipeline/" rel="tag">Pipeline</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/05/nightwatch-v1-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/nightwatch-v1-3/" class="article-date">
  <time datetime="2020-05-17T01:00:00.000Z" itemprop="datePublished">2020-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">Automation</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/nightwatch-v1-3/">Nightwarch v1.3 介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Nightwatch js 是我之前写自动化测试用例使用了很长一段时间的测试框架，我当时的使用 v0.9 版本并且对使用和 API 进行了翻译。作为一名前测试工程师，对于自动化的知识不能不更新下自己的知识库，一转眼 Nightwatch 1.3 版本已经发布了，可以看到它在 GitHub 上的使用和关注度还是很高的。</p>
<p><img src="/2020/05/nightwatch-v1-3/nightwatch-star.png" alt></p>
<p>Nightwarch.js 是一个端到端的基于 Node.js 使用 W3C Webdriver （以前是 Selenium ）的自动化测试框架。它是一个完整的集成解决方案，用于 web 应用程序和网站的端到端测试，以及 Node.js 单元测试和集成测试。</p>
<p>查看了一下 Nightwatch 的发布历史（<a href="https://github.com/nightwatchjs/nightwatch/releases），可以看到这期间修复了不少" target="_blank" rel="noopener">https://github.com/nightwatchjs/nightwatch/releases），可以看到这期间修复了不少</a> Bug，而且在 v1.3 ​版本还新增一些新的功能。</p>
<ul>
<li><p>新增 BDD describe Interface - 可以同时运行以 BDD 描述和导出接口编写的测试，无需其他配置。</p>
</li>
<li><p>新增 <code>assert.not</code> 断言</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原来这么写</span></span><br><span class="line">browser.assert.elementNotPresent()</span><br><span class="line"><span class="comment">// 现在可以这么写</span></span><br><span class="line">browser.assert.not.elementPresent(<span class="string">'.not_present'</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>新增一些 APIs - 比如 <code>getElementProperty</code>, <code>domPropertyContains</code>, <code>domPropertyEquals</code>, <code>.property</code></p>
</li>
<li><p>新增了 CLI 选项 </p>
<ul>
<li><code>--headless</code> - 以无头模式启动浏览器（Chrome或Firefox）</li>
<li><code>--timeout</code> - 设置断言失败之前重试断言的全局超时</li>
</ul>
</li>
</ul>
<p>如果要从 v1.0 之前的版本升级，参阅如下升级指南。</p>
<h2 id="升级和启动"><a href="#升级和启动" class="headerlink" title="升级和启动"></a>升级和启动</h2><p>从 NPM 安装 Nightwatch</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install nightwatch --save-dev</span><br></pre></td></tr></table></figure>

<h3 id="安装浏览器驱动程序"><a href="#安装浏览器驱动程序" class="headerlink" title="安装浏览器驱动程序"></a>安装浏览器驱动程序</h3><h4 id="Geckodriver（Firefox）"><a href="#Geckodriver（Firefox）" class="headerlink" title="Geckodriver（Firefox）"></a>Geckodriver（Firefox）</h4><p>Geckodriver 是用于驱动 Mozilla Firefox 浏览器的 WebDriver 服务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install geckodriver --save-dev</span><br></pre></td></tr></table></figure>

<h4 id="Chromedriver"><a href="#Chromedriver" class="headerlink" title="Chromedriver"></a>Chromedriver</h4><p>Chromedriver 是用于驱动 Google Chrome 浏览器的 WebDriver 服务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install chromedriver --save-dev</span><br></pre></td></tr></table></figure>

<p>或用一行安装所有内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i nightwatch geckodriver chromedriver --save-dev</span><br></pre></td></tr></table></figure>

<h2 id="运行演示测试"><a href="#运行演示测试" class="headerlink" title="运行演示测试"></a>运行演示测试</h2><p>Nightwatch 带有一个 example 文件夹，其中包含一些示例测试。</p>
<p>下面将运行一个基本测试，该测试打开搜索引擎 Ecosia.org，搜索 “nightwatch” 一词，并验证术语 “第一个结果” 是否是 Nightwatch.js 网站。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/nightwatch node_modules/nightwatch/examples/tests/ecosia.js</span><br></pre></td></tr></table></figure>

<p>Windows 用户可能需要运行节点 node node_modules/.bin/nightwatch</p>
<h2 id="手动下载浏览器驱动程序"><a href="#手动下载浏览器驱动程序" class="headerlink" title="手动下载浏览器驱动程序"></a>手动下载浏览器驱动程序</h2><p>Nightwatch 使用兼容 WebDriver 的服务器来控制浏览器。 WebDriver 是 W3C 规范和行业标准，提供了与浏览器进行交互的平台和 HTTP 协议。</p>
<p>Nightwatch 包括对自动管理以下服务的支持：</p>
<h3 id="ChromeDriver"><a href="#ChromeDriver" class="headerlink" title="ChromeDriver"></a>ChromeDriver</h3><ul>
<li>针对 Chrome 浏览器运行测试</li>
<li>下载网址 <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads。" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/downloads。</a></li>
</ul>
<p>从版本 75 开始，Chromedriver 默认启用 W3C Webdriver 协议。如果你现在想坚持使用 JSONWire，请调整 chromeOptions：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">desiredCapabilities : &#123;</span><br><span class="line">  browserName : <span class="string">'chrome'</span>,</span><br><span class="line">  chromeOptions: &#123;</span><br><span class="line">    w3c: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="GeckoDriver"><a href="#GeckoDriver" class="headerlink" title="GeckoDriver"></a>GeckoDriver</h3><p>针对 Mozilla Firefox 浏览器运行测试。下载网址：<a href="https://github.com/mozilla/geckodriver/releases" target="_blank" rel="noopener">https://github.com/mozilla/geckodriver/releases</a>.</p>
<h3 id="Selenium-Standalone-Server"><a href="#Selenium-Standalone-Server" class="headerlink" title="Selenium Standalone Server"></a>Selenium Standalone Server</h3><ul>
<li>在一个地方管理多个浏览器配置，还可以利用 Selenium Grid 服务</li>
<li>可以从 Selenium 发布页面下载 selenium 服务器 jar 文件 selenium-server-standalone-3.x.x.jar：<a href="https://selenium-release.storage.googleapis.com/index.html" target="_blank" rel="noopener">https://selenium-release.storage.googleapis.com/index.html</a></li>
</ul>
<p>重要的是要注意，尽管较早的 Nightwatch 版本（v0.9 及更低版本）需要 Selenium Server，但从 1.0 版本开始不再需要 Selenium。</p>
<p>特定的 WebDriver 设置指南可在 Docs 网站上找到。旧版 Selenium 驱动程序安装指南以及调试说明可以在 Wiki 上找到。</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>示例文件夹中包含示例测试，这些示例演示了多个 Nightwatch 功能的用法。</p>
<p>你还可以查看 nightwatch-website-tests (<a href="https://github.com/nightwatchjs/nightwatch-website-tests" target="_blank" rel="noopener">https://github.com/nightwatchjs/nightwatch-website-tests</a>) 存储库，例如针对 nightwatchjs.org (<a href="https://nightwatchjs.org/" target="_blank" rel="noopener">https://nightwatchjs.org/</a>) 网站的测试。</p>
<h2 id="Nightwatch-单元测试"><a href="#Nightwatch-单元测试" class="headerlink" title="Nightwatch 单元测试"></a>Nightwatch 单元测试</h2><p>Nightwatch 的测试是使用 Mocha 编写的。</p>
<p>1.克隆项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/nightwatchjs/nightwatch.git</span><br><span class="line"><span class="built_in">cd</span> nightwatch</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>2.运行测试</p>
<p>要运行完整的测试套件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>要检查测试范围，请运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run mocha-coverage</span><br></pre></td></tr></table></figure>

<p>然后在浏览器中打开生成的 coverage/index.html 文件。</p>
<h2 id="Nightwatch-使用示例"><a href="#Nightwatch-使用示例" class="headerlink" title="Nightwatch 使用示例"></a>Nightwatch 使用示例</h2><p>以下是我写的一个使用 NightwatchJS 对 Nightwatch 官网 <a href="https://nightwatchjs.org" target="_blank" rel="noopener">https://nightwatchjs.org</a> 进行测试的一个测试示例（已经升级到 v1.3 版本）以展示在实际项目中使用 Nightwatchjs 如何组织目录结构，区别配置全局和本地环境。</p>
<p>示例仓库的 GitHub 地址是 <a href="https://github.com/nightwatchjs-cn/nightwatch-e2e，欢迎" target="_blank" rel="noopener">https://github.com/nightwatchjs-cn/nightwatch-e2e，欢迎</a> Star 和 Fork。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/05/nightwatch-v1-3/" data-id="ckc5mu1x5008qswfo5umb9di3" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/05/nightwatch-v1-3/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">Javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nightwatch/" rel="tag">Nightwatch</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/05/jmeter-performance-testing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/jmeter-performance-testing/" class="article-date">
  <time datetime="2020-05-09T06:28:09.000Z" itemprop="datePublished">2020-05-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">Automation</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/jmeter-performance-testing/">How to use JMeter to do Performance Testing</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Record-JMeter-Scripts"><a href="#Record-JMeter-Scripts" class="headerlink" title="Record JMeter Scripts"></a>Record JMeter Scripts</h2><p>use JMeter’s HTTP(S) Test Script Recorder, please refer to this official document <a href="https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html" target="_blank" rel="noopener">https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html</a></p>
<h2 id="Running-JMeter-Scripts"><a href="#Running-JMeter-Scripts" class="headerlink" title="Running JMeter Scripts"></a>Running JMeter Scripts</h2><ul>
<li><p>Debug scripts on JMeter in GUI Mode</p>
<p>You can debug your record scripts in GUI Mode until there are no errors</p>
</li>
<li><p>run test scripts in Non-GUI Mode(Command Line mode) recommend</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t ..\extras\Test.jmx -l Test.jtl</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Running-JMeter-Scripts-on-Jenkins"><a href="#Running-JMeter-Scripts-on-Jenkins" class="headerlink" title="Running JMeter Scripts on Jenkins"></a>Running JMeter Scripts on Jenkins</h2><h3 id="Need-Tools"><a href="#Need-Tools" class="headerlink" title="Need Tools"></a>Need Tools</h3><ol>
<li>Jmeter - Web Request Load Testing</li>
<li>Jmeter-plugins<ul>
<li>ServerAgent-2.2.1 - PerfMon Agent to use with Standard Set</li>
</ul>
</li>
</ol>
<h3 id="Test-server"><a href="#Test-server" class="headerlink" title="Test server"></a>Test server</h3><p>Two virtual machines</p>
<ul>
<li>System under test</li>
<li>Jmeter execution machine, this server is also Jenkins server</li>
</ul>
<h2 id="Implement"><a href="#Implement" class="headerlink" title="Implement"></a>Implement</h2><h3 id="Develop-test-script"><a href="#Develop-test-script" class="headerlink" title="Develop test script"></a>Develop test script</h3><p>Record Scripts - use JMeter’s HTTP(S) Test Script Recorder, please refer to this official document <a href="https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html" target="_blank" rel="noopener">https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html</a></p>
<h3 id="Create-Jenkins-job-for-running-JMeter-scripts"><a href="#Create-Jenkins-job-for-running-JMeter-scripts" class="headerlink" title="Create Jenkins job for running JMeter scripts"></a>Create Jenkins job for running JMeter scripts</h3><ol>
<li><p>Create a new item-&gt;select Freestyle project</p>
</li>
<li><p>Add build step-&gt;Execute Windows batch command</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//access to jenkins <span class="built_in">jobs</span> workspace, empty the last <span class="built_in">test</span> results</span><br><span class="line">cmd</span><br><span class="line"><span class="built_in">cd</span> C:\Users\peter\.jenkins\<span class="built_in">jobs</span>\TEST-122 Upload large data\workspace</span><br><span class="line">del /Q <span class="string">"jtl"</span>\*</span><br><span class="line">del /Q <span class="string">"PerfMon Metrics Collector"</span>\*</span><br></pre></td></tr></table></figure>
</li>
<li><p>Add build step-&gt;Execute Windows batch command</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//add first run jmeter script <span class="built_in">command</span>, <span class="keyword">if</span> you want run others script you can <span class="built_in">continue</span> to add <span class="string">"Execute Windows batch command"</span></span><br><span class="line">jmeter -n -t script/UploadLargeData-1.jmx -l jtl/UploadLargeData-1.jtl</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure build email - Configure System</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//Configure System, Extended E-mail Notification</span><br><span class="line">SMTP server: smtp.gmail.com</span><br><span class="line"></span><br><span class="line">//Job Configure, Enable <span class="string">"Editable Email Notification"</span></span><br><span class="line">Project Recipient List: xianpeng.shen@gmail.com</span><br><span class="line">Project Reply-To List: <span class="variable">$DEFAULT_REPLYTO</span></span><br><span class="line">Content Type: HTML (text/html)</span><br><span class="line">Default Subject:<span class="variable">$DEFAULT_SUBJECT</span></span><br><span class="line">Default Content: <span class="variable">$&#123;SCRIPT, template="groovy-html.template"&#125;</span></span><br><span class="line"></span><br><span class="line">//Advance setting</span><br><span class="line">Triggers: Always</span><br><span class="line">          Send to Recipient List</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Generate-test-report"><a href="#Generate-test-report" class="headerlink" title="Generate test report"></a>Generate test report</h3><p>JMeter-&gt;Add listener-&gt;add jp@gc - PerfMon Metrics Collector, browse Test.jtl, click right key on graph Export to CSV</p>
<h3 id="Analyze-test-results"><a href="#Analyze-test-results" class="headerlink" title="Analyze test results"></a>Analyze test results</h3><p>Introduction test scenarios</p>
<p>Using 1, 5, 10, 20, 30, (50) users loading test, record every group user test results</p>
<blockquote>
<p>Glossary</p>
<ul>
<li>Sample(label) - This indicates the number of virtual users per request.</li>
<li>Average - It is the average time taken by all the samples to execute specific label</li>
<li>Median - is a number which divides the samples into two equal halves.</li>
<li>%_line - is the value below which 90, 95, 99% of the samples fall.</li>
<li>Min - The shortest time taken by a sample for specific label.</li>
<li>Max - The longest time taken by a sample for specific label.</li>
<li>Error% - percentage of failed tests.</li>
<li>Throughput - how many requests per second does your server handle. Larger is better.</li>
<li>KB/Sec - it is the Throughput measured in Kilobytes per second.</li>
</ul>
</blockquote>
<p>Example: Test results of each scenario shown in the following table</p>
<table>
<thead>
<tr>
<th>User</th>
<th># Samples</th>
<th>Average</th>
<th>Median</th>
<th>90% Line</th>
<th>95% LIne</th>
<th>Min</th>
<th>Max</th>
<th>Error %</th>
<th>Throughput</th>
<th>Received</th>
<th>Send KB/sec</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>31</td>
<td>348</td>
<td>345</td>
<td>452</td>
<td>517</td>
<td>773</td>
<td>5</td>
<td>773</td>
<td>0.00%</td>
<td>2.85215</td>
<td>2.5</td>
</tr>
<tr>
<td>5</td>
<td>155</td>
<td>1166</td>
<td>1164</td>
<td>1414</td>
<td>1602</td>
<td>1639</td>
<td>9</td>
<td>1821</td>
<td>0.00%</td>
<td>4.26445</td>
<td>3.73</td>
</tr>
<tr>
<td>10</td>
<td>310</td>
<td>2275</td>
<td>2299</td>
<td>2687</td>
<td>2954</td>
<td>3671</td>
<td>20</td>
<td>4104</td>
<td>0.00%</td>
<td>4.38547</td>
<td>3.84</td>
</tr>
<tr>
<td>20</td>
<td>620</td>
<td>4479</td>
<td>4620</td>
<td>5113</td>
<td>6152</td>
<td>6435</td>
<td>39</td>
<td>6571</td>
<td>0.00%</td>
<td>4.42826</td>
<td>3.88</td>
</tr>
<tr>
<td>30</td>
<td>930</td>
<td>6652</td>
<td>6899</td>
<td>7488</td>
<td>9552</td>
<td>10051</td>
<td>4</td>
<td>10060</td>
<td>0.00%</td>
<td>4.46776</td>
<td>3.91</td>
</tr>
</tbody></table>
<p>Test results analysis chart</p>
<p><img src="/2020/05/jmeter-performance-testing/response-chart.png" alt="Response Chart"> <img src="/2020/05/jmeter-performance-testing/PerMon-Metrics.png" alt="PerMon Metrics"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/05/jmeter-performance-testing/" data-id="ckc5mu1x5008nswfo5yc1249y" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/05/jmeter-performance-testing/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jmeter/" rel="tag">JMeter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/" rel="tag">performance</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  
    <article id="post-2020/05/sync-from-bitbucket-to-github" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/sync-from-bitbucket-to-github/" class="article-date">
  <time datetime="2020-05-05T08:54:09.000Z" itemprop="datePublished">2020-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/sync-from-bitbucket-to-github/">Synchronize from Bitbucket to GitHub via Jenkins</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>最近我们团队需要将一些示例和例子从内部的 Bitbucket 同步到 GitHub。我了解 GitHub 可以创建公共的或是私人的仓库，但我们需要保持以下两点</p>
<ul>
<li>只分享我们想给客户分享的内容</li>
<li>不改变当前的工作流程，即继续使用 Bitbucket</li>
</ul>
<p>因此我们需要在 GitHub 上创建相应的仓库，然后将内部 Bitbucket 仓库中对应的 master 分支定期的通过 CI job 同步到 BitHub 上去。</p>
<p><img src="/2020/05/sync-from-bitbucket-to-github/sync-diagrom.png" alt></p>
<h3 id="分支策略"><a href="#分支策略" class="headerlink" title="分支策略"></a>分支策略</h3><p>首先，需要对 Bitbucket 进行分支权限设置</p>
<ul>
<li>master 分支只允许通过 Pull Request 来进行修改</li>
<li>Pull Request 默认的 reviewer 至少需要一人，并且只有同意状态才允许合并</li>
</ul>
<p>其次，为了方便产品、售后等人员使用，简化分支策略如下</p>
<ol>
<li>从 master 分支上创建 feature 或是 bugfix 分支（取决于你的修改目的）</li>
<li>然后将你的更改提交到自己的 feature 或 bugfix 分支</li>
<li>在你自己的分支通过测试后，提交 Pull Request 到 master 分支</li>
<li>当 reviewer 同意状态，才能进行合并进入到 master 分支</li>
</ol>
<p><img src="/2020/05/sync-from-bitbucket-to-github/branch-strategy.png" alt="分支策略"></p>
<h3 id="Jenkins-Pipeline"><a href="#Jenkins-Pipeline" class="headerlink" title="Jenkins Pipeline"></a>Jenkins Pipeline</h3><p>基于这样的工作不是特别的频繁，也为了方便维护 Jenkins Pipeline 的简单和易于维护，我没有在需要同步的每个仓库里添加 <code>Jenkinsfile</code> 或在 Bitbucket 里添加 <code>webhooks</code>。有以下几点好处：</p>
<ul>
<li>只创建一个 Jenkins Job，用一个 <code>Jenkinsfile</code> 满足所有仓库的同步</li>
<li>减少了冗余的 <code>Jenkinsfile</code> 的代码，修改时只需更维护一个文件</li>
<li>不需要在每个仓库里添加一个 <code>Jenkinsfile</code>，更纯粹的展示示例，避免给非 IT 人员造成困扰</li>
</ul>
<p>不足之处，不能通过 SCM 来触发构建，如果想通过 <code>webhooks</code> 来触发，有的公司需要申请权限来添加 <code>webhooks</code> 比较麻烦；另外可能无法区分从哪个仓库发来的请求，实现指定仓库的同步。</p>
<p>因此如果不是特别频繁的需要同步，提供手动或是定时同步即可。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这个 Jenkinsfile 是用来将 Bitbucket 仓库的 master 分支同步到 GitHub 仓库的 master 分支</span></span><br><span class="line"><span class="comment">// This Jenkinsfile is used to synchronize Bitbucket repositories master branches to GitHub repositories master branches.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Library</span>(<span class="string">'jenkins-shared-library@develop'</span>) _</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> email = <span class="keyword">new</span> org.cicd.email()</span><br><span class="line"></span><br><span class="line">pipeline &#123;</span><br><span class="line"></span><br><span class="line">  agent &#123;</span><br><span class="line">    label <span class="string">"main-slave"</span></span><br><span class="line">  &#125;</span><br><span class="line">  parameters &#123;</span><br><span class="line">    booleanParam(<span class="string">defaultValue:</span> <span class="literal">false</span>, <span class="string">name:</span> <span class="string">'git-repo-win'</span>, <span class="string">description:</span> <span class="string">'Sync internal git-repo-win master branch with external git-repo-win on GitHub'</span>)</span><br><span class="line">    booleanParam(<span class="string">defaultValue:</span> <span class="literal">true</span>,  <span class="string">name:</span> <span class="string">'git-repo-lin'</span>, <span class="string">description:</span> <span class="string">'Sync internal git-repo-lin master branch with external git-repo-lin on GitHub'</span>)</span><br><span class="line">    booleanParam(<span class="string">defaultValue:</span> <span class="literal">false</span>, <span class="string">name:</span> <span class="string">'git-repo-aix'</span>, <span class="string">description:</span> <span class="string">'Sync internal git-repo-aix master branch with external git-repo-aix on GitHub'</span>)</span><br><span class="line">    booleanParam(<span class="string">defaultValue:</span> <span class="literal">false</span>, <span class="string">name:</span> <span class="string">'git-repo-sol'</span>, <span class="string">description:</span> <span class="string">'Sync internal git-repo-sol master branch with external git-repo-sol on GitHub'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  options &#123;</span><br><span class="line">    timestamps()</span><br><span class="line">    buildDiscarder(logRotator(<span class="string">numToKeepStr:</span><span class="string">'50'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(<span class="string">"Synchronous master branch"</span>)&#123;</span><br><span class="line">      steps&#123;</span><br><span class="line">        script &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            params.each &#123; key, value -&gt;</span><br><span class="line">              <span class="keyword">def</span> repoName = <span class="string">"$key"</span></span><br><span class="line">              <span class="keyword">if</span> ( value == <span class="literal">true</span>) &#123;</span><br><span class="line">                echo <span class="string">"Start synchronizing $key Bitbucket repository."</span></span><br><span class="line">                sh <span class="string">"""</span></span><br><span class="line"><span class="string">                rm -rf $&#123;repoName&#125;</span></span><br><span class="line"><span class="string">                return_status=0</span></span><br><span class="line"><span class="string">                git clone -b master ssh://git@git.your-company.com:7999/~xshen/$&#123;repoName&#125;.git</span></span><br><span class="line"><span class="string">                cd $&#123;repoName&#125;</span></span><br><span class="line"><span class="string">                git config user.name "Sync Bot"</span></span><br><span class="line"><span class="string">                git config user.email "bot@your-company.com"</span></span><br><span class="line"><span class="string">                git remote add github git@github.com:shenxianpeng/$&#123;repoName&#125;.git</span></span><br><span class="line"><span class="string">                git push -u github master</span></span><br><span class="line"><span class="string">                return_status="\$?"</span></span><br><span class="line"><span class="string">                if [ \$return_status -eq 0 ] ; then</span></span><br><span class="line"><span class="string">                  echo "Synchronize $&#123;repoName&#125; from Bitbucket to GitHub success."</span></span><br><span class="line"><span class="string">                  cd ..</span></span><br><span class="line"><span class="string">                  rm -rf $&#123;repoName&#125;</span></span><br><span class="line"><span class="string">                  exit 0</span></span><br><span class="line"><span class="string">                else</span></span><br><span class="line"><span class="string">                  echo "Synchronize $&#123;repoName&#125; from Bitbucket to GitHub failed."</span></span><br><span class="line"><span class="string">                  exit 1</span></span><br><span class="line"><span class="string">                fi"""</span></span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                echo <span class="string">"$&#123;repoName&#125; parameter value is $value, skip it."</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cleanWs()</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            echo <span class="string">"Some error occurs during synchronizing $key process."</span></span><br><span class="line">          &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            email.Send(currentBuild.currentResult, env.CHANGE_AUTHOR_EMAIL)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上的 <code>Jenkinsfile</code> 的主要关键点是这句 <code>params.each { key, value -&gt;  }</code>，可以通过对构建时选择参数的进行判断，如果构建时参数已勾选，则会执行同步脚本；否则跳过同步脚本，循环到下一个参数进行判断，这样就实现了可以对指定仓库进行同步。</p>
<hr>
<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Recently our team need to share code from internal Bitbucket to external GitHub. I know GitHub can create private and public repository, but we have these points want to keep.</p>
<ul>
<li>only share the code what we want to share</li>
<li>not change current work process, continue use Bitbucket.</li>
</ul>
<p>So we have created corresponding repositories in the internal Bitbucket, and the master branches of these repositories will periodically synchronize with the master branches of corresponding repositories on GitHub via Jenkins job.</p>
<h2 id="Branch-Strategy"><a href="#Branch-Strategy" class="headerlink" title="Branch Strategy"></a>Branch Strategy</h2><p>Then the work process will be like</p>
<ol>
<li><p>Create a feature or bugfix branch (it depends on the purpose of your modification).</p>
</li>
<li><p>Commit changes to your feature/bugfix branch.</p>
</li>
<li><p>Please pass your feature/bugfix branch test first then create a Pull Request from your branch to master branch, at least one reviewer is required by default.</p>
</li>
<li><p>After the reviewer approved, you or reviewer could merge the Pull Request, then the changes will be added to the master branch.</p>
</li>
</ol>
<p>Timing trigger CI job will sync code from internal repositories master branch to GitHub master branch by default. also support manual trigger.</p>
<p><img src="/2020/05/sync-from-bitbucket-to-github/branch-strategy.png" alt="Branch Strategy"></p>
<h2 id="Jenkins-Job"><a href="#Jenkins-Job" class="headerlink" title="Jenkins Job"></a>Jenkins Job</h2><p>Base on this work is not very frequency, so I want make the Jenkins job simple and easy to maintain, so I don’t create every <code>Jenkinsfile</code> for every Bitbucket repositories.</p>
<p>Pros</p>
<ul>
<li>Only one <code>Jenkinsfile</code> for all Bitbucket repositories.</li>
<li>Less duplicate code, less need to change when maintenance.</li>
<li>Don’t need to add <code>Jenkinsfile</code> into very Bitbucket repositories.</li>
</ul>
<p>Cons</p>
<ul>
<li>Can not support SCM trigger, in my view this need add <code>Jenkinsfile</code> into repository.</li>
</ul>
<p>The main part for this <code>Jenkinsfile</code> is below, use this function <code>params.each { key, value -&gt; }</code> can by passing in parameters when start Jenkins build.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenxianpeng.github.io/2020/05/sync-from-bitbucket-to-github/" data-id="ckc5mu1x80094swfohtn1bhr2" class="article-share-link">Share</a>
      
        <a href="https://shenxianpeng.github.io/2020/05/sync-from-bitbucket-to-github/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bitbucket/" rel="tag">Bitbucket</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/" rel="tag">GitHub</a></li></ul>

    </footer>
    
    <script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </div>
  
</article>
  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/">next</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">Automation</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/devops/">DevOps</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">Git</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">Hexo</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jenkins/">Jenkins</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linuxunix/">LinuxUnix</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mynotes/">MyNotes</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/snippet/">Snippet</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/aix/" style="font-size: 10px;">AIX</a> <a href="/tags/ansicolor/" style="font-size: 10px;">AnsiColor</a> <a href="/tags/artifactory/" style="font-size: 13.33px;">Artifactory</a> <a href="/tags/authorization/" style="font-size: 10px;">Authorization</a> <a href="/tags/automation/" style="font-size: 17.78px;">Automation</a> <a href="/tags/azure/" style="font-size: 10px;">Azure</a> <a href="/tags/batch/" style="font-size: 10px;">Batch</a> <a href="/tags/bitbucket/" style="font-size: 12.22px;">Bitbucket</a> <a href="/tags/blackduck/" style="font-size: 10px;">Blackduck</a> <a href="/tags/blog/" style="font-size: 12.22px;">Blog</a> <a href="/tags/branch/" style="font-size: 10px;">Branch</a> <a href="/tags/c/" style="font-size: 14.44px;">C</a> <a href="/tags/cd/" style="font-size: 10px;">CD</a> <a href="/tags/ci/" style="font-size: 10px;">CI</a> <a href="/tags/cleanup/" style="font-size: 10px;">Cleanup</a> <a href="/tags/codecoverage/" style="font-size: 11.11px;">CodeCoverage</a> <a href="/tags/detect/" style="font-size: 10px;">Detect</a> <a href="/tags/devops/" style="font-size: 12.22px;">DevOps</a> <a href="/tags/docker/" style="font-size: 12.22px;">Docker</a> <a href="/tags/flask/" style="font-size: 10px;">Flask</a> <a href="/tags/framework/" style="font-size: 10px;">Framework</a> <a href="/tags/git/" style="font-size: 16.67px;">Git</a> <a href="/tags/github/" style="font-size: 10px;">GitHub</a> <a href="/tags/hp-ux/" style="font-size: 10px;">HP-UX</a> <a href="/tags/hexo/" style="font-size: 15.56px;">Hexo</a> <a href="/tags/interview/" style="font-size: 10px;">Interview</a> <a href="/tags/jfrog/" style="font-size: 12.22px;">JFrog</a> <a href="/tags/jmeter/" style="font-size: 10px;">JMeter</a> <a href="/tags/java/" style="font-size: 10px;">Java</a> <a href="/tags/javascript/" style="font-size: 12.22px;">Javascript</a> <a href="/tags/jenkins/" style="font-size: 20px;">Jenkins</a> <a href="/tags/linux/" style="font-size: 11.11px;">Linux</a> <a href="/tags/nfs/" style="font-size: 10px;">NFS</a> <a href="/tags/nightwatch/" style="font-size: 18.89px;">Nightwatch</a> <a href="/tags/pipeline/" style="font-size: 16.67px;">Pipeline</a> <a href="/tags/python/" style="font-size: 11.11px;">Python</a> <a href="/tags/release/" style="font-size: 10px;">Release</a> <a href="/tags/selenium/" style="font-size: 10px;">Selenium</a> <a href="/tags/shell/" style="font-size: 12.22px;">Shell</a> <a href="/tags/solaris/" style="font-size: 10px;">Solaris</a> <a href="/tags/squash/" style="font-size: 10px;">Squash</a> <a href="/tags/squishcoco/" style="font-size: 10px;">Squishcoco</a> <a href="/tags/stats/" style="font-size: 11.11px;">Stats</a> <a href="/tags/summary/" style="font-size: 10px;">Summary</a> <a href="/tags/synopsys/" style="font-size: 10px;">Synopsys</a> <a href="/tags/test/" style="font-size: 10px;">Test</a> <a href="/tags/testng/" style="font-size: 10px;">TestNG</a> <a href="/tags/thought/" style="font-size: 12.22px;">Thought</a> <a href="/tags/tips/" style="font-size: 11.11px;">Tips</a> <a href="/tags/translate/" style="font-size: 10px;">Translate</a> <a href="/tags/troubleshooting/" style="font-size: 13.33px;">Troubleshooting</a> <a href="/tags/unix/" style="font-size: 12.22px;">UNIX</a> <a href="/tags/ubuntu/" style="font-size: 12.22px;">Ubuntu</a> <a href="/tags/vpn/" style="font-size: 10px;">VPN</a> <a href="/tags/virtualbox/" style="font-size: 10px;">VirtualBox</a> <a href="/tags/webhooks/" style="font-size: 11.11px;">Webhooks</a> <a href="/tags/work/" style="font-size: 14.44px;">Work</a> <a href="/tags/cppcheck/" style="font-size: 10px;">cppcheck</a> <a href="/tags/multi-branch/" style="font-size: 10px;">multi-branch</a> <a href="/tags/performance/" style="font-size: 10px;">performance</a> <a href="/tags/vscode/" style="font-size: 11.11px;">vscode</a> <a href="/tags/write/" style="font-size: 10px;">write</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/about-my-wechat-official-account/">一名软件测试工程师的成长之路</a>
          </li>
        
          <li>
            <a href="/2020/06/Jenkins-tips-2/">《Jenkins Tips 002》 处理 Shell 返回的字符串成字符数组</a>
          </li>
        
          <li>
            <a href="/2020/06/Jenkins-tips-1/">《Jenkins Tips 001》 忽略 Shell 步骤中的故障</a>
          </li>
        
          <li>
            <a href="/2020/06/vm-status-check-via-jenkins/">这也能用Jenkins？快速实现一个定期批量登录远程虚拟机并支持添加新的主机名称的Job</a>
          </li>
        
          <li>
            <a href="/2020/06/Java-net-SocketException-on-AIX/">解决 Jenkins Artifactory Plugin 仅在 AIX 上传制品到 https 协议的 Artifactory 失败的问题</a>
          </li>
        
          <li>
            <a href="/2020/05/programmers-read-and-write/">从 “会写程序的干不过会写PPT的” —— 聊程序员写作</a>
          </li>
        
          <li>
            <a href="/2020/05/jenkins-pipeline-linter-connector/">如何确保提交 Jenkins Pipeline 前没有语法错误</a>
          </li>
        
          <li>
            <a href="/2020/05/nightwatch-v1-3/">Nightwarch v1.3 介绍</a>
          </li>
        
          <li>
            <a href="/2020/05/jmeter-performance-testing/">How to use JMeter to do Performance Testing</a>
          </li>
        
          <li>
            <a href="/2020/05/sync-from-bitbucket-to-github/">Synchronize from Bitbucket to GitHub via Jenkins</a>
          </li>
        
          <li>
            <a href="/2020/04/Bitbucket-webhooks-cn/">Jenkins 与 Bitbucket Webhooks 的配置和使用</a>
          </li>
        
          <li>
            <a href="/2020/04/Bitbucket-webhooks/">Bitbucket Webhooks Configuration</a>
          </li>
        
          <li>
            <a href="/2020/04/Jenkins-troubleshooting-1/">三种方法解决 Jenkins 声明式流水线 Exception Method code too large !</a>
          </li>
        
          <li>
            <a href="/2020/04/Top-30-DevOps-Interview-Questions/">DevOps Top 30+ 面试问题</a>
          </li>
        
          <li>
            <a href="/2020/03/Best-14-CI-CD-Tools-in-2020/">2020年务必知道的最好用的14款CI/CD工具</a>
          </li>
        
          <li>
            <a href="/2020/03/maintaining-a-git-gepository/">如何给你的 Git 仓库“瘦身”</a>
          </li>
        
          <li>
            <a href="/2020/02/cppcheck/">一款免费的 C/C++ 静态代码分析工具 Cppcheck 与 Jenkins 集成</a>
          </li>
        
          <li>
            <a href="/2020/02/Setup-Linux-in-VirtualBox/">用 VirtualBox 配置一台 Linux 虚拟机</a>
          </li>
        
          <li>
            <a href="/2020/02/linux-tips/">最有用的 Linux 命令行技巧</a>
          </li>
        
          <li>
            <a href="/2020/02/hpxu-tips/">HP-UX 安装工具以及一些使用总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
</aside>
<script data-ad-client="ca-pub-3986315287795783" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        
      </div>
      

<!-- 
  <script>
    var disqus_shortname = 'shenxianpeng';
    
    var disqus_url = 'https://shenxianpeng.github.io/about/index.html';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//go.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
 -->

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Xianpeng Shen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

<div id="disqus_thread"></div>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
  <script>
    var disqus_shortname = 'shenxianpeng';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>